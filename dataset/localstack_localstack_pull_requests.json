[
    {
        "merged": true,
        "additions": 4,
        "deletions": 8,
        "changed_files": 2,
        "created_at": "2023-10-20T08:51:47Z",
        "closed_at": "2023-10-20T18:43:54Z",
        "merged_at": "2023-10-20T18:43:54Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nWhen using values other than `000000000000` for account ID or `us-east-1` for region, sns tests should still create the consequent resources in this accounts and region.\r\n\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\nThis PR fixes `tests.aws.services.apigateway.test_apigateway_sqs` test cases when using non-default region and account id by:\r\n- fixing `create_sqs_queue`, adding `region_name` and `aws_access_key_id` to the `connect_to()` client. \r\n- use queue arn for various sqs operations, this helps us fetching correct region and account id from arn instead of falling back to the default values. \r\n- remove `create_sqs_queue` in `localstack/utils/aws/resources.py`.\r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 9,
        "deletions": 19,
        "changed_files": 1,
        "created_at": "2023-10-20T01:45:19Z",
        "closed_at": "2023-10-20T07:59:47Z",
        "merged_at": "2023-10-20T07:59:47Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nFollow up from  #9370, to add proper region support to S3 notifications, I've added the region to the client's creation, but also added the account id as done in #9023 for sending notifications. I'll trigger an -ext run on this PR and link it here. Sorry!\r\n\r\nhttps://github.com/localstack/localstack-ext/actions/runs/6582528350\r\n\r\nhttps://github.com/localstack/localstack-ext/runs/17885245621\r\nS3 notifications are fixed, only appsync remains\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\nRemove the account id from the client creation to trigger test event.\r\n\r\nAlso removed the account id from the client's creation to send to SQS/Lambda/SNS. But this might create issue again with multi account? \\cc @viren-nadkarni why was this change made in the first place?\r\n\r\nI believe that SNS/Lambda/SQS will retrieve the account id from the ARN passed and not from the credentials of the request to then retrieve the resource in their store, is that right?\r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 6,
        "deletions": 4,
        "changed_files": 3,
        "created_at": "2023-10-19T20:15:57Z",
        "closed_at": "2023-10-20T11:20:59Z",
        "merged_at": "2023-10-20T11:20:59Z",
        "body": "## Motivation\r\n\r\nAdd mypy types for `appconfigdata` service client. Adding the `appconfigdata` provider implementation is done elsewhere - part of a customer issue we're working on with @cabeaulac . Will also address https://github.com/localstack/localstack/issues/6891\r\n\r\n## Changes\r\n\r\n* Add mypy types for `appconfigdata` service client\r\n\r\nThe PR also sneaks in a few tiny changes\r\n* add root cause exception in `LambdaService.invoke` - this has proven helpful for some recent persistence tests debugging /cc @giograno \r\n* fix some f-strings and return types\r\n\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 598,
        "deletions": 0,
        "changed_files": 5,
        "created_at": "2023-10-19T14:28:52Z",
        "closed_at": "2023-10-20T15:41:44Z",
        "merged_at": "2023-10-20T15:41:44Z",
        "body": "## Changes\r\nAdded AWS::Redshift::Cluster resource provider support to CloudFormation\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 18,
        "deletions": 3,
        "changed_files": 2,
        "created_at": "2023-10-19T13:41:26Z",
        "closed_at": "2023-10-20T12:22:24Z",
        "merged_at": "2023-10-20T12:22:24Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\n\r\nWe are investigating performance issues with dynamodb, and there it will be helpful to control which port dynamodb is created on. Moreover, this will enable workarounds where people may need to access ddb local directly. Tested locally.\r\n\r\ncc @bentsku \r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\n\r\n* add `DYNAMODB_LOCAL_PORT` port config, that is used if not None or > 0\r\n* also sneaked in a changed that avoids a call to `random` when using `put_item`\r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 174,
        "deletions": 331,
        "changed_files": 176,
        "created_at": "2023-10-19T11:31:39Z",
        "closed_at": "2023-10-20T08:58:05Z",
        "merged_at": "2023-10-20T08:58:05Z",
        "body": "## Motivation\r\nThis PR aims at upgrading our dev and test python infrastructure to the latest versions / tools:\r\n- Use `ruff` instead of `flake8`, `isort`, `autoflake`\r\n- Upgrade `pre-commit`\r\n- Upgrade a bunch of other test / dev dependencies (most notably `pytest` and `pre-commit`)\r\n\r\nThis PR supersedes https://github.com/localstack/localstack/pull/9218, which is outdated (it has merge conflicts by now, and does not contain the switch to ruff).\r\n\r\n## Changes\r\nThe changes are separated in 3 commits:\r\n1. Introduce and configure `ruff` instead of `flake8`, `isort`, `autoflake` and update other dependencies.\r\n  - This introduces a quite long list of rule exclusions which caused linting errors in ruff.\r\n  - The plan is to fix most of these issues and reduce the list of exclusions with an upcoming PR (in order to get this PR over the line fast to avoid conflicts).\r\n3. Apply auto-fixes by `ruff`,\r\n4. Apply new formatting with black (due to the major version upgrade).\r\n\r\n## Testing\r\nIf we're \ud83d\udc9a, we are good to go. The applied fixes are all safe and cannot modify any behavior.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 5,
        "deletions": 4,
        "changed_files": 3,
        "created_at": "2023-10-18T16:14:50Z",
        "closed_at": "2023-10-19T09:42:55Z",
        "merged_at": "2023-10-19T09:42:55Z",
        "body": "## Motivation\r\n\r\nAdopt the new gateway-listen network configuration instead of `config.EDGE_PORT` (deprecated, at least as a configurable variable)\r\n\r\n## Changes\r\n\r\nChange `config.EDGE_PORT` to `GATEWAY_LISTEN[0].port`\r\n\r\n## Discussion\r\n\r\n* The K8 executor still uses `config.get_edge_port_http()` but that will be migrated with the deprecation of `EDGE_PORT_HTTP` upon 3.0.\r\n* The old provider still uses `EDGE_PORT` but will be removed anyways upon 3.0",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 65,
        "deletions": 2,
        "changed_files": 4,
        "created_at": "2023-10-18T15:46:42Z",
        "closed_at": "2023-10-19T14:02:38Z",
        "merged_at": "2023-10-19T14:02:38Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nReported in #9387: when creating a multipart upload on an existing key, we would not truncate the key before overwrite it like we do when calling `PutObject`.\r\n\r\nThis was due to our optimization with `append` on the StoredS3Object, which was stateless, and bad oversight on my side.\r\n\r\nFlow for the sample in the linked issue is:\r\n- CreateMultipart on key `test`\r\n- UploadPart with value \"first\"\r\n- CompletePart on key `test`\r\n- GetObject on key `test` -> value is \"first\"\r\n- CreateMultipart again on key `test`\r\n- UploadPart with the result of previous GetObject (\"first\") + \"second\" -> value = \"firstsecond\"\r\n- CompleteMultipart on key `test`\r\n- GetObject on key `test`, result should be \"firstsecond\"\r\n\r\nIssue was appending on top of existing key, resulting in \"firstfirstsecond\".\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\nAdded a new `truncate` method to the base `S3StoredObject` to be able to reset the file from the StoredMultipart.\r\nAdd `s3_object.seek(0) + s3_object.truncate()` in `complete_multipart` so that the existing file object representing the key is properly truncated before we write and we do not append the multipart on top of the existing key. \r\n\r\nAdded an AWS validated test validating this behaviour.\r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 1,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-10-18T13:56:50Z",
        "closed_at": "2023-10-19T08:21:52Z",
        "merged_at": null,
        "body": "This pull request adds Elestio as a deploy/installation options along with others\r\n\r\ncloses #9385 ",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 8,
        "deletions": 13,
        "changed_files": 6,
        "created_at": "2023-10-18T13:28:27Z",
        "closed_at": "2023-10-19T04:36:30Z",
        "merged_at": "2023-10-19T04:36:30Z",
        "body": "This PR removes a redundant SQS ARN helper.\r\n\r\nExt codebase is not impacted.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 2,
        "changed_files": 3,
        "created_at": "2023-10-18T13:21:09Z",
        "closed_at": "2023-10-19T06:13:11Z",
        "merged_at": "2023-10-19T06:13:11Z",
        "body": "## Motivation\r\nCurrently, some GitHub workflows which are automatically triggered when a PR is created are failing due to the missing access to certain secrets\r\nThis PR should fix these issues such that workflow executions triggered by PRs coming from community forks can get fully green (after they have been approved by a contributor).\r\n/cc @joe4dev \r\n\r\n## Changes\r\n- Disables the Pro integration tests for community forks.\r\n- Changes the workflow trigger for the label checks from `pull_request` to `pull_request_target`.\r\n  - This is similar to the `pr-cla` action.\r\n  - This trigger is executed on the default branch of the target repo, rather than in the branch, which prevents secret leaking.\r\n  - This is why these workflows _can_  access secrets other than the default github token.\r\n  - More info on `pull_request_target` can be found here: https://docs.github.com/en/actions/using-workflows/events-that-trigger-workflows#pull_request_target\r\n\r\n## Testing\r\n- These changes are somewhat hard to test, since they need to be merged to the default branch before they can be properly tested if the execution works for forks now.\r\n- Once this PR is merged, we can evaluate if the pipelines are now working for community raised fork-PRs.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 16,
        "changed_files": 7,
        "created_at": "2023-10-18T11:41:47Z",
        "closed_at": "2023-10-18T14:49:36Z",
        "merged_at": "2023-10-18T14:49:36Z",
        "body": "## Motivation\r\nWhile checking covered / uncovered `CODEOWNERS` files in this repo (for https://github.com/localstack/localstack/pull/9379), I realized that:\r\n- Some cloudformation resources for Lambda have been added to the old module name `localstack.services.awslambda` instead of `localstack.services.lambda_` (introduced with #8861)\r\n- There is a `.env-exporter` file which was created quite some time ago with https://github.com/localstack/localstack/pull/3925, which might not be used anywhere / by anyone? /cc @whummer \r\n \r\n## Changes\r\n- Moves and renames the AWS Lambda CloudFormation resources created in https://github.com/localstack/localstack/pull/9100 to the new module.\r\n- Removes the `.env-exporter` file.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 34,
        "deletions": 11,
        "changed_files": 1,
        "created_at": "2023-10-18T11:33:32Z",
        "closed_at": "2023-10-19T08:10:33Z",
        "merged_at": "2023-10-19T08:10:33Z",
        "body": "## Motivation\r\nWe are more and more using the `CODEOWNERS` file in order to define code ownership in a machine readable way, which then can be used by different tools.\r\nThis can be GitHub by using it to auto-assigning PR reviewers, but it can also be used by tooling on our side in order to implement some kind of automation / notifications / ... around it.\r\nThis PR is another iteration on reducing the amount of uncovered files in this repo.\r\nThe enhancements were driven by the validation results created with [mszostok/codeowners-validator](https://github.com/mszostok/codeowners-validator).\r\n\r\n## Changes\r\n- Restructure the CODEOWNERS file a bit.\r\n- Add a few more sections / directories / files.\r\n\r\n/cc affected codeowners @HarshCasper @thrau @dfangl @dominikschubert @steffyP ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 73,
        "deletions": 49,
        "changed_files": 6,
        "created_at": "2023-10-18T09:37:16Z",
        "closed_at": "2023-10-18T19:18:25Z",
        "merged_at": "2023-10-18T19:18:25Z",
        "body": "Depends on https://github.com/localstack/lambda-runtime-init/pull/24\r\n\r\n## Motivation\r\n\r\nThe official AWS lambda-runtime-init received some upstream updates (typically merged in big blobs from their internal repository). We should update our customized localstack version to support the latest features (e.g., response streaming) and updates (e.g., the new Golang version).\r\n\r\nSee https://github.com/localstack/lambda-runtime-init/pull/24\r\n\r\n## Changes\r\n\r\n* Bump Lambda init version\r\n* Improve the `request_id` test to cover a regression where the ID didn't match\r\n* Extract `lambda_report_logs` transformers\r\n* Update logs snapshots to yield individual lines for easier visual and more accurate matching (still missing selective list skip \ud83d\ude3f )\r\n* Standardize Lambda commons test `get_arch`\r\n\r\n## Testing\r\n\r\nSee https://github.com/localstack/lambda-runtime-init/pull/24\r\n\r\n## TODO\r\n\r\n- [x] Wait for full CI run and then follow up on potential issues\r\n\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 212,
        "deletions": 16,
        "changed_files": 5,
        "created_at": "2023-10-17T15:16:17Z",
        "closed_at": "2023-10-19T13:10:16Z",
        "merged_at": "2023-10-19T13:10:16Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nIt had been shown in the multi-account tests that we've had an issue where the `awsRegion` was not correct. It was using the client request region, when it should have been the bucket region.\r\n\r\nAlso, per the documentation for `events`: https://docs.aws.amazon.com/AmazonS3/latest/userguide/ev-events.html, the `region` field for the event should be the bucket region, which means the `events` client needs to be created with the bucket region and not the client region, as the `region` field in the event is from the internal client.\r\n\r\nAlso validated the behaviour with AWS, that the region was of the bucket and not the client.\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\nFix the event payload for SQS/SNS/Lambda to use the region of the bucket for the `awsRegion` field.\r\nFix the region for the `events` client used in the notifier.\r\n\r\nAdd 2 tests to validate AWS behaviour (one created a bucket in another region than the default client for SQS, and one creating a client in a secondary region and the bucket in the default one). \r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 3,
        "changed_files": 2,
        "created_at": "2023-10-17T10:18:40Z",
        "closed_at": "2023-10-17T11:46:35Z",
        "merged_at": "2023-10-17T11:46:35Z",
        "body": "Bumps the docker-base-images group with 2 updates: eclipse-temurin and python.\r\n\r\nUpdates `eclipse-temurin` from `271c139` to `f05c8df`\r\n\r\nUpdates `python` from 3.11.5-slim-bookworm to 3.11.6-slim-bookworm\r\n\r\n\r\nDependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.\r\n\r\n[//]: # (dependabot-automerge-start)\r\n[//]: # (dependabot-automerge-end)\r\n\r\n---\r\n\r\n<details>\r\n<summary>Dependabot commands and options</summary>\r\n<br />\r\n\r\nYou can trigger Dependabot actions by commenting on this PR:\r\n- `@dependabot rebase` will rebase this PR\r\n- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it\r\n- `@dependabot merge` will merge this PR after your CI passes on it\r\n- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it\r\n- `@dependabot cancel merge` will cancel a previously requested merge and block automerging\r\n- `@dependabot reopen` will reopen this PR if it is closed\r\n- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually\r\n- `@dependabot show <dependency name> ignore conditions` will show all of the ignore conditions of the specified dependency\r\n- `@dependabot ignore <dependency name> major version` will close this group update PR and stop Dependabot creating any more for the specific dependency's major version (unless you unignore this specific dependency's major version or upgrade to it yourself)\r\n- `@dependabot ignore <dependency name> minor version` will close this group update PR and stop Dependabot creating any more for the specific dependency's minor version (unless you unignore this specific dependency's minor version or upgrade to it yourself)\r\n- `@dependabot ignore <dependency name>` will close this group update PR and stop Dependabot creating any more for the specific dependency (unless you unignore this specific dependency or upgrade to it yourself)\r\n- `@dependabot unignore <dependency name>` will remove all of the ignore conditions of the specified dependency\r\n- `@dependabot unignore <dependency name> <ignore condition>` will remove the ignore condition of the specified dependency and ignore conditions\r\n\r\n\r\n</details>",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 11,
        "deletions": 9,
        "changed_files": 1,
        "created_at": "2023-10-17T09:09:49Z",
        "closed_at": "2023-10-18T06:30:09Z",
        "merged_at": "2023-10-18T06:30:09Z",
        "body": "## Motivation\r\n\r\nEC2 ModifyLaunchTemplate threw an error saying template not found for a template which could be listed. This only happened when a non-default account ID was used.\r\n\r\nThe cause was the use of a `connect_to()` field which did not take the current request account ID into consideration and instead looked for the template in the default `000000000000` account.\r\n\r\n## Implementation\r\n\r\nThis PR removes the `connect_to()` call and constructs the response in the provider handler.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 13,
        "deletions": 5,
        "changed_files": 1,
        "created_at": "2023-10-17T09:03:18Z",
        "closed_at": "2023-10-19T04:37:21Z",
        "merged_at": "2023-10-19T04:37:21Z",
        "body": "## Motivation\r\n\r\nLambda has trouble resolving VPCs during VPC config construction when requests are made from a non-default account ID.\r\n\r\n## Implementation\r\n\r\nThis PR ensures that Lambda looks for VPCs in the same account/region as the requestor when building VPC config.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 55,
        "deletions": 32,
        "changed_files": 6,
        "created_at": "2023-10-17T08:55:13Z",
        "closed_at": "2023-10-19T04:37:00Z",
        "merged_at": "2023-10-19T04:37:00Z",
        "body": "## Motivation\r\n\r\nLocalStack test suite uses the `TEST_AWS_ACCOUNT_ID` and `TEST_AWS_REGION_NAME` to control the namespace of the test execution. Some of our tests do not run the correct assertions when these config options are set to non-default values.\r\n\r\n## Implementation\r\n\r\nThis PR makes some of the test assertions account/region aware. Specifically, ARN constructions now make use of the proper account/region that was used to create the original testing resource. Plus, there is correct use of client fixtures in places.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-10-17T08:20:37Z",
        "closed_at": "2023-10-18T06:07:34Z",
        "merged_at": "2023-10-18T06:07:34Z",
        "body": "Fixes https://github.com/localstack/localstack/issues/8921\r\n\r\ncc: @giograno \r\n\r\nExt Integration Tests pass :heavy_check_mark: # 2765 ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 76,
        "deletions": 4,
        "changed_files": 3,
        "created_at": "2023-10-17T05:35:52Z",
        "closed_at": "2023-10-20T08:38:38Z",
        "merged_at": "2023-10-20T08:38:38Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nWhen using values other than `000000000000` for account ID or `us-east-1` for region, `sns` tests should still create the consequent resources in this accounts and region.\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\nThis PR fixes all the failing tests in `tests.aws.services.sns.test_sns.py` by:\r\n- removing the use of `get_aws_account_id()` helper.\r\n- use moto internals in `unsubscribe` handler. \r\n- use parsed arn instead of context arn \r\n- add test cases to validate `subscription_arn`\r\n- add checks to validate `subscription_arn` in the handler. \r\n\r\nSee #8204 \r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 107,
        "deletions": 5,
        "changed_files": 3,
        "created_at": "2023-10-16T22:18:44Z",
        "closed_at": "2023-10-18T17:58:01Z",
        "merged_at": "2023-10-18T17:58:01Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\n\r\nA user [asked](https://discuss.localstack.cloud/t/a-way-to-see-invisible-sqs-messages/565) whether it's possible to see invisible messages through the SQS developer endpoint, and I thought this would be a really nice addition. I added delayed messages as well since it made sense.\r\n\r\nIf you now add the new query args to your request like this:\r\n```python\r\nresponse = requests.get(\r\n    \"http://localhost:4566/_aws/sqs/messages\",\r\n    params={\"QueueUrl\": queue_url, \"ShowInvisible\": True, \"ShowDelayed\": True},\r\n    headers={\"Accept\": \"application/json\"},\r\n)\r\n```\r\n\r\nThe endpoint now returns messages like this:\r\n```json\r\n[\r\n    {\r\n        \"MessageId\": \"1c4187cc-f2c9-4f1c-9702-4a3bfaaa4817\",\r\n        \"MD5OfBody\": \"a06498de7fb4bd539c8895748f03175d\",\r\n        \"Body\": \"message-3\",\r\n        \"Attribute\": [\r\n            {\"Name\": \"SenderId\", \"Value\": \"000000000000\"},\r\n            {\"Name\": \"SentTimestamp\", \"Value\": \"1697494407799\"},\r\n            {\"Name\": \"ApproximateReceiveCount\", \"Value\": \"0\"},\r\n            {\"Name\": \"ApproximateFirstReceiveTimestamp\", \"Value\": \"0\"},\r\n            {\"Name\": \"IsVisible\", \"Value\": \"true\"},   <--\r\n            {\"Name\": \"IsDelayed\", \"Value\": \"false\"},  <--\r\n        ],\r\n        \"ReceiptHandle\": \"SQS/BACKDOOR/ACCESS\",\r\n    },\r\n  ...\r\n]\r\n```\r\n\r\nUsing this will feel a bit clumsy, since you have to go through all the attributes of a message every time you want to find out whether they're visible or not, but I think it's a good compromise to get a very simple implementation.\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\n\r\n* The dev endpoint now allows two additional non-standard query arguments `ShowInvisible=true` and `ShowDelayed=true`\r\n* If set, we also add messages from `queue.inflight` and `queue.delayed` into the list of messages to return\r\n* If set, we add a non-standard message attribute `IsVisible` or `IsDelayed`, respectively\r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 62,
        "deletions": 0,
        "changed_files": 4,
        "created_at": "2023-10-16T05:05:23Z",
        "closed_at": "2023-10-16T06:18:54Z",
        "merged_at": "2023-10-16T06:18:54Z",
        "body": "# \ud83d\ude80 ASF Update Report \ud83d\ude80\nThis PR has been automatically generated to update the generated API stubs for our ASF services.\nIt uses the latest code-generator from the _master_ branch ([scaffold.py](https://github.com/localstack/localstack/blob/master/localstack/aws/scaffold.py)) and the latest _published_ version of [botocore](https://github.com/boto/botocore) to re-generate all API stubs which are already present in the `localstack.aws.api` module of the _master_ branch.\n\n## \ud83d\udd04 Updated Services\nThis PR updates the following services:\n- config\n- ec2\n- lambda-\n- transcribe\n\n## \ud83d\udc77\ud83c\udffd Handle this PR\nThe following options describe how to interact with this PR / the auto-update:\n\n\u2714\ufe0f **Accept Changes**\nIf the changes are satisfying, just squash-merge the PR and delete the source branch.\n\n\ud83d\udeab **Ignore Changes**\nIf you want to ignore the changes in this PR, just close the PR and *do not delete* the source branch. The PR will not be opened and a new PR will not be created for as long as the generated code does not change (or the branch is deleted). As soon as there are new changes, a new PR will be created.\n\n\u270f\ufe0f **Adapt Changes**\n*Don't do this.* The APIs are auto-generated. If you decide that the APIs should look different, you have to change the code-generation.\n\n\u23f8\ufe0f **Pause Updates**\nRemove the cron-schedule trigger of the GitHub Action workflow which creates these PRs. The action can then still be triggered manually, but it will not be executed automatically.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 31,
        "deletions": 14,
        "changed_files": 3,
        "created_at": "2023-10-13T14:48:48Z",
        "closed_at": "2023-10-17T18:57:18Z",
        "merged_at": "2023-10-17T18:57:18Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nBy default, we always add and send the CORS headers to LocalStack responses.\r\nHowever, those headers should be sent only when the request has an `Origin` header set, indicating that this is a CORS request. \r\nWe can read more about this here:\r\nhttps://developer.mozilla.org/en-US/docs/Web/HTTP/CORS#the_http_request_headers\r\nhttps://jakearchibald.com/2021/cors/\r\n\r\n> Note that in any access control request, the [Origin](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Origin) header is always sent.\r\n\r\nWhen debugging and checking logs, we always have the CORS headers being sent, and they pollute the logs quite a lot for no benefits.\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\n\r\nAdded a check for the presence of the `Origin` header, and add the headers only if it's there.\r\nAdded the `Vary` header as we conditionally apply CORS headers depending on it.\r\nAdded the credentials header. \r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 6,
        "deletions": 241,
        "changed_files": 1,
        "created_at": "2023-10-13T10:00:55Z",
        "closed_at": "2023-10-16T04:56:49Z",
        "merged_at": "2023-10-16T04:56:49Z",
        "body": "## Motivation\r\n\r\nWe introduced a new internal Boto client library `localstack.aws.connect_to`. Subsequently the codebase was refactored to use this new client library and the old library in `localstack.utils.aws.aws_stack` was marked obsolete.\r\n\r\nThis PR removes these deprecated methods as they are no longer used in either codebases.\r\n\r\nExt Integration Tests passing :heavy_check_mark: # 2735 \r\n\r\n## Related\r\n\r\n- https://github.com/localstack/localstack/pull/8636\r\n- https://github.com/localstack/localstack/pull/8748\r\n- https://github.com/localstack/localstack/pull/8858\r\n- https://github.com/localstack/localstack/pull/9120",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 281,
        "deletions": 162,
        "changed_files": 53,
        "created_at": "2023-10-12T19:04:43Z",
        "closed_at": "2023-10-19T18:37:41Z",
        "merged_at": "2023-10-19T18:37:41Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nWhen dispatching `GetExecutionHistory` calls about some State Machine Execution, the current implementation would compile `previousEventId` values according to a global incremental counter. This logic means that in information about the true event source of any event is often incorrect, especially for distributed workflows such as Map and Parallel states. This PR aims at ensuring that for each event, the true source event id is provided.\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\nIntroduces a `EventHistoryContext` in `Environment` objects. These allow the interpreter to cache the last event id published. As each context object operates in its own evaluation scope, this is information is ensured to not be tampered by the global execution of the program. Values in the context can then be resynchronised with the parent scope during frame closing operations, or skipped through frame deletion operations (see MapRun workflows). \r\nEvaluation logic for map iteration workers is modified to fit this new design, and resolved a number of concurrency issues when closing pool jobs or evaluation stops.\r\nRelated changes extend to other relevant state resolvers such as `state_map` and `state_parallel`.\r\n\r\n## Testing\r\n- removes all `skip_snapshot_verify` for `previous_event_id`\r\n- enables `test_sfn_scenarios` for v2\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 24,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-10-12T10:57:05Z",
        "closed_at": "2023-10-12T13:25:05Z",
        "merged_at": "2023-10-12T13:25:05Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\n\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\n## Motivation\n\nWhen using LocalStack extensions, the CLI can be used to automatically mount the code in the correct place in the container to run dev extensions. This removes the possibility of making changes to LocalStack internals (e.g. to prototype any changes/monkeypatches that are required).\n\n<!-- What notable changes does this PR make? -->\n## Changes\n\n* Add a `--dev-extensions` flag which performs the same steps as the CLI when\n    * `EXTENSION_DEV_MODE=1` is supplied\n    * pro is enabled\n\n<!-- The following sections are optional, but can be useful! \n\n## Testing\n\nDescription of how to test the changes\n\n## TODO\n\nWhat's left to do:\n\n- [ ] ...\n- [ ] ...\n\n-->\n\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-10-12T08:39:04Z",
        "closed_at": "2023-10-12T09:55:17Z",
        "merged_at": "2023-10-12T09:55:17Z",
        "body": "## Motivation\r\n\r\nWhen writing the workshop sample we noticed that it didn't create the necessary event bridge notification configuration.\r\n\r\n- https://docs.aws.amazon.com/AmazonS3/latest/userguide/enable-event-notifications-eventbridge.html\r\n- https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-s3-bucket-notificationconfig-eventbridgeconfig.html\r\n\r\n## Changes\r\n\r\n- Adds support for `EventBridgeConfiguration` to legacy `AWS::S3::Bucket` resource provider\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 138,
        "deletions": 4,
        "changed_files": 4,
        "created_at": "2023-10-11T23:37:35Z",
        "closed_at": "2023-10-12T10:26:35Z",
        "merged_at": "2023-10-12T10:26:35Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nThis PR will add a new internal endpoint to be able to fetch subscription tokens used to confirm a subscription.\r\n\r\nIn case of email and most importantly HTTP(S) subscriptions, a special message is sent to the subscriber with a link to confirm the subscription so that it will receive the messages afterwards.\r\n\r\nHowever, when working with external integrations (like Opsgenie: https://support.atlassian.com/opsgenie/docs/integrate-opsgenie-with-incoming-amazon-sns/), the link sent will most probably be a link to your own localhost (you could always use `HOSTNAME_EXTERNAL` and some way to link it to your own computer, but it's not a given the external integration will go on a link which is not AWS related).\r\n\r\nInstead, we could expose the sent token with the internal endpoint, so that you can manually confirm the subscription with [`ConfirmSubscription`](https://docs.aws.amazon.com/sns/latest/api/API_ConfirmSubscription.html).\r\n\r\nYou could fetch the token with the subscriptionArn and manually confirm it this way:\r\n```bash\r\n$ curl \"http://localhost:4566/_aws/sns/subscription-tokens/arn:aws:sns:us-east-1:000000000000:test-opsgenie:654c8659-2919-4073-9dfd-3b766dbd532d\"\r\n{\"subscription_token\": \"75732d656173742d312f345a7e4e345a7e4e345a7e4e345a7e4e345a7e4e345a\", \"subscription_arn\": \"arn:aws:sns:us-east-1:000000000000:test-opsgenie:654c8659-2919-4073-9dfd-3b766dbd532d\"}%\r\n\r\n$ awslocal sns confirm-subscription --topic-arn arn:aws:sns:us-east-1:000000000000:test-opsgenie --token 75732d656173742d312f345a7e4e345a7e4e345a7e4e345a7e4e345a7e4e345a\r\n{\r\n    \"SubscriptionArn\": \"arn:aws:sns:us-east-1:000000000000:test-opsgenie:654c8659-2919-4073-9dfd-3b766dbd532d\"\r\n}\r\n```\r\n\r\nThis would then enable the subscription and allow you to use the external integration. \r\n\r\nI've done the test with Opsgenie which of course refuse the `SubscriptionConfirmation` message as it points to `localhost:4566`. \r\nI manually confirm the subscription, and after sending a message I can see the alert created. \r\n\r\n```python\r\nsns_client: SNSClient = session.client(\"sns\", endpoint_url=\"http://localhost:4566\")\r\nsns_client.publish(\r\n    TopicArn=\"arn:aws:sns:us-east-1:000000000000:test-opsgenie\",\r\n    Message=\"This is the description of Sns Integration test alert\",\r\n    Subject=\"Sns Integration Test alert\",\r\n    MessageAttributes={\"eventType\": {\"DataType\": \"String\", \"StringValue\": \"create\"}},\r\n)\r\n```\r\nWhich gives:\r\n\r\n<img width=\"1384\" alt=\"Screenshot 2023-10-12 at 01 35 18\" src=\"https://github.com/localstack/localstack/assets/42031100/8d297266-5b04-4316-b365-6c10349abd58\">\r\n\r\nWhich is pretty cool. \r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\nThis adds an internal resource exposing the tokens. Those tokens are never deleted because they can be reused later on, so the filter is nicely useful.\r\nA doc entry will need to be made in a follow up (will add the SMS endpoint documentation as well).\r\n\r\nAlso update a test to validate the headers sent with the `SubscriptionConfirmation` message just to be sure. \r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 141,
        "deletions": 5,
        "changed_files": 4,
        "created_at": "2023-10-11T15:49:03Z",
        "closed_at": "2023-10-16T14:07:20Z",
        "merged_at": "2023-10-16T14:07:20Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nAs reported in a LocalStack Slack Community post, we would raise an exception when trying to update a stage with some method settings.\r\nHere's the message to reproduce:\r\n\r\n```hcl\r\n> resource \"aws_api_gateway_method_settings\" \"this\" {\r\n\r\n\r\nrest_api_id = var.rest_api_id\r\nstage_name  = var.stage_name\r\nmethod_path = \"${trimprefix(var.path, \"/\")}/${var.method}\"\r\n\r\nsettings {\r\n  metrics_enabled        = var.metrics_enabled\r\n  logging_level          = var.logging_level\r\n  caching_enabled        = var.caching_enabled\r\n  cache_ttl_in_seconds   = var.cache_ttl_in_seconds\r\n  cache_data_encrypted   = var.cache_data_encrypted\r\n  throttling_rate_limit  = var.rate_limit.rate\r\n  throttling_burst_limit = var.rate_limit.burst\r\n}\r\n```\r\n\r\n> Here is the error:\r\n> \u2502 Error: updating API Gateway Stage failed: BadRequestException: Invalid method setting path: /test/GET/throttling/burstLimit. Must be one of: [/deploymentId, /description, /cacheClusterEnabled, /cacheClusterSize, /clientCertificateId, /accessLogSettings, /accessLogSettings/destinationArn, /accessLogSettings/format, /{resourcePath}/{httpMethod}/metrics/enabled, /{resourcePath}/{httpMethod}/logging/dataTrace, /{resourcePath}/{httpMethod}/logging/loglevel, /{resourcePath}/{httpMethod}/throttling/burstLimit/{resourcePath}/{httpMethod}/throttling/rateLimit/{resourcePath}/{httpMethod}/caching/ttlInSeconds, /{resourcePath}/{httpMethod}/caching/enabled, /{resourcePath}/{httpMethod}/caching/dataEncrypted, /{resourcePath}/{httpMethod}/caching/requireAuthorizationForCacheControl, /{resourcePath}/{httpMethod}/caching/unauthorizedCacheControlHeaderStrategy, /*/*/metrics/enabled, /*/*/logging/dataTrace, /*/*/logging/loglevel, /*/*/throttling/burstLimit /*/*/throttling/rateLimit /*/*/caching/ttlInSeconds, /*/*/caching/enabled, /*/*/caching/dataEncrypted, /*/*/caching/requireAuthorizationForCacheControl, /*/*/caching/unauthorizedCacheControlHeaderStrategy, /variables/{variable_name}, /tracingEnabled]\r\n> \u2502 \r\n> \u2502   with module.apgw.module.testlambda.aws_api_gateway_method_settings.this,\r\n> \u2502   on ../modules/definitions/apgw/method/main.tf line 22, in resource \"aws_api_gateway_method_settings\" \"this\":\r\n> \u2502   22: resource \"aws_api_gateway_method_settings\" \"this\" {\r\n\r\nUser's repo to reproduce:\r\nhttps://github.com/joecolly/localstack-tf-apgw\r\n\r\nThis PR is a follow up from #9039 and #8873. There was still an issue with the formatting of the error, and we didn't get all the fields from it properly.\r\n\r\nhttps://docs.aws.amazon.com/apigateway/latest/api/patch-operations.html#UpdateStage-Patch\r\n\r\nWe also didn't use the default values from `*/*` method settings when creating a new one by update.\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\nFix the `STAGE_UPDATE_PATHS` list to have all the right paths, and adapted the logic for the error message (maybe we should just create it once?)\r\nI've added some logic in an existing patch to get the default values from `*/*` method settings.\r\n\r\nAdded snapshots tests to validate the behaviour with default settings and being able to set a `{resource}/`{method`}/*` path. \r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 21,
        "deletions": 16,
        "changed_files": 1,
        "created_at": "2023-10-11T09:43:40Z",
        "closed_at": "2023-10-11T18:38:20Z",
        "merged_at": "2023-10-11T18:38:20Z",
        "body": "## Motivation\r\n\r\nIn preparation for the CDK testing workshop we noticed a few issues with the tooling that this PR now addresses.\r\n\r\n## Changes\r\n\r\n- AWS seems to have changes the `StatusReason` when creating a change set without changes recently. Since this seems extremely flaky, I've decided to remove this check and always assume on update that a failure can be ignored.\r\n- Re-use stack event outputs for failed stack deployments from deploy_cfn_template fixture\r\n- Fix typing of InfraProvisioner.provisioner to be compatible with pycharm => intellisense should work now\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 13,
        "deletions": 13,
        "changed_files": 3,
        "created_at": "2023-10-10T22:10:57Z",
        "closed_at": "2023-10-11T14:19:17Z",
        "merged_at": "2023-10-11T14:19:17Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nFollow up from #9312 and following up a Community Slack issue, it seems the new validation added was missing one exception handling when the S3 key would be containing slashes.\r\n\r\nFor example:\r\n`awslocal cloudformation create-stack --stack-name vpc-us-east-1 --template-url s3://cloudformation-templates/aws-account-cfn/vpc.json`\r\n\r\nIs raising:\r\n```python\r\nFile \"/opt/code/localstack/localstack/services/cloudformation/api_utils.py\", line 55, in get_template_body\r\n    result = client.get_object(Bucket=parts[0], Key=parts[2])\r\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/opt/code/localstack/.venv/lib/python3.11/site-packages/botocore/client.py\", line 535, in _api_call\r\n    return self._make_api_call(operation_name, kwargs)\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/opt/code/localstack/.venv/lib/python3.11/site-packages/botocore/client.py\", line 980, in _make_api_call\r\n    raise error_class(parsed_response, operation_name)\r\nbotocore.errorfactory.NoSuchBucket: An error occurred (NoSuchBucket) when calling the GetObject operation: The specified bucket does not exist\r\n```\r\n\r\nBecause the split occurring in `convert_s3_to_local_url` was returning 3 parts so it worked.\r\n\r\nIf I understood well, `s3://`-type URIs are not accepted in `--template-url` parameter, is that right? So I believe if the scheme is `s3`, we could trigger the validation error straight away.\r\n\r\nWeirdly, this is an accepted answer by AWS employees... https://repost.aws/questions/QUvDk684FkRW2wvFLybXoSuA/templateurl-must-be-a-supported-url\r\nBut testing shows that it's not supported?\r\n\r\nAdding a link showing how the url should look:\r\nhttps://aws.amazon.com/blogs/infrastructure-and-automation/best-practices-for-using-amazon-s3-endpoints-in-aws-cloudformation-templates/\r\n\r\n\\cc @whummer \r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\nAdded a check for the scheme, and raises the exception straight if the scheme is `s3`. \r\nAdded the test to have a long key with `/` in it to trigger the issue if not fixed. \r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 89,
        "deletions": 1,
        "changed_files": 4,
        "created_at": "2023-10-10T17:56:22Z",
        "closed_at": "2023-10-12T09:18:41Z",
        "merged_at": "2023-10-12T09:18:41Z",
        "body": "## Motivation\r\nFix for issue https://github.com/localstack/localstack/issues/9016.\r\n\r\n## Changes\r\n- Added \"@lambda_function\" in the lambda function name if it's 1 character\r\n\r\n",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 6,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2023-10-10T16:56:23Z",
        "closed_at": "2023-10-12T09:21:01Z",
        "merged_at": null,
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nRaising this PR to fix the bug on issue #9016.\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\nAdded in a condition to make sure that a function name of length 1 gets a suffix of '@lambda_function ' added to it\r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n```python -m localstack.dev.run --mount-dependencies \\\r\n          -v $PWD/tests:/opt/code/localstack/tests \\\r\n          -- .venv/bin/python -m pytest tests/aws/services/lambda_/test_lambda.py::TestLambdaBaseFeatures::test_assume_role```\r\n\r\n\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 3,
        "changed_files": 2,
        "created_at": "2023-10-10T06:54:49Z",
        "closed_at": "2023-10-10T08:42:49Z",
        "merged_at": "2023-10-10T08:42:49Z",
        "body": "## Motivation\r\nWhile working on the integration of Python 3.12, I realized that we still have a dependency on the legacy Python AWS SDK [`boto`](https://github.com/boto/boto) (not to confuse with [`boto3`](https://github.com/boto/boto3)).\r\nThis PR removes this direct dependency.\r\n\r\n## Changes\r\n- Removes the only direct import from the legacy `boto` (which was a mistake anyways)\r\n- Removes `boto` as an explicit direct dependency of `localstack-core`.\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 54,
        "deletions": 10,
        "changed_files": 3,
        "created_at": "2023-10-09T15:30:31Z",
        "closed_at": "2023-10-10T13:22:22Z",
        "merged_at": "2023-10-10T13:22:22Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nThis issue was reported in our Community Slack channel.\r\n\r\nWhen trying to connect our SNS implementation to [Opsgenie](https://www.atlassian.com/software/opsgenie), a user encountered an 422 error.\r\n\r\nAfter looking online, I fell on this post: https://community.atlassian.com/t5/Opsgenie-questions/Mimicking-CloudWatch-SNS-notification-in-Opsgenie/qaq-p/1886688, which indicates it should be possible.\r\nIt seems the headers are important for them to process our requests, so I've updated on our test to properly check that the header format was right.\r\nWe can also read about them here: https://docs.aws.amazon.com/sns/latest/dg/sns-message-and-json-formats.html#http-header\r\nThe most important for this specific integration seems to be:\r\n`Content-Type: text/plain; charset=UTF-8`\r\nAnd we had `Content-Type: text/plain` only. \r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\nUpdate one test to verify the changes with snapshots.\r\nUpdate the headers sent to be more in parity with AWS.\r\nAlso spotted a bug with the `RawDelivery` header which was in a never-reachable `elif` block, changed the indentation for it to work again, and this is now validated by the test as well. \r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 325,
        "deletions": 51,
        "changed_files": 3,
        "created_at": "2023-10-09T13:33:58Z",
        "closed_at": "2023-10-11T01:08:15Z",
        "merged_at": "2023-10-11T01:08:15Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nThis issue has been reported in our Community Slack.\r\nThe following SNS `FilterPolicy` with the `FilterPolicyScope` set `MessageBody` was not working like AWS:\r\n`\"FilterPolicy\": \"{\\\"detail.eventType\\\": [\\\"ride.requested\\\"]}\"`\r\nNote the `.` in the field name, which is very important.\r\nThe event that should pass and work this policy looks like this:\r\n```json\r\n{\r\n  \"version\": \"0\",\r\n  \"id\": \"6a7e8feb-b491-4cf7-a9f1-bf3703467718\",\r\n  \"detail-type\": \"ride.requested\",\r\n  \"source\": \"lambda\",\r\n  \"account\": \"111122223333\",\r\n  \"time\": \"2017-12-22T18:43:48Z\",\r\n  \"region\": \"us-west-2\",\r\n  \"detail\": {\r\n    \"eventType\": \"ride.requested\",\r\n    \"data\": \"{}\"\r\n  }\r\n}\r\n```\r\n\r\nAfter checking with AWS, it seems that indeed, that event should work, even if it seems a bit counter-intuitive.\r\nMy first idea was to use JSONPath, but what AWS is doing is every simpler.\r\nWith this policy: `{\"object.nested.test\": [\"string.value\"]}`\r\nAll these messages are working:\r\n```json\r\n{\"object\": {\"nested\": {\"test\": \"string.value\"}}}\r\n{\"object.nested.test\": \"string.value\"}\r\n{\"object.nested\": {\"test\": \"string.value\"}}\r\n{\"object\": {\"nested.test\": \"string.value\"}}\r\n```\r\nJSONPath would not work here, because `.` indicates a child node. But for `{\"object.nested.test\": \"string.value\"}`, there are no child nodes, and JSONPath fails. \r\n\r\nSo what AWS seems to be doing is flattening the filter policy to a single level, with depths separated with `.`.\r\nThey do the same to the payload, and then simply compare key per key, like they do with `MessageAttributes` scope.\r\n\r\nThis behaviour is not documented anywhere, and we can suspect it could change in the future. In the meantime, I've added this feature which also allows us to remove the previous matching function which was a bit complicated. \r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\n\r\nAdded a new test testing this behaviour, I've done more manual testing with all kind of scenarios but the test was really long, so I've kept it to a minimal which validates the behaviour.\r\n\r\nUpdated the filtering method to flatten the policy and payload and then compare them on a single level of depth, which is way simpler.\r\nMaybe for performance reason we could cache the result of the `FilterPolicy` flattening, but it doesn't seem to expensive for now. \r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-10-09T13:14:20Z",
        "closed_at": "2023-10-10T09:13:51Z",
        "merged_at": "2023-10-10T09:13:51Z",
        "body": "## Motivation\r\n\r\nThis PR fixes test execution error when a non-default `TEST_AWS_REGION_NAME` is used.\r\n\r\nThis happens because S3 CreateBucket requires `LocationConstraint` information when any region other than `us-east-1` is used. Our `s3_create_bucket` fixture takes care of such situations.\r\n\r\n## Implementation\r\n\r\nJust use the `s3_create_bucket` fixture to create the S3 bucket instead of the direct S3 CreateBucket.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 268,
        "deletions": 0,
        "changed_files": 6,
        "created_at": "2023-10-09T09:15:42Z",
        "closed_at": "2023-10-11T15:24:05Z",
        "merged_at": "2023-10-11T15:24:05Z",
        "body": "\r\n## Changes\r\nThis commit introduces support for the AWS::CertificateManager::Certificate resource in LocalStack's CloudFormation service.\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-10-09T07:53:41Z",
        "closed_at": "2023-10-09T09:03:24Z",
        "merged_at": "2023-10-09T09:03:24Z",
        "body": "\r\n## Motivation\r\n\r\nThe current code isn't set up to handle this case where -ext overwrites a resource provider, especially with the -ext provider being a GenericBaseModel. We'll handle this later but for now we should unblock the pipeline again.\r\n\r\n## Changes\r\n\r\n- Disables the activation of the `AWS::ECR::Repository` resource provider, which should unblock -ext\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2023-10-09T07:27:00Z",
        "closed_at": "2023-10-17T07:33:54Z",
        "merged_at": "2023-10-17T07:33:53Z",
        "body": "Closes:\r\n- https://github.com/localstack/localstack/issues/9222\r\n- https://github.com/localstack/localstack/issues/9237",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-10-09T05:05:49Z",
        "closed_at": "2023-10-09T07:07:57Z",
        "merged_at": "2023-10-09T07:07:57Z",
        "body": "Automatic update of CODEOWNERS file.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 256,
        "deletions": 123,
        "changed_files": 9,
        "created_at": "2023-10-08T14:49:13Z",
        "closed_at": "2023-10-09T18:12:53Z",
        "merged_at": "2023-10-09T18:12:53Z",
        "body": "## Motivation\r\n\r\nDuring testing some sample apps, I've noticed that we're returning slightly different responses/errors when using external template URLs for CFn stacks.\r\n\r\nThis PR adds a snapshot test and asserts the correct error messages for different values of `TemplateURL`.\r\n\r\n## Changes\r\n\r\n* add new snapshot test, with parametrization for different values of `TemplateURL`\r\n* adjust logic in `api_utils.py` to return the proper error message\r\n* slightly refactor tests:\r\n  * move `test_get_template_summary.py` to more general name `test_templates.py`\r\n  * move stack policy related tests from `test_stacks.py` into more specialized `test_stack_policies.py` file",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 53,
        "deletions": 0,
        "changed_files": 3,
        "created_at": "2023-10-06T19:25:36Z",
        "closed_at": "2023-10-09T13:15:13Z",
        "merged_at": "2023-10-09T13:15:13Z",
        "body": "## Motivation\r\nAs shown in the issue #9300 CFn should be able to support using a `!Select` function in a Conditional. \r\n\r\n## Changes\r\nThe `resolve_condition` function now also supports a case for `Fn::Select`. According to the[ function documentation](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-select.html), the select can also resolve references. \r\n\r\n## Testing\r\nAdded a simplet AWS validated test to confirm the expected behaviour.\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 20,
        "deletions": 2,
        "changed_files": 3,
        "created_at": "2023-10-06T17:17:17Z",
        "closed_at": "2023-10-07T09:37:51Z",
        "merged_at": "2023-10-07T09:37:51Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nAs reported in #9306, we would raise a 500 when the topic is not a properly formed ARN. This exception comes from moto, and should be handled there as well. In the meantime, we can fix it with our utils. \r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\nMoved up our method to get the topic, which will raise the proper exception if there's an issue before calling moto. Added a test with a malformed arn to validated the behaviour. \r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 18,
        "deletions": 6,
        "changed_files": 3,
        "created_at": "2023-10-06T15:59:41Z",
        "closed_at": "2023-10-17T12:43:35Z",
        "merged_at": "2023-10-17T12:43:35Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\n\r\nWe want to support `eksctl` in the -ext repo, but this requires some minor changes in utilities imported from community. Also there are some bugs that need fixing.\r\n\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\n\r\n- Enable `AWS::EKS::NodeGroup` resource provider\r\n- Fix logging bug in CFn\r\n- `deploy_cfn_template` deletes stacks in reverse order of creation\r\n- Add `keys_to_upper` function\r\n\r\n## TODO\r\n\r\n- [ ] delete nodegroup service method for proper cleanup\r\n- [ ] other nodegroup methods\r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-10-06T15:12:37Z",
        "closed_at": "2023-10-11T18:08:56Z",
        "merged_at": "2023-10-11T18:08:56Z",
        "body": "## Motivation\r\nThis PR adds some new available resources to the list.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 535,
        "deletions": 0,
        "changed_files": 8,
        "created_at": "2023-10-06T11:18:25Z",
        "closed_at": "2023-10-10T06:47:35Z",
        "merged_at": "2023-10-10T06:47:35Z",
        "body": "## Changes\r\nImplemented:\r\n- AWS::KMS::Key\r\n- AWS::KMS::Alias\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 3,
        "changed_files": 1,
        "created_at": "2023-10-06T10:21:40Z",
        "closed_at": "2023-10-07T09:36:34Z",
        "merged_at": "2023-10-07T09:36:34Z",
        "body": "## Motivation\r\nPython 3.12 has been released on 2nd of October 2023.\r\nWe got an issue report explaining that the CLI installation is not working correctly (which is not reproducible).\r\nBut this is a good reminder to update the CLI tests to include the new version in the tests.\r\n\r\n## Changes\r\n- Add Python 3.12 to the list of Python versions to test the CLI against.\r\n\r\n/cc @thrau ",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 398,
        "deletions": 0,
        "changed_files": 6,
        "created_at": "2023-10-06T08:25:56Z",
        "closed_at": "2023-10-06T20:20:31Z",
        "merged_at": "2023-10-06T20:20:31Z",
        "body": "## Changes\r\nRefactor ECR Repository plugin to create mock repositories\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 17,
        "deletions": 2,
        "changed_files": 3,
        "created_at": "2023-10-05T23:57:07Z",
        "closed_at": "2023-10-06T04:52:59Z",
        "merged_at": "2023-10-06T04:52:59Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\n\r\nA recent botocore upgrade seems to have introduced some build failures https://pypi.org/project/botocore/1.31.61/\r\n```\r\nE             File \"/opt/code/localstack/localstack/aws/api/core.py\", line 160, in operation_marker\r\nE               return fn(*args, **kwargs)\r\nE                      ^^^^^^^^^^^^^^^^^^^\r\nE           TypeError: Route53Api.list_hosted_zones() got an unexpected keyword argument 'hosted_zone_type'\r\n\r\n.venv/lib/python3.11/site-packages/botocore/client.py:980: ClientError\r\n```\r\n\r\nRegenerating the APIs manually to get the build unblocked.\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\n\r\n* regenerate ASF APIs\r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 14,
        "deletions": 18,
        "changed_files": 3,
        "created_at": "2023-10-05T17:41:12Z",
        "closed_at": "2023-10-05T19:10:44Z",
        "merged_at": "2023-10-05T19:10:44Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nAs reported in https://github.com/localstack/localstack/issues/6659#issuecomment-1749013552, calling `HeadObject` on a an object with `ChecksumMode=ENABLED` will raise an exception. I totally missed it when copy/pasting the implementation from `GetObject`, because of a `#noqa` put there because of typing (dynamic key value inside the `*Response` object). \r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\nFixed the line to use the object checksum instead of a non-existent variable.\r\nI've also removed all the `noqa` from the provider because some type warnings are better than fully failing that this.\r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 685,
        "deletions": 0,
        "changed_files": 8,
        "created_at": "2023-10-05T12:49:51Z",
        "closed_at": "2023-10-06T07:12:58Z",
        "merged_at": "2023-10-06T07:12:58Z",
        "body": "## Changes\r\n- Implemented support for: \r\n- `AWS::CloudWatch::Alarm`\r\n- `AWS::CloudWatch::CompositeAlarm`\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 8,
        "changed_files": 4,
        "created_at": "2023-10-04T17:52:20Z",
        "closed_at": "2023-10-17T11:48:09Z",
        "merged_at": "2023-10-17T11:48:09Z",
        "body": "Depends on https://github.com/localstack/lambda-runtime-init/pull/22\r\n\r\n## Motivation\r\n\r\nAddresses https://github.com/localstack/localstack/issues/8897\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\n\r\n* Use new Lambda runtime init Go releases\r\n* Disable snapshot skip for permissions in `tmp` directory introspection because that will be supported with the new init changes.\r\n* (unrelated) Update API visibility of Lambda configuration (recently updated in docs)\r\n\r\n## Testing\r\n\r\nSee companion ext PR https://github.com/localstack/localstack-ext/pull/2165\r\n\r\nsidenote: The community introspection tests (e.g., `tests.aws.services.lambda_.test_lambda.TestLambdaBehavior.test_runtime_introspection_x86`) asserting the user changes fail when debugging the Lambda init because disabling dropping privileges in debug mode also disables these chown fixes.\r\n\r\n## TODO\r\n\r\n- [x] Bump `localstack/services/lambda_/packages.py:LAMBDA_RUNTIME_DEFAULT_VERSION` once released\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 96,
        "deletions": 2,
        "changed_files": 4,
        "created_at": "2023-10-04T14:58:42Z",
        "closed_at": "2023-10-05T15:48:10Z",
        "merged_at": "2023-10-05T15:48:10Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\n\r\nSeveral other localstack systems need access to basic information about the running instance beyond the health status. Much like `docker info`, this new endpoint aims to provide this information.\r\n\r\nExample:\r\n\r\n```json\r\n{\r\n  \"version\": \"2.3.3.dev:c77b830\",\r\n  \"edition\": \"pro\",\r\n  \"is_license_activated\": true,\r\n  \"session_id\": \"1830110c-6e4d-4256-9bc0-9008b8c5b6b9\",\r\n  \"machine_id\": \"4256a311839b\",\r\n  \"system\": \"linux\",\r\n  \"is_docker\": true,\r\n  \"server_time_utc\": \"2023-10-04T14:59:40\",\r\n  \"uptime\": 120\r\n}\r\n```\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\n\r\n* Add a `/_localstack/info` endpoint\r\n* Add two new metadata methods: getting the edition (from files we create in the Dockerfiles), and checking whether license activation has been successful\r\n* Add the `edition` key also to the health endpoint, since that has long since been requested\r\n* Add the output of info also to the diagnose endpoint\r\n\r\n\r\n## Testing\r\n\r\n* You can use the dev run script and call `curl -s https://localhost.localstack.cloud:4566/_localstack/info | jq .`\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 5,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2023-10-04T14:49:40Z",
        "closed_at": "2023-10-04T19:21:22Z",
        "merged_at": "2023-10-04T19:21:22Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nCurrently, in the dev script, we only mount python modules which are in there own subfolder.\r\nHowever, the assumption that all dependencies are located in a subfolder does not hold:\r\nFor example, `nest-asyncio` is only one file, and is not located in a separate folder in `site-packages`. (This is a dependency for serverless tests in -ext, and without it, test collection fails).\r\n\r\nWe should therefore also mount python files in `site-packages`, unless they start with `__` (sometimes linked editable installs have a python finder file like this: `__editable___localstack_core_2_2_1_dev0_finder.py`).\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\n* Mount files from `site-packages` as dependency as well, unless they start with a dunder\r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 15,
        "deletions": 17,
        "changed_files": 3,
        "created_at": "2023-10-04T14:25:08Z",
        "closed_at": "2023-10-17T09:58:43Z",
        "merged_at": "2023-10-17T09:58:43Z",
        "body": "## Motivation\r\nThis PR upgrades the OS version of the Docker image from Debian Bullseye to Debian Bookworm.\r\nThe last upgrade was done with the release of version `2.1.0` in https://github.com/localstack/localstack/pull/8344 / https://github.com/localstack/localstack/pull/7876.\r\nSince the Debian repositories for bookworm do not contain `openjdk-11` anymore, I also switched the java-builder to use the `eclipse-temurin:11` image.\r\n\r\n## Changes\r\n- The base image's OS has been upgraded from Debian Bullseye (oldstable) to Debian Bookworm (stable).\r\n- The `java-builder` stage has been replaced to use [Eclipse Temurin](https://hub.docker.com/_/eclipse-temurin) image (because Debian Bookworm does not have OpenJDK in the repos anymore).\r\n  - We are already using Eclipse Temurin in the Java installer if we need other Java versions (for BigData services).\r\n\r\n## Testing\r\n- Tested by building the image locally.\r\n- If all tests are green, we can be quite confident that everything works correctly.\r\n\r\n## Merge?\r\nThis PR contains some important changes:\r\n- Updates the base image from Debian Bullseye to Debian Bookworm.\r\n  - This could have an implication for users which install any kind of packages in the Docker image.\r\n- Change the Java JDK from OpenJDK in the package repo to the Temurin build.\r\n  - I think this should actually be a safe change.\r\n  - Eclipse Temurin is based OpenJDK.\r\n\r\nWe should decide on when to merge this change. The last time (with the Debian upgrade from Buster to Bullseye), we didn't really see any issues among our user-base.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 120,
        "deletions": 23,
        "changed_files": 5,
        "created_at": "2023-10-04T13:57:14Z",
        "closed_at": "2023-10-18T19:58:05Z",
        "merged_at": "2023-10-18T19:58:05Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nCurrently the SFN v2 interpreter is unable to log usable exception details which negatively affects both development and bug reporting.\r\nThis PR rectified this issue by reporting error details of SFN related failures and cleaning up the logs for implementation errors.\r\nIt also improves the description of InvalidDefinition errors otherwise empty.\r\n\r\nFailureEventException:\r\n\r\nMost of the evaluation exception are handles by the interpreter and decorated through `FailureEventException` exceptions. These changes include in logs error names and details, otherwise previously unavailable:\r\n\r\nnew:\r\n\r\n`\r\nERROR --- [Thread-3 (eval)] localstack.services.stepfunctions.asl.component.eval_component : Exception=FailureEventException, Error=SomeFailure, Details={\"taskFailedEventDetails\": {\"error\": \"SomeFailure\", \"cause\": \"This state machines raises a 'SomeFailure' failure.\"}} at '(StateFail| {'comment': None, 'input_path': (InputPath|...\r\n`\r\n\r\nprevious:\r\n\r\n`\r\nERROR --- [Thread-6 (eval)] localstack.services.stepfunctions.asl.component.eval_component : Exception '<class 'localstack.services.stepfunctions.asl.component.common.error_name.failure_event.FailureEventException'>':'' at '[ASL] [gene] [StateFail]: '(StateFail| {'comment': None, 'input_path': (InputPath|...\r\n`\r\n\r\n---\r\n\r\nFor all other exception not handled the the interpreter, the log now is less verbose:\r\n\r\nnew:\r\n\r\n`\r\nERROR --- [Thread-3 (eval)] localstack.services.stepfunctions.asl.component.eval_component : Exception=RuntimeError, Details=['This is a test runtime error'] at '(StateFail| {'comment': None, 'input_path': (InputPath|...\r\n`\r\n\r\nprevious:\r\n\r\n`\r\nERROR --- [Thread-6 (eval)] localstack.services.stepfunctions.asl.component.eval_component : Exception '<class 'RuntimeError'>':'This is a test runtime error' at '[ASL] [gene] [StateFail]: '(StateFail| {'comment': None, 'input_path': (InputPath|...\r\n`\r\n\r\nnew:\r\n\r\n`\r\nERROR --- [Thread-3 (eval)] localstack.services.stepfunctions.asl.component.eval_component : Exception=AttributeError, Details=[\"'NoneType' object has no attribute 'not_an_attribute'\"] at '(StateFail| {'comment': None, 'input_path': (InputPath|...\r\n`\r\n\r\nprevious:\r\n\r\n`\r\nERROR --- [Thread-3 (eval)] localstack.services.stepfunctions.asl.component.eval_component : Exception '<class 'AttributeError'>':''NoneType' object has no attribute 'not_an_attribute'' at '[ASL] [gene] [StateFail]: '(StateFail| {'comment': None, 'input_path': (InputPath|...\r\n`\r\n\r\n\r\n---\r\n\r\nInvalidDefinition due to Syntax Errors:\r\n\r\nnew:\r\n\r\n`\r\nbotocore.errorfactory.InvalidDefinition: An error occurred (InvalidDefinition) when calling the CreateStateMachine operation: ASLParserException line 1:93, at \"Results\", no viable alternative at input '\"Results\"'\r\n`\r\n\r\nprevious:\r\n\r\n`\r\nbotocore.errorfactory.InvalidDefinition: An error occurred (InvalidDefinition) when calling the CreateStateMachine operation: Error 'None' in definition '{\"Comment\": \"BASE_PASS_RESULT\", \"StartAt\": \"State_1\", \"States\": {\"State_1\": {\"Type\": \"Pass\", \"Results\": {\"Arg1\": \"argument1\"}, \"End\": true}}}'.\r\n`\r\n\r\n---\r\n\r\nInvalidDefinition due to Preprocessing:\r\n\r\nnew:\r\n\r\n`\r\nbotocore.errorfactory.InvalidDefinition: An error occurred (InvalidDefinition) when calling the CreateStateMachine operation: Error=ValueError Args=[\"End redefines Next, from '(Next| {'name': 'NextStateName'}' to '(End| {'is_end': True}'.\"] in definition '{\"Comment\": \"BASE_PASS_RESULT\", \"StartAt\": \"State_1\", \"States\": {\"State_1\": {\"Type\": \"Pass\", \"Result\": {\"Arg1\": \"argument1\"}, \"Next\": \"NextStateName\", \"End\": true}}}'.\r\n`\r\n\r\nold:\r\n\r\n`\r\nbotocore.errorfactory.InvalidDefinition: An error occurred (InvalidDefinition) when calling the CreateStateMachine operation: Error ''<class 'localstack.services.stepfunctions.asl.component.common.flow.end.End'>' redefines '<class 'localstack.services.stepfunctions.asl.component.common.flow.next.Next'>', from '(Next| {'name': 'NextStateName'})' to '(End| {'is_end': True})'.' in definition '{\"Comment\": \"BASE_PASS_RESULT\", \"StartAt\": \"State_1\", \"States\": {\"State_1\": {\"Type\": \"Pass\", \"Result\": {\"Arg1\": \"argument1\"}, \"Next\": \"NextStateName\", \"End\": true}}}'.\r\n`\r\n\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\n- Added support for FailureEventException representation\r\n- Support changes to compile exception logs\r\n- Added error listener which collects syntax errors encountered during parsing\r\n- Added mechanism to add syntax errors to invalid definition errors\r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 22,
        "deletions": 7,
        "changed_files": 1,
        "created_at": "2023-10-04T13:27:03Z",
        "closed_at": "2023-10-06T07:48:23Z",
        "merged_at": "2023-10-06T07:48:23Z",
        "body": "## Motivation\r\n\r\nAddresses a support request.\r\n\r\nFixes a bug where fetching external layers broke when using multiple versions of the same layer.\r\n\r\n## Changes\r\n\r\nHandle multiple versions of the same layer when fetching external layers.\r\n\r\n## Testing\r\n\r\nAdded in companion ext PR: https://github.com/localstack/localstack-ext/pull/2163\r\n\r\n## Discussion\r\n\r\nThe logic starts to get quite complex here. Some thoughts for the future:\r\n* a) Using an internal service call with added cross-account support could simplify this logic here quite a bit. This requires IAM support, which was not present at the moment we implemented this initial version.\r\n* b) The layer fetcher could return a layer version. However, this would break up the logic between community and ext.\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 32,
        "deletions": 36,
        "changed_files": 5,
        "created_at": "2023-10-03T16:58:05Z",
        "closed_at": "2023-10-04T18:38:34Z",
        "merged_at": "2023-10-04T18:38:34Z",
        "body": "Companion PR: https://github.com/localstack/localstack-ext/pull/2159\r\n\r\n## Motivation\r\n\r\nFix AWS markers for Lambda according to marker report https://github.com/localstack/localstack/issues/9147\r\n\r\nGrepped for some extra occurrences not covered in the marker report.\r\n\r\n## Changes\r\n\r\n* Set markers to `localstack_only` where applicable\r\n* Remove false positives and rename fixtures or inner asserts to clarify their intent\r\n* Leave some to `unknown` scheduled to be removed at 3.0 (not worth fixing/testing)\r\n",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 6,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2023-10-03T11:57:03Z",
        "closed_at": "2023-10-03T17:30:38Z",
        "merged_at": "2023-10-03T17:30:38Z",
        "body": "\r\n## Motivation\r\nThe  `tests.aws.services.cloudwatch.test_cloudwatch.TestCloudwatch.test_get_metric_data` test has been flaky in the past. This PR aims to fix the test to remove this flakiness.\r\n\r\nExample flake: https://app.circleci.com/pipelines/github/localstack/localstack/18675/workflows/963c77f7-1832-4350-9fac-4cc9837e58c0/jobs/144301\r\n\r\n## Changes\r\n\r\n- Check the sum of all values instead of only the first value, since the two `put_metric_data` entries might end up in two different 60s metric statistics \"buckets\"\r\n\r\n\r\n## Testing\r\n\r\nTo trigger the case where multiple \"buckets\" exist, i.e. where the array would be [18,23] instead of [41], simply add a time.sleep(60) like this:\r\n\r\n```python\r\n        aws_client.cloudwatch.put_metric_data(\r\n            Namespace=namespace1, MetricData=[dict(MetricName=\"someMetric\", Value=23)]\r\n        )\r\n        time.sleep(60)\r\n        aws_client.cloudwatch.put_metric_data(\r\n            Namespace=namespace1, MetricData=[dict(MetricName=\"someMetric\", Value=18)]\r\n        )\r\n        aws_client.cloudwatch.put_metric_data(\r\n            Namespace=namespace2, MetricData=[dict(MetricName=\"ug\", Value=23)]\r\n        )\r\n```\r\n\r\nthis will cause them to be 60s apart and thus fall on different data points for the metrics\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 35,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2023-10-02T21:49:00Z",
        "closed_at": "2023-10-04T17:57:58Z",
        "merged_at": "2023-10-04T17:57:58Z",
        "body": "## Motivation\r\n\r\nAddresses https://github.com/localstack/localstack/issues/8347\r\n\r\n## Changes\r\n\r\nRestores provisioned concurrency using the version manager of each function. This also fixes persistence reloading issues because listing provisioned concurrency relies on the correct state in the version manager.\r\n\r\n## Testing\r\n\r\nSee ext PR https://github.com/localstack/localstack-ext/pull/2155\r\n\r\nRelated to functional concurrency test: `tests.aws.services.lambda_.test_lambda.TestLambdaConcurrency.test_provisioned_concurrency`\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 197,
        "deletions": 0,
        "changed_files": 4,
        "created_at": "2023-10-02T19:37:13Z",
        "closed_at": "2023-10-05T17:21:21Z",
        "merged_at": "2023-10-05T17:21:21Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nThe example from the resource type cdocumentation cannot be deployed in LocalStack due to the lack of some extra type conversions for some parameters.\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\nExtra type validations and transformations in the resource provider\r\n\r\n## Testing\r\nThe added test uses the template from the documentation \r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 16,
        "deletions": 12,
        "changed_files": 5,
        "created_at": "2023-10-02T14:00:58Z",
        "closed_at": "2023-10-03T17:47:59Z",
        "merged_at": "2023-10-03T17:47:59Z",
        "body": "## Motivation\r\nThis PR upgrades Werkzeug to version 3 and fixes some issues caused by the removal of deprecations (or other breaking changes with version 3).\r\nThis PR removes the pin (avoiding the upgrade) added with https://github.com/localstack/localstack/pull/9272.\r\n\r\n## Changes\r\n- Updates minimum version in `setup.cfg`.\r\n- Fixes some issues which came up with the new major release:\r\n  - Decode headers when populating the WSGI request headers from the ASGI requests and when forwarding requests.\r\n    - Werkzeug's `Headers` object raises a `BadRequestKeyError` if a key is not of type `str`.\r\n    - See https://github.com/pallets/werkzeug/commit/5ff0a573f4b78d9724f1f063fb058fd6bc76b24d.\r\n  - Removes the usage of `charset` and `encoding_errors` on the `Map` (they have been removed).\r\n    - Also see https://github.com/pallets/werkzeug/commit/5ff0a573f4b78d9724f1f063fb058fd6bc76b24d (even though it's not mentioned in the commit message).\r\n\r\n## Testing\r\nAs soon as the pipeline is green again (and the upgrade is tested with LocalStack Pro), this upgrade is safe to be merged.\r\n\r\n## TODO\r\n- [x] Make sure all tests in the pipeline are \ud83d\udc9a \r\n  - I executed a full run (amd64, arm64, community tests) of our Pro pipeline. All \ud83d\udc9a.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 185,
        "deletions": 139,
        "changed_files": 3,
        "created_at": "2023-10-02T11:11:51Z",
        "closed_at": "2023-10-04T10:39:21Z",
        "merged_at": "2023-10-04T10:39:21Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nAdding utility function that package lambdas for python or nodeJS with additional resources or dependencies. \r\nThe code is directly uploaded to an S3 bucket, which can be used as source for the lambda-creation then. \r\nThis PR depends on https://github.com/localstack/localstack/pull/9251 and need to be rebased.\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\n* Introducing `cdk_lambda_helper` with utility for python and nodeJS lambda\r\n* Refactoring existing scenario tests to use the utility functions\r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n-->\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [x] merge #9251 first and rebase afterwards\r\n- [ ] prepare ext PR to use the new utility and remove duplicate utility-functions from ext (can be done afterwards)\r\n\r\n\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 22,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2023-10-02T09:34:19Z",
        "closed_at": "2023-10-02T14:09:11Z",
        "merged_at": "2023-10-02T14:09:11Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\n\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\n## Motivation\n\nIt is sometimes nice to attach a remote debugger to a running container. For this we can use the `DEVELOP=1` flag with the CLI, which\n* installs `debugpy` into the container before infrastructure startup, and\n* publishes port 5678 (the default [DAP](https://microsoft.github.io/debug-adapter-protocol/) port) to the host.\n\nThese two commands _can_ be added to the debug script, however it is marginally annoying. And of course we know that developers hate to be _mildy_ annoyed... \ud83d\ude02\n\n\n<!-- What notable changes does this PR make? -->\n## Changes\n\n* Add a `--develop/--no-develop` flag to the CLI which performs the two above steps\n\n\n## Testing\n\n```\npython -m localstack.dev.run --develop`\n```\n\nshould allow for remote debugging via the DAP protocol. Specifically it should:\n* install debugpy into the container, and\n* publish port 5678\n\n<!-- The following sections are optional, but can be useful! \n## TODO\n\nWhat's left to do:\n\n- [ ] ...\n- [ ] ...\n\n-->\n\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 100,
        "deletions": 9,
        "changed_files": 6,
        "created_at": "2023-10-02T05:04:20Z",
        "closed_at": "2023-10-02T14:01:47Z",
        "merged_at": "2023-10-02T14:01:47Z",
        "body": "# \ud83d\ude80 ASF Update Report \ud83d\ude80\nThis PR has been automatically generated to update the generated API stubs for our ASF services.\nIt uses the latest code-generator from the _master_ branch ([scaffold.py](https://github.com/localstack/localstack/blob/master/localstack/aws/scaffold.py)) and the latest _published_ version of [botocore](https://github.com/boto/botocore) to re-generate all API stubs which are already present in the `localstack.aws.api` module of the _master_ branch.\n\n## \ud83d\udd04 Updated Services\nThis PR updates the following services:\n- dynamodb\n- ec2\n- firehose\n- s3\n- ssm\n\n## \ud83d\udc77\ud83c\udffd Handle this PR\nThe following options describe how to interact with this PR / the auto-update:\n\n\u2714\ufe0f **Accept Changes**\nIf the changes are satisfying, just squash-merge the PR and delete the source branch.\n\n\ud83d\udeab **Ignore Changes**\nIf you want to ignore the changes in this PR, just close the PR and *do not delete* the source branch. The PR will not be opened and a new PR will not be created for as long as the generated code does not change (or the branch is deleted). As soon as there are new changes, a new PR will be created.\n\n\u270f\ufe0f **Adapt Changes**\n*Don't do this.* The APIs are auto-generated. If you decide that the APIs should look different, you have to change the code-generation.\n\n\u23f8\ufe0f **Pause Updates**\nRemove the cron-schedule trigger of the GitHub Action workflow which creates these PRs. The action can then still be triggered manually, but it will not be executed automatically.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 555,
        "deletions": 126,
        "changed_files": 10,
        "created_at": "2023-10-01T20:50:28Z",
        "closed_at": "2023-10-10T11:41:35Z",
        "merged_at": "2023-10-10T11:41:35Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\n\r\nThis PR fixes #5387, which required some additional aws validated tests and a little bit of extra logic.\r\n\r\nTesting scheduled rules leads to either huge test methods (testing multiple targets in one test), or slow test execution (one test per test target, which will take at least 1 minute each, since that's the minimum schedule rate). To achieve proper test isolation and fix the slow test execution, I added a developer endpoint `/_aws/events/rules/<rule_arn>/trigger` that allows you to trigger a scheduled rule immediately that's running in the internal job scheduler.\r\n\r\nThe trigger endpoint could be interesting for local testing, and we could add it to [the docs](https://docs.localstack.cloud/user-guide/aws/eventbridge/).\r\n\r\nI pretty much re-worked the whole scheduler in the [rework-job-scheduler](https://github.com/localstack/localstack/tree/rework-job-scheduler) branch, and this PR sets up a testing basis for it.\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\n\r\n* Added a new `scheduled_rule` testing package with one test per service (added sqs and logs for now)\r\n* Moved some re-usable fixtures from `test_events.py` to `conftest.py` in the events test package\r\n* Added `/_aws/events/rules/<rule>/trigger` endpoint to trigger a scheduled rule programmatically\r\n* In the scheduled job func, create a default event\r\n* Fixes #5387\r\n\r\n## Future work\r\n\r\n* Tests are still a bit rudimentary and we should test `InputPath` and `InputTransformer` for the scheduled events\r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 43,
        "deletions": 9,
        "changed_files": 1,
        "created_at": "2023-10-01T17:41:51Z",
        "closed_at": "2023-10-03T18:49:43Z",
        "merged_at": "2023-10-03T18:49:43Z",
        "body": "## Motivation\r\n\r\nIn the process of resolving some CVEs, we detected that the Docker image contains `python3.9`, which gets pulled in transitively from the `nodejs` package:\r\n```\r\n$ docker run -it --rm --entrypoint= localstack/localstack which python3.9\r\n/usr/bin/python3.9\r\n```\r\n\r\nWe should try to eliminate this 3.9 Python installation, to resolve CVEs, and also to slightly reduce the image size.\r\n\r\n## Changes\r\n\r\nUpdate Dockerfile to skip installation of `python3.9` packages. We achieve this by downloading the `*.deb` package for nodejs, then extracting the `control.tar.xz` file from it, and updating the dependencies in the `control` file to remove the `python3` dependency. \r\n\r\nBelow is the content of the `control` file, prior to replacing its content via `sed` (`python3` is then removed from the `Depends` list): \r\n```\r\nPackage: nodejs\r\nVersion: 18.18.0-1nodesource1\r\n...\r\nDepends: libc6 (>= 2.28), python3, ca-certificates. # <- this line gets updated\r\nConflicts: nodejs-dev, nodejs-doc, nodejs-legacy, npm\r\n```\r\n\r\nThis is a pretty crude approach - not sure if there's an easier way to achieve this \ud83e\udd37, but seems that most other approaches (incl. any `--ignore*` or `--exclude*` options for `apt` and `dpkg` ) result in a broken package state. (I've also tried things like `dpkg -i --ignore-depends=python3 nodejs*.deb`, but that was leading to issues further down the line)\r\n\r\nThe PR also contains minor refactoring to rename `apt-get` to the slightly shorter `apt` command.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2342,
        "deletions": 0,
        "changed_files": 10,
        "created_at": "2023-09-29T21:54:02Z",
        "closed_at": "2023-10-17T23:09:37Z",
        "merged_at": "2023-10-17T23:09:37Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nBased on https://github.com/aws-samples/aws-modern-application-workshop/blob/python-cdk\r\n\r\nThis is only Module 5 (https://github.com/aws-samples/aws-modern-application-workshop/blob/python-cdk/module-5) with the DynamoDB table from Module 3, which is normally accessed through a Fargate micro service. \r\n\r\n![architecture-module-5](https://github.com/localstack/localstack/assets/42031100/84c6f9d4-15af-4148-9ee3-01089511a3ad)\r\n\r\nThis sample/scenario is adapted from TypeScript CDK to Python CDK, still seems a bit weird, lots of manual setup with IAM/Roles which I believe could use \"CDK magic\" more.\r\n\r\nThere's only one Cfn construct used, which could maybe be replace with an alpha L2 (was using the cfn one in the sample) (Kinesis Firehose Delivery Stream). \r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\nAdded the scenario and tests, this currently only works against AWS. \r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 111,
        "deletions": 26,
        "changed_files": 4,
        "created_at": "2023-09-29T17:34:35Z",
        "closed_at": "2023-10-03T17:29:02Z",
        "merged_at": "2023-10-03T17:29:02Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\n\r\nWhile using event bus, I noticed that specifying invalid rule expressions did not create the correct error response.\r\n\r\nThere was also a TODO related to us allowing `rate(1 minutes)` (value 1 with plural unit) which is for some reason not allowed in AWS. This may have some implications on user code.\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\n\r\n* Added proper handling and an AWS validated test\r\n* Added [weird plural/singular handling of rate units](https://docs.aws.amazon.com/eventbridge/latest/userguide/eb-rate-expressions.html)\r\n  * Fixed all occurrences of invalid rates\r\n* drive-by validated a few other tests\r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 462,
        "deletions": 263,
        "changed_files": 45,
        "created_at": "2023-09-29T15:48:17Z",
        "closed_at": "2023-10-02T15:37:05Z",
        "merged_at": "2023-10-02T15:37:05Z",
        "body": "## Motivation\n\nLoading CloudFormation resource providers may be expensive - they load a lot of type definitions which may get expensive. Typically, the pattern we have in LocalStack is that plugins are separate to the code that they import, and they import the relevant objects in the `load` function. This is not currently the case for our CloudFormation resource providers. They contain plugins as part of the main body of the code. This reduces the usefulness of the plugin system.\n\n<!-- What notable changes does this PR make? -->\n## Changes\n\n* Move plugins to their own file\n* Update the scaffolding to render the new plugin file\n\n<!-- The following sections are optional, but can be useful! \n\n## Testing\n\nDescription of how to test the changes\n\n## TODO\n\nWhat's left to do:\n\n- [ ] ...\n- [ ] ...\n\n-->\n\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 72,
        "deletions": 2,
        "changed_files": 3,
        "created_at": "2023-09-29T13:42:49Z",
        "closed_at": "2023-09-29T17:02:16Z",
        "merged_at": "2023-09-29T17:02:16Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nAs reported with #9261, we would not properly filter for the `null` value in a FilterPolicy. This is because we set the value to `None` if it didn't exist. We luckily have a field to indicated the presence of the field or not `field_exists`. \r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\nAdd the check for the `field_exists` before comparing the value with the condition.\r\nAdded a snapshot tests for validating this use-case. \r\n\r\n_closes #9261_\r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 138,
        "deletions": 8,
        "changed_files": 7,
        "created_at": "2023-09-29T13:13:01Z",
        "closed_at": "2023-09-29T15:59:59Z",
        "merged_at": "2023-09-29T15:59:59Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\n\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\n## Motivation\n\nIf `LOCALSTACK_HOST` is set to include port 443, and `GATEWAY_LISTEN` is not set, in -ext we by default add port 443 to the list, so `GATEWAY_LISTEN` becomes:\n\n```\nGATEWAY_HOST = [\n    HostAndPort(\"0.0.0.0\", 443),\n    HostAndPort(\"0.0.0.0\", 443),\n]\n```\n\nHypercorn then tries to bind to the port twice and crashes.\n\n\n<!-- What notable changes does this PR make? -->\n## Changes\n\n* Introduce the concept of a `UniqueHostAndPortList` - see the docstring for guarantees\n* Configure the dev container to modify the edge port config\n\n<!-- The following sections are optional, but can be useful! \n\n## Testing\n\nDescription of how to test the changes\n\n## TODO\n\nWhat's left to do:\n\n- [ ] ...\n- [ ] ...\n\n-->\n\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1715,
        "deletions": 1,
        "changed_files": 5,
        "created_at": "2023-09-29T08:46:57Z",
        "closed_at": "2023-10-02T11:40:33Z",
        "merged_at": "2023-10-02T11:40:33Z",
        "body": "## Changes\r\nImplementation of CloudFormation support for AWS::KinesisFirehose::DeliveryStream\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 4157,
        "deletions": 171,
        "changed_files": 15,
        "created_at": "2023-09-29T07:40:31Z",
        "closed_at": "2023-10-05T10:20:51Z",
        "merged_at": "2023-10-05T10:20:51Z",
        "body": "## Motivation\r\n\r\nWe've previously identified a few issues when working with the new CDK-based test setup which this PR aims to address.\r\n\r\nWhile I was also experimenting with full asset support, this is probably a bit too far out for now, and therefore this PR aims to stabilize the current API a bit.\r\n\r\n## Changes\r\n\r\n- Replaced create_stack calls with more flexible change set generation\r\n- Adds support for stack updates, allowing iterating over parts of the stack while developing the infra setup\r\n- Persists templates (see point below)\r\n- InfraProvisioner now requires `namespace` to be set to a repo-unique value. This is used for namespacing the generated templates in `tests/aws/cdk_templates/{namespace}/`.\r\n- Upload CloudFormation template to s3 and reference it via TemplateURL instead of direct usage in TemplateBody if size exceeds CloudFormation upload limits (51_200 characters)\r\n- Stack outputs are fetched lazily via the API instead of fetching them immediately after deployment in all cases\r\n- 2 ways to force regeneration of stack templates\r\n  - set `TEST_INFRA_UPDATE_TEMPLATE=1` (name subject to change)\r\n  - add `force_template_update=True` when instantiating an `InfraProvisioner`\r\n- deprecate `add_custom_setup_provisioning_step` in favor of `add_custom_setup` to unify naming with teardown (`add_custom_teardown`)\r\n\r\nGeneral setup looks like this now:\r\n\r\n```python\r\n    @pytest.fixture(scope=\"class\", autouse=True)\r\n    def infrastructure(self, infrastructure_setup):\r\n        # note the use of the fixture here. we use it for access to the local cdk_templates path for  -ext compatibility as well as automatic client access\r\n        infra = infrastructure_setup(\r\n            namespace=\"SomeNamespace\", force_template_update=True\r\n        )\r\n        stack1 = cdk.Stack(infra.cdk_app, \"Stack11\")\r\n        stack2 = cdk.Stack(infra.cdk_app, \"Stack22\")\r\n        topic1 = cdk.aws_sns.Topic(stack1, \"topic\")\r\n        cdk.aws_ssm.StringParameter(stack1, \"param\", string_value=\"test\")\r\n        topic2 = cdk.aws_sns.Topic(\r\n            stack2, \"topic\", topic_name=cdk.Fn.join(\"-\", [topic1.topic_name, \"suffix\"])\r\n        )\r\n        cdk.CfnOutput(stack1, \"TopicName\", value=topic1.topic_name)\r\n        cdk.CfnOutput(stack2, \"TopicName\", value=topic2.topic_name)\r\n\r\n        with infra.provisioner() as prov:\r\n            yield prov\r\n```\r\n\r\n\r\n## TODO\r\n\r\n- [x] Add docstrings for user facing API\r\n- [x] Make template persistence compatible with -ext (or disable for now)\r\n- [x] Refactor existing tests\r\n- [x] fix s3 URL when deploying against localstack\r\n\r\n\r\n\r\n\r\n\r\n\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-09-29T02:11:06Z",
        "closed_at": "2023-09-29T11:56:09Z",
        "merged_at": "2023-09-29T11:56:09Z",
        "body": "Changes the current release to 2.3.0.",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 8,
        "deletions": 8,
        "changed_files": 4,
        "created_at": "2023-09-28T19:48:44Z",
        "closed_at": "2023-09-29T08:26:47Z",
        "merged_at": "2023-09-29T08:26:47Z",
        "body": "<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nFIX typos\r\n\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\nTypos:\r\ncontributer -> contributor\r\noccured -> occurred\r\npronounciation -> pronunciation\r\nstatment_with_sid -> statement_with_sid\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1210,
        "deletions": 319,
        "changed_files": 34,
        "created_at": "2023-09-28T15:24:23Z",
        "closed_at": "2023-10-03T09:40:03Z",
        "merged_at": "2023-10-03T09:40:03Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nRestructuring the scenario tests; and adding validation where we missed it before.\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\n* Package restructuring\r\n   * moved apigateway test to `services` \r\n* added snapshots\r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 222,
        "deletions": 1,
        "changed_files": 5,
        "created_at": "2023-09-28T12:07:44Z",
        "closed_at": "2023-09-29T15:27:53Z",
        "merged_at": "2023-09-29T15:27:53Z",
        "body": "## Changes\r\nImplementation of CloudFormation support for AWS::Kinesis::StreamConsumer\r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- Add code for case where Consumer is already registed\r\n",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 10,
        "deletions": 10,
        "changed_files": 6,
        "created_at": "2023-09-28T06:15:26Z",
        "closed_at": "2023-09-28T09:40:10Z",
        "merged_at": null,
        "body": "## Motivation\r\n\r\n\r\nFix linting errors. They do seem sensible, so I've address them in this PR\r\n\r\n```\r\n(. .venv/bin/activate; python -m pflake8 --show-source)\r\n./localstack/aws/connect.py:81:12: E721 do not compare types, for exact checks use `is` / `is not`, for instance checks use `isinstance()`\r\n    return type(self) == type(other) and self._user_provided_options == other._user_provided_options\r\n           ^\r\n./localstack/aws/handlers/legacy.py:93:12: E721 do not compare types, for exact checks use `is` / `is not`, for instance checks use `isinstance()`\r\n        if type(result) == int:\r\n           ^\r\n./localstack/aws/handlers/service_plugin.py:61:20: E721 do not compare types, for exact checks use `is` / `is not`, for instance checks use `isinstance()`\r\n                if type(service_plugin.listener) == AwsApiListener:\r\n                   ^\r\n./localstack/http/router.py:240:32: E721 do not compare types, for exact checks use `is` / `is not`, for instance checks use `isinstance()`\r\n        if \"path\" in kwargs or type(args[0]) == str:\r\n                               ^\r\n./localstack/services/lambda_/lambda_api.py:843:12: E721 do not compare types, for exact checks use `is` / `is not`, for instance checks use `isinstance()`\r\n        if type(func) != LambdaFunction:\r\n           ^\r\n./tests/unit/aws/test_skeleton.py:327:20: E721 do not compare types, for exact checks use `is` / `is not`, for instance checks use `isinstance()`\r\n            assert type(context) == RequestContext\r\n                   ^\r\n./tests/unit/aws/test_skeleton.py:337:20: E721 do not compare types, for exact checks use `is` / `is not`, for instance checks use `isinstance()`\r\n            assert type(args[0]) == dict\r\n                   ^\r\n./tests/unit/aws/test_skeleton.py:347:20: E721 do not compare types, for exact checks use `is` / `is not`, for instance checks use `isinstance()`\r\n            assert type(args[0]) == RequestContext\r\n                   ^\r\n./tests/unit/aws/test_skeleton.py:348:20: E721 do not compare types, for exact checks use `is` / `is not`, for instance checks use `isinstance()`\r\n            assert type(args[1]) == dict\r\n                   ^\r\n./tests/unit/aws/test_skeleton.py:357:20: E721 do not compare types, for exact checks use `is` / `is not`, for instance checks use `isinstance()`\r\n            assert type(context) == RequestContext\r\n                   ^\r\n./tests/unit/services/cloudformation/test_deployment_utils.py:15:16: E721 do not compare types, for exact checks use `is` / `is not`, for instance checks use `isinstance()`\r\n        assert type(value) == str\r\n               ^\r\n./tests/unit/services/cloudformation/test_deployment_utils.py:24:16: E721 do not compare types, for exact checks use `is` / `is not`, for instance checks use `isinstance()`\r\n        assert type(value) == str\r\n               ^\r\nmake: *** [Makefile:206: lint] Error 1\r\n```\r\n\r\n## Changes\r\n\r\n- Fix new linting errors\r\n\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 68,
        "deletions": 52,
        "changed_files": 4,
        "created_at": "2023-09-28T06:03:50Z",
        "closed_at": "2023-09-28T07:27:47Z",
        "merged_at": "2023-09-28T07:27:47Z",
        "body": "## Motivation\r\n\r\nThe ARN/partition rewriting feature isn't widely used but it was designed as a low-effort way to add support for non-default (i.e. not `aws`) partitions. It works by rewriting incoming requests and outgoing responses based on the detected region in the ARN. \r\n\r\nSince we had the contract to only  rewrite external requests and ignore internal ones, this lead to issues in CloudFormation for example.\r\n\r\nAnother contributing factor was that legacy models used internal client credentials which work with the legacy detection of internal clients, while the newer `ResourceProvider`-based resources had `test`/`test` credentials.\r\nThey were internal clients according to `context.is_internal_call`, but *not* according to `is_internal_call_context(request.headers)`.\r\nSince the rewriter only detected based on `is_internal_call_context`, it therefore didn't consider clients for newer models as internal.\r\n\r\nWith this PR we fix a few of these issues while also introducing a guard for internal calls which will rewrite both request and response to only include the `DEFAULT_INBOUND_PARTITION` (`aws`). This basically enforces our contract that internally there should only ever be the `DEFAULT_INBOUND_PARTITION` and protects it from any dynamic \"injection\" caused by internal clients. \r\n\r\n\r\n## Changes\r\n\r\nThis PR extends the functionality of the ARN rewriter a bit to make the rewriting more configurable.\r\n### new modes\r\nThere are multiple operation modes you can choose for the rewriting:\r\n- `request`: only the requests gets rewritten (to DEFAULT_INBOUND_PARTITION)\r\n- `response`: only the response gets rewritten (to original partition based on the region)\r\n- `bidirectional`: both request and response are rewritten as described above\r\n- `internal-guard`: both request and response are rewritten, but the response is also rewritten to `DEFAULT_INBOUND_PARTITION` (!)\r\nDefault behavior for external clients is `bidirectional`.\r\nDefault behavior for internal clients is `internal-guard`.\r\nBehavior can be overwritten by setting the \"LS-INTERNAL-REWRITE-MODE\" header\r\n\r\n### other changes\r\n- make internal client detection more robust\r\n- unify client creation in CloudFormation\r\n\r\n## TODO\r\n\r\n- [ ] Should extend the unit tests to cover the new functionality\r\n- [ ] Some legacy resources still use `connect_to` in the model definitions themselves. This isn't really clean since they'll have the wrong credentials, but for now it's fine because of the improved detection of internal clients.\r\n\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 10,
        "deletions": 112,
        "changed_files": 2,
        "created_at": "2023-09-27T22:42:33Z",
        "closed_at": "2023-10-15T16:19:48Z",
        "merged_at": "2023-10-15T16:19:48Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\n\r\nMove patches for airspeed upstream and bump airspeed version\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\n\r\nUpdate the new airspeed release.\r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 55,
        "deletions": 1,
        "changed_files": 3,
        "created_at": "2023-09-27T22:01:22Z",
        "closed_at": "2023-10-10T10:39:24Z",
        "merged_at": "2023-10-10T10:39:24Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\n\r\nFixes #9243 \r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\n\r\n* Adds a new method for internal cache invalidation to remove cached DynamoDB table schemas\r\n* Adds cache invalidation calls when running update table calls against DynamoDB\r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nA test was added to check the invalidation method. It currently isn't in a great state because it is required to modify the global cache used by DynamoDB. I'm open to suggestions on how to make this better if available.\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 7
    },
    {
        "merged": true,
        "additions": 27,
        "deletions": 101,
        "changed_files": 3,
        "created_at": "2023-09-27T14:58:55Z",
        "closed_at": "2023-10-02T12:38:05Z",
        "merged_at": "2023-10-02T12:38:05Z",
        "body": "## Motivation\r\nWe are currently working on unifying processes across multiple repos in the GitHub organization.\r\nFor this purpose, we created an internal repo with some shared workflows.\r\nThis PR onboards `localstack/localstack` to these shared workflows.\r\n\r\n## Changes\r\n- Add the new \"Sync Labels\" workflow.\r\n  - This means that labels defined in our shared repo are automatically added in this repo.\r\n  - This allows using a specific set of labels for other automations (like the project status sync) in multiple repos.\r\n  - The workflow allows defining multiple \"categories\", which is a way in defining different sets of labels for different kinds of repos.\r\n- \"Sync Project Cards\" basically just migrates the existing code to the shared workflow.\r\n  - However, the workflow has been extended a bit such that issues are also automatically added to the projects.\r\n  - This means we do not have to rely on the super-low limit of GitHub project workflow automations (we don't have to have an automation for projects using this workflow).\r\n- \"Triage Stale Issues\" also just migrates the existing code to the new shared workflow.\r\n  - However, the configuration has been slightly adjusted:\r\n    - The time before an issue becomes marked as \"stale\" from 60 days to 14 days.\r\n    - The time before a stale issue gets closed from 14 days to 7 days.\r\n\r\n## Testing\r\nThese workflows have been tested in a separate private repo.",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 39,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2023-09-26T16:25:46Z",
        "closed_at": "2023-09-27T12:33:41Z",
        "merged_at": "2023-09-27T12:33:41Z",
        "body": "## Motivation\r\nThe OpenSearch KNN plugin is currently not working in LocalStack, because we do not properly add the KNN libraries to the `LD_LIBRARY_PATH` when starting OpenSearch.\r\nSee the awesome bug report by @theahura in https://github.com/localstack/localstack/issues/9193 for more details.\r\n\r\n## Changes\r\n- When starting OpenSearch, we check if the specific installation contains a directory at `./plugins/opensearch-knn/lib`.\r\n- If so, we add this path to an existing `LD_LIBRARY_PATH`.\r\n\r\n## Testing\r\n- An existing test was extended (to not waste additional resources in the CI run) which creates - in addition to some plain indices - an index where the KNN plugin is enabled.\r\n- Afterwards a document is added and retrieved.\r\n- The actual error (return status code 500), in case the plugin is not working properly, actually only occurs when retrieving the document!\r\n\r\nFixes #9193 ",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 29,
        "deletions": 18,
        "changed_files": 2,
        "created_at": "2023-09-26T13:22:41Z",
        "closed_at": "2023-09-26T18:20:06Z",
        "merged_at": "2023-09-26T18:20:06Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nThis is basically a continuation of #8948 and #9012.\r\n\r\nWe basically reintroduce hypercorn binding directly to the privileged ports, if run as root.\r\n\r\nAdditionally, we check the `sys.net.ipv4.ip_unprivileged_port_start` kernel parameter, to check the port start of unprivileged ports.\r\n\r\nWe will need to provide proper paths of error handling, to avoid #9012 again.\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\n* Bind hypercorn to privileged ports if root\r\n* Check the actual unprivileged port start instead of assuming 1024.\r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 356,
        "deletions": 1,
        "changed_files": 4,
        "created_at": "2023-09-26T13:18:52Z",
        "closed_at": "2023-09-29T10:41:08Z",
        "merged_at": "2023-09-29T10:41:08Z",
        "body": "## Changes\r\nAdd Kinesis Stream resource provider for CloudFormation\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\nCurrent implementation ignores settings for Tags, StreamEncryption and RetentionPeriodHours\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-09-26T09:38:46Z",
        "closed_at": "2023-10-04T08:24:44Z",
        "merged_at": "2023-10-04T08:24:44Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\n\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\n## Motivation\n\nWith the new DNS server, we want to know how many people are\n* disabling the server with `DNS_ADDRESS=0`,\n* or customising the value because of conflicting programs or other reasons.\n\n\n<!-- What notable changes does this PR make? -->\n## Changes\n\n* Track the value of `DNS_ADDRESS`\n\n## Motivation for tracking the value\n\n* We care if the value is `0` or an IP address\n* The IP address value is not private, and 99% of the time will be either `127.0.0.1` or `0.0.0.0`.\n\n<!-- The following sections are optional, but can be useful! \n\n## Testing\n\nDescription of how to test the changes\n\n## TODO\n\nWhat's left to do:\n\n- [ ] ...\n- [ ] ...\n\n-->\n\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 341,
        "deletions": 0,
        "changed_files": 3,
        "created_at": "2023-09-26T08:55:51Z",
        "closed_at": "2023-09-27T13:04:23Z",
        "merged_at": "2023-09-27T13:04:23Z",
        "body": "\r\n## Motivation\r\nImplementation of \"AWS::Route53::RecordSet\" resource provider for CloudFormation\r\n\r\n## TODO\r\nIn future we should add more tests and improve code to better handle invalid inputs and missing values\r\n\r\n\r\n",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 123,
        "deletions": 5,
        "changed_files": 5,
        "created_at": "2023-09-26T07:43:09Z",
        "closed_at": "2023-10-18T09:29:17Z",
        "merged_at": null,
        "body": "## Motivation\r\n\r\nLocalStack integrations rely on the request context for necessary information such as account ID and region. This information is extracted from the Authorization header by a handler in the request handler chain. \r\n\r\nWith presigned URLs, no authorization header is normally sent. This prevents LS from identifying which account/region to retrieve the bucket from and throws signature mismatch errors when using certain presigned operations.\r\n\r\n## Implementation\r\n\r\nThis PR sets the context region for a presigned request by injecting a marker header that is picked up by the region injection handler. This approach is similar to API gateway.",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2023-09-25T23:54:12Z",
        "closed_at": "2023-09-26T05:21:17Z",
        "merged_at": "2023-09-26T05:21:17Z",
        "body": "Bumps python from `9d1db83` to `5277d9d`.\n\n\n[![Dependabot compatibility score](https://dependabot-badges.githubapp.com/badges/compatibility_score?dependency-name=python&package-manager=docker&previous-version=3.10.13-slim-bullseye&new-version=3.10.13-slim-bullseye)](https://docs.github.com/en/github/managing-security-vulnerabilities/about-dependabot-security-updates#about-compatibility-scores)\n\nDependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.\n\n[//]: # (dependabot-automerge-start)\n[//]: # (dependabot-automerge-end)\n\n---\n\n<details>\n<summary>Dependabot commands and options</summary>\n<br />\n\nYou can trigger Dependabot actions by commenting on this PR:\n- `@dependabot rebase` will rebase this PR\n- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it\n- `@dependabot merge` will merge this PR after your CI passes on it\n- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it\n- `@dependabot cancel merge` will cancel a previously requested merge and block automerging\n- `@dependabot reopen` will reopen this PR if it is closed\n- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually\n- `@dependabot show <dependency name> ignore conditions` will show all of the ignore conditions of the specified dependency\n- `@dependabot ignore this major version` will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot ignore this minor version` will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot ignore this dependency` will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)\n\n\n</details>",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-09-25T23:25:09Z",
        "closed_at": "2023-09-26T05:40:04Z",
        "merged_at": "2023-09-26T05:40:04Z",
        "body": "Bumps [leonsteinhaeuser/project-beta-automations](https://github.com/leonsteinhaeuser/project-beta-automations) from 2.1.0 to 2.2.1.\n<details>\n<summary>Release notes</summary>\n<p><em>Sourced from <a href=\"https://github.com/leonsteinhaeuser/project-beta-automations/releases\">leonsteinhaeuser/project-beta-automations's releases</a>.</em></p>\n<blockquote>\n<h2>Release v2.2.1</h2>\n<h2>What's Changed</h2>\n<ul>\n<li>Fixed wrong default for <code>gh_host</code> by <a href=\"https://github.com/weirdan\"><code>@\u200bweirdan</code></a> in <a href=\"https://redirect.github.com/leonsteinhaeuser/project-beta-automations/pull/78\">leonsteinhaeuser/project-beta-automations#78</a></li>\n</ul>\n<h2>New Contributors</h2>\n<ul>\n<li><a href=\"https://github.com/weirdan\"><code>@\u200bweirdan</code></a> made their first contribution in <a href=\"https://redirect.github.com/leonsteinhaeuser/project-beta-automations/pull/78\">leonsteinhaeuser/project-beta-automations#78</a></li>\n</ul>\n<p><strong>Full Changelog</strong>: <a href=\"https://github.com/leonsteinhaeuser/project-beta-automations/compare/v2.2.0...v2.2.1\">https://github.com/leonsteinhaeuser/project-beta-automations/compare/v2.2.0...v2.2.1</a></p>\n<h2>Release v2.2.0</h2>\n<h2>What's Changed</h2>\n<ul>\n<li>Adding workflow example for PR's coming from forks by <a href=\"https://github.com/ericbsd\"><code>@\u200bericbsd</code></a> in <a href=\"https://redirect.github.com/leonsteinhaeuser/project-beta-automations/pull/64\">leonsteinhaeuser/project-beta-automations#64</a></li>\n<li>feat: ci improvements by <a href=\"https://github.com/leonsteinhaeuser\"><code>@\u200bleonsteinhaeuser</code></a> in <a href=\"https://redirect.github.com/leonsteinhaeuser/project-beta-automations/pull/67\">leonsteinhaeuser/project-beta-automations#67</a></li>\n<li>Eliminate quotes from text data in custom field by <a href=\"https://github.com/satoshihirose\"><code>@\u200bsatoshihirose</code></a> in <a href=\"https://redirect.github.com/leonsteinhaeuser/project-beta-automations/pull/66\">leonsteinhaeuser/project-beta-automations#66</a></li>\n<li>add support for arm-based runners by <a href=\"https://github.com/petrandr\"><code>@\u200bpetrandr</code></a> in <a href=\"https://redirect.github.com/leonsteinhaeuser/project-beta-automations/pull/72\">leonsteinhaeuser/project-beta-automations#72</a></li>\n<li>add support for enterprise customers by <a href=\"https://github.com/petrandr\"><code>@\u200bpetrandr</code></a> in <a href=\"https://redirect.github.com/leonsteinhaeuser/project-beta-automations/pull/74\">leonsteinhaeuser/project-beta-automations#74</a></li>\n</ul>\n<h2>New Contributors</h2>\n<ul>\n<li><a href=\"https://github.com/ericbsd\"><code>@\u200bericbsd</code></a> made their first contribution in <a href=\"https://redirect.github.com/leonsteinhaeuser/project-beta-automations/pull/64\">leonsteinhaeuser/project-beta-automations#64</a></li>\n<li><a href=\"https://github.com/satoshihirose\"><code>@\u200bsatoshihirose</code></a> made their first contribution in <a href=\"https://redirect.github.com/leonsteinhaeuser/project-beta-automations/pull/66\">leonsteinhaeuser/project-beta-automations#66</a></li>\n<li><a href=\"https://github.com/petrandr\"><code>@\u200bpetrandr</code></a> made their first contribution in <a href=\"https://redirect.github.com/leonsteinhaeuser/project-beta-automations/pull/72\">leonsteinhaeuser/project-beta-automations#72</a></li>\n</ul>\n<p><strong>Full Changelog</strong>: <a href=\"https://github.com/leonsteinhaeuser/project-beta-automations/compare/v2.1.0...v2.2.0-rc.1\">https://github.com/leonsteinhaeuser/project-beta-automations/compare/v2.1.0...v2.2.0-rc.1</a></p>\n</blockquote>\n</details>\n<details>\n<summary>Commits</summary>\n<ul>\n<li><a href=\"https://github.com/leonsteinhaeuser/project-beta-automations/commit/939000fb1900c9fc4f7b5058a09d9f833ebc6859\"><code>939000f</code></a> Fixed wrong default for <code>gh_host</code> (<a href=\"https://redirect.github.com/leonsteinhaeuser/project-beta-automations/issues/78\">#78</a>)</li>\n<li><a href=\"https://github.com/leonsteinhaeuser/project-beta-automations/commit/fd1304ba667fd8036ed98d69a5522b1ef53c80d3\"><code>fd1304b</code></a> feat: add support for GH enterprise customers (<a href=\"https://redirect.github.com/leonsteinhaeuser/project-beta-automations/issues/74\">#74</a>)</li>\n<li><a href=\"https://github.com/leonsteinhaeuser/project-beta-automations/commit/db4a30a93601f98d69415f6950f88f3e67f51059\"><code>db4a30a</code></a> feat: add support for arm-based runners (<a href=\"https://redirect.github.com/leonsteinhaeuser/project-beta-automations/issues/72\">#72</a>)</li>\n<li><a href=\"https://github.com/leonsteinhaeuser/project-beta-automations/commit/ee09a4207e6d419ccf7e8ae4f0a5f361a94dc6c7\"><code>ee09a42</code></a> Eliminate quotes from text data in custom field (<a href=\"https://redirect.github.com/leonsteinhaeuser/project-beta-automations/issues/66\">#66</a>)</li>\n<li><a href=\"https://github.com/leonsteinhaeuser/project-beta-automations/commit/26f9aebd9c98cfca43a918c7d7dc7be04eb1efc4\"><code>26f9aeb</code></a> feat: ci improvements (<a href=\"https://redirect.github.com/leonsteinhaeuser/project-beta-automations/issues/67\">#67</a>)</li>\n<li><a href=\"https://github.com/leonsteinhaeuser/project-beta-automations/commit/ed887fa1829ffec22556660cfbb53f91aed891cf\"><code>ed887fa</code></a> docs: added workflow example for PR's coming from forks (<a href=\"https://redirect.github.com/leonsteinhaeuser/project-beta-automations/issues/64\">#64</a>)</li>\n<li>See full diff in <a href=\"https://github.com/leonsteinhaeuser/project-beta-automations/compare/v2.1.0...v2.2.1\">compare view</a></li>\n</ul>\n</details>\n<br />\n\n\n[![Dependabot compatibility score](https://dependabot-badges.githubapp.com/badges/compatibility_score?dependency-name=leonsteinhaeuser/project-beta-automations&package-manager=github_actions&previous-version=2.1.0&new-version=2.2.1)](https://docs.github.com/en/github/managing-security-vulnerabilities/about-dependabot-security-updates#about-compatibility-scores)\n\nDependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.\n\n[//]: # (dependabot-automerge-start)\n[//]: # (dependabot-automerge-end)\n\n---\n\n<details>\n<summary>Dependabot commands and options</summary>\n<br />\n\nYou can trigger Dependabot actions by commenting on this PR:\n- `@dependabot rebase` will rebase this PR\n- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it\n- `@dependabot merge` will merge this PR after your CI passes on it\n- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it\n- `@dependabot cancel merge` will cancel a previously requested merge and block automerging\n- `@dependabot reopen` will reopen this PR if it is closed\n- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually\n- `@dependabot show <dependency name> ignore conditions` will show all of the ignore conditions of the specified dependency\n- `@dependabot ignore this major version` will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot ignore this minor version` will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot ignore this dependency` will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)\n\n\n</details>",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2023-09-25T14:54:47Z",
        "closed_at": "2023-09-26T03:57:14Z",
        "merged_at": "2023-09-26T03:57:14Z",
        "body": "## Motivation\r\nUnfortunately, #9068 broke the \"Welcome First Time Contributors\" GitHub action.\r\nThis PR upgraded the action from GitHub Script v2 to v6.\r\nWith GitHub Script v5, there were some breaking changes related to the REST operations on the `github` object.\r\nMore details can be found here: https://github.com/actions/github-script#breaking-changes-in-v5\r\n\r\n## Changes\r\n- Use `github.rest.<rest-action>` instead of `github.<rest-action>`.\r\n\r\n/cc @HarshCasper ",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 376,
        "deletions": 1,
        "changed_files": 6,
        "created_at": "2023-09-25T11:00:48Z",
        "closed_at": "2023-09-26T13:42:50Z",
        "merged_at": null,
        "body": "## Motivation\r\nCloudFormation should support creation and deleting of Route53 hosted zones\r\n\r\n## Changes\r\n- Added CF tests fro creating and deleting Route53 HostedZone\r\n- Implemented resource provider\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n- Perform snapshot testing\r\n\r\n",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 39,
        "deletions": 194,
        "changed_files": 143,
        "created_at": "2023-09-25T09:57:07Z",
        "closed_at": "2023-10-19T11:33:40Z",
        "merged_at": null,
        "body": "## Motivation\r\nThe latest update of pyproject-flake (6.1.0) recently broke the build.\r\nWe pinned the version with https://github.com/localstack/localstack/pull/9215 to unblock the pipeline.\r\nThis PR removes the pin and upgrades black, flake8, and all related packages, to their latest versions.\r\n\r\n## Changes\r\n- Upgrade black, flake8, and all related packages, to their latest versions. \r\n- Fix new linting errors (flake8 upgrade).\r\n- Reformat code with new black version (black upgrade).",
        "comments": 6
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 3,
        "changed_files": 2,
        "created_at": "2023-09-25T09:49:22Z",
        "closed_at": "2023-09-25T13:21:52Z",
        "merged_at": "2023-09-25T13:21:51Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nUpdating very old cloudwatch snapshots.\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\nNo changes were required - only update of the snapshot file.\r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-09-25T08:59:30Z",
        "closed_at": "2023-09-25T10:15:50Z",
        "merged_at": "2023-09-25T10:15:50Z",
        "body": "Final bump ahead of v2.3 release\r\n\r\nExt Integration Tests # 2494 (seems to be a flake)\r\n\r\n```\r\n2023-09-25T10:01:44.2398121Z =========================== short test summary info ============================\r\n2023-09-25T10:01:44.2398381Z FAILED tests/aws/services/rds/test_rds.py::TestRdsMysql::test_data_api[True]\r\n2023-09-25T10:01:44.3346634Z \u001b[31m= \u001b[31m\u001b[1m1 failed\u001b[0m, \u001b[32m463 passed\u001b[0m, \u001b[33m80 skipped\u001b[0m, \u001b[33m595 deselected\u001b[0m, \u001b[33m45 xfailed\u001b[0m, \u001b[33m6 xpassed\u001b[0m, \u001b[33m336857 warnings\u001b[0m, \u001b\r\n```\r\n\r\ncc: @giograno @sannya-singal \r\n\r\nCloses https://github.com/localstack/localstack/issues/8984\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 5,
        "deletions": 3,
        "changed_files": 2,
        "created_at": "2023-09-25T05:05:49Z",
        "closed_at": "2023-09-25T07:57:08Z",
        "merged_at": "2023-09-25T07:57:08Z",
        "body": "Automatic update of CODEOWNERS file.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 28,
        "deletions": 988,
        "changed_files": 4,
        "created_at": "2023-09-25T05:05:20Z",
        "closed_at": "2023-09-25T09:43:56Z",
        "merged_at": "2023-09-25T09:43:55Z",
        "body": "# \ud83d\ude80 ASF Update Report \ud83d\ude80\nThis PR has been automatically generated to update the generated API stubs for our ASF services.\nIt uses the latest code-generator from the _master_ branch ([scaffold.py](https://github.com/localstack/localstack/blob/master/localstack/aws/scaffold.py)) and the latest _published_ version of [botocore](https://github.com/boto/botocore) to re-generate all API stubs which are already present in the `localstack.aws.api` module of the _master_ branch.\n\n## \ud83d\udd04 Updated Services\nThis PR updates the following services:\n- ec2\n- logs\n- ram\n- s3\n\n## \ud83d\udc77\ud83c\udffd Handle this PR\nThe following options describe how to interact with this PR / the auto-update:\n\n\u2714\ufe0f **Accept Changes**\nIf the changes are satisfying, just squash-merge the PR and delete the source branch.\n\n\ud83d\udeab **Ignore Changes**\nIf you want to ignore the changes in this PR, just close the PR and *do not delete* the source branch. The PR will not be opened and a new PR will not be created for as long as the generated code does not change (or the branch is deleted). As soon as there are new changes, a new PR will be created.\n\n\u270f\ufe0f **Adapt Changes**\n*Don't do this.* The APIs are auto-generated. If you decide that the APIs should look different, you have to change the code-generation.\n\n\u23f8\ufe0f **Pause Updates**\nRemove the cron-schedule trigger of the GitHub Action workflow which creates these PRs. The action can then still be triggered manually, but it will not be executed automatically.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 9,
        "deletions": 13,
        "changed_files": 2,
        "created_at": "2023-09-22T21:42:31Z",
        "closed_at": "2023-09-26T21:03:25Z",
        "merged_at": "2023-09-26T21:03:25Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nThis issue was reported in a support case, the `pathParams` field was not available in the authorizer context. After checking, it seems we only resolved and added to the invocation context at the invocation step, which is executed after the authorizer.\r\n\r\n~Beware, this PR is on top of #9208 because the new tests are using this routing to test different scenarios with the path.~\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\nUpdated a util to set the context as soon as we have the resource details (so that we're able to resolve the path parameters), and removed the resolving in the integration step. \r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 226,
        "deletions": 17,
        "changed_files": 6,
        "created_at": "2023-09-22T20:38:54Z",
        "closed_at": "2023-09-25T08:35:26Z",
        "merged_at": "2023-09-25T08:35:26Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nResolves issue for which lambda resource task would forward extra incorrect arguments if these were specified in Parameters declaration. \r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\nThe issue is resolved by filtering by the supported parameters of the lambda invoke api action.\r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 6,
        "changed_files": 1,
        "created_at": "2023-09-22T16:08:54Z",
        "closed_at": "2023-09-22T22:03:17Z",
        "merged_at": "2023-09-22T22:03:17Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\n\r\nWhile working on #9210, I noticed that `localstack ssh` had some wonky terminal behavior.\r\nI couldn't use CTRL+A, CTRL+E, CTRL+R and other control sequences correctly. New lines were also added twice.\r\n\r\n![Peek 2023-09-22 18-03](https://github.com/localstack/localstack/assets/3996682/4f292b8b-01ee-4bd1-b2e2-7ce55148eb9d)\r\n\r\nIt looks like the `tty=True` option of `run` doesn't really work correctly. <strike>For #8994 I added a `run_interactive` method that is a much simpler implementation of running an interactive command in a subprocess.</strike> Using `os.execlp` (based on @dfangl's suggestion), is much simpler. This works much better now:\r\n\r\n![Peek 2023-09-22 18-03-update](https://github.com/localstack/localstack/assets/3996682/bc2e7b2c-f4fd-464c-8d74-67859b24852b)\r\n\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\n\r\n* Use `run_interactive` for `localstack ssh`\r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 58,
        "deletions": 4,
        "changed_files": 1,
        "created_at": "2023-09-22T15:59:44Z",
        "closed_at": "2023-09-25T12:10:55Z",
        "merged_at": "2023-09-25T12:10:55Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\n\r\nAs the number of CLI commands increases, it becomes harder to separate basic from advanced functionality that is part of our paid offering. This PR introduces the notion of command categories into our `localstack` command group, that allow us to visually separate the commands.\r\n\r\n![image](https://github.com/localstack/localstack/assets/3996682/d74ff093-467e-4580-ac6c-e6f6a81ef754)\r\n\r\nThe current implementation is very rudimentary, with grouping commands manually with a list of commands. I know this is not great, but it's the easiest way to get started without having to introduce additional concepts in ext for now.\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\n\r\n* Rename the `ExceptionCmdHandler` to a more generic `LocalStackCliGroup`\r\n* Overwrite the `format_commands` method of `click.Group` with our own implementation that adds categories\r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 230,
        "deletions": 88,
        "changed_files": 5,
        "created_at": "2023-09-21T23:37:20Z",
        "closed_at": "2023-09-26T19:13:39Z",
        "merged_at": "2023-09-26T19:13:39Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nAs reported in #9207, we did not properly take into account the request method to retrieve the associated APIGW resource. We would take into account the path only, and then retrieve the method. \r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\nWe now take the method into account, and don't match a path if it doesn't contain the request method or `ANY`. Added tests validating this behaviour against AWS, and adapted the unit tests too.\r\nI suppose a bigger refactor would be nice around this, but this seemed like a rather urgent thing to fix. I'll take this into the APIGW backlog together with the more global refactor around the invocation. \r\n\r\nSneaked a quick fix regarding fixture usage and cleanup for some export tests importing API.\r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 7661,
        "deletions": 3263,
        "changed_files": 71,
        "created_at": "2023-09-21T19:56:08Z",
        "closed_at": "2023-10-04T13:59:15Z",
        "merged_at": "2023-10-04T13:59:15Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nAdds support for distributed map runs, ItemReader, and api actions ListMapRuns, DescribeMapRun and UpdateMapRun\r\nLimitations:\r\n    - UpdateMapRun calls update the MapRun record but do not reflect changes in the runtime (warning is logged when appropriate) \r\n    - Failure toleration metrics remain unsupported for distributed map runs `toleratedFailurePercentage` and `toleratedFailureCount`\r\n    - Unknown parity with counter fields in execution and item counters when invoking DescribeMapRun\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\n- Updated the grammar to support parsing ItemReader and related components\r\n- Added evaluation components for all new grammar components\r\n- Reworked map iteration abstraction to support distributed mode\r\n- added item reader csv and json evaluators\r\n- added s3 resolver for item reader resources\r\n- added map_run_record concept to interface the provider with the MapRun backends\r\n- added support for ListMapRuns, DescribeMapRun and UpdateMapRun\r\n- added relevant MapRun tests, and minor provider tests\r\n- updated antlr4 runtime version to latest\r\n- reworked several state factory objects\r\n- other misc of related improvements and fixes\r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 20,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2023-09-21T19:02:24Z",
        "closed_at": "2023-09-22T22:11:40Z",
        "merged_at": "2023-09-22T22:11:40Z",
        "body": "## Motivation\r\n\r\n* With 1.?, the new S3 `v2` provider became available as opt-in.\r\n* With 1.4, the legacy `v1` provider was deprecated and we encouraged users to opt-in to our new S3 `v2` provider.\r\n* With 2.0, the current S3 provider `v2` became the default implementation https://github.com/localstack/localstack/pull/6724.\r\n* With 2.3, we add removal warnings in the old `v1` provider (this PR) and the new native S3 provider `v3` becomes available https://github.com/localstack/localstack/pull/8785.\r\n* With 3.0 the old (v1) provider will be removed completely and the new native S3 provider `v3` becomes the default.\r\n* With 3.1/3.2? (TBD), the current S3 provider `v2` provider will be deprecated\r\n* With 4.0 the current S3 provider `v2` will be removed completely.\r\n\r\n## Changes\r\n\r\nAdd a log warning when the legacy S3 v1 provider is used. Only logged during initialization (`on_after_init`) for people using the legacy S3 service.\r\n\r\n\u26a0\ufe0f This PR needs to be merged before the ext PR: https://github.com/localstack/localstack-ext/pull/2115\r\n\r\n## Discussion\r\n\r\nConsistency: Trying to align the language for the deprecations and removals of s3, lambda, stepfunctions /cc\r\n* @dominikschubert StepFunctions: https://github.com/localstack/localstack/pull/9198\r\n* @joe4dev Lambda: https://github.com/localstack/localstack/pull/9203\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 22,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2023-09-21T18:42:26Z",
        "closed_at": "2023-09-26T06:05:36Z",
        "merged_at": "2023-09-26T06:05:36Z",
        "body": "## Motivation\r\n\r\n* With 1.3, the new Lambda `v2` provider became available as opt-in.\r\n* With 1.4 (ish), the legacy `v1` provider was deprecated and we encouraged users to opt-in to our new Lambda `v2` provider.\r\n* With 2.0, the new lambda provider `v2` became the default implementation https://github.com/localstack/localstack/pull/6724.\r\n* With 2.3, we add removal warnings in the old `v1` provider (this PR). We also ship the Lambda invocation loop rework https://github.com/localstack/localstack/pull/8970 (re-write of data plane).\r\n* With 3.0 the old (v1) provider will be removed completely.\r\n\r\n## Changes\r\n\r\nAdd a log warning when the legacy Lambda v1 provider is used. Only logged during initialization (`on_after_init`) for people using the legacy Lambda service.\r\n\r\n## Discussion\r\n\r\nPro-active warnings at LocalStack startup:\r\n* Do we want to prominently warn about deprecated environment values such as `PROVIDER_OVERRIDE_LAMBDA=v1` at the startup of LocalStack? We currently do not support this with `EnvVarDeprecation`. I drafted an `EnvVarValueDeprecation` in `a26c77375` but reverted it because it needs further updates in the logging message and telemetry if we even need this.\r\n* I guess we would mainly use it for (important) provider deprecation warnings (e.g., S3, Lambda).\r\n* It would help customers to see the warning right at the startup rather than potentially miss it somewhere in the logs when the provider gets loaded lazily.\r\n\r\nConsistency: Trying to align the language for the deprecations and removals of s3, lambda, stepfunctions /cc\r\n* @dominikschubert StepFunctions: https://github.com/localstack/localstack/pull/9198\r\n* @bentsku S3: https://github.com/localstack/localstack/pull/9204\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-09-21T17:44:21Z",
        "closed_at": "2023-09-22T08:40:28Z",
        "merged_at": "2023-09-22T08:40:28Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\n\r\nFor legacy reasons, we used the `local_api_checker` as default health check. This made sense when we had backends running on different ports, but now almost all providers run in memory and not as backends, and those that require backends (like dynamodb), aren't considered anymore through the default `local_api_checker` health check (since we basically just call `:4566`).\r\nBasically, doing health checks in this way makes no sense any more, and we can evaluate whether the concept as such makes sense and if so what we need to do to perform meaningful health checks.\r\n\r\nI've seen errors related to these health checks in logs recently, and I think this is a good opportunity to get rid of them.\r\n\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\n\r\n* When using `Service.for_provider` (which is done in most cases), disable the health check\r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 6,
        "changed_files": 1,
        "created_at": "2023-09-21T13:47:55Z",
        "closed_at": "2023-09-25T07:54:23Z",
        "merged_at": "2023-09-25T07:54:23Z",
        "body": "This small PR fixes ACM tests so that they correctly assert ARNs when resources are created in a non-default account ID.",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 104,
        "deletions": 17,
        "changed_files": 2,
        "created_at": "2023-09-21T13:45:33Z",
        "closed_at": "2023-09-21T18:38:07Z",
        "merged_at": null,
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\n\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\n## Motivation\n\nWhen using `GATEWAY_LISTEN` to override the hypercorn port(s) the internal service health checks are not configured to use this gateway port. This means that the internal health checks will fail.\n\n\n<!-- What notable changes does this PR make? -->\n## Changes\n\n- Add tests that creates a service and checks the internal health check log line, configuring `GATEWAY_LISTEN` and `LOCALSTACK_HOST` (based on existing behaviour).\n- Proxy listeners adhere to `GATEWAY_LISTEN`\n\n\n\n<!-- The following sections are optional, but can be useful! \n\n## Testing\n\nDescription of how to test the changes\n\n## TODO\n\nWhat's left to do:\n\n- [ ] ...\n- [ ] ...\n\n-->\n\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-09-21T09:33:37Z",
        "closed_at": "2023-09-21T11:53:25Z",
        "merged_at": "2023-09-21T11:53:25Z",
        "body": "Ext integration passing :heavy_check_mark:  See Ext Integration Tests # 2467 \r\n\r\nCloses: https://github.com/localstack/localstack/issues/8550",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 6,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-09-21T08:54:52Z",
        "closed_at": "2023-09-26T06:49:09Z",
        "merged_at": "2023-09-26T06:49:09Z",
        "body": "## Motivation\r\n\r\n* With **2.3** we want to start advertising the new `v2` stepfunctions provider more broadly and also let users know that with the next major release, the defaults will change. Ideally anyone using stepfunctions should start to at least opt-in at some point and make sure their current applications are still working with `v2`.\r\n* With **3.0** the old (`v1`) provider will become deprecated and `v2` will become the new default. Users can still opt-in to the old `v1` provider.\r\n* With **4.0** the old (`v1`) provider will be removed completely.\r\n\r\n## Changes\r\n\r\n- Log a warning when the stepfunctions `v1` provider is used. Only logged during initialization since a lot of people might not be affected at this point if they're not using the stepfunctions service at all.\r\n\r\n## Discussion\r\n\r\nWe should also make sure our language is somewhat similar between all the upcoming provider deprecations (s3, lambda, stepfunctions).  /cc @bentsku @joe4dev \r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 4,
        "changed_files": 1,
        "created_at": "2023-09-21T05:37:55Z",
        "closed_at": "2023-09-21T08:27:28Z",
        "merged_at": "2023-09-21T08:27:28Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\n\r\nCloses #9196 \r\n\r\nUpdate `bin/release-helper.sh` to use environment file instead of deprecated `set-output` command. \r\nFor more information, see: [https://github.blog/changelog/2022-10-11-github-actions-deprecating-save-state-and-set-output-commands/](https://github.blog/changelog/2022-10-11-github-actions-deprecating-save-state-and-set-output-commands/)\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\n\r\nReplace deprecated command with environment file.\r\n\r\n**AS-IS**\r\n\r\n```shell\r\nfunction print_github_outputs() {\r\n    echo \"::set-output name=current::${CURRENT_VER}\"\r\n    echo \"::set-output name=release::${RELEASE_VER}\"\r\n    echo \"::set-output name=develop::${DEVELOP_VER}\"\r\n    echo \"::set-output name=boundary::${BOUNDARY_VER}\"\r\n}\r\n```\r\n\r\n**TO-BE**\r\n\r\n```shell\r\nfunction print_github_outputs() {\r\n    echo \"current=${CURRENT_VER}\" >> $GITHUB_OUTPUT\r\n    echo \"release=${RELEASE_VER}\" >> $GITHUB_OUTPUT\r\n    echo \"develop=${DEVELOP_VER}\" >> $GITHUB_OUTPUT\r\n    echo \"boundary=${BOUNDARY_VER}\" >> $GITHUB_OUTPUT\r\n}\r\n```\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 285,
        "deletions": 5,
        "changed_files": 2,
        "created_at": "2023-09-20T13:53:57Z",
        "closed_at": "2023-09-22T10:24:19Z",
        "merged_at": "2023-09-22T10:24:19Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nWith the introduction of the acceptance test suite in #9045 we started collecting metrics as well. \r\nThis PR aims to provide the first prototype to quickly glance through the collected metrics.\r\n\r\nCurrently we have two kind of metrics:\r\n- code coverage\r\n- api coverage\r\n\r\nIn the future those metrics are intended to help service owners to choose tests that should be part of the acceptance test suite. \r\n\r\n### Code Coverage\r\nThe code coverage is collected using the pytest plugin `coverage`, and results in a sqlite database added as artifact in the `report` job. \r\nCode coverage for the \"normal\" integration test is already reported to coveralls.\r\n\r\nIn order to get an overview about the acceptance coverage and the diff, we create two html reports, using [pycobertura](https://github.com/aconrad/pycobertura):\r\n* **coverage-acceptance.html**\r\n  * shows the acceptance code coverage\r\n  * currently it only considers the files in `localstack/services` (which IMO are only relevant ones for the acceptance test suite, but we can discuss this)\r\n  * it also excludes all `__init__.py` files to prevent blowing up the report with (probably) irrelevant information. \r\n* **coverage-diff.html**\r\n  * same restrictions as above, e.g. only considering `localstack/services` and ignoring `__init__.py`\r\n  * gives an overview about code lines that are missed by the acceptance test suite\r\n\r\n### API Coverage\r\nThe metric collection for our test suite include data about each API call. \r\nTo keep things simple, the first prototype considers only service-operation-responsecode combinations. \r\nWe could further enhance this to include specific exceptions, or parameters used. \r\nThe report **api-coverage/report_metric_coverage.html** is added as an artifact to the `report` job as well.\r\n\r\n#### Details\r\nThe PR adds a small script that can be used to create simple HTML report outlining some basic metrics:\r\n* It will show a very naive calculation of service coverage, by counting the amount of operations for each service that have been called for the full integration test suite (which is then treated as 100%); vs the operation called by the acceptance test suite (not considering the specific response codes)\r\n![Screenshot 2023-09-21 at 17 47 34](https://github.com/localstack/localstack/assets/5726672/0f574603-9b33-4abe-bc4b-867e49c634f4)\r\n\r\n\r\n* Additionally, the report contains a list of all service-operation-responsecode combinations and a hint if those have been covered by the acceptance tests.\r\n![Screenshot 2023-09-21 at 17 47 48](https://github.com/localstack/localstack/assets/5726672/1b21094a-a899-448a-85ce-c13bc723b07f)\r\n \r\n\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\n* added two steps to the `report` job to create the html reports\r\n\r\n\r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 5,
        "deletions": 6,
        "changed_files": 1,
        "created_at": "2023-09-20T10:34:48Z",
        "closed_at": "2023-09-20T11:58:07Z",
        "merged_at": "2023-09-20T11:58:07Z",
        "body": "<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\n## Motivation\n\nGATEWAY_LISTEN is propagated to the container in its default form (127.0.0.1:4566) if not specified on the command line. This overrides any customisations that the Pro container configuration has performed (in particular, adding port 443 to GATEWAY_LISTEN).\n\n\n<!-- What notable changes does this PR make? -->\n## Changes\n\n* Update the configurators to ensure that GATEWAY_LISTEN is taken from the configuration\n\n\n<!-- The following sections are optional, but can be useful! \n\n## Testing\n\nDescription of how to test the changes\n\n## TODO\n\nWhat's left to do:\n\n- [ ] ...\n- [ ] ...\n\n-->\n\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 21,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2023-09-19T11:56:54Z",
        "closed_at": "2023-09-19T13:54:10Z",
        "merged_at": "2023-09-19T13:54:10Z",
        "body": "## Motivation\r\n\r\nA flaky Lambda test occasionally blocks the pipeline. \r\n\r\nThank you @bentsku for raising this https://localstack-cloud.slack.com/archives/C02U7DN1B4M/p1695076802171769\r\n\r\n## Changes\r\n\r\n* Increase reserved concurrency in test case\r\n* Document race condition\r\n* Add extra debug logging for concurrency exceptions\r\n\r\n## Discussion\r\n\r\na) The safest fix is to increase ReservedConcurrentExecutions=3 but then we only occasionally test the border case.\r\nb) We could slow down the test and use sleeps to have a high likelyhood of succeeding\r\nc) We separate the mixed async/sync invoke into a separate test case (or after asserting the logs).\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 122,
        "deletions": 27,
        "changed_files": 3,
        "created_at": "2023-09-19T09:14:05Z",
        "closed_at": "2023-10-04T08:46:01Z",
        "merged_at": "2023-10-04T08:46:01Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\n\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\n## Motivation\n\nThe user may specify a custom value of `LOCALSTACK_HOST` which is the domain name of the LocalStack container from the outside. This will not work however in created compute environments, or external docker containers since we only resolve `localhost.localstack.cloud` to the LocalStack container.\n\n\n<!-- What notable changes does this PR make? -->\n## Changes\n\n- Bind LOCALSTACK_HOST to LocalStack IP address\n- Update bootstrap tests to use `stream_container_logs` and `ContainerConfigurators`\n\n\n<!-- The following sections are optional, but can be useful! \n\n## Testing\n\nDescription of how to test the changes\n\n## TODO\n\nWhat's left to do:\n\n- [ ] ...\n- [ ] ...\n\n-->\n\n",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 0,
        "deletions": 18,
        "changed_files": 1,
        "created_at": "2023-09-19T08:49:55Z",
        "closed_at": "2023-09-19T10:55:31Z",
        "merged_at": "2023-09-19T10:55:31Z",
        "body": "## Motivation\r\nThis PR deactivates the PR and the push trigger for the podman tests (`.github/workflows/tests-podman.yml`).\r\nThese tests have been introduced with #8349, but were never green.\r\nThe podman support is currently baked into the `CmdDockerClient` which makes it hard to skip the right tests based on a skip marker.\r\nThis is why I would like to deactivate the PR and push trigger for now, until we:\r\n- Refactor the Docker client such that the Podman Docker client is in a separate class.\r\n- The tests which are not working yet (because the support has not been enhanced wide enough), are skipped for the podman tests such that they can actually become green.\r\n\r\nHowever, the workflow will not be disabled and can be triggered whenever you would like to execute them manually.\r\n\r\n## Changes\r\nDelete the `pull_request` and `push` triggers in `.github/workflows/tests-podman.yml`.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 67,
        "deletions": 17,
        "changed_files": 2,
        "created_at": "2023-09-18T17:54:11Z",
        "closed_at": "2023-09-21T00:47:12Z",
        "merged_at": "2023-09-21T00:47:12Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nThese issues were reported in our community slack channel and converted into an issue: #9173 \r\n\r\nWe wouldn't check the endpoint status when publishing, and we had an incomplete fix for the `CreatePlatformEndpoint` idempotency, which led to an `skip` SNS test. \r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\n- Properly return the `EndpointArn` when calling `CreatePlatformEndpoint` multiple times with the same `CustomUserData` or no user data, and return the proper exception when the `CustomUserData` is different (\"InvalidParameter\") \r\n- Properly validate the endpoint status before publishing and raise an exception if the endpoint is disabled. \r\n\r\nAs always, we cannot AWS validate those because we need real credentials to a register mobile app in GCM (Firebase) or Apple for example to set up a test case. This is always in the backlog, and would be awesome to have at some point, but we'll trust user reports and AWS documentation. \r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 84,
        "deletions": 0,
        "changed_files": 3,
        "created_at": "2023-09-15T20:48:15Z",
        "closed_at": "2023-09-18T19:20:11Z",
        "merged_at": "2023-09-18T19:20:11Z",
        "body": "Addresses https://github.com/localstack/docs/issues/785\r\nRelated to https://github.com/localstack/localstack-pro-samples/issues/224\r\n\r\n## Motivation\r\n\r\nThe AWS CLI v1 and v2 differ in their Lambda payload encoding and using the wrong command or CLI version causes LocalStack to return a confusing `Internal error while executing lambda` rather than raising an `InvalidRequestContentException`.\r\n\r\n## Changes\r\n\r\nThis PR fixes the exception type and improves AWS parity of the error message. The detailed parsing message still differs at AWS but that's cumbersome to fix (probably not worth it).\r\n\r\nAdd an AWS-validated test with two different encoding errors.\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-09-15T15:56:06Z",
        "closed_at": "2023-09-21T11:13:36Z",
        "merged_at": "2023-09-21T11:13:36Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nI am fixing the issue in Step Functions when a Lambda function raise an exception without arguments, like: `raise ValueError()`.\r\nCurrently, the code fails in this case trying to get the error message to propagate and make controller upstream time out.\r\n\r\nAddress #9169\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\nPatch the behavior of retrieving the error message from the exception during errors in the lambda invoked.\r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nJust create a step function which lambda perform `raise ValueError()`\r\nNow the SFN execution wont time out.\r\n\r\n## TODO\r\n\r\nWhat's left to do: Nothing",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 55,
        "deletions": 60,
        "changed_files": 3,
        "created_at": "2023-09-15T15:37:57Z",
        "closed_at": "2023-09-15T16:57:38Z",
        "merged_at": "2023-09-15T16:57:38Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nThis is finally fixing SNS Subscribe idempotency and Subscription Attributes validation, reported again with #9154, which was introduced in #8976 and already fixed with #9055. \r\n\r\nThis time, I think I've got the logic right, basically SNS will only validate present attributes in the `Subscribe` request. If an attribute is not provided, it won't be replaced by its default value but simply ignored.\r\n\r\nThis kinda shows that validation is good, but sometimes can be a bit tricky to write tests for, my bad \ud83d\ude2c \r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\nThis PR introduces the above logic and should fix all subsequent issues. We now check if the attributes is provided, then check if individual validated attributes are present in the request before validating equality with the subscription's. \r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 54,
        "deletions": 192,
        "changed_files": 4,
        "created_at": "2023-09-15T15:12:06Z",
        "closed_at": "2023-09-18T20:10:32Z",
        "merged_at": "2023-09-18T20:10:32Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\n\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\n## Motivation\n\nAn enterprise user noticed that when using `EXTENSION_DEV_MODE=1` is set, the information is not printed correctly to the logs when using `localstack start`.\nI couldn't really find the root cause, but it seems to have something to do with `echo` calls in the docker-entrypoint.sh not showing up in the default outfile, which is the mechanism we use to dump the docker logs.\nWe then listen on those logs using a `FileListener`.\n\nThat seemed a bit roundabout to me now that we have `stream_container_logs`, so I removed the `FileListener` logic alltogether, and just wait for the container to start and then start printing the logs from there.\nSince `docker logs -f` prints all the previous logs, it's a pretty robust solution.\n\nI also found an issue where we didn't pass the `Container` instance to the `LocalstackContainerServer`.\n\n\n<!-- What notable changes does this PR make? -->\n## Changes\n\n* Remove `FileListener` and replace it with `ContainerLogPrinter`\n* Change the bootstrap logic of `localstack start` accordingly\n* Update `LocalstackContainerServer` to also take a `Container` instance\n\n\n<!-- The following sections are optional, but can be useful! \n\n## Testing\n\nDescription of how to test the changes\n\n## TODO\n\nWhat's left to do:\n\n- [ ] ...\n- [ ] ...\n\n-->\n\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 27,
        "deletions": 2,
        "changed_files": 4,
        "created_at": "2023-09-15T14:39:21Z",
        "closed_at": "2023-09-21T21:38:33Z",
        "merged_at": "2023-09-21T21:38:33Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\n\r\nSee #9164\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\n\r\nI updated the regex to match `.`-delineated nested parameter values, like `LaunchTemplate.Version`. Interestingly, the logic of the rest of the function worked as expected. I wonder if the error message format shifted from it's original?\r\n\r\n## Testing\r\n\r\nI wrote a unit test, which should cover the functionality. If you want to replicate it locally, use `awk-cdk-local` and the following CDK snippet (it's probably more than necessary, but it's how I first noticed the issue):\r\n\r\n```ts\r\n#!/usr/bin/env node\r\nimport 'source-map-support/register'\r\nimport * as cdk from 'aws-cdk-lib'\r\nimport { Stack, StackProps } from 'aws-cdk-lib'\r\nimport { Construct } from 'constructs'\r\nimport { InstanceClass, InstanceSize, InstanceType, Vpc } from 'aws-cdk-lib/aws-ec2'\r\nimport { Cluster } from 'aws-cdk-lib/aws-ecs'\r\n\r\nconst app = new cdk.App()\r\nclass TestStack extends Stack {\r\n  constructor(scope: Construct, id: string, props?: StackProps) {\r\n    super(scope, id, props)\r\n\r\n    // Create a simple VPC & security group\r\n    const vpc = new Vpc(this, 'Vpc', { maxAzs: 2 })\r\n\r\n    // Create an ECS Cluster\r\n    const cluster = new Cluster(this, 'Cluster', { vpc })\r\n\r\n    // Attach the capacity provider to the cluster\r\n    cluster.addCapacity('ASGCapacity', {\r\n      instanceType: InstanceType.of(InstanceClass.T2, InstanceSize.MICRO),\r\n      minCapacity: 1,\r\n      maxCapacity: 2,\r\n    })\r\n  }\r\n}\r\n\r\nnew TestStack(app, 'TestStack', {})\r\n```\r\n\r\nI wrote a unit test directly for the function, as it felt like overkill to build out a deployment that generated a nested parameter. I also felt like a test based around deployment could one day change the nesting of parameters, which would make that type of test brittle, so I just wrote a unit test directly for the function.\r\n\r\n",
        "comments": 4
    },
    {
        "merged": false,
        "additions": 21,
        "deletions": 2,
        "changed_files": 3,
        "created_at": "2023-09-15T13:34:56Z",
        "closed_at": "2023-09-15T16:09:31Z",
        "merged_at": null,
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\n\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\n\r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2308,
        "deletions": 0,
        "changed_files": 7,
        "created_at": "2023-09-15T09:59:07Z",
        "closed_at": "2023-09-20T04:18:40Z",
        "merged_at": "2023-09-20T04:18:40Z",
        "body": "## Motivation\r\n\r\nThis PR introduces the Resource Access Manager (RAM) service. RAM is an alternate way to grant access to principals for AWS resources.\r\n\r\nLocalStack allows unrestricted cross-account and cross-region access (unless IAM enforcement is turned on) so this service is redundant. The primary use-case is to let users run and test their IaC workflows with minimal changes.\r\n\r\ncc: @cabeaulac \r\n\r\n## Implementation\r\n\r\nThis is a very basic provider configured to fall back on Moto.\r\n\r\nCurrently following operations will be supported:\r\n\r\n- CreateResourceShare\r\n- UpdateResourceShare\r\n- DeleteResourceShare\r\n- GetResourceShares\r\n- EnableSharingWithAwsOrganization\r\n\r\n## Tests\r\n\r\nIncludes a basic sanity test.\r\n\r\n## Related\r\n\r\nCloses: https://github.com/localstack/localstack/issues/7198\r\n\r\n## To-do\r\n\r\n- Update aws-cli local to support this endpoint\r\n- Update docs",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-09-15T09:17:02Z",
        "closed_at": "2023-09-18T07:31:43Z",
        "merged_at": "2023-09-18T07:31:43Z",
        "body": "Ext run passing :heavy_check_mark: ( see Ext Integration Tests # 2367 )\r\n\r\ncc: @macnev2013 ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2017,
        "deletions": 139,
        "changed_files": 5,
        "created_at": "2023-09-15T03:01:49Z",
        "closed_at": "2023-09-18T17:10:12Z",
        "merged_at": "2023-09-18T17:10:11Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nWhat started as a quick fix for #9145 got a bit out of hand with the introduction of snapshot test.\r\n\r\nThis PR fixes the bug mentioned, and extend the behaviour of the OpenAPI Exporter. It introduces more parity and separate clearly both types of exporter (I'm not exactly sure of the split yet and if I like it, but this could be a good intro for the Importer). \r\n\r\nAlso introduces one apigateway extension, but this will need to be extended to support almost all of them, same way as the importer. \r\n\r\nhttps://docs.aws.amazon.com/apigateway/latest/developerguide/api-gateway-export-api.html\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\nFix the bug above by adding safety around getting attributes.\r\n\r\nRefactored the importer for better separation of the two types of Exporter, those are pretty close but still quite different in their format, and it's hard to merge some behaviour. \r\n\r\nAdded 2 snapshot validated tests around exporting, which helped a lot! \r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 278,
        "deletions": 36,
        "changed_files": 11,
        "created_at": "2023-09-14T22:32:37Z",
        "closed_at": "2023-09-19T20:33:40Z",
        "merged_at": "2023-09-19T20:33:40Z",
        "body": "## Motivation\r\n\r\nThis PR tackles a bunch of discrepancies detected in this [issue](https://github.com/klymenkoserhii/localstack-wisetack-samples/tree/main).\r\n\r\n**1. Request Mapping Template Discrepancies.**\r\n\r\n- [x] $util.escapeJavaScript($path.get($paramName)) - LocalStack version returns string surrounded by double quotes, while AWS version - without double quotes. \u2705 \r\n- [x] $input.params().get('header') - LocalStack version returns data in different format - generate array of (key, value) tuples, while AWS version returns dictionary. \u2705 \r\n\r\n**2. Response Mapping Template Issue - response headers and status codes override doesn't work.**\r\n\r\n- [x]  it looks like **$util.parseJson()** mapping template function not implemented in LocalStack. \u2705 \r\n- [x] It looks like mapping template $context object does not contain responseOverride property which is used to override an API's response parameters and status codes. \u2705 \r\n- [x] A status code can\u2019t be passed directly from the Lambda function in a non-proxy custom integration. AWS recommends to use mapping templates or regular expressions to map the status codes \u2705 \r\n\r\n## Changes\r\n\r\n- Add responseOverrides to the context to enable rendering of VTL templates\r\n- Also tweaks the regular expression to detect dictionary access style on set assignment.\r\n- Introduces `parseJson` and AttributeDict to enable access using dot notation\r\n- Finally, improves openapi import function to enable multiple method responses and integration responses.\r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 81,
        "deletions": 60,
        "changed_files": 3,
        "created_at": "2023-09-14T15:46:53Z",
        "closed_at": "2023-09-14T19:53:34Z",
        "merged_at": "2023-09-14T19:53:34Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nFixes according to #9147.\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\n* Fix easy fixable tests to run against AWS\r\n* Mark tests correctly\r\n* Mark `test_simulate_principle_policy` as needs fixing, as it is wrong\r\n* Allow create_role and create_user fixture to skip users which have already been deleted.\r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 6,
        "changed_files": 1,
        "created_at": "2023-09-14T14:58:38Z",
        "closed_at": "2023-09-14T16:09:47Z",
        "merged_at": "2023-09-14T16:09:47Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\n\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\n## Motivation\n\nFixes some of the markers noted in #9147 that were obvious/worked out of the box\n\n<!-- What notable changes does this PR make? -->\n## Changes\n\n* Marked the two multi-account tests as only-localstack, since they require a secondary account/test endpoint strategies\n* `test_message_with_carriage_return` seems to work now :-)\n\n\n<!-- The following sections are optional, but can be useful! \n\n## Testing\n\nDescription of how to test the changes\n\n## TODO\n\nWhat's left to do:\n\n- [ ] ...\n- [ ] ...\n\n-->\n\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-09-14T14:19:57Z",
        "closed_at": "2023-09-14T15:50:56Z",
        "merged_at": "2023-09-14T15:50:56Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nWith #9139, we introduced a new way to start LS in tests, via a pytest plugin.\r\n\r\nHowever, the hook chosen to start LS, and to check the configuration option, might be executed before the configuration option is set.\r\n\r\nThe configuration options are set in the `pytest_configure` hook, with the following definition:\r\n\r\n```\r\npytest_configure(config)\r\nAllow plugins and conftest files to perform initial configuration.\r\n\r\nThis hook is called for every plugin and initial conftest file after command line options have been parsed.\r\n\r\nAfter that, the hook is called for other conftest files as they are imported.\r\n```\r\n\r\nIn community, this works, as the hook is specified in the initial conftest file, before the pytest_sessionstart hook is executed.\r\n\r\nThis, however, does not work if the test directory specified is a parent folder of the conftest file, as those will then only be imported during test collection, `pytest_sessionstart` takes place before test collection though.\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\n* Add log entry if the config option is not set, to be able to see the cause easier (in comparison to the plugin not being loaded, for example).\r\n* Start LocalStack with the pytest_runtestloop hook. This will take place after test collection, so after the conftest.py files in subdirectories are imported, and therefore the configuration option to start LocalStack should be present in these cases.\r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 57,
        "deletions": 326,
        "changed_files": 48,
        "created_at": "2023-09-14T13:18:58Z",
        "closed_at": "2023-09-19T11:38:12Z",
        "merged_at": "2023-09-19T11:38:12Z",
        "body": "## Motivation\r\nAs announced in https://github.com/localstack/localstack/issues/8827, we are going to drop Python 3.7 support with the next minor release `2.3`.\r\nThis PR drops the tests and updates a bit of the code.\r\n\r\n## Changes\r\n- Updates the README to define the minimum python version to be `3.8`.\r\n- Drops the CLI tests for `3.7`.\r\n- Drops some dependency restrictions for Python < 3.8\r\n  - This is debatable, it will most likely break 3.7 compatibility right away.\r\n- Removes some `3.7`-specific checks in the tests.",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 86,
        "deletions": 9,
        "changed_files": 4,
        "created_at": "2023-09-14T08:23:35Z",
        "closed_at": "2023-09-14T10:01:44Z",
        "merged_at": "2023-09-14T10:01:44Z",
        "body": "# \ud83d\ude80 ASF Update Report \ud83d\ude80\nThis PR has been automatically generated to update the generated API stubs for our ASF services.\nIt uses the latest code-generator from the _master_ branch ([scaffold.py](https://github.com/localstack/localstack/blob/master/localstack/aws/scaffold.py)) and the latest _published_ version of [botocore](https://github.com/boto/botocore) to re-generate all API stubs which are already present in the `localstack.aws.api` module of the _master_ branch.\n\n## \ud83d\udd04 Updated Services\nThis PR updates the following services:\n- ec2\n- events\n- firehose\n- s3\n\n## \ud83d\udc77\ud83c\udffd Handle this PR\nThe following options describe how to interact with this PR / the auto-update:\n\n\u2714\ufe0f **Accept Changes**\nIf the changes are satisfying, just squash-merge the PR and delete the source branch.\n\n\ud83d\udeab **Ignore Changes**\nIf you want to ignore the changes in this PR, just close the PR and *do not delete* the source branch. The PR will not be opened and a new PR will not be created for as long as the generated code does not change (or the branch is deleted). As soon as there are new changes, a new PR will be created.\n\n\u270f\ufe0f **Adapt Changes**\n*Don't do this.* The APIs are auto-generated. If you decide that the APIs should look different, you have to change the code-generation.\n\n\u23f8\ufe0f **Pause Updates**\nRemove the cron-schedule trigger of the GitHub Action workflow which creates these PRs. The action can then still be triggered manually, but it will not be executed automatically.",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 9,
        "deletions": 3,
        "changed_files": 3,
        "created_at": "2023-09-13T22:47:07Z",
        "closed_at": "2023-09-14T08:41:09Z",
        "merged_at": "2023-09-14T08:41:09Z",
        "body": "## Motivation\r\n\r\nWhen trying to open the [issue for the marker report](https://github.com/localstack/localstack/actions/runs/6172856621), we noticed that we're running into the maximum character limit of GitHub issues:\r\n`Validation Failed: {\"resource\":\"Issue\",\"code\":\"custom\",\"field\":\"body\",\"message\":\"body is too long (maximum is 65536 characters)\"}`\r\n\r\nIn a previous PR (https://github.com/localstack/localstack/pull/9141) we've reduced the number of marked tests in the report. We're still a bit off our target, but with this PR it should finally fall under the the `65536` character limit and allow us to open the first GH issue for the marker report.\r\n\r\n## Changes\r\n\r\n- remove links to files\r\n- shorten `CODEOWNER_MISSING` => `?`\r\n\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 194,
        "deletions": 17,
        "changed_files": 5,
        "created_at": "2023-09-13T22:33:55Z",
        "closed_at": "2023-09-14T09:59:43Z",
        "merged_at": "2023-09-14T09:59:43Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nThis is a follow up from the Werkzeug upgrade, and the moto bump adapting to those changes, following the reported issue #9112\r\n\r\nMoto now has a specific handling of special character to maintain compatibility between mocked botocore requests and werkzeuga requests. We've had issues when accessing directly moto's backend to get the key, with the proper key from the request.\r\n\r\nI first suspected moto and tried working on a fix there and wrote some tests, but those were passing there, but not in LocalStack.\r\n\r\nI've tracked it down to passing the request with `call_moto`, we would use the `request.url`, which is the decoded URL, which moto would then use to create its keys internally. \r\n\r\nSome examples of the issues:\r\n#### Passing decoded request URL to moto:\r\nRaw URL: `http://s3.localhost.localstack.cloud:4566/test-bucket-0ff73618/test%2540key/`\r\nrequest.url passed to moto: `http://s3.localhost.localstack.cloud:4566/test-bucket-0ff73618/test@key/`\r\nKey name in moto: `test@key/` when it should be `test%40key/`\r\n\r\n#### Trailing slashes (once the issue above was done)\r\nRaw path: `/test-bucket-18ba44f6/test%2540key/`\r\nParsed key in the parser: `test%40key` (missing the trailing slash, but was properly parsed in moto)\r\nbase_url: `http://s3.localhost.localstack.cloud:4566/test-bucket-18ba44f6/test@key/`\r\nThe check for `base_url.endswith(key)` does not work here, so the trailing slash isn't added.\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\n\r\nMoto needs the raw URL, so we now use `get_full_raw_path` to get the original request URL, so moto can properly use its logic to decode the URL and create the proper key name out of it. \r\n\r\nI've also thought of another scenario where this could be problematic, with special characters and handling slashes, which was already an issue before (this has been changed often, every time werkzeug changes its handling of URL), but sadly there's isn't a catch-all way to check if the request has a trailing slash that needs to be kept. \r\n\r\nTook the opportunity to fix the key returned by the multiple `List*` in the new provider as well, with some AWS validated tests, and removed some TODOs. \r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1508,
        "deletions": 276,
        "changed_files": 48,
        "created_at": "2023-09-13T18:07:25Z",
        "closed_at": "2023-09-13T22:39:58Z",
        "merged_at": "2023-09-13T22:39:58Z",
        "body": "## Motivation\r\n\r\nTo unblock another task (opening a GH issue for all aws_unknown/aws_needs_fixing markers, I need to reduce them first, otherwise we're running into issues with the maximum character limit for GH issues.\r\n\r\n## Changes\r\n\r\n- Validate a lot of `@markers.aws.unknown`-marked integration tests against AWS and assigned `@markers.aws.validated`/`@markers.aws.needs_fixing`/`@markers.aws.only_localstack` where applicable.\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 757,
        "deletions": 9,
        "changed_files": 2,
        "created_at": "2023-09-13T17:12:18Z",
        "closed_at": "2023-09-13T20:59:29Z",
        "merged_at": "2023-09-13T20:59:29Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nWe did not have validated tests for the [ResourceGroups service](https://docs.aws.amazon.com/ARG/latest/userguide/resource-groups.html).\r\n\r\nWe would like to have more validated tests, especially covering the core operations and functionality (being able to query certain resources which have certain tags, or resources from a CloudFormation stack).\r\n\r\nResources:\r\n- Support resources types: https://docs.aws.amazon.com/ARG/latest/userguide/supported-resources.html#services-sqs\r\n- Type of groups: https://docs.aws.amazon.com/ARG/latest/userguide/gettingstarted-query.html\r\n- Integrations with other services: https://docs.aws.amazon.com/ARG/latest/userguide/integrated-services-list.html\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\nAdded AWS validated tests for `ListGroupResources` for tag based queries and cloudformation based queries. One test also covering `SearchResources`, which offers the same functionality without created a group. \r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 115,
        "deletions": 322,
        "changed_files": 4,
        "created_at": "2023-09-13T17:10:14Z",
        "closed_at": "2023-09-13T19:38:45Z",
        "merged_at": "2023-09-13T19:38:45Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\n\r\nThrough the separation of `tests/integration` and `tests/aws`, we duplicated the `conftest.py` file that starts localstack in the pytest interpreter process. This is a problem when you run both `tests/integration` and `tests/aws` in one pytest run, because it means that we attempt to start localstack twice, or start it a second time with polluted global state. specifically this manifested when @dfangl was testing the DNS component.\r\n\r\nOne way to fix this would be to run tests/aws and tests/integration in separate steps. This will surely be the longer-term solution. For now, we de-duplicated the code to start localstack into a pytest plugin. That way the localstack session is shared between test modules correctly. \r\n\r\nIt was important to make sure the plugin has no global side effects so it can be safely imported in other tests that don't want to start localstack in memory. This makes the whole plugin look a bit strange. We initially tried a session-scoped fixture, but that had all sorts of problems associated with it in terms of startup/teardown of other session fixtures that make assumptions about localstack being available. So we rely solely on pytest hooks.\r\n\r\nCo-authored this with @dfangl in a pairing session\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\n\r\n* Move all relevant code into `localstack/testing/pytest/in_memory_localstack.py`\r\n* Greatly simplified the original code\r\n* Move async initialization of service dependencies (like downloading opensearch) into a tests/aws/confitest.py hook\r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1024,
        "deletions": 6,
        "changed_files": 7,
        "created_at": "2023-09-13T16:27:47Z",
        "closed_at": "2023-10-03T16:54:40Z",
        "merged_at": "2023-10-03T16:54:40Z",
        "body": "## Motivation\r\nWhile triaging a tricky issue(#4350) I took the opportunity to migrate the DynamoDB Table generic model into a resource provider.\r\n\r\n\r\n## Changes\r\n- New resource provider for `AWS::DynamoDB::Table`\r\n- ~~The `docker-mount-run` command now also mounts the entrypoints~~ @dominikschubert: removing this from the PR since it's a bit of scope creep. feel free to open a new PR with those changes though\r\n- New aws validated test to validate the dynamodb-kinesis integration \r\n\r\n\r\n\r\n## Testing\r\nAll the CFn deployments of a Table resource should still work\r\n\r\n\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 69,
        "deletions": 4,
        "changed_files": 2,
        "created_at": "2023-09-13T09:56:40Z",
        "closed_at": "2023-09-15T15:40:42Z",
        "merged_at": "2023-09-15T15:40:42Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nAlternative solution to #9130 , without the json serialization and without a separate cache.\r\nIt is not yet clear which approach proves to be the solution we go with, this PR is only for test runs for now.\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\n* Patch botocore config object to be hashable and comparable for equality\r\n* Add tests for caching behavior\r\n* Limit client cache to 256 clients\r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 7,
        "deletions": 5,
        "changed_files": 1,
        "created_at": "2023-09-13T09:09:42Z",
        "closed_at": "2023-09-13T11:52:02Z",
        "merged_at": "2023-09-13T11:52:02Z",
        "body": "## Motivation\r\n\r\nWith https://github.com/localstack/localstack/pull/9084, logs contain the account ID and region from the request context when trace logging is enabled.\r\n\r\nHowever, not all HTTP requests have an AWS context, a la ones made to the health endpoint `/_localstack/health` or stack info `/_localstack/stackinfo`. \r\n\r\nThis was caused following:\r\n\r\n```\r\nlocalstack_main  | 2023-09-13T07:59:32.703 DEBUG --- [   asgi_gw_1] l.aws.serving.wsgi         : GET localhost.localstack.cloud:4566/_localstack/health\r\nlocalstack_main  | 2023-09-13T07:59:32.712 DEBUG --- [   asgi_gw_0] l.aws.serving.wsgi         : GET localhost.localstack.cloud:4566/_localstack/stackinfo\r\nlocalstack_main  | --- Logging error ---\r\nlocalstack_main  | Traceback (most recent call last):\r\nlocalstack_main  |   File \"/usr/local/lib/python3.10/logging/__init__.py\", line 440, in format\r\nlocalstack_main  |     return self._format(record)\r\nlocalstack_main  |   File \"/usr/local/lib/python3.10/logging/__init__.py\", line 436, in _format\r\nlocalstack_main  |     return self._fmt % values\r\nlocalstack_main  | KeyError: 'account_id'\r\nlocalstack_main  |\r\nlocalstack_main  | During handling of the above exception, another exception occurred:\r\nlocalstack_main  |\r\nlocalstack_main  | Traceback (most recent call last):\r\nlocalstack_main  |   File \"/usr/local/lib/python3.10/logging/__init__.py\", line 1100, in emit\r\nlocalstack_main  |     msg = self.format(record)\r\nlocalstack_main  |   File \"/usr/local/lib/python3.10/logging/__init__.py\", line 943, in format\r\nlocalstack_main  |     return fmt.format(record)\r\nlocalstack_main  |   File \"/usr/local/lib/python3.10/logging/__init__.py\", line 681, in format\r\nlocalstack_main  |     s = self.formatMessage(record)\r\nlocalstack_main  |   File \"/usr/local/lib/python3.10/logging/__init__.py\", line 650, in formatMessage\r\nlocalstack_main  |     return self._style.format(record)\r\nlocalstack_main  |   File \"/usr/local/lib/python3.10/logging/__init__.py\", line 442, in format\r\nlocalstack_main  |     raise ValueError('Formatting field not found in record: %s' % e)\r\nlocalstack_main  | ValueError: Formatting field not found in record: 'account_id'\r\nlocalstack_main  | Call stack:\r\nlocalstack_main  |   File \"/usr/local/lib/python3.10/threading.py\", line 973, in _bootstrap\r\nlocalstack_main  |     self._bootstrap_inner()\r\nlocalstack_main  |   File \"/usr/local/lib/python3.10/threading.py\", line 1016, in _bootstrap_inner\r\nlocalstack_main  |     self.run()\r\nlocalstack_main  |   File \"/usr/local/lib/python3.10/threading.py\", line 953, in run\r\nlocalstack_main  |     self._target(*self._args, **self._kwargs)\r\nlocalstack_main  |   File \"/usr/local/lib/python3.10/concurrent/futures/thread.py\", line 83, in _worker\r\nlocalstack_main  |     work_item.run()\r\nlocalstack_main  |   File \"/usr/local/lib/python3.10/concurrent/futures/thread.py\", line 58, in run\r\nlocalstack_main  |     result = self.fn(*self.args, **self.kwargs)\r\nlocalstack_main  |   File \"/opt/code/localstack/.venv/lib/python3.10/site-packages/localstack/aws/serving/wsgi.py\", line 50, in __call__\r\nlocalstack_main  |     self.gateway.process(request, response)\r\nlocalstack_main  |   File \"/opt/code/localstack/.venv/lib/python3.10/site-packages/localstack/aws/gateway.py\", line 37, in process\r\nlocalstack_main  |     chain.handle(context, response)\r\nlocalstack_main  |   File \"/opt/code/localstack/.venv/lib/python3.10/site-packages/localstack/aws/chain.py\", line 110, in handle\r\nlocalstack_main  |     self._call_response_handlers(response)\r\nlocalstack_main  |   File \"/opt/code/localstack/.venv/lib/python3.10/site-packages/localstack/aws/chain.py\", line 155, in _call_response_handlers\r\nlocalstack_main  |     handler(self, self.context, response)\r\nlocalstack_main  |   File \"/opt/code/localstack/.venv/lib/python3.10/site-packages/localstack/aws/handlers/logging.py\", line 47, in __call__\r\nlocalstack_main  |     self._log(context, response)\r\nlocalstack_main  |   File \"/opt/code/localstack/.venv/lib/python3.10/site-packages/localstack/aws/handlers/logging.py\", line 142, in _log\r\nlocalstack_main  |     http_logger.info(\r\nlocalstack_main  | Message: '%s %s => %d'\r\nlocalstack_main  | Arguments: ('GET', '/_localstack/stackinfo', 200)\r\n```\r\n\r\n## Implementation\r\n\r\nThis PR adjusts the log formatters so that the account ID and region is only included for requests with AWS context. Now,\r\n\r\nRequests with an AWS context produce:\r\n\r\n```\r\n2023-09-13T14:31:11.096  INFO --- [   asgi_gw_0] localstack.request.aws     : AWS ec2.DescribeInstances => 200; 000000000000/eu-central-1; DescribeInstancesRequest({}, headers={'Host': 'localhost:4566', 'Accept-Encoding': 'identity', 'Content-Type': 'application/x-www-form-urlencoded; charset=utf-8', 'User-Agent': 'aws-cli/2.11.9 Python/3.11.2 Linux/6.2.0-32-generic exe/x86_64.neon.22 prompt/off command/ec2.describe-instances', 'X-Amz-Date': '20230913T090110Z', 'Authorization': 'AWS4-HMAC-SHA256 Credential=000000000000/20230913/eu-central-1/ec2/aws4_request, SignedHeaders=content-type;host;x-amz-date, Signature=f2af98c96887b4a619c5241f1f4249eb6b3b35f41fec0dced7b0d427512bdffd', 'Content-Length': '43', 'x-localstack-tgt-api': 'ec2', 'x-moto-account-id': '000000000000'}); DescribeInstancesResult({'Reservations': []}, headers={'Content-Type': 'text/xml', 'Content-Length': '219', 'Connection': 'close', 'Access-Control-Allow-Origin': '*', 'Access-Control-Allow-Methods': 'HEAD,GET,PUT,POST,DELETE,OPTIONS,PATCH', 'Access-Control-Allow-Headers': 'authorization,cache-control,content-length,content-md5,content-type,etag,location,x-amz-acl,x-amz-content-sha256,x-amz-date,x-amz-request-id,x-amz-security-token,x-amz-tagging,x-amz-target,x-amz-user-agent,x-amz-version-id,x-amzn-requestid,x-localstack-target,amz-sdk-invocation-id,amz-sdk-request', 'Access-Control-Expose-Headers': 'etag,x-amz-version-id'})\r\n```\r\n\r\nAll other requests produce:\r\n\r\n```\r\n2023-09-13T14:31:03.774  INFO --- [   asgi_gw_0] localstack.request.http    : GET /_localstack/stackinfo => 404; Request(b'', headers={'Host': 'localhost.localstack.cloud:4566', 'User-Agent': 'curl/7.81.0', 'Accept': '*/*'}); Response(b'', headers={'Content-Type': 'text/plain; charset=utf-8', 'Connection': 'close', 'Access-Control-Allow-Origin': '*', 'Access-Control-Allow-Methods': 'HEAD,GET,PUT,POST,DELETE,OPTIONS,PATCH', 'Access-Control-Allow-Headers': 'authorization,cache-control,content-length,content-md5,content-type,etag,location,x-amz-acl,x-amz-content-sha256,x-amz-date,x-amz-request-id,x-amz-security-token,x-amz-tagging,x-amz-target,x-amz-user-agent,x-amz-version-id,x-amzn-requestid,x-localstack-target,amz-sdk-invocation-id,amz-sdk-request', 'Access-Control-Expose-Headers': 'etag,x-amz-version-id'})\r\n```\r\n\r\n```\r\n2023-09-13T14:31:07.755 DEBUG --- [   asgi_gw_0] l.aws.serving.wsgi         : GET localhost.localstack.cloud:4566/_localstack/health\r\n```\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 253,
        "deletions": 0,
        "changed_files": 3,
        "created_at": "2023-09-13T07:22:05Z",
        "closed_at": "2023-09-13T12:36:57Z",
        "merged_at": "2023-09-13T12:36:57Z",
        "body": "## Motivation\r\n\r\nThis is an attempt to introduce a new channel for \"call-to-actions\" that is closer to the actual source and through the use of `@` github handles automatically integrates very well into any existing notification setup.\r\n\r\nIn this specific case we make use of the `CODEOWNERS` file to list tests cases, which are marked with the AWS marker `@markers.aws.unknown` or `@markers.aws.needs_fixing` with the corresponding owners as a sort of TODO-list they can work through.\r\nThis is not mandatory by any means but it should help make this more visible until we get these down to 0.\r\nAt that point the corresponding markers can be disabled and this action can be removed.\r\n\r\n\r\n## Changes\r\n\r\n- Adds a new GH action `Open marker report GH issue`\r\n  - only triggered manually for now, but in the future we might add a periodic schedule as well\r\n  - creates a marker report using the plugin introduced in https://github.com/localstack/localstack/pull/8979 for our tests & enriches the data with the responsible codeowners\r\n  - uses a jinja2 template which together with the enriched data is rendered into a markdown file\r\n  - the rendered markdown file is used to open a new issue on this repo\r\n\r\n## TODO\r\n\r\n- [x] remove parts marked with TODO in workflow file before merge\r\n\r\n## Example\r\n\r\nNote that all occurrences of the individual codeowners here have been replaced by `<codeowner>` to avoid notifying people for this example.\r\n\r\n<details>\r\n<summary>Example markdown (click to open)</summary>\r\n\r\n# AWS marker report\r\n\r\n- Repository: https://github.com/localstack/localstack\r\n- Reference Commit: `150a82ff8babb16f1f107df19d3e856602dd6bcb`\r\n- Timestamp: `2023-09-13T07:24:39.632576`\r\n\r\nThis is an autogenerated report on our pytest marker usage with a special focus on our AWS compatibility markers, i.e. the ones prefixed with `aws_`.\r\n\r\n```text\r\nacceptance_test : 5\r\naws_manual_setup_required : 11\r\naws_needs_fixing : 6\r\naws_only_localstack : 111\r\naws_unknown : 625\r\naws_validated : 1440\r\nmultiruntime : 71\r\nno_apigw_snap_transformers : 3\r\nskip : 127\r\nskip_offline : 59\r\nskip_snapshot_verify : 877\r\nskipif : 585\r\nusefixtures : 14\r\nwhitebox : 14\r\nxfail : 126\r\n``` \r\n\r\nBoth aws_unknown and `aws_needs_fixing` need to be reduced to `0` over time.\r\nIf you have some spare capacity please take one of these tests, try it against AWS and see if it works. Replace `aws_unknown` with the correct marker.\r\nTo avoid the case where two people are concurrently working on one test case, please tick the box to \"claim\" a case when you want to work on it.\r\n\r\n_Note_: The individual assignments here are based on the entries in the [CODEOWNERS](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/CODEOWNERS) file.\r\n\r\n## unknown (625)\r\n\r\n- [ ] `tests/aws/scenario/reference/test_lambda_scenario.py::TestBasicLambda::test_scenario_validate_infra` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/scenario/reference/test_lambda_scenario.py)) \r\n- [ ] `tests/aws/scenario/reference/test_lambda_scenario.py::TestBasicLambdaInS3::test_scenario_validate_infra` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/scenario/reference/test_lambda_scenario.py)) \r\n- [ ] `tests/aws/scenario/reference/test_s3_cleanup.py::TestS3CleanupScenario::test_scenario_validate_infra` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/scenario/reference/test_s3_cleanup.py)) \r\n- [ ] `tests/aws/scenario/test_ecs_scenario.py::TestEcsScenario::test_scenario_validate_infra` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/scenario/test_ecs_scenario.py)) \r\n- [ ] `tests/aws/scenario/test_ecs_scenario.py::TestEcsScenario::test_scenario_call_service` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/scenario/test_ecs_scenario.py)) \r\n- [ ] `tests/aws/scenario/test_lambda_destination_scenario.py::TestLambdaDestinationScenario::test_infra` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/scenario/test_lambda_destination_scenario.py)) \r\n- [ ] `tests/aws/scenario/test_lambda_destination_scenario.py::TestLambdaDestinationScenario::test_destination_sns` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/scenario/test_lambda_destination_scenario.py)) \r\n- [ ] `tests/aws/scenario/test_note_taking.py::TestNoteTakingScenario::test_notes_rest_api` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/scenario/test_note_taking.py)) \r\n- [ ] `tests/aws/scenario/test_note_taking.py::TestNoteTakingScenario::test_another_scenario` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/scenario/test_note_taking.py)) \r\n- [ ] `tests/aws/services/acm/test_acm.py::TestACM::test_import_certificate` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/acm/test_acm.py)) `<codeowner>`\r\n- [ ] `tests/aws/services/acm/test_acm.py::TestACM::test_domain_validation` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/acm/test_acm.py)) `<codeowner>`\r\n- [ ] `tests/aws/services/acm/test_acm.py::TestACM::test_boto_wait_for_certificate_validation` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/acm/test_acm.py)) `<codeowner>`\r\n- [ ] `tests/aws/services/apigateway/test_apigateway_basic.py::TestAPIGateway::test_create_rest_api_with_custom_id[path_based_url]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/apigateway/test_apigateway_basic.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/apigateway/test_apigateway_basic.py::TestAPIGateway::test_create_rest_api_with_custom_id[host_based_url]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/apigateway/test_apigateway_basic.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/apigateway/test_apigateway_basic.py::TestAPIGateway::test_update_rest_api_deployment` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/apigateway/test_apigateway_basic.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/apigateway/test_apigateway_basic.py::TestAPIGateway::test_api_gateway_lambda_integration` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/apigateway/test_apigateway_basic.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/apigateway/test_apigateway_basic.py::TestAPIGateway::test_invoke_endpoint_cors_headers[http://allowed-True-True]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/apigateway/test_apigateway_basic.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/apigateway/test_apigateway_basic.py::TestAPIGateway::test_invoke_endpoint_cors_headers[http://allowed-True-False]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/apigateway/test_apigateway_basic.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/apigateway/test_apigateway_basic.py::TestAPIGateway::test_invoke_endpoint_cors_headers[http://allowed-False-True]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/apigateway/test_apigateway_basic.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/apigateway/test_apigateway_basic.py::TestAPIGateway::test_invoke_endpoint_cors_headers[http://allowed-False-False]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/apigateway/test_apigateway_basic.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/apigateway/test_apigateway_basic.py::TestAPIGateway::test_invoke_endpoint_cors_headers[http://denied-True-True]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/apigateway/test_apigateway_basic.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/apigateway/test_apigateway_basic.py::TestAPIGateway::test_invoke_endpoint_cors_headers[http://denied-True-False]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/apigateway/test_apigateway_basic.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/apigateway/test_apigateway_basic.py::TestAPIGateway::test_invoke_endpoint_cors_headers[http://denied-False-True]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/apigateway/test_apigateway_basic.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/apigateway/test_apigateway_basic.py::TestAPIGateway::test_invoke_endpoint_cors_headers[http://denied-False-False]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/apigateway/test_apigateway_basic.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/apigateway/test_apigateway_basic.py::TestAPIGateway::test_api_gateway_lambda_proxy_integration` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/apigateway/test_apigateway_basic.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/apigateway/test_apigateway_basic.py::TestAPIGateway::test_api_gateway_lambda_proxy_integration_with_path_param` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/apigateway/test_apigateway_basic.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/apigateway/test_apigateway_basic.py::TestAPIGateway::test_api_gateway_lambda_proxy_integration_with_is_base_64_encoded` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/apigateway/test_apigateway_basic.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/apigateway/test_apigateway_basic.py::TestAPIGateway::test_api_gateway_lambda_proxy_integration_any_method` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/apigateway/test_apigateway_basic.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/apigateway/test_apigateway_basic.py::TestAPIGateway::test_api_gateway_lambda_proxy_integration_any_method_with_path_param` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/apigateway/test_apigateway_basic.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/apigateway/test_apigateway_basic.py::TestAPIGateway::test_api_gateway_lambda_asynchronous_invocation` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/apigateway/test_apigateway_basic.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/apigateway/test_apigateway_basic.py::TestAPIGateway::test_api_gateway_mock_integration` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/apigateway/test_apigateway_basic.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/apigateway/test_apigateway_basic.py::TestAPIGateway::test_api_gateway_authorizer_crud` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/apigateway/test_apigateway_basic.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/apigateway/test_apigateway_basic.py::TestAPIGateway::test_malformed_response_apigw_invocation` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/apigateway/test_apigateway_basic.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/apigateway/test_apigateway_basic.py::TestAPIGateway::test_api_gateway_handle_domain_name` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/apigateway/test_apigateway_basic.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/apigateway/test_apigateway_basic.py::TestAPIGateway::test_apigateway_with_custom_authorization_method` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/apigateway/test_apigateway_basic.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/apigateway/test_apigateway_basic.py::TestAPIGateway::test_base_path_mapping` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/apigateway/test_apigateway_basic.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/apigateway/test_apigateway_basic.py::TestAPIGateway::test_base_path_mapping_root` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/apigateway/test_apigateway_basic.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/apigateway/test_apigateway_basic.py::TestAPIGateway::test_api_account` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/apigateway/test_apigateway_basic.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/apigateway/test_apigateway_basic.py::TestAPIGateway::test_put_integration_dynamodb_proxy_validation_without_request_template` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/apigateway/test_apigateway_basic.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/apigateway/test_apigateway_basic.py::TestAPIGateway::test_put_integration_dynamodb_proxy_validation_with_request_template` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/apigateway/test_apigateway_basic.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/apigateway/test_apigateway_basic.py::TestAPIGateway::test_multiple_api_keys_validate` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/apigateway/test_apigateway_basic.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/apigateway/test_apigateway_basic.py::TestAPIGateway::test_api_gateway_http_integration_with_path_request_parameter` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/apigateway/test_apigateway_basic.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/apigateway/test_apigateway_basic.py::TestAPIGateway::test_api_mock_integration_response_params` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/apigateway/test_apigateway_basic.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/apigateway/test_apigateway_basic.py::TestAPIGateway::test_api_gateway_update_resource_path_part` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/apigateway/test_apigateway_basic.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/apigateway/test_apigateway_basic.py::TestAPIGateway::test_apigw_test_invoke_method_api` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/apigateway/test_apigateway_basic.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/apigateway/test_apigateway_basic.py::TestTagging::test_tag_api` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/apigateway/test_apigateway_basic.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/apigateway/test_apigateway_basic.py::test_apigateway_rust_lambda` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/apigateway/test_apigateway_basic.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/apigateway/test_apigateway_basic.py::test_apigw_call_api_with_aws_endpoint_url` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/apigateway/test_apigateway_basic.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/apigateway/test_apigateway_basic.py::test_rest_api_multi_region[path_based_url-GET]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/apigateway/test_apigateway_basic.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/apigateway/test_apigateway_basic.py::test_rest_api_multi_region[path_based_url-ANY]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/apigateway/test_apigateway_basic.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/apigateway/test_apigateway_basic.py::test_rest_api_multi_region[host_based_url-GET]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/apigateway/test_apigateway_basic.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/apigateway/test_apigateway_basic.py::test_rest_api_multi_region[host_based_url-ANY]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/apigateway/test_apigateway_basic.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/apigateway/test_apigateway_basic.py::TestIntegrations::test_api_gateway_s3_get_integration` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/apigateway/test_apigateway_basic.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/apigateway/test_apigateway_basic.py::TestIntegrations::test_mock_integration_response[WHEN_NO_MATCH-path_based_url-GET]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/apigateway/test_apigateway_basic.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/apigateway/test_apigateway_basic.py::TestIntegrations::test_mock_integration_response[WHEN_NO_MATCH-path_based_url-POST]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/apigateway/test_apigateway_basic.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/apigateway/test_apigateway_basic.py::TestIntegrations::test_mock_integration_response[WHEN_NO_MATCH-host_based_url-GET]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/apigateway/test_apigateway_basic.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/apigateway/test_apigateway_basic.py::TestIntegrations::test_mock_integration_response[WHEN_NO_MATCH-host_based_url-POST]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/apigateway/test_apigateway_basic.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/apigateway/test_apigateway_basic.py::TestIntegrations::test_mock_integration_response[NEVER-path_based_url-GET]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/apigateway/test_apigateway_basic.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/apigateway/test_apigateway_basic.py::TestIntegrations::test_mock_integration_response[NEVER-path_based_url-POST]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/apigateway/test_apigateway_basic.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/apigateway/test_apigateway_basic.py::TestIntegrations::test_mock_integration_response[NEVER-host_based_url-GET]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/apigateway/test_apigateway_basic.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/apigateway/test_apigateway_basic.py::TestIntegrations::test_mock_integration_response[NEVER-host_based_url-POST]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/apigateway/test_apigateway_basic.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/apigateway/test_apigateway_basic.py::TestIntegrations::test_mock_integration_response[WHEN_NO_TEMPLATES-path_based_url-GET]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/apigateway/test_apigateway_basic.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/apigateway/test_apigateway_basic.py::TestIntegrations::test_mock_integration_response[WHEN_NO_TEMPLATES-path_based_url-POST]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/apigateway/test_apigateway_basic.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/apigateway/test_apigateway_basic.py::TestIntegrations::test_mock_integration_response[WHEN_NO_TEMPLATES-host_based_url-GET]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/apigateway/test_apigateway_basic.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/apigateway/test_apigateway_basic.py::TestIntegrations::test_mock_integration_response[WHEN_NO_TEMPLATES-host_based_url-POST]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/apigateway/test_apigateway_basic.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/apigateway/test_apigateway_basic.py::TestIntegrations::test_api_gateway_http_integrations[custom]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/apigateway/test_apigateway_basic.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/apigateway/test_apigateway_basic.py::TestIntegrations::test_api_gateway_http_integrations[proxy]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/apigateway/test_apigateway_basic.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/apigateway/test_apigateway_basic.py::TestIntegrations::test_api_gateway_kinesis_integration` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/apigateway/test_apigateway_basic.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/apigateway/test_apigateway_basic.py::TestIntegrations::test_api_gateway_sqs_integration_with_event_source` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/apigateway/test_apigateway_basic.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/apigateway/test_apigateway_extended.py::test_export_swagger_openapi` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/apigateway/test_apigateway_extended.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/apigateway/test_apigateway_extended.py::test_export_oas30_openapi` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/apigateway/test_apigateway_extended.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/apigateway/test_apigateway_extended.py::test_create_domain_names` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/apigateway/test_apigateway_extended.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/apigateway/test_apigateway_extended.py::test_get_domain_names` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/apigateway/test_apigateway_extended.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/apigateway/test_apigateway_extended.py::test_get_domain_name` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/apigateway/test_apigateway_extended.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/apigateway/test_apigateway_integrations.py::test_http_integration` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/apigateway/test_apigateway_integrations.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/apigateway/test_apigateway_integrations.py::test_put_integration_response_with_response_template` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/apigateway/test_apigateway_integrations.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/apigateway/test_apigateway_integrations.py::test_put_integration_validation` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/apigateway/test_apigateway_integrations.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/apigateway/test_apigateway_sqs.py::test_api_gateway_sqs_integration` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/apigateway/test_apigateway_sqs.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/cloudformation/api/test_changesets.py::test_create_change_set_without_parameters` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/api/test_changesets.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/cloudformation/api/test_changesets.py::test_create_change_set_with_template_url` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/api/test_changesets.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/cloudformation/api/test_changesets.py::test_create_change_set_create_existing` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/api/test_changesets.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/cloudformation/api/test_changesets.py::test_create_change_set_update_nonexisting` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/api/test_changesets.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/cloudformation/api/test_changesets.py::test_create_change_set_import` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/api/test_changesets.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/cloudformation/api/test_changesets.py::test_create_change_set_invalid_params` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/api/test_changesets.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/cloudformation/api/test_changesets.py::test_create_change_set_missing_stackname` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/api/test_changesets.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/cloudformation/api/test_changesets.py::test_execute_change_set` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/api/test_changesets.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/cloudformation/api/test_nested_stacks.py::test_nested_stack` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/api/test_nested_stacks.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/cloudformation/api/test_stacks.py::TestStacksApi::test_list_stack_resources_for_removed_resource` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/api/test_stacks.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/cloudformation/api/test_stacks.py::TestStacksApi::test_update_stack_with_same_template_withoutchange` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/api/test_stacks.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/cloudformation/api/test_stacks.py::TestStacksApi::test_failure_options_for_stack_update[False-2]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/api/test_stacks.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/cloudformation/api/test_stacks.py::TestStacksApi::test_failure_options_for_stack_update[True-1]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/api/test_stacks.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/cloudformation/resources/test_apigateway.py::test_cfn_apigateway_aws_integration` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/resources/test_apigateway.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/cloudformation/resources/test_apigateway.py::test_cfn_apigateway_rest_api` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/resources/test_apigateway.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/cloudformation/resources/test_cdk.py::TestCdkInit::test_cdk_bootstrap[10]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/resources/test_cdk.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/cloudformation/resources/test_cdk.py::TestCdkInit::test_cdk_bootstrap[11]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/resources/test_cdk.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/cloudformation/resources/test_cdk.py::TestCdkInit::test_cdk_bootstrap[12]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/resources/test_cdk.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/cloudformation/resources/test_cdk.py::TestCdkInit::test_cdk_bootstrap_redeploy` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/resources/test_cdk.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/cloudformation/resources/test_cdk.py::TestCdkInit::test_cdk_template` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/resources/test_cdk.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/cloudformation/resources/test_ec2.py::test_vpc_creates_default_sg` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/resources/test_ec2.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/cloudformation/resources/test_ec2.py::test_cfn_with_multiple_route_table_associations` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/resources/test_ec2.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/cloudformation/resources/test_elasticsearch.py::test_cfn_handle_elasticsearch_domain` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/resources/test_elasticsearch.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/cloudformation/resources/test_events.py::test_eventbus_policies` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/resources/test_events.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/cloudformation/resources/test_events.py::test_eventbus_policy_statement` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/resources/test_events.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/cloudformation/resources/test_events.py::test_event_rule_to_logs` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/resources/test_events.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/cloudformation/resources/test_events.py::test_event_rule_creation_without_target` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/resources/test_events.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/cloudformation/resources/test_events.py::test_cfn_event_bus_resource` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/resources/test_events.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/cloudformation/resources/test_events.py::test_cfn_handle_events_rule` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/resources/test_events.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/cloudformation/resources/test_events.py::test_cfn_handle_events_rule_without_name` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/resources/test_events.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/cloudformation/resources/test_integration.py::test_events_sqs_sns_lambda` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/resources/test_integration.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/cloudformation/resources/test_kinesis.py::test_default_parameters_kinesis` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/resources/test_kinesis.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/cloudformation/resources/test_kinesis.py::test_cfn_handle_kinesis_firehose_resources` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/resources/test_kinesis.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/cloudformation/resources/test_kinesis.py::test_dynamodb_stream_response_with_cf` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/resources/test_kinesis.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/cloudformation/resources/test_kms.py::test_kms_key_disabled` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/resources/test_kms.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/cloudformation/resources/test_kms.py::test_deploy_stack_with_kms` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/resources/test_kms.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/cloudformation/resources/test_legacy.py::TestCloudFormation::test_validate_template` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/resources/test_legacy.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/cloudformation/resources/test_legacy.py::TestCloudFormation::test_validate_invalid_json_template_should_fail` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/resources/test_legacy.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/cloudformation/resources/test_legacy.py::TestCloudFormation::test_cfn_handle_log_group_resource` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/resources/test_legacy.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/cloudformation/resources/test_legacy.py::TestCloudFormation::test_cfn_handle_iam_role_resource_no_role_name` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/resources/test_legacy.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/cloudformation/resources/test_legacy.py::TestCloudFormation::test_cfn_conditional_deployment` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/resources/test_legacy.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/cloudformation/resources/test_legacy.py::TestCloudFormation::test_cfn_handle_s3_notification_configuration[True-eu-west-1]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/resources/test_legacy.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/cloudformation/resources/test_legacy.py::TestCloudFormation::test_cfn_handle_s3_notification_configuration[False-us-east-1]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/resources/test_legacy.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/cloudformation/resources/test_legacy.py::TestCloudFormation::test_cfn_handle_serverless_api_resource` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/resources/test_legacy.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/cloudformation/resources/test_legacy.py::TestCloudFormation::test_update_lambda_function` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/resources/test_legacy.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/cloudformation/resources/test_legacy.py::TestCloudFormation::test_update_conditions` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/resources/test_legacy.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/cloudformation/resources/test_legacy.py::TestCloudFormation::test_cfn_template_with_short_form_fn_sub` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/resources/test_legacy.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/cloudformation/resources/test_legacy.py::TestCloudFormation::test_sub_in_lambda_function_name` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/resources/test_legacy.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/cloudformation/resources/test_legacy.py::TestCloudFormation::test_functions_in_output_export_name` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/resources/test_legacy.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/cloudformation/resources/test_legacy.py::TestCloudFormation::test_deploy_stack_with_sub_select_and_sub_getaz` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/resources/test_legacy.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/cloudformation/resources/test_legacy.py::TestCloudFormation::test_cfn_update_ec2_instance_type` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/resources/test_legacy.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/cloudformation/resources/test_legacy.py::TestCloudFormation::test_cfn_with_exports` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/resources/test_legacy.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/cloudformation/resources/test_legacy.py::TestCloudFormation::test_cfn_with_route_table` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/resources/test_legacy.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/cloudformation/resources/test_redshift.py::test_redshift_cluster` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/resources/test_redshift.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/cloudformation/resources/test_s3.py::test_bucketpolicy` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/resources/test_s3.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/cloudformation/resources/test_s3.py::test_bucket_versioning` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/resources/test_s3.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/cloudformation/resources/test_sam.py::test_sam_template` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/resources/test_sam.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/cloudformation/resources/test_secretsmanager.py::test_cfn_secretsmanager_gen_secret` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/resources/test_secretsmanager.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/cloudformation/resources/test_secretsmanager.py::test_cfn_handle_secretsmanager_secret` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/resources/test_secretsmanager.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/cloudformation/resources/test_sqs.py::test_sqs_queue_policy` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/resources/test_sqs.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/cloudformation/resources/test_sqs.py::test_sqs_non_fifo_queue_generates_valid_name` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/resources/test_sqs.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/cloudformation/resources/test_sqs.py::test_cfn_handle_sqs_resource` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/resources/test_sqs.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/cloudformation/resources/test_ssm.py::test_parameter_defaults` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/resources/test_ssm.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/cloudformation/resources/test_stepfunctions.py::test_statemachine_definitionsubstitution` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/resources/test_stepfunctions.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/cloudformation/resources/test_stepfunctions.py::test_nested_statemachine_with_sync2` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/resources/test_stepfunctions.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/cloudformation/resources/test_stepfunctions.py::test_apigateway_invoke` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/resources/test_stepfunctions.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/cloudformation/resources/test_stepfunctions.py::test_apigateway_invoke_with_path` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/resources/test_stepfunctions.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/cloudformation/resources/test_stepfunctions.py::test_apigateway_invoke_localhost` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/resources/test_stepfunctions.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/cloudformation/resources/test_stepfunctions.py::test_apigateway_invoke_localhost_with_path` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/resources/test_stepfunctions.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/cloudformation/test_cloudtrail_trace.py::test_cloudtrail_trace_example` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/test_cloudtrail_trace.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/cloudformation/test_template_engine.py::TestIntrinsicFunctions::test_and_or_functions[Fn::And-0-0-False]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/test_template_engine.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/cloudformation/test_template_engine.py::TestIntrinsicFunctions::test_and_or_functions[Fn::And-0-1-False]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/test_template_engine.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/cloudformation/test_template_engine.py::TestIntrinsicFunctions::test_and_or_functions[Fn::And-1-0-False]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/test_template_engine.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/cloudformation/test_template_engine.py::TestIntrinsicFunctions::test_and_or_functions[Fn::And-1-1-True]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/test_template_engine.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/cloudformation/test_template_engine.py::TestIntrinsicFunctions::test_and_or_functions[Fn::Or-0-0-False]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/test_template_engine.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/cloudformation/test_template_engine.py::TestIntrinsicFunctions::test_and_or_functions[Fn::Or-0-1-True]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/test_template_engine.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/cloudformation/test_template_engine.py::TestIntrinsicFunctions::test_and_or_functions[Fn::Or-1-0-True]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/test_template_engine.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/cloudformation/test_template_engine.py::TestIntrinsicFunctions::test_and_or_functions[Fn::Or-1-1-True]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/test_template_engine.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/cloudformation/test_template_engine.py::TestImports::test_stack_imports` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/test_template_engine.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/cloudformation/test_template_engine.py::TestSsmParameters::test_resolve_ssm` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/test_template_engine.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/cloudformation/test_template_engine.py::TestSsmParameters::test_resolve_ssm_with_version` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/test_template_engine.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/cloudformation/test_template_engine.py::TestSsmParameters::test_resolve_ssm_secure` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/test_template_engine.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/cloudformation/test_template_engine.py::TestSecretsManagerParameters::test_resolve_secretsmanager[resolve_secretsmanager_full.yaml]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/test_template_engine.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/cloudformation/test_template_engine.py::TestSecretsManagerParameters::test_resolve_secretsmanager[resolve_secretsmanager_partial.yaml]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/test_template_engine.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/cloudformation/test_template_engine.py::TestSecretsManagerParameters::test_resolve_secretsmanager[resolve_secretsmanager.yaml]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/test_template_engine.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/cloudformation/test_unsupported.py::test_unsupported` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/test_unsupported.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/dynamodb/test_dynamodb.py::TestDynamoDB::test_dynamodb_stream_records_with_update_item` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/dynamodb/test_dynamodb.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/dynamodb/test_dynamodb.py::TestDynamoDB::test_batch_write_not_existing_table` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/dynamodb/test_dynamodb.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/ec2/test_ec2.py::TestEc2Integrations::test_create_route_table_association` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/ec2/test_ec2.py)) `<codeowner>`\r\n- [ ] `tests/aws/services/ec2/test_ec2.py::TestEc2Integrations::test_create_vpc_end_point` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/ec2/test_ec2.py)) `<codeowner>`\r\n- [ ] `tests/aws/services/ec2/test_ec2.py::TestEc2Integrations::test_reserved_instance_api` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/ec2/test_ec2.py)) `<codeowner>`\r\n- [ ] `tests/aws/services/ec2/test_ec2.py::TestEc2Integrations::test_vcp_peering_difference_regions` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/ec2/test_ec2.py)) `<codeowner>`\r\n- [ ] `tests/aws/services/ec2/test_ec2.py::TestEc2Integrations::test_describe_vpn_gateways_filter_by_vpc` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/ec2/test_ec2.py)) `<codeowner>`\r\n- [ ] `tests/aws/services/ec2/test_ec2.py::TestEc2Integrations::test_describe_vpc_endpoints_with_filter` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/ec2/test_ec2.py)) `<codeowner>`\r\n- [ ] `tests/aws/services/ec2/test_ec2.py::test_pickle_ec2_backend` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/ec2/test_ec2.py)) `<codeowner>`\r\n- [ ] `tests/aws/services/es/test_es.py::TestElasticsearchProvider::test_list_versions` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/es/test_es.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/es/test_es.py::TestElasticsearchProvider::test_get_compatible_versions` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/es/test_es.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/es/test_es.py::TestElasticsearchProvider::test_get_compatible_version_for_domain` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/es/test_es.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/es/test_es.py::TestElasticsearchProvider::test_create_domain` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/es/test_es.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/es/test_es.py::TestElasticsearchProvider::test_create_existing_domain_causes_exception` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/es/test_es.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/es/test_es.py::TestElasticsearchProvider::test_describe_domains` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/es/test_es.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/es/test_es.py::TestElasticsearchProvider::test_domain_version` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/es/test_es.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/es/test_es.py::TestElasticsearchProvider::test_path_endpoint_strategy` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/es/test_es.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/es/test_es.py::TestElasticsearchProvider::test_update_domain_config` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/es/test_es.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/events/test_events.py::TestEvents::test_put_rule` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/events/test_events.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/events/test_events.py::TestEvents::test_events_written_to_disk_are_timestamp_prefixed_for_chronological_ordering` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/events/test_events.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/events/test_events.py::TestEvents::test_list_tags_for_resource` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/events/test_events.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/events/test_events.py::TestEvents::test_put_events_with_values_in_array` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/events/test_events.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/events/test_events.py::TestEvents::test_put_events_with_target_sqs_event_detail_match` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/events/test_events.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/events/test_events.py::TestEvents::test_put_events_with_target_sns` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/events/test_events.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/events/test_events.py::TestEvents::test_put_events_into_event_bus` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/events/test_events.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/events/test_events.py::TestEvents::test_put_events_with_target_lambda` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/events/test_events.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/events/test_events.py::TestEvents::test_rule_disable` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/events/test_events.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/events/test_events.py::TestEvents::test_scheduled_expression_events` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/events/test_events.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/events/test_events.py::TestEvents::test_api_destinations[auth0]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/events/test_events.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/events/test_events.py::TestEvents::test_api_destinations[auth1]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/events/test_events.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/events/test_events.py::TestEvents::test_api_destinations[auth2]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/events/test_events.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/events/test_events.py::TestEvents::test_create_connection_validations` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/events/test_events.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/events/test_events.py::TestEvents::test_put_events_with_target_firehose` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/events/test_events.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/events/test_events.py::TestEvents::test_put_events_with_target_sqs_new_region` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/events/test_events.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/events/test_events.py::TestEvents::test_put_events_with_target_kinesis` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/events/test_events.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/events/test_events.py::TestEvents::test_put_events_with_input_path` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/events/test_events.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/events/test_events.py::TestEvents::test_put_events_with_input_path_multiple` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/events/test_events.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/events/test_events.py::TestEvents::test_put_event_without_source` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/events/test_events.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/events/test_events.py::TestEvents::test_put_event_without_detail` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/events/test_events.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/events/test_events.py::TestEvents::test_trigger_event_on_ssm_change` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/events/test_events.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/events/test_events.py::TestEvents::test_put_event_with_content_base_rule_in_pattern` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/events/test_events.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/firehose/test_firehose.py::test_firehose_http[True]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/firehose/test_firehose.py)) \r\n- [ ] `tests/aws/services/firehose/test_firehose.py::test_firehose_http[False]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/firehose/test_firehose.py)) \r\n- [ ] `tests/aws/services/firehose/test_firehose.py::TestFirehoseIntegration::test_kinesis_firehose_elasticsearch_s3_backup` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/firehose/test_firehose.py)) \r\n- [ ] `tests/aws/services/firehose/test_firehose.py::TestFirehoseIntegration::test_kinesis_firehose_opensearch_s3_backup[domain]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/firehose/test_firehose.py)) \r\n- [ ] `tests/aws/services/firehose/test_firehose.py::TestFirehoseIntegration::test_kinesis_firehose_opensearch_s3_backup[path]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/firehose/test_firehose.py)) \r\n- [ ] `tests/aws/services/firehose/test_firehose.py::TestFirehoseIntegration::test_kinesis_firehose_opensearch_s3_backup[port]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/firehose/test_firehose.py)) \r\n- [ ] `tests/aws/services/firehose/test_firehose.py::TestFirehoseIntegration::test_delivery_stream_with_kinesis_as_source` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/firehose/test_firehose.py)) \r\n- [ ] `tests/aws/services/iam/test_iam.py::TestIAMExtensions::test_get_user_without_username_as_user` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/iam/test_iam.py)) `<codeowner>`\r\n- [ ] `tests/aws/services/iam/test_iam.py::TestIAMExtensions::test_get_user_without_username_as_role` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/iam/test_iam.py)) `<codeowner>`\r\n- [ ] `tests/aws/services/iam/test_iam.py::TestIAMExtensions::test_create_user_with_permission_boundary` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/iam/test_iam.py)) `<codeowner>`\r\n- [ ] `tests/aws/services/iam/test_iam.py::TestIAMExtensions::test_create_user_add_permission_boundary_afterwards` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/iam/test_iam.py)) `<codeowner>`\r\n- [ ] `tests/aws/services/iam/test_iam.py::TestIAMIntegrations::test_attach_iam_role_to_new_iam_user` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/iam/test_iam.py)) `<codeowner>`\r\n- [ ] `tests/aws/services/iam/test_iam.py::TestIAMIntegrations::test_delete_non_existent_policy_returns_no_such_entity` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/iam/test_iam.py)) `<codeowner>`\r\n- [ ] `tests/aws/services/iam/test_iam.py::TestIAMIntegrations::test_recreate_iam_role` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/iam/test_iam.py)) `<codeowner>`\r\n- [ ] `tests/aws/services/iam/test_iam.py::TestIAMIntegrations::test_instance_profile_tags` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/iam/test_iam.py)) `<codeowner>`\r\n- [ ] `tests/aws/services/iam/test_iam.py::TestIAMIntegrations::test_create_user_with_tags` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/iam/test_iam.py)) `<codeowner>`\r\n- [ ] `tests/aws/services/iam/test_iam.py::TestIAMIntegrations::test_attach_detach_role_policy` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/iam/test_iam.py)) `<codeowner>`\r\n- [ ] `tests/aws/services/iam/test_iam.py::TestIAMIntegrations::test_simulate_principle_policy` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/iam/test_iam.py)) `<codeowner>`\r\n- [ ] `tests/aws/services/iam/test_iam.py::TestIAMIntegrations::test_create_role_with_assume_role_policy` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/iam/test_iam.py)) `<codeowner>`\r\n- [ ] `tests/aws/services/kinesis/test_kinesis.py::TestKinesis::test_create_stream_without_stream_name_raises` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/kinesis/test_kinesis.py)) \r\n- [ ] `tests/aws/services/kinesis/test_kinesis.py::TestKinesis::test_get_records` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/kinesis/test_kinesis.py)) \r\n- [ ] `tests/aws/services/kinesis/test_kinesis.py::TestKinesis::test_get_records_empty_stream` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/kinesis/test_kinesis.py)) \r\n- [ ] `tests/aws/services/kinesis/test_kinesis.py::TestKinesisPythonClient::test_run_kcl` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/kinesis/test_kinesis.py)) \r\n- [ ] `tests/aws/services/kms/test_kms.py::TestKMS::test_invalid_key_usage` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/kms/test_kms.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/kms/test_kms.py::TestKMS::test_encrypt_decrypt[SYMMETRIC_DEFAULT-SYMMETRIC_DEFAULT]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/kms/test_kms.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/kms/test_kms.py::TestKMS::test_encrypt_decrypt[RSA_2048-RSAES_OAEP_SHA_256]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/kms/test_kms.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/kms/test_kms.py::TestKMS::test_get_put_list_key_policies` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/kms/test_kms.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/kms/test_kms.py::TestKMSMultiAccounts::test_cross_accounts_access` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/kms/test_kms.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/lambda_/test_lambda.py::TestLambdaMultiAccounts::test_cross_account_access` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/lambda_/test_lambda.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/lambda_/test_lambda_common.py::TestLambdaCallingLocalstack::test_calling_localstack_from_lambda[nodejs14.x]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/lambda_/test_lambda_common.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/lambda_/test_lambda_common.py::TestLambdaCallingLocalstack::test_calling_localstack_from_lambda[nodejs16.x]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/lambda_/test_lambda_common.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/lambda_/test_lambda_common.py::TestLambdaCallingLocalstack::test_calling_localstack_from_lambda[nodejs18.x]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/lambda_/test_lambda_common.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/lambda_/test_lambda_common.py::TestLambdaCallingLocalstack::test_calling_localstack_from_lambda[python3.7]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/lambda_/test_lambda_common.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/lambda_/test_lambda_common.py::TestLambdaCallingLocalstack::test_calling_localstack_from_lambda[python3.8]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/lambda_/test_lambda_common.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/lambda_/test_lambda_common.py::TestLambdaCallingLocalstack::test_calling_localstack_from_lambda[python3.9]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/lambda_/test_lambda_common.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/lambda_/test_lambda_common.py::TestLambdaCallingLocalstack::test_calling_localstack_from_lambda[python3.10]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/lambda_/test_lambda_common.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/lambda_/test_lambda_common.py::TestLambdaCallingLocalstack::test_calling_localstack_from_lambda[python3.11]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/lambda_/test_lambda_common.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/lambda_/test_lambda_common.py::TestLambdaCallingLocalstack::test_calling_localstack_from_lambda[ruby2.7]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/lambda_/test_lambda_common.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/lambda_/test_lambda_common.py::TestLambdaCallingLocalstack::test_calling_localstack_from_lambda[ruby3.2]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/lambda_/test_lambda_common.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/lambda_/test_lambda_common.py::TestLambdaCallingLocalstack::test_calling_localstack_from_lambda[java8.al2]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/lambda_/test_lambda_common.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/lambda_/test_lambda_common.py::TestLambdaCallingLocalstack::test_calling_localstack_from_lambda[java11]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/lambda_/test_lambda_common.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/lambda_/test_lambda_common.py::TestLambdaCallingLocalstack::test_calling_localstack_from_lambda[go1.x]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/lambda_/test_lambda_common.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/lambda_/test_lambda_common.py::TestLambdaCallingLocalstack::test_calling_localstack_from_lambda[dotnet6]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/lambda_/test_lambda_common.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/lambda_/test_lambda_developer_tools.py::TestHotReloading::test_hot_reloading[nodejs18.x]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/lambda_/test_lambda_developer_tools.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/lambda_/test_lambda_developer_tools.py::TestHotReloading::test_hot_reloading[python3.9]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/lambda_/test_lambda_developer_tools.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/lambda_/test_lambda_developer_tools.py::TestHotReloading::test_hot_reloading_publish_version` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/lambda_/test_lambda_developer_tools.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/lambda_/test_lambda_developer_tools.py::TestDockerFlags::test_additional_docker_flags` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/lambda_/test_lambda_developer_tools.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/lambda_/test_lambda_developer_tools.py::TestDockerFlags::test_lambda_docker_networks` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/lambda_/test_lambda_developer_tools.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/lambda_/test_lambda_legacy.py::test_logging_in_local_executor[logging]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/lambda_/test_lambda_legacy.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/lambda_/test_lambda_legacy.py::test_logging_in_local_executor[print]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/lambda_/test_lambda_legacy.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/lambda_/test_lambda_legacy.py::TestLambdaLegacyProvider::test_add_lambda_multiple_permission` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/lambda_/test_lambda_legacy.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/lambda_/test_lambda_legacy.py::TestLambdaLegacyProvider::test_add_lambda_permission` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/lambda_/test_lambda_legacy.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/lambda_/test_lambda_legacy.py::TestLambdaLegacyProvider::test_create_lambda_function` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/lambda_/test_lambda_legacy.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/lambda_/test_lambda_legacy.py::TestLambdaLegacyProvider::test_update_lambda_with_layers` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/lambda_/test_lambda_legacy.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/lambda_/test_lambda_whitebox.py::TestLambdaFallbackUrl::test_forward_to_fallback_url_dynamodb` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/lambda_/test_lambda_whitebox.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/lambda_/test_lambda_whitebox.py::TestLambdaFallbackUrl::test_forward_to_fallback_url_http` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/lambda_/test_lambda_whitebox.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/lambda_/test_lambda_whitebox.py::TestLambdaFallbackUrl::test_adding_fallback_function_name_in_headers` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/lambda_/test_lambda_whitebox.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/lambda_/test_lambda_whitebox.py::TestDockerExecutors::test_additional_docker_flags` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/lambda_/test_lambda_whitebox.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/lambda_/test_lambda_whitebox.py::TestDockerExecutors::test_code_updated_on_redeployment` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/lambda_/test_lambda_whitebox.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/lambda_/test_lambda_whitebox.py::TestDockerExecutors::test_prime_and_destroy_containers` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/lambda_/test_lambda_whitebox.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/lambda_/test_lambda_whitebox.py::TestDockerExecutors::test_destroy_idle_containers` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/lambda_/test_lambda_whitebox.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/lambda_/test_lambda_whitebox.py::TestDockerExecutors::test_logresult_more_than_4k_characters` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/lambda_/test_lambda_whitebox.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/lambda_/test_lambda_whitebox.py::TestLocalExecutors::test_python3_runtime_multiple_create_with_conflicting_module` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/lambda_/test_lambda_whitebox.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/lambda_/test_lambda_whitebox.py::TestFunctionStates::test_invoke_failure_when_state_pending` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/lambda_/test_lambda_whitebox.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/logs/test_logs.py::TestCloudWatchLogs::test_create_and_delete_log_group` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/logs/test_logs.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/logs/test_logs.py::TestCloudWatchLogs::test_put_events_multi_bytes_msg` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/logs/test_logs.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/logs/test_logs.py::TestCloudWatchLogs::test_filter_log_events_response_header` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/logs/test_logs.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/logs/test_logs.py::TestCloudWatchLogs::test_metric_filters` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/logs/test_logs.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/logs/test_logs.py::TestCloudWatchLogs::test_delivery_logs_for_sns` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/logs/test_logs.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/opensearch/test_opensearch.py::TestOpensearchProvider::test_list_versions` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/opensearch/test_opensearch.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/opensearch/test_opensearch.py::TestOpensearchProvider::test_get_compatible_versions` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/opensearch/test_opensearch.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/opensearch/test_opensearch.py::TestOpensearchProvider::test_get_compatible_version_for_domain` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/opensearch/test_opensearch.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/opensearch/test_opensearch.py::TestOpensearchProvider::test_create_domain` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/opensearch/test_opensearch.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/opensearch/test_opensearch.py::TestOpensearchProvider::test_create_existing_domain_causes_exception` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/opensearch/test_opensearch.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/opensearch/test_opensearch.py::TestOpensearchProvider::test_describe_domains` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/opensearch/test_opensearch.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/opensearch/test_opensearch.py::TestOpensearchProvider::test_gzip_responses` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/opensearch/test_opensearch.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/opensearch/test_opensearch.py::TestOpensearchProvider::test_domain_version` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/opensearch/test_opensearch.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/opensearch/test_opensearch.py::TestOpensearchProvider::test_update_domain_config` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/opensearch/test_opensearch.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/opensearch/test_opensearch.py::TestOpensearchProvider::test_create_indices` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/opensearch/test_opensearch.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/opensearch/test_opensearch.py::TestOpensearchProvider::test_get_document` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/opensearch/test_opensearch.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/opensearch/test_opensearch.py::TestOpensearchProvider::test_search` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/opensearch/test_opensearch.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/opensearch/test_opensearch.py::TestOpensearchProvider::test_endpoint_strategy_path` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/opensearch/test_opensearch.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/opensearch/test_opensearch.py::TestOpensearchProvider::test_endpoint_strategy_port` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/opensearch/test_opensearch.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/opensearch/test_opensearch.py::TestOpensearchProvider::test_cloudformation_deployment` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/opensearch/test_opensearch.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/opensearch/test_opensearch.py::TestEdgeProxiedOpensearchCluster::test_route_through_edge` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/opensearch/test_opensearch.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/opensearch/test_opensearch.py::TestEdgeProxiedOpensearchCluster::test_custom_endpoint` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/opensearch/test_opensearch.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/opensearch/test_opensearch.py::TestEdgeProxiedOpensearchCluster::test_custom_endpoint_disabled` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/opensearch/test_opensearch.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/opensearch/test_opensearch.py::TestMultiClusterManager::test_multi_cluster` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/opensearch/test_opensearch.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/opensearch/test_opensearch.py::TestMultiplexingClusterManager::test_multiplexing_cluster` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/opensearch/test_opensearch.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/opensearch/test_opensearch.py::TestSingletonClusterManager::test_endpoint_strategy_port_singleton_cluster` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/opensearch/test_opensearch.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/opensearch/test_opensearch.py::TestCustomBackendManager::test_custom_backend` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/opensearch/test_opensearch.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/opensearch/test_opensearch.py::TestCustomBackendManager::test_custom_backend_with_custom_endpoint` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/opensearch/test_opensearch.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/redshift/test_redshift.py::TestRedshift::test_create_clusters` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/redshift/test_redshift.py)) \r\n- [ ] `tests/aws/services/resource_groups/test_resource_groups.py::TestResourceGroups::test_create_group` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/resource_groups/test_resource_groups.py)) \r\n- [ ] `tests/aws/services/resourcegroupstaggingapi/test_rgsa.py::TestRGSAIntegrations::test_get_resources` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/resourcegroupstaggingapi/test_rgsa.py)) \r\n- [ ] `tests/aws/services/route53/test_route53.py::TestRoute53::test_create_hosted_zone` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/route53/test_route53.py)) `<codeowner>`\r\n- [ ] `tests/aws/services/route53/test_route53.py::TestRoute53::test_crud_health_check` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/route53/test_route53.py)) `<codeowner>`\r\n- [ ] `tests/aws/services/route53/test_route53.py::TestRoute53::test_associate_vpc_with_hosted_zone` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/route53/test_route53.py)) `<codeowner>`\r\n- [ ] `tests/aws/services/route53/test_route53.py::TestRoute53::test_reusable_delegation_sets` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/route53/test_route53.py)) `<codeowner>`\r\n- [ ] `tests/aws/services/s3/test_s3.py::TestS3MultiAccounts::test_shared_bucket_namespace` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/s3/test_s3.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/s3/test_s3.py::TestS3MultiAccounts::test_cross_account_access` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/s3/test_s3.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/s3/test_s3.py::TestS3PresignedUrl::test_s3_presign_url_encoding[s3]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/s3/test_s3.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/s3/test_s3.py::TestS3PresignedUrl::test_s3_presign_url_encoding[s3v4]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/s3/test_s3.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/s3control/test_s3control.py::test_lifecycle_public_access_block` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/s3control/test_s3control.py)) \r\n- [ ] `tests/aws/services/s3control/test_s3control.py::test_public_access_block_validations` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/s3control/test_s3control.py)) \r\n- [ ] `tests/aws/services/scheduler/test_scheduler.py::test_list_schedules` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/scheduler/test_scheduler.py)) \r\n- [ ] `tests/aws/services/secretsmanager/test_secretsmanager.py::TestSecretsManager::test_create_and_update_secret[s-c64bdc03]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/secretsmanager/test_secretsmanager.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/secretsmanager/test_secretsmanager.py::TestSecretsManager::test_create_and_update_secret[Valid/_+=.`<codeowner>` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/secretsmanager/test_secretsmanager.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/secretsmanager/test_secretsmanager.py::TestSecretsManager::test_create_and_update_secret[Valid/_+=.`<codeowner>` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/secretsmanager/test_secretsmanager.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/secretsmanager/test_secretsmanager.py::TestSecretsManager::test_create_and_update_secret[Valid/_+=.`<codeowner>` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/secretsmanager/test_secretsmanager.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/secretsmanager/test_secretsmanager.py::TestSecretsManager::test_secret_not_found` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/secretsmanager/test_secretsmanager.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/secretsmanager/test_secretsmanager.py::TestSecretsManager::test_call_lists_secrets_multiple_times` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/secretsmanager/test_secretsmanager.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/secretsmanager/test_secretsmanager.py::TestSecretsManager::test_call_lists_secrets_multiple_times_snapshots` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/secretsmanager/test_secretsmanager.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/secretsmanager/test_secretsmanager.py::TestSecretsManager::test_create_multi_secrets` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/secretsmanager/test_secretsmanager.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/secretsmanager/test_secretsmanager.py::TestSecretsManager::test_create_multi_secrets_snapshot` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/secretsmanager/test_secretsmanager.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/secretsmanager/test_secretsmanager.py::TestSecretsManager::test_get_random_exclude_characters_and_symbols` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/secretsmanager/test_secretsmanager.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/secretsmanager/test_secretsmanager.py::TestSecretsManager::test_resource_policy` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/secretsmanager/test_secretsmanager.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/secretsmanager/test_secretsmanager.py::TestSecretsManager::test_rotate_secret_with_lambda_1` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/secretsmanager/test_secretsmanager.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/secretsmanager/test_secretsmanager.py::TestSecretsManager::test_rotate_secret_with_lambda_2` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/secretsmanager/test_secretsmanager.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/secretsmanager/test_secretsmanager.py::TestSecretsManager::test_rotate_secret_invalid_lambda_arn` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/secretsmanager/test_secretsmanager.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/secretsmanager/test_secretsmanager.py::TestSecretsManager::test_put_secret_value_with_version_stages` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/secretsmanager/test_secretsmanager.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/secretsmanager/test_secretsmanager.py::TestSecretsManager::test_last_accessed_date` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/secretsmanager/test_secretsmanager.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/secretsmanager/test_secretsmanager.py::TestSecretsManager::test_last_updated_date` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/secretsmanager/test_secretsmanager.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/secretsmanager/test_secretsmanager.py::TestSecretsManager::test_update_secret_description` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/secretsmanager/test_secretsmanager.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/secretsmanager/test_secretsmanager.py::TestSecretsManager::test_update_secret_version_stages_return_type` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/secretsmanager/test_secretsmanager.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/secretsmanager/test_secretsmanager.py::TestSecretsManager::test_update_secret_version_stages_current_previous` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/secretsmanager/test_secretsmanager.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/secretsmanager/test_secretsmanager.py::TestSecretsManager::test_update_secret_version_stages_current_pending` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/secretsmanager/test_secretsmanager.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/secretsmanager/test_secretsmanager.py::TestSecretsManager::test_update_secret_version_stages_current_pending_cycle` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/secretsmanager/test_secretsmanager.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/secretsmanager/test_secretsmanager.py::TestSecretsManager::test_update_secret_version_stages_current_pending_cycle_custom_stages_1` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/secretsmanager/test_secretsmanager.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/secretsmanager/test_secretsmanager.py::TestSecretsManager::test_update_secret_version_stages_current_pending_cycle_custom_stages_2` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/secretsmanager/test_secretsmanager.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/secretsmanager/test_secretsmanager.py::TestSecretsManager::test_non_versioning_version_stages_replacement` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/secretsmanager/test_secretsmanager.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/secretsmanager/test_secretsmanager.py::TestSecretsManager::test_non_versioning_version_stages_no_replacement` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/secretsmanager/test_secretsmanager.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/secretsmanager/test_secretsmanager.py::TestSecretsManager::test_update_secret_with_non_provided_client_request_token` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/secretsmanager/test_secretsmanager.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/secretsmanager/test_secretsmanager.py::TestSecretsManager::test_put_secret_value_with_new_custom_client_request_token` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/secretsmanager/test_secretsmanager.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/secretsmanager/test_secretsmanager.py::TestSecretsManager::test_http_put_secret_value_with_duplicate_client_request_token` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/secretsmanager/test_secretsmanager.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/secretsmanager/test_secretsmanager.py::TestSecretsManager::test_http_put_secret_value_with_non_provided_client_request_token` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/secretsmanager/test_secretsmanager.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/secretsmanager/test_secretsmanager.py::TestSecretsManager::test_http_put_secret_value_duplicate_req` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/secretsmanager/test_secretsmanager.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/secretsmanager/test_secretsmanager.py::TestSecretsManager::test_http_put_secret_value_null_client_request_token_new_version_stages` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/secretsmanager/test_secretsmanager.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/secretsmanager/test_secretsmanager.py::TestSecretsManager::test_http_put_secret_value_custom_client_request_token_new_version_stages` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/secretsmanager/test_secretsmanager.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/secretsmanager/test_secretsmanager.py::TestSecretsManager::test_delete_non_existent_secret_returns_as_if_secret_exists` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/secretsmanager/test_secretsmanager.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/secretsmanager/test_secretsmanager.py::TestSecretsManager::test_exp_raised_on_creation_of_secret_scheduled_for_deletion` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/secretsmanager/test_secretsmanager.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/secretsmanager/test_secretsmanager.py::TestSecretsManager::test_can_recreate_delete_secret` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/secretsmanager/test_secretsmanager.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/sqs/test_sqs.py::TestSqsProvider::test_delete_message_batch_from_lambda` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/sqs/test_sqs.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/sqs/test_sqs.py::TestSqsProvider::test_redrive_policy_attribute_validity` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/sqs/test_sqs.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/sqs/test_sqs.py::TestSqsProvider::test_send_message_with_invalid_fifo_parameters` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/sqs/test_sqs.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/sqs/test_sqs.py::TestSqsProvider::test_dead_letter_queue_chain` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/sqs/test_sqs.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/sqs/test_sqs.py::TestSqsProvider::test_inflight_message_requeue` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/sqs/test_sqs.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/sqs/test_sqs.py::TestSqsProvider::test_dead_letter_queue_execution_lambda_mapping_preserves_id` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/sqs/test_sqs.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/sqs/test_sqs.py::TestSqsProvider::test_message_with_carriage_return` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/sqs/test_sqs.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/sqs/test_sqs.py::TestSqsProvider::test_deduplication_interval` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/sqs/test_sqs.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/sqs/test_sqs.py::TestSqsQueryApi::test_queue_url_format_path_strategy` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/sqs/test_sqs.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/sqs/test_sqs.py::TestSQSMultiAccounts::test_cross_account_access[domain]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/sqs/test_sqs.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/sqs/test_sqs.py::TestSQSMultiAccounts::test_cross_account_access[path]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/sqs/test_sqs.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/sqs/test_sqs.py::TestSQSMultiAccounts::test_cross_account_get_queue_url[domain]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/sqs/test_sqs.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/sqs/test_sqs.py::TestSQSMultiAccounts::test_cross_account_get_queue_url[path]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/sqs/test_sqs.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/legacy/test_stepfunctions_legacy.py::TestStateMachine::test_create_choice_state_machine` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/legacy/test_stepfunctions_legacy.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/legacy/test_stepfunctions_legacy.py::TestStateMachine::test_create_run_map_state_machine` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/legacy/test_stepfunctions_legacy.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/legacy/test_stepfunctions_legacy.py::TestStateMachine::test_create_run_state_machine` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/legacy/test_stepfunctions_legacy.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/legacy/test_stepfunctions_legacy.py::TestStateMachine::test_try_catch_state_machine` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/legacy/test_stepfunctions_legacy.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/legacy/test_stepfunctions_legacy.py::TestStateMachine::test_intrinsic_functions` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/legacy/test_stepfunctions_legacy.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/legacy/test_stepfunctions_legacy.py::TestStateMachine::test_events_state_machine` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/legacy/test_stepfunctions_legacy.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/legacy/test_stepfunctions_legacy.py::TestStateMachine::test_create_state_machines_in_parallel` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/legacy/test_stepfunctions_legacy.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/legacy/test_stepfunctions_legacy.py::test_multiregion_nested[statemachine_definition0-us-east-1]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/legacy/test_stepfunctions_legacy.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/legacy/test_stepfunctions_legacy.py::test_multiregion_nested[statemachine_definition0-us-east-2]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/legacy/test_stepfunctions_legacy.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/legacy/test_stepfunctions_legacy.py::test_multiregion_nested[statemachine_definition0-eu-west-1]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/legacy/test_stepfunctions_legacy.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/legacy/test_stepfunctions_legacy.py::test_multiregion_nested[statemachine_definition0-eu-central-1]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/legacy/test_stepfunctions_legacy.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/legacy/test_stepfunctions_legacy.py::test_aws_sdk_task` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/legacy/test_stepfunctions_legacy.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/legacy/test_stepfunctions_legacy.py::test_aws_sdk_task_delete_s3_object` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/legacy/test_stepfunctions_legacy.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/base/test_base.py::TestSnfBase::test_event_bridge_events_failure` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/base/test_base.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/callback/test_callback.py::TestCallback::test_sqs_wait_for_task_token` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/callback/test_callback.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/callback/test_callback.py::TestCallback::test_sqs_wait_for_task_token_timeout` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/callback/test_callback.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/callback/test_callback.py::TestCallback::test_sqs_failure_in_wait_for_task_token` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/callback/test_callback.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/callback/test_callback.py::TestCallback::test_sqs_wait_for_task_tok_with_heartbeat` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/callback/test_callback.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/callback/test_callback.py::TestCallback::test_start_execution_sync` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/callback/test_callback.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/callback/test_callback.py::TestCallback::test_start_execution_sync2` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/callback/test_callback.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/callback/test_callback.py::TestCallback::test_start_execution_sync_delegate_failure` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/callback/test_callback.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/callback/test_callback.py::TestCallback::test_start_execution_sync_delegate_timeout` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/callback/test_callback.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/choice_operators/test_boolean_equals.py::TestBooleanEquals::test_boolean_equals` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/choice_operators/test_boolean_equals.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/choice_operators/test_boolean_equals.py::TestBooleanEquals::test_boolean_equals_path` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/choice_operators/test_boolean_equals.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/choice_operators/test_is_operators.py::TestIsOperators::test_is_boolean` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/choice_operators/test_is_operators.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/choice_operators/test_is_operators.py::TestIsOperators::test_is_null` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/choice_operators/test_is_operators.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/choice_operators/test_is_operators.py::TestIsOperators::test_is_numeric` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/choice_operators/test_is_operators.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/choice_operators/test_is_operators.py::TestIsOperators::test_is_present` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/choice_operators/test_is_operators.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/choice_operators/test_is_operators.py::TestIsOperators::test_is_string` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/choice_operators/test_is_operators.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/choice_operators/test_is_operators.py::TestIsOperators::test_is_timestamp` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/choice_operators/test_is_operators.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/choice_operators/test_numeric.py::TestNumerics::test_numeric_equals` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/choice_operators/test_numeric.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/choice_operators/test_numeric.py::TestNumerics::test_numeric_equals_path` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/choice_operators/test_numeric.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/choice_operators/test_numeric.py::TestNumerics::test_numeric_greater_than` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/choice_operators/test_numeric.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/choice_operators/test_numeric.py::TestNumerics::test_numeric_greater_than_path` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/choice_operators/test_numeric.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/choice_operators/test_numeric.py::TestNumerics::test_numeric_greater_than_equals` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/choice_operators/test_numeric.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/choice_operators/test_numeric.py::TestNumerics::test_numeric_greater_than_equals_path` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/choice_operators/test_numeric.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/choice_operators/test_numeric.py::TestNumerics::test_numeric_less_than` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/choice_operators/test_numeric.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/choice_operators/test_numeric.py::TestNumerics::test_numeric_less_than_path` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/choice_operators/test_numeric.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/choice_operators/test_numeric.py::TestNumerics::test_numeric_less_than_equals` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/choice_operators/test_numeric.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/choice_operators/test_numeric.py::TestNumerics::test_numeric_less_than_equals_path` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/choice_operators/test_numeric.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/choice_operators/test_string_operators.py::TestStrings::test_string_equals` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/choice_operators/test_string_operators.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/choice_operators/test_string_operators.py::TestStrings::test_string_equals_path` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/choice_operators/test_string_operators.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/choice_operators/test_string_operators.py::TestStrings::test_string_greater_than` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/choice_operators/test_string_operators.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/choice_operators/test_string_operators.py::TestStrings::test_string_greater_than_path` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/choice_operators/test_string_operators.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/choice_operators/test_string_operators.py::TestStrings::test_string_greater_than_equals` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/choice_operators/test_string_operators.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/choice_operators/test_string_operators.py::TestStrings::test_string_greater_than_equals_path` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/choice_operators/test_string_operators.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/choice_operators/test_string_operators.py::TestStrings::test_string_less_than` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/choice_operators/test_string_operators.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/choice_operators/test_string_operators.py::TestStrings::test_string_less_than_path` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/choice_operators/test_string_operators.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/choice_operators/test_string_operators.py::TestStrings::test_string_less_than_equals` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/choice_operators/test_string_operators.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/choice_operators/test_string_operators.py::TestStrings::test_string_less_than_equals_path` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/choice_operators/test_string_operators.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/choice_operators/test_timestamp_operators.py::TestTimestamps::test_timestamp_equals` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/choice_operators/test_timestamp_operators.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/choice_operators/test_timestamp_operators.py::TestTimestamps::test_timestamp_equals_path` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/choice_operators/test_timestamp_operators.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/choice_operators/test_timestamp_operators.py::TestTimestamps::test_timestamp_greater_than` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/choice_operators/test_timestamp_operators.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/choice_operators/test_timestamp_operators.py::TestTimestamps::test_timestamp_greater_than_path` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/choice_operators/test_timestamp_operators.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/choice_operators/test_timestamp_operators.py::TestTimestamps::test_timestamp_greater_than_equals` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/choice_operators/test_timestamp_operators.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/choice_operators/test_timestamp_operators.py::TestTimestamps::test_timestamp_greater_than_equals_path` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/choice_operators/test_timestamp_operators.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/choice_operators/test_timestamp_operators.py::TestTimestamps::test_timestamp_less_than` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/choice_operators/test_timestamp_operators.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/choice_operators/test_timestamp_operators.py::TestTimestamps::test_timestamp_less_than_path` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/choice_operators/test_timestamp_operators.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/choice_operators/test_timestamp_operators.py::TestTimestamps::test_timestamp_less_than_equals` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/choice_operators/test_timestamp_operators.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/choice_operators/test_timestamp_operators.py::TestTimestamps::test_timestamp_less_than_equals_path` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/choice_operators/test_timestamp_operators.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/error_handling/test_aws_sdk.py::TestAwsSdk::test_invalid_secret_name` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/error_handling/test_aws_sdk.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/error_handling/test_aws_sdk.py::TestAwsSdk::test_no_such_bucket` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/error_handling/test_aws_sdk.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/error_handling/test_aws_sdk.py::TestAwsSdk::test_dynamodb_invalid_param` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/error_handling/test_aws_sdk.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/error_handling/test_aws_sdk.py::TestAwsSdk::test_dynamodb_put_item_no_such_table` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/error_handling/test_aws_sdk.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/error_handling/test_task_lambda.py::TestTaskLambda::test_raise_exception` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/error_handling/test_task_lambda.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/error_handling/test_task_lambda.py::TestTaskLambda::test_raise_exception_catch` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/error_handling/test_task_lambda.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/error_handling/test_task_lambda.py::TestTaskLambda::test_no_such_function` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/error_handling/test_task_lambda.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/error_handling/test_task_lambda.py::TestTaskLambda::test_no_such_function_catch` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/error_handling/test_task_lambda.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/error_handling/test_task_service_lambda.py::TestTaskServiceLambda::test_raise_exception` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/error_handling/test_task_service_lambda.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/error_handling/test_task_service_lambda.py::TestTaskServiceLambda::test_raise_exception_catch` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/error_handling/test_task_service_lambda.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/error_handling/test_task_service_lambda.py::TestTaskServiceLambda::test_no_such_function` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/error_handling/test_task_service_lambda.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/error_handling/test_task_service_lambda.py::TestTaskServiceLambda::test_no_such_function_catch` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/error_handling/test_task_service_lambda.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/error_handling/test_task_service_lambda.py::TestTaskServiceLambda::test_invoke_timeout` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/error_handling/test_task_service_lambda.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/error_handling/test_task_service_sfn.py::TestTaskServiceSfn::test_start_execution_no_such_arn` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/error_handling/test_task_service_sfn.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/error_handling/test_task_service_sqs.py::TestTaskServiceSqs::test_send_message_no_such_queue` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/error_handling/test_task_service_sqs.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/error_handling/test_task_service_sqs.py::TestTaskServiceSqs::test_send_message_no_such_queue_no_catch` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/error_handling/test_task_service_sqs.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/error_handling/test_task_service_sqs.py::TestTaskServiceSqs::test_send_message_empty_body` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/error_handling/test_task_service_sqs.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/intrinsic_functions/test_array.py::TestArray::test_array_0` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/intrinsic_functions/test_array.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/intrinsic_functions/test_array.py::TestArray::test_array_2` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/intrinsic_functions/test_array.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/intrinsic_functions/test_array.py::TestArray::test_array_partition` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/intrinsic_functions/test_array.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/intrinsic_functions/test_array.py::TestArray::test_array_contains` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/intrinsic_functions/test_array.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/intrinsic_functions/test_array.py::TestArray::test_array_range` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/intrinsic_functions/test_array.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/intrinsic_functions/test_array.py::TestArray::test_array_get_item` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/intrinsic_functions/test_array.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/intrinsic_functions/test_array.py::TestArray::test_array_length` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/intrinsic_functions/test_array.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/intrinsic_functions/test_array.py::TestArray::test_array_unique` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/intrinsic_functions/test_array.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/intrinsic_functions/test_encode_decode.py::TestEncodeDecode::test_base_64_encode` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/intrinsic_functions/test_encode_decode.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/intrinsic_functions/test_encode_decode.py::TestEncodeDecode::test_base_64_decode` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/intrinsic_functions/test_encode_decode.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/intrinsic_functions/test_generic.py::TestGeneric::test_format_1` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/intrinsic_functions/test_generic.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/intrinsic_functions/test_generic.py::TestGeneric::test_format_2` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/intrinsic_functions/test_generic.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/intrinsic_functions/test_hash_calculations.py::TestHashCalculations::test_hash` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/intrinsic_functions/test_hash_calculations.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/intrinsic_functions/test_json_manipulation.py::TestJsonManipulation::test_string_to_json` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/intrinsic_functions/test_json_manipulation.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/intrinsic_functions/test_json_manipulation.py::TestJsonManipulation::test_json_to_string` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/intrinsic_functions/test_json_manipulation.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/intrinsic_functions/test_json_manipulation.py::TestJsonManipulation::test_json_merge` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/intrinsic_functions/test_json_manipulation.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/intrinsic_functions/test_math_operations.py::TestMathOperations::test_math_random` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/intrinsic_functions/test_math_operations.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/intrinsic_functions/test_math_operations.py::TestMathOperations::test_math_random_seeded` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/intrinsic_functions/test_math_operations.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/intrinsic_functions/test_math_operations.py::TestMathOperations::test_math_add` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/intrinsic_functions/test_math_operations.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/intrinsic_functions/test_string_operations.py::TestStringOperations::test_string_split` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/intrinsic_functions/test_string_operations.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/intrinsic_functions/test_unique_id_generation.py::TestUniqueIdGeneration::test_uuid` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/intrinsic_functions/test_unique_id_generation.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/scenarios/test_base_scenarios.py::TestBaseScenarios::test_parallel_state` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/scenarios/test_base_scenarios.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/scenarios/test_base_scenarios.py::TestBaseScenarios::test_map_state` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/scenarios/test_base_scenarios.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/scenarios/test_base_scenarios.py::TestBaseScenarios::test_map_state_legacy` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/scenarios/test_base_scenarios.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/scenarios/test_base_scenarios.py::TestBaseScenarios::test_map_state_item_selector` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/scenarios/test_base_scenarios.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/scenarios/test_base_scenarios.py::TestBaseScenarios::test_map_state_parameters_legacy` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/scenarios/test_base_scenarios.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/scenarios/test_base_scenarios.py::TestBaseScenarios::test_map_state_item_selector_singleton` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/scenarios/test_base_scenarios.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/scenarios/test_base_scenarios.py::TestBaseScenarios::test_map_state_parameters_singleton_legacy` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/scenarios/test_base_scenarios.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/scenarios/test_base_scenarios.py::TestBaseScenarios::test_map_state_catch` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/scenarios/test_base_scenarios.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/scenarios/test_base_scenarios.py::TestBaseScenarios::test_map_state_catch_legacy` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/scenarios/test_base_scenarios.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/scenarios/test_base_scenarios.py::TestBaseScenarios::test_map_state_retry` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/scenarios/test_base_scenarios.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/scenarios/test_base_scenarios.py::TestBaseScenarios::test_map_state_retry_multiple_retriers` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/scenarios/test_base_scenarios.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/scenarios/test_base_scenarios.py::TestBaseScenarios::test_map_state_retry_legacy` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/scenarios/test_base_scenarios.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/scenarios/test_base_scenarios.py::TestBaseScenarios::test_map_state_break_condition` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/scenarios/test_base_scenarios.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/scenarios/test_base_scenarios.py::TestBaseScenarios::test_map_state_break_condition_legacy` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/scenarios/test_base_scenarios.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/services/test_apigetway_task_service.py::TestTaskApiGateway::test_invoke_base` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/services/test_apigetway_task_service.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/services/test_apigetway_task_service.py::TestTaskApiGateway::test_invoke_with_body_post[None]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/services/test_apigetway_task_service.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/services/test_apigetway_task_service.py::TestTaskApiGateway::test_invoke_with_body_post[]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/services/test_apigetway_task_service.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/services/test_apigetway_task_service.py::TestTaskApiGateway::test_invoke_with_body_post[HelloWorld]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/services/test_apigetway_task_service.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/services/test_apigetway_task_service.py::TestTaskApiGateway::test_invoke_with_body_post[request_body3]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/services/test_apigetway_task_service.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/services/test_apigetway_task_service.py::TestTaskApiGateway::test_invoke_with_query_parameters` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/services/test_apigetway_task_service.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/services/test_apigetway_task_service.py::TestTaskApiGateway::test_invoke_error` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/services/test_apigetway_task_service.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/services/test_aws_sdk_task_service.py::TestTaskServiceAwsSdk::test_list_secrets` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/services/test_aws_sdk_task_service.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/services/test_dynamodb_task_service.py::TestTaskServiceDynamoDB::test_put_get_item` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/services/test_dynamodb_task_service.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/services/test_dynamodb_task_service.py::TestTaskServiceDynamoDB::test_put_delete_item` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/services/test_dynamodb_task_service.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/services/test_dynamodb_task_service.py::TestTaskServiceDynamoDB::test_put_update_get_item` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/services/test_dynamodb_task_service.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/services/test_lambda_task.py::TestTaskLambda::test_invoke_bytes_payload` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/services/test_lambda_task.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/services/test_lambda_task.py::TestTaskLambda::test_invoke_json_values[HelloWorld]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/services/test_lambda_task.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/services/test_lambda_task.py::TestTaskLambda::test_invoke_json_values[0.0]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/services/test_lambda_task.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/services/test_lambda_task.py::TestTaskLambda::test_invoke_json_values[00]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/services/test_lambda_task.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/services/test_lambda_task.py::TestTaskLambda::test_invoke_json_values[01]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/services/test_lambda_task.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/services/test_lambda_task.py::TestTaskLambda::test_invoke_json_values[True]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/services/test_lambda_task.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/services/test_lambda_task.py::TestTaskLambda::test_invoke_json_values[json_value5]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/services/test_lambda_task.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/services/test_lambda_task.py::TestTaskLambda::test_invoke_json_values[json_value6]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/services/test_lambda_task.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/services/test_lambda_task.py::TestTaskLambda::test_invoke_pipe` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/services/test_lambda_task.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/services/test_lambda_task_service.py::TestTaskServiceLambda::test_invoke` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/services/test_lambda_task_service.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/services/test_lambda_task_service.py::TestTaskServiceLambda::test_invoke_bytes_payload` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/services/test_lambda_task_service.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/services/test_lambda_task_service.py::TestTaskServiceLambda::test_invoke_unsupported_param` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/services/test_lambda_task_service.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/services/test_lambda_task_service.py::TestTaskServiceLambda::test_invoke_json_values[HelloWorld]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/services/test_lambda_task_service.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/services/test_lambda_task_service.py::TestTaskServiceLambda::test_invoke_json_values[0.0]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/services/test_lambda_task_service.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/services/test_lambda_task_service.py::TestTaskServiceLambda::test_invoke_json_values[00]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/services/test_lambda_task_service.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/services/test_lambda_task_service.py::TestTaskServiceLambda::test_invoke_json_values[01]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/services/test_lambda_task_service.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/services/test_lambda_task_service.py::TestTaskServiceLambda::test_invoke_json_values[True]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/services/test_lambda_task_service.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/services/test_lambda_task_service.py::TestTaskServiceLambda::test_invoke_json_values[json_value5]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/services/test_lambda_task_service.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/services/test_lambda_task_service.py::TestTaskServiceLambda::test_invoke_json_values[json_value6]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/services/test_lambda_task_service.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/services/test_lambda_task_service.py::TestTaskServiceLambda::test_list_functions` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/services/test_lambda_task_service.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/services/test_sfn_task_service.py::TestTaskServiceSfn::test_start_execution` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/services/test_sfn_task_service.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/services/test_sfn_task_service.py::TestTaskServiceSfn::test_start_execution_input_json` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/services/test_sfn_task_service.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/services/test_sqs_task_service.py::TestTaskServiceSqs::test_send_message` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/services/test_sqs_task_service.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/services/test_sqs_task_service.py::TestTaskServiceSqs::test_send_message_unsupported_parameters` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/services/test_sqs_task_service.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/test_sfn_api.py::TestSnfApi::test_create_delete_valid_sm` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/test_sfn_api.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/test_sfn_api.py::TestSnfApi::test_create_delete_invalid_sm` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/test_sfn_api.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/test_sfn_api.py::TestSnfApi::test_delete_nonexistent_sm` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/test_sfn_api.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/test_sfn_api.py::TestSnfApi::test_create_exact_duplicate_sm` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/test_sfn_api.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/test_sfn_api.py::TestSnfApi::test_create_duplicate_definition_format_sm` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/test_sfn_api.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/test_sfn_api.py::TestSnfApi::test_create_duplicate_sm_name` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/test_sfn_api.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/test_sfn_api.py::TestSnfApi::test_list_sms` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/test_sfn_api.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/test_sfn_api.py::TestSnfApi::test_start_execution` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/test_sfn_api.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/test_sfn_api.py::TestSnfApi::test_invalid_start_execution_arn` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/test_sfn_api.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/test_sfn_api.py::TestSnfApi::test_invalid_start_execution_input` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/test_sfn_api.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/test_sfn_api.py::TestSnfApi::test_stop_execution` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/test_sfn_api.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/test_sfn_api_versioning.py::TestSnfApiVersioning::test_create_with_publish` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/test_sfn_api_versioning.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/test_sfn_api_versioning.py::TestSnfApiVersioning::test_create_with_version_description_no_publish` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/test_sfn_api_versioning.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/test_sfn_api_versioning.py::TestSnfApiVersioning::test_create_publish_describe_no_version_description` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/test_sfn_api_versioning.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/test_sfn_api_versioning.py::TestSnfApiVersioning::test_create_publish_describe_with_version_description` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/test_sfn_api_versioning.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/test_sfn_api_versioning.py::TestSnfApiVersioning::test_list_delete_version` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/test_sfn_api_versioning.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/test_sfn_api_versioning.py::TestSnfApiVersioning::test_update_state_machine` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/test_sfn_api_versioning.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/test_sfn_api_versioning.py::TestSnfApiVersioning::test_publish_state_machine_version` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/test_sfn_api_versioning.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/test_sfn_api_versioning.py::TestSnfApiVersioning::test_start_version_execution` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/test_sfn_api_versioning.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/test_sfn_api_versioning.py::TestSnfApiVersioning::test_version_ids_between_deletions` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/test_sfn_api_versioning.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/test_sfn_api_versioning.py::TestSnfApiVersioning::test_idempotent_publish` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/test_sfn_api_versioning.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/test_sfn_api_versioning.py::TestSnfApiVersioning::test_empty_revision_with_publish_and_publish_on_creation` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/test_sfn_api_versioning.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/test_sfn_api_versioning.py::TestSnfApiVersioning::test_empty_revision_with_publish_and_no_publish_on_creation` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/test_sfn_api_versioning.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/test_stepfunctions_v2.py::TestStateMachine::test_create_choice_state_machine` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/test_stepfunctions_v2.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/test_stepfunctions_v2.py::TestStateMachine::test_create_run_map_state_machine` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/test_stepfunctions_v2.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/test_stepfunctions_v2.py::TestStateMachine::test_create_run_state_machine` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/test_stepfunctions_v2.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/test_stepfunctions_v2.py::TestStateMachine::test_try_catch_state_machine` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/test_stepfunctions_v2.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/test_stepfunctions_v2.py::TestStateMachine::test_intrinsic_functions` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/test_stepfunctions_v2.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/test_stepfunctions_v2.py::TestStateMachine::test_events_state_machine` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/test_stepfunctions_v2.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/test_stepfunctions_v2.py::TestStateMachine::test_create_state_machines_in_parallel` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/test_stepfunctions_v2.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/test_stepfunctions_v2.py::test_multiregion_nested[statemachine_definition0-us-east-1]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/test_stepfunctions_v2.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/test_stepfunctions_v2.py::test_multiregion_nested[statemachine_definition0-us-east-2]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/test_stepfunctions_v2.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/test_stepfunctions_v2.py::test_multiregion_nested[statemachine_definition0-eu-west-1]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/test_stepfunctions_v2.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/test_stepfunctions_v2.py::test_multiregion_nested[statemachine_definition0-eu-central-1]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/test_stepfunctions_v2.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/test_stepfunctions_v2.py::test_aws_sdk_task` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/test_stepfunctions_v2.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/test_stepfunctions_v2.py::test_run_aws_sdk_secrets_manager` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/test_stepfunctions_v2.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/timeouts/test_heartbeats.py::TestHeartbeats::test_heartbeat_timeout` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/timeouts/test_heartbeats.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/timeouts/test_heartbeats.py::TestHeartbeats::test_heartbeat_path_timeout` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/timeouts/test_heartbeats.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/timeouts/test_heartbeats.py::TestHeartbeats::test_heartbeat_no_timeout` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/timeouts/test_heartbeats.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/timeouts/test_timeouts.py::TestTimeouts::test_fixed_timeout_service_lambda` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/timeouts/test_timeouts.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/timeouts/test_timeouts.py::TestTimeouts::test_fixed_timeout_service_lambda_with_path` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/timeouts/test_timeouts.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/timeouts/test_timeouts.py::TestTimeouts::test_fixed_timeout_lambda` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/timeouts/test_timeouts.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/stepfunctions/v2/timeouts/test_timeouts.py::TestTimeouts::test_service_lambda_map_timeout` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/stepfunctions/v2/timeouts/test_timeouts.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/sts/test_sts.py::TestSTSIntegrations::test_assume_role` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/sts/test_sts.py)) \r\n- [ ] `tests/aws/services/sts/test_sts.py::TestSTSIntegrations::test_assume_role_with_web_identity` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/sts/test_sts.py)) \r\n- [ ] `tests/aws/services/sts/test_sts.py::TestSTSIntegrations::test_assume_role_with_saml` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/sts/test_sts.py)) \r\n- [ ] `tests/aws/services/sts/test_sts.py::TestSTSIntegrations::test_get_federation_token` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/sts/test_sts.py)) \r\n- [ ] `tests/aws/services/support/test_support.py::TestConfigService::test_create_support_case` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/support/test_support.py)) \r\n- [ ] `tests/aws/services/support/test_support.py::TestConfigService::test_resolve_case` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/support/test_support.py)) \r\n- [ ] `tests/aws/services/swf/test_swf.py::TestSwf::test_run_workflow` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/swf/test_swf.py)) \r\n- [ ] `tests/aws/services/transcribe/test_transcribe.py::TestTranscribe::test_transcribe_supported_media_formats[../../files/en-gb.amr]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/transcribe/test_transcribe.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/transcribe/test_transcribe.py::TestTranscribe::test_transcribe_supported_media_formats[../../files/en-gb.flac]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/transcribe/test_transcribe.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/transcribe/test_transcribe.py::TestTranscribe::test_transcribe_supported_media_formats[../../files/en-gb.mp3]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/transcribe/test_transcribe.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/transcribe/test_transcribe.py::TestTranscribe::test_transcribe_supported_media_formats[../../files/en-gb.mp4]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/transcribe/test_transcribe.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/transcribe/test_transcribe.py::TestTranscribe::test_transcribe_supported_media_formats[../../files/en-gb.ogg]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/transcribe/test_transcribe.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/transcribe/test_transcribe.py::TestTranscribe::test_transcribe_supported_media_formats[../../files/en-gb.webm]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/transcribe/test_transcribe.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/transcribe/test_transcribe.py::TestTranscribe::test_transcribe_unsupported_media_format_failure` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/transcribe/test_transcribe.py)) `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/test_integration.py::TestIntegration::test_firehose_s3` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/test_integration.py)) \r\n- [ ] `tests/aws/test_integration.py::TestIntegration::test_firehose_extended_s3` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/test_integration.py)) \r\n- [ ] `tests/aws/test_integration.py::TestIntegration::test_firehose_kinesis_to_s3` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/test_integration.py)) \r\n- [ ] `tests/aws/test_integration.py::TestIntegration::test_lambda_streams_batch_and_transactions` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/test_integration.py)) \r\n- [ ] `tests/aws/test_integration.py::TestIntegration::test_scheduled_lambda` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/test_integration.py)) \r\n- [ ] `tests/aws/test_integration.py::test_kinesis_lambda_forward_chain` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/test_integration.py)) \r\n- [ ] `tests/aws/test_integration.py::TestLambdaOutgoingSdkCalls::test_lambda_send_message_to_sqs[python3.7]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/test_integration.py)) \r\n- [ ] `tests/aws/test_integration.py::TestLambdaOutgoingSdkCalls::test_lambda_send_message_to_sqs[python3.8]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/test_integration.py)) \r\n- [ ] `tests/aws/test_integration.py::TestLambdaOutgoingSdkCalls::test_lambda_send_message_to_sqs[python3.9]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/test_integration.py)) \r\n- [ ] `tests/aws/test_integration.py::TestLambdaOutgoingSdkCalls::test_lambda_send_message_to_sqs[python3.10]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/test_integration.py)) \r\n- [ ] `tests/aws/test_integration.py::TestLambdaOutgoingSdkCalls::test_lambda_send_message_to_sqs[python3.11]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/test_integration.py)) \r\n- [ ] `tests/aws/test_integration.py::TestLambdaOutgoingSdkCalls::test_lambda_put_item_to_dynamodb[python3.7]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/test_integration.py)) \r\n- [ ] `tests/aws/test_integration.py::TestLambdaOutgoingSdkCalls::test_lambda_put_item_to_dynamodb[python3.8]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/test_integration.py)) \r\n- [ ] `tests/aws/test_integration.py::TestLambdaOutgoingSdkCalls::test_lambda_put_item_to_dynamodb[python3.9]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/test_integration.py)) \r\n- [ ] `tests/aws/test_integration.py::TestLambdaOutgoingSdkCalls::test_lambda_put_item_to_dynamodb[python3.10]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/test_integration.py)) \r\n- [ ] `tests/aws/test_integration.py::TestLambdaOutgoingSdkCalls::test_lambda_put_item_to_dynamodb[python3.11]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/test_integration.py)) \r\n- [ ] `tests/aws/test_integration.py::TestLambdaOutgoingSdkCalls::test_lambda_start_stepfunctions_execution[python3.7]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/test_integration.py)) \r\n- [ ] `tests/aws/test_integration.py::TestLambdaOutgoingSdkCalls::test_lambda_start_stepfunctions_execution[python3.8]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/test_integration.py)) \r\n- [ ] `tests/aws/test_integration.py::TestLambdaOutgoingSdkCalls::test_lambda_start_stepfunctions_execution[python3.9]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/test_integration.py)) \r\n- [ ] `tests/aws/test_integration.py::TestLambdaOutgoingSdkCalls::test_lambda_start_stepfunctions_execution[python3.10]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/test_integration.py)) \r\n- [ ] `tests/aws/test_integration.py::TestLambdaOutgoingSdkCalls::test_lambda_start_stepfunctions_execution[python3.11]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/test_integration.py)) \r\n- [ ] `tests/aws/test_moto.py::test_call_with_sqs_creates_state_correctly` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/test_moto.py)) \r\n- [ ] `tests/aws/test_moto.py::test_call_sqs_invalid_call_raises_http_exception` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/test_moto.py)) \r\n- [ ] `tests/aws/test_moto.py::test_call_non_implemented_operation` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/test_moto.py)) \r\n- [ ] `tests/aws/test_moto.py::test_call_with_sqs_modifies_state_in_moto_backend` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/test_moto.py)) \r\n- [ ] `tests/aws/test_moto.py::test_call_s3_with_streaming_trait[str]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/test_moto.py)) \r\n- [ ] `tests/aws/test_moto.py::test_call_s3_with_streaming_trait[bytes]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/test_moto.py)) \r\n- [ ] `tests/aws/test_moto.py::test_call_s3_with_streaming_trait[IO[bytes]]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/test_moto.py)) \r\n- [ ] `tests/aws/test_moto.py::test_call_include_response_metadata` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/test_moto.py)) \r\n- [ ] `tests/aws/test_moto.py::test_call_with_modified_request` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/test_moto.py)) \r\n- [ ] `tests/aws/test_moto.py::test_call_with_es_creates_state_correctly` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/test_moto.py)) \r\n- [ ] `tests/aws/test_moto.py::test_call_multi_region_backends` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/test_moto.py)) \r\n- [ ] `tests/aws/test_moto.py::test_call_with_sqs_invalid_call_raises_exception` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/test_moto.py)) \r\n- [ ] `tests/aws/test_moto.py::test_call_with_sqs_returns_service_response` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/test_moto.py)) \r\n- [ ] `tests/aws/test_moto.py::test_moto_fallback_dispatcher` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/test_moto.py)) \r\n- [ ] `tests/aws/test_moto.py::test_moto_fallback_dispatcher_error_handling` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/test_moto.py)) \r\n- [ ] `tests/aws/test_moto.py::test_request_with_response_header_location_fields` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/test_moto.py)) \r\n- [ ] `tests/aws/test_multi_accounts.py::TestMultiAccounts::test_account_id_namespacing_for_moto_backends` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/test_multi_accounts.py)) \r\n- [ ] `tests/aws/test_multi_accounts.py::TestMultiAccounts::test_account_id_namespacing_for_localstack_backends` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/test_multi_accounts.py)) \r\n- [ ] `tests/aws/test_multi_accounts.py::TestMultiAccounts::test_multi_accounts_dynamodb` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/test_multi_accounts.py)) \r\n- [ ] `tests/aws/test_multi_accounts.py::TestMultiAccounts::test_multi_accounts_kinesis` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/test_multi_accounts.py)) \r\n- [ ] `tests/aws/test_multiregion.py::TestMultiRegion::test_multi_region_sns` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/test_multiregion.py)) \r\n- [ ] `tests/aws/test_multiregion.py::TestMultiRegion::test_multi_region_api_gateway` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/test_multiregion.py)) \r\n- [ ] `tests/aws/test_notifications.py::TestNotifications::test_sns_to_sqs` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/test_notifications.py)) \r\n- [ ] `tests/aws/test_serverless.py::TestServerless::test_event_rules_deployed` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/test_serverless.py)) \r\n- [ ] `tests/aws/test_serverless.py::TestServerless::test_dynamodb_stream_handler_deployed` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/test_serverless.py)) \r\n- [ ] `tests/aws/test_serverless.py::TestServerless::test_kinesis_stream_handler_deployed` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/test_serverless.py)) \r\n- [ ] `tests/aws/test_serverless.py::TestServerless::test_queue_handler_deployed` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/test_serverless.py)) \r\n- [ ] `tests/aws/test_serverless.py::TestServerless::test_lambda_with_configs_deployed` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/test_serverless.py)) \r\n- [ ] `tests/aws/test_serverless.py::TestServerless::test_apigateway_deployed` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/test_serverless.py)) \r\n- [ ] `tests/aws/test_serverless.py::TestServerless::test_s3_bucket_deployed` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/test_serverless.py)) \r\n- [ ] `tests/aws/test_terraform.py::TestTerraform::test_bucket_exists` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/test_terraform.py)) \r\n- [ ] `tests/aws/test_terraform.py::TestTerraform::test_sqs` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/test_terraform.py)) \r\n- [ ] `tests/aws/test_terraform.py::TestTerraform::test_lambda` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/test_terraform.py)) \r\n- [ ] `tests/aws/test_terraform.py::TestTerraform::test_event_source_mapping` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/test_terraform.py)) \r\n- [ ] `tests/aws/test_terraform.py::TestTerraform::test_apigateway` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/test_terraform.py)) \r\n- [ ] `tests/aws/test_terraform.py::TestTerraform::test_route53` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/test_terraform.py)) \r\n- [ ] `tests/aws/test_terraform.py::TestTerraform::test_acm` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/test_terraform.py)) \r\n- [ ] `tests/aws/test_terraform.py::TestTerraform::test_apigateway_escaped_policy` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/test_terraform.py)) \r\n- [ ] `tests/aws/test_terraform.py::TestTerraform::test_dynamodb` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/test_terraform.py)) \r\n- [ ] `tests/aws/test_terraform.py::TestTerraform::test_security_groups` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/test_terraform.py)) \r\n\r\n\r\n## needs_fixing (6)\r\n\r\n- [ ] `tests/aws/services/cloudformation/api/test_update_stack.py::test_update_with_capabilities[capability0]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/api/test_update_stack.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/cloudformation/api/test_update_stack.py::test_update_with_capabilities[capability1]` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/api/test_update_stack.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/cloudformation/resources/test_sns.py::test_sns_topic_fifo_without_suffix_fails` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/resources/test_sns.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/cloudformation/resources/test_stepfunctions.py::test_retry_and_catch` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/cloudformation/resources/test_stepfunctions.py)) `<codeowner>` `<codeowner>` `<codeowner>`\r\n- [ ] `tests/aws/services/ses/test_ses.py::TestSES::test_get_identity_verification_attributes_for_domain` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/ses/test_ses.py)) `<codeowner>`\r\n- [ ] `tests/aws/services/ses/test_ses.py::TestSES::test_sent_message_counter` ([file](https://github.com/localstack/localstack/blob/150a82ff8babb16f1f107df19d3e856602dd6bcb/tests/aws/services/ses/test_ses.py)) `<codeowner>`\r\n\r\n</details>\r\n",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 27,
        "deletions": 5,
        "changed_files": 2,
        "created_at": "2023-09-13T07:12:08Z",
        "closed_at": "2023-09-18T09:02:15Z",
        "merged_at": null,
        "body": "## Motivation\r\n\r\nThe caching mechanism of `ClientFactory._get_client()` relies on the hash value of all its args. This includes a Boto `Config` object.\r\n\r\nThe use of `Config.merge()` which returned a new `Config` object everytime, causing cache misses in all invocations of `ClientFactory._get_client()`.\r\n\r\n## Implementation\r\n\r\nThis PR introduces a dedicated merge method for `Config` objects that must be used for all Boto `Config` merges outside of `ClientFactory._get_client()`.\r\n\r\n@dfangl: Feel free to change this if you think of a better way :)\r\n\r\n## Related\r\n\r\nhttps://github.com/localstack/localstack/issues/9126",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 53,
        "deletions": 10,
        "changed_files": 7,
        "created_at": "2023-09-13T00:43:19Z",
        "closed_at": "2023-09-19T09:30:29Z",
        "merged_at": "2023-09-19T09:30:29Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\n\r\nWith providers now depending on other services for their internal functionality, it becomes important that we allow services to continue to use other services during the infra shutdown procedure so they can properly shut down themselves. This means we need to shutdown services *before* the gateway so services can still make internal requests to properly shut down This was previously not possible because of how shutdown handlers were implemented.\r\n\r\nThis PR adds a band-aid for this issue applied until we complete re-write the `start_infra` procedure.\r\n\r\nMoreover, if we shut down the gateway last, then we should be rejecting incoming requests while we're shutting down the infra. This PR adds a handler that implements this logic. It accepts internal requests so internal components can continue working during the shutdown procedure.\r\n\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\n\r\n* Move service plugin shutdown into a `infra_shutdown` hook with a well-known priority of `-10`\r\n* Add a new `ShutdownHandler` instance that is executed with a lower priority so we have a way to execute shutdown handlers after services were shut down\r\n* Add new handler into the handler chain to return 503 while the system is shutting down\r\n* Move `handlers.add_internal_request_params` almost to the top of the handler chain, since knowing whether it's an internal request is needed in the handler\r\n* Add shutdown handlers to list of plugin managers that can be queried via `/_localstack/plugins`\r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 23,
        "deletions": 15,
        "changed_files": 7,
        "created_at": "2023-09-12T19:15:23Z",
        "closed_at": "2023-09-12T20:55:30Z",
        "merged_at": "2023-09-12T20:55:30Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\n\r\nIn the `StateVisitor` implementations that handle cloud pod state, there is currently no way to know which service the `AssetDirectory` being visited belongs to, unlike `AccountRegionBundle` and `BackendDict` which both have a `service_name` attribute.\r\nKnowing the service name for an `AssetDirectory` is required for technical reasons for s3 v3 persistence.\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\n\r\n* Make `StateContainer` a protocol and make `service_name` a mandatory attribute\r\n* Refactor all instances of `AssetDirectory` to correctly use the service name\r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 184,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2023-09-12T16:44:22Z",
        "closed_at": "2023-09-13T07:30:17Z",
        "merged_at": "2023-09-13T07:30:17Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nAdds tests to fix the behaviour of Result productions, which are treated as static json objects and json paths are never resolved\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\n\r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 908,
        "deletions": 16,
        "changed_files": 8,
        "created_at": "2023-09-12T16:42:42Z",
        "closed_at": "2023-09-13T07:30:47Z",
        "merged_at": "2023-09-13T07:30:47Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nAdds support for EventBridge optimised integration.\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\nAdded state task resolver for EventBridge and relevant snapshot tests.\r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1256,
        "deletions": 0,
        "changed_files": 10,
        "created_at": "2023-09-12T16:35:20Z",
        "closed_at": "2023-09-25T14:28:55Z",
        "merged_at": "2023-09-25T14:28:55Z",
        "body": "## Motivation\r\nThe CRUD API operations for Scheduler::Schedule and Scheduler::ScheduleGroup were recently added to LocalStack so the support with CFn would be expected.\r\nCloses #8777\r\n## Changes\r\n- Resource Provider for AWS::Scheduler::Schedule \r\n- Resource Provider for AWS::Scheduler::ScheduleGroup\r\n## Testing\r\n- Validates the deployment of a stack with the resources\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 301,
        "deletions": 370,
        "changed_files": 6,
        "created_at": "2023-09-12T13:52:59Z",
        "closed_at": "2023-09-13T14:31:24Z",
        "merged_at": "2023-09-13T14:31:24Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nIssues with S3 Website were found from #9017, which showed a deeper issue in our S3 cross/multi account implementation.\r\n`GetBucketWebsite` would return `NoSuchBucket` if a request from account A was done to a bucket in account B, even though you could get an object from account B.\r\n\r\nWe need to implement proper cross-account access for S3.\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\n### Make all S3 access cross-account\r\n\r\n#### For the current provider:\r\nBefore, if we tried to access a bucket existing in account A from account B, we would get some weird issue, as we got the bucket from moto but we would then access the store from account B, which wouldn't have the bucket properties. We now use the found moto bucket account id and region to fetch the store.\r\n\r\n#### For the v3 provider:\r\nWe now use the cross account access for every S3 operation, which will allow us to have some implementation of ACL if not using bucket policies, instead of returning `NoSuchBucket` if the bucket didn't exist in the caller account. This will need multi account setup in our test suite at some point? \r\n\r\n#### Misc\r\nAdded a quick cross region test to verify it, and we didn't have one earlier for bucket operations. \r\n\r\n~Also sneaked in a little change for the request, I would get a big logging error that the account_id and region were not passed to the logging format string, following #9084 @whummer. This might just return `None/None`, not sure if that would still be helping or if we should refactor the format string?~ deleted as it's now part of another PR.\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 5
    },
    {
        "merged": true,
        "additions": 5,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-09-12T11:50:09Z",
        "closed_at": "2023-09-18T07:28:09Z",
        "merged_at": "2023-09-18T07:28:09Z",
        "body": "This PR marks the `aws_stack.generate_presigned_url` helper as obsolete.\r\n\r\nThe recommended way forward is to use the `generate_presigned_url` method of the `S3` Boto client.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 743,
        "deletions": 402,
        "changed_files": 27,
        "created_at": "2023-09-12T11:25:25Z",
        "closed_at": "2023-10-06T14:03:13Z",
        "merged_at": "2023-10-06T14:03:13Z",
        "body": "## Motivation\r\n\r\nThis PR introduces multi-account support to the legacy StepFunctions provider. It also makes multi-account friendly fixes to the work-in-progress StepFunctions v2 provider.\r\n\r\ncc: @MEPalma \r\n\r\n## Implementation\r\n\r\nThe legacy provider uses [StepFunctions Local](https://docs.aws.amazon.com/step-functions/latest/dg/sfn-local-jar.html) which itself does not support namespacing. So we take an approach similar to Kinesis. Each account+region combo will run its own instance of SFLocal. Of course this is not optimal but should fulfill simple usecases. \r\n\r\nHowever, SFLocal does not respect the `--account-id` argument and overwrites ARNs like Lambda Functions during invocations. So I guess the way forward is to only support true multi-accounts in the new SF provider and keep this limitation in the legacy one. The multi-region parameter is maintained.\r\n\r\nCriteria for merging: all stepfunctions tests (legacy as well as the **ci/circleci: itest-sfn-v2-provider** job)  pass when `AWS_ACCESS_KEY_ID` is set to a non-default account ID or when `AWS_REGION_NAME` is set to non-`us-east-1` region.\r\n\r\n**79ec46e61e52940f2be5d2377b4933a77e5c2b61 must be reverted before merge**\r\n\r\n## Related\r\n\r\nCloses https://github.com/localstack/localstack/issues/8205",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 769,
        "deletions": 647,
        "changed_files": 3,
        "created_at": "2023-09-12T08:52:36Z",
        "closed_at": "2023-09-12T12:53:43Z",
        "merged_at": "2023-09-12T12:53:43Z",
        "body": "\r\n## Motivation\r\n\r\nThese tests were quite flaky in CI, so I tried to make them a bit more robust now :sweat_smile: \r\n\r\n## Changes\r\n\r\n- Remove all unknown markers and replace with proper markers.\r\n- Any tests that would've been `needs_fixing` have been adapted/fixed to be compatible with AWS.\r\n- Skip `test_put_metric_alarm` instead of xfailing because it always fails with localstack and the test is usually running for 3 minutes.\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [x] might need to adjust snapshots due to transformer change\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 27,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2023-09-12T06:54:25Z",
        "closed_at": "2023-09-12T15:05:53Z",
        "merged_at": "2023-09-12T15:05:53Z",
        "body": "## Motivation\r\n\r\nCurrently the `Community Integration Tests against Pro` are the slowest part of our community test suite on PRs.\r\nIn this PR we attempt to reduce the runtime of these tests to get them to a point where we don't have to wait an additional 20+ minutes until the pro tests against community are done for a green pipeline.\r\n\r\nThe initial commit will currently never find a cache hit since we don't execute the action on master. Additionally the cache key seems to be calculated incorrectly by considering too many files for caching and never actually restored the venv/lib cache, even in a single PR with multiple runs.\r\n\r\nSuccessful caching of the built lambda common packages should already save ~8 minutes.\r\n\r\n## Changes\r\n\r\n- Stricter matching/hash calculation\r\n- Add a restore key for the venv/lib caching to match cache from master.\r\n  - this should work for the venv but for the libs it will only be able to cache half since we're currently always splitting the tests into two, so not all installers might have been executed.\r\n- Execute action on master again to populate cache for PRs to use\r\n  - We don't really want to do this on every commit, so this will only be executed when a potential cache miss would happen (matching on the same set of files)\r\n  - This is supplemented with a daily scheduled run at 4 AM UTC to also cover potential changes in -ext, at least on a daily interval. Ideally this will be replaced with a trigger from -ext on successful runs that will manually start the workflow in community.\r\n- Set `DISABLE_BOTO_RETRIES=1` for test execution\r\n\r\n## Outcome\r\n\r\nThe proper caching of the venv + libs wasn't as impactful as I had initially hoped. It still reduced the total run time by a few (~4) minutes. In combination with the saved 8 minutes ( from the lambda common cache) of the initial test run, a PR's first run of `Community Integration Tests against Pro` should be about ~12 min faster now.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2023-09-11T23:47:02Z",
        "closed_at": "2023-09-12T06:50:47Z",
        "merged_at": "2023-09-12T06:50:47Z",
        "body": "Bumps python from `d8c9ac4` to `9d1db83`.\n\n\n[![Dependabot compatibility score](https://dependabot-badges.githubapp.com/badges/compatibility_score?dependency-name=python&package-manager=docker&previous-version=3.10.13-slim-bullseye&new-version=3.10.13-slim-bullseye)](https://docs.github.com/en/github/managing-security-vulnerabilities/about-dependabot-security-updates#about-compatibility-scores)\n\nDependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.\n\n[//]: # (dependabot-automerge-start)\n[//]: # (dependabot-automerge-end)\n\n---\n\n<details>\n<summary>Dependabot commands and options</summary>\n<br />\n\nYou can trigger Dependabot actions by commenting on this PR:\n- `@dependabot rebase` will rebase this PR\n- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it\n- `@dependabot merge` will merge this PR after your CI passes on it\n- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it\n- `@dependabot cancel merge` will cancel a previously requested merge and block automerging\n- `@dependabot reopen` will reopen this PR if it is closed\n- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually\n- `@dependabot show <dependency name> ignore conditions` will show all of the ignore conditions of the specified dependency\n- `@dependabot ignore this major version` will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot ignore this minor version` will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot ignore this dependency` will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)\n\n\n</details>",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 162,
        "deletions": 87,
        "changed_files": 6,
        "created_at": "2023-09-11T18:18:50Z",
        "closed_at": "2023-09-12T11:11:53Z",
        "merged_at": "2023-09-12T11:11:52Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\n\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\n## Motivation\n\nWe want to make it easier to add customizations when running `localstack start`. For instance, to generalize something like `DNS_ADDRESS`, we could just provide a port mapping for `localstack start`, that allows people to map, say, `127.0.0.1:1053:53/udp`. Similarly, there's now easy way to mount custom volumes into the localstack container other than using `DOCKER_FLAGS`.\n\nThis PR adds a `-p` and `-v` flag to `localstack start`, which are the same as the flags used in `docker run`. This is a continuation of #8772\n\n<!-- What notable changes does this PR make? -->\n## Changes\n\n* Add `-p/--publish` and `-v/--volume` flags to `localstack start`\n* Re-use and refactor the necessary code from dev configurators (was already there) into the bootstrap `ContainerConfigurators`\n* Fixed an issue where volume parsing wasn't working correctly if `:ro` suffix was provided\n* Fixed an issue in ports parsing that would prevent a `/<protocol>` suffix or port range `<start>-<end>` to be parsed correctly\n* Added a unit test for the configurator\n\n<!-- The following sections are optional, but can be useful! \n\n## Testing\n\nDescription of how to test the changes\n\n## TODO\n\nWhat's left to do:\n\n- [ ] ...\n- [ ] ...\n\n-->\n\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 115,
        "deletions": 22,
        "changed_files": 3,
        "created_at": "2023-09-11T14:56:58Z",
        "closed_at": "2023-09-19T11:54:55Z",
        "merged_at": "2023-09-19T11:54:55Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nWe want to enable our DNS integration for all lambda images. In community we only forward all subdomains of `localhost.localstack.cloud` to LS, which is already helpful when using lambdas to connect to returned endpoints (e.g. apigateway endpoints).\r\n\r\nAlso, the host mode version is currently broken, so this has to be fixed.\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\n* Fix host mode DNS by creating a new server class for dns servers running in a separate (sudo) process. It is not possible to interact with it programatically yet, but it now it does not raise errors when calling DNSServerProtocol methods\r\n* Set the DNS in lambda, if no other LAMBDA_DOCKER_DNS is set.\r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 162,
        "deletions": 0,
        "changed_files": 3,
        "created_at": "2023-09-11T10:40:31Z",
        "closed_at": "2023-09-11T15:11:39Z",
        "merged_at": "2023-09-11T15:11:38Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nFollow up from #9095\r\n\r\nThe scenario described by the user was the following:\r\n1. Create api gateway\r\n2. Create api gateway stage\r\n3. Create api gateway stage deployment\r\n4. Create another api gateway stage deployment (which updates the stage itself)\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\nThe issue was in the moto implementation: \r\n```python\r\n        if deployment.stage_name and deployment.stage_name in self.stages:\r\n            # Stage is still active\r\n            raise StageStillActive()\r\n```\r\nBut it didn't check if the actual stage which had the same name was attached to the deployment we were deleting. \r\nI've created a patch as we don't have any `deployment` operation in our provider at the moment and this is a quick fix, the issue was long running and hindering their Terraform deployments.\r\nAdded an AWS test which was reproducing the issue. \r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 25,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-09-11T05:04:38Z",
        "closed_at": "2023-09-11T06:36:49Z",
        "merged_at": "2023-09-11T06:36:49Z",
        "body": "# \ud83d\ude80 ASF Update Report \ud83d\ude80\nThis PR has been automatically generated to update the generated API stubs for our ASF services.\nIt uses the latest code-generator from the _master_ branch ([scaffold.py](https://github.com/localstack/localstack/blob/master/localstack/aws/scaffold.py)) and the latest _published_ version of [botocore](https://github.com/boto/botocore) to re-generate all API stubs which are already present in the `localstack.aws.api` module of the _master_ branch.\n\n## \ud83d\udd04 Updated Services\nThis PR updates the following services:\n- ec2\n\n## \ud83d\udc77\ud83c\udffd Handle this PR\nThe following options describe how to interact with this PR / the auto-update:\n\n\u2714\ufe0f **Accept Changes**\nIf the changes are satisfying, just squash-merge the PR and delete the source branch.\n\n\ud83d\udeab **Ignore Changes**\nIf you want to ignore the changes in this PR, just close the PR and *do not delete* the source branch. The PR will not be opened and a new PR will not be created for as long as the generated code does not change (or the branch is deleted). As soon as there are new changes, a new PR will be created.\n\n\u270f\ufe0f **Adapt Changes**\n*Don't do this.* The APIs are auto-generated. If you decide that the APIs should look different, you have to change the code-generation.\n\n\u23f8\ufe0f **Pause Updates**\nRemove the cron-schedule trigger of the GitHub Action workflow which creates these PRs. The action can then still be triggered manually, but it will not be executed automatically.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 236,
        "deletions": 13,
        "changed_files": 10,
        "created_at": "2023-09-09T06:20:17Z",
        "closed_at": "2023-09-12T07:19:12Z",
        "merged_at": "2023-09-12T07:19:12Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\n\r\nRework this PR to instead of forcing xml to json format exchange, it adds parity to AWS by defaulting SQS responses to JSON. It also works if the request parameter is set to `application/xml`, in that case, the response from the integration is not JSON but XML.\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\n\r\n- Applies the same defaults as AWS, the default response being JSON.\r\n- It also adds a basic implementation of `update_integration` and `update_integration_response` just to comply with the tests. A follow-up PR will improve the implementation.\r\n- Snapshot tests and exercise multiple response formats\r\n\r\n\r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nAdds a snapshot that tackles the customer issue\r\n\r\n",
        "comments": 5
    },
    {
        "merged": true,
        "additions": 278,
        "deletions": 3,
        "changed_files": 8,
        "created_at": "2023-09-08T16:52:55Z",
        "closed_at": "2023-09-12T13:27:49Z",
        "merged_at": "2023-09-12T13:27:49Z",
        "body": "## Motivation\r\nThe Generic Base model for the Lambda::Alias doesn't support the `ProvisionedConcurrencyConfig` attribute so I took the opportunity to code the resource provider for the model \r\n## Changes\r\n- New Resource provider\r\n- Test uses the attribute and is AWS validated\r\n\r\n## Testing\r\nThe testing of the attribute requires the lambda to return a valid response due AWS running the function code before provisioning the concurrency config. ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 165,
        "deletions": 2,
        "changed_files": 7,
        "created_at": "2023-09-08T16:05:33Z",
        "closed_at": "2023-09-11T12:59:56Z",
        "merged_at": "2023-09-11T12:59:56Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nIt seems I introduced an issue when fixing the `s3_empty_bucket` fixture to force deleting locked objects.\r\n```python\r\n2023-09-08T17:33:09.910 DEBUG --- [  MainThread] localstack.testing.pytest.fixtures : error cleaning up bucket test-bucket-5c896954: An error occurred (InvalidArgument) when calling the DeleteObjects operation: x-amz-bypass-governance-retention is only applicable to Object Lock enabled buckets.\r\n```\r\nIt also showed that LocalStack didn't have parity when checking this, and allowed the parameter to be passed if the bucket doesn't have it enabled. Added the fix in LocalStack as well, but this was an issue only when running against AWS (lots of clean up to do \ud83d\ude2d)\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\n- added a check in the fixture to check if the bucket can be locked.\r\n- added a test for the fixture, so we're sure it's working.\r\n- added parity in LocalStack to also raise the error if the parameter is used.\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 327,
        "deletions": 153,
        "changed_files": 4,
        "created_at": "2023-09-08T09:17:39Z",
        "closed_at": "2023-09-11T11:01:14Z",
        "merged_at": "2023-09-11T11:01:14Z",
        "body": "## Motivation\r\n\r\nAs part of our snapshot age project, the goal here is to simply re-validate the route53 integration tests and regenerate the collected snapshots.\r\n\r\n## Changes\r\n\r\n- fixed tests where they were failing against AWS and made cleanup of resources more robust.\r\n- updated all snapshots for route53resolver\r\n\r\n\r\n\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 381,
        "deletions": 2,
        "changed_files": 4,
        "created_at": "2023-09-07T17:35:22Z",
        "closed_at": "2023-09-08T07:40:20Z",
        "merged_at": "2023-09-08T07:40:20Z",
        "body": "## Motivation\r\n\r\nAddresses a user issue reported in Slack. We are currently seeing parity issues in the linkage between API Gateway stages and deployments. In a nutshell, we need to establish a bidirectional link `stage<>deployment` for the `create_stage(..)` API. Moto was currently only adding the `stage->deployment`, but the reverse direction was still missing, leading to deployment errors, e.g., with Terraform.\r\n\r\n## Changes\r\n\r\n* update `create_stage(..)` to update the `stage_name` on the Deployment on creation of a Stage\r\n* add small fix in `get_stages(..)` to transform the result entries\r\n* add Makefile parametrization for `DISABLE_BOTO_RETRIES` (API Gateway snapshot tests require retries, due to high frequency of `TooManyRequestsException`)\r\n* add a snapshot test to cover a sequence of different creations/deletions of stages&deployments",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 45,
        "deletions": 4,
        "changed_files": 4,
        "created_at": "2023-09-07T16:21:39Z",
        "closed_at": "2023-09-08T16:53:29Z",
        "merged_at": null,
        "body": "## Motivation\r\nThis PR fixes the CFn crash that happens when deploying a AWS::Lambda::Alias resource that has a `ProvisionedConcurrencyConfig` \r\n\r\n## Changes\r\nModel limits the correct parameters for the creation and then it check if the attribute exists.\r\n\r\n## Testing\r\nThe testing just extends a previous tests and corrects the code of the lambda function so it can be deployed on AWS",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 512,
        "deletions": 20,
        "changed_files": 9,
        "created_at": "2023-09-07T15:50:56Z",
        "closed_at": "2023-09-12T17:19:01Z",
        "merged_at": "2023-09-12T17:19:01Z",
        "body": "## Motivation\r\n\r\nWhen working on other tasks, I noticed the AWS::IAM::Policy usually fails to clean up leading to a lot of cleanup issues since other resources usually depend on this resource. It seems this was also implemented wrong in the original `GenericBaseModel` version.\r\n\r\n## Changes\r\n\r\n- Add proper delete for `AWS::IAM::Policy`\r\n- Add test for a broken delete where resources need to be orphaned to \"unblock\" the delete.\r\n- Fix transformers, so that it won't try to do a reference replacement with `\"\"` values\r\n\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 133,
        "deletions": 47,
        "changed_files": 1,
        "created_at": "2023-09-07T14:51:22Z",
        "closed_at": "2023-09-11T09:49:35Z",
        "merged_at": "2023-09-11T09:49:35Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nWhen writing the new S3 v3 provider, a lot of new tests have been written to either verify missing cases or tests things that were implemented in moto only.\r\nThis PR aims to enable those tests for the current provider, and xfail the ones that are not passing.\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\nRemove all the `skip` pytest markers and go individually over each test to verify if they pass. \r\n\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [x] merge #9082 because this PR is based on it, as it added a new test that was the point to have those tests run for both providers\r\n\r\n\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-09-07T14:41:18Z",
        "closed_at": "2023-09-08T06:49:10Z",
        "merged_at": "2023-09-08T06:49:10Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nissue #9089 \r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\nadds zone type to zones response\r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 341,
        "deletions": 0,
        "changed_files": 4,
        "created_at": "2023-09-07T13:46:48Z",
        "closed_at": "2023-09-20T12:37:28Z",
        "merged_at": "2023-09-20T12:37:28Z",
        "body": "## Motivation\r\nCloudFormation is important part of AWS and extending its functionality with SNS topics will further improve its implementation in LocalStack\r\n\r\n<!-- What notable changes does this PR make? -->\r\nInitial implementation of SNS topic resource for use by CloudFormation\r\nAdded support for\r\n- Creating topic with subscriptions\r\n- Deleting topic\r\n\r\n## Testing\r\n`python -m pytest tests/aws/services/cloudformation/resources/test_sns.py`\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n- Idempotency tests (creating a topic with existing name)\r\n- IAM permissions testing\r\n- Testing if deleting topic using CF deletes subscriptions as well or if they need to be deleted as beforehand\r\n- Implementing resource reading\r\n- Implementing resource update\r\n-->\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2367,
        "deletions": 9,
        "changed_files": 10,
        "created_at": "2023-09-07T11:11:20Z",
        "closed_at": "2023-09-11T12:22:35Z",
        "merged_at": "2023-09-11T12:22:35Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nThis scenario is based on https://github.com/aws-samples/aws-bookstore-demo-app\r\n\r\nCurrently includes:\r\n- DynamoDB\r\n- OpenSearch\r\n- EventSourceMapping\r\n- several Lambdas for pre-filling + querying dynamodb + opensearch\r\n\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\n* updated the supported opensearch-versions (using the script), and removed all versions that are not supported by AWS (/cc @alexrashed)\r\n* did not update anything for elastic-search yet (not sure how the versions were pre-selected here) -> we are missing Elasticsearch_2.3 and Elasticsearch_1.5 to be fully compatible with AWS.\r\n\r\nScenarios:\r\n* First tests calls a Lambda that pre-fills the dynamoDB\r\n   * EventSourceMapping: will retrieve stream from DynamoDB and send PUT requests to opensearch cluster\r\n* get/list Lambdas that query dynamodb\r\n* search Lambda that sends query to opensearch (for category, name, title of books)\r\n* some basic CRUD operations for opensearch\r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 16,
        "changed_files": 2,
        "created_at": "2023-09-07T10:55:43Z",
        "closed_at": "2023-09-07T14:07:52Z",
        "merged_at": "2023-09-07T14:07:52Z",
        "body": null,
        "comments": 2
    },
    {
        "merged": true,
        "additions": 134,
        "deletions": 93,
        "changed_files": 3,
        "created_at": "2023-09-07T09:41:04Z",
        "closed_at": "2023-09-08T05:55:33Z",
        "merged_at": "2023-09-08T05:55:33Z",
        "body": "## Motivation\r\nThe `CODEOWNERS` file was a bit outdated.\r\nThis PR tries to update it as good as possible.\r\nPlease let me know if some of the assignments are not correct, or if anything you can think of is missing.\r\nHowever, this change does not claim to be comprehensive.\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\n- Update `CODEOWNERS` file.\r\n- Renames the elasticsearch cloudformation model to the correct name (`es` is the AWS service name for elasticsearch we use everywhere else). /cc @dominikschubert \r\n\r\n/cc mentioned code owners: @ackdav @alexrashed @baermat @calvernaz @dfangl @dominikschubert @giograno @macnev2013 @MEPalma @sannya-singal @silv-io @simonrw @steffyP @thrau @viren-nadkarni\r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 9,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2023-09-07T08:29:16Z",
        "closed_at": "2023-09-07T12:09:30Z",
        "merged_at": "2023-09-07T12:09:30Z",
        "body": "## Motivation\r\n\r\nThere've been some support cases and issue reports where the root cause was a mismatch in account ID or region specified in the client requests. With multi-account being more widely adopted by our users, the account ID a request is made against is becoming an important part of the trace debug information.\r\n\r\n## Changes\r\n\r\nThis PR adds the AWS account ID / region name to the trace log outputs.\r\n\r\nFormat before:\r\n```\r\n2023-09-07T10:20:45.044  INFO --- [   asgi_gw_0] localstack.request.aws     : AWS s3.CreateBucket => 200; CreateBucketRequest({'ACL': None, ...\r\n```\r\n\r\nFormat after:\r\n```\r\n2023-09-07T10:21:39.171  INFO --- [   asgi_gw_0] localstack.request.aws     : AWS s3.CreateBucket => 200; 000000000000/us-east-1 - CreateBucketRequest({'ACL': None, ...\r\n```\r\n\r\nHappy for any suggestions regarding the message format. Also, we could consider hiding this behind a feature flag, or dumping the account ID only if it is different from the default account ID (`000000000000`), if we think that the output is becoming too spammy otherwise. No strong opinion from my side, we just need a mechanism to enable this output when debugging a user issue.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 712,
        "deletions": 17,
        "changed_files": 4,
        "created_at": "2023-09-06T17:56:45Z",
        "closed_at": "2023-09-08T15:46:46Z",
        "merged_at": "2023-09-08T15:46:46Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nAs reported in #9076, there is an issue in the way Moto and LocalStack handles HTTP Range requests for S3. AWS is apparently not following the RFC for range requests and is very, very forgiving, as shown by the added test.\r\n> An [int-range](https://www.rfc-editor.org/rfc/rfc9110.html#rule.int-range) is invalid if the [last-pos](https://www.rfc-editor.org/rfc/rfc9110.html#rule.int-range) value is present and less than the [first-pos](https://www.rfc-editor.org/rfc/rfc9110.html#rule.int-range).\r\n\r\nAs pointed out by @sjperkins who went through the RFC, the server can ignore the range header for some conditions:\r\n> A server that supports range requests MAY ignore or reject a [Range](https://www.rfc-editor.org/rfc/rfc9110.html#field.range) header field that contains an invalid [ranges-specifier](https://www.rfc-editor.org/rfc/rfc9110.html#rule.ranges-specifier) ([Section 14.1.1](https://www.rfc-editor.org/rfc/rfc9110.html#range.specifiers)), a [ranges-specifier](https://www.rfc-editor.org/rfc/rfc9110.html#rule.ranges-specifier) with more than two overlapping ranges, or a set of many small ranges that are not listed in ascending order,\r\n\r\nBasically, if the range request is badly formatted or invalid, S3 will just treat the request as a non-range request and will return the entire object with a `200` status code.\r\nOnly certain conditions will trigger an exception and `416`, mainly if the beginning of the request is above the end of the object and the request is a valid `Range` request (meaning it can be parsed), or if the request is a \"suffix\" request and it ends with 0.\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\nThis fixes the behaviour only for the v3 provider for now, I'll need to open a PR upstream in moto to fix the behaviour there to fix the default current provider. Edit: the PR upstream is already merged, so I'd like to have the v3 behaviour in line.\r\n\r\nI might remove all the `skip` for the new provider tests and selectively xfail the tests for the default provider in a follow up PR, to see the extent of the issue with the current provider, and try to have some tests such as this one valid for both.\r\n\r\nI've launched a run with this fix in the forced v3 S3 branch here, and it's green: https://app.circleci.com/pipelines/github/localstack/localstack/17924/workflows/3026ab82-afaa-4b31-9b45-fbd7afbab1bd\r\n\r\nThis also fix the behaviour for `UploadPartCopy` which has a very strict handling of the `CopySourceRange` parameter. \r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2023-09-06T14:21:55Z",
        "closed_at": "2023-09-07T06:47:47Z",
        "merged_at": "2023-09-07T06:47:47Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nSome improvements for the provisioning.\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\n* add optional parameter `delete_bucket` for the `cleanup_s3_bucket` helper\r\n* don't assume stack-name exists for `get_stack_outputs`\r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-09-06T11:51:21Z",
        "closed_at": "2023-09-06T15:53:32Z",
        "merged_at": "2023-09-06T15:53:32Z",
        "body": "## Motivation\r\n\r\nThe tests in `TestTerraform` have been a headache since forever.\r\nThey don't provide enough value given their flakiness, so we'll disable them and will look into some other strategy in the future. \r\n\r\n\r\n## Changes\r\n\r\n- Disables terraform tests",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 48,
        "deletions": 4,
        "changed_files": 3,
        "created_at": "2023-09-06T08:27:27Z",
        "closed_at": "2023-09-11T12:02:45Z",
        "merged_at": "2023-09-11T12:02:45Z",
        "body": "## Motivation\r\n\r\nWe often spend way too long in wait calls caused by botocore waiters.\r\n\r\nBotocore waiters are generated dynamically based on the spec in the waiters JSON files, e.g.:\r\n```json\r\n    \"StackCreateComplete\": {\r\n      \"delay\": 30,\r\n      \"operation\": \"DescribeStacks\",\r\n      \"maxAttempts\": 120,\r\n      \"description\": \"Wait until stack status is CREATE_COMPLETE.\",\r\n      \"acceptors\": [\r\n        {\r\n          \"argument\": \"Stacks[].StackStatus\",\r\n          \"expected\": \"CREATE_COMPLETE\",\r\n          \"matcher\": \"pathAll\",\r\n          \"state\": \"success\"\r\n        },\r\n        ...\r\n      ]\r\n    }\r\n```\r\n\r\nIt should be immediately obvious why this is a problem. Without specifying a custom value for the waiters it will take the values in this spec (here 30s delays between retries). For our internal usage especially, this is way too long to wait between status checks and it's unreasonable to always specify a custom waiter config on each wait call.\r\n\r\n## Changes\r\n\r\n- Patches botocore.waiter.Waiter.wait to merge in lower default values that will have precedence over those loaded from the spec.\r\n  - explicitly passed waiter configs will still have precedence over these defaults, e.g. `waiter.wait(StackName=\"something\", WaiterConfig={...})`\r\n\r\n\r\n## Example\r\n\r\n`test_update_with_previous_parameter_value`\r\n\r\nruntime with patch: ~4s\r\nruntime without patch: ~32s\r\n\r\n## Discussion\r\n\r\n- We might want to fine-tune the default as 1s can become quite noisy\r\n- Patching isn't as clean and we can try to somehow patch the json loader boto is using. I didn't see an immediate way to specify a custom loader for client creation, so I've gone with the patching of `Waiter.wait` for now.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 77,
        "deletions": 3,
        "changed_files": 3,
        "created_at": "2023-09-05T21:03:48Z",
        "closed_at": "2023-09-06T06:40:47Z",
        "merged_at": "2023-09-06T06:40:47Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nA regression was introduced in moto and part of localstack after #9044 when calling `PutSecretValue` on a secret with no value.\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\nThis adds a test for the fix in https://github.com/getmoto/moto/pull/6775\r\nEdit: well, apparently this has been fixed with https://github.com/getmoto/moto/pull/6771\r\nI don't know if we already want to do a moto bump, or we keep this fix inside LocalStack for now, this might be faster still. \r\n\r\nI've also put the fix in the patch for the moment until the next moto bump where we can remove it and use the one from upstream. This fix is kinda urgent, as the customer is downgrading moto in their LocalStack container in the meantime and it introduces incompatibilities, especially with `logs`. \r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 484,
        "deletions": 169,
        "changed_files": 13,
        "created_at": "2023-09-05T17:50:13Z",
        "closed_at": "2023-09-06T10:32:18Z",
        "merged_at": "2023-09-06T10:32:18Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nFixes the access to Context Object fields through json path values.\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\n- Fixes lexing of object context fields which prevented the accessing of the entire Context Object value\r\n- Fixes the values of several context object fields\r\n- Removes empty Map values from the context object when not in a map state\r\n- Adds relevant test for context object values accesses \r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 25,
        "deletions": 3,
        "changed_files": 4,
        "created_at": "2023-09-05T14:49:09Z",
        "closed_at": "2023-09-07T15:34:07Z",
        "merged_at": "2023-09-07T15:34:07Z",
        "body": "## Motivation\r\n\r\nThese uncontrolled boto-client level retries are an inherent source of unpredictable behavior, so let's see if disabling them causes any unexpected issues.\r\n\r\nRetries also cause unnecessary time waiting when we actually want to test a failure case.\r\n\r\n## Changes\r\n\r\n- disables retries for all clients created via our client factories in our test suite (CI)\r\n- adds config variable `DISABLE_BOTO_RETRIES`. Set `DISABLE_BOTO_RETRIES=1` to opt-tin of the new behavior.\r\n\r\n## Discussion\r\n\r\nMight also want to go through cases where we use SDKs in lambda functions etc. to disable any retries.",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 42,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2023-09-05T13:02:25Z",
        "closed_at": "2023-09-06T09:54:57Z",
        "merged_at": "2023-09-06T09:54:57Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nWe had some problem with simultaneous bucket operations. This PR adds a test for it. It should be fixed with #9044\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\n* Add list wrapper to avoid issue with concurrent modification of a dict while iterating\r\n* Add test for 10 simultaneous bucket creations with the requirement of us-east-1 bucket creation idempotency.\r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2023-09-05T10:14:18Z",
        "closed_at": "2023-09-06T14:21:45Z",
        "merged_at": "2023-09-06T14:21:45Z",
        "body": "## Motivation\r\n\r\nWe should have a configuration to change the test region. For cross-account tests, we should be able to configure the region in order to test cross-account tests within the same region.\r\n\r\nDiscovered during testing of the Lambda invocation loop rework https://github.com/localstack/localstack/pull/8970\r\n/cc @dfangl @dominikschubert \r\n\r\n## Changes\r\n\r\nMakes the AWS region name configurable in tests.\r\n\r\n\r\n",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 133,
        "deletions": 9,
        "changed_files": 8,
        "created_at": "2023-09-05T01:22:21Z",
        "closed_at": "2023-09-13T19:26:18Z",
        "merged_at": "2023-09-13T19:26:18Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nAs requested and reported in #8929, we were missing `Content-MD5` validation for `PutObject`, which was implemented in the `legacy` provider.\r\n\r\n`ChecksumAlgorithm` or `Content-MD5` allows to verify that the payload sent is properly received in the right shape.\r\nhttps://docs.aws.amazon.com/AmazonS3/latest/userguide/checking-object-integrity.html#checking-object-integrity-md5\r\n\r\nThis will only concern `PutObject` for now, but many operation have this parameter (I think around 21, some like `PutBucketAcl` for example). \r\n\r\nAs we had a look with @alexrashed a long, long time ago, the specs implement some kind of way to know which operations have to have some kind of required checksum.\r\n\r\nThe end goal would be to have a handler to manage the checksum verification for all operations, except the ones with a streaming body like `PutObject`, as those require special handling (reading the body only once). This is in the backlog and will be tackled in the future.\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\nImplemented different strategies depending on the provider.\r\nFor the default and streaming providers, I've done the same kind of logic as the checksum for the streaming provider, but using the `ETag` of the object, which represents the `hexdigest` of the md5 hash. The `Content-MD5` header is the base64 encoded digest of the hash, so it needs a bit of encoding/decoding to be able to compare them.\r\nI did not do the same logic as the regular checksum in the default provider, because if the request is encoded using `aws-chunk`, the request data is not equal to the object body, and should be decoded twice (once in LocalStack and once in moto), so I'm doing after moto already calculated the ETag.\r\n\r\nSame logic for the v3 provider, we first set the object to read the body only once, and we then verify the b64 encoded etag vs the provided `Content-MD5` value. \r\n\r\nRemoved the xfail for the related test and improved it a bit. \r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1131,
        "deletions": 1,
        "changed_files": 4,
        "created_at": "2023-09-05T00:09:13Z",
        "closed_at": "2023-09-06T14:40:50Z",
        "merged_at": "2023-09-06T14:40:50Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nWe've had a feature request to implement UpdateGatewayResponse, which was missing from the moto implementation.\r\nAfter a quick check to the moto implementation and some AWS validated tests, it showed that the current implementation was lacking all the default `GatewayResponse` from AWS. It was then quicker to implement it in our provider than to patch the whole moto implementation just to add an operation, especially since the moto implementation did not implement any validation. \r\n\r\nTo note: even though this is implemented, we don't currently use `GatewayResponse` in our actual invocation part of the code. It also shows that there are different kinds of exception raised internally, and this could help us restructure the code around those exceptions (looking at the response type documentation page).\r\n\r\nDocumentation about `GatewayResponse`:\r\nhttps://docs.aws.amazon.com/apigateway/latest/developerguide/api-gateway-gatewayResponse-definition.html\r\nhttps://docs.aws.amazon.com/apigateway/latest/developerguide/supported-gateway-response-types.html\r\nhttps://docs.aws.amazon.com/apigateway/latest/api/API_UpdateGatewayResponse.html\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\nMigrated the following operations from moto:\r\n- `PutGatewayResponse`\r\n- `GetGatewayResponse`\r\n- `GetGatewayResponses`\r\n- `DeleteGatewayResponse`\r\n\r\nImplemented the following:\r\n- `UpdateGatewayResponse`\r\n\r\nCreated 3 new AWS validated tests validating the behaviour of our operations. \r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1515,
        "deletions": 1085,
        "changed_files": 25,
        "created_at": "2023-09-04T21:40:40Z",
        "closed_at": "2023-09-06T07:57:48Z",
        "merged_at": "2023-09-06T07:57:48Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nFixes the parsing of Choice states for which the ordering of Variable and Comparison function statements is interrupted by Next declarations. It also simplifies the cleans up the grammar end evaluation logic of choice statements by better differentiating between variable comparisons and composite comparisons. It also adds the machine definition in InvalidDefinition exceptions to ease future parsing issues.\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\n- fixed parsing of choice_rule productions\r\n- added concept of variable and composite comparisons\r\n- several cleanups of tidy-ups around the choice rule evaluation components\r\n- added relevant choice state tests\r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 39,
        "deletions": 17,
        "changed_files": 4,
        "created_at": "2023-09-04T20:58:33Z",
        "closed_at": "2023-09-05T15:34:20Z",
        "merged_at": "2023-09-05T15:34:20Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nWe want to make errors from the CLI a bit more fancy and easily recognizable.\r\n\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\n\r\nIntroducing `CLIError`, extending `ClickException` with the following additions:\r\n- the text is red-colored;\r\n- a \u274c is prepended to the error message.\r\n\r\nThis PR also replaces all the old usage of `ClickException` with this new implementation.\r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 397,
        "deletions": 120,
        "changed_files": 11,
        "created_at": "2023-09-04T19:13:35Z",
        "closed_at": "2023-09-11T16:15:23Z",
        "merged_at": "2023-09-11T16:15:23Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\n\r\nWhen you want to override your backend response status codes, use API Gateway mapping templates or regular expressions to map the status codes. You can do this in proxy and non-proxy integrations with REST API.\r\n\r\nThis PR is mostly about \"selection pattern\" for error messages. Use a regular expression (regex) to customize an integration response based on the backend.\r\n\r\nFor a Lambda function, API Gateway matches the regex to the \"errorMessage\" header to return a status code. For example, to set a 400 response for any error that starts with \"Malformed\", set the method response status code to 400 and the Lambda error regex to Malformed.*.\r\n\r\nFor any unmatched errorMessage headers, API Gateway uses the default response.\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\n\r\n- Adds support for selection pattern for Lambdas based on the \"errorMessage\"\r\n- Introduces ResponseParametersResolver and removes (most of) legacy \"apply_response_parameters\". This make the integrations self-contained and the response is not manipulated outside the integration code.\r\n- Removes logic that checks if it's an AWS_PROXY integration for response templates.\r\n- Migrate tests to \"aws.verified\" and snapshots\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nhttps://github.com/localstack/localstack-terraform-samples/tree/master/apigateway-rest-lambda-selection-patterns\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 5,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2023-09-04T14:02:11Z",
        "closed_at": "2023-09-05T09:19:46Z",
        "merged_at": "2023-09-05T09:19:46Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nThe latest version of `botocore` contains a change in the spec (namely https://github.com/boto/botocore/commit/29dbcb9e1408c63ce9a3215447116789d6b4f528) which contains a backslash in the documentation of an operation of SESv2.\r\nAPI code generated based on this botocore version fail the linting check, because the generated docstring contains the <code>\\`\\\\`</code> (which violates [flake8's W605](https://www.flake8rules.com/rules/W605.html)).\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\nThis PR just adds the backslash to the list of characters which need to be escaped in the docstring to fix the linting errors.\r\n\r\n## Testing\r\nThe SESv2 API has been generated based on the change and it passes the linting.\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 6,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-09-04T10:01:13Z",
        "closed_at": "2023-09-04T11:09:26Z",
        "merged_at": "2023-09-04T11:09:25Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nFlaky test `TestLoanBrokerScenario.test_stepfunctions_input_recipient_list[step_function_input0-SUCCEEDED]` failing with `ExecutionDoesNotExist` while running `stepfunctions_client.get_execution_history`\r\n* indicating that the execution cannot be found yet, even though it was started before. \r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\n* added try-except block to catch `ExecutionDoesNotExist` in the helper `_await_on_execution_events`\r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 30,
        "deletions": 17,
        "changed_files": 3,
        "created_at": "2023-09-04T07:49:18Z",
        "closed_at": "2023-09-04T15:36:06Z",
        "merged_at": "2023-09-04T15:36:06Z",
        "body": "## Motivation\r\nAddresses https://github.com/localstack/localstack/issues/9054\r\n\r\nSpecifying no attributes lead to the following exception \r\n```\r\nE               if sub.get(attr) != attributes.get(attr):\r\nE           AttributeError: 'NoneType' object has no attribute 'get'\r\n```\r\n\r\n\r\n## Changes\r\n\r\n- Safety-check on the attributes before accessing keys.\r\n- Adds a test case verifying this behavior",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1705,
        "deletions": 0,
        "changed_files": 7,
        "created_at": "2023-09-03T12:04:20Z",
        "closed_at": "2023-09-05T18:00:47Z",
        "merged_at": "2023-09-05T18:00:47Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nAdds support for SNS optimised integration.\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\nAdded optimised service task resolver for SNS.\r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 246,
        "deletions": 55,
        "changed_files": 4,
        "created_at": "2023-09-02T19:40:42Z",
        "closed_at": "2023-09-04T18:48:52Z",
        "merged_at": "2023-09-04T18:48:52Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\n\r\nWhen creating multiple instances of localstack within tests, we need to randomize container ports. This includes the gateway port `4566`, but also the service port range. Specifically I need this in #9050 to make the `random_service_port_range` configurator work.\r\n\r\nUntil now, there was no good way of finding a random port range that is contiguous that could be mapped to the external service port range, this PR adds such a method to the `net` utils.\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\n\r\n* add `get_free_tcp_port_range` that finds a random contiguous port range of `num_ports`\r\n* made `PortRange` inclusive, i.e., it now correctly considers the port `5002` in range if the range is `PortRange(5000,5002)`\r\n* add global `dynamic_port_range` that marks the default dynamic port range 49152 to 65535. this is now used in `get_free_tcp_port` to also check+mark ports as reserved, making it a bit more robust\r\n* did some refactoring along the way\r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 680,
        "deletions": 78,
        "changed_files": 10,
        "created_at": "2023-09-01T21:50:42Z",
        "closed_at": "2023-09-04T20:29:36Z",
        "merged_at": "2023-09-04T20:29:36Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\n\r\nWith the new `Container` concept and the `ContainerFactory` fixture introduced in #8781, we now want an easy and re-usable way to configure containers. For instance, to test extensions, I always want to create a fresh localstack pro container with certain default configurations. The code doing the configuration should ideally be re-usable, have high-level concepts of the localstack container (such as \"mount the localstack volume directory\", \"set gateway listen correctly\"), while allowing fine-grained configuration of containers.\r\n\r\nIn #8994 I introduced a concept that is inspired by the [Functional Options Pattern](https://golang.cafe/blog/golang-functional-options-pattern.html) from go. I evolved this into a basic set of configurators that are typical for localstack.\r\n\r\nThis gives a very neat way of configuring the container together with the container factory, where you can see exactly what configurations are being added to the container:\r\n\r\n```python\r\n  container: Container = container_factory(\r\n      configurators=[\r\n          ContainerConfigurators.random_container_name,\r\n          ContainerConfigurators.random_gateway_port,\r\n          ContainerConfigurators.debug,\r\n          ContainerConfigurators.mount_docker_socket,\r\n          ContainerConfigurators.mount_localstack_volume(\"/tmp/localstack\"),\r\n      ]\r\n  )\r\n```\r\n\r\nFurthermore, I wanted a way to stream container logs when running container tests, so I added a fixture that can be used as follows:\r\n\r\n```python\r\ndef test(container_factory, stream_container_logs)\r\n    container: Container = container_factory(...)\r\n    with container.start() as running_container:\r\n        stream_container_logs(container)\r\n```\r\nThis creates a new background thread that will stream the logs of the container into a logger called `container.<container-name>`.\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\n\r\n* Add `ContainerConfigurator` concept\r\n* Make `Container` aware of these configurators\r\n* Add a default set of container configurators\r\n* Refactor the `configure_container` method used by the CLI to use these configurators\r\n* Add way to determine the gateway URL from a `Container`\r\n* Add some tests and a fixture to stream logs\r\n* Sneaked in a few changes to use `VolumeMappings.add` instead of `append` so we can maybe get rid of one of the functions\r\n\r\n## TODO\r\n\r\n- [x] Requires #9051\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1813,
        "deletions": 11,
        "changed_files": 17,
        "created_at": "2023-09-01T21:38:10Z",
        "closed_at": "2023-09-08T14:33:13Z",
        "merged_at": "2023-09-08T14:33:13Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\n\r\nWe want to simplify network configuration. A point of confusion is that `localhost.localstack.cloud` is publically registered, and resolves to `127.0.0.1`. When communicating between docker containers, this is an issue - trying to connect to e.g. an opensearch domain with url `*.localhost.localstack.cloud` returned by LocalStack will attempt to connect to the \"application\" container, rather than LocalStack.\r\n\r\nRecently we have upgraded the DNS server provided by LocalStack Pro to dynamically resolve the IP address of the LocalStack container based on request subnet, but this functionality was only available in Pro.\r\n\r\nWith this PR we bring the DNS server from Pro to LocalStack community. This change brings along with it increased test coverage. \r\n\r\n\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\n\r\n* Move the DNS server to community\r\n* Add bootstrap tests covering the DNS server behaviour\r\n* Start the DNS server regardless of whether the host port can be bound\r\n* If port 53 (or `DNS_PORT`) can be bound on the host, publish the docker port using the CLI\r\n* Move the DNS server module from `localstack.services.dns_server` to `localstack.dns.server` to group core resources (e.g. `http`, `dns`, etc.) at the top of the tree\r\n* Remove broken attempts to configure the DNS of the host\r\n\r\n\r\n## Testing\r\n\r\n* Start LocalStack: `DNS_ADDRESS=127.0.0.1 localstack start`\r\n* If port 53/udp is available on the host, then run `dig @127.0.0.1 localhost.localstack.cloud` and a valid response is returned\r\n* Start a container in the same docker network/subnet as the LocalStack container, then run from that container `dig @<ip of localstack container> localhost.localstack.cloud` and the IP address of the container should be returned\r\n* Remove broken attempts to configure the host DNS\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [x] Get -ext PR ready to merge\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 51,
        "deletions": 35,
        "changed_files": 6,
        "created_at": "2023-09-01T20:40:12Z",
        "closed_at": "2023-09-02T22:49:17Z",
        "merged_at": "2023-09-02T22:49:17Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\n\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\n## Motivation\n\nThe container fixtures created in ... were:\n\n* only usable in the `bootstrap` subdir, but we need them in the `cli` subdir (amongst others)\n* are too widely scoped (session scoped `ContainerFactory`)\n* uses a confusing fixture order (cleanups)\n* did not store the running container, so automatic cleanup was not possible\n\n\n<!-- What notable changes does this PR make? -->\n## Changes\n\nFix the items above\n\n<!-- The following sections are optional, but can be useful! \n\n## Testing\n\nDescription of how to test the changes\n\n## TODO\n\nWhat's left to do:\n\n- [ ] ...\n- [ ] ...\n\n-->\n\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 137,
        "deletions": 132,
        "changed_files": 4,
        "created_at": "2023-09-01T15:29:49Z",
        "closed_at": "2023-09-01T17:46:21Z",
        "merged_at": "2023-09-01T17:46:21Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\n\r\nTo be able to re-use the container fixtures introduced in #8781 in localstack-ext, they need to be in the localstack source folder.\r\nI totally missed this during the review, sorry!\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\n\r\n* move containerfactory and fixtures into `localstack/testing/pytest`\r\n* import them as plugins in `tests/bootstrap/conftest.py`\r\n\r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 63,
        "deletions": 15,
        "changed_files": 4,
        "created_at": "2023-09-01T12:09:51Z",
        "closed_at": "2023-09-12T16:02:03Z",
        "merged_at": "2023-09-12T16:02:03Z",
        "body": "## Motivation\r\nIn the future we want to experiment more with using only a subset of our integration tests as a sort of acceptance test suite.\r\nSince we want to start early to get a feeling for how well this will work and what we need to look for in potential acceptance test candidates, we're now already starting with a very small subset of tests that are only executed in parallel to the current CI test jobs.\r\n\r\n\r\n## Changes\r\n\r\n- introduce a new pytest marker `acceptance_test`\r\n  - initially this is exposed via our markers as `@markers.acceptance_tests_beta` to communicate more clearly that these tests aren't yet used as the only acceptance tests. (to avoid confusion)\r\n- creates a job in CircleCI to execute all tests \r\n  - tests are currently only executed on the default architecture (amd64) \r\n  - as discussed previously, the tests form part of the gate for pushing the built images\r\n  - the selected tests marked by `acceptance_test` are now being executed more than once during the total CI run since we don't deselect the marker yet in our \"normal\" test suite.\r\n- mark one test as an acceptance test, so we have at least something already in there :sweat_smile: \r\n  - in the following week we'll constantly add more of these markers where we deem them to be appropriate\r\n- currently only executes tests in `tests/aws/`\r\n\r\n\r\n",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 70,
        "deletions": 92,
        "changed_files": 9,
        "created_at": "2023-09-01T10:17:55Z",
        "closed_at": "2023-09-01T23:29:24Z",
        "merged_at": "2023-09-01T23:29:24Z",
        "body": "## Motivation\r\n\r\nBring in the latest Moto changes.\r\n\r\n## Changes\r\n\r\nStop using the `clean_key_name` that was removed in https://github.com/getmoto/moto/pull/6602/",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 38,
        "deletions": 890,
        "changed_files": 8,
        "created_at": "2023-09-01T09:05:46Z",
        "closed_at": "2023-09-19T09:56:53Z",
        "merged_at": "2023-09-19T09:56:53Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nNow that the S3 v3 provider is ready, I'd like to replace the CircleCI job for the S3 stream provider to the new native.\r\nWe also should remove the stream provider (it didn't work with persistence anyway, so no backward compatibility issue), we can make `PROVIDER_OVERRIDE_S3=stream` load the new provider as well. \r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\nReplacing the job and make it necessary to pass for the build to be fully green (it wasn't a necessary step for pushing before, to avoid flakiness for such a small subset). \r\n\r\nRemoving the `stream` provider patching and make it point to the `v3` provider.\r\n\r\nAlso a small fix regarding a refactoring in the stream provider for the `AwsChunkedDecoder` which hadn't been ported to the v3 provider (and no tests to show it \ud83d\ude05)\r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 11,
        "deletions": 5,
        "changed_files": 3,
        "created_at": "2023-08-31T22:50:38Z",
        "closed_at": "2023-09-04T08:38:53Z",
        "merged_at": "2023-09-04T08:38:53Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nA user reported a stuck Terraform deployment with an API GW REST API: Terraform would loop and never finish while trying to update a stage when `xray_tracing_enabled` is set. \r\n\r\nWhen setting `TF_LOG=trace`, we see there's an issue when unmarshalling the response, because we were returning a string `\"true\"` instead of a boolean `True`.\r\n```\r\nDEBUG: Unmarshal Response apigateway/UpdateStage failed, attempt 9/25, error SerializationError: failed decoding JSON RPC response\r\n```\r\n\r\nAdd a case to a snapshot test to validate this behaviour as well. \r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\n\r\nAdded a check if the path is `/tracingEnabled` to cast the value into a boolean.\r\nAlso used `copy.deepcopy` to the input, because we were modifying it in place, and the logging would show the modified input instead of what we really received. \r\n\r\n\r\n\r\n## Testing\r\n\r\nI could reproduce the issue with the following stage resource:\r\n```hcl\r\nresource \"aws_api_gateway_rest_api\" \"api\" {\r\n  name           = \"rest\"\r\n  api_key_source = \"HEADER\"\r\n}\r\n\r\nresource \"aws_api_gateway_deployment\" \"deployment\" {\r\n  rest_api_id = aws_api_gateway_rest_api.api.id\r\n\r\n  lifecycle {\r\n    create_before_destroy = true\r\n  }\r\n}\r\n\r\nresource \"aws_api_gateway_stage\" \"stage\" {\r\n  stage_name    = \"dev\"\r\n  rest_api_id   = aws_api_gateway_rest_api.api.id\r\n  deployment_id = aws_api_gateway_deployment.deployment.id\r\n  depends_on    = [aws_cloudwatch_log_group.test]\r\n  variables = {\r\n    \"TEST_ENV\" = \"local\"\r\n  }\r\n  xray_tracing_enabled = \"true\"\r\n\r\n  access_log_settings {\r\n    destination_arn = aws_cloudwatch_log_group.test.arn\r\n    format = \"$context.identity.sourceIp $context.identity.caller $context.identity.user [$context.requestTime] \\\"$context.httpMethod $context.resourcePath $context.protocol\\\" $context.status $context.responseLength $context.requestId\"\r\n  }\r\n}\r\n\r\nresource \"aws_cloudwatch_log_group\" \"test\" {\r\n  name = \"Yada\"\r\n\r\n  tags = {\r\n    Environment = \"production\"\r\n    Application = \"serviceA\"\r\n  }\r\n}\r\n\r\n```\r\n\r\n<!-- The following sections are optional, but can be useful! \r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 20,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2023-08-31T21:17:58Z",
        "closed_at": "2023-09-01T06:45:12Z",
        "merged_at": "2023-09-01T06:45:12Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nThis PR addresses that the DDB operations [DescribeTimeToLive](https://docs.aws.amazon.com/cli/latest/reference/dynamodb/describe-time-to-live.html) and [UpdateTimeToLive](https://docs.aws.amazon.com/cli/latest/reference/dynamodb/update-time-to-live.html) both had no checks in regards to the existence of the table, as highlighted in #9030. \r\n\r\nThe `ResourceNotFoundException` message might look peculiar, but this is due to parity:\r\n```\r\n$ aws dynamodb describe-time-to-live --table-name test\r\n\r\nAn error occurred (ResourceNotFoundException) when calling the DescribeTimeToLive operation: Requested resource not found: Table: test not found\r\n\r\n$ aws dynamodb update-time-to-live --table-name test --time-to-live-specification Enabled=true,AttributeName=ttl\r\n\r\nAn error occurred (ResourceNotFoundException) when calling the UpdateTimeToLive operation: Requested resource not found: Table: test not found\r\n```\r\nI would've liked to prove this via a snapshot test, but the refactoring was out of scope for this simple patch.\r\n\r\nfixes: #9030 \r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\n- add resource checks for both operations\r\n- add a simple check to the test\r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 9,
        "deletions": 7,
        "changed_files": 1,
        "created_at": "2023-08-31T20:26:19Z",
        "closed_at": "2023-09-05T10:45:00Z",
        "merged_at": "2023-09-05T10:45:00Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\n\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\n## Motivation\n\nThe following message appears in build logs when the relevant layer is not cached:\n\n```\n#9 7.850 Processing triggers for libc-bin (2.31-13+deb11u6) ...\n#9 8.320\n#9 8.320 ================================================================================\n#9 8.320 \u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\n#9 8.320 ================================================================================\n#9 8.320\n#9 8.320                            SCRIPT DEPRECATION WARNING\n#9 8.320\n#9 8.320\n#9 8.320   This script, located at https://deb.nodesource.com/setup_X, used to\n#9 8.320   install Node.js is deprecated now and will eventually be made inactive.\n#9 8.320\n#9 8.320   Please visit the NodeSource distributions Github and follow the\n#9 8.320   instructions to migrate your repo.\n#9 8.320   https://github.com/nodesource/distributions\n#9 8.320\n#9 8.320   The NodeSource Node.js Linux distributions GitHub repository contains\n#9 8.320   information about which versions of Node.js and which Linux distributions\n#9 8.320   are supported and how to install it.\n#9 8.320   https://github.com/nodesource/distributions\n#9 8.320\n#9 8.320\n#9 8.320                           SCRIPT DEPRECATION WARNING\n#9 8.320\n#9 8.320 ================================================================================\n#9 8.321 \u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\u2593\n#9 8.321 ================================================================================\n#9 8.321\n#9 8.321 TO AVOID THIS WAIT MIGRATE THE SCRIPT\n#9 8.321 Continuing in 60 seconds (press Ctrl-C to abort) ...\n```\n\n\n\n\n<!-- What notable changes does this PR make? -->\n## Changes\n\nThis PR updates the docker build step to install nodejs via the new method.\n\n\n<!-- The following sections are optional, but can be useful! \n\n## Testing\n\nDescription of how to test the changes\n\n## TODO\n\nWhat's left to do:\n\n- [ ] ...\n- [ ] ...\n\n-->\n\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 41,
        "deletions": 45,
        "changed_files": 6,
        "created_at": "2023-08-31T19:20:28Z",
        "closed_at": "2023-09-01T12:49:22Z",
        "merged_at": "2023-09-01T12:49:22Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nAs reported in #9032, some S3 operations (the one using the `PUT` http method) would return an empty XML body when the S3 docs specifies that the body should be empty. After looking at the specs, only `CopyObject` and `CopyObjectPart` would return a body. Luckily, those operations implement a field specifying that they return a body, the `payload` one.\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\nRemoved the pre-signed handler deleting the response body, since this behaviour should have been for every `PUT` request except some, and it was actually fixing a symptom instead of the cause.\r\n\r\nImplemented a check in the serializer for not serializing a body if the conditions were not set (if it's a PUT request without the `payload` field). \r\n\r\nAdded 2 cases in a test checking the raw returned body without boto parsing, one for a known PUT operation which should return a body (`CopyObject`) and one for `UploadPart`, which should not return a body. \r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 81,
        "deletions": 51,
        "changed_files": 5,
        "created_at": "2023-08-31T16:29:13Z",
        "closed_at": "2023-09-04T11:31:16Z",
        "merged_at": "2023-09-04T11:31:16Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nWorking with the Cfn and `opensearch` revealed a few shortcomings the past days. Already fixed some issues in the old provider, but it might be time to move the new `ResourceProvider` now \ud83d\ude42 \r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\n* set the `opensearch` ResourceProvider as default for Cfn\r\n* added logic to the `ResourceProvider` in a pairing session with @dominikschubert \r\n* enhanced test case a little (include `Tags`)\r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 0,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2023-08-31T15:28:12Z",
        "closed_at": "2023-09-01T10:35:31Z",
        "merged_at": "2023-09-01T10:35:31Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\n\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\n## Motivation\n\nWe should not be running the container in privileged mode if we don't need to.\n\n\n<!-- What notable changes does this PR make? -->\n## Changes\n\nDo not run the LocalStack container in privileged mode (from the CLI at least).\n\n<!-- The following sections are optional, but can be useful! \n\n## Testing\n\nDescription of how to test the changes\n\n## TODO\n\nWhat's left to do:\n\n- [ ] ...\n- [ ] ...\n\n-->\n\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 5,
        "deletions": 0,
        "changed_files": 3,
        "created_at": "2023-08-30T17:57:23Z",
        "closed_at": "2023-08-31T07:10:52Z",
        "merged_at": "2023-08-31T07:10:52Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nFollow-up for https://github.com/localstack/localstack/pull/9027. \r\nThe `DomainEndpoint` seems to be a commonly used [return value for Opensearch Domain](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-opensearchservice-domain.html#aws-resource-opensearchservice-domain-return-values).\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\nAdded support for output of `DomainEndpoint`.\r\n\r\n\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 168,
        "deletions": 24,
        "changed_files": 4,
        "created_at": "2023-08-30T13:08:20Z",
        "closed_at": "2023-08-30T14:23:11Z",
        "merged_at": "2023-08-30T14:23:11Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nWorking on scenario tests revealed that opensearch currently requires the `DomainName` attribute, which shouldn't necessarily be the case. \r\nThe [docs](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-opensearchservice-domain.html) suggest that the parameter is \"conditional\" required and state:\r\n\r\n> The name must have a minimum length of 3 and a maximum length of 28. If you don't specify a name, AWS CloudFormation generates a unique physical ID and uses that ID for the domain name. \r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\n* adapted CFN model and genenerate a `DomainName` if none is set\r\n* aws-validated test\r\n\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 57,
        "deletions": 65,
        "changed_files": 6,
        "created_at": "2023-08-30T13:04:01Z",
        "closed_at": "2023-08-30T15:51:00Z",
        "merged_at": "2023-08-30T15:51:00Z",
        "body": "## Motivation\r\nThis PR addresses #8793, which describes an issue with the handling of the `Accept-Encoding` header when communicating with OpenSearch clusters with enabled http compression (as enabled statically with #8628).\r\nThis bug is actually caused by our HTTP client used in the Proxy infrastructure used to proxy requests from the client via LocalStack to the started OpenSearch server. This HTTP client _always_ adds `Accept-Encoding: gzip, deflate` to the proxied HTTP request if no `Accept-Encoding` is set in the originating request.\r\n\r\nWith enabling the compression support for OpenSearch (i.e. OpenSearch will compress the responses using GZIP `Content-Encoding` in responses if the client sends `gzip` in the `Accept-Encoding` request header), this issue surfaced since every request to OpenSearch via LocalStack (which is the default) without the `Accept-Encoding` header (which is the default f.e. for a plain `curl` request).\r\n\r\nIt turns out that sending HTTP requests without any `Accept-Encoding` header is not possible with `requests` because it uses `urllib3` under the hood, which in turn uses Python's `http.client` standard lib:\r\n- `urllib3` automatically adds `` if the `Accept-Encoding` header is not set at all. See [`urllib3.util.request.ACCEPT_ENCODING`](https://github.com/urllib3/urllib3/blob/23799f263998ac138d569ed92635df8b09278ed0/src/urllib3/util/request.py#L21).\r\n  - This could be circumvented by setting `Accept-Encoding` explicitly to `None`\r\n- BUT: One layer below - Python's `http.client` - sets the `Accept-Encoding: identity` in case it's not set or `None`.\r\n  - However, as discussed in https://github.com/psf/requests/issues/2234, this behavior should be compliant to the specs / RFCs.\r\n\r\nThis means it's not really possible to identically relay a request which does not contain the `Accept-Encoding` header at all.\r\n\r\n## Changes\r\n- This PR explicitly sets the `Accept-Encoding` header to `identity` in case it's not set or `None`.\r\n  - An alternative would have been just to circumvent the behavior of `urllib3` by setting the `Accept-Encoding` header to `None`, but I wanted to make this behavior as explicit as possible (because it was quite a pain to get to the root of this weird behavior).\r\n- This PR also merges the `SimpleHttpClient` with the `SimpleStreamingHttpClient`. The latter was introduced with #8148 in addition to the `SimpleHttpClient` where it should actually just have been an extension of the default (but that was understandable at the time in order to prevent too wide-ranging changes).\r\n  - This is why I classified this change as \"minor\".\r\n\r\n## Testing\r\nTesting this in Python is actually quite hard (since the test explicitly has to send a request without any `Accept-Encoding` header whatsoever). I actually had to directly use the `HTTPConnection` class of Python's std lib.\r\n\r\nFixes #8793.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 17,
        "deletions": 17,
        "changed_files": 1,
        "created_at": "2023-08-30T11:40:27Z",
        "closed_at": "2023-08-31T08:28:38Z",
        "merged_at": "2023-08-31T08:28:38Z",
        "body": "Fixes Issue #8916 \r\n\r\nLabel : https://github.com/localstack/localstack/labels/semver%3A%20patch\r\n**Enhancements:**\r\n- Adds support for filtering availability zone on zone-id and minor refactoring.\r\n\r\n**Changes:**\r\n- Use `moto.utilities.utils.filter_resources()` to filter zones based on multiple attributes, such as zone-name or zone-id.\r\n\r\n### Before\r\n```BASH\r\naws --endpoint http://localhost:4566 ec2 describe-availability-zones --zone-ids euw1-az2\r\n{\r\n    \"AvailabilityZones\": [\r\n        {\r\n            \"State\": \"available\",\r\n            \"Messages\": [],\r\n            \"RegionName\": \"eu-west-1\",\r\n            \"ZoneName\": \"eu-west-1a\",\r\n            \"ZoneId\": \"euw1-az3\",\r\n            \"ZoneType\": \"availability-zone\"\r\n        },\r\n        {\r\n            \"State\": \"available\",\r\n            \"Messages\": [],\r\n            \"RegionName\": \"eu-west-1\",\r\n            \"ZoneName\": \"eu-west-1b\",\r\n            \"ZoneId\": \"euw1-az1\",\r\n            \"ZoneType\": \"availability-zone\"\r\n        },\r\n        {\r\n            \"State\": \"available\",\r\n            \"Messages\": [],\r\n            \"RegionName\": \"eu-west-1\",\r\n            \"ZoneName\": \"eu-west-1c\",\r\n            \"ZoneId\": \"euw1-az2\",\r\n            \"ZoneType\": \"availability-zone\"\r\n        }\r\n    ]\r\n}\r\n```\r\n\r\n```BASH\r\n~ \u00bb awslocal ec2 describe-availability-zones --zone-name us-east-1f --zone-id use1-az5\r\n{\r\n    \"AvailabilityZones\": [\r\n        {\r\n            \"State\": \"available\",\r\n            \"Messages\": [],\r\n            \"RegionName\": \"us-east-1\",\r\n            \"ZoneName\": \"us-east-1f\",\r\n            \"ZoneId\": \"use1-az5\"\r\n        }\r\n    ]\r\n}\r\n~ \u00bb awslocal ec2 describe-availability-zones --zone-name us-east-1f\r\n{\r\n    \"AvailabilityZones\": [\r\n        {\r\n            \"State\": \"available\",\r\n            \"Messages\": [],\r\n            \"RegionName\": \"us-east-1\",\r\n            \"ZoneName\": \"us-east-1f\",\r\n            \"ZoneId\": \"use1-az5\"\r\n        }\r\n    ]\r\n}\r\n~ \u00bb awslocal ec2 describe-availability-zones --zone-id use1-az5\r\n{\r\n    \"AvailabilityZones\": [\r\n        {\r\n            \"State\": \"available\",\r\n            \"Messages\": [],\r\n            \"RegionName\": \"us-east-1\",\r\n            \"ZoneName\": \"us-east-1f\",\r\n            \"ZoneId\": \"use1-az5\"\r\n        }\r\n    ]\r\n}\r\n~ \u00bb awslocal ec2 describe-availability-zones --zone-id use1-az55\r\n{\r\n    \"AvailabilityZones\": []\r\n}\r\n~ \u00bb awslocal ec2 describe-availability-zones --zone-name us-east-1ff\r\n{\r\n    \"AvailabilityZones\": []\r\n}\r\n~ \u00bb awslocal ec2 describe-availability-zones --zone-name us-east                                                                                                    \r\n{\r\n    \"AvailabilityZones\": []\r\n}\r\n~ \u00bb awslocal ec2 describe-availability-zones --zone-name us-east-1e --zone-id use1-a                                                                                      \r\n{\r\n    \"AvailabilityZones\": []\r\n}\r\n~ \u00bb awslocal ec2 describe-availability-zones --zone-ids '[\"use1-az4\",\"use1-az5\"]'\r\n{\r\n    \"AvailabilityZones\": [\r\n        {\r\n            \"State\": \"available\",\r\n            \"Messages\": [],\r\n            \"RegionName\": \"us-east-1\",\r\n            \"ZoneName\": \"us-east-1d\",\r\n            \"ZoneId\": \"use1-az4\"\r\n        },\r\n        {\r\n            \"State\": \"available\",\r\n            \"Messages\": [],\r\n            \"RegionName\": \"us-east-1\",\r\n            \"ZoneName\": \"us-east-1f\",\r\n            \"ZoneId\": \"use1-az5\"\r\n        }\r\n    ]\r\n}\r\nawslocal ec2 describe-availability-zones --zone-names '[\"us-east-1e\",\"us-east-1f\"]'\r\n{\r\n    \"AvailabilityZones\": [\r\n        {\r\n            \"State\": \"available\",\r\n            \"Messages\": [],\r\n            \"RegionName\": \"us-east-1\",\r\n            \"ZoneName\": \"us-east-1e\",\r\n            \"ZoneId\": \"use1-az3\"\r\n        },\r\n        {\r\n            \"State\": \"available\",\r\n            \"Messages\": [],\r\n            \"RegionName\": \"us-east-1\",\r\n            \"ZoneName\": \"us-east-1f\",\r\n            \"ZoneId\": \"use1-az5\"\r\n        }\r\n    ]\r\n}\r\nawslocal ec2 describe-availability-zones --zone-ids '[\"use1-az5\",\"use1-az3\"]' --zone-names '[\"us-east-1e\",\"us-east-1f\"]'\r\n{\r\n    \"AvailabilityZones\": [\r\n        {\r\n            \"State\": \"available\",\r\n            \"Messages\": [],\r\n            \"RegionName\": \"us-east-1\",\r\n            \"ZoneName\": \"us-east-1e\",\r\n            \"ZoneId\": \"use1-az3\"\r\n        },\r\n        {\r\n            \"State\": \"available\",\r\n            \"Messages\": [],\r\n            \"RegionName\": \"us-east-1\",\r\n            \"ZoneName\": \"us-east-1f\",\r\n            \"ZoneId\": \"use1-az5\"\r\n        }\r\n    ]\r\n}\r\n```\r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 5
    },
    {
        "merged": true,
        "additions": 288,
        "deletions": 196,
        "changed_files": 34,
        "created_at": "2023-08-30T11:01:24Z",
        "closed_at": "2023-09-14T11:53:18Z",
        "merged_at": "2023-09-14T11:53:18Z",
        "body": "## Motivation\r\n\r\nWhen using values other than `000000000000` for account ID or `us-east-1` for region, EventBridge would still create the consequent resources in this accounts and region.\r\n\r\n## Changes\r\n\r\n- Use the correct account ID and region from the request context\r\n- Remove uses of `get_account_id()` and `get_region()` helpers\r\n- Make explicit use of test account IDs and region names in consturction of ARNs and queue URLs",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 8,
        "deletions": 3,
        "changed_files": 1,
        "created_at": "2023-08-30T10:41:34Z",
        "closed_at": "2023-08-30T12:24:56Z",
        "merged_at": "2023-08-30T12:24:56Z",
        "body": "## Motivation\r\nA recent PR (https://github.com/localstack/localstack/pull/9011) introduced a regression for the `AWS::IAM::InstanceProfile` resource type.\r\n\r\n## Changes\r\n\r\n- fixes the `create` handler for `AWS::IAM::InstanceProfile` to return a success state and to consider the path as optional\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2023-08-30T10:19:07Z",
        "closed_at": "2023-08-30T14:44:44Z",
        "merged_at": "2023-08-30T14:44:44Z",
        "body": "## Motivation\r\nThis PR fixes a bug introduced with #8685.\r\nThe new `PythonPackageInstaller` detects the `venv` based on `constants.LOCALSTACK_ROOT_FOLDER`.\r\nUnfortunately, this doesn't work if `localstack-core` is installed in the venv, so `LOCALSTACK_ROOT_FOLDER` is within the venv, resulting in a wrong venv dir detection.\r\nThis can easily be reproduced with the following `Dockerfile`:\r\n```\r\nFROM localstack/localstack-pro:latest\r\nRUN export DEBUG=1; source .venv/bin/activate && python -m localstack.cli.lpm install vosk\r\n```\r\n\r\nIt results in the following error:\r\n```\r\n0.623 installing... Vosk\r\n0.624 2023-08-30T10:07:08.063 DEBUG --- [d-1 (worker)] localstack.packages.api    : Starting installation of vosk...\r\n0.624 2023-08-30T10:07:08.064  INFO --- [d-1 (worker)] localstack.packages.core   : creating virtual environment at /usr/lib/localstack/python-packages\r\n3.238 2023-08-30T10:07:10.678  INFO --- [d-1 (worker)] localstack.packages.core   : adding localstack venv path /usr/lib/localstack/python-packages\r\n3.240 error installing Vosk: Installation of vosk failed.\r\n3.243 2023-08-30T10:07:10.681 DEBUG --- [  MainThread] __main__                   : one or more package installations failed.\r\n3.243 Traceback (most recent call last):\r\n3.243   File \"/opt/code/localstack/.venv/lib/python3.10/site-packages/localstack/packages/api.py\", line 90, in install\r\n3.243     self._prepare_installation(target)\r\n3.243   File \"/opt/code/localstack/.venv/lib/python3.10/site-packages/localstack/packages/core.py\", line 283, in _prepare_installation\r\n3.243     venv.add_pth(\"localstack-venv\", LOCALSTACK_VENV)\r\n3.243   File \"/opt/code/localstack/.venv/lib/python3.10/site-packages/localstack/utils/venv.py\", line 92, in add_pth\r\n3.243     path = path.site_dir\r\n3.243   File \"/usr/local/lib/python3.10/functools.py\", line 981, in __get__\r\n3.243     val = self.func(instance)\r\n3.243   File \"/opt/code/localstack/.venv/lib/python3.10/site-packages/localstack/utils/venv.py\", line 61, in site_dir\r\n3.243     raise FileNotFoundError(f\"expected venv directory to exist at {venv}\")\r\n3.243 FileNotFoundError: expected venv directory to exist at /opt/code/localstack/.venv/lib/python3.10/site-packages/.venv\r\n3.243 \r\n3.243 The above exception was the direct cause of the following exception:\r\n3.243 \r\n3.243 Traceback (most recent call last):\r\n3.243   File \"/opt/code/localstack/.venv/lib/python3.10/site-packages/localstack/cli/lpm.py\", line 102, in install\r\n3.243     pool.starmap(\r\n3.243   File \"/usr/local/lib/python3.10/multiprocessing/pool.py\", line 375, in starmap\r\n3.243     return self._map_async(func, iterable, starmapstar, chunksize).get()\r\n3.243   File \"/usr/local/lib/python3.10/multiprocessing/pool.py\", line 774, in get\r\n3.243     raise self._value\r\n3.243   File \"/usr/local/lib/python3.10/multiprocessing/pool.py\", line 125, in worker\r\n3.243     result = (True, func(*args, **kwds))\r\n3.243   File \"/usr/local/lib/python3.10/multiprocessing/pool.py\", line 51, in starmapstar\r\n3.243     return list(itertools.starmap(args[0], args[1]))\r\n3.243   File \"/opt/code/localstack/.venv/lib/python3.10/site-packages/localstack/cli/lpm.py\", line 50, in _do_install_package\r\n3.243     raise e\r\n3.243   File \"/opt/code/localstack/.venv/lib/python3.10/site-packages/localstack/cli/lpm.py\", line 46, in _do_install_package\r\n3.243     package.install(version=version, target=target)\r\n3.243   File \"/opt/code/localstack/.venv/lib/python3.10/site-packages/localstack/packages/api.py\", line 210, in install\r\n3.243     self.get_installer(version).install(target)\r\n3.243   File \"/opt/code/localstack/.venv/lib/python3.10/site-packages/localstack/packages/api.py\", line 102, in install\r\n3.243     raise PackageException(f\"Installation of {self.name} failed.\") from e\r\n3.243 localstack.packages.api.PackageException: Installation of vosk failed.\r\n3.243 Error: one or more package installations failed.\r\n```\r\n\r\n## Changes\r\nThis PR switches to `LOCALSTACK_VENV_FOLDER` to detect the venv.\r\n\r\n## Testing\r\nUnfortunately, this issue is somewhat hard to reproduce. This is why I recreated this fix in the aforementioned Dockerfile:\r\n```\r\nFROM localstack/localstack-pro:latest\r\nRUN sed -i \"s/LOCALSTACK_VENV =.*/LOCALSTACK_VENV = VirtualEnvironment(constants.LOCALSTACK_VENV_FOLDER)/g\" .venv/lib/python3.10/site-packages/localstack/packages/core.py\r\nRUN export DEBUG=1; source .venv/bin/activate && python -m localstack.cli.lpm install vosk\r\n```\r\nWhich builds correctly.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 154,
        "deletions": 6,
        "changed_files": 6,
        "created_at": "2023-08-30T08:07:53Z",
        "closed_at": "2023-08-30T13:33:50Z",
        "merged_at": "2023-08-30T13:33:50Z",
        "body": "## Motivation\r\nThis PR fixes an issue where Lambda layer compatibility check failed for the `python3.11` runtime:\r\n```\r\n$ awslocal lambda publish-layer-version --layer-name layer1 --zip-file fileb://.serverless/MyLayer.zip --compatible-runtimes python3.11\r\n\r\nAn error occurred (ValidationException) when calling the PublishLayerVersion operation: 1 validation error detected: Value '[python3.11]' at 'compatibleRuntimes' failed to satisfy constraint: Member must satisfy enum value set: [java17, provided, nodejs16.x, nodejs14.x, ruby2.7, python3.10, java11, python3.11, dotnet6, go1.x, nodejs18.x, provided.al2, java8, java8.al2, ruby3.2, python3.7, python3.8, python3.9]\r\n```\r\n\r\n## Changes\r\nThis PR adds `python3.11` to the list of supported runtimes for Lambda layer validation.\r\n\r\n## Testing\r\nA snapshot verified test creating a Lambda layer with all possible validations.\r\nHowever, this test does not save us from the same mistake happening again, because it uses the list of `RUNTIMES` which is used by the validation.\r\nInitially, I wanted to use the keys of the `IMAGE_MAPPING` dict (which is described as the dict where newly supported runtimes should be added), but this mapping is contained in `lambda_models` (even though I think it's not a model).\r\nWe could move this mapping from there and directly use it for the runtime validation, then this issue could not happen in the future again. Happy for any feedback!",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 11,
        "deletions": 6,
        "changed_files": 1,
        "created_at": "2023-08-30T07:12:17Z",
        "closed_at": "2023-08-31T06:35:59Z",
        "merged_at": "2023-08-31T06:35:59Z",
        "body": "## Motivation\r\n\r\nThe usage of the `deploy_cfn_template` fixture is a major cause of temporary resource leaks.\r\nNot waiting for the deletion to be completed causes the delete operations to bleed into the next test exexution(s).\r\n\r\n## Changes\r\n\r\nAfter the yield, `deploy_cfn_template` now properly waits for the stack deletion before moving on to the next test case.\r\n\r\n## Warnings\r\n\r\nThis will increase test execution time. Part of the intention of this PR is to find out by how much.\r\n\r\nUpdate: Seems this didn't introduce as much delay as initially thought:\r\n\r\n![image](https://github.com/localstack/localstack/assets/620817/a9ced696-94ba-420a-b5b9-9534db725d86)\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 0,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2023-08-30T07:00:16Z",
        "closed_at": "2023-08-31T10:23:00Z",
        "merged_at": "2023-08-31T10:23:00Z",
        "body": "## Motivation\r\nHoping this will be an easy fix for https://github.com/localstack/localstack/issues/8938 by adding these two missing `__init__.py` files\r\n\r\n## Changes\r\n-  adds missing `__init__.py` files for proper module detection\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 74,
        "deletions": 21,
        "changed_files": 5,
        "created_at": "2023-08-29T17:33:28Z",
        "closed_at": "2023-08-31T08:19:01Z",
        "merged_at": "2023-08-31T08:19:01Z",
        "body": "## Motivation\r\n\r\nWe should ideally not be performing I/O operations in the top-level import path, including `config.py`, but rather defer such operations until they are actually required. This has recently surfaced as a reproducible issue in the Testcontainers Go module (https://github.com/testcontainers/testcontainers-go/issues/1495), causing very slow startups under Linux in certain circumstances.\r\n\r\n## Changes\r\n\r\n* add a `get_docker_host_from_container(..)` utility function to remove DNS operations from `config.py`\r\n* remove top-level constant `DOCKER_HOST_FROM_CONTAINER` from `config.py`\r\n* use the new `get_docker_host_from_container(..)` function from `get_endpoint_for_network(..)` in `container_networking.py`\r\n* add `get_addressable_container_host(..)` utility, which covers a fairly common use case to get the addressable endpoint for a service running inside a container (depending on execution context, running either inside or outside of Docker)\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-08-29T16:04:07Z",
        "closed_at": "2023-09-04T07:31:45Z",
        "merged_at": "2023-09-04T07:31:45Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nWhile adding the resource for AWS::EC2::VPCCidrBlock as mentioned in https://github.com/localstack/localstack/issues/8511 in cloud formation template, there were parity issues found in resource `AWS::EC2::VPC`. \r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\nThis PR fixes value for param `CidrBlockAssociations`. \r\n\r\n## Testing\r\nRelated test added in [#2018](https://github.com/localstack/localstack-ext/pull/2018)\r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1557,
        "deletions": 28,
        "changed_files": 19,
        "created_at": "2023-08-29T12:15:06Z",
        "closed_at": "2023-08-30T04:54:30Z",
        "merged_at": "2023-08-30T04:54:30Z",
        "body": "## Motivation\r\nPart of the ongoing effort to move from the GenericBaseModel implementations to ResourceProvider-based ones. Trying to get a bit more experience in with these migrations and eventual pain points\r\n\r\n## Changes\r\n\r\n- Migrates resource provider `AWS::IAM::User`\r\n- Migrates resource provider `AWS::IAM::ServiceLinkedRole`\r\n- Migrates resource provider `AWS::IAM::Role`\r\n- Migrates resource provider `AWS::IAM::Policy`\r\n- Migrates resource provider `AWS::IAM::ManagedPolicy`\r\n- Migrates resource provider `AWS::IAM::Group`\r\n- Migrates resource provider `AWS::IAM::AccessKey`\r\n  - Also fixed the update here to do an actual replacement if serial or username changes (in the future this should be done by the engine before even getting to the update handler though)\r\n  - Enabled a previous skipped test that validates :arrow_up: \r\n- Migrates resource provider `AWS::IAM::InstanceProfile`\r\n- Remove invalid legacy test `test_cfn_handle_iam_role_resource`\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 56,
        "deletions": 42,
        "changed_files": 2,
        "created_at": "2023-08-29T12:03:48Z",
        "closed_at": "2023-08-29T13:26:30Z",
        "merged_at": "2023-08-29T13:26:29Z",
        "body": "## Motivation\r\nIt's quite tedious having to manually scaffold every resource provider individually.\r\n\r\n## Changes\r\n\r\n- Introduce the option to scaffold a whole service by using `AWS::Lambda::*` instead of a concrete resource type such as `AWS::Lambda::Function`\r\n- Integrate click prompt for confirmation on file conflicts\r\n  - Add `--overwrite` flag to optionally skip this prompt\r\n\r\n## Testing\r\n```bash\r\n# Scaffold all AWS::Logs::* resource types\r\npython -m localstack.services.cloudformation.scaffolding generate -w -r \"AWS::Logs::*\"\r\n\r\n# Try to scaffold them again, this will now prompt for confirmation on each conflicting file\r\npython -m localstack.services.cloudformation.scaffolding generate -w -r \"AWS::Logs::*\"\r\n\r\n# The --overwrite flag now skips the confirmation check and all files are overwritten\r\npython -m localstack.services.cloudformation.scaffolding generate -w -r \"AWS::Logs::*\" --overwrite\r\n```\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 841,
        "deletions": 686,
        "changed_files": 17,
        "created_at": "2023-08-29T11:32:06Z",
        "closed_at": "2023-09-01T09:07:56Z",
        "merged_at": "2023-09-01T09:07:56Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nAdds several enhancements and bug fixing to json path extractors, lambda task default inputs, and global timeouts, contributing to the greenification of https://github.com/localstack/localstack/pull/8779\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\n- Added global `TimeoutSeconds` fields for state machine definitions\r\n- Several behavioural fixes to the payloads carrying jsonpaths values\r\n- Fixed default lambda payload obfuscated by over normalisations in the task output logic\r\n- Fixes known issue with `index out of range` exception when evaluating json paths\r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 3
    },
    {
        "merged": false,
        "additions": 134,
        "deletions": 114,
        "changed_files": 11,
        "created_at": "2023-08-29T10:44:29Z",
        "closed_at": "2023-08-29T15:50:02Z",
        "merged_at": null,
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nWhile updating the outdated snapshots, it became apparent that AWS is enabling SQS server side encryption by default [since 17/8/22\r\n](https://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/step-create-queue.html). This PR addresses this in a mock fashion.\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\n- set `SqsManagedSseEnabled` to true by default whenever a new queue is created \r\n\r\n## TODO\r\n- [ ] Clarify if a mock is enough\r\n  - [ ] if not, implement encryption\r\n\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 62,
        "deletions": 87,
        "changed_files": 3,
        "created_at": "2023-08-29T09:22:02Z",
        "closed_at": "2023-08-29T15:12:11Z",
        "merged_at": "2023-08-29T15:12:11Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nSome of our sqs snapshots are quite old by now. This PR updates all snapshots regarding SQS that are older than 9 months (as recorded in the snapshot age report).\r\nWhile doing so, it became apparent that AWS is enabling SQS server side encryption by default [since 17/8/22\r\n](https://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/step-create-queue.html). This PR addresses this in a mock fashion.\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\n- remove snapshot of \"tests/aws/services/sqs/test_sqs.py::TestSqsProvider::test_create_queue_with_attributes\", as this tests no longer exists\r\n- several snaphots have their attribute order changed. This seems to be mostly ordered by key name now.\r\n- update age on the outdated snapshots\r\n\r\n- set `SqsManagedSseEnabled` to \"true\" by default\r\n\r\n## TODO\r\n\r\n- [x] Clarify if a mock is enough for sse\r\n  - ~~[ ] if not, implement encryption~~\r\n\r\n\r\n",
        "comments": 3
    },
    {
        "merged": false,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-08-29T08:46:47Z",
        "closed_at": "2023-08-29T16:07:10Z",
        "merged_at": null,
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nWhile adding the resource for AWS::EC2::VPCCidrBlock as mentioned in https://github.com/localstack/localstack/issues/8511 in cloud formation template, there were parity issues found in resource `AWS::EC2::VPC`. \r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\nThis PR fixes value for param `CidrBlockAssociations`. \r\n\r\n## Testing\r\nRelated test added in [#2001](https://github.com/localstack/localstack-ext/pull/2001)\r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2151,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2023-08-29T08:07:10Z",
        "closed_at": "2023-08-29T12:25:28Z",
        "merged_at": "2023-08-29T12:25:28Z",
        "body": "## Motivation\r\nWe are using [`pytest-split`](https://github.com/jerry-git/pytest-split) to create two splits of the [\"Community Integration Tests against Pro\"](https://github.com/localstack/localstack/actions/workflows/tests-pro-integration.yml).\r\nWithout any data on the test duration, pytest-split just splits the test base in half.\r\nRecently, these two splits have been a bit imbalanced (since some of the tests run longer than the other).\r\nThis can be fixed by recording the test data and committing it to the repo.\r\nThis is not optimal, but works well for as long as the tests do not change too much.\r\nIn the future, it might be interesting to implement a dynamically adjusting approach by caching the test duration data all the time, but this isn't trivial. See https://github.com/jerry-git/pytest-split/issues/20 for more details / ideas on how to implement that.\r\n\r\n## Changes\r\n- Adds `.test_durations` containing the test duration data.\r\n- Configures `pytest-split` in the  [\"Community Integration Tests against Pro\"](https://github.com/localstack/localstack/actions/workflows/tests-pro-integration.yml) to use the test duration data.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 56,
        "deletions": 5,
        "changed_files": 3,
        "created_at": "2023-08-28T22:39:45Z",
        "closed_at": "2023-08-29T08:59:20Z",
        "merged_at": "2023-08-29T08:59:20Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\n\r\nWhile working on the analytics backend, we noticed that the client actually isn't reacting to `track_events=False` responses from the server. Good catch @ackdav.\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\n\r\n* Properly disable the global analytics bus if the backend responds with `track_events=False`\r\n* Add a gate for 403 errors, which we will introduce in the analytics backend to properly terminate older clients. In the older clients a 403 would trigger an exception in the `AnalyticsClient.start_session` method, also leading to disabling of tracking, albeit less gracefully.\r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 23,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2023-08-28T13:52:35Z",
        "closed_at": "2023-08-31T08:00:16Z",
        "merged_at": "2023-08-31T08:00:16Z",
        "body": "## Motivation\r\n\r\nThe Boto client has an odd behaviour where\r\n- if config region is non-default and arg region is also non-default, it uses the arg region\r\n- but when config region is non-default and arg region is 'us-east-1', it uses the config region\r\n\r\nThis is better illustrated below:\r\n\r\n```\r\nIn [29]: session = botocore.session.Session()\r\n\r\nIn [30]: config = botocore.config.Config(region_name='us-west-1')\r\n\r\nIn [32]: session.create_client(service_name='s3', region_name='us-east-1', config=config).meta.region_name\r\nOut[32]: 'us-west-1'\r\n\r\nIn [33]: session.create_client(service_name='s3', region_name='ap-south-1', config=config).meta.region_name\r\nOut[33]: 'ap-south-1'\r\n```\r\n\r\nThis PR handles this behaviour in our internal client library and makes things consistent.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2023-08-28T06:02:19Z",
        "closed_at": "2023-08-28T08:28:12Z",
        "merged_at": "2023-08-28T08:28:12Z",
        "body": "Bumps python from 3.10.12-slim-bullseye to 3.10.13-slim-bullseye.\n\n\n[![Dependabot compatibility score](https://dependabot-badges.githubapp.com/badges/compatibility_score?dependency-name=python&package-manager=docker&previous-version=3.10.12-slim-bullseye&new-version=3.10.13-slim-bullseye)](https://docs.github.com/en/github/managing-security-vulnerabilities/about-dependabot-security-updates#about-compatibility-scores)\n\nDependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.\n\n[//]: # (dependabot-automerge-start)\n[//]: # (dependabot-automerge-end)\n\n---\n\n<details>\n<summary>Dependabot commands and options</summary>\n<br />\n\nYou can trigger Dependabot actions by commenting on this PR:\n- `@dependabot rebase` will rebase this PR\n- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it\n- `@dependabot merge` will merge this PR after your CI passes on it\n- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it\n- `@dependabot cancel merge` will cancel a previously requested merge and block automerging\n- `@dependabot reopen` will reopen this PR if it is closed\n- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually\n- `@dependabot show <dependency name> ignore conditions` will show all of the ignore conditions of the specified dependency\n- `@dependabot ignore this major version` will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot ignore this minor version` will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot ignore this dependency` will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)\n\n\n</details>",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 843,
        "deletions": 1,
        "changed_files": 8,
        "created_at": "2023-08-26T18:25:09Z",
        "closed_at": "2023-09-04T20:56:33Z",
        "merged_at": "2023-09-04T20:56:33Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\n\r\nThis PR introduces a script for developers that aims to replace `bin/docker-run.sh` and ultimately all its derivatives.\r\n\r\nWe have several ways of starting what I call a \"dev container\", i.e., a localstack container with various mounted things like source folders or dependencies. Here are some:\r\n\r\n* `bin/localstack-start-docker-dev.sh`\r\n* `make docker-mount-run`\r\n* `make test-docker-mount`\r\n* `make docker-run-tests`\r\n* `test-docker-mount-code`\r\n\r\nIn ext:\r\n* `bin/docker-run.sh`\r\n* `bin/test-in-docker.sh`\r\n* `make docker-mount-run`\r\n* ...\r\n\r\nWith the introduction of #8781 and #9050, there was an opportunity to unify some of the code necessary to start and configure such a dev container.\r\n\r\nMoreover, with the growing amount of bootstrap tests (network configs, extensions, persistence, ...) there was a need to run these tests locally without having to build the image every time. So whatever configuration logic needed for a `docker-run.sh` replacement could be used there as well.\r\n\r\n## Usage\r\n\r\nThis is what it looks like when you run a localstack container. The only main difference to `localstack start` is that it also mounts the source folders by default. The command also outputs the container config in a more human readable way:\r\n\r\n![Screenshot at 2023-09-04 00-32-55](https://github.com/localstack/localstack/assets/3996682/7701fb4b-ed92-4b9c-a0a8-827d87df92cb)\r\n\r\nHere's the help:\r\n\r\n```console\r\n % python -m localstack.dev.run --help                     \r\nUsage: python -m localstack.dev.run [OPTIONS] [COMMAND]...\r\n\r\n  A tool for localstack developers to start localstack containers. Run this in\r\n  your localstack or localstack-ext source tree to mount local source files or\r\n  dependencies into the container. Here are some examples::\r\n\r\n      python -m localstack.dev.run\r\n      python -m localstack.dev.run -e DEBUG=1 -e LOCALSTACK_API_KEY=test\r\n      python -m localstack.dev.run -- bash -c 'echo \"hello\"'\r\n\r\n  Explanations and more examples:\r\n\r\n  Start a normal container localstack container. If you run this from the\r\n  localstack-ext repo, it will start localstack-pro::\r\n\r\n      python -m localstack.dev.run\r\n\r\n  If you start localstack-pro, you might also want to add the API KEY as\r\n  environment variable::\r\n\r\n      python -m localstack.dev.run -e DEBUG=1 -e LOCALSTACK_API_KEY=test\r\n\r\n  If your local changes are making modifications to plux plugins (e.g., adding\r\n  new providers or hooks), then you also want to mount the newly generated\r\n  entry_point.txt files into the container::\r\n\r\n      python -m localstack.dev.run --mount-entrypoints\r\n\r\n  Start a new container with randomized gateway and service ports, and\r\n  randomized container name::\r\n\r\n      python -m localstack.dev.run --randomize\r\n\r\n  You can also run custom commands:\r\n\r\n      python -m localstack.dev.run bash -c 'echo \"hello\"'\r\n\r\n  Or use custom entrypoints:\r\n\r\n      python -m localstack.dev.run --entrypoint /bin/bash -- echo \"hello\"\r\n\r\n  You can also mount local dependencies (e.g., pytest and other test\r\n  dependencies, and then use that in the container)::\r\n\r\n      python -m localstack.dev.run --mount-dependencies \\\r\n          -v ./tests:/opt/code/localstack/tests \\\r\n          -- .venv/bin/python -m pytest tests/unit/http_/\r\n\r\n  The script generally assumes that you are executing in either localstack or\r\n  localstack-ext source repositories that are organized like this::\r\n\r\n      somedir                              <- your workspace directory\r\n      \u251c\u2500\u2500 localstack                       <- execute script in here\r\n      \u2502   \u251c\u2500\u2500 ...\r\n      \u2502   \u251c\u2500\u2500 localstack                   <- will be mounted into the container\r\n      \u2502   \u251c\u2500\u2500 localstack_core.egg-info\r\n      \u2502   \u251c\u2500\u2500 setup.cfg\r\n      \u2502   \u251c\u2500\u2500 tests\r\n      \u2502   \u2514\u2500\u2500 ...\r\n      \u251c\u2500\u2500 localstack-ext                   <- or execute script in here\r\n      \u2502   \u251c\u2500\u2500 ...\r\n      \u2502   \u251c\u2500\u2500 localstack_ext               <- will be mounted into the container\r\n      \u2502   \u251c\u2500\u2500 localstack_ext.egg-info\r\n      \u2502   \u251c\u2500\u2500 setup.cfg\r\n      \u2502   \u251c\u2500\u2500 tests\r\n      \u2502   \u2514\u2500\u2500 ...\r\n      \u251c\u2500\u2500 moto\r\n      \u2502   \u251c\u2500\u2500 AUTHORS.md\r\n      \u2502   \u251c\u2500\u2500 ...\r\n      \u2502   \u251c\u2500\u2500 moto                         <- will be mounted into the container\r\n      \u2502   \u251c\u2500\u2500 moto_ext.egg-info\r\n      \u2502   \u251c\u2500\u2500 setup.cfg\r\n      \u2502   \u251c\u2500\u2500 tests\r\n      \u2502   \u2514\u2500\u2500 ...\r\n\r\nOptions:\r\n  --image TEXT                    Overwrite the container image to be used\r\n                                  (defaults to localstack/localstack or\r\n                                  localstack/localstack-pro.\r\n  --volume-dir DIRECTORY          The localstack volume on the host, default:\r\n                                  ~/.cache/localstack/volume\r\n  --pro / --community             Whether to start localstack pro or\r\n                                  community. If not set, it will guess from\r\n                                  the current directory\r\n  --randomize                     Randomize container name and ports to start\r\n                                  multiple instances\r\n  --mount-source / --no-mount-source\r\n                                  Mount source files from localstack,\r\n                                  localstack-ext, and moto into the container.\r\n  --mount-dependencies / --no-mount-dependencies\r\n                                  Whether to mount the dependencies of the\r\n                                  current .venv directory into the container.\r\n                                  Note this only works if the dependencies are\r\n                                  compatible with the python and platform\r\n                                  version from the venv and the container.\r\n  --mount-entrypoints / --no-mount-entrypoints\r\n                                  Mount entrypoints\r\n  --mount-docker-socket / --no-docker-socket\r\n  -e, --env TEXT                  Additional environment variables that are\r\n                                  passed to the LocalStack container\r\n  -v, --volume TEXT               Additional volume mounts that are passed to\r\n                                  the LocalStack container\r\n  -p, --publish TEXT              Additional ports that are published to the\r\n                                  host\r\n  --entrypoint TEXT               Additional entrypoint flag passed to docker\r\n  --network TEXT                  Docker network to start the container in\r\n  --help                          Show this message and exit.\r\n```\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\n\r\n* Add a comprehensive list of `ContainerConfigurator` implementations to encapsulate the configuration logic needed by the various startup scenarios, and add the new `localstack.dev.run` script\r\n* add `run_interactive` method to `localstack.utils.run` to attach the tty to a subprocess (in this case `docker run`)\r\n* make sure stderr is correctly piped to stdout when using `stream_container_logs` with the CmdDockerClient\r\n\r\n## Testing\r\n\r\n* Check out the branch\r\n* `source .venv/bin/activate`\r\n* `python -m localstack.dev.run --help`\r\n\r\nTo test ext:\r\n* keep the .venv of localstack activated\r\n* navigate into `localstack-ext`\r\n* `python -m localstack.dev.run -e LOCALSTACK_API_KEY=test` should now start a pro container\r\n\r\n## Future work\r\nFollow up PRs will include:\r\n* consolidating/re-organizing some of the configurator logic introduced in #9050.\r\n* making it easier to inject test dependencies (pytest, coverage, ...) in a clean way (for instance using extensions or the python package installer in a \"sidecar\" venv on the host) to replace `test-in-docker.sh`\r\n* actually replace all the different script listed in the motivation\r\n\r\n## TODO\r\n- [x] Requires #9051\r\n- [x] Requires #9050\r\n- [x] PR description\r\n- [x] Testing  \r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 8,
        "deletions": 8,
        "changed_files": 1,
        "created_at": "2023-08-25T22:34:13Z",
        "closed_at": "2023-08-29T12:51:25Z",
        "merged_at": "2023-08-29T12:51:25Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nFrom the last report, it seemed some S3 snapshots were not refreshed. I think this was due to my rebasing, I must have failed some conflicts and kept the old date. \r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\nRefreshed the missing snapshots, only the dates are changed, it feels a bit silly but at least we're sure it works! \r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 654,
        "deletions": 334,
        "changed_files": 3,
        "created_at": "2023-08-25T22:19:14Z",
        "closed_at": "2023-08-28T14:43:21Z",
        "merged_at": "2023-08-28T14:43:21Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nRefreshing SES snapshots which were older than 3 months\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\nSpotted a little change in logic with AWS for some tests and adapted them.\r\nAdapted some tests to run against AWS.\r\n\r\nSome tests are still in an `needs_fixing` state because they can't run against AWS, it might be `unknown` instead though because of the sandbox account not allowing us to use everything. \r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 822,
        "deletions": 2,
        "changed_files": 5,
        "created_at": "2023-08-25T18:53:04Z",
        "closed_at": "2023-08-28T06:23:31Z",
        "merged_at": "2023-08-28T06:23:31Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nAdds support for Resource Tagging to Step Functions.\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\nAdded a TagManager to State Machine Revision instances.\r\nAdded support for api actions: `tag_resource`, `untag_resource`, `list_tags_for_resource`.\r\n\r\n## Testing\r\nAdded relevant positive and negative snapshot tests `tests.aws.services.stepfunctions.v2.test_sfn_api_tagging.TestSnfApiTagging`\r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 146,
        "deletions": 1,
        "changed_files": 3,
        "created_at": "2023-08-25T11:32:50Z",
        "closed_at": "2023-08-28T18:55:29Z",
        "merged_at": "2023-08-28T18:55:29Z",
        "body": "## Motivation\r\n\r\nWe already enabled the AWS::SQS::Queue resource provider, so I thought it might be a good idea to \"finish\" the service by migrating the only other remaining CFn model for SQS\r\n\r\n## Changes\r\n\r\n- Add new resource provider for `AWS::SQS::QueuePolicy`\r\n\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 253,
        "deletions": 13,
        "changed_files": 3,
        "created_at": "2023-08-25T10:58:08Z",
        "closed_at": "2023-08-29T17:13:36Z",
        "merged_at": "2023-08-29T17:13:36Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nWhen evaluating `StepFunction`'s `ApiGateway` tasks, the provided `ApiEndpoint` is converted to a path style LocalStack endpoint, if a url one is provided.\r\nImproves loading of json `ResponseBody` and removes out of scope test inputs.\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\nAdded url transformation logic to the `ApiGateway`'s task resolver, as well as json request body parsing attempt.\r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 5,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2023-08-25T10:51:42Z",
        "closed_at": "2023-10-03T15:52:22Z",
        "merged_at": null,
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\n\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\n## Motivation\n\nWhen starting the DNS server, we check if we can publish 0.0.0.0:53, but on systems running systemd-resolved, 127.0.0.1:53 is bindable but 127.0.0.53 is not and the check returns falsy.\n\n\n<!-- What notable changes does this PR make? -->\n## Changes\n\nWe allow a custom host to be tested for whether a port can be bound or not.\n\n\n<!-- The following sections are optional, but can be useful! \n\n## Testing\n\nDescription of how to test the changes\n\n## TODO\n\nWhat's left to do:\n\n- [ ] ...\n- [ ] ...\n\n-->\n\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 5078,
        "deletions": 4720,
        "changed_files": 7,
        "created_at": "2023-08-24T22:37:10Z",
        "closed_at": "2023-08-29T12:52:02Z",
        "merged_at": "2023-08-29T12:52:02Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nRefreshing SNS snapshots which were for most 1 year old\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\nOrganised the tests in more classes, to try to separate a little the different cases. It's not very precise, but it allows a bit more fine grained organisation, and it's easier to run/refresh only a certain kind of tests only after a change instead of re-running the whole suite locally. \r\n\r\nRefreshing snapshots put into a light a change regarding FIFO topics: they now accept regular SQS queue as subscribers. Those are not guaranteed to be FIFO, but the deduplication is working (as it's a the topic level, not the subscriber queue level). This is not yet implemented in LocalStack, but there's a TODO to implement it.\r\n\r\nAlso added a dummy subscription principal to the SNS subscription, as the field was missing. Maybe we could do a call to STS to get the real IAM user doing the call. \r\n\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 240,
        "deletions": 243,
        "changed_files": 4,
        "created_at": "2023-08-24T16:18:58Z",
        "closed_at": "2023-08-25T10:34:16Z",
        "merged_at": "2023-08-25T10:34:16Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nWe also want multiruntime tests in -ext, in this case for transparent endpoint injection tests.\r\nThis slight refactoring basically moves the logic to the testing/aws/lambda_utils module instead of the conftest.py, which enables us to use the logic with very little duplicated code in -ext.\r\n\r\nAlso, there were some logical issues recently introduced with changes in edge.py for `run_module_as_sudo` which are corrected with this pr /cc @simonrw \r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\n* Move the multiruntime test logic to testing module\r\n* Fix `run_module_as_sudo` logic\r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 4,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-08-24T15:53:09Z",
        "closed_at": "2023-09-22T07:01:19Z",
        "merged_at": null,
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nThis PR adds the two recent commits that improve standardization of our folder structure to ignore-revs, since these PRs touch a lot of files without changing functionality\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\nadds https://github.com/localstack/localstack/pull/8867 and https://github.com/localstack/localstack/pull/8861 to .git-blame-ignore-revs\r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 213,
        "deletions": 6,
        "changed_files": 5,
        "created_at": "2023-08-24T14:11:33Z",
        "closed_at": "2023-09-06T16:22:15Z",
        "merged_at": "2023-09-06T16:22:15Z",
        "body": "## Motivation\r\nWe want to keep track of the state of our AWS tests, especially the correct marking.\r\nA recently introduced plugin already enforces correct exactly-once marking with `aws_` markers, but we still have a lot of `aws_unknown` markers which we should try to get down to 0. \r\n\r\nWe also want to track the progress over time.\r\n\r\nThe plugin has been implemented in a somewhat generic way, so we can use it for other non-aws markers as well.\r\n\r\n## Changes\r\n\r\n- Add a new plugin to our pytest plugin suite which can be used to generate a json report about the markers used in our pytest tests\r\n- Adds a new workflow that uploads data about marker usage to tinybird\r\n- Adds the plugin to our pytest config\r\n\r\n## Testing\r\n\r\n```bash\r\npython -m pytest tests/aws/services/lambda_ --marker-report --marker-report-prefix aws_ --co -qqq\r\n```\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 150,
        "deletions": 5,
        "changed_files": 3,
        "created_at": "2023-08-23T22:05:39Z",
        "closed_at": "2023-08-31T19:14:58Z",
        "merged_at": "2023-08-31T19:14:58Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nThis issue was raised in #8816, SNS would not raise an exception if the `Subscribe` call had different attributes when the subscription already exists.\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\nWe now check if the found subscription if it exists would have the same attributes, and if it doesn't, raise an exception. Added a validated AWS test with it. \r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 33,
        "deletions": 6,
        "changed_files": 4,
        "created_at": "2023-08-23T21:04:18Z",
        "closed_at": "2023-08-28T13:20:05Z",
        "merged_at": "2023-08-28T13:20:05Z",
        "body": "## Motivation\r\n\r\nTags for creating DynamoDB table are not created. The issue was raised in a support case.\r\n\r\n## Changes\r\n\r\n* Add support for resource tags for the create table operation.\r\n* Add `aws.validated` marker for `test_deploy_stack_with_dynamodb_table` and `test_globalindex_read_write_provisioned_throughput_dynamodb_table` because both tests ran successfully against AWS when executing all tests in the file.\r\n\r\n## Testing\r\n\r\nExtended an AWS-validated test case to cover tags.\r\nFixes the sample from the support case.\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 12,
        "deletions": 3,
        "changed_files": 4,
        "created_at": "2023-08-23T20:26:48Z",
        "closed_at": "2023-08-24T05:30:05Z",
        "merged_at": "2023-08-24T05:30:05Z",
        "body": "## Motivation\r\n\r\nFixes the issue multiple people experienced where pseudo-parameter couldn't be resolved correctly when used in `Fn::Sub`.\r\n\r\nExample error message: `Unable to resolve attribute ref AWS::URLSuffix`\r\n\r\nResolves https://github.com/localstack/localstack/issues/8726\r\n\r\n## Changes\r\n\r\n- check for pseudo-parameter when resolving a placeholder in a sub string and resolve them recursively\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 45,
        "deletions": 56,
        "changed_files": 4,
        "created_at": "2023-08-23T16:15:46Z",
        "closed_at": "2023-08-24T12:04:51Z",
        "merged_at": "2023-08-24T12:04:51Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nPart of the workstream for AWS testing: updating old snapshots. \r\nThis PR is for `dynamodb` service\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\n- updated snapshots\r\n- removed skip parameters for a few parameters\r\n- added skip parameter for `DeletionProtectionEnabled`\r\n- fixed invalid catch in a test (did not work against AWS)\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [x] `test_data_encoding_consistency` is marked as localstack_only but has a snapshot\r\n\r\n\r\n\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2411,
        "deletions": 1221,
        "changed_files": 33,
        "created_at": "2023-08-23T13:52:55Z",
        "closed_at": "2023-09-12T15:05:07Z",
        "merged_at": "2023-09-12T15:05:07Z",
        "body": "## Motivation\r\n\r\n* Fixes the infinite Lambda re-spawn loop: Whenever a Lambda environment fails to start (e.g., even due to common user errors), the Lambda container enters an infinite retry loop instead of reporting an appropriate error message and stopping retries (depending on the error cause). This behavior is user-unfriendly and affects many GitHub issues and support tickets.\r\n* Architecture mismatch between LocalStack and real AWS Lambda: The architectural mismatch causes parity issues, impedes debugging, and complicates adding new features.\r\n\r\n## Goals\r\n\r\n* Core loop: The default invocation path should be synchronous instead of asynchronous. This enables improved error handling and better AWS parity.\r\n* Environment management: Allow for more explicit control over execution environments. This unblocks custom workers.\r\n* Asynchronous event invocation: Separate asynchronous event invocations and handle retries, DLQs, and event destinations properly. This fixes bugs and increases AWS parity.\r\n* Encapsulate concurrency logic: The logic related to concurrency management should be better encapsulated rather than scattered throughout an implicit and complex control flow through an asynchronous invocation loop. This enables better AWS parity and makes improving and adding features easier.\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\nThis PR basically re-writes the data plane (i.e., everything related to environment assignment and invocation scheduling) of our new Lambda provider. The re-architected implementation is inspired based on the real architecture of AWS Lambda explained at [AWS re:Invent 2022 - A closer look at AWS Lambda (SVS404-R)](https://www.notion.so/localstack/Lambda-sync-async-invocation-model-d11375234d974fcbb0d1b70d737ccd80?pvs=4).\r\n\r\n### Invocation model\r\n\r\n![image](https://github.com/localstack/localstack/assets/8161292/5fbc585b-4d17-433e-923d-0e95145703ba)\r\n\r\nImages from AWS: https://youtu.be/0_jfH6qijVY\r\n\r\n### Synchronous invocation\r\n\r\n![image](https://github.com/localstack/localstack/assets/8161292/63e58b48-65f4-4740-acd4-c7d3515ecfdc)\r\n\r\n### Asynchronous Invocation\r\n\r\n![image](https://github.com/localstack/localstack/assets/8161292/e2d56b2e-4e4c-4d35-bf85-cb138339c0c1)\r\n\r\n\r\nMore details to follow ...\r\n\r\n### Internal Documentation\r\n\r\n* [Collection of Meeting Notes (Notion)](https://www.notion.so/localstack/2023-07-05-until-2023-08-Lambda-Async-invoke-and-concurrency-2cd54c2281074e74b3530992c46bdac9?pvs=4)\r\n* [Initial goals and brainstorming notes (Notion)](https://www.notion.so/localstack/2023-06-13-Lambda-Spawn-Loop-Rework-8f8c050054174f9d940a0d2e024863ce?pvs=4)\r\n\r\n\r\n## Testing\r\n\r\nThis PR adds more AWS-validated tests and fixes some existing tests (e.g., fixes timing assumptions, and makes async tests faster). One example: We previously triggered the DLQ destination upon every failed invocation rather than only after the last retry.\r\n\r\n## TODO\r\n\r\nSee internal documentation [Collection of Meeting Notes (Notion)](https://www.notion.so/localstack/2023-07-05-until-2023-08-Lambda-Async-invoke-and-concurrency-2cd54c2281074e74b3530992c46bdac9?pvs=4)\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 803,
        "deletions": 2,
        "changed_files": 13,
        "created_at": "2023-08-23T12:55:19Z",
        "closed_at": "2023-08-24T16:08:37Z",
        "merged_at": "2023-08-24T16:08:37Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nAdd another scenario test, this time for [loan-broker](https://github.com/localstack-samples/sample-loan-broker-stepfunctions-lambda). It's only a very basic step-function-sample; parametrized the test and snapshotted the results.\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\n* only included the simple stack (there is [another PR](https://github.com/localstack/localstack/pull/8803) where we also added the second stack for this sample; with a slightly different setup of the same scenario)\r\n  * as the second stack doesn't output reliable results, and would need some restructuring, I would leave this out (at least for the beginning)\r\n  * we can iterate or extend the sample later on (doing some tests with dynamdb for example). \r\n  * we discovered an issue with eventbus and lambda while working on the second stack, which was already fixed (and tested) in a [previous PR](https://github.com/localstack/localstack/pull/8844)\r\n\r\n* added snapshots\r\n* one test is failing on LocalStack, and is marked with `xfail`\r\n\r\n* renamed the resource-directories (also for the note-taking-scenario)\r\n  * we should decide soon on the naming of the scenarios, it probably makes more sense to highlight the used services :) \r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 47,
        "deletions": 12,
        "changed_files": 8,
        "created_at": "2023-08-23T12:42:40Z",
        "closed_at": "2023-08-29T07:13:23Z",
        "merged_at": "2023-08-29T07:13:23Z",
        "body": "## Motivation\r\n\r\nWhen using the non-default account ID or region, CloudWatch must create the logs in the same account and region.\r\n\r\n## Implementation\r\n\r\nThis PR makes use of appropriate accounts IDs and regions for each of the integrations that connect to CloudWatch or store logs there.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 18,
        "deletions": 24,
        "changed_files": 6,
        "created_at": "2023-08-23T11:27:19Z",
        "closed_at": "2023-08-29T10:03:20Z",
        "merged_at": "2023-08-29T10:03:20Z",
        "body": "## Motivation\r\n\r\nThe test util `localstack.utils.testutil.delete_lambda_function` did not clean up the resources if they're created in non-default account ID or region. This PR removes this utility.\r\n\r\n## Implementation\r\n\r\nBased on how the Lambda function is created, the PR makes two changes:\r\n- If the function is created using the fixture `create_lambda_function`, we remove the explicit delete operation since the fixture has proper cleanup stage built-in.\r\n- If the function is created using the testutil `create_lambda_function`, we replace with a call to `DeleteFunction` operation using the `aws_client` fixture.",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 28,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-08-22T22:56:16Z",
        "closed_at": "2023-08-29T19:14:00Z",
        "merged_at": null,
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nWhile working on the S3 persistence workaround for mounted volumes, I would need to set up a specific pod logic when creating/injecting pods.\r\nBasically, the data in S3 would live inside the container and not in the default `assets` folder (`config.dirs.data`). There's some custom logic needed, and I would need to be able to set up a plugin for it. This is the first step to be able to introduce it. \r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\nCreating a simple plugin to be able then declare and discover specific service related pod visitor. \r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] run benchmarks with and without the S3 persistence workaround to see if this is really needed (still need to merge the last PRs to be able to run them)\r\n- [ ] ...\r\n\r\n",
        "comments": 3
    },
    {
        "merged": false,
        "additions": 6,
        "deletions": 4,
        "changed_files": 1,
        "created_at": "2023-08-22T20:56:35Z",
        "closed_at": "2023-08-24T15:45:01Z",
        "merged_at": null,
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nWe deprecated `HOSTNAME_EXTERNAL` since 2.0.0. and we replaced it with `LOCALSTACK_HOST`.\r\nSome services rely on `external_service_url` for some use cases (e.g., Cognito uses it to generate the issuer URL generation in JTW tokens).\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\nThis PR uses now `LOCALSTACK_HOST` as a default host when calling `external_service_url`.\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 15,
        "deletions": 4,
        "changed_files": 2,
        "created_at": "2023-08-22T16:22:34Z",
        "closed_at": "2023-08-22T19:33:18Z",
        "merged_at": "2023-08-22T19:33:18Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nThis PR would fix #8928 and #8924. We had an issue with parsing the WSGI environ `RAW_URI`, because an HTTP request can also contain a full URL and not only an absolute path. See the RFC: https://www.ietf.org/rfc/rfc2616.txt\r\n```\r\n   To allow for transition to absoluteURIs in all requests in future\r\n   versions of HTTP, all HTTP/1.1 servers MUST accept the absoluteURI\r\n   form in requests, even though HTTP/1.1 clients will only generate\r\n   them in requests to proxies.\r\n```\r\n\r\nWe would then have more than the path with `get_raw_path`, which lead to issue down the road when trying to match in our router.\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\nWe now thanks to @dfangl parse the `RAW_URI` variable with `urllib.parse.urlparse` to then only get the `path` part of the `RAW_URI` in case there's more. \r\nAdded a unit test covering this use case.\r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 33,
        "deletions": 15,
        "changed_files": 2,
        "created_at": "2023-08-22T15:51:44Z",
        "closed_at": "2023-08-22T19:19:47Z",
        "merged_at": "2023-08-22T19:19:47Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nWe are currently running out of memory in our test runs.\r\nThis is a combination of the recent test reordering, which showed us this issue, and insufficient test cleanup.\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\n* Cleanup serverless tests, even if the command fails\r\n* Cleanup opensearch instances after starting them for endpoint strategy tests\r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 435,
        "deletions": 0,
        "changed_files": 9,
        "created_at": "2023-08-22T15:35:49Z",
        "closed_at": "2023-09-25T13:09:29Z",
        "merged_at": "2023-09-25T13:09:29Z",
        "body": "## Motivation\r\nCloudformation is unable to deploy a Route53 HealthCheck resource\r\n\r\n## Changes\r\n- Add resource model\r\n- Add some missing properties for other models\r\n\r\n## Testing\r\nThe test validates the deployment of the resource\r\n\r\n",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 140,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2023-08-22T13:06:06Z",
        "closed_at": "2023-08-23T10:58:04Z",
        "merged_at": null,
        "body": "- Add resource monitor plugin\n- Print more resource usages to the console\n\n<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\n\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\n## Motivation\n\nThe pipeline has been crashing, so use this to monitor resource usage\n\n\n<!-- What notable changes does this PR make? -->\n## Changes\n\n* Add `ResourceMonitorPlugin` to print resource usage (from psutil) at the end of every test\n\n<!-- The following sections are optional, but can be useful! \n\n## Testing\n\nDescription of how to test the changes\n\n## TODO\n\nWhat's left to do:\n\n- [ ] ...\n- [ ] ...\n\n-->\n\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 16,
        "deletions": 7,
        "changed_files": 1,
        "created_at": "2023-08-22T12:58:53Z",
        "closed_at": "2023-08-24T06:50:18Z",
        "merged_at": "2023-08-24T06:50:18Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nThe current configuration of the `WaiterConfig` used for the CDK based setup, does have a very limited waiting time configured. \r\nWhen running a complex scenario, e.g. setting up several database-cluster with instances, it will timeout on AWS before the deployment finishes, therefore failing the test, potentially starting the teardown. \r\n\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\n* Increased the `WaiterConfig` for setup + teardown\r\n* Only delete the CDK_BOOTSTRAP_PARAM for LocalStack runs\r\n\r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 21,
        "deletions": 9,
        "changed_files": 2,
        "created_at": "2023-08-22T12:26:45Z",
        "closed_at": "2023-08-23T10:38:37Z",
        "merged_at": "2023-08-23T10:38:37Z",
        "body": "## Motivation\r\n\r\nSupport issue with CDK stack where `UserData` is not applied to freshly launched EC2 instances. `UserData` itself is implemented and works in EC2.\r\n\r\n## Changes\r\n\r\nAdd the missing CloudFormation implementation for the `UserData` property. It requires a callback to decode the base64-encoded field.\r\n\r\nMinor refactoring of verbose current folder implementation (initially started with EC2 test but I noticed that is better covered in a scenario test).\r\n\r\n## Testing\r\n\r\nTested through custom CDK stack and support sample. An EC2 scenario test is partially drafted for localstack-ext (follow up in separate PR).\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 18,
        "deletions": 3,
        "changed_files": 3,
        "created_at": "2023-08-22T10:58:57Z",
        "closed_at": "2023-08-23T05:34:30Z",
        "merged_at": "2023-08-23T05:34:30Z",
        "body": "## Motivation\r\nIt seems we lost the type hinting in PyCharm for the snapshot fixture in our tests, which makes especially adding new tests much less intuitive.\r\n\r\n\r\n## Changes\r\n\r\n- Introduce new _snapshot_session fixture\r\n- Add (technically redundant) snapshot fixture so that PyCharm picks up the correct typing.\r\n\r\n\r\n## Coming up\r\n\r\n-ext will receive a similar fixture that will expose the typed _snapshot_session and thus allow  us to have types again.\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 320,
        "deletions": 1,
        "changed_files": 6,
        "created_at": "2023-08-22T10:34:58Z",
        "closed_at": "2023-08-25T09:55:56Z",
        "merged_at": "2023-08-25T09:55:56Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nAdds support for missing api action `DescribeStateMachineForExecution`.\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\nAdded support in the provider for v2.\r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-08-22T06:36:37Z",
        "closed_at": "2023-08-23T15:36:53Z",
        "merged_at": "2023-08-23T15:36:53Z",
        "body": null,
        "comments": 1
    },
    {
        "merged": false,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2023-08-21T23:59:20Z",
        "closed_at": "2023-08-28T06:02:24Z",
        "merged_at": null,
        "body": "Bumps python from `9dd3db7` to `9e114b4`.\n\n\n[![Dependabot compatibility score](https://dependabot-badges.githubapp.com/badges/compatibility_score?dependency-name=python&package-manager=docker&previous-version=3.10.12-slim-bullseye&new-version=3.10.12-slim-bullseye)](https://docs.github.com/en/github/managing-security-vulnerabilities/about-dependabot-security-updates#about-compatibility-scores)\n\nDependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.\n\n[//]: # (dependabot-automerge-start)\n[//]: # (dependabot-automerge-end)\n\n---\n\n<details>\n<summary>Dependabot commands and options</summary>\n<br />\n\nYou can trigger Dependabot actions by commenting on this PR:\n- `@dependabot rebase` will rebase this PR\n- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it\n- `@dependabot merge` will merge this PR after your CI passes on it\n- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it\n- `@dependabot cancel merge` will cancel a previously requested merge and block automerging\n- `@dependabot reopen` will reopen this PR if it is closed\n- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually\n- `@dependabot show <dependency name> ignore conditions` will show all of the ignore conditions of the specified dependency\n- `@dependabot ignore this major version` will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot ignore this minor version` will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot ignore this dependency` will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)\n\n\n</details>",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 5,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-08-21T14:41:52Z",
        "closed_at": "2023-08-29T10:50:00Z",
        "merged_at": "2023-08-29T10:50:00Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\n\r\nWe currently split ports by privileged and unprivileged, and start TCP proxies for privileged ports (as root) since we don't want to run the server on the host as root. \r\nIf we are _already_ root, then we do not need to make this split.\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\n\r\n* If we are running as root, bind the hypercorn server to privileged ports as well.\r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n## Questions\r\n\r\n* This means that if the privileged ports cannot be bound for some reason, then _no_ ports will be bound, and we won't be able to start LocalStack. Is this a concern in practice?\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2023-08-21T14:03:16Z",
        "closed_at": "2023-08-28T05:43:30Z",
        "merged_at": "2023-08-28T05:43:30Z",
        "body": "## Motivation\r\n\r\nS3 `CreateBucket` is supposed to be idempotent in `us-east-1`. However, due to [failing tests](https://github.com/localstack/localstack/pull/8912/commits/6b23f6c114af828496d10507780d9154c9a75203) in a merge commit, a use case of this behaviour was removed in https://github.com/localstack/localstack/pull/8912/commits/cb6c4f196018ef4ab6dbf265ce9f4943d0e5d350.\r\n\r\ncc: @dfangl \r\n\r\n## Implementation\r\n\r\nThis PR attempts to understand why this idempotent behaviour disappeared all of a sudden.\r\n",
        "comments": 5
    },
    {
        "merged": true,
        "additions": 24,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2023-08-21T09:16:49Z",
        "closed_at": "2023-09-13T19:56:37Z",
        "merged_at": "2023-09-13T19:56:37Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\n\r\nThis is in some sense a follow up to #8926. I wanted to use the close callbacks of werkzeug to properly implement the restarting of localstack after extensions have been installed (see ext PR). I noticed this wasn't working because we actually often create new Response objects and then use `Response.update_from` in the handler chain, which didn't copy the internal on close callbacks correctly\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\n\r\n* Update our `Response.update_from` method to copy the internal `_on_close` handlers correctly\r\n* Add an integration test to make sure the close callbacks work correctly\r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 43,
        "deletions": 3,
        "changed_files": 3,
        "created_at": "2023-08-21T05:05:25Z",
        "closed_at": "2023-08-28T07:56:37Z",
        "merged_at": "2023-08-28T07:56:37Z",
        "body": "# \ud83d\ude80 ASF Update Report \ud83d\ude80\nThis PR has been automatically generated to update the generated API stubs for our ASF services.\nIt uses the latest code-generator from the _master_ branch ([scaffold.py](https://github.com/localstack/localstack/blob/master/localstack/aws/scaffold.py)) and the latest _published_ version of [botocore](https://github.com/boto/botocore) to re-generate all API stubs which are already present in the `localstack.aws.api` module of the _master_ branch.\n\n## \ud83d\udd04 Updated Services\nThis PR updates the following services:\n- apigateway\n- ec2\n\n## \ud83d\udc77\ud83c\udffd Handle this PR\nThe following options describe how to interact with this PR / the auto-update:\n\n\u2714\ufe0f **Accept Changes**\nIf the changes are satisfying, just squash-merge the PR and delete the source branch.\n\n\ud83d\udeab **Ignore Changes**\nIf you want to ignore the changes in this PR, just close the PR and *do not delete* the source branch. The PR will not be opened and a new PR will not be created for as long as the generated code does not change (or the branch is deleted). As soon as there are new changes, a new PR will be created.\n\n\u270f\ufe0f **Adapt Changes**\n*Don't do this.* The APIs are auto-generated. If you decide that the APIs should look different, you have to change the code-generation.\n\n\u23f8\ufe0f **Pause Updates**\nRemove the cron-schedule trigger of the GitHub Action workflow which creates these PRs. The action can then still be triggered manually, but it will not be executed automatically.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-08-20T15:13:24Z",
        "closed_at": "2023-08-22T10:09:45Z",
        "merged_at": "2023-08-22T10:09:45Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nSpeeds up build by skipping local checks for StepFunction's role assume.\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\nSkip SFN can assume role check in create state machine iam role fixture.\r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 2616,
        "deletions": 5,
        "changed_files": 11,
        "created_at": "2023-08-20T14:44:34Z",
        "closed_at": "2023-08-25T08:07:05Z",
        "merged_at": "2023-08-25T08:07:05Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nAdds missing base support for StepFunctions ApiGateway state tasks, contributing to the greenification of https://github.com/localstack/localstack/pull/8779, which sets StepFunction v2 as default provider.\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\nAdded execution task resolver for ApiGateway `StateTaskServiceApiGateway`\r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 1,
        "deletions": 62,
        "changed_files": 1,
        "created_at": "2023-08-18T16:28:07Z",
        "closed_at": "2023-08-24T15:54:58Z",
        "merged_at": null,
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nCheck flakes in circleci\r\n\r\n## Changes\r\nFix failing tests and remove non-termination from the arm job\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-08-18T10:52:45Z",
        "closed_at": "2023-08-18T12:31:41Z",
        "merged_at": "2023-08-18T12:31:41Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\n\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\n## Motivation\n\nCurrently the community tests against pro are failing because a postgres dependency has been updated in the pipeline.\n\nThis test updates the dependency\n\n<!-- What notable changes does this PR make? -->\n## Changes\n\nUpdate postgres requirement to `postgresql-14=14.9-0ubuntu0*`\n\nLink to actions run where the packages install successfully: https://github.com/localstack/localstack/actions/runs/5901796175/job/16008610290?pr=8936#step:9:114\n\n<!-- The following sections are optional, but can be useful! \n\n## Testing\n\nDescription of how to test the changes\n\n## TODO\n\nWhat's left to do:\n\n- [ ] ...\n- [ ] ...\n\n-->\n\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 107,
        "deletions": 69,
        "changed_files": 4,
        "created_at": "2023-08-16T21:23:22Z",
        "closed_at": "2023-08-30T15:06:10Z",
        "merged_at": "2023-08-30T15:06:10Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nImproving the current S3 storage layer, introduce 2 more operations to allow easier cleanup of resources with bucket creation and deletion. Also separate between `close` and `reset` the store, to have better semantics between these 2 operations (closing does not always mean deleting all underlying objects, especially with persistence enabled). \r\nSeparate between the `close` call for the Ephemeral object, so that it doesn't close the underlying file object, which would delete it in Ephemeral mode, following the fix to the response with #8926. \r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\nIntroduce said changes above, `create_bucket` and `delete_bucket` for the storage layer, and preparing support for persistence. \r\n\r\nAlso added a quick fix regarding creating bucket in `us-east-1`, I wasn't returning early from the method and ended up overwriting the bucket in the store.\r\n\r\nMake `close` a noop for `EphemeralS3StoredObject`, and implement a `delete` method for cleaning up.\r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 67,
        "deletions": 25,
        "changed_files": 2,
        "created_at": "2023-08-16T20:03:02Z",
        "closed_at": "2023-08-17T13:58:08Z",
        "merged_at": "2023-08-17T13:58:08Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\n\r\nDuring the implementation of the new S3 provider, we noticed that `Response.close` is never called on the werkzeug response, and therefore not propagated to other underlying objects. The test I added worked when serving it directly through the werkzeug server, and I found it's calling close [here](https://github.com/pallets/werkzeug/blob/47c6bd568efd0870d413c27be316c2b4eee74486/src/werkzeug/serving.py#L360-L361), where `application_iter` is the `Response` object.\r\n\r\nWe actually had no analogous call in our ASGI/WSGI bridge, so this PR adds that.\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\n\r\n* Encapsulate the sync/async iterable wrapper into a class and propagate any calls to `aclose` to the underlying `close` method.\r\n\r\nI was briefly worried that this may break [`test_chunked_transfer_encoding_client_timeout`](https://github.com/localstack/localstack/blob/555f8da5d3222ed191867f668d88cd54da274997/tests/unit/http_/test_asgi.py#L101-L103) but seems to still work, so although `aclose` is overwritten, it propagates the `GeneratorExit` exception correctly :+1:\r\n\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 101,
        "deletions": 0,
        "changed_files": 3,
        "created_at": "2023-08-16T17:14:01Z",
        "closed_at": "2023-08-23T14:40:38Z",
        "merged_at": "2023-08-23T14:40:38Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\n\r\nSupport case https://localstack-community.slack.com/archives/C05HSNXLQ2J. The CF resource \"AWS::ApiGateway::GatewayResponse\" was missing a physical resource id value.\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\n\r\nAdds a handler function and generates a physical resource id.\r\n\r\nUses the new cdk based test setup, thanks @dominikschubert for the heads up\r\n\r\nAlso thanks to @sannya-singal for helping out with the discover and testing :+1: \r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 24,
        "deletions": 2,
        "changed_files": 3,
        "created_at": "2023-08-16T13:17:20Z",
        "closed_at": "2023-08-21T13:43:12Z",
        "merged_at": "2023-08-21T13:43:12Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nIn order to test the DNS server on arbitrary ports, we need a way to get random free udp ports, similar to the `get_free_tcp_port` utility for tcp.\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\n* Add `get_free_udp_port` utility\r\n* Add a test for said utility\r\n* use `shlex.join` instead of a normal string join for shell commandline in `run_module_as_sudo`\r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 6,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-08-16T11:00:34Z",
        "closed_at": "2023-08-16T12:24:06Z",
        "merged_at": "2023-08-16T12:24:06Z",
        "body": "## Motivation\r\n\r\nNested stacks can also contain transformations and are thus subject to capability checks.\r\nThis caused users to report issues regarding failed stack deployments to pop up in support which this PR aims to prevent.\r\n\r\n## Changes\r\n\r\n- When creating a nested stack (`AWS::CloudFormation::Stack`) it will now always created with all possible capabilities. This should be fixed when migrating to a resource provider.\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 35,
        "deletions": 8,
        "changed_files": 2,
        "created_at": "2023-08-16T08:51:35Z",
        "closed_at": "2023-08-16T09:58:49Z",
        "merged_at": "2023-08-16T09:58:49Z",
        "body": "## Motivation\r\n\r\nWe recently had a couple of changes in our `airspeed` for, for better AWS parity - see also recent PR #8914 .\r\n\r\nOne of the main changes is that booleans are now properly rendered as `true`/`false`, and not via the Python syntax `True`/`False`.\r\n\r\nThis leads to some potential issues in API Gateway (detected by upstream tests in -ext). In the API GW `ResponseTemplates` we were using `ast.literal_eval`, instead of proper `json.loads`, mainly to be able to deal with the booleans in Python syntax. This is fixed in this PR, `ast.literal_eval` is replaced by `json.loads`, and the logic is extended with a small unit test to cover this functionality.\r\n\r\n## Changes\r\n\r\n* fix parsing of booleans in API Gateway Velocity templates (replace `ast.literal_eval` with `json.loads`)\r\n* add a small unit test to cover this functionality (also a negative test which shows that booleans like `False` are no longer in the templates)",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 279,
        "deletions": 147,
        "changed_files": 14,
        "created_at": "2023-08-15T22:13:57Z",
        "closed_at": "2023-08-22T21:48:19Z",
        "merged_at": "2023-08-22T21:48:19Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nMove the s3 pre-signed handler earlier in the handler chain, so that we can modify the request in the `RequestContext` before actually parsing it: this allows us to fully use the ASF parser. \r\nWhen pre-signing a request, the S3 client will move some of the request parameters into the query string, when those parameters would be in the headers. Now, the pre-signed handler will add back some headers that we know should be in there, and the parser will properly pick it up. \r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\nCreate a general pre-signed handler in the handler chain, which will be able to manage more kind of pre-signed URL than S3. Only S3 is implemented now. Some logic had to be changed in the handler, because we were using the previously parsed `Bucket` from the request. We now need to parse it ourselves following the same logic as the RequestParser (especially a weird case where we had the sanitized path, and we needed the raw one). \r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 6433,
        "deletions": 1964,
        "changed_files": 23,
        "created_at": "2023-08-15T18:30:20Z",
        "closed_at": "2023-08-16T20:21:41Z",
        "merged_at": null,
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nTBD\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\nTBD\r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-08-15T15:19:50Z",
        "closed_at": "2023-10-19T08:38:27Z",
        "merged_at": "2023-10-19T08:38:27Z",
        "body": "See\r\n\r\nhttps://github.com/etspaceman/kinesis-mock/releases/tag/v0.4.4\r\n\r\nand\r\n\r\nhttps://github.com/etspaceman/kinesis-mock/releases/tag/v0.4.3\r\n\r\nNotice that these releases introduce some interesting new items:\r\n\r\n- http2 support\r\n- Fix for persistence path\r\n\r\nI have not updated anything outside of the version. But I'd be happy to have some guidance to update any related items here.\r\n\r\n<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\n\r\nBump kinesis-mock\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\n\r\nUpdates kinesis-mock to 0.4.4\r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 31,
        "deletions": 29,
        "changed_files": 2,
        "created_at": "2023-08-15T13:51:48Z",
        "closed_at": "2023-08-15T19:06:10Z",
        "merged_at": "2023-08-15T19:06:09Z",
        "body": "## Motivation\r\n\r\nThere have been a couple of changes recently in our fork of [`airspeed`](https://github.com/localstack/airspeed) - introducing snapshot tests, improving parity with AWS, etc.\r\n\r\n## Changes\r\n\r\nThis PR updates the version of `airspeed-ext` to `0.6.0`, to leverage the latest enhancements and enhanced parity for Velocity templates in API Gateway and AppSync.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 31,
        "deletions": 6,
        "changed_files": 2,
        "created_at": "2023-08-15T12:55:45Z",
        "closed_at": "2023-08-17T05:54:39Z",
        "merged_at": "2023-08-17T05:54:39Z",
        "body": "## Motivation\r\n\r\nSome of the environment config options did not raise the deprecation warning when used. Although our docs correctly mentioned them as deprecated.\r\n\r\n## Implementation\r\n\r\nThis PR adds marks them as such.\r\n\r\n## To-do\r\n\r\n- [x] Update user docs to unmark `SERVICES` as deprecated\r\n\r\n## Related\r\n\r\nSee https://github.com/localstack/docs/pull/763 where this is synced.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 37,
        "deletions": 18,
        "changed_files": 4,
        "created_at": "2023-08-15T12:24:30Z",
        "closed_at": "2023-08-21T11:53:41Z",
        "merged_at": "2023-08-21T11:53:41Z",
        "body": "## Motivation\r\n\r\nThis PR fixes SNS responses to use the correct region for SigningUrl and not fall back to `us-east-1`.\r\n\r\nFurthermore, the retrospection endpoint tests are fixed to properly take into account that `TEST_AWS_REGION` variable may change.\r\n\r\n## Tests\r\n\r\nFor the first change above, following tests make use of snapshots that confirm the behaviour.\r\n\r\n```\r\nFAILED tests/aws/test_sns.py::TestSNSProvider::test_publish_unicode_chars\r\nFAILED tests/aws/test_sns.py::TestSNSProvider::test_filter_policy\r\nFAILED tests/aws/test_sns.py::TestSNSProvider::test_exists_filter_policy\r\nFAILED tests/aws/test_sns.py::TestSNSProvider::test_subscribe_sqs_queue\r\nFAILED tests/aws/test_sns.py::TestSNSProvider::test_sns_topic_as_lambda_dead_letter_queue\r\nFAILED tests/aws/test_sns.py::TestSNSProvider::test_redrive_policy_lambda_subscription\r\nFAILED tests/aws/test_sns.py::TestSNSProvider::test_create_topic_test_arn - A...\r\nFAILED tests/aws/test_sns.py::TestSNSProvider::test_publish_message_by_target_arn\r\nFAILED tests/aws/test_sns.py::TestSNSProvider::test_publish_message_before_subscribe_topic\r\nFAILED tests/aws/test_sns.py::TestSNSProvider::test_publish_by_path_parameters\r\nFAILED tests/aws/test_sns.py::TestSNSProvider::test_publish_sqs_from_sns\r\nFAILED tests/aws/test_sns.py::TestSNSProvider::test_publish_sqs_from_sns_with_xray_propagation\r\nFAILED tests/aws/test_sns.py::TestSNSProvider::test_redrive_policy_sqs_queue_subscription[False]\r\nFAILED tests/aws/test_sns.py::TestSNSProvider::test_message_attributes_not_missing\r\nFAILED tests/aws/test_sns.py::TestSNSProvider::test_subscribe_external_http_endpoint[True]\r\nFAILED tests/aws/test_sns.py::TestSNSProvider::test_subscribe_external_http_endpoint[False]\r\nFAILED tests/aws/test_sns.py::TestSNSProvider::test_subscription_after_failure_to_deliver\r\nFAILED tests/aws/test_sns.py::TestSNSProvider::test_message_structure_json_to_sqs\r\nFAILED tests/aws/test_sns.py::TestSNSProvider::test_filter_policy_on_message_body[False]\r\nFAILED tests/aws/test_sns.py::TestSNSProvider::test_filter_policy_for_batch\r\n```\r\n\r\nIn fact, this is how this bug was discovered. See https://github.com/localstack/localstack/pull/8204\r\n",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 6668,
        "deletions": 2182,
        "changed_files": 24,
        "created_at": "2023-08-15T00:59:14Z",
        "closed_at": "2023-09-22T08:41:11Z",
        "merged_at": null,
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\n\r\nJust playing around with S3 persistence for the new provider\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\n\r\n* Introduce `SpooledFile` that removes the `Temporary` aspect\r\n* Update storage backend to use `SpooledFile`\r\n  * Create unique deterministic file paths for S3 objects and point spooled files there\r\n  * Implement flush method to write them all to disk\r\n* Implement persistence hooks for S3 provider\r\n* Fix the existing S3 state visitors to work with the new provider. Actually they didn't work correctly! :scream:\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] Write PR description\r\n- [ ] Properly prepare PR\r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n-->\r\n\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2023-08-15T00:00:24Z",
        "closed_at": "2023-08-15T12:16:42Z",
        "merged_at": "2023-08-15T12:16:42Z",
        "body": "Bumps python from `d707899` to `9dd3db7`.\n\n\n[![Dependabot compatibility score](https://dependabot-badges.githubapp.com/badges/compatibility_score?dependency-name=python&package-manager=docker&previous-version=3.10.12-slim-bullseye&new-version=3.10.12-slim-bullseye)](https://docs.github.com/en/github/managing-security-vulnerabilities/about-dependabot-security-updates#about-compatibility-scores)\n\nDependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.\n\n[//]: # (dependabot-automerge-start)\n[//]: # (dependabot-automerge-end)\n\n---\n\n<details>\n<summary>Dependabot commands and options</summary>\n<br />\n\nYou can trigger Dependabot actions by commenting on this PR:\n- `@dependabot rebase` will rebase this PR\n- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it\n- `@dependabot merge` will merge this PR after your CI passes on it\n- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it\n- `@dependabot cancel merge` will cancel a previously requested merge and block automerging\n- `@dependabot reopen` will reopen this PR if it is closed\n- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually\n- `@dependabot show <dependency name> ignore conditions` will show all of the ignore conditions of the specified dependency\n- `@dependabot ignore this major version` will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot ignore this minor version` will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot ignore this dependency` will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)\n\n\n</details>",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1012,
        "deletions": 506,
        "changed_files": 7,
        "created_at": "2023-08-14T18:20:38Z",
        "closed_at": "2023-08-22T14:28:28Z",
        "merged_at": "2023-08-22T14:28:28Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nImplementing the missing PostObject operation, which is needed for pre-signed POST requests. \r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\n`PostObject` is a bit of a weird operation in itself because everything is in a form, and the parser doesn't handle this kind of request right now, and maybe it shouldn't just for one operation. So most of the \"parsing\" is done directly in the provider method. I've added a bit more features than moto, as we now handle encryption parameters, tagging, and more response fields.\r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 28,
        "deletions": 3,
        "changed_files": 2,
        "created_at": "2023-08-14T11:56:27Z",
        "closed_at": "2023-08-16T07:14:15Z",
        "merged_at": "2023-08-16T07:14:15Z",
        "body": "### Summary\r\n\r\nThis PR enables `Scan` and `Query` operations to work on Global Tables.\r\n\r\n### Tests\r\n\r\nAn existing global tables tests is modified to make additional assertions on these operations.\r\n\r\n### Related\r\n\r\nCloses: #8824",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 60,
        "deletions": 0,
        "changed_files": 3,
        "created_at": "2023-08-14T05:04:18Z",
        "closed_at": "2023-08-15T12:16:09Z",
        "merged_at": "2023-08-15T12:16:09Z",
        "body": "# \ud83d\ude80 ASF Update Report \ud83d\ude80\nThis PR has been automatically generated to update the generated API stubs for our ASF services.\nIt uses the latest code-generator from the _master_ branch ([scaffold.py](https://github.com/localstack/localstack/blob/master/localstack/aws/scaffold.py)) and the latest _published_ version of [botocore](https://github.com/boto/botocore) to re-generate all API stubs which are already present in the `localstack.aws.api` module of the _master_ branch.\n\n## \ud83d\udd04 Updated Services\nThis PR updates the following services:\n- config\n- ec2\n- swf\n\n## \ud83d\udc77\ud83c\udffd Handle this PR\nThe following options describe how to interact with this PR / the auto-update:\n\n\u2714\ufe0f **Accept Changes**\nIf the changes are satisfying, just squash-merge the PR and delete the source branch.\n\n\ud83d\udeab **Ignore Changes**\nIf you want to ignore the changes in this PR, just close the PR and *do not delete* the source branch. The PR will not be opened and a new PR will not be created for as long as the generated code does not change (or the branch is deleted). As soon as there are new changes, a new PR will be created.\n\n\u270f\ufe0f **Adapt Changes**\n*Don't do this.* The APIs are auto-generated. If you decide that the APIs should look different, you have to change the code-generation.\n\n\u23f8\ufe0f **Pause Updates**\nRemove the cron-schedule trigger of the GitHub Action workflow which creates these PRs. The action can then still be triggered manually, but it will not be executed automatically.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 977,
        "deletions": 150,
        "changed_files": 9,
        "created_at": "2023-08-13T00:47:44Z",
        "closed_at": "2023-08-21T18:42:00Z",
        "merged_at": "2023-08-21T18:42:00Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nImplement S3 Bucket and Object ACL, even if not enforced, in the new S3 provider.\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\nThis combines Moto ACL implementation with the fixes we have in moto-ext. For this we are not going the extra miles, keeping the same functionality as we had. As we do not enforce ACL at the moment, this is fine. AWS does not encourage the use of ACL now.\r\nAlso added some tests for `GetObjectACL`/`PutObjectACL` which were missing.\r\nThis PR implements:\r\n- `PutBucketACL`\r\n- `GetObjectACL`\r\n- `PutObjectACL`\r\n- `GetObjectACL`\r\n- Support for ACL in following operations:\r\n  - `PutObject`\r\n  - `CreateMultipartUpload`\r\n  - `CopyObject`\r\n\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 529,
        "deletions": 347,
        "changed_files": 6,
        "created_at": "2023-08-13T00:45:14Z",
        "closed_at": "2023-08-16T16:15:55Z",
        "merged_at": "2023-08-16T16:15:55Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nImplement S3 BucketLogging and BucketReplication mocking, only adding validation but not actually emulating the replication.\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\nAdded a small fix regarding locking when accessing a Multipart, to not create it twice.\r\nImplemented the following API operations:\r\n- `PutBucketLogging`\r\n- `GetBucketLogging`\r\n- `PutBucketReplication`\r\n- `GetBucketReplication`\r\n- `DeleteBucketReplication`\r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 405,
        "deletions": 80,
        "changed_files": 7,
        "created_at": "2023-08-12T18:12:28Z",
        "closed_at": "2023-08-16T22:48:21Z",
        "merged_at": "2023-08-16T22:48:21Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nAdds missing support for StepFunction's `sync:2` resource invocations, contributing to the greenification of https://github.com/localstack/localstack/pull/8779, which sets StepFunction v2 as default provider.\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\n- Cleanup of `ResourceArn` and `Resource` objects.\r\n- Added `sync:2` logic to `sfn`'s task resolver. \r\n- Added `sync:2` snapshot test for `sfn`'s task resolver. \r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 151,
        "deletions": 32,
        "changed_files": 4,
        "created_at": "2023-08-12T17:53:47Z",
        "closed_at": "2023-08-16T09:24:19Z",
        "merged_at": "2023-08-16T09:24:19Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\n\r\nResults from investigating https://localstack-community.slack.com/archives/CMAFN2KSP/p1690375365040599\r\n\r\nThe SQS integration was missing the response template logic\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\n\r\nJust add the response template to the integration.\r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-08-11T19:04:40Z",
        "closed_at": "2023-08-15T12:33:37Z",
        "merged_at": "2023-08-15T12:33:37Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\n\r\nFix for #8895 \r\n\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\n\r\nSets INITIALIZE_STREAMS for the kinesis-mock\r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n",
        "comments": 5
    },
    {
        "merged": true,
        "additions": 1614,
        "deletions": 48,
        "changed_files": 7,
        "created_at": "2023-08-11T17:16:56Z",
        "closed_at": "2023-08-17T08:45:50Z",
        "merged_at": "2023-08-17T08:45:50Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nAdds support for State Machine versioning to version 2 provider https://github.com/localstack/localstack/issues/8855\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\n\r\nIntroduces State Machine versioning logic. In the provider support is extends to:\r\n\r\n- CreateStateMachine\r\n    - Request\r\n\t    - `publish`\r\n\t\tSet to true to publish the first version of the state machine during creation. The default is false.\r\n\t    - `versionDescription`\r\n\t\tSets description about the state machine version. \r\n    - Response\r\n\t    - `stateMachineVersionArn`\r\n\t        If you set publish the (ARN) that identifies the created state machine version\r\n\r\n- DescribeStateMachine\r\n    - Request\r\n        - `stateMachineArn`\r\n            If you specify a state machine version ARN, this API returns details about that version.\r\n    - Response\r\n        - `description`\r\n\t    The description of the state machine version.\r\n\r\n- DeleteStateMachineVersion\r\n    - Request:\r\n        - `stateMachineVersionArn`\r\n\r\n- ListStateMachineVersions\r\n\r\n- PublishStateMachineVersion\r\n    - Request:\r\n        - `revisionId`\r\n\t\t\tOnly publish the state machine version if the current state machine's revision ID matches the specified ID.\r\n    - Respone:\r\n        - `stateMachineVersionArn`\r\n\r\n- StartExecution\r\n    - Request\r\n        - `stateMachineArn`\r\n    - Response\r\n        \u2014 `executionArn`\r\n\r\n- UpdateStateMachine\r\n    - Request\r\n        - `publish`\r\n            Specifies whether the state machine version is published. The default is false.\r\n    - Response\r\n        - `stateMachineVersionArn`\r\n            The ARN of the published state machine version. If publish else null.\r\n\r\n- ListExecutions\r\n    - Request\r\n        - `stateMachineArn`\r\n            You can also return a list of executions associated with a specific alias or version, by specifying an alias ARN or a version ARN in the stateMachineArn parameter.\r\n\r\n## Testing\r\nAdds snapshot tests for base scenarios in tests:\r\n- `tests.aws.stepfunctions.v2.test_sfn_api_versioning.TestSnfApiVersioning.test_create_with_publish`\r\n- `tests.aws.stepfunctions.v2.test_sfn_api_versioning.TestSnfApiVersioning.test_create_with_version_description_no_publish`\r\n- `tests.aws.stepfunctions.v2.test_sfn_api_versioning.TestSnfApiVersioning.test_create_publish_describe_no_version_description`\r\n- `tests.aws.stepfunctions.v2.test_sfn_api_versioning.TestSnfApiVersioning.test_create_publish_describe_with_version_description`\r\n- `tests.aws.stepfunctions.v2.test_sfn_api_versioning.TestSnfApiVersioning.test_list_delete_version`\r\n- `tests.aws.stepfunctions.v2.test_sfn_api_versioning.TestSnfApiVersioning.test_update_state_machine`\r\n- `tests.aws.stepfunctions.v2.test_sfn_api_versioning.TestSnfApiVersioning.test_publish_state_machine_version`\r\n- `tests.aws.stepfunctions.v2.test_sfn_api_versioning.TestSnfApiVersioning.test_start_version_execution`\r\n- `tests.aws.stepfunctions.v2.test_sfn_api_versioning.TestSnfApiVersioning.test_version_ids_between_deletions`\r\n- `tests.aws.stepfunctions.v2.test_sfn_api_versioning.TestSnfApiVersioning.test_idempotent_publish`\r\n- `tests.aws.stepfunctions.v2.test_sfn_api_versioning.TestSnfApiVersioning.test_empty_revision_with_publish_and_publish_on_creation`\r\n- `tests.aws.stepfunctions.v2.test_sfn_api_versioning.TestSnfApiVersioning.test_empty_revision_with_publish_and_no_publish_on_creation`\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 87,
        "deletions": 28,
        "changed_files": 10,
        "created_at": "2023-08-11T10:51:01Z",
        "closed_at": "2023-08-23T08:42:40Z",
        "merged_at": "2023-08-23T08:42:40Z",
        "body": "This PR make a few fixes to usage of the internal clients to make use of proper account ID/region from request context.\r\n\r\nThis is part of the continuing effort to improve cross account namespacing in LocalStack.",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 18,
        "deletions": 49,
        "changed_files": 4,
        "created_at": "2023-08-10T21:07:01Z",
        "closed_at": "2023-09-13T19:08:36Z",
        "merged_at": null,
        "body": "<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\n\r\nThe `LocalstackContainer` abstraction was introduced before `ContainerConfiguration` existed. We recently started unifying this in #8772 and are continuing to clean up container configuration procedure for @simonrw's work on creating bootstrap tests and cleaner abstractions.\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\n\r\n* Remove the remnants of exposing `ContainerConfiguration` attributes directly through `LocalstackContainer`\r\n* Make sure all configurator hooks operate on `container.config` rather than `container`\r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 417,
        "deletions": 1,
        "changed_files": 7,
        "created_at": "2023-08-10T16:44:20Z",
        "closed_at": "2023-08-16T14:29:31Z",
        "merged_at": "2023-08-16T14:29:31Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nThis PR implements the BucketPolicy and BucketAccelerateConfiguration to the new S3 provider.\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\nThose operations were only implemented in moto. Added a tiny bit of validation for the Bucket Policy, but we should/could go a bit further. \r\nImplemented operations:\r\n- `PutBucketPolicy`\r\n- `GetPolicyPolicy`\r\n- `DeletePolicyPolicy`\r\n- `GetBucketAccelerateConfiguration`\r\n- `PutBucketAccelerateConfiguration`\r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 501,
        "deletions": 8,
        "changed_files": 7,
        "created_at": "2023-08-10T13:04:33Z",
        "closed_at": "2023-08-16T12:36:07Z",
        "merged_at": "2023-08-16T12:36:07Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nImplement Bucket API operations, those are currently only mocked and do not influence S3 behaviour. ObjectOwnership should have some impact, as it should prevent some ACLs to be set on Object, like in AWS. PublicAccessBlock cannot really be enforced, as we do not have the concept of public/anonymous access to S3 (credentials are always being set). It also has some logic tied to `s3control`, where the settings would be the most restrictive between the bucket PublicAccessBlock and the owner ones. As it's only mocked, we currently do not implemented this.\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\nImplement the following API operations:\r\n- `GetBucketOwnershipControls`\r\n- `PutBucketOwnershipControls`\r\n- `DeleteBucketOwnershipControls`\r\n- `GetPublicAccessBlock`\r\n- `PutPublicAccessBlock`\r\n- `DeletePublicAccessBlock`\r\n\r\nAnd the validation snapshot tests that go with it.\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 731,
        "deletions": 88,
        "changed_files": 11,
        "created_at": "2023-08-10T12:47:25Z",
        "closed_at": "2023-08-15T21:12:23Z",
        "merged_at": "2023-08-15T21:12:23Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nThis PR implements a small mocked API, BucketPaymentRequest, which is only mocked currently.\r\nIt was also an opportunity to add functionality to the \"core\" operations that were not done. Also, rounds of CI runs showed small issues in the current logic that were hard to spot earlier.\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\nThis PR implements `BucketRequestPayment` API, which are only mocked and do not have actual effect on the global behaviour of S3 (like moto today).\r\nIt also implements preconditions checks for `HeadObject`, `GetObject` and `CopyObject`. \r\n- https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/If-Match\r\n- https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/If-Unmodified-Since\r\n- https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/If-Modified-Since\r\n- https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/If-None-Match\r\n\r\nIt also implements a pretty unknown feature of S3, which allows you to query the individual parts after you created an object using a MultipartUpload. It uses the behaviour of a `Range` request, even returning the same kind of headers. It is done under the hood by keep the necessary range data when completing a multipart, and using it to construct a range request when a part is being requested. It seems it is done the same way in AWS, we did not have any tests but I had a hunch it was working that way. \r\n\r\nSmall change on the storage engine as well, the ETag is now a property, allowing to be calculated later on if it wasn't done.\r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2231,
        "deletions": 599,
        "changed_files": 13,
        "created_at": "2023-08-10T12:34:09Z",
        "closed_at": "2023-08-15T18:55:08Z",
        "merged_at": "2023-08-15T18:55:08Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nImplement the ObjectLock functionality in the new native S3 provider. This was partially implemented in our provider in order to fix Moto.\r\nhttps://docs.aws.amazon.com/AmazonS3/latest/userguide/object-lock-overview.html\r\nhttps://docs.aws.amazon.com/AmazonS3/latest/userguide/object-lock-managing.html\r\nhttps://docs.aws.amazon.com/AmazonS3/latest/userguide/object-lock.html\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\nThis PR adds the necessary API operations as well as a good amount of snapshot tests.\r\n- `GetObjectLockConfiguration`\r\n- `PutObjectLockConfiguration`\r\n- `GetObjectLegalHold`\r\n- `PutObjectLegalHold`\r\n- `GetObjectRetention`\r\n- `PutObjectRetention`\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 5,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-08-10T10:28:29Z",
        "closed_at": "2023-08-14T08:56:18Z",
        "merged_at": "2023-08-14T08:56:18Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nThe issue comes from a support case: `support_johnagray_u04ebfu5uhg` where user encountered the following error: `('NoneType' object has no attribute 'get'): 'NoneType' object has no attribute 'get'`. \r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\nWe add an if condition to check the attribute value exists and only then update the following values. \r\n\r\n## Testing\r\nWe can try running the sample provided by the user and check if the resolution works. \r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 75,
        "deletions": 41,
        "changed_files": 4,
        "created_at": "2023-08-10T05:54:36Z",
        "closed_at": "2023-08-14T06:02:57Z",
        "merged_at": "2023-08-14T06:02:57Z",
        "body": "This is part of an ongoing effort to making credentials more explicit - by use of well defined access key IDs for testing and internal calls, use of thread-context variables and implicit fallbacks. It is expected that this will improve cross-account functionality in LocalStack.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 54,
        "deletions": 80,
        "changed_files": 4,
        "created_at": "2023-08-09T13:42:27Z",
        "closed_at": "2023-08-09T14:56:20Z",
        "merged_at": "2023-08-09T14:56:20Z",
        "body": "## Motivation\r\n\r\nFurther enhance parity of API Gateway patch operations. Follow-up from  #8836. Addresses #8739 Unfortunately,  #8836 introduced a regression where certain fields of Stages cannot be updated now.\r\n\r\nIn the process of more snapshot testing, I've discovered a few more discrepancies in the moto logic, which are also fixed in this PR (and some obsolete moto patches removed). \r\n\r\n## Changes\r\n\r\n* fix regression to allow updating `/*/*/throttling/burstLimit` stage attributes\r\n* extend the snapshot test to cover this functionality\r\n* remove obsolete moto patches",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-08-09T11:18:37Z",
        "closed_at": "2023-08-09T13:16:05Z",
        "merged_at": "2023-08-09T13:16:05Z",
        "body": "Include part number 10000 in allowed part numbers when checking for PartNumber in UploadPart handler.\r\n\r\nFixes #8869\r\n\r\n## Motivation\r\n\r\nFix a non-conformity with respect to AWS S3 API. Without this fix `localstack` doesn't allow part number 10000 in multipart upload.\r\n\r\n## Changes\r\n\r\nFix part number validation in UploadPart handler",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 22,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2023-08-09T11:08:15Z",
        "closed_at": "2023-08-10T14:50:29Z",
        "merged_at": "2023-08-10T14:50:29Z",
        "body": "## Motivation\r\n\r\nSome users have requested to specify custom IDs for KMS keys. The old `local-kms` KMS provider used to allow preseeding keys on LocalStack startup. This is now a bit more tricky, as with our new provider each key would get a new ID, making it harder for users to create test scripts that rely on static key IDs.\r\n\r\n## Changes\r\n\r\n* Add ability to specify custom IDs for KMS keys. We're using the `_custom_id_` tag key, which is already used in other places, e.g., for [API Gateway](https://docs.localstack.cloud/user-guide/aws/apigateway/#custom-ids-for-api-gateway-resources-via-tags)\r\n* Add a small integration test (marked as `only_localstack`) to cover this functionality\r\n\r\n## TODO\r\n\r\n- [x] Update the docs to cover this new feature\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 622,
        "deletions": 43,
        "changed_files": 2,
        "created_at": "2023-08-09T09:44:01Z",
        "closed_at": "2023-08-09T11:10:37Z",
        "merged_at": "2023-08-09T11:10:37Z",
        "body": "## Motivation\r\n\r\nEntrypoints generation was logging an error related to not being able to find the schema file for the `AWS::OpenSearchService::Domain` resource provider.\r\n\r\nThis provider is not in use yet, but to make the warning go away, I've updated it to the latest scaffolding.\r\n\r\n## Changes\r\n\r\n- Updates `AWS::OpenSearchService::Domain` to latest scaffolding. Doesn't change anything in terms of logic besides removing the old way of handling repeated invocations.\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1968,
        "deletions": 1844,
        "changed_files": 662,
        "created_at": "2023-08-09T09:38:20Z",
        "closed_at": "2023-08-18T14:05:27Z",
        "merged_at": "2023-08-18T14:05:27Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nThis PR matches  the folder structure of our tests to the structure of our services, which mirror the existent apis. This will enable us to better assign services (and their owners) to certain files\r\n\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\n- rename resourcegroups to resource_groups\r\n- create a services/<service_name> folder structure under aws, mirroring our service structure, which mirrors the apis in term.\r\n- moved all service specific tests to their new folder \r\n- updated paths that accessed these files (CODEOWNERS, circle config, etc.)\r\n- updated all moved snapshot files as the testname needed to reflect the new directory\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [x] identify and rename remaining services that don't match the apis\r\n- [x] rename test folders accordingly\r\n\r\n\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 43,
        "deletions": 10,
        "changed_files": 6,
        "created_at": "2023-08-09T06:43:01Z",
        "closed_at": "2023-08-09T11:12:39Z",
        "merged_at": "2023-08-09T11:12:39Z",
        "body": "## Motivation\r\n\r\nTo make sure we don't forget to properly mark tests in `tests/aws/` a new guard in the pytest collection step is introduced which will fail in the collect step, i.e. before attempting to execute any tests.\r\n\r\n## Changes\r\n\r\n- Tests will immediately fail when they have no `@markers.aws.*` attached\r\n- Tests will also immediately fail when they have more than one `@markers.aws.*` attached\r\n- A new step has been added to the preflight job in circleci to fail as early as possible.\r\n\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 357,
        "deletions": 313,
        "changed_files": 4,
        "created_at": "2023-08-08T22:24:12Z",
        "closed_at": "2023-08-15T17:24:43Z",
        "merged_at": "2023-08-15T17:24:43Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nThis PR migrate the current S3 Website router to be compatible with both providers, as well as implementing the BucketWebsite API.\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\nThe current S3 website was very tightly coupled with the moto backend, making it impossible to use with the new provider. We discussed it quickly with @alexrashed, and the internal boto client makes much more sense to use here as it totally abstracts away any difference there might be in the providers. Currently the implementation is the same as the previous one.\r\n\r\nI've also changed some operations to be multi-account aware, so that they're able to access any buckets in any account when using the boto client. \\cc @viren-nadkarni \r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 364,
        "deletions": 23,
        "changed_files": 4,
        "created_at": "2023-08-08T22:20:53Z",
        "closed_at": "2023-08-14T23:52:19Z",
        "merged_at": "2023-08-14T23:52:19Z",
        "body": "## Motivation\r\nThis PR implements/migrate S3 Lifecycle to the new S3 native provider, as well as the following mocked APIs:\r\n- AnalyticsConfiguration\r\n- IntelligentTieringConfiguration\r\n- InventoryConfiguration\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\nThis migrates the code to be compatible with both provider, and implements it in the new provider. As the changes were pretty minimal, I've also migrated simple only mocked APIs as well.\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1782,
        "deletions": 1822,
        "changed_files": 295,
        "created_at": "2023-08-08T19:45:46Z",
        "closed_at": "2023-08-09T12:13:54Z",
        "merged_at": "2023-08-09T12:13:54Z",
        "body": "## Motivation\r\n\r\nNow that we moved many tests into `aws` in https://github.com/localstack/localstack/pull/8828 :boom: , it would be a good chance to standardize package naming within LocalStack: `awslambda` => `lambda_`\r\n\r\n* We already use `localstack/aws/api/lambda_` in the API specs and should be consistent in other parts of the codebase\r\n* Thomas mentioned that a trailing underscore is a Pythonic way to resolve collisions with reserved keywords. PEP 8 mentions that (in a similar context) here: https://peps.python.org/pep-0008/#designing-for-inheritance\r\n* `lambda_` is easier to find in alphabetic ordering because we don't expect to look under awslambda. Anca also mentioned this in last week's demo.\r\n\r\n## Why not?\r\n\r\n- another test renaming (but better bundle them and do all in once).\r\n- ~The release dance breaks the pipeline until the synchronized LS and ext changes are out~\r\n  - After merging, it just blocks the Pro build until the changes are merged there as well\r\n- @giograno Does a change in the model package name break existing Lambda CloudPods?\r\n  - \"Yes it does break existing pods. But I think we should move forward and simply clearly communicate this to users\"\r\n\r\n## Changes\r\n\r\nConsistently refactor `awslambda` into `lambda_`, especially:\r\n\r\n* \u2757 The internal boto client changes from `client.awslambda` to `client.lambda_`\r\n* `localstack/services/awslambda` => `localstack/services/lambda_`\r\n* `tests/aws/awslambda` => `tests/aws/lambda_`\r\n* `tests/unit/services/awslambda` => `tests/unit/services/lambda_`\r\n\r\n## What stays?\r\n\r\n* The S3 storage bucket for Lambda code remains `awslambda-us-east-1-tasks` because of AWS parity.\r\n* The legacy moto constructs called awslambda\r\n* Anything that is related to AWS APIs (e.g., s3control `AwsLambdaTransformation` or CloudFormation resources `AWS::Lambda`)\r\n* The Python AWS CDK called `aws_lambda` uses both: `lambda_` in their [documentation](https://docs.aws.amazon.com/cdk/api/v2/python/aws_cdk.aws_lambda/README.html) and `aws_lambda` in their [samples](https://github.com/ksmin23/my-aws-cdk-examples/tree/main/lambda), so keeping that seems fine.\r\n* @steffyP mentioned that no manual updates are required for updating the [Coverage docs](https://docs.localstack.cloud/references/coverage/coverage_lambda/) accordingly. Thank you for clarifying \ud83d\ude4f \r\n\r\n## TODO\r\n\r\n- [x] Rename the AwsLambda packages\r\n\r\n",
        "comments": 5
    },
    {
        "merged": true,
        "additions": 99,
        "deletions": 97,
        "changed_files": 6,
        "created_at": "2023-08-08T13:17:21Z",
        "closed_at": "2023-08-09T10:41:04Z",
        "merged_at": "2023-08-09T10:41:04Z",
        "body": "This PR removes the last few remaining uses of [Boto Resource](https://boto3.amazonaws.com/v1/documentation/api/latest/guide/resources.html).\r\n\r\nThe fixtures and helpers that make use of Boto Resources are already marked as deprecated. This PR will allow use to soon remove them.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 33,
        "deletions": 1,
        "changed_files": 4,
        "created_at": "2023-08-08T12:52:36Z",
        "closed_at": "2023-08-11T13:57:13Z",
        "merged_at": "2023-08-11T13:57:13Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nTo avoid issues with the `--expose` flag usage, we need a proper field in the container client / client configuration to support this field.\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\n* Add `exposed_ports` parameter to docker client run/start methods\r\n* Add `exposed_ports` field to ContainerConfiguration dataclass and use it\r\n* Add test for exposed ports to make sure they do not actually publish anything.\r\n\r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-08-08T12:32:39Z",
        "closed_at": "2023-08-08T13:53:24Z",
        "merged_at": "2023-08-08T13:53:24Z",
        "body": "## Motivation\r\nA [reported issue](https://github.com/localstack/localstack/issues/8855) with `stepfunctions` revealed that our \"not-implemented\" evaluation for `stepfunctions` is not correct: \r\nCurrently we assume that `500` is only returned when the operation is implemented. However, for stepfunctions we receive the `500` response directly from the stepfunctions-lib, together with the error code `UnsupportedOperation`. \r\nTo reflect that this operation is not implemented, this PR adapts the scripts for the \"capture-not-implemented\" collection. \r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\nFor `stepfunctions` set the status_code to `501` (our internal `Not implemented` code), when we get a return code `500 UnsupportedOperation`\r\n\r\n\r\n\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 666,
        "deletions": 5,
        "changed_files": 126,
        "created_at": "2023-08-08T11:41:57Z",
        "closed_at": "2023-08-08T12:51:01Z",
        "merged_at": "2023-08-08T12:51:01Z",
        "body": "## Motivation\r\n\r\nWe want to start enforcing each test being marked with one of the `@markers.aws.*` pytest markers. As a sort of \"todo\"-marker the `@markers.aws.unknown` marker is added for all tests that so far didn't have either `aws_validated` or `only_localstack` markers\r\n\r\n## Changes\r\n\r\n- Marks each test case that doesn't already have an `markers.aws.*` pytest marker with `@markers.aws.unknown`\r\n\r\n## TODO\r\n\r\n- [x] Identify places where classes have markers assigned\r\n- [x] Identify places where a module has a marker assigned via `pytestmark`\r\n\r\n## Future work\r\n\r\n- Assign `@markers.aws.validated` to any tests that currently have a snapshot\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-08-08T11:09:45Z",
        "closed_at": "2023-08-09T10:10:58Z",
        "merged_at": "2023-08-09T10:10:58Z",
        "body": "Closes:\r\n- https://github.com/localstack/localstack/issues/8559\r\n- https://github.com/localstack/localstack/issues/8518\r\n\r\nExt pipeline are good (minus known failures) :heavy_check_mark: See Ext Integration Tests # 1743",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 898,
        "deletions": 21,
        "changed_files": 4,
        "created_at": "2023-08-08T11:05:42Z",
        "closed_at": "2023-08-16T21:17:44Z",
        "merged_at": "2023-08-16T21:17:44Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\nAdds missing support for `StepFunction`'s `UpdateStateMachine` api calls, contributing to the greenification of https://github.com/localstack/localstack/pull/8779, which sets `StepFunction` `v2` as default provider.\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\nIn `v2` provider:\r\n - implementation of `update_state_machine` endpoint\r\n - cleanups regarding the validation of definitions that now occurs in 2 places (creation and update)\r\n - other minor changes including deepcopying state machines on execution to prevent future updated to change their parameters (as instructed by AWS)\r\n\r\nIn state machine:\r\n - added required logic for revision injection\r\n - moved description output here from the provider to fit the design pattern of executions\r\n\r\n\r\n## Testing\r\nAdded base snapshot scenarios about `update_state_machine`:\r\n- `test_create_update_state_machine_base_definition`\r\n- `test_create_update_state_machine_base_role_arn`\r\n- `test_create_update_state_machine_base_definition_and_role`\r\n- `test_create_update_state_machine_base_update_none`\r\n- `test_create_update_state_machine_same_parameters`\r\n\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1041,
        "deletions": 1041,
        "changed_files": 89,
        "created_at": "2023-08-08T09:57:38Z",
        "closed_at": "2023-08-08T11:21:54Z",
        "merged_at": "2023-08-08T11:21:54Z",
        "body": "## Motivation\r\n\r\nWe've recently introduced new pytest markers in https://github.com/localstack/localstack/pull/8767 and we want to now move towards using these new markers.\r\n\r\n## Changes\r\n\r\nRefactors all `aws_validated` and `only_localstack` markers to `@markers.aws.*`\r\n\r\n## Future work\r\n\r\nA follow-up PR will add `@markers.aws.unknown` markers to all unmarked tests.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 10,
        "changed_files": 3,
        "created_at": "2023-08-08T08:54:45Z",
        "closed_at": "2023-08-09T10:44:14Z",
        "merged_at": "2023-08-09T10:44:14Z",
        "body": "## Motivation\r\n\r\nWhen terminating Docker containers, the cleanup code (if any, running within the container) does not have enough time to finish running. Since the Docker abstraction uses a timeout of 0 seconds, a `SIGKILL` is issued immediately after SIGTERM.\r\n\r\n## Changes\r\n\r\nThis PR changes the default timeout for the stop container operation to 10 seconds. This is same as the Docker library: https://docker-py.readthedocs.io/en/stable/containers.html#docker.models.containers.Container.stop\r\n\r\nExt pipeline is green (excluding known failing tests) :heavy_check_mark: See Ext Integration Tests # 1746\r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 20,
        "deletions": 2,
        "changed_files": 3,
        "created_at": "2023-08-07T21:03:51Z",
        "closed_at": "2023-09-19T14:05:55Z",
        "merged_at": null,
        "body": "## Motivation\r\n\r\nWhen performing `GetAtt` on an opensearch domain for a property that is not present until the domain is marked as \"ready\" caused a deploy error.\r\n\r\n\r\n## Changes\r\n\r\n* wait for opensearch/elasticsearch domain completion\r\n* support returning `DomainEndpoint` from an opensearch/elasticsearch domain when complete without failing the stack\r\n* correctly return the output from the `DomainStatus` field from `fetch_state` since this is the contents of the response to be merged with `properties`\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 107,
        "deletions": 4,
        "changed_files": 5,
        "created_at": "2023-08-07T18:24:20Z",
        "closed_at": "2023-08-08T02:16:06Z",
        "merged_at": "2023-08-08T02:16:06Z",
        "body": "## Motivation\r\nIt appears AWS does not support `Transfer-Encoding: chunked` responses for `GetObject`. We always set the `Content-Length` when returning from `GetObject`, but when passing the request through the Virtual Host proxy, we would remove it every time. \r\n\r\n## Changes\r\nAdded a check for the `Transfer-Encoding` header, so that we now conditionally remove it. Also added a unit test as well as an AWS validated integration tests for S3.\r\n\r\nAlso sneaked in a change, updating an already skipped path for `tests.aws.s3.test_s3_notifications_lambda.TestS3NotificationsToLambda.test_create_object_by_presigned_request_via_dynamodb` which seems to fail sporadically in CI. \r\n\r\n_fixes #8841_",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 196,
        "deletions": 18,
        "changed_files": 3,
        "created_at": "2023-08-07T17:37:36Z",
        "closed_at": "2023-08-08T13:52:45Z",
        "merged_at": "2023-08-08T13:52:45Z",
        "body": "## Motivation\r\nDiscovered a parity issue with events while working on a scenario test for loan broker:  the output of a lambda (`on-success`)  should be send to an EventBridge, and will be written to a `sqs` queue, which finally triggers another lambda. \r\n\r\nThe `send_event_to_target` was triggered by lambda, but was not correctly forwarding the attributes, resulting in an empty body. \r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\n* Fixed the attribute forwarding in `send_event_to_target` for target `events`.\r\n* Also fixed the json-dump for target `sqs` where the event/body should not contain any additional whitespace according to the parity test.\r\n\r\n\r\n## Testing\r\nAdded snapshot test `test_invoke_lambda_eventbridge` for the mentioned scenario using new CDK setup.\r\n\r\n\r\n\r\n\r\n\r\n\r\n",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 25,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2023-08-07T14:31:08Z",
        "closed_at": "2023-08-16T10:25:22Z",
        "merged_at": null,
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? Add context such as related issues, PRs, or documentation. -->\r\n## Motivation\r\n\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\n\r\n\r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 46,
        "deletions": 47,
        "changed_files": 2,
        "created_at": "2023-08-07T06:31:38Z",
        "closed_at": "2023-08-07T10:54:07Z",
        "merged_at": "2023-08-07T10:54:07Z",
        "body": "Fixes resolving of fixtures / autocompletion for PyCharm. When we moved them to `fixtures.py` PyCharm wasn't able to properly resolve the fixtures for some reason which has a simple workaround:  moving them to `conftest.py`.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 24,
        "deletions": 274,
        "changed_files": 3,
        "created_at": "2023-08-07T05:05:13Z",
        "closed_at": "2023-08-07T06:13:39Z",
        "merged_at": "2023-08-07T06:13:39Z",
        "body": "# \ud83d\ude80 ASF Update Report \ud83d\ude80\nThis PR has been automatically generated to update the generated API stubs for our ASF services.\nIt uses the latest code-generator from the _master_ branch ([scaffold.py](https://github.com/localstack/localstack/blob/master/localstack/aws/scaffold.py)) and the latest _published_ version of [botocore](https://github.com/boto/botocore) to re-generate all API stubs which are already present in the `localstack.aws.api` module of the _master_ branch.\n\n## \ud83d\udd04 Updated Services\nThis PR updates the following services:\n- ec2\n- route53\n- scheduler\n\n## \ud83d\udc77\ud83c\udffd Handle this PR\nThe following options describe how to interact with this PR / the auto-update:\n\n\u2714\ufe0f **Accept Changes**\nIf the changes are satisfying, just squash-merge the PR and delete the source branch.\n\n\ud83d\udeab **Ignore Changes**\nIf you want to ignore the changes in this PR, just close the PR and *do not delete* the source branch. The PR will not be opened and a new PR will not be created for as long as the generated code does not change (or the branch is deleted). As soon as there are new changes, a new PR will be created.\n\n\u270f\ufe0f **Adapt Changes**\n*Don't do this.* The APIs are auto-generated. If you decide that the APIs should look different, you have to change the code-generation.\n\n\u23f8\ufe0f **Pause Updates**\nRemove the cron-schedule trigger of the GitHub Action workflow which creates these PRs. The action can then still be triggered manually, but it will not be executed automatically.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1077,
        "deletions": 659,
        "changed_files": 10,
        "created_at": "2023-08-06T15:12:33Z",
        "closed_at": "2023-08-08T09:48:12Z",
        "merged_at": "2023-08-08T09:48:12Z",
        "body": "Enhance parity around API Gateway stage patch operations, add implementation for API GW documentation versions. Addresses https://github.com/localstack/localstack/issues/8739\r\n\r\nThe PR also adds some refactoring to the existing tests in `test_apigateway_basic.py` - grouping related tests into test classes, using proper fixtures for resource creation, getting rid of global constants to make tests more self-contained, etc. Still more work needs to be done to get them on par with our other integration tests - introduce more fixtures, add snapshots, etc.\r\n\r\nSummary of changes:\r\n* implement the `update_stage` method in the provider, and perform corresponding patch operations\r\n* adds small changes to fix missing/invalid attributes in the responses for the `create_stage`, `get_stage`, `update_stage` methods\r\n* add implementation for documentation version API methods\r\n* add a snapshot test to validate the behavior of patch operations in stage updates\r\n* add some negative tests for attributes (e.g., `documentation_version`, `tags`)\r\n* refactor some of the tests in `test_apigateway_basic.py` - remove global static constants, add proper fixtures, etc\r\n* left a `TODO` comment in the code to add `createdDate` / `lastUpdatedDate` in Stage operations (to be tackled in a future PR)",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 866,
        "deletions": 14,
        "changed_files": 11,
        "created_at": "2023-08-06T14:14:37Z",
        "closed_at": "2023-08-11T12:47:27Z",
        "merged_at": "2023-08-11T12:47:27Z",
        "body": "## Motivation\r\n\r\nThis PR extends the http framework to let us serve and proxy websockets through the gateway.\r\n\r\nServing websockets through port `:4566` has been on the radar ever since we introduced the ASGI/WSGI bridge. This can replace our current pattern (for example in APIGWv2) where we need to spin up an additional server process and expose it on the external service port range. Moreover, the [need to proxy websockets](https://github.com/localstack/localstack-extensions/tree/main/mailhog#known-limitations) recently appeared when implementing our mailhog extension. @bentsku also pointed out that [ALB supports websocket listeners](https://docs.aws.amazon.com/elasticloadbalancing/latest/application/load-balancer-listeners.html) to proxy websockets to ECS tasks for instance.\r\n\r\nI had some time on my hands on the rainy weekend, so I took a stab at it for fun.\r\n\r\n## Changes\r\n\r\n* Since there is no native WSGI concept for websockets or anything to map it onto, I had to add three interfaces to `localstack.http.asgi`. This layer is not exposed to the developer.\r\n  - `ASGIWebSocket`: an interface which allows you to communicate with the underlying ASGI websocket IO objects in a synchronous way to deal with [ASGI websocket events](https://asgi.readthedocs.io/en/latest/specs/www.html#websocket). \r\n  - `WebSocketEnvironment`: a pseudo-WSGI environment with an additional key `asgi.websocket` that holds the `ASGIWebSocket` object (analogous to how the WSGIEnvironment holds the input stream)\r\n  - `WebSocketListener`: handed to the bridge to call on incoming Websocket connections. It's a callable that accepts `accept(WebSocketEnvironment)`\r\n* Introduced a pseudo Werkzeug Request object `WebSocketRequest` that inherits from a sansio Werkzeug request, wraps the lower level `ASGIWebsocket`, and provides a developer-friendly API to interact with websockets. I say pseudo because, while you can pass the request to *most* handlers in the handler chain, it technically doesn't quite match the contract of `werkzeug.Request`, since there is no meaningful way to resolve `request.data`. This is, however, [identical to how Quart](https://github.com/pallets/quart/blob/206d93f74846fd697650bf85ef1de36c86716d48/src/quart/wrappers/base.py#L16-L17) deals with this.\r\n* To allow us to pass `WebSocketRequest`s to the handler chain, I had to make some slight changes that guard against `request.data` calls, without doing `isinstance` checks. To that end, I re-used Werkzeug's [`Request.shallow`](https://github.com/pallets/werkzeug/blob/41b74e7a92685bc18b6a472bd10524bba20cb4a2/src/werkzeug/wrappers/request.py#L48-L51) flag, and added checks for that in a couple of places. (side note: passing a shallow Request through the handler chain after each test run could help us identify handlers which mistakenly call `request.data`)\r\n\r\n## Discussion\r\n\r\nProbably the most controversial part of the PR is whether we should really pass `WebSocketRequest`s through the handler chain by default: https://github.com/localstack/localstack/blob/ddbe3712e2cbe23119aed0a27dcf1f3cdff0e39a/localstack/aws/gateway.py#L40-L43\r\n\r\nOr whether it should be a completely separate control path.\r\n\r\nThe nice thing is that *most* handlers will actually work since they only operate on the URL and headers. Which is great because we can re-use the router, CORS enforcer, request logger, etc. However, if there's a handler in the request-preprocessor that accesses `request.data`, that will block any WebsocketRequests from working, so they would all have to do a `if request.shallow` check from now on. Also, the type checker will complain since a `WebsocketRequest` does not technically match the `werkzeug.Request` contract fully.\r\n\r\nI did play around with having a separate \"WebsocketHandlerChain\" or \"WebsocketRouter\", which create a completely separate control flow for websockets to avoid the contract issue. It didn't seem very productive. I think it's better to look into maybe improving the handler, handlerchain, and request context to better handle the types and use `is request.scheme in [\"ws\", \"wss\"]` or similar checks at runtime.\r\n\r\n\r\n## Usage\r\n\r\n### Routes:\r\n\r\nThere's a new method called `WEBSOCKET`, which can be used to register routes that deal with websocket requests:\r\n\r\n```python\r\n@route(\"/echo/<name>\", methods=[\"WEBSOCKET\"])\r\ndef echo_handler(request: WebSocketRequest, name: str):\r\n    with request.accept() as websocket:\r\n        websocket.send(f\"thanks for connecting {name}\")\r\n        for line in websocket:\r\n            websocket.send(f\"echo: {line}\")\r\n            if line == \"exit\":\r\n                websocket.send(\"ok bye!\")\r\n                return\r\n```\r\n\r\nThis actually works when you drop it into the edge router :zany_face:\r\n\r\n```python\r\n@hooks.on_infra_start()\r\ndef add_websocket_demo_handler():\r\n    from localstack.services.edge import ROUTER\r\n\r\n    ROUTER.add(echo_handler)\r\n```\r\n\r\n### Proxy:\r\n\r\nyou can now write application layer websocket proxies like this (just a PoC, tested with our mailhog extension):\r\n\r\n```python\r\ndef websocket_proxy(forward_base_url: str):\r\n    def _proxy(request: WebSocketRequest, methods=[\"WEBSOCKET\"], *args, **kwargs):\r\n        url = f\"{forward_base_url.rstrip('/')}{request.path}\"\r\n\r\n        backend = websocket.WebSocket()\r\n\r\n        # TODO: forward headers, react to 403 from backend and such\r\n        backend.connect(url)\r\n        ws = request.accept()\r\n\r\n        def _recv_thread():\r\n            # receive from backend connection and forward to client\r\n            try:\r\n                for _data in backend:\r\n                    ws.send(_data)\r\n            except websocket.WebSocketConnectionClosedException:\r\n                pass\r\n\r\n        t = threading.Thread(target=_recv_thread)\r\n        t.start()\r\n\r\n        # receive from client connection and forward to backend\r\n        for line in ws:\r\n            backend.send(line)\r\n\r\n        ws.close()\r\n        backend.close()\r\n\r\n    return _proxy\r\n```\r\n\r\nnow just add the proxy to the router (needs to be added as separate route because `ProxyHandler` cannot deal with websockets - could look into that though so it handles websockets transparently).\r\n```python\r\n    ROUTER.add(\r\n        \"/api/v2/websocket\",\r\n        host=f\"{hostname_prefix}<host>\",\r\n        endpoint=websocket_proxy(\"ws://localhost:8025/\"),\r\n    )\r\n```\r\n\r\n## Testing\r\n\r\nThe example is in the demo commit ddbe3712, so you can just checkout the branch, run `make entrypoints`, and start in host mode to try it out.\r\n\r\n```console\r\npython -m localstack.runtime.main\r\n```\r\n\r\n```console\r\nnpm install -g wscat\r\nwscat -c localhost:4566/echo/localstack\r\n```\r\n\r\n**update**: i removed the demo commit now, and there are a bunch of unit and integration tests\r\n\r\n## TODO\r\n\r\n- [x] clarify whether we accept the slight contract mismatch between `WebsocketRequest` and the handler chain to get maximum reusability of our handlers\r\n- [x] extend `WebsocketRequest` with useful features\r\n- [x] tests\r\n- [x] remove the demo commit ddbe3712",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 25,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-08-05T16:53:10Z",
        "closed_at": "2023-08-07T12:09:20Z",
        "merged_at": "2023-08-07T12:09:20Z",
        "body": "<!-- Please refer to the contribution guidelines before raising a PR: https://github.com/localstack/localstack/blob/master/CONTRIBUTING.md -->\r\n\r\n<!-- Why am I raising this PR? -->\r\n## Motivation\r\n\r\nIt's been on the TODO list for a long time to create a PR template. The initial attempt in #6084 ended up becoming stale, mostly because the template was a little too involved. Moreover, the long list of check boxes in the template lead to all issues having something like \"2 of 14 tasks\" indicators in the overview, which is a bit misleading, since some of them are single choice lists so PRs will always appear as incomplete unless you delete the list of tasks.\r\n\r\nThe **Motivation** and **Changes** structure has found itself into many PRs by a number of Authors. Examples:\r\n* https://github.com/localstack/localstack/pull/8251\r\n* https://github.com/localstack/localstack/pull/8289\r\n* https://github.com/localstack/localstack/pull/8772\r\n* https://github.com/localstack/localstack/pull/7600\r\n* https://github.com/localstack/localstack/pull/7482\r\n* https://github.com/localstack/localstack/pull/8602\r\n* https://github.com/localstack/localstack/pull/1047\r\n\r\nSo it seems this could a good minimal standard structure!\r\n\r\n<!-- What notable changes does this PR make? -->\r\n## Changes\r\n\r\n* Update the pull_request_template.md with a bare-bone template and some additional optional sections behind comments\r\n* Added very brief comments what to write into the section (keep it simple)\r\n* Added some additional optional sections (Testing and TODO, which I've found useful in the past)\r\n* Moved the hint about contribution guidelines into a comment to make sure we don't end up with more PRs that just have that in their description\r\n \r\n<!-- The following sections are optional, but can be useful! \r\n\r\n## Testing\r\n\r\nDescription of how to test the changes\r\n\r\n## TODO\r\n\r\nWhat's left to do:\r\n\r\n- [ ] ...\r\n- [ ] ...\r\n\r\n-->\r\n\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1162,
        "deletions": 1069,
        "changed_files": 10,
        "created_at": "2023-08-04T23:09:35Z",
        "closed_at": "2023-08-07T18:07:55Z",
        "merged_at": "2023-08-07T18:07:55Z",
        "body": "This PR regenerates all S3 snapshots. It might have been nice to actually split the S3 tests before regenerating the snapshots, but there are currently at least 7 open PRs targeting S3, most of them adding tests.\r\n\r\nI'll tackle the split of the tests in the next weeks, and I'll move the snapshots manually then. ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 736,
        "deletions": 12,
        "changed_files": 11,
        "created_at": "2023-08-04T19:51:29Z",
        "closed_at": "2023-08-11T19:25:13Z",
        "merged_at": "2023-08-11T19:25:13Z",
        "body": "Enhances the support for empty fail states (where no error nor cause is defined), so that these can be handled by catch/retry statements. Adds relevant tests too.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1559,
        "deletions": 1434,
        "changed_files": 879,
        "created_at": "2023-08-04T16:00:35Z",
        "closed_at": "2023-08-07T20:50:15Z",
        "merged_at": "2023-08-07T20:50:15Z",
        "body": "Partitions our current integration test suite into `tests/aws/` and `tests/integration/` with the following meaning:\r\n\r\n`tests/aws/` ... integration tests that target one or more AWS services. All tests in here will be assigned a marker to declare their AWS compatibility status. Please note that for now also tests that by design won't run against AWS but are still targeting a specific service feature will be included here. This includes certain service \"backdoors\" as well as other value-adds or debugging options.\r\n\r\n`tests/integration/` ... any other integration test that needs a localstack instance but doesn't target a specific service.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 745,
        "deletions": 379,
        "changed_files": 12,
        "created_at": "2023-08-04T15:12:07Z",
        "closed_at": "2023-08-04T19:20:08Z",
        "merged_at": "2023-08-04T19:20:08Z",
        "body": "- Raises InvalidDefinition errors when an incorrect/unsupported ASL derivation is provided on create_state_machine calls\r\n- enables relevant test\r\n- Adds fixes to the parser including to retry declaration for which multiple retry conditions could not be parsed, and other minors\r\n- Adds multiple retry test to fix the parser's logic",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-08-04T11:00:44Z",
        "closed_at": "2023-08-04T15:14:50Z",
        "merged_at": "2023-08-04T15:14:50Z",
        "body": "Certain users seem to have issues fetching the lambda init from GitHub which made us notice that we're not actually bundling it into the built Docker container. \r\n\r\nIt's probably sensible to ship the lambda runtime init by default",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1912,
        "deletions": 542,
        "changed_files": 37,
        "created_at": "2023-08-04T11:00:01Z",
        "closed_at": "2023-08-23T05:31:25Z",
        "merged_at": "2023-08-23T05:31:25Z",
        "body": "This PR adds account and region awareness to Cloudformation.\r\n\r\nIt will now be possible to deploy Cfn stack in any arbitrary account ID and any region.\r\n\r\nSpecifically, this PR makes the following changes:\r\n- Take the account ID and region name from Request Context and explicitly pass it down the call stack\r\n- Use these values when instantiating `connect_to()` clients and doing internal cross-service calls\r\n- Remove use of `aws_stack.get_region()` and `get_account_id()`",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 5439,
        "deletions": 8,
        "changed_files": 11,
        "created_at": "2023-08-04T09:13:46Z",
        "closed_at": "2023-08-04T18:05:00Z",
        "merged_at": "2023-08-04T18:05:00Z",
        "body": "Removed redundant lambda payload cleanups that caused failures whenever payloads were not json dictionaries.\r\nAdds relevant tests.\r\nFixes deprecated events initiation call in Execution objects.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 11,
        "deletions": 16,
        "changed_files": 1,
        "created_at": "2023-08-03T14:35:09Z",
        "closed_at": "2023-08-03T23:35:09Z",
        "merged_at": "2023-08-03T23:35:09Z",
        "body": "There has been so CI failures for the streaming provider lately regarding releasing of un-acquired locks, but all of them were used with context managers, which means they had to be acquired at some point?\r\n\r\nI think the[ documentation of the library](https://github.com/elarivie/pyReaderWriterLock) was a bit misleading, having to generate a lock every time you need one seems quite weird, but it seems it's how the library is supposed to be used and that's why it was failing, my mistake.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 13,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-08-03T14:20:20Z",
        "closed_at": "2023-08-03T19:02:38Z",
        "merged_at": "2023-08-03T19:02:38Z",
        "body": "Something I forgot to add with #8772, was to also configure the `MAIN_DOCKER_NETWORK` variable automatically.",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 21,
        "deletions": 5,
        "changed_files": 2,
        "created_at": "2023-08-03T11:41:21Z",
        "closed_at": "2023-08-03T19:12:11Z",
        "merged_at": "2023-08-03T19:12:11Z",
        "body": "Tiny fixes to support CLI use with Python 3.8. Discovered this while working on a support case of a customer who attempted to install the AWS replicator/proxy extension.\r\n\r\nCan be replicated when installing Python 3.8 via `pyenv`, and then:\r\n```\r\n$ DEBUG_PLUGINS=1 localstack -d extensions install localstack-extension-aws-replicator\r\nDEBUG:stevedore._cache:reading /Users/whummer/Library/Caches/Python Entry Points/5e2a6eb1bdd93e1d7b62ee754448916f77349878c2468e3c113c4965f6f6e4d7\r\nDEBUG:stevedore.extension:found extension EntryPoint(name='ext-all', value='localstack_ext.cli.localstack:ExtCliPlugin', group='localstack.plugins.cli')\r\nERROR:plugin.manager:error importing entrypoint EntryPoint(name='ext-all', value='localstack_ext.cli.localstack:ExtCliPlugin', group='localstack.plugins.cli'): 'type' object is not subscriptable\r\nDEBUG:stevedore.extension:found extension EntryPoint(name='pro', value='localstack_ext.cli.localstack:ProLoggedInCliPlugin', group='localstack.plugins.cli')\r\nERROR:plugin.manager:error importing entrypoint EntryPoint(name='pro', value='localstack_ext.cli.localstack:ProLoggedInCliPlugin', group='localstack.plugins.cli'): 'type' object is not subscriptable\r\n```\r\n\r\nAdded a simple test to assert that the module can get imported, which should be picked up by our `cli-tests` GH Action (which is parametrized for different Python versions). Over time we could consider adding an extensions CLI test for different Python versions (but probably not really high prio).",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 7,
        "deletions": 6,
        "changed_files": 1,
        "created_at": "2023-08-03T02:01:59Z",
        "closed_at": "2023-08-03T10:04:13Z",
        "merged_at": "2023-08-03T10:04:13Z",
        "body": "Just realised I had 101 buckets in my AWS account after doing some S3 testing, and seeing `TooManyBuckets` rang a bell somewhere \ud83d\ude04\ud83d\udea8 \r\n\r\nYou need to even delete `DeleteMarkers`, otherwise your bucket is not considered empty. It's weird, but that's how it is \ud83e\udd37\u200d\u2642\ufe0f\r\nI tried the fixture against my 101 buckets and it worked, cleaned them up and deleted them.  ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 510,
        "deletions": 338,
        "changed_files": 6,
        "created_at": "2023-08-03T01:36:54Z",
        "closed_at": "2023-08-14T21:22:19Z",
        "merged_at": "2023-08-14T21:22:19Z",
        "body": "This PR implements CORS for the new S3 native provider. This is basically just to make it compatible between both provider. ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 12,
        "deletions": 1,
        "changed_files": 3,
        "created_at": "2023-08-03T00:16:19Z",
        "closed_at": "2023-08-03T11:41:58Z",
        "merged_at": "2023-08-03T11:41:58Z",
        "body": "This PR fixes #8812, we were not returning early if the payload was empty, and we were trying to validate it. \r\n\r\nAdded an AWS test validated this. ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1305,
        "deletions": 17,
        "changed_files": 7,
        "created_at": "2023-08-03T00:03:32Z",
        "closed_at": "2023-08-12T17:42:46Z",
        "merged_at": "2023-08-12T17:42:46Z",
        "body": "This PR implements all tagging related operations and usage:\r\n\r\nTagging with:\r\n- PutObject\r\n- CopyObject (and `TaggingDirective`) \r\n- PutObjectTagging\r\n- DeleteObjectTagging\r\n- GetObjectTagging\r\n- PutBucketTagging\r\n- DeleteBucketTagging\r\n- GetBucketTagging\r\n\r\nAs well as S3 notifications support for Put/Delete object tagging. ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 134,
        "deletions": 8,
        "changed_files": 5,
        "created_at": "2023-08-02T16:48:32Z",
        "closed_at": "2023-08-25T12:06:06Z",
        "merged_at": "2023-08-25T12:06:06Z",
        "body": "Fixes #8596.\r\n\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-08-02T14:58:30Z",
        "closed_at": "2023-08-02T16:51:00Z",
        "merged_at": "2023-08-02T16:51:00Z",
        "body": "Fixes #8805\r\n\r\nCurrently, we do not pass `LAMBDA_KEEPALIVE_MS` from the CLI to the container, this was an oversight which is now corrected.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 88,
        "deletions": 15,
        "changed_files": 6,
        "created_at": "2023-08-02T13:56:21Z",
        "closed_at": "2023-08-04T06:32:17Z",
        "merged_at": "2023-08-04T06:32:17Z",
        "body": "This PR adds the [`pytest-tinybird`](https://github.com/tinybirdco/pytest-tinybird) plugin to the test dependencies and modifies all GitHub and CircleCI test workflows such that they send the test data to the Tinybird workspace `localstack_ci` (if the pipeline is executed on master).\r\nThis data-driven approach will help us to gain more insights into our tests (automatically identify flaky tests, create individual health dashboards, setup a notification infrastructure,...).\r\n\r\nTODO:\r\n- [x] Check that data from all pipelines is sent correctly.\r\n  - [x]  CircleCI\r\n      - [x]  Run Locally (`make test-coverage`)\r\n          - [x]  itest-s3-stream-provider\r\n          - [x]  itest-lambda-legacy-local\r\n          - [x]  itest-sfn-v2-provider\r\n          - [x]  unit-tests\r\n      - [x]  Run in Docker (`make docker-run-tests`)\r\n          - [x]  docker-test-arm64\r\n          - [x]  docker-test-amd64\r\n  - [x]  GitHub\r\n      - [x]  cli-tests\r\n      - [x]  Community Integration Tests against Pro\r\n      - [x]  tests-podman\r\n- [x] Switch branch filter to master once the changes have been tested.\r\n- [x] (Right before the merge) Truncate all data sources before merging (fresh start).",
        "comments": 3
    },
    {
        "merged": false,
        "additions": 1257,
        "deletions": 9,
        "changed_files": 16,
        "created_at": "2023-08-02T10:14:10Z",
        "closed_at": "2023-09-22T07:26:35Z",
        "merged_at": null,
        "body": "wip\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 165,
        "deletions": 3,
        "changed_files": 3,
        "created_at": "2023-08-02T01:38:55Z",
        "closed_at": "2023-08-10T22:12:07Z",
        "merged_at": "2023-08-10T22:12:07Z",
        "body": "This PR implement notifications for the new native S3 provider.\r\n\r\nOnly 2 types of notifications are missing, concerning ACL and Tagging, because those operations are not yet implemented in the new provider but this will come. The most important was to make it compatible with the new provider. ",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 776,
        "deletions": 53,
        "changed_files": 10,
        "created_at": "2023-08-02T00:23:04Z",
        "closed_at": "2023-08-10T21:15:35Z",
        "merged_at": "2023-08-10T21:15:35Z",
        "body": "This PR implements Bucket Encryption, and sets the new default to `AES256` like AWS does since April 2023.\r\n\r\nIt also implements a feature we've been missing, when not specifying a KMS KeyId when using `aws:kms` encryption, we're now creating and keeping the reference to the AWS managed key. We're however missing an internal way to specify that the key is \"AWS managed\", and not customer managed. \r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 944,
        "deletions": 23,
        "changed_files": 7,
        "created_at": "2023-08-01T21:19:13Z",
        "closed_at": "2023-08-09T14:35:27Z",
        "merged_at": "2023-08-09T14:35:27Z",
        "body": "This PR implements Bucket Versioning in the new native S3 provider. This in turn allowed me to properly tests what I had already written but couldn't test because I couldn't actually enable the versioning, and fix what was wrong. \r\n\r\nThis PR also contains a new feature in the serializer: we couldn't add headers to exceptions, when S3 actually does that. I'm not sure this is common to all XML protocol based services, so I contained it only in S3 for now. I tried to keep the same existing logic as much as I could, but applied to exceptions.\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 667,
        "deletions": 314,
        "changed_files": 22,
        "created_at": "2023-08-01T15:27:36Z",
        "closed_at": "2023-08-25T08:22:44Z",
        "merged_at": "2023-08-25T08:22:44Z",
        "body": "## Motivation\r\n\r\nWe've previously asked team members to give the new resource providers a try. I've revived and adapted the code from https://github.com/localstack/localstack/pull/8390 to create the first \"production\" resource provider `AWS::SQS::Queue`.\r\n\r\nWhile this worked in isolation, tests kepts failing when performing updates on stacks that include an `AWS::SQS::Queue` even when not implementing updates at all because of broken state management.\r\n\r\nThis PR has seen a bit of feature creep but I think it makes sense to bundle at least one new provider with the changes in here.\r\n\r\n\r\n## Changes\r\n- Adds new `AWS::SQS::Queue` resource provider (adapted from from https://github.com/localstack/localstack/pull/8390) \r\n- Makes the new `AWS::SQS::Queue` resource provider enabled by default (i.e. it will supersede the old `GenericBaseModel` version)\r\n- Adds two new fields on the \"MetaResource\" model to explicitly track certain property states\r\n  - `SpecifiedProperties`\r\n  - `_last_deployed_state`\r\n\r\nThese have a much clearer definition now\r\n\r\n- `Properties` ... The currently specified & resolved properties form the template, i.e. without any previous state (=> `desiredState`)\r\n- `SpecifiedProperties` ... The last specified properties. I.e. the `Properties` from the previous resource provider execution.  (=> `previousState`)\r\nExample: 1. create() ... the returned properties will become (?)\r\n- `_state_` ... The last result from a `fetch_state()` call\r\n- `_last_deployed_state` ... snapshot of the merged Properties taken after the last successful resource provider execution. (What was returned in the `ProgressEvent`)\r\n\r\n\r\nThe naming should be changed before merging to reflect their purpose better. In the future we can remove certain parts (`_state_`) and refactor the whole \"MetaResource` Model and its state tracking.\r\n\r\n## Up next\r\n- Now that we can replace models, I'll start with the old ones having update support (implementing `update_resource`) which will mean we can remove all GenericBaseModel-based updates.\r\n- Create registry with schemas for all resource types so that we can make more schema-driven decisions when determining changes and especially replacement strategies.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 14,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-08-01T14:18:18Z",
        "closed_at": "2023-08-03T20:28:53Z",
        "merged_at": "2023-08-03T20:28:53Z",
        "body": "Scaffolding of tests & templates in `tests/integration/...` will now require the additional `-t` flag. \r\nThis is aimed at removing some barriers and relaxing our requirements for new resource providers.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 48,
        "deletions": 40,
        "changed_files": 4,
        "created_at": "2023-08-01T12:01:55Z",
        "closed_at": "2023-08-03T06:09:00Z",
        "merged_at": "2023-08-03T06:09:00Z",
        "body": "This PR makes all client fixtures (`aws_client`, `aws_client_factory`, etc) available to all of our tests suite.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 164,
        "deletions": 89,
        "changed_files": 7,
        "created_at": "2023-08-01T10:13:40Z",
        "closed_at": "2023-08-02T13:15:53Z",
        "merged_at": "2023-08-02T13:15:53Z",
        "body": "## Changes\r\n- Remove `GenericBaseModel.get_cfn_attribute` and unify code paths between legacy and new providers\r\n- Improve stack failure reporting a tiny bit\r\n\r\n\r\nPreviously the ResourceStatusReason on the stack failure was empty, now it's set to the string representation of the caught exception. This is currently only enabled when CFN_VERBOSE_ERRORS is set though. We should probably make this the default though in the next minor release to increase parity. \r\n\r\nNew stack status:\r\n```\r\n{\"LogicalResourceId\": \"stack-9645eb0a\", \"ResourceType\": \"AWS::CloudFormation::Stack\", \"ResourceStatus\": \"CREATE_FAILED\", \"ResourceStatusReason\": \"Resource type AWS::SSM::Parameter does not support attribute {Invalid}\"}\r\n```\r\n\r\nWe might also want to by start failing stacks by default when outputs can't be resolved but since this differs quite a bit from the current behavior I think we should have a deprecation path for this.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 70,
        "deletions": 50,
        "changed_files": 4,
        "created_at": "2023-08-01T08:26:25Z",
        "closed_at": "2023-08-02T09:19:56Z",
        "merged_at": "2023-08-02T09:19:56Z",
        "body": "This PR upgrades `kinesis-mock` to the new version `0.4.1`, which migrates to ScalaJS (with https://github.com/etspaceman/kinesis-mock/pull/531).\r\nIt creates a new `NodePackageInstaller` which handles the installation of `npm` packages in LocalStack.\r\n\r\nThanks to @etspaceman for the heads-up, and the discussions prior to the release!\r\nFixes #8680",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2023-08-01T06:28:57Z",
        "closed_at": "2023-08-01T08:30:53Z",
        "merged_at": "2023-08-01T08:30:53Z",
        "body": "This PR reverts the installation of `pymssql` build-time OS dependencies, introduced in https://github.com/localstack/localstack/pull/8774, after their wheels for the CPython 3 compatible release have been properly built and published (i.e. https://github.com/pymssql/pymssql/issues/832 has been resolved).",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2023-07-31T23:51:17Z",
        "closed_at": "2023-08-01T06:31:59Z",
        "merged_at": "2023-08-01T06:31:58Z",
        "body": "Bumps python from `a704ba2` to `d707899`.\n\n\n[![Dependabot compatibility score](https://dependabot-badges.githubapp.com/badges/compatibility_score?dependency-name=python&package-manager=docker&previous-version=3.10.12-slim-bullseye&new-version=3.10.12-slim-bullseye)](https://docs.github.com/en/github/managing-security-vulnerabilities/about-dependabot-security-updates#about-compatibility-scores)\n\nDependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.\n\n[//]: # (dependabot-automerge-start)\n[//]: # (dependabot-automerge-end)\n\n---\n\n<details>\n<summary>Dependabot commands and options</summary>\n<br />\n\nYou can trigger Dependabot actions by commenting on this PR:\n- `@dependabot rebase` will rebase this PR\n- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it\n- `@dependabot merge` will merge this PR after your CI passes on it\n- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it\n- `@dependabot cancel merge` will cancel a previously requested merge and block automerging\n- `@dependabot reopen` will reopen this PR if it is closed\n- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually\n- `@dependabot ignore this major version` will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot ignore this minor version` will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot ignore this dependency` will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)\n\n\n</details>",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 670,
        "deletions": 18,
        "changed_files": 5,
        "created_at": "2023-07-31T23:43:43Z",
        "closed_at": "2023-08-08T14:50:32Z",
        "merged_at": "2023-08-08T14:50:32Z",
        "body": "This PR builds on #8786, and finishes to introduce basic operations.\r\n\r\n### Implemented operations:\r\n- CreateMultipartUpload\r\n- UploadPart\r\n- UploadPartCopy\r\n- CompleteMultipartUpload\r\n- AbortMultipartUpload\r\n- ListParts\r\n- ListMultipartUploads\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 3779,
        "deletions": 77,
        "changed_files": 19,
        "created_at": "2023-07-31T23:38:57Z",
        "closed_at": "2023-08-08T02:25:59Z",
        "merged_at": "2023-08-08T02:25:59Z",
        "body": "First PR to implement the new S3 native provider not depending on moto. This implements all the basic abstractions, as well as the basic operations around buckets and objects. \r\n\r\nThere are a lot of comments left, as it's still WIP, and this introduces only basic behaviour. We will need to implement all the bucket operations to be able to get the complete behaviour from basic operations. \r\n\r\n### List of implemented operations:\r\n- CreateBucket\r\n- DeleteBucket\r\n- ListBuckets\r\n- HeadBucket\r\n- GetBucketLocation\r\n- PutObject\r\n- GetObject\r\n- HeadObject\r\n- DeleteObject\r\n- DeleteObjects\r\n- CopyObject\r\n- ListObjects\r\n- ListObjectsV2\r\n- GetObjectAttributes\r\n- RestoreObject\r\n\r\n## Abstractions\r\n\r\nThis PR implements new abstractions around S3. We are splitting between \"data\", aka the buckets, objects and metadata around them, and the actual file object containing S3 Objects real content. This will allow us to properly split how we save these for persistence in the next iteration. \r\n\r\nWe're introducing a new S3 `BaseStorageBackend` and `TemporaryStorageBackend`, which abstract away how those S3 file objects, which we will name \"assets\", are stored and retrieved. This will in turn allow us to either have a temporary filesystem, or the real filesystem in case of persistence, and give us greater flexibility.\r\n\r\n\r\nThe last core Operations and Models outside of Object and Bucket configuration are the multipart, coming in #8787\r\n\r\nThere a lot of bugs regarding the versioning code path, because it couldn't be tested before I could enable versioning on the bucket, which is now done and is fixed with #8799. ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 427,
        "deletions": 118,
        "changed_files": 14,
        "created_at": "2023-07-31T16:02:36Z",
        "closed_at": "2023-09-01T14:24:14Z",
        "merged_at": "2023-09-01T14:24:14Z",
        "body": "Add a fixture (and example tests) for black-box testing the LS container. Particularly: starting the container with different configurations and ensuring that it behaves as expected.\n\nThis fixture will be useful for:\n* cli startup tests\n* hypercorn configuration tests\n* environment configuration tests\n* DNS tests\n* persistence tests\n* startup script tests\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 184,
        "deletions": 69,
        "changed_files": 6,
        "created_at": "2023-07-31T14:59:13Z",
        "closed_at": "2023-08-01T16:00:28Z",
        "merged_at": "2023-08-01T16:00:28Z",
        "body": "* Remove deprecated Lambda images from `localstack update all` fixes https://github.com/localstack/localstack/issues/8178\r\n* Remove deprecated Lambda images from diagnose endpoint\r\n* Add current Lambda images to diagnose endpoint fixes https://github.com/localstack/localstack/issues/8393\r\n* Using `RUNTIMES_AGGREGATED[\"python\"]` from conftest instead of manually maintaining an outdated runtime list for Lambda tests\r\n* Update Lambda runtime tests to properly execute with all supported managed runtimes (Python, Node)\r\n* Generate missing Lambda runtime snapshots",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 374,
        "deletions": 37,
        "changed_files": 11,
        "created_at": "2023-07-31T12:22:35Z",
        "closed_at": "2023-08-01T21:10:50Z",
        "merged_at": "2023-08-01T21:10:50Z",
        "body": "\\* extends https://github.com/localstack/localstack/pull/8323\r\n\r\nAdds support and tests for publishing state machine execution events in EventBridge.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 155,
        "deletions": 70,
        "changed_files": 3,
        "created_at": "2023-07-31T10:36:05Z",
        "closed_at": "2023-08-08T15:29:12Z",
        "merged_at": "2023-08-08T15:29:12Z",
        "body": "Following a support case, added a test case validating that AWS does not return CORS headers if no `Origin` header is present, even if the `referer` one is there.\r\n\r\nI took the opportunity to regenerate the snapshots, knowing there was now an issue regarding ACL, so I've added a new fixture to allow ACL on bucket. Something changed on AWS side, so I've fixed a small field for an Exception returned. \r\n\r\nAlso refactored a bit the code to use the fix made in #6865, allowing us to add fields to the exception at instantiation as parameters and not by attaching them directly to the exception object like before. \r\n\r\n\\cc @steffyP for the snapshot regeneration/fixture allowing AWS tests",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 93,
        "deletions": 1,
        "changed_files": 5,
        "created_at": "2023-07-31T05:05:00Z",
        "closed_at": "2023-07-31T08:04:50Z",
        "merged_at": "2023-07-31T08:04:50Z",
        "body": "# \ud83d\ude80 ASF Update Report \ud83d\ude80\nThis PR has been automatically generated to update the generated API stubs for our ASF services.\nIt uses the latest code-generator from the _master_ branch ([scaffold.py](https://github.com/localstack/localstack/blob/master/localstack/aws/scaffold.py)) and the latest _published_ version of [botocore](https://github.com/boto/botocore) to re-generate all API stubs which are already present in the `localstack.aws.api` module of the _master_ branch.\n\n## \ud83d\udd04 Updated Services\nThis PR updates the following services:\n- cloudformation\n- ec2\n- sts\n\n## \ud83d\udc77\ud83c\udffd Handle this PR\nThe following options describe how to interact with this PR / the auto-update:\n\n\u2714\ufe0f **Accept Changes**\nIf the changes are satisfying, just squash-merge the PR and delete the source branch.\n\n\ud83d\udeab **Ignore Changes**\nIf you want to ignore the changes in this PR, just close the PR and *do not delete* the source branch. The PR will not be opened and a new PR will not be created for as long as the generated code does not change (or the branch is deleted). As soon as there are new changes, a new PR will be created.\n\n\u270f\ufe0f **Adapt Changes**\n*Don't do this.* The APIs are auto-generated. If you decide that the APIs should look different, you have to change the code-generation.\n\n\u23f8\ufe0f **Pause Updates**\nRemove the cron-schedule trigger of the GitHub Action workflow which creates these PRs. The action can then still be triggered manually, but it will not be executed automatically.",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 97,
        "deletions": 19,
        "changed_files": 5,
        "created_at": "2023-07-30T19:06:32Z",
        "closed_at": "2023-07-31T23:03:15Z",
        "merged_at": "2023-07-31T23:03:15Z",
        "body": "## Motivation\r\n\r\nThere were a few things that bothered me about the localstack start command:\r\n\r\n* No first-class flags for operations i need often (specifying the docker network, adding environment variables), I dislike using the `DOCKER_FLAGS` for common stuff\r\n* If the docker image is not there, localstack didn't really tell you, and would be pulled implicitly sometime during the startup procedure.\r\n* The \"Localstack Runtime Log\" ruler wasn't placed correctly\r\n\r\n## Changes\r\n\r\n* added a `--network` and `-e` flag to `localstack start` which are handed down to the docker run command. for that i needed to hand down the CLI parameters to the plumbing\r\n* added a check that creates the specified network if it doesn't exist yet\r\n* added an `ensure_container_image` method that checks whether the requested container image is there, and if not, pulls it explicitly (+status indicator)\r\n* added a console status indicator for while the localstack container is still starting up.\r\n\r\n### Startup without docker image\r\n\r\nHere's what the startup looks like now \r\n\r\nhttps://github.com/localstack/localstack/assets/3996682/baeaed4a-5074-4f05-b601-43e743a7db2b\r\n\r\n### LocalStack Runtime Log Rule\r\n\r\nBefore/After (not quite the same startup procedure though, but note the rule is right before the \r\n\r\n![CLI-before](https://github.com/localstack/localstack/assets/3996682/b3ae49a9-8c5a-40ac-a963-8cbb6ceda92e)\r\n![CLI-after](https://github.com/localstack/localstack/assets/3996682/4e4a4e94-4e97-4091-bf32-3caa03769106)\r\n\r\n### Network\r\n\r\nA custom network is much easier now. `localstack` as network could be the default at some point? (cc @cabeaulac @simonrw).\r\n\r\n```console\r\npython -m localstack.cli.main start --network localstack\r\n```\r\n\r\n```console\r\ndocker run --rm -it --network=localstack curlimages/curl http://localstack_main:4566/_localstack/health\r\n{\"services\": {\"acm\": \"available\", \"apigateway\": \"available\", \"cloudformation\": \"available\", \"cloudwatch\": \"available\", \"config\": \"available\", \"dynamodb\": \"available\", \"dynamodbstreams\": \"available\", \"ec2\": \"available\", \"es\": \"available\", \"events\": \"available\", \"firehose\": \"available\", \"iam\": \"available\", \"kinesis\": \"available\", \"kms\": \"available\", \"lambda\": \"available\", \"logs\": \"available\", \"opensearch\": \"available\", \"redshift\": \"available\", \"resource-groups\": \"available\", \"resourcegroupstaggingapi\": \"available\", \"route53\": \"available\", \"route53resolver\": \"available\", \"s3\": \"available\", \"s3control\": \"available\", \"secretsmanager\": \"available\", \"ses\": \"available\", \"sns\": \"available\", \"sqs\": \"available\", \"ssm\": \"available\", \"stepfunctions\": \"available\", \"sts\": \"available\", \"support\": \"available\", \"swf\": \"available\", \"transcribe\": \"available\", \"sso-admin\": \"available\"}, \"version\": \"2.1.1.dev\"}\r\n```\r\n\r\n\r\n## TODO\r\n\r\n- [x] builds on #8771",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 97,
        "deletions": 73,
        "changed_files": 2,
        "created_at": "2023-07-30T15:33:57Z",
        "closed_at": "2023-07-31T12:20:48Z",
        "merged_at": "2023-07-31T12:20:48Z",
        "body": "## Motivation\r\n\r\nThere was a long standing TODO in the `LocalstackContainer` class: `# TODO merge with docker_utils.py:ContainerConfiguration`, which this PR fixes. This will be useful as we use the `LocalstackContainer` object as an abstraction for the bootstrap tests (cc @simonrw).\r\nAlso, I want to add some flags to the `localstack start` command (like `--network` to specify the container network the container should be started in), and this will make it a bit cleaner to do that.\r\n\r\n\r\n## Changes\r\n* Introduced `    def run_container_from_config(self, container_config: ContainerConfiguration) -> Tuple[bytes, bytes]:` to container client. adapted from the already existing `create_container_from_config`\r\n* Refactored `LocalstackContainer` to use the `ContainerConfiguration` object internally to hold its configuration\r\n* I was too lazy to refactor the config hooks, so i exposed a few of the config values through the `LocalstackContainer` as properties. This way it's also fully compatible with the ext container hooks and requires no changes there. The `additional_flags` thing is a bit of a mess.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 10,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2023-07-28T17:10:26Z",
        "closed_at": "2023-07-31T06:25:01Z",
        "merged_at": "2023-07-31T06:25:01Z",
        "body": "Dynamodbstream's `list-streams` has a filter option on the `TableName` - [see here](https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/dynamodbstreams/client/list_streams.html).\r\n\r\nthis is easily double-checked with AWS, thanks to the nicely [detailed issue report](https://github.com/localstack/localstack/issues/8759):\r\n```\r\n$ aws dynamodb create-table --table-name 'table1' --attribute-definitions 'AttributeName=pk,AttributeType=S' 'AttributeName=sk,AttributeType=S' --key-schema 'AttributeName=pk,KeyType=HASH' 'AttributeName=sk,KeyType=RANGE'  --billing-mode PAY_PER_REQUEST\r\n[...]\r\n$ aws dynamodb update-table --table-name table1 --stream-specification '{\"StreamEnabled\": true, \"StreamViewType\": \"NEW_AND_OLD_IMAGES\"}'\r\n[...]\r\n$ aws dynamodbstreams list-streams --table-name=foo\r\n{\r\n    \"Streams\": []\r\n}\r\n```\r\nwhereas within localstack:\r\n```\r\n$ awslocal dynamodb create-table --table-name 'table1' --attribute-definitions 'AttributeName=pk,AttributeType=S' 'AttributeName=sk,AttributeType=S' --key-schema 'AttributeName=pk,KeyType=HASH' 'AttributeName=sk,KeyType=RANGE'  --billing-mode PAY_PER_REQUEST\r\n[...]\r\n$ awslocal dynamodb update-table --table-name table1 --stream-specification '{\"StreamEnabled\": true, \"StreamViewType\": \"NEW_AND_OLD_IMAGES\"}'\r\n[...]\r\n$ awslocal dynamodbstreams list-streams --table-name=foo\r\n{\r\n    \"Streams\": [\r\n        {\r\n            \"StreamArn\": \"arn:aws:dynamodb:eu-central-1:000000000000:table/table1/stream/2023-07-28T17:04:04.940\",\r\n            \"TableName\": \"table1\",\r\n            \"StreamLabel\": \"2023-07-28T17:04:04.940\"\r\n        }\r\n    ]\r\n}\r\n```\r\n\r\nThe problem here is the testing - I momentarily can't test it locally. I can use dynamodb&dynamodbstreams through CLI normally, but curiously the moment I use it within the test-suite, 6 tests break. I currently can't fix it within reasonable time.\r\n\r\nSo I'm hoping either CI is green & reviewer is happy, or if anybody else could co-author this. Thanks\r\n\r\nfixes: #8759",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 5,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2023-07-28T16:40:07Z",
        "closed_at": "2023-07-29T12:15:31Z",
        "merged_at": "2023-07-29T12:15:31Z",
        "body": "Add `x-api-key` to the list of allowed CORS headers, to enable passing this header from the LocalStack Web app.\r\n\r\nThis header is used, among others, for API Gateway and AppSync GraphQL APIs. For AppSync, we've recently extended our resource browser to make requests directly from the Web app. Currently this requires starting LS with `EXTRA_CORS_ALLOWED_HEADERS=x-api-key` configured, and with the changes in this PR it works out of the box.\r\n\r\nThis PR also contains a minor fix for a logging statement (missing parameter for placeholder in format string), which was detected during testing.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 45,
        "deletions": 6,
        "changed_files": 6,
        "created_at": "2023-07-28T16:20:29Z",
        "closed_at": "2023-08-29T14:08:50Z",
        "merged_at": "2023-08-29T14:08:50Z",
        "body": "Move the bootstrap tests into their own location and run them in CircleCI\n\n* the tests don't need to run against multiple python versions\n* the tests are now run on CircleCI concurrently with the integration tests\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 65,
        "deletions": 17,
        "changed_files": 4,
        "created_at": "2023-07-28T15:11:41Z",
        "closed_at": "2023-08-08T09:47:02Z",
        "merged_at": "2023-08-08T09:47:02Z",
        "body": "Introduce new aws markers `@markers.aws.*`\r\n\r\n```python\r\n    # test has been successfully run against AWS, ideally multiple times\r\n    validated = pytest.mark.aws_validated\r\n\r\n    # implies aws_validated. test needs additional setup, configuration or some other steps not included in the test setup itself\r\n    manual_setup_required = pytest.mark.aws_manual_setup_required\r\n\r\n    # fails against AWS but should be made runnable against AWS in the future, basically a TODO\r\n    needs_fixing = pytest.mark.aws_needs_fixing\r\n\r\n    # only runnable against localstack by design\r\n    only_localstack = pytest.mark.aws_only_localstack\r\n\r\n    # it's unknown if the test works (reliably) against AWS or not\r\n    unknown = pytest.mark.aws_unknown\r\n```",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 42,
        "deletions": 59,
        "changed_files": 2,
        "created_at": "2023-07-28T11:41:06Z",
        "closed_at": "2023-08-01T11:10:10Z",
        "merged_at": "2023-08-01T11:10:10Z",
        "body": "This PR removes the use of `aws_stack.create_external_boto_client` in the API Gateway test suite.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 161,
        "deletions": 154,
        "changed_files": 1,
        "created_at": "2023-07-28T11:24:41Z",
        "closed_at": "2023-08-01T11:09:44Z",
        "merged_at": "2023-08-01T11:09:44Z",
        "body": "This PR converts the existing helper `cleanup` into a fixture so that we can use the `aws_client` fixture and remove the `aws_stack.create_external_boto_client` utility",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 318,
        "deletions": 110,
        "changed_files": 7,
        "created_at": "2023-07-28T08:58:48Z",
        "closed_at": "2023-07-28T10:16:13Z",
        "merged_at": "2023-07-28T10:16:13Z",
        "body": "## Motivation\r\nAWS released the python3.11 managed runtime for AWS Lambda yesterday (https://aws.amazon.com/about-aws/whats-new/2023/07/aws-lambda-python-3-11/)\r\n\r\n## Changes\r\n* Add support for python3.11 runtime\r\n* Update snapshots\r\n* Update error messages mentioning supported runtimes",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 29,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2023-07-27T15:53:15Z",
        "closed_at": "2023-07-27T17:24:50Z",
        "merged_at": "2023-07-27T17:24:50Z",
        "body": "This PR fix the newly arised issue #8756\r\n\r\nBasically we were missing a reset to the signal for the end of a chunk. Quick fix, and added a test covering this case.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 64,
        "deletions": 29,
        "changed_files": 1,
        "created_at": "2023-07-27T14:36:02Z",
        "closed_at": "2023-08-03T00:20:31Z",
        "merged_at": "2023-08-03T00:20:31Z",
        "body": "We overlooked the read/write issue for S3, only locking for position in the stream but not modification of the underlying stream during iteration while returning responses.\r\n\r\nWe can make use of the already installed dependency `readerwriterlock` (https://github.com/elarivie/pyReaderWriterLock) with a nice explanation of the problem: https://wikipedia.org/wiki/Readers\u2013writers_problem\r\n\r\nBasically, when a thread is currently returning a S3 Object, it will read chunk by chunk from a stream. We want multiple threads to be able to read the same stream, so we can't fully lock around the iteration. But we want to lock writing at the time of the iteration, so that the underlying stream is not being modified while a \"reader\" is currently iterating and returning the object. \r\n\r\nEdit: I tried to remove the seek(0) when retrieving the value, which showed issue in CopyObject (that are fixable) and also one more glaring one in Website, where we directly access the moto objects... which is not great. I reverted so we keep the same as before. \r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 866,
        "deletions": 0,
        "changed_files": 6,
        "created_at": "2023-07-27T09:26:46Z",
        "closed_at": "2023-07-31T07:25:32Z",
        "merged_at": "2023-07-31T07:25:31Z",
        "body": "This is one of the most requested AWS service.\r\n\r\nEventBridge Scheduler has a relatively simple API with only about [a dozen operations](https://docs.aws.amazon.com/scheduler/latest/APIReference/API_Operations.html). For now, this PR creates a basic Moto dispatcher provider, but there's scope to add emulated functionality.\r\n\r\nSee https://discuss.localstack.cloud/t/support-for-eventbridge-scheduler/283\r\n\r\n### Related\r\n\r\nCloses https://github.com/localstack/localstack/issues/7268",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 31,
        "deletions": 0,
        "changed_files": 3,
        "created_at": "2023-07-26T16:33:08Z",
        "closed_at": "2023-07-27T09:28:00Z",
        "merged_at": "2023-07-27T09:28:00Z",
        "body": "The example template was mentioned to raise the error:\n\n```\nResourceStatusReason: replace() argument 2 must be str, not dict\n```\n\nThis is because the `Sub` intrinsic itself depended on a value that was itself a call to an intrinsic.\n\nThis PR catches this case and indicates that the second level dependency is not ready by raising a `DependencyNotYetSatisfied` exception.\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 110,
        "deletions": 3,
        "changed_files": 4,
        "created_at": "2023-07-26T13:18:57Z",
        "closed_at": "2023-07-28T21:20:20Z",
        "merged_at": "2023-07-28T21:20:20Z",
        "body": "This PR fixes #8750\r\n\r\nWe didn't consider the case where `ExpiredObjectDeleteMarker` would be set in the `Expiration` field of rule. Basically, if this is set, you can't set `Days` or `Date` so we would serialize a proper header (and we should not).\r\n\r\nAdjusted the logic to properly parse the lifecycle configuration so that we can't have `Days` or `Date` set with `ExpiredObjectDeleteMarker`, and adjusted the matching so that we wouldn't return a rule that contains `ExpiredObjectDeleteMarker`, because you shouldn't serialize a header then. ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 26,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2023-07-26T12:43:58Z",
        "closed_at": "2023-07-26T14:27:45Z",
        "merged_at": "2023-07-26T14:27:45Z",
        "body": "## Motivation\r\nFor services which send their data with content type `application/x-www-form-urlencoded`, the partition reworking currently does not work properly, as it will match a urlencoded string with a not-urlencoded regex. \r\n\r\nExample: IAM\r\n\r\n## Changes\r\n* Check in content type header if content type is `application/x-www-form-urlencoded`, and use encoded logic for the replacement in these cases.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 283,
        "deletions": 310,
        "changed_files": 6,
        "created_at": "2023-07-26T11:32:01Z",
        "closed_at": "2023-08-01T11:38:56Z",
        "merged_at": "2023-08-01T11:38:56Z",
        "body": "This PR refactors some of our older integration tests from `unittest` to `pytest`.\r\n\r\nThis will allow use of modern fixtures, `aws_client`, `aws_client_factory`, `secondary_aws_client` etc., that use the new internal client factory. Consequently, this will help improve test coverage for cross- and multi-account setups.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 203,
        "deletions": 191,
        "changed_files": 23,
        "created_at": "2023-07-26T10:47:13Z",
        "closed_at": "2023-08-03T09:59:21Z",
        "merged_at": "2023-08-03T09:59:21Z",
        "body": "The overarching goal of this PR is to get rid of `aws_stack.create_external_boto_client` utility. Depending on the context of its use, we substitute the appropriate replacement that make use of the new internal client library.\r\n\r\nDue to the widespread use of this utility, this PR has been split into smaller ones.\r\n\r\nDepends on:\r\n- https://github.com/localstack/localstack/pull/8749\r\n- https://github.com/localstack/localstack/pull/8747\r\n- https://github.com/localstack/localstack/pull/8765\r\n- https://github.com/localstack/localstack/pull/8764\r\n- https://github.com/localstack/localstack/pull/8795",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 46,
        "deletions": 64,
        "changed_files": 1,
        "created_at": "2023-07-26T10:29:56Z",
        "closed_at": "2023-07-28T13:49:31Z",
        "merged_at": "2023-07-28T13:49:31Z",
        "body": "This PR makes a small improvement to the DynamoDB test suite.\r\n\r\nTest table names that were earlier decalared as constants are now converted to fixtures which do proper clean up after tests finish.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 6,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-07-26T09:39:51Z",
        "closed_at": "2023-07-26T11:41:02Z",
        "merged_at": "2023-07-26T11:41:02Z",
        "body": "This PR fixes missing cors headers on calls made to `/_aws` routes. ",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 79,
        "deletions": 14,
        "changed_files": 1,
        "created_at": "2023-07-25T15:31:02Z",
        "closed_at": "2023-08-17T09:29:16Z",
        "merged_at": null,
        "body": "WIP\n",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 2,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2023-07-24T20:56:53Z",
        "closed_at": "2023-07-25T07:39:13Z",
        "merged_at": null,
        "body": "This fix arose from the following problem:\r\nI wanted to implement [list_tags_for_resource](https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/timestream-write/client/list_tags_for_resource.html) for timestream, as tags are within the demanded operations. When desperately trying to snapshot the new test, it finally occurred to me, there's an equivalent operation (but with pagination) in the [query provider](https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/timestream-query/client/list_tags_for_resource.html).\r\n\r\nThis overlap is also present when directly calling aws, but with a strange twist. If you first create a database:\r\n```\r\n$ aws timestream-write create-database --database-name test \r\n{\r\n    \"Database\": {\r\n        \"Arn\": \"arn:aws:timestream:eu-central-1:000000000000:database/test\",\r\n        \"DatabaseName\": \"test\",\r\n        \"TableCount\": 0,\r\n        \"KmsKeyId\": \"arn:aws:kms:eu-central-1:000000000000:key/00000000-0000-0000-0000-000000000000\",\r\n        \"CreationTime\": 1690215389.562,\r\n        \"LastUpdatedTime\": 1690215389.562\r\n    }\r\n}\r\n```\r\n\r\nThen try to call `list_tags_for_resource`, only one provider actually works:\r\n```\r\n$ aws timestream-query list-tags-for-resource --resource-arn arn:aws:timestream:eu-central-1:000000000000:database/test\r\nAn error occurred (ValidationException) when calling the ListTagsForResource operation: Unsupported ARN: arn:aws:timestream:eu-central-1:000000000000:database/test.\r\n\r\n$ aws timestream-write list-tags-for-resource --resource-arn arn:aws:timestream:eu-central-1:000000000000:database/test\r\n{\r\n    \"Tags\": []\r\n}\r\n\r\n```\r\n(as you might can guess, this ate up some hours :upside_down_face: )\r\nAs a random (and desperate attempt) I simply set the default conflict resolution to `-write` instead of `-query`, which is what this PR proposes. \r\nI then tried to execute the timestream-testsuite, and everything passes fine with the new default (including the mentioned example of `DescribeEndpoints` within the function).\r\nSo all in all, what I'm trying to say is, that I think & hope that `-write` is a better default for now, while knowing full well that we probably need to revise this in the near future and split it up operation-wise.\r\n\r\n\r\n/cc thx to @bentsku for pointing out the router",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 6632,
        "deletions": 1942,
        "changed_files": 36,
        "created_at": "2023-07-24T09:30:18Z",
        "closed_at": "2023-07-28T08:04:52Z",
        "merged_at": "2023-07-28T08:04:52Z",
        "body": "\\* Extends https://github.com/localstack/localstack/pull/8723\r\n\r\nAdds support for `Map` states's legacy `Iterator` and `Parameters` support, and relative tests.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 189,
        "deletions": 0,
        "changed_files": 5,
        "created_at": "2023-07-24T05:04:09Z",
        "closed_at": "2023-07-24T07:37:26Z",
        "merged_at": "2023-07-24T07:37:26Z",
        "body": "# \ud83d\ude80 ASF Update Report \ud83d\ude80\nThis PR has been automatically generated to update the generated API stubs for our ASF services.\nIt uses the latest code-generator from the _master_ branch ([scaffold.py](https://github.com/localstack/localstack/blob/master/localstack/aws/scaffold.py)) and the latest _published_ version of [botocore](https://github.com/boto/botocore) to re-generate all API stubs which are already present in the `localstack.aws.api` module of the _master_ branch.\n\n## \ud83d\udd04 Updated Services\nThis PR updates the following services:\n- cloudformation\n- ec2\n- route53resolver\n- transcribe\n\n## \ud83d\udc77\ud83c\udffd Handle this PR\nThe following options describe how to interact with this PR / the auto-update:\n\n\u2714\ufe0f **Accept Changes**\nIf the changes are satisfying, just squash-merge the PR and delete the source branch.\n\n\ud83d\udeab **Ignore Changes**\nIf you want to ignore the changes in this PR, just close the PR and *do not delete* the source branch. The PR will not be opened and a new PR will not be created for as long as the generated code does not change (or the branch is deleted). As soon as there are new changes, a new PR will be created.\n\n\u270f\ufe0f **Adapt Changes**\n*Don't do this.* The APIs are auto-generated. If you decide that the APIs should look different, you have to change the code-generation.\n\n\u23f8\ufe0f **Pause Updates**\nRemove the cron-schedule trigger of the GitHub Action workflow which creates these PRs. The action can then still be triggered manually, but it will not be executed automatically.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 7,
        "deletions": 3,
        "changed_files": 2,
        "created_at": "2023-07-22T14:28:52Z",
        "closed_at": "2023-07-25T09:49:35Z",
        "merged_at": "2023-07-25T09:49:35Z",
        "body": "This PR fixes an issue where this code would lead to an exception:\r\n\r\n```python\r\nfrom localstack.aws.connect import connect_to\r\n\r\nservice = \"cloudwatch\"\r\nconnect_to(region_name=\"us-east-1\").get_client(service)\r\n```\r\n\r\nThe created `ServiceLevelClientFactory` would try to resolve `get_client` as the service `get-client`, instead of `cloudwatch`.\r\n\r\nThis surfaced in the persistence tests with the `AlarmScheduler.restart_alarms` method of cloudwatch:\r\n```\r\n2023-07-22T13:46:19.3265223Z docker-run.sh: File \"/opt/code/localstack/.venv/lib/python3.10/site-packages/localstack/utils/threads.py\", line 58, in run\r\n2023-07-22T13:46:19.3265863Z docker-run.sh: result = self.func(self.params, **kwargs)\r\n2023-07-22T13:46:19.3266515Z docker-run.sh: File \"/opt/code/localstack/.venv/lib/python3.10/site-packages/localstack/services/cloudwatch/provider.py\", line 261, in restart_alarms\r\n2023-07-22T13:46:19.3267330Z docker-run.sh: self.alarm_scheduler.restart_existing_alarms()\r\n2023-07-22T13:46:19.3268054Z docker-run.sh: File \"/opt/code/localstack/.venv/lib/python3.10/site-packages/localstack/services/cloudwatch/alarm_scheduler.py\", line 100, in restart_existing_alarms\r\n2023-07-22T13:46:19.3268681Z docker-run.sh: client = connect_to(region_name=region).get_client(service)\r\n2023-07-22T13:46:19.3269307Z docker-run.sh: File \"/opt/code/localstack/.venv/lib/python3.10/site-packages/localstack/aws/connect.py\", line 147, in __getattr__\r\n2023-07-22T13:46:19.3269953Z docker-run.sh: client=self._factory.get_client(service_name=service, **self._client_creation_params)\r\n2023-07-22T13:46:19.3270624Z docker-run.sh: File \"/opt/code/localstack/.venv/lib/python3.10/site-packages/localstack/aws/connect.py\", line 412, in get_client\r\n2023-07-22T13:46:19.3271110Z docker-run.sh: return self._get_client(\r\n2023-07-22T13:46:19.3271670Z docker-run.sh: File \"/opt/code/localstack/.venv/lib/python3.10/site-packages/localstack/aws/connect.py\", line 321, in _get_client\r\n2023-07-22T13:46:19.3272170Z docker-run.sh: client = self._session.client(\r\n2023-07-22T13:46:19.3272732Z docker-run.sh: File \"/opt/code/localstack/.venv/lib/python3.10/site-packages/boto3/session.py\", line 299, in client\r\n2023-07-22T13:46:19.3273231Z docker-run.sh: return self._session.create_client(\r\n2023-07-22T13:46:19.3273822Z docker-run.sh: File \"/opt/code/localstack/.venv/lib/python3.10/site-packages/botocore/session.py\", line 997, in create_client\r\n2023-07-22T13:46:19.3274333Z docker-run.sh: client = client_creator.create_client(\r\n2023-07-22T13:46:19.3274914Z docker-run.sh: File \"/opt/code/localstack/.venv/lib/python3.10/site-packages/botocore/client.py\", line 129, in create_client\r\n2023-07-22T13:46:19.3275481Z docker-run.sh: service_model = self._load_service_model(service_name, api_version)\r\n2023-07-22T13:46:19.3276109Z docker-run.sh: File \"/opt/code/localstack/.venv/lib/python3.10/site-packages/botocore/client.py\", line 231, in _load_service_model\r\n2023-07-22T13:46:19.3276643Z docker-run.sh: json_model = self._loader.load_service_model(\r\n2023-07-22T13:46:19.3277224Z docker-run.sh: File \"/opt/code/localstack/.venv/lib/python3.10/site-packages/botocore/loaders.py\", line 142, in _wrapper\r\n2023-07-22T13:46:19.3277706Z docker-run.sh: data = func(self, *args, **kwargs)\r\n2023-07-22T13:46:19.3278283Z docker-run.sh: File \"/opt/code/localstack/.venv/lib/python3.10/site-packages/botocore/loaders.py\", line 408, in load_service_model\r\n2023-07-22T13:46:19.3278930Z docker-run.sh: raise UnknownServiceError(\r\n2023-07-22T13:46:19.4181496Z docker-run.sh: botocore.exceptions.UnknownServiceError: Unknown service: 'get-client'.\r\n```\r\n\r\n* @dfangl i don't know what the best place for a test for this is, maybe you could add it\r\n* @steffyP seems this code was broken for this reason: https://github.com/localstack/localstack/blob/27edb72e307c4db17a74ae031f27e46359204799/localstack/services/cloudwatch/alarm_scheduler.py#L98-L100\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 9,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2023-07-21T11:27:43Z",
        "closed_at": "2023-07-21T12:37:24Z",
        "merged_at": "2023-07-21T12:37:24Z",
        "body": "## Motivation\r\nSince docker compose v2 is available, for many systems, `docker-compose` is not available any more (and not aliased to `docker compose`).\r\n\r\nFor these, we have to have a fallback to `docker compose`.\r\n\r\nFixes #8732\r\n\r\n## Changes\r\n* Use `docker compose` instead of `docker-compose` if the latter is not available.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-07-21T09:58:26Z",
        "closed_at": "2023-07-24T15:23:08Z",
        "merged_at": "2023-07-24T15:23:08Z",
        "body": "## Summary\r\n\r\nAdd missing `FilterPolicyScope` to `AWS::SNS::Subscription`\r\n\r\n## Simple check\r\n\r\n`template.yml`\r\n```yaml\r\nAWSTemplateFormatVersion: 2010-09-09\r\n\r\nResources:\r\n  SNSTopic:\r\n    Type: AWS::SNS::Topic\r\n    Properties:\r\n      TopicName: test-topic\r\n\r\n  SQSQueue:\r\n    Type: AWS::SQS::Queue\r\n    Properties:\r\n      QueueName: test-queue\r\n\r\n  SNSSubscription:\r\n    Type: AWS::SNS::Subscription\r\n    Properties:\r\n      TopicArn: !Ref SNSTopic\r\n      Endpoint: !GetAtt [SQSQueue, Arn]\r\n      Protocol: sqs\r\n      FilterPolicyScope: MessageBody\r\n      FilterPolicy:\r\n        entityName:\r\n          - Zone\r\n```\r\n\r\n`cfn.sh`\r\n```bash\r\nawslocal cloudformation deploy \\\r\n  --template-file template.yml \\\r\n  --stack-name test-stack \\\r\n  --region us-west-2\r\n\r\nsubscription_arn=$(\r\n  awslocal sns list-subscriptions-by-topic \\\r\n    --topic-arn arn:aws:sns:us-west-2:000000000000:test-topic \\\r\n    --region us-west-2 | jq -r '.Subscriptions[0].SubscriptionArn'\r\n)\r\n\r\nawslocal sns get-subscription-attributes \\\r\n  --subscription-arn $subscription_arn \\\r\n  --region us-west-2\r\n```\r\n\r\n`FilterPolicyScope` must be `MessageBody`",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 228,
        "deletions": 62,
        "changed_files": 9,
        "created_at": "2023-07-20T16:41:44Z",
        "closed_at": "2023-08-09T08:55:31Z",
        "merged_at": null,
        "body": "## Summary\r\n\r\nCheck role existence before assuming it.\r\nAWS just throws `AccessDenied` all the time.\r\n\r\n## Open Questions\r\n\r\n- [ ] Should the check only happen in IAM enforcement mode?\r\n\r\n## Linked issues\r\n\r\nhttps://github.com/localstack/localstack/issues/8313",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 1645,
        "deletions": 1502,
        "changed_files": 130,
        "created_at": "2023-07-20T16:23:08Z",
        "closed_at": "2023-07-26T12:04:36Z",
        "merged_at": "2023-07-26T12:04:35Z",
        "body": "- New class at `localstack.testing.pytest.marking.Markers` that should be used when assigning one of our custom pytest marks. Usage: `@markers.snapshot.skip_snapshot_verify`\r\n- Migrated `aws_validated`, `only_localstack`, `skip_offline` and `skip_snapshot_verify` marks in all integration tests to use the new `Markers` class.\r\n\r\n\r\n\r\nThis makes discovering our set of marks much easier and allows us to add proper typing support for our custom markers like so:\r\n\r\n![image](https://github.com/localstack/localstack/assets/620817/5cabe6cb-3386-47dd-a15d-88891818268e)\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2023-07-20T14:39:49Z",
        "closed_at": "2023-07-23T04:31:03Z",
        "merged_at": "2023-07-23T04:31:03Z",
        "body": "Changes the current release to 2.2.0, and adds a link to the discuss post describing the awesome changes :rocket: ",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 61,
        "deletions": 1,
        "changed_files": 3,
        "created_at": "2023-07-19T20:17:18Z",
        "closed_at": "2023-07-27T17:32:21Z",
        "merged_at": "2023-07-27T17:32:21Z",
        "body": "This PR allows a Conditional ref another Conditional.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 331,
        "deletions": 63,
        "changed_files": 7,
        "created_at": "2023-07-19T15:45:06Z",
        "closed_at": "2023-07-29T13:48:26Z",
        "merged_at": "2023-07-29T13:48:26Z",
        "body": "https://docs.aws.amazon.com/apigateway/latest/developerguide/api-gateway-api-key-source.html\r\n\r\n> When you associate a usage plan with an API and enable [API key](https://docs.aws.amazon.com/apigateway/latest/developerguide/api-gateway-basic-concept.html#apigateway-definition-api-key)s on API methods, every incoming request to the API must contain an API key. API Gateway reads the key and compares it against the keys in the usage plan. If there is a match, API Gateway throttles the requests based on the plan's request limit and quota. Otherwise, it throws an InvalidKeyParameter exception. As a result, the caller receives a 403 Forbidden response.\r\n\r\nThe changes go a bit beyond the api key authorizer implementation by adding usage plans parity.\r\n  \r\n### Changes\r\n\r\n- Override `create_api_key`, `create_usage_plan`, `update_usage_plan`, `get_usage_plan` and `get_usage_plans` and snapshoting.\r\n- Implements and overrides request authorizer (api key)upstream and validates the api key against usage plans. \r\n\r\n### TF sample\r\n\r\nhttps://github.com/localstack/localstack-terraform-samples/tree/master/apigateway-rest-lambda-api-key",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 4431,
        "deletions": 1768,
        "changed_files": 22,
        "created_at": "2023-07-19T12:14:25Z",
        "closed_at": "2023-07-28T05:37:14Z",
        "merged_at": "2023-07-28T05:37:14Z",
        "body": "\\* Extends https://github.com/localstack/localstack/pull/8720\r\n\r\nAdds support for `ItemSelector` declarations in `Map` states, and relevant tests and fixes.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 138,
        "deletions": 0,
        "changed_files": 3,
        "created_at": "2023-07-19T09:42:13Z",
        "closed_at": "2023-07-19T16:36:27Z",
        "merged_at": "2023-07-19T16:36:27Z",
        "body": "Allows for `Fn::Sub` intrinsic function evaluation in the resolving of the conditions. Still very explicit, but this area of code will soon be reworked into a sort of visitor pattern allowing us to structure this a bit better.\r\n\r\nThis regression was introduced recently when splitting the resolve path for Conditions from resolve_refs_recursively",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 252,
        "deletions": 128,
        "changed_files": 6,
        "created_at": "2023-07-18T19:00:49Z",
        "closed_at": "2023-07-26T15:14:45Z",
        "merged_at": "2023-07-26T15:14:45Z",
        "body": "This PR implements a stream decoder which will decode on the fly the `aws-chunked` encoding, so that we only have one way to set the stream to the S3 objects value, which simplifies the code a lot, even for the new provider.\r\n\r\nOne of the main issue around this decoder is that we're getting data only after we read the whole stream, as the necessary headers for checksum calculation are appended at the end of the response.\r\n\r\nWe then need a way to access those headers for our logic to go forward. One way for this to be transparent is to pass the s3 object to the stream, so that once it has finish decoding, it will automatically set the trailing checksum to the object attribute.\r\n\r\nMaybe one idea could also be to be able to register callback, but as it's always the same, I thought we don't need to make it extendable for now. \r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2787,
        "deletions": 253,
        "changed_files": 36,
        "created_at": "2023-07-18T17:02:47Z",
        "closed_at": "2023-07-27T17:13:42Z",
        "merged_at": "2023-07-27T17:13:41Z",
        "body": "Map State:\r\n - overhaul the design of workers to a more stable consumer pattern\r\n - fixes a number of evaluation issues\r\n - fixes a number of events reporting issues\r\n - adds tests for happy path, catch, retry, break\r\n\r\nParallel State:\r\n- fixes issue preventing the initialisation of parallel state\r\n- fixes a number of events reporting issues\r\n- adds test for happy path",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 63,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2023-07-18T16:52:06Z",
        "closed_at": "2023-09-19T14:05:21Z",
        "merged_at": null,
        "body": "Update refs once a resource has finished deploying. This should reduce the number of calls to `resolve_refs_recursively`.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1056,
        "deletions": 0,
        "changed_files": 19,
        "created_at": "2023-07-18T14:49:22Z",
        "closed_at": "2023-07-28T11:08:20Z",
        "merged_at": "2023-07-28T11:08:20Z",
        "body": "## Changes\r\n\r\n- Introduced new `InfraProvisioner` to our testing library which can be used for more complex test setups such as CDK-based infrastructure definitions.\r\n  - Set up tests directly via CDK (currently limited to single stacks, so you'll need to make sure the CDK app doesn't need any assets)\r\n  - Manual setup and teardown can be registered if required\r\n  - By default any S3 buckets created by CDK are cleaned before tearing down the stack again\r\n  - Teardown can be skipped, to re-use the provisioned infrastructure between test runs. This is especially handy while writing test assertions and iterating over them. If you had to create/remove the stacks all the time, certain resources would make this impractical (e.g. clusters)\r\n- Added initial scenario tests (most of them are still a kind of playground right now)",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 177,
        "deletions": 269,
        "changed_files": 20,
        "created_at": "2023-07-18T13:53:26Z",
        "closed_at": "2023-07-28T09:48:34Z",
        "merged_at": "2023-07-28T09:48:34Z",
        "body": "Removes all usage of `get_cfn_attribute` from the community resource models. \r\n\r\nIt does not yet introduce a subset selection for the migrated resources to stay in parity with the previous behavior for now where we nearly always fall back to a direct property/state lookup.\r\n\r\n\r\nA follow-up PR will soon remove the base method from the GenericBaseModel and unify the code paths between old and legacy providers.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-07-18T13:31:15Z",
        "closed_at": "2023-07-18T14:49:28Z",
        "merged_at": "2023-07-18T14:49:28Z",
        "body": "## Motivation\r\nThe upgrade to pyyaml>6 due to the Cython upgrade deprecated `yaml.load` without a loader specified.\r\n\r\n## Changes\r\n* Replace `yaml.load` with `yaml.safe_load`, which automatically uses the SafeLoader loader.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 95,
        "deletions": 34,
        "changed_files": 14,
        "created_at": "2023-07-17T16:19:12Z",
        "closed_at": "2023-07-26T19:49:37Z",
        "merged_at": "2023-07-26T19:49:37Z",
        "body": "Doing some clean up, moving the old legacy S3 provider into its own legacy directory like SQS, so we know what depends on it and can start moving it around. ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 339,
        "deletions": 530,
        "changed_files": 15,
        "created_at": "2023-07-17T11:48:29Z",
        "closed_at": "2023-07-26T08:18:14Z",
        "merged_at": "2023-07-26T08:18:14Z",
        "body": "## Changes\r\n\r\n- Introduced `CFN_IGNORE_UNSUPPORTED_RESOURCE_TYPES` config variable to determine if we should fail if a resource type doesn't exist. E.g. setting `CFN_IGNORE_UNSUPPORTED_RESOURCE_TYPES=0` will cause a stack deployment to fail if the resource type doesn't have an associated provider.\r\n- Removed any access to `RESOURCE_MODELS`, i.e. the GenericBaseModel classes in the template_deployer, *except* the current fallback for retrieving `Fn::GetAtt` targets that still needs to use them. If we refactor the models to remove all `get_cfn_attribute` calls, we can delete this completely.\r\n- Removed `retrieve_resource_details`\r\n- Removed `extract_resource_attribute`\r\n- Removed a lot of unnecessary code from `resolve_ref`\r\n- Removed `get_resource_model_instance`\r\n- Removed `invoke_function` (unused)\r\n- Removed `get_ref_from_model` => simple physical resource ID lookup now\r\n- Removed `determine_resource_physical_id` => simple physical resource ID lookup now\r\n- Removed `is_deployable_resource` and `is_updateable` => everything should be a \"deployable resource\" and `is_updateable` is now only used in the `LegacyResourceProvider`\r\n- Removed `update_resource_details` => this was a bit of a headache unfortunately since it was responsible for populating the `_state_`, i.e. the result of the fetch_state call in the models. This initially broke UPDATEs on the old models. I've introduced a workaround for Add and Modify operations in the LegacyResourceProvider. It's a bit hacky but we also shouldn't let those currently 15 resources with (partial) UPDATE support live for too long as GenericBaseModels anyway.\r\n- Removed `GenericBaseModel.get_ref`\r\n- Removed `GenericBaseModel.fetch_state_if_missing`\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-07-17T06:37:02Z",
        "closed_at": "2023-07-17T10:44:12Z",
        "merged_at": "2023-07-17T10:44:12Z",
        "body": null,
        "comments": 2
    },
    {
        "merged": true,
        "additions": 15,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2023-07-17T05:05:01Z",
        "closed_at": "2023-07-17T06:53:44Z",
        "merged_at": "2023-07-17T06:53:44Z",
        "body": "# \ud83d\ude80 ASF Update Report \ud83d\ude80\nThis PR has been automatically generated to update the generated API stubs for our ASF services.\nIt uses the latest code-generator from the _master_ branch ([scaffold.py](https://github.com/localstack/localstack/blob/master/localstack/aws/scaffold.py)) and the latest _published_ version of [botocore](https://github.com/boto/botocore) to re-generate all API stubs which are already present in the `localstack.aws.api` module of the _master_ branch.\n\n## \ud83d\udd04 Updated Services\nThis PR updates the following services:\n- ec2\n- s3\n\n## \ud83d\udc77\ud83c\udffd Handle this PR\nThe following options describe how to interact with this PR / the auto-update:\n\n\u2714\ufe0f **Accept Changes**\nIf the changes are satisfying, just squash-merge the PR and delete the source branch.\n\n\ud83d\udeab **Ignore Changes**\nIf you want to ignore the changes in this PR, just close the PR and *do not delete* the source branch. The PR will not be opened and a new PR will not be created for as long as the generated code does not change (or the branch is deleted). As soon as there are new changes, a new PR will be created.\n\n\u270f\ufe0f **Adapt Changes**\n*Don't do this.* The APIs are auto-generated. If you decide that the APIs should look different, you have to change the code-generation.\n\n\u23f8\ufe0f **Pause Updates**\nRemove the cron-schedule trigger of the GitHub Action workflow which creates these PRs. The action can then still be triggered manually, but it will not be executed automatically.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 104,
        "deletions": 6,
        "changed_files": 4,
        "created_at": "2023-07-15T08:12:12Z",
        "closed_at": "2023-07-19T15:15:45Z",
        "merged_at": "2023-07-19T15:15:45Z",
        "body": "Custom domains created on any version of API Gateway should be visible across APIs. For example, using aws cli with apigatewayv2 client to create a custom domain and query the same domain using aws cli with apigateway client after, should return the previous domain created.\r\n\r\n## Changes\r\n\r\n- Add a new field to the ApiGw model to hold the created domains.\r\n- Implements the `create_domain_name,` `get_domain_name` and `get_domain_names` API calls to fetch the domains from the model. \r\n- Move away from moto store and use localstack apigw store to store created domains\r\n- Almost all operations but update domains act on both APIs, for example deleting a domain happen in both stores, same as create and fetch.",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 164,
        "deletions": 35,
        "changed_files": 5,
        "created_at": "2023-07-15T00:07:19Z",
        "closed_at": "2023-07-17T12:43:54Z",
        "merged_at": "2023-07-17T12:43:53Z",
        "body": "This PR fixes #8703 (I got confirmation with a code sample), this is a follow up from #8699\r\n\r\nWe had to set the `body` directly to moto to avoid a persistence bug, but moto has a step that we didn't execute: `_handle_v4_chunk_signatures`, which will decode the `aws-chunked` format. \r\n\r\nI've refactored the code used in the streaming provider that already handles this case, and made use of it in the case of `aws-chunked` requests for `UploadPart`, as we're skipping this moto step (actually one of the only one before actually calling the backend like we're doing in our provider). \r\n\r\nAs a example, that is what the Java/.NET SDK would send if you try to upload a part with the following content:\r\n\r\nContent: `Hello Blob`\r\nBecomes:\r\n```\r\na;chunk-signature=b5311ac60a88890e740a41e74f3d3b03179fd058b1e24bb3ab224042377c4ec9\\r\\n\r\nHello Blob\\r\\n\r\n0;chunk-signature=78fae1c533e34dbaf2b83ad64ff02e4b64b7bc681ea76b6acf84acf1c48a83cb\\r\\n\r\n```\r\nHere's the doc on the `aws-chunked` format: \r\nhttps://docs.aws.amazon.com/AmazonS3/latest/API/sigv4-streaming.html\r\n\r\nSo in the previous PR, we would directly set the encoded body as is, and the `ETag` would not correspond anymore. ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 116,
        "deletions": 45,
        "changed_files": 3,
        "created_at": "2023-07-14T19:11:14Z",
        "closed_at": "2023-07-18T10:37:46Z",
        "merged_at": "2023-07-18T10:37:46Z",
        "body": "Work for some errors not catched when deploying an SSM PatchBaseline and MaintenanceWindowTasks.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 20,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2023-07-13T23:49:39Z",
        "closed_at": "2023-07-14T11:57:45Z",
        "merged_at": "2023-07-14T11:57:45Z",
        "body": "This PR fixes #8072 \r\n\r\nBasically, the issue stems from moto accessing thus creating a BackendDict with an `account_id` set to `None`.\r\n\r\nThanks to @taimourfenris, he discovered that it was after a `MultipartUpload`, the issue would arise. It happens also in lambda because lambda makes use of `upload_fileobj`, which will automatically switch to a multipart upload if the file is big.\r\n\r\nI tried to debug moto to see when it would access a backend with an null account id.\r\n\r\nI've created a small sample to create a multipart:\r\n```python\r\n# https://boto3.amazonaws.com/v1/documentation/api/latest/guide/s3.html#multipart-transfers\r\nchunk_size = 5_242_880 * 10  # around 52MB\r\nwith io.BytesIO() as data:\r\n    data.write(os.urandom(chunk_size * 2))\r\n    data.seek(0)\r\n    s3_client.upload_fileobj(data, \"test-bucket\", \"test-key\")\r\n```\r\nAnd I could confirm after running this command that `localstack pod save file://test.zip` would fail. \r\n\r\nAdded a print statement to the `__get_item__` of `BackendDict` to see when it would be accessed:\r\n```python\r\n File \"/Users/benjaminsimon/Projects/localstack/localstack/localstack/services/s3/provider.py\", line 804, in upload_part\r\n    response: UploadPartOutput = call_moto(context)\r\n  File \"/Users/benjaminsimon/Projects/localstack/localstack/localstack/services/moto.py\", line 47, in call_moto\r\n    return dispatch_to_backend(context, dispatch_to_moto, include_response_metadata)\r\n  File \"/Users/benjaminsimon/Projects/localstack/localstack/localstack/aws/forwarder.py\", line 120, in dispatch_to_backend\r\n    http_response = http_request_dispatcher(context)\r\n  File \"/Users/benjaminsimon/Projects/localstack/localstack/localstack/services/moto.py\", line 115, in dispatch_to_moto\r\n    response = dispatch(request, request.url, request.headers)\r\n  File \"/Users/benjaminsimon/Projects/localstack/localstack/localstack/utils/patch.py\", line 38, in proxy\r\n    return new(target, *args, **kwargs)\r\n  File \"/Users/benjaminsimon/Projects/localstack/localstack/localstack/services/s3/provider.py\", line 2043, in _fix_key_response\r\n    status_code, resp_headers, key_value = fn(self, *args, **kwargs)\r\n  File \"/Users/benjaminsimon/Projects/localstack/moto/moto/utilities/aws_headers.py\", line 74, in _wrapper\r\n    response = f(*args, **kwargs)\r\n  File \"/Users/benjaminsimon/Projects/localstack/moto/moto/s3/responses.py\", line 1208, in key_response\r\n    response = self._key_response(request, full_url, self.headers)\r\n  File \"/Users/benjaminsimon/Projects/localstack/moto/moto/s3/responses.py\", line 1320, in _key_response\r\n    return self._key_response_put(request, body, bucket_name, query, key_name)\r\n  File \"/Users/benjaminsimon/Projects/localstack/moto/moto/s3/responses.py\", line 1516, in _key_response_put\r\n    response_headers.update(key.response_dict)\r\n  File \"/Users/benjaminsimon/Projects/localstack/moto/moto/s3/models.py\", line 278, in response_dict\r\n    tags = s3_backends[self.account_id][\"global\"].tagger.get_tag_dict_for_resource( \r\n```\r\n\r\nSo the faulty part was there, when returning the part (using a `FakeKey` underneath), here:\r\nhttps://github.com/getmoto/moto/blob/e0ceec9e48fda482f549ad1f8212731ca82b35a1/moto/s3/responses.py#L1507-L1512\r\n\r\nBasically, moto will try to get the `tagger` for the `FakeKey`, but it's just a part instantiated with minimal data, and no account id (because it can't have tag and we don't really care about its account id). \r\n\r\nI've had a look to patch it, but it would pretty tricky as it's contained in `s3/responses.py:S3Response:._key_response_put`, which is around 300LOC. \r\n\r\nThe easiest is to directly implement it in our provider and calling directly the moto backend, without then calling `key.response_dict`.\r\n\r\nI could validate that it worked with my sample and running `localstack pod save file://test.zip`, it would succeed in creating the pod. I could also load the pod afterwards. I'm not sure how to add a test for this as it's pretty specific. \r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 77,
        "deletions": 17,
        "changed_files": 5,
        "created_at": "2023-07-13T17:32:00Z",
        "closed_at": "2023-07-14T16:43:43Z",
        "merged_at": "2023-07-14T16:43:43Z",
        "body": "Extend Docker client to allow passing `--dns` user flags, e.g., via `DOCKER_FLAGS` or `ECS_DOCKER_FLAGS`.\r\n\r\nSummary of changes:\r\n* Turn the existing `dns` references from a `str` into a `List[str]`, as this is a multi-value attribute. Should be backward-compatible, and type hints were adjusted to `[Union[str, List[str]]]`\r\n* Extend the `Util.parse_additional_flags(..)` utility to support parsing of `--dns ...` arguments\r\n* Add a test to cover the new functionality\r\n* Slightly restructure the tests and group the `test_run_with_additional_arguments_*` tests into a `TestRunWithAdditionalArgs` class",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 729,
        "deletions": 45,
        "changed_files": 7,
        "created_at": "2023-07-13T17:08:17Z",
        "closed_at": "2023-07-14T16:25:46Z",
        "merged_at": "2023-07-14T16:25:46Z",
        "body": "This PR partly implements #8694, at least the mocking part. We were actually not supporting any CRUD operations, as it was not implemented in moto. \r\n\r\nAlso made use of the `context` in every `get_store` call, as we should remove any use of the `threadlocal` and make use of the nicely provided context. \r\n\r\n## TODO\r\n\r\n- [x] implement Get/Put/List/Delete, happy path\r\n- [x] implement validation and negative testing\r\n\r\n## Added operations:\r\n- `PutBucketInventoryConfiguration`\r\n- `ListBucketInventoryConfigurations`\r\n- `GetBucketInventoryConfiguration`\r\n- `DeleteBucketInventoryConfiguration`",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 30,
        "deletions": 11,
        "changed_files": 3,
        "created_at": "2023-07-13T13:51:16Z",
        "closed_at": "2023-07-13T15:43:57Z",
        "merged_at": "2023-07-13T15:43:56Z",
        "body": "Follow up from #8689, it seems the casing was not important in the end when specifying `ChecksumMode` even if the specs said the possible value was `ENABLED` only. Related: https://github.com/localstack/localstack/issues/6659#issuecomment-1634216200\r\n\r\nAlso added a fix concerning `SelectObjectContent`, the signature was different between community and pro (expanded or not), and it made pro fail. \r\n\r\n```python\r\n2023-07-13T12:44:55.7390238Z TypeError: S3ProviderPro.select_object_content() missing 5 required positional arguments: 'key', 'expression', 'expression_type', 'input_serialization', and 'output_serialization'\r\n```",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2023-07-13T09:41:33Z",
        "closed_at": "2023-07-13T14:09:10Z",
        "merged_at": "2023-07-13T14:09:09Z",
        "body": "This PR fixes a cron syntax error. Currently if you schedule an events rule hourly or daily, it will execute every minute. This is due to cron's syntax, which will match every minute due to the `*`.\r\nThe following resource helps to understand cron syntax: [https://crontab.guru/every-1-hour](https://crontab.guru/every-1-hour)\r\n\r\nThanks to @whummer for the help in finding this.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 461,
        "deletions": 5,
        "changed_files": 9,
        "created_at": "2023-07-13T00:54:57Z",
        "closed_at": "2023-07-17T11:31:23Z",
        "merged_at": "2023-07-17T11:31:23Z",
        "body": "As requested in #8444, this adds support for `ObjectRestore:Post` and `ObjectRestore:Completed`, as well as sneak in a bug fix for EventBridge where we use the time provided to the `Entry` instead of `utcnow()`. \r\n\r\nSee: \r\n- https://docs.aws.amazon.com/AmazonS3/latest/API/API_RestoreObject.html#AmazonS3-RestoreObject-request-GlacierJobParameters\r\n- https://docs.aws.amazon.com/AmazonS3/latest/userguide/notification-how-to-event-types-and-destinations.html\r\n- https://docs.aws.amazon.com/AmazonS3/latest/userguide/ev-events.html#ev-events-object-restore-complete\r\n\r\n\r\n_fixes #8444_",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 14,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-07-12T18:00:27Z",
        "closed_at": "2023-07-12T20:35:33Z",
        "merged_at": "2023-07-12T20:35:33Z",
        "body": "Following the report from #8675, it seemed moto had introduced experimental support for `SelectObjectContent`. However, the format from the returned response would often end raising `ProtocolSerializerError`, as the serializer expect a stream of response (like for Kinesis, for example).\r\n\r\n_fixes #8675_",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 476,
        "deletions": 36,
        "changed_files": 7,
        "created_at": "2023-07-12T12:41:32Z",
        "closed_at": "2023-07-17T14:49:25Z",
        "merged_at": "2023-07-17T14:49:24Z",
        "body": "Addresses #8556",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 143,
        "deletions": 19,
        "changed_files": 7,
        "created_at": "2023-07-12T11:57:00Z",
        "closed_at": "2023-08-28T13:51:35Z",
        "merged_at": "2023-08-28T13:51:35Z",
        "body": "This PR adds a new type of `PackageInstaller` which allows the installation of Python packages at runtime for specific services.\r\nThe PoC was implemented based on our Transcribe emulator, removing the `vosk` dependency in the `setup.cfg` and instead installing it on demand.\r\nVOSC is one of the bigger dependencies, with ~7MB compressed and ~26MB uncompressed. In my tests this reduced the uncompressed layer size of the `venv` copying layer from 426 MB to 399 MB:\r\nhttps://github.com/localstack/localstack/blob/10630f07dd838c9b5a71dd087de8bbc044b417fe/Dockerfile#L144\r\n\r\nThis PR contains the following changes:\r\n- It introduces two new linked virtual environments, one for static (docker build time) and one for var libs (runtime, using a shared folder mounted from the host) in the `Dockerfile`.\r\n  - This is implemented similarly to the extensions venv by adding a [`pth` file to extend the search path](https://docs.python.org/3/install/index.html#modifying-python-s-search-path) of the main virtual environment.\r\n- It introduces a new `PackageInstaller` method which is executed once if the package is already installed (to perform specific installation instructions which are necessary to be done at runtime, even if the package has been installed in previous executions).\r\n  - This is necessary for the `PythonPackageInstaller` to inject the sys path of the already existing virtual environment outside of a Docker image (i.e. in host mode).\r\n- It removes `vosk` from the list of runtime extra dependencies.\r\n- It adds a new `VoskPackage` to the `transcribe` module, which is used in the Transcribe provider to ensure that vosk is installed when needed.\r\n  - The installation of `vosk` as well as `ffmpeg` has been moved from the .`ServiceLifecycleHook#on_before_start` to the async execution which actually performs the transcoding and transcription.\r\n  - This should actually improve the UX, since the service starts instantly, while downloading the additional packages in an async thread when needed (instead of running into a client timeout on the first call).\r\n\r\nThis is part of our Hackathon, and this was on my backlog to test for quite a while (which is why it's a draft PR). I am happy for any feedback (also to discard the idea completely)!",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 35,
        "deletions": 7,
        "changed_files": 3,
        "created_at": "2023-07-12T08:34:55Z",
        "closed_at": "2023-07-12T15:09:41Z",
        "merged_at": "2023-07-12T15:09:41Z",
        "body": "This PR performs a small fix to the `CmdDockerClient` (which is basically only used by the CLI), such that it raises a `DockerNotAvailable` exception in case the `DOCKER_CMD` (by default `docker`) is not available on the system.\r\n\r\nContrary to the `SdkDockerClient`, this is done only once (the result is cached) to avoid checking the command existence on every single usage of the client. We basically assume that, if the `DOCKER_CMD` is not available once, it won't become available during this python session lifetime.\r\n\r\nThis fixes the CLI error handling in this case (introduced in #8564).",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 273,
        "deletions": 141,
        "changed_files": 6,
        "created_at": "2023-07-11T20:30:53Z",
        "closed_at": "2023-07-13T20:18:08Z",
        "merged_at": "2023-07-13T20:18:08Z",
        "body": "Changes\r\n- Stack parameters are not part of `Stack.resources` anymore\r\n- Stack conditions are not part of `Stack.resources` anymore",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-07-11T17:36:04Z",
        "closed_at": "2023-07-12T08:26:44Z",
        "merged_at": "2023-07-12T08:26:44Z",
        "body": "## Motivation\r\nThe new lambda init version will automatically set the `bootstrap` file to executable if it is not yet.\r\n\r\nThis will fix #8459 .\r\nReleases https://github.com/localstack/lambda-runtime-init/pull/21\r\n\r\nIt will do so unconditionally, even though AWS, in some cases, will refuse to allow a bootstrap file without executable permissions. It is yet to determine, under which circumstances this happens.\r\n\r\nThis will not work for hot reloading, as the privileges are already dropped when the reload takes place. If you want hot reloading, please make sure to set your bootstrap binary as executable after compilation.\r\n\r\n## Changes\r\n* Update lambda runtime init to get new bootstrap executable behavior.",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 102,
        "deletions": 11,
        "changed_files": 3,
        "created_at": "2023-07-11T14:56:29Z",
        "closed_at": "2023-07-12T15:35:44Z",
        "merged_at": "2023-07-12T15:35:44Z",
        "body": "This PR is a small parity fix to return the `ChecksumX` header when the `ChecksumMode` request parameter is enabled. \r\n\r\nThis will fix #8676, also reported in #6659\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 580,
        "deletions": 428,
        "changed_files": 21,
        "created_at": "2023-07-11T13:12:53Z",
        "closed_at": "2023-07-26T06:30:37Z",
        "merged_at": "2023-07-26T06:30:37Z",
        "body": "This PR removes all use of [Boto resources](https://boto3.amazonaws.com/v1/documentation/api/latest/guide/resources.html) and replaces it with equivalent functionality offered by our new internal client (which uses the Boto client underneath).\r\n\r\nThere are no plans to support Boto resources as part of our new internal AWS client library. Furthermore, the Boto team does not actively develop Boto resources.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 15,
        "deletions": 5,
        "changed_files": 4,
        "created_at": "2023-07-11T09:37:18Z",
        "closed_at": "2023-07-11T13:15:43Z",
        "merged_at": "2023-07-11T13:15:43Z",
        "body": "We're having issues with S3 following the 1.31.2 botocore update, containing a bug fix for generating pre-signed URL (https://github.com/boto/botocore/pull/2971)\r\n\r\nBasically, this is a follow up from #7086, where there is already a good explanation of what happened with botocore stripping the bucket from the operation model, leading to issue routing the requests.\r\n\r\nWe had a workaround using the set `authPath` containing the original request URI. However, following a bug fix, this `authPath` field is now stripped of its query parameters. \r\n\r\nThe fix consists of using the path part from the `authPath` and the query part from the `requestUri`, effectively reversing what botocore does (botocore keeps only the part part of the `requestUri` by calling `req_uri = req_uri.split('?')[0]`).\r\n\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 25,
        "deletions": 8,
        "changed_files": 1,
        "created_at": "2023-07-11T09:36:48Z",
        "closed_at": "2023-07-12T13:44:37Z",
        "merged_at": "2023-07-12T13:44:37Z",
        "body": "This PR makes file sizes of downloads print as kilobytes.\r\n\r\nEarlier:\r\n\r\n```\r\nStarting download from https://github.com/etspaceman/kinesis-mock/releases/download/0.3.10/kinesis-mock-linux-amd64-static to /home/viren/repo/localstack/.filesystem/var/lib/localstack/lib/kinesis-mock/0.3.10/kinesis-mock-linux-amd64-static (20227140 bytes)\r\nWritten 1048576 bytes (total 1048576) to /home/viren/repo/localstack/.filesystem/var/lib/localstack/lib/kinesis-mock/0.3.10/kinesis-mock-linux-amd64-static\r\nWritten 1048576 bytes (total 2097152) to /home/viren/repo/localstack/.filesystem/var/lib/localstack/lib/kinesis-mock/0.3.10/kinesis-mock-linux-amd64-static\r\nWritten 1048576 bytes (total 3145728) to /home/viren/repo/localstack/.filesystem/var/lib/localstack/lib/kinesis-mock/0.3.10/kinesis-mock-linux-amd64-static\r\n```\r\n\r\nNow:\r\n\r\n```\r\nStarting download from https://github.com/etspaceman/kinesis-mock/releases/download/0.3.10/kinesis-mock-linux-amd64-static to /home/viren/repo/localstack/.filesystem/var/lib/localstack/lib/kinesis-mock/0.3.10/kinesis-mock-linux-amd64-static\r\nWritten 1024K (total 1024K of 19753K) to /home/viren/repo/localstack/.filesystem/var/lib/localstack/lib/kinesis-mock/0.3.10/kinesis-mock-linux-amd64-static\r\nWritten 1024K (total 2048K of 19753K) to /home/viren/repo/localstack/.filesystem/var/lib/localstack/lib/kinesis-mock/0.3.10/kinesis-mock-linux-amd64-static\r\nWritten 1024K (total 3072K of 19753K) to /home/viren/repo/localstack/.filesystem/var/lib/localstack/lib/kinesis-mock/0.3.10/kinesis-mock-linux-amd64-static\r\n```\r\n\r\nIn this example, because of fewer zeros, you know from one glance that file is about 19 MB, which is a quality of life improvement. It's also easier to estimate the download progress.",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 0,
        "deletions": 0,
        "changed_files": 0,
        "created_at": "2023-07-11T07:52:29Z",
        "closed_at": "2023-07-11T20:37:04Z",
        "merged_at": null,
        "body": "Companion to upstream PR, adds `payloadFormatVersion` to utilities that are used to create integration.\r\n\r\n```\r\nSpecifies the format of the payload sent to an integration. Required for HTTP APIs\r\n```",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2023-07-10T23:18:02Z",
        "closed_at": "2023-07-11T05:49:46Z",
        "merged_at": "2023-07-11T05:49:46Z",
        "body": "Bumps python from `b51f870` to `a704ba2`.\n\n\n[![Dependabot compatibility score](https://dependabot-badges.githubapp.com/badges/compatibility_score?dependency-name=python&package-manager=docker&previous-version=3.10.12-slim-bullseye&new-version=3.10.12-slim-bullseye)](https://docs.github.com/en/github/managing-security-vulnerabilities/about-dependabot-security-updates#about-compatibility-scores)\n\nDependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.\n\n[//]: # (dependabot-automerge-start)\n[//]: # (dependabot-automerge-end)\n\n---\n\n<details>\n<summary>Dependabot commands and options</summary>\n<br />\n\nYou can trigger Dependabot actions by commenting on this PR:\n- `@dependabot rebase` will rebase this PR\n- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it\n- `@dependabot merge` will merge this PR after your CI passes on it\n- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it\n- `@dependabot cancel merge` will cancel a previously requested merge and block automerging\n- `@dependabot reopen` will reopen this PR if it is closed\n- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually\n- `@dependabot ignore this major version` will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot ignore this minor version` will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot ignore this dependency` will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)\n\n\n</details>",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 321,
        "deletions": 149,
        "changed_files": 5,
        "created_at": "2023-07-10T21:20:02Z",
        "closed_at": "2023-07-14T13:42:46Z",
        "merged_at": "2023-07-14T13:42:46Z",
        "body": "This PR builds and rebase #7936, and fixes #7935. \r\n\r\nThis adds retrospections endpoint for SMS published to SNS, and also adds a test case for the retrospection.",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 44,
        "deletions": 55,
        "changed_files": 2,
        "created_at": "2023-07-10T13:42:17Z",
        "closed_at": "2023-07-11T08:06:53Z",
        "merged_at": "2023-07-11T08:06:53Z",
        "body": "As reported by #8663, we were not properly re-URL-encoding the request path before validating the signature of the pre-signed URL.\r\n\r\nI've made the necessary modifications into both signature types, and simplified the HMACv1 (signature type `s3`) quite a bit by not recreating a `Request` object but instead directly recreating a `SplitResult` and the new `HTTPHeaders`. \r\n\r\nAdded a test to validate the use case of the user and the fix. ",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 4,
        "changed_files": 2,
        "created_at": "2023-07-10T12:18:52Z",
        "closed_at": "2023-07-11T06:00:43Z",
        "merged_at": "2023-07-11T06:00:43Z",
        "body": "Also reverts https://github.com/localstack/localstack/pull/8631\r\n\r\nExt tests passing :heavy_check_mark: ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 6,
        "deletions": 1,
        "changed_files": 6,
        "created_at": "2023-07-10T07:15:18Z",
        "closed_at": "2023-07-10T10:14:31Z",
        "merged_at": "2023-07-10T10:14:31Z",
        "body": "With #6778, Hypercorn has been pinned to `0.14.2`, since hypercorn reverted a fix to preserve header casing with https://github.com/pgjones/hypercorn/commit/68e832af53b55bcd7798eac1e84c974eb5753827 / `0.14.3` (since the spec defines that they should not be preserved).\r\n@thrau suggested a config to enable preserving the headers with https://github.com/pgjones/hypercorn/pull/117, which is contained in the latest release: `0.14.4`.\r\n\r\nThis PR unpins `hypercorn` in the `setup.cfg` and enables the header preserving in the configs.\r\n#6778 introduced a regression test which ensures that the gateway properly preserves the HTTP header casing (which is why this PR does not contain any tests).\r\n\r\nFixes #6849.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 82,
        "deletions": 8,
        "changed_files": 4,
        "created_at": "2023-07-10T05:04:30Z",
        "closed_at": "2023-07-10T11:56:07Z",
        "merged_at": "2023-07-10T11:56:07Z",
        "body": "# \ud83d\ude80 ASF Update Report \ud83d\ude80\nThis PR has been automatically generated to update the generated API stubs for our ASF services.\nIt uses the latest code-generator from the _master_ branch ([scaffold.py](https://github.com/localstack/localstack/blob/master/localstack/aws/scaffold.py)) and the latest _published_ version of [botocore](https://github.com/boto/botocore) to re-generate all API stubs which are already present in the `localstack.aws.api` module of the _master_ branch.\n\n## \ud83d\udd04 Updated Services\nThis PR updates the following services:\n- ec2\n- kms\n- logs\n\n## \ud83d\udc77\ud83c\udffd Handle this PR\nThe following options describe how to interact with this PR / the auto-update:\n\n\u2714\ufe0f **Accept Changes**\nIf the changes are satisfying, just squash-merge the PR and delete the source branch.\n\n\ud83d\udeab **Ignore Changes**\nIf you want to ignore the changes in this PR, just close the PR and *do not delete* the source branch. The PR will not be opened and a new PR will not be created for as long as the generated code does not change (or the branch is deleted). As soon as there are new changes, a new PR will be created.\n\n\u270f\ufe0f **Adapt Changes**\n*Don't do this.* The APIs are auto-generated. If you decide that the APIs should look different, you have to change the code-generation.\n\n\u23f8\ufe0f **Pause Updates**\nRemove the cron-schedule trigger of the GitHub Action workflow which creates these PRs. The action can then still be triggered manually, but it will not be executed automatically.",
        "comments": 3
    },
    {
        "merged": false,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-07-10T02:14:16Z",
        "closed_at": "2023-07-10T09:54:28Z",
        "merged_at": null,
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\nI updated Readme to use awslocal command\r\n\r\n```\r\ncommand not found: awslocal\r\n```",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 315,
        "deletions": 0,
        "changed_files": 5,
        "created_at": "2023-07-07T23:39:58Z",
        "closed_at": "2023-07-08T14:35:49Z",
        "merged_at": "2023-07-08T14:35:49Z",
        "body": "This PR fixes #6764.\r\n\r\n## Features\r\nMoto was a bit overzealous in their validation of the bucket logging configuration. We're keeping the same checks that are made in moto, without the problematic part. We could extend the validation then, as now with Object Ownership, a bucket created without config shouldn't be able to get a config with `TargetGrants`. This would be part of a bigger effort to use the same new defaults as AWS.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 270,
        "deletions": 6,
        "changed_files": 4,
        "created_at": "2023-07-07T22:32:29Z",
        "closed_at": "2023-07-08T19:10:04Z",
        "merged_at": "2023-07-08T19:10:04Z",
        "body": "This PR fixes and implements #7555\r\n\r\n## Features\r\nThis implements the different preconditions checks following the documentation here: https://docs.aws.amazon.com/AmazonS3/latest/API/API_CopyObject.html\r\nIt adds an AWS validated test, checking all wrong assumptions and a positive one.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1437,
        "deletions": 138,
        "changed_files": 6,
        "created_at": "2023-07-07T18:59:42Z",
        "closed_at": "2023-07-08T21:53:15Z",
        "merged_at": "2023-07-08T21:53:15Z",
        "body": "This PR will implement the request from #6654.\r\n\r\n### Features\r\nWe will now validate the `BucketLifecycleConfiguration` when we call `PutBucketLifecycleConfiguration`, but only for the parts we actually use (see limitations).\r\nWe will now properly return the `Expiration` header from `PutObject`, `GetObject` and `HeadObject` depending on the lifecycle configuration and its rules/filters. \r\n\r\nLifecycle configuration is quite the feature, as we can see from the length of the documentation on AWS:\r\n  - https://docs.aws.amazon.com/AmazonS3/latest/userguide/object-lifecycle-mgmt.html\r\n  - https://docs.aws.amazon.com/AmazonS3/latest/userguide/lifecycle-expire-general-considerations.html\r\n  - https://docs.aws.amazon.com/AmazonS3/latest/userguide/intro-lifecycle-rules.html\r\n  - https://docs.aws.amazon.com/AmazonS3/latest/API/API_LifecycleRule.html\r\n  - https://docs.aws.amazon.com/AmazonS3/latest/userguide/lifecycle-transition-general-considerations.html#lifecycle-general-considerations-transition-sc\r\n\r\n## Limitations\r\n- We won't for now expire objects nor NonCurrentVersion (as AWS don't return `Expiration` headers when you specify `VersionId`). We will only return the `Expiration` header. As expiration is minimum in days, it's rare we would actually expire objects, except when a `Date` in the past is specified. We can iterate over this PR to add the feature, but the `Expiration` header is the most important of all. \r\n- We only validate the `BucketLifecycleConfiguration` for the parts that we actually use (`Expiration` and `Filter`), we don't validate `Transitions yet.\r\n\r\nnote: I could still add more unit tests, but I've validated a lot with the integration tests. I might do it during the week-end. \r\n\r\n_fix #6654_",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 18,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2023-07-07T12:32:07Z",
        "closed_at": "2023-07-07T14:11:34Z",
        "merged_at": "2023-07-07T14:11:34Z",
        "body": "## Motivation\r\nIn our handler chain, we set the account ID in the threadlocal storage only AFTER serving the router rules:\r\n```\r\n                handlers.serve_default_listeners,\r\n          >     handlers.serve_edge_router_rules,\r\n                # start aws handler chain\r\n                handlers.inject_auth_header_if_missing,\r\n                handlers.add_region_from_header,\r\n          >     handlers.add_account_id,\r\n                handlers.add_internal_request_params,\r\n```\r\nThis leads to issues when services like apigatway or Appsync use the `get_aws_account_id()` while handling their route, as it will have persisted from the previous call.\r\n\r\nNote that this is a bug within the services as well, but currently a lot of our services depend on this. For apigateway already in the works, we need to replace this behavior, as within the routes we have to find out the account id in a service specific manner, rather than relying on a wrong thread local variable.\r\n\r\nAlso, we should replace them with contextvars :)\r\n\r\nThis is basically a follow up to our previous issue with this, #8134.\r\n\r\n## Changes\r\n* Delete the account id threadlocal storage every time before a request (at least until we can switch to contextvars).",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 217,
        "deletions": 0,
        "changed_files": 3,
        "created_at": "2023-07-07T07:25:31Z",
        "closed_at": "2023-07-17T08:14:15Z",
        "merged_at": "2023-07-17T08:14:15Z",
        "body": "## Fixed\r\n- S3 Object Retention\r\n  - `PutObjectRetention` was not in parity with AWS\r\n  - implemented `GetObjectRetention`\r\n\r\n## Fixed flow\r\n- `PutObjectRetention` with expired date -> call `DeleteObject` (used errors out)\r\n\r\n## Related Issue\r\n- https://github.com/localstack/localstack/issues/7517",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 306,
        "deletions": 56,
        "changed_files": 8,
        "created_at": "2023-07-06T20:29:52Z",
        "closed_at": "2023-07-07T09:36:07Z",
        "merged_at": "2023-07-07T09:36:07Z",
        "body": "This PR will fix an issue we've had with https://github.com/localstack/serverless-shopping-cart/pull/1, when calling a lambda function with an authorizer which would fail. Basically, we had the parameter default value / name instead of its value (a UserPoolArn) in this part of the template, once deployed. \r\n\r\n```yaml\r\nParameters:\r\n  UserPoolArn:\r\n    Type: 'AWS::SSM::Parameter::Value<String>'\r\n    Default: '/serverless-shopping-cart-demo/auth/user-pool-arn'\r\nResources:\r\n  CartApi:\r\n    Type: AWS::Serverless::Api\r\n    DependsOn:\r\n      - ApiGWAccount\r\n    Properties:\r\n      StageName: Prod\r\n      Auth:\r\n        Authorizers:\r\n          CognitoAuthorizer:\r\n            UserPoolArn: !Ref UserPoolArn\r\n            Identity: # OPTIONAL\r\n              Header: Authorization # OPTIONAL; Default: 'Authorization'\r\n```\r\nWe would end up with an authorizer looking like that:\r\n```bash\r\nawslocal apigateway get-authorizers --rest-api-id 62vbixi2me\r\n{\r\n    \"items\": [\r\n        {\r\n            \"id\": \"75q1ly8he5\",\r\n            \"name\": \"CognitoAuthorizer\",\r\n            \"type\": \"COGNITO_USER_POOLS\",\r\n            \"providerARNs\": [\r\n                \"/serverless-shopping-cart-demo/auth/user-pool-arn\"  # this is bad, it should be the ARN\r\n            ],\r\n            \"authType\": \"cognito_user_pools\",\r\n            \"authorizerResultTtlInSeconds\": 300\r\n        }\r\n    ]\r\n}\r\n```\r\nEven though we could see the parameter was properly resolved in the CloudFormation provider, change set and stack.\r\n\r\nWe can see that we're having an issue with the resolving of the SSM parameter for the `Auth` part of the API.\r\n\r\nAfter investigating, we're using `samtranslator` to go from a `AWS::Serverless::Api` to `AWS::ApiGateway::RestApi`, which under the hood will create an API from anOpenAPI spec body, or collect the routes from the `AWS::Serverless::Function` resources and synthetize an OpenAPI body by itself, to then create a CloudFormation resource with the created body. That created body did not have the stack parameters, thus would import weird values (the default in the template).\r\nWe're now passing the stack parameters to the `samtranslator` call, so that it can also use those values and set them in the OpenAPI body. The proper fix is in `cloudformation/engine/template_preparer.py` \\cc @dominikschubert \r\n\r\nI've also fixed the logic when importing authorizers, previously we would not create them if they were not used in a route, but AWS will create them anyway. \\cc @calvernaz \r\n\r\n\\cc @steffyP @HarshCasper ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 92,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2023-07-06T18:15:10Z",
        "closed_at": "2023-07-07T07:44:43Z",
        "merged_at": "2023-07-07T07:44:43Z",
        "body": "This PR fixes an issue in OpenSearch which was triggered by the following scenario:\r\n- The OpenSearch security plugin is used (added with #7658).\r\n- This enforces the usage of HTTPS when communicating with the OpenSearch backend.\r\n  - However, the server cannot be verified, because it's running on `localhost` and is being addressed via `127.0.0.1`.\r\n- A custom CA certificate bundle is set according to our docs by setting `REQUESTS_CA_BUNDLE`: https://docs.localstack.cloud/references/custom-tls-certificates/\r\n\r\nThis triggered a bug in the health check, where the requests to the backend - effectively checking if the cluster is already up - would fail due to a but in the requests library (https://github.com/psf/requests/issues/3829). This bug always sets `verify=True` on requests if `REQUESTS_CA_BUNDLE` or `CURL_CA_BUNDLE` is set.\r\n\r\nThe issue is fixed by setting a custom default session in the proxy infrastructure which circumvents this issue.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-07-06T17:40:35Z",
        "closed_at": "2023-07-10T13:36:22Z",
        "merged_at": "2023-07-10T13:36:22Z",
        "body": "This PR adds a sanitization step when parsing origins from `EXTRA_CORS_ALLOWED_ORIGINS.\r\n\r\nThis is mainly to filter out `\"\"` when  it's specified by accident, or intentionally.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 13,
        "deletions": 6,
        "changed_files": 3,
        "created_at": "2023-07-06T17:10:00Z",
        "closed_at": "2023-07-07T07:48:59Z",
        "merged_at": "2023-07-07T07:48:59Z",
        "body": "## Motivation\r\nWith PR #8235 , the persistence tests broke.\r\n\r\nIt seems, that connecting to the bucket from different accounts, made some problems with remote fetched layers. It is not quite clear what causes this behavior (maybe some cross account problem in s3?), but it needs to be solved ASAP to unblock the pipeline.\r\n\r\n## Changes\r\n* All code archive buckets are moved to some random account. This is parity with AWS\r\n\r\n\r\n@giograno ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 491,
        "deletions": 34,
        "changed_files": 16,
        "created_at": "2023-07-06T13:52:17Z",
        "closed_at": "2023-07-10T20:47:52Z",
        "merged_at": "2023-07-10T20:47:52Z",
        "body": "This rework was motivated by a recent support case where this issue surfaced. The \"else-branch\" in a conditional \"Fn::If\" statement was evaluated and tried to `ref` the corresponding resource even though the condition was `True`. \r\nSee `cfn_if_conditional_reference.yaml` for a reconstruction of the basic issue.\r\n\r\nDuring this another issue in our implementation surfaced unfortunately. This is a bit out of scope and has a workaround but we currently don't properly support type coercion the same way CloudFormation does. There is no proper official documentation on when CloudFormation converts types but generally it seems like nearly all values are converted to strings internally. An example of this can be seen again in the referenced test template. The parameter type is String but the default value and allowed values are technically YAML  booleans that are converted into strings. This behavior isn't specific to the `String` parameter type. Even numbers are converted to strings (See: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/parameters-section-structure.html).\r\n\r\n\r\n## Changes\r\n\r\n- Make conditions more \"static\" during stack execution by saving resolved conditions in the stack object and explicitly passing them down to stateless utils. (This still needs to be integrated into the resolve_refs_recursively call, for now this only affects the dependency check on resources to limit the initial blast radius)\r\n- Do a proper structure traversal when determining resource dependencies instead of string matching. This will probably be somewhat obsolete in the future with a richer Resource graph / Stack.\r\n- Only consider affected `Fn::If` branch for dependencies, to avoid `ref`-ing resources that don't exist due to conditionals.\r\n- Any fetch/update state on GenericBaseModel is skipped if the physical resource ID is not set yet to force a successful CREATE before any state fetching. This will also have the side effect of removing a lot of noise in the logs.\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 222,
        "deletions": 0,
        "changed_files": 3,
        "created_at": "2023-07-06T11:51:14Z",
        "closed_at": "2023-07-07T07:06:11Z",
        "merged_at": "2023-07-07T07:06:11Z",
        "body": "This PR adds validation for `send_email` tags and a test case to verify the results against AWS. \r\n\r\nRelated issue: #8588. ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 8,
        "deletions": 2,
        "changed_files": 3,
        "created_at": "2023-07-06T11:40:48Z",
        "closed_at": "2023-07-06T20:20:46Z",
        "merged_at": "2023-07-06T20:20:46Z",
        "body": "S3 can now accept empty value in the tag.\r\n\r\n## Fixes\r\n- Added test case for S3 tagging with empty tag\r\n\r\n## Issue\r\nhttps://github.com/localstack/localstack/issues/8598",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 303,
        "deletions": 346,
        "changed_files": 66,
        "created_at": "2023-07-06T10:53:01Z",
        "closed_at": "2023-07-14T09:37:40Z",
        "merged_at": "2023-07-14T09:37:40Z",
        "body": "This PR replaces the use of the old internal AWS client\r\n\r\n```\r\nlocalstack.utils.aws.aws_stack.connect_to_service()\r\n```\r\n\r\nwith the new one\r\n\r\n```\r\nlocalstack.aws.connect.connect_to()\r\n```\r\n\r\nThis is part of the plan to remove the legacy internal client entirely since it lacks proper support for multi- and cross- account access.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 14,
        "changed_files": 1,
        "created_at": "2023-07-06T10:37:29Z",
        "closed_at": "2023-07-06T18:06:06Z",
        "merged_at": "2023-07-06T18:06:06Z",
        "body": "Removing our custom `Unpickler` from the current implementation, as briefly discussed with @thrau.\r\nTo the best of my understanding, `dispatch_tables` are specific to `Picklers` only ([docs](https://docs.python.org/3/library/pickle.html#pickle.Pickler.dispatch_table)). \r\n\r\ncc @whummer \r\n\r\n",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 93,
        "deletions": 68,
        "changed_files": 3,
        "created_at": "2023-07-06T10:37:26Z",
        "closed_at": "2023-08-24T15:56:04Z",
        "merged_at": null,
        "body": "Checking tests of PR 8572\r\nCreated PR because the manual pipeline trigger failed with strange messages, cross checking automated pipeline trigger\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 84,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2023-07-05T21:34:38Z",
        "closed_at": "2023-07-12T17:49:29Z",
        "merged_at": "2023-07-12T17:49:29Z",
        "body": "We didn't really have any tests that used `AWS::Lambda::Function` with the code uploaded to an s3 bucket. Instead the tests usually directly embedded the code in the template.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 53,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2023-07-05T19:10:10Z",
        "closed_at": "2023-07-06T11:16:13Z",
        "merged_at": "2023-07-06T11:16:13Z",
        "body": "## Test Case\r\n- Added test cases for `if-match` and `if-none-match` headers\r\n\r\n## Related Issue\r\nhttps://github.com/localstack/localstack/issues/5345",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 534,
        "deletions": 22,
        "changed_files": 7,
        "created_at": "2023-07-05T19:04:41Z",
        "closed_at": "2023-07-06T20:34:04Z",
        "merged_at": "2023-07-06T20:34:04Z",
        "body": "This PR will fix #7060 and a ticket from support. \r\nIt appeared we store the JSON schema from Model directly as is, in Python `dict` format to `str`, without JSON encoding it, which made every request fail when validating against the schema.\r\n\r\n### Solution:\r\n- Added a method to jsonify the model before storing it\r\n- snapshot validated tests uncovered additional issues:\r\n  - we didn't check for `ANY` method in `RequestValidator`\r\n  - we were missing `requestParameters` empty value if it was an empty `dict`\r\n  - we were missing `operationName` field when creating `Method` from Cfn\r\n  - the `PhysicalResourceId` of a `Model` is its name, and not its `id` (that's what you are using when calling `GetModel`, added a AWS validated test to verify this behaviour, a CDK stack uncovered the issue)\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 12,
        "deletions": 3,
        "changed_files": 2,
        "created_at": "2023-07-05T17:14:15Z",
        "closed_at": "2023-07-06T05:43:35Z",
        "merged_at": "2023-07-06T05:43:35Z",
        "body": "This PR fixes a small issue where GZIP encoded responses from an OpenSearch backend were decompressed by the proxies before sending them to the requesting client.\r\nThis is fixed by using the `SimpleStreamingRequestsClient` introduced by @bentsku in #8148.\r\nIt also enables the GZIP feature on internal OpenSearch domains (which is only used if the client sends the appropriate `Accept-Encoding` header).\r\nIn the future we could think about removing this separate implementation and making this the default implementation.\r\n\r\nFixes #7742",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 39,
        "deletions": 22,
        "changed_files": 3,
        "created_at": "2023-07-05T15:59:05Z",
        "closed_at": "2023-07-20T19:03:34Z",
        "merged_at": null,
        "body": "While triaging #6468 which has been already fixed. I found out that our template deployer wasn't generating the CREATE_IN_PROGRESS events and also it was creating UPDATE_IN_PROGRESS for conditionals and parameters even in a create stack situation. \r\n\r\nThis changes fix all that. ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1940,
        "deletions": 98,
        "changed_files": 32,
        "created_at": "2023-07-05T14:37:46Z",
        "closed_at": "2023-07-14T10:50:11Z",
        "merged_at": "2023-07-14T10:50:11Z",
        "body": "Adds support for:\r\n - Optimised integration for stepfunctions `states`\r\n - `sync` functionality\r\n\r\nReworks exception handling design:\r\n - introduces `FailureEventException` carrying required information about the failure\r\n - ensures `State.Runtime` errors are always raised on terminal internal errors\r\n\r\nFixes several issues relevant to state `Fail`, describe execution output, and adds relevant tests",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 90,
        "deletions": 13,
        "changed_files": 5,
        "created_at": "2023-07-05T12:54:24Z",
        "closed_at": "2023-07-06T11:00:39Z",
        "merged_at": "2023-07-06T11:00:39Z",
        "body": "## Motivation\r\nThis PR will extend the functionality of `LAMBDA_DOCKER_NETWORK` to provide more than one network, as requested in #7338 .\r\n\r\nNetworks need to be provided comma separated, like this: `LAMBDA_DOCKER_NETWORK=network1,network2`.\r\nAs long as only one network is provided, the behavior does not change.\r\n\r\nFixes #7338.\r\n\r\n## Changes\r\n* Allow multiple docker networks to be respected (only new provider)\r\n* Add test for LAMBDA_DOCKER_NETWORK with multiple networks.\r\n\r\n## TODOs\r\n* After this is merged, we should document this.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 69,
        "deletions": 4,
        "changed_files": 4,
        "created_at": "2023-07-05T08:28:30Z",
        "closed_at": "2023-07-07T07:05:43Z",
        "merged_at": "2023-07-07T07:05:43Z",
        "body": "The PR fixes `GetTranscriptionJob` response for transcribe service that contains a presigned S3 URL valid for 15min.\r\n\r\nRelated issue #8097.\r\n\r\nFYI: The related developer hub [sample for transcribe](https://github.com/localstack/sample-serverless-transcribe), needs to be changed accordingly. ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 260,
        "deletions": 14,
        "changed_files": 6,
        "created_at": "2023-07-04T15:59:28Z",
        "closed_at": "2023-07-12T08:05:30Z",
        "merged_at": "2023-07-12T08:05:30Z",
        "body": "## Motivation\r\nCurrently, we do not properly verify the policy arn in the `attach_*_policy` methods, and have not tests for this behavior.\r\n\r\nDepens on https://github.com/getmoto/moto/pull/6482 , fixes #7934 .\r\n\r\nExt Test run (due to snapshot transform changes): https://github.com/localstack/localstack-ext/actions/runs/5522309201\r\n\r\n## Changes\r\n* Add tests for role/user attach policies and errors of the operation\r\n* Add verification of the policy arn\r\n* Depends on the linked moto PR for correct error handling for the correct arn but policy does not exist case.\r\n* Adds two more transform statements to iam_api transformer.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 232,
        "deletions": 14,
        "changed_files": 4,
        "created_at": "2023-07-04T14:12:24Z",
        "closed_at": "2023-07-05T11:28:46Z",
        "merged_at": "2023-07-05T11:28:46Z",
        "body": "## Motivation\r\nCurrently, if a role has a `PermissionsBoundary` attached, the `ListRoles` operation fails with a serializer error.\r\n\r\nThis is due to the returning of the unexpected `PermissionsBoundary` field in the to-be-serialized response.\r\n\r\nFixes #7779\r\n\r\n## Changes\r\n* Add new fields to iam_api snapshot transformer\r\n* Remove removal of `MaxSessionDuration` from model, it should only not be returned in the `CreateRole` call\r\n* Add aws validated + snapshotted tests for the `MaxSessionDuration` and the `PermissionsBoundary` behavior.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 4,
        "changed_files": 1,
        "created_at": "2023-07-04T12:18:53Z",
        "closed_at": "2023-07-04T14:56:04Z",
        "merged_at": "2023-07-04T14:56:04Z",
        "body": "This PR focuses to fix a special case of `TranscriptFileUri` where output key is not null and the file doesn't end with .json. \r\nThe earlier implementation was as per the AWS transcribe docs, but the actual AWS behaviour was different. \r\n\r\nFYI: we are currently skipping the check for `TranscriptFileUri` in all the test cases of transcribe due to other parity issues in the service. \r\n\r\nThis will fix a part of #8089.",
        "comments": 6
    },
    {
        "merged": true,
        "additions": 153,
        "deletions": 32,
        "changed_files": 20,
        "created_at": "2023-07-04T12:07:28Z",
        "closed_at": "2023-07-11T00:50:15Z",
        "merged_at": "2023-07-11T00:50:15Z",
        "body": "## Changes\r\n\r\n- Additional nesting for generated test files. `.../iam/test_aws_iam_user_basic.py` becomes `.../iam/aws_iam_user/test_basic.py`. This allows better segregation of resource types and simplifies file naming.\r\n- Fixes for type generation based on the schema (e.g. for `AWS::ApiGateway::RestApi` and `AWS::DynamoDB::Table`)\r\n- Introduce new config variable `CFN_RESOURCE_PROVIDER_OVERRIDES` to opt-in or opt-out of specific resource provider implementations.\r\n- Remove previous internal `CFN_RESOURCE_PROVIDERS_V2` config variable. (This variable hasn't worked yet, so the removal doesn't affect any existing users)\r\n- Migrate `AWS::IAM::User` tests to new structure\r\n\r\n## Next up (Follow-up PR)\r\n- We still need to fix the execution of new resource providers. More precisely, all the parts around the execution like depdency detection, GetAtt access, etc. which currently still tries to use the old GenericBaseModels for *all* resource types.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 6,
        "deletions": 6,
        "changed_files": 1,
        "created_at": "2023-07-04T11:18:44Z",
        "closed_at": "2023-07-04T16:10:43Z",
        "merged_at": "2023-07-04T16:10:43Z",
        "body": "As joint service owners, we should be aware of any cloudformation PRs. In particular, as part of the migration to resource providers, there is some configuration in the CloudFormation service directory. We should all be made aware when new resource providers are added to ensure that the centralised configuration is updated.\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-07-04T11:17:34Z",
        "closed_at": "2023-07-04T13:20:28Z",
        "merged_at": "2023-07-04T13:20:28Z",
        "body": "Routine moto bump\r\n\r\nExt test suite is :green_circle:",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 0,
        "deletions": 6,
        "changed_files": 1,
        "created_at": "2023-07-03T13:55:31Z",
        "closed_at": "2023-07-03T16:08:22Z",
        "merged_at": "2023-07-03T16:08:22Z",
        "body": "Removes `LAMBDA_DOCKER_DNS` from the deprecation list.\r\n\r\nThe feature was re-implemented for the new Lambda provider in https://github.com/localstack/localstack/pull/8448 but I missed removing it from the deprecation list.\r\n\r\n## Related Documentation Updates\r\n\r\n* Updated in the Lambda Discuss post: https://discuss.localstack.cloud/t/new-lambda-implementation-in-localstack-2-0/258\r\n* Pending PR to be merged after the v2.2 release: https://github.com/localstack/docs/pull/666",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 18,
        "deletions": 15,
        "changed_files": 2,
        "created_at": "2023-07-03T10:18:38Z",
        "closed_at": "2023-07-04T12:17:28Z",
        "merged_at": "2023-07-04T12:17:28Z",
        "body": "## Motivation\r\n* We got the case where we could not find the container in the list of connected endpoints in the network right after start with this network. If this happens, we want all the information we can get.\r\n\r\n## Changes\r\n* Add additional debug logs in error case\r\n* Proper defaults for different container configuration flags.\r\n* Sneaked in using new clients for retrieving code archives\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 34,
        "deletions": 22,
        "changed_files": 1,
        "created_at": "2023-07-03T05:04:35Z",
        "closed_at": "2023-07-03T06:48:14Z",
        "merged_at": "2023-07-03T06:48:14Z",
        "body": "# \ud83d\ude80 ASF Update Report \ud83d\ude80\nThis PR has been automatically generated to update the generated API stubs for our ASF services.\nIt uses the latest code-generator from the _master_ branch ([scaffold.py](https://github.com/localstack/localstack/blob/master/localstack/aws/scaffold.py)) and the latest _published_ version of [botocore](https://github.com/boto/botocore) to re-generate all API stubs which are already present in the `localstack.aws.api` module of the _master_ branch.\n\n## \ud83d\udd04 Updated Services\nThis PR updates the following services:\n- dynamodb\n\n## \ud83d\udc77\ud83c\udffd Handle this PR\nThe following options describe how to interact with this PR / the auto-update:\n\n\u2714\ufe0f **Accept Changes**\nIf the changes are satisfying, just squash-merge the PR and delete the source branch.\n\n\ud83d\udeab **Ignore Changes**\nIf you want to ignore the changes in this PR, just close the PR and *do not delete* the source branch. The PR will not be opened and a new PR will not be created for as long as the generated code does not change (or the branch is deleted). As soon as there are new changes, a new PR will be created.\n\n\u270f\ufe0f **Adapt Changes**\n*Don't do this.* The APIs are auto-generated. If you decide that the APIs should look different, you have to change the code-generation.\n\n\u23f8\ufe0f **Pause Updates**\nRemove the cron-schedule trigger of the GitHub Action workflow which creates these PRs. The action can then still be triggered manually, but it will not be executed automatically.",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 1600,
        "deletions": 458,
        "changed_files": 48,
        "created_at": "2023-06-29T15:24:09Z",
        "closed_at": "2023-09-18T13:22:29Z",
        "merged_at": null,
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 965,
        "deletions": 464,
        "changed_files": 40,
        "created_at": "2023-06-29T12:13:49Z",
        "closed_at": "2023-06-30T11:48:17Z",
        "merged_at": "2023-06-30T11:48:17Z",
        "body": "Lots of minor changes in here:\r\n\r\n- Implemented nested property type scaffolding. Previously this was only creating resources for top-level properties and didn't create generic list/dict types.\r\n- Add versioning for generated files. This is intended to make it easier for us to detect changes when refactoring and updating various things across scaffolded resources.\r\n- A lot of minor improvements for the template files\r\n- Added a reference implementation for `AWS::IAM::User`\r\n- Added a `SCHEMA` property to the resource provider. At some point we can probably remove this with a schema lookup on the registry but for now we can use this for physical resource id extraction and schema validation.",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 55,
        "deletions": 1,
        "changed_files": 4,
        "created_at": "2023-06-29T07:46:17Z",
        "closed_at": "2023-06-29T09:28:41Z",
        "merged_at": "2023-06-29T09:28:41Z",
        "body": "This PR fixes a small issue in the ASF parser which was caused by the latest change of `botocore`: https://github.com/boto/botocore/commit/5c337d96e3ff0833fe639be6007ff94bd330bd55\r\nIt introduces a new, optional, list-shaped header field `OptionalObjectAttributes` in `ListObjectsV2Request` (header field name `x-amz-optional-object-attributes` in the HTTP request).\r\n\r\nThanks a lot to @dominikschubert for the info on the issue (currently blocking the pipeline on master), a perfect writeup, and a suggestion for the fix!",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 65,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-06-29T07:31:45Z",
        "closed_at": "2023-06-29T14:16:23Z",
        "merged_at": "2023-06-29T14:16:23Z",
        "body": "We are currently testing a private GitHub Project (Beta / V2) to organize the issues in this repo.\r\nUnfortunately, the new projects do not provide a sync (not even unidirectional) between labels and GitHub Project fields (like the status). \r\n\r\nThis PR adds a small action which acts on issue (un-)label events to set a specific status value on a project card based on the labels set.\r\n\r\nThis is only a prototypical and uni-directional sync, issue labels -> project card status. The other way around (project card status -> issue labels) is unfortunately also not solvable with GitHub actions, because org projects do not trigger issue events. This could be solved if we decide to move the board from the org to the repo.\r\n\r\nI'm grateful for any feedback!\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 79,
        "deletions": 23,
        "changed_files": 1,
        "created_at": "2023-06-28T22:56:34Z",
        "closed_at": "2023-07-05T21:39:54Z",
        "merged_at": "2023-07-05T21:39:54Z",
        "body": "This PR uses the docker socket (if available) to determine a machine id and the system. This gives us information about the host rather than only about the container. The machine ids are now also prefixed so we can determine how they were generated. Note that we always hash any real machine IDs for privacy purposes.\r\n\r\n* `gen_` generated by localstack\r\n* `dkr_` docker daemon id\r\n* `sys_` machine id from the system file `/etc/machine-id`\r\n\r\nMoreover, the PR uses the `LOCALSTACK_AUTH_TOKEN` as `api_key` field if available in preparation for our new licensing scheme.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 59,
        "deletions": 23,
        "changed_files": 5,
        "created_at": "2023-06-28T10:23:06Z",
        "closed_at": "2023-06-28T13:19:27Z",
        "merged_at": "2023-06-28T13:19:27Z",
        "body": "Add small fix and test to assert that `prepare_host` hooks are called with appropriate LocalStack directories layout. This is a follow-up from https://github.com/localstack/localstack/pull/8384 . \r\n\r\nThe previous PR #8384 adjusted the logic to start up LocalStack using the CLI when running inside a Docker container, for example to run `localstack start` in a [Github Codespaces](https://github.com/codespaces/) environment. This works well for the Community version, but unfortunately there was an oversight for the Pro version, where we're performing operations on the host via `prepare_host` hooks. In particular, the hook used to cache the key locally was failing with a `PermissionError`, as it was trying to access the wrong directory (using the container dirs layout, not the host dirs layout).\r\n```\r\nTraceback (most recent call last):\r\n  File \"/usr/local/python/3.10.4/lib/python3.10/site-packages/localstack_ext/bootstrap/licensing.py\", line 64, in fetch_key\r\n    C=json.loads(to_str(B.content))[_C];cache_key_locally(A,C)\r\n  File \"/usr/local/python/3.10.4/lib/python3.10/site-packages/localstack_ext/bootstrap/licensing.py\", line 75, in cache_key_locally\r\n    A=to_str(base64.b64encode(to_bytes(C)));E=get_key_cache();E.update({_E:int(B),_G:md5(api_key),_C:A});E.save()\r\n  File \"/usr/local/python/3.10.4/lib/python3.10/site-packages/localstack/utils/json.py\", line 84, in save\r\n    os.makedirs(os.path.dirname(self.path), exist_ok=True)\r\n  File \"/usr/local/python/3.10.4/lib/python3.10/os.py\", line 215, in makedirs\r\n    makedirs(head, exist_ok=exist_ok)\r\n  File \"/usr/local/python/3.10.4/lib/python3.10/os.py\", line 225, in makedirs\r\n    mkdir(name, mode)\r\nPermissionError: [Errno 13] Permission denied: '/var/lib/localstack'\r\n```\r\n\r\nThis PR contains a small follow-up change in `cmd_start(..)` to ensure `bootstrap.prepare_host(..)` is called _after_ we're performing the `config.*` adjustments introduced in #8384 . The change has been tested in Github Codespaces, which now allows to spin up a Pro container via the CLI if the API key is configured. A unit test is added to cover the functionality, with assertions about the \"is in Docker\" status and the accessibility of the `dirs.cache` directory.\r\n\r\nNote: The PR also contains a few minor cleanups/refactorings (add type hints, f-strings, etc) along the way.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 8,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-06-28T10:03:41Z",
        "closed_at": "2023-06-28T12:52:51Z",
        "merged_at": "2023-06-28T12:52:51Z",
        "body": "Currently the logs get spammed with `KeyError`s caused by the stack cleanup and its `delete` action lookups on the GenericBaseModels. \r\n\r\nExample:\r\n```\r\n2023-06-28T09:20:35.957 ERROR --- [  asgi_gw_10] localstack.services.cloudformation.engine.template_deployer : Last cycle failed to delete resource with id Version. Final exception: 'delete'\r\nTraceback (most recent call last):\r\n  File \"/tmp/workspace/repo/localstack/services/cloudformation/engine/template_deployer.py\", line 881, in delete_stack\r\n    executor.deploy_loop(resource_provider_payload)  # noqa\r\n  File \"/tmp/workspace/repo/localstack/services/cloudformation/resource_provider.py\", line 558, in deploy_loop\r\n    event = self.execute_action(payload)\r\n  File \"/tmp/workspace/repo/localstack/services/cloudformation/resource_provider.py\", line 602, in execute_action\r\n    return resource_provider.delete(request)\r\n  File \"/tmp/workspace/repo/localstack/services/cloudformation/resource_provider.py\", line 421, in delete\r\n    return self.create_or_delete(request)\r\n  File \"/tmp/workspace/repo/localstack/services/cloudformation/resource_provider.py\", line 449, in create_or_delete\r\n    func_details = func_details[LEGACY_ACTION_MAP[request.action]]\r\nKeyError: 'delete'\r\n```\r\n\r\nThis now behaves as previously before the introduction of the LegacyResourceProvider by simply ignoring the resource action and assuming a `SUCCESS` state immediately if `get_deploy_templates` doesn't contain the requested handler.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 104,
        "deletions": 15,
        "changed_files": 6,
        "created_at": "2023-06-28T08:59:33Z",
        "closed_at": "2023-06-28T13:15:30Z",
        "merged_at": "2023-06-28T13:15:30Z",
        "body": "Adds very basic support for CloudFormation stack parameters that aren't just a single value but actually a comma-delimited list, e.g. `List<AWS::EC2::Subnet::Id>`\r\n\r\nThe tests needs to be replaced at some point, just churned this out as a quick fix for now. The behavior has been verified against AWS and can be verified using the test by setting the subnet and security group IDs manually.\r\n\r\n/cc @sannya-singal ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 52,
        "deletions": 2,
        "changed_files": 3,
        "created_at": "2023-06-27T18:24:32Z",
        "closed_at": "2023-06-27T19:39:08Z",
        "merged_at": "2023-06-27T19:39:08Z",
        "body": "## Current Issue\r\nWe are currently not closing down our response generators after the client closes the connection. This leads to resource leaks, as the generators keep running in the background, even though no one will ever read the response.\r\n\r\nThis snipped from hypercorn `http_stream.py` shows us, that all response `send` calls will return immediately once the connection is closed.\r\n\r\n```python\r\n    async def app_send(self, message: Optional[ASGISendEvent]) -> None:\r\n        if self.closed:\r\n            # Allow app to finish after close\r\n            return\r\n```\r\n\r\nWe now need to also stop the generators, once we detect the client connection is closed.\r\n\r\n## Changes\r\n* Access internals of `send` call to determine if the connection to the client is closed already and raise a `BrokenPipeError` in that case.\r\n* If any `ConnectionError` is raised during sending data from the iterator, we stop reading from it and close the (async) generator\r\n* Add test for this behavior in the asgi bridge, to avoid future regression\r\n* We do not read all responses in our request logging, to enable chunked responses for requests not parsed by the serializer",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 10,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-06-27T08:01:25Z",
        "closed_at": "2023-06-28T11:59:49Z",
        "merged_at": null,
        "body": "Add comma separated values for providing multiple subnet ids in vpc config for lambda function cloudformation template deployer.",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 10,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-06-27T04:36:04Z",
        "closed_at": "2023-06-27T08:01:58Z",
        "merged_at": null,
        "body": "Add comma separated values for providing multiple subnet ids in vpc config for lambda function cloudformation template deployer. ",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2023-06-27T00:01:04Z",
        "closed_at": "2023-06-27T07:27:54Z",
        "merged_at": "2023-06-27T07:27:54Z",
        "body": "Bumps python from `55b9919` to `b51f870`.\n\n\n[![Dependabot compatibility score](https://dependabot-badges.githubapp.com/badges/compatibility_score?dependency-name=python&package-manager=docker&previous-version=3.10.12-slim-bullseye&new-version=3.10.12-slim-bullseye)](https://docs.github.com/en/github/managing-security-vulnerabilities/about-dependabot-security-updates#about-compatibility-scores)\n\nDependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.\n\n[//]: # (dependabot-automerge-start)\n[//]: # (dependabot-automerge-end)\n\n---\n\n<details>\n<summary>Dependabot commands and options</summary>\n<br />\n\nYou can trigger Dependabot actions by commenting on this PR:\n- `@dependabot rebase` will rebase this PR\n- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it\n- `@dependabot merge` will merge this PR after your CI passes on it\n- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it\n- `@dependabot cancel merge` will cancel a previously requested merge and block automerging\n- `@dependabot reopen` will reopen this PR if it is closed\n- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually\n- `@dependabot ignore this major version` will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot ignore this minor version` will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot ignore this dependency` will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)\n\n\n</details>",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 32,
        "deletions": 0,
        "changed_files": 4,
        "created_at": "2023-06-26T16:40:08Z",
        "closed_at": "2023-06-28T13:18:58Z",
        "merged_at": "2023-06-28T13:18:58Z",
        "body": "Adds two methods `get_system_info` and `get_system_id` to the container client interface. On docker, this is populated using `docker info`, and can provide a stable machine ID even from within the container.\r\n\r\nFuture work: check whether this works on podman (ad: daniel checked, it works), and how that would work on k8s.",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 2,
        "deletions": 132,
        "changed_files": 3,
        "created_at": "2023-06-26T14:03:49Z",
        "closed_at": "2023-07-13T08:12:36Z",
        "merged_at": null,
        "body": "This PR removes the `proxy_server.start_ssl_proxy` function, as well as the dependency `pproxy`.\r\nOnce `pproxy` is removed, we should be able to move towards Python 3.11 for the runtime: https://github.com/localstack/localstack/pull/8087",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 0,
        "deletions": 27,
        "changed_files": 1,
        "created_at": "2023-06-26T10:48:17Z",
        "closed_at": "2023-06-28T16:46:39Z",
        "merged_at": "2023-06-28T16:46:39Z",
        "body": "We have already the same custom pickling approach implemented [here](https://github.com/localstack/localstack-plugin-persistence/blob/main/localstack_persistence/pickling/reducers/services/acm.py). This is redundant.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 255,
        "deletions": 4,
        "changed_files": 5,
        "created_at": "2023-06-26T07:55:55Z",
        "closed_at": "2023-07-02T20:22:41Z",
        "merged_at": "2023-07-02T20:22:41Z",
        "body": "REST API supports adding documentation to an API, using the \"import documentation parts\" API.\r\n\r\nhttps://docs.aws.amazon.com/apigateway/latest/developerguide/api-gateway-documenting-api-quick-start-import-export.html\r\n\r\nThis PR adds support to \"import documentation parts\" for REST API but only the \"override\" mode.\r\n\r\n# Changes\r\n\r\n- implements `import_documentation_parts` for \"overwrite\" mode.\r\n- adds snapshot testing.\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 93,
        "deletions": 68,
        "changed_files": 3,
        "created_at": "2023-06-26T06:38:06Z",
        "closed_at": "2023-08-01T10:51:06Z",
        "merged_at": "2023-08-01T10:51:06Z",
        "body": "closes #8566 \r\n\r\nJust a small note, according to the docs\r\nhttps://docs.aws.amazon.com/AWSSimpleQueueService/latest/APIReference/API_ReceiveMessage.html#SQS-ReceiveMessage-request-MessageAttributeNames\r\n\r\nonly `All` and `.*` are allowed as wild card, but actually it also supports `*` (as described in the issue)",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 394,
        "deletions": 14,
        "changed_files": 6,
        "created_at": "2023-06-26T05:05:22Z",
        "closed_at": "2023-06-27T07:50:53Z",
        "merged_at": "2023-06-27T07:50:52Z",
        "body": "# \ud83d\ude80 ASF Update Report \ud83d\ude80\nThis PR has been automatically generated to update the generated API stubs for our ASF services.\nIt uses the latest code-generator from the _master_ branch ([scaffold.py](https://github.com/localstack/localstack/blob/master/localstack/aws/scaffold.py)) and the latest _published_ version of [botocore](https://github.com/boto/botocore) to re-generate all API stubs which are already present in the `localstack.aws.api` module of the _master_ branch.\n\n## \ud83d\udd04 Updated Services\nThis PR updates the following services:\n- cloudformation\n- config\n- ec2\n- lambda-\n- redshift\n- stepfunctions\n\n## \ud83d\udc77\ud83c\udffd Handle this PR\nThe following options describe how to interact with this PR / the auto-update:\n\n\u2714\ufe0f **Accept Changes**\nIf the changes are satisfying, just squash-merge the PR and delete the source branch.\n\n\ud83d\udeab **Ignore Changes**\nIf you want to ignore the changes in this PR, just close the PR and *do not delete* the source branch. The PR will not be opened and a new PR will not be created for as long as the generated code does not change (or the branch is deleted). As soon as there are new changes, a new PR will be created.\n\n\u270f\ufe0f **Adapt Changes**\n*Don't do this.* The APIs are auto-generated. If you decide that the APIs should look different, you have to change the code-generation.\n\n\u23f8\ufe0f **Pause Updates**\nRemove the cron-schedule trigger of the GitHub Action workflow which creates these PRs. The action can then still be triggered manually, but it will not be executed automatically.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 66,
        "deletions": 2,
        "changed_files": 3,
        "created_at": "2023-06-25T19:25:29Z",
        "closed_at": "2023-07-03T16:15:06Z",
        "merged_at": "2023-07-03T16:15:06Z",
        "body": "# Changes\r\n\r\nAdds support for HTTP integration URIs  https://docs.aws.amazon.com/apigateway/latest/developerguide/aws-api-gateway-stage-variables-reference.html\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 368,
        "deletions": 43,
        "changed_files": 5,
        "created_at": "2023-06-25T17:58:12Z",
        "closed_at": "2023-07-02T08:30:06Z",
        "merged_at": "2023-07-02T08:30:06Z",
        "body": "# Changes\r\n\r\n- Adds log, latency and multiValueHeaders to the response for the \"Test Invoke Request\"\r\n- Add snapshot test.\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 108,
        "deletions": 35,
        "changed_files": 4,
        "created_at": "2023-06-23T11:10:32Z",
        "closed_at": "2023-06-27T21:54:37Z",
        "merged_at": "2023-06-27T21:54:37Z",
        "body": "This PR aims at unifying the CLI error- and exitcode-handling.\r\n- It explicitly catches some common exceptions and prints proper error messages (f.e. Docker is not installed, localstack_main is not running for status command,...). /cc @SimonWallner \r\n- It uses the `ClickException` for all error cases to use a unified error message as well as a non-zero exit code: https://click.palletsprojects.com/en/8.1.x/exceptions/#exception-handling\r\n\r\nChanges postponed to later iterations:\r\n- Introduce more fine grained Docker exceptions, clearly indicating that a container cannot be started due to port- or naming conflicts. (This was initially the plan for this PR, but this needs some changes in the Docker clients, which would bloat up this PR quite a lot.) /cc @dfangl ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-06-22T18:25:02Z",
        "closed_at": "2023-06-22T22:25:09Z",
        "merged_at": "2023-06-22T22:25:09Z",
        "body": "This is to detect CI environments when starting localstack through the CLI",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 5,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-06-22T17:27:40Z",
        "closed_at": "2023-06-22T18:48:06Z",
        "merged_at": "2023-06-22T18:48:06Z",
        "body": "Changes\r\n\r\n- Adds logical resource ID to \"meta\"-resource data passed when instantiating a GenericBaseModel for updates. This missing lead to KeyErrors on LogicalResourceId\r\n- Adds a patch from -ext here to avoid having to patch this in -ext.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2023-06-22T16:49:58Z",
        "closed_at": "2023-06-23T08:48:39Z",
        "merged_at": "2023-06-23T08:48:39Z",
        "body": "## Motivation\r\nThe command line docker client does not like an entrypoint with an argument. It will interpret this as a single binary, i.e. look for \"sh -c\" in the path.\r\n\r\nSince we cannot have an empty entrypoint, due to podman, and not an entrypoint including a command prefix, due to the docker cmd client.\r\n\r\n## Changes\r\n* Change entrypoint to \"sh\" and the command to \"-c\", \"echo123\". This should be compatible with all clients.\r\n\r\n## Future considerations\r\n* We might want to change the docker cmd client to properly pass these entrypoints.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 308,
        "deletions": 16,
        "changed_files": 4,
        "created_at": "2023-06-22T15:28:20Z",
        "closed_at": "2023-06-22T19:43:46Z",
        "merged_at": "2023-06-22T19:43:46Z",
        "body": "## Motivation\r\nCurrently, SQS AddPermission and RemovePermission calls do only save the permissions in some internal datastructure - they are never returned with sqs.GetQueueAttributes. This is problematic, since this is a necessity for cross account evaluation.\r\n\r\nYou could just use SetQueueAttributes on the `Policy` attribute but we should match AWS behavior.\r\n\r\n## Changes\r\n* Rework SQS permission management, by adapting the stored policy\r\n* Add AWS validated test for permission lifecycles.",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 69,
        "deletions": 129,
        "changed_files": 14,
        "created_at": "2023-06-22T14:18:28Z",
        "closed_at": "2023-07-27T04:41:06Z",
        "merged_at": "2023-07-27T04:41:06Z",
        "body": null,
        "comments": 2
    },
    {
        "merged": true,
        "additions": 76,
        "deletions": 59,
        "changed_files": 3,
        "created_at": "2023-06-22T13:49:34Z",
        "closed_at": "2023-06-23T14:12:19Z",
        "merged_at": "2023-06-23T14:12:19Z",
        "body": "This PR:\r\n- Adds support for specifying [additional parameters](https://docs.aws.amazon.com/amazondynamodb/latest/APIReference/API_CreateReplicationGroupMemberAction.html) when creating replicated global tables\r\n- Fixes #7426 \r\n\r\nBecause the model definition is changed, this PR will cause loss of DynamoDB resources in existing cloud pods.\r\n\r\nDocs: https://github.com/localstack/docs/pull/671",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 376,
        "deletions": 8,
        "changed_files": 12,
        "created_at": "2023-06-22T08:55:22Z",
        "closed_at": "2023-06-22T09:56:15Z",
        "merged_at": "2023-06-22T09:56:14Z",
        "body": "Still a bit WIP but another iteration on which tests we want to auto-generate when scaffolding a new resource provider.\r\n\r\nThe PR also includes a few minor fixes to the scaffolding script itself.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1809,
        "deletions": 108,
        "changed_files": 24,
        "created_at": "2023-06-22T06:22:58Z",
        "closed_at": "2023-06-28T08:14:21Z",
        "merged_at": "2023-06-28T08:14:21Z",
        "body": "Changes\r\n\r\n- Move default resource property generation to LegacyResourceProvider\r\n- Remove mappings from `Stack.resources` for a clearer data flow / future restructuring\r\n- Explore/fix handling of intrinsic conditions functions & `AWS::NoValue` handling and add corresponding tests",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 6,
        "deletions": 3,
        "changed_files": 2,
        "created_at": "2023-06-21T15:49:03Z",
        "closed_at": "2023-06-22T08:50:17Z",
        "merged_at": "2023-06-22T08:50:17Z",
        "body": "## Motivation\r\n* Podman has issues with empty entrypoints. While they seem to be fixed in some cases, using the docker sdk seems to still trigger this behavior.\r\n* Podman cannot resolve `host.docker.internal`, which is necessary for services like EKS. The default fallback to the bridge network gateway is invalid as well. It can however use `host.containers.internal`.\r\n\r\n## Changes\r\n* Start port detection container with `sh -c` instead of an empty entrypoint to circumvent the issue. We might seek a more fundamental fix at some point, but this will do for now.\r\n* Add a fallback to `host.containers.internal` if `host.docker.internal` does not resolve. If this as well fails, the fallback behaves like it currently does.",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 23,
        "deletions": 9,
        "changed_files": 1,
        "created_at": "2023-06-21T13:43:42Z",
        "closed_at": "2023-06-23T07:37:30Z",
        "merged_at": "2023-06-23T07:37:30Z",
        "body": "This PR updates the `README.md` with new installation instructions promoting the binary builds of the LocalStack CLI (built in [localstack/localstack-cli](https://github.com/localstack/localstack-cli)).\r\n\r\nRelates to:\r\n- https://github.com/localstack/docs/pull/668\r\n- https://github.com/localstack/localstack-cli/pull/9",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 140,
        "deletions": 5,
        "changed_files": 3,
        "created_at": "2023-06-21T13:34:49Z",
        "closed_at": "2023-06-30T15:16:53Z",
        "merged_at": null,
        "body": "This PR simply triggers the CI for PR 8 4 7 9 (Experimenting with this PR; link will be fixed later if necessary)\r\nAlso fixes a minor inconsistency in an Error Message\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 66,
        "deletions": 48,
        "changed_files": 4,
        "created_at": "2023-06-21T10:51:46Z",
        "closed_at": "2023-06-22T07:49:32Z",
        "merged_at": "2023-06-22T07:49:32Z",
        "body": "This PR adds multi-accounts awareness to OpenSearch and ElasticSearch. \r\n\r\nNow, account IDs and regions are only taken either from request context or ARNs in scope. This means these provider operations won't break when using a non-default account ID.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 6,
        "deletions": 3,
        "changed_files": 1,
        "created_at": "2023-06-20T18:25:38Z",
        "closed_at": "2023-06-21T10:23:15Z",
        "merged_at": "2023-06-21T10:23:15Z",
        "body": "this PR replaces the usage of the CIDR block to fetch the resource state for  the VPC ID that the EC2 service generates. This allows CFn to deploy multiple VPCs with the same CIDR Block.\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 3,
        "changed_files": 1,
        "created_at": "2023-06-20T16:47:21Z",
        "closed_at": "2023-06-20T18:40:49Z",
        "merged_at": "2023-06-20T18:40:49Z",
        "body": "## Issue\r\nWe are currently loading the flask request for a thread every time we call get_request_context(), even though we might find it in the thread local variable anyway.\r\n\r\nThis leads to the request streams being read, if you access methods like \"get_region_from_request_context`, and the streams not being available anymore.\r\n\r\n## Solution\r\nInstead of loading both, and then iterating, we will now load while iterating. This means, if the threadlocal request context is set, we will not call `get_flask_request_for_thread`, and therefore not load the request.\r\n\r\nWhile this is still implicit, and it is still possibly loading the request into a flask request, it provides a reasonable improvement until we can get rid of the flask context one and for all.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 8,
        "deletions": 15,
        "changed_files": 1,
        "created_at": "2023-06-20T12:32:53Z",
        "closed_at": "2023-06-20T16:41:32Z",
        "merged_at": "2023-06-20T16:41:32Z",
        "body": null,
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1243,
        "deletions": 319,
        "changed_files": 16,
        "created_at": "2023-06-20T11:09:06Z",
        "closed_at": "2023-06-21T14:01:20Z",
        "merged_at": "2023-06-21T14:01:20Z",
        "body": "This PR adds an adaptor for the `GenericBaseModel` resource providers, which is invoked when a new resource provider is not found. It creates two \"new style\" resource providers: SSM parameter and OpenSearch Domain.\n\nThis behaviour is hidden behind a new feature flag `CFN_RESOURCE_PROVIDERS_V2` which must be enabled to opt-in to the new behaviour.\n\n## Enabling new providers\n\nProviders are enabled by setting `CFN_RESOURCE_PROVIDERS_V2=1` and ensuring that you have re-build the entrypoints list with `make entrypoints`. Then new providers are used in preference to old ones.\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-06-19T20:40:44Z",
        "closed_at": "2023-07-17T14:30:10Z",
        "merged_at": "2023-07-17T14:30:10Z",
        "body": "quick fix for #8225 and #8380\r\n\r\ni'd like to get some input from @dfangl and @viren-nadkarni whether this makes sense and is something we can expand on.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 166,
        "deletions": 228,
        "changed_files": 19,
        "created_at": "2023-06-19T16:33:35Z",
        "closed_at": "2023-06-21T11:52:16Z",
        "merged_at": "2023-06-21T11:52:16Z",
        "body": "Update signature of the \"result_handler\" functions to remove unused parameters, and parameters that the provider should not have access to, particularly the full list of resource definitions.\n\nThis work is in preparation of integrating the new resource providers into the template deployer.\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 82,
        "deletions": 14,
        "changed_files": 3,
        "created_at": "2023-06-19T06:21:17Z",
        "closed_at": "2023-06-19T13:23:50Z",
        "merged_at": "2023-06-19T13:23:50Z",
        "body": "- Add `EncryptionContext` parameter to `GenerateDataKeyPairWithoutPlaintext` and `GenerateDataKeyPair`.\r\n- Write snapshot tests to check the expected behaviour against AWS.\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 138,
        "deletions": 1,
        "changed_files": 3,
        "created_at": "2023-06-19T05:05:33Z",
        "closed_at": "2023-06-19T09:02:20Z",
        "merged_at": "2023-06-19T09:02:20Z",
        "body": "# \ud83d\ude80 ASF Update Report \ud83d\ude80\nThis PR has been automatically generated to update the generated API stubs for our ASF services.\nIt uses the latest code-generator from the _master_ branch ([scaffold.py](https://github.com/localstack/localstack/blob/master/localstack/aws/scaffold.py)) and the latest _published_ version of [botocore](https://github.com/boto/botocore) to re-generate all API stubs which are already present in the `localstack.aws.api` module of the _master_ branch.\n\n## \ud83d\udd04 Updated Services\nThis PR updates the following services:\n- ec2\n- opensearch\n- s3\n\n## \ud83d\udc77\ud83c\udffd Handle this PR\nThe following options describe how to interact with this PR / the auto-update:\n\n\u2714\ufe0f **Accept Changes**\nIf the changes are satisfying, just squash-merge the PR and delete the source branch.\n\n\ud83d\udeab **Ignore Changes**\nIf you want to ignore the changes in this PR, just close the PR and *do not delete* the source branch. The PR will not be opened and a new PR will not be created for as long as the generated code does not change (or the branch is deleted). As soon as there are new changes, a new PR will be created.\n\n\u270f\ufe0f **Adapt Changes**\n*Don't do this.* The APIs are auto-generated. If you decide that the APIs should look different, you have to change the code-generation.\n\n\u23f8\ufe0f **Pause Updates**\nRemove the cron-schedule trigger of the GitHub Action workflow which creates these PRs. The action can then still be triggered manually, but it will not be executed automatically.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 278,
        "deletions": 178,
        "changed_files": 21,
        "created_at": "2023-06-16T16:19:08Z",
        "closed_at": "2023-06-20T09:52:27Z",
        "merged_at": "2023-06-20T09:52:27Z",
        "body": "Update call sites to the `params` helper function to not use `resources` since this is not available with the new provider structure.\n\n*Note*: unfortunately there is still duplication: the `properties` argument is the same as `resource[\"Properties\"]` however we have an extensive list of helper functions in `deployment_utils.py` that it's not worth re-writing at this stage. The main output is that we no longer depend on the `resources` dictionary.\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 315,
        "deletions": 287,
        "changed_files": 11,
        "created_at": "2023-06-16T13:41:21Z",
        "closed_at": "2023-07-14T05:47:44Z",
        "merged_at": "2023-07-14T05:47:44Z",
        "body": "This PR introduces `secondary_aws_client` fixture which works exactly like the `aws_client` fixture except it is configured with secondary test credentials.\r\n\r\nIt is meant to be used in cross-accounts test scenarios.\r\n\r\nThis PR also migrates existing cross-accounts tests to use this new fixture.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 68,
        "deletions": 5,
        "changed_files": 3,
        "created_at": "2023-06-16T07:41:59Z",
        "closed_at": "2023-06-16T10:32:43Z",
        "merged_at": "2023-06-16T10:32:43Z",
        "body": "- Add `EncryptionContext` parameter to `GenerateDataKeyWithoutPlaintext` and `GenerateDataKey`. \r\n- Write snapshot tests to check the expected behaviour against AWS. \r\n\r\nRelated issues: https://github.com/localstack/localstack/issues/8505 and https://github.com/localstack/localstack/issues/8503\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 11,
        "deletions": 15,
        "changed_files": 4,
        "created_at": "2023-06-15T15:35:10Z",
        "closed_at": "2023-06-15T19:55:30Z",
        "merged_at": "2023-06-15T19:55:30Z",
        "body": "Follow-up to #8266",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 316,
        "deletions": 39,
        "changed_files": 6,
        "created_at": "2023-06-15T12:58:11Z",
        "closed_at": "2023-06-19T17:02:00Z",
        "merged_at": "2023-06-19T17:02:00Z",
        "body": "## Motivation\r\n\r\nFor proper IAM enforcement, I needed to rework some parts of the backend integration, to assume the correct role and send the internal request parameters.\r\n\r\nTests lead down to another issue, namely incorrect handling of integration responses.\r\nFor this, we need to define some vocabulary:\r\n* *upstream response status code*: The status code the integration request returns. For an HTTP integration, this would be the status code of the HTTP response from upstream.\r\n* *integration response status code*: The status code defined in the integration-response within apigateway. If the integration-response matches, this status code will be returned, after all the mappings of this integration response are applied.\r\n\r\nWhat we currently do, is match the upstream response status code to the integration response status code one to one, otherwise just use the single one defined. If more than one is defined, a lot of behavior is just skipped.\r\n\r\nThe (discussed with @bentsku) correct handling would be to match the status code to the selectionPattern of all integration responses, and then return the status code defined in the matching integration response.\r\n\r\n## Changes\r\n* Correct behavior of selecting integration responses to be applied\r\n* Add test for this behavior\r\n* Migrate to the new clients and use assumed roles\r\n* Add utility to mock internal request headers for AWS integrations",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 1720,
        "deletions": 1133,
        "changed_files": 24,
        "created_at": "2023-06-15T12:47:48Z",
        "closed_at": "2023-08-23T10:31:12Z",
        "merged_at": null,
        "body": "Result of initial coding session with @joe4dev  and @dfangl \r\n\r\nMore details TBD\r\n\r\n## Internal documentation\r\n\r\n* https://www.notion.so/localstack/2023-06-13-Lambda-Spawn-Loop-Rework-8f8c050054174f9d940a0d2e024863ce?pvs=4\r\n* https://www.notion.so/localstack/2023-07-05-2023-07-11-2023-07-28-2023-08-02-Lambda-Async-invoke-and-concurrency-2cd54c2281074e74b3530992c46bdac9?pvs=4",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 275,
        "deletions": 228,
        "changed_files": 5,
        "created_at": "2023-06-15T11:13:52Z",
        "closed_at": "2023-06-16T11:39:17Z",
        "merged_at": "2023-06-16T11:39:17Z",
        "body": "A customer reported segmentation faults during persistence state restoration involving KMS keys and aliases. It turned out that we were persisting the private key object as part of the KMS key abstraction. This was problematic because this object, created by the underlying SSL implementation, maintained in-memory references. These references broke when the KMS state was deserialised and restored, causing a segfault.\r\n\r\nThis PR removes the assignment of the private key object to `KmsCryptoKey` abstraction, preventing it from going into the state. Instead it is created dynamically from the DER encoded private key string.\r\n\r\nI've taken this opportunity to also refactor the KMS store definition. The helper methods have been moved out of the model definitions.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 17,
        "deletions": 14,
        "changed_files": 3,
        "created_at": "2023-06-14T08:54:25Z",
        "closed_at": "2023-06-14T20:49:13Z",
        "merged_at": "2023-06-14T20:49:12Z",
        "body": "Add Python 3.10 to list of supported Lambda layer runtimes.\r\n\r\nWe're currently getting this error when creating a Layer with Python 3.10 listed in compatible runtimes:\r\n```\r\n$ awslocal lambda publish-layer-version --layer-name layer1 --zip-file fileb:///tmp/testlayer.zip --compatible-runtimes python3.10\r\nAn error occurred (ValidationException) when calling the PublishLayerVersion operation: 1 validation error detected: Value '[python3.10]' at 'compatibleRuntimes' failed to satisfy constraint: Member must satisfy enum value set: [nodejs12.x, java17, provided, nodejs16.x, nodejs14.x, ruby2.7, python3.10, java11, dotnet6, go1.x, nodejs18.x, provided.al2, java8, java8.al2, dotnetcore3.1, python3.7, python3.8, python3.9]\r\n```\r\n\r\nThis surfaced when dogfooding LS for integration testing with our platform. Let me know if you think this should be covered by a test, and what would be a good place to add one.",
        "comments": 8
    },
    {
        "merged": true,
        "additions": 284,
        "deletions": 74,
        "changed_files": 4,
        "created_at": "2023-06-14T04:52:40Z",
        "closed_at": "2023-06-22T09:37:13Z",
        "merged_at": "2023-06-22T09:37:13Z",
        "body": "This PR supersedes #8182\r\n\r\nThis is needed for https://github.com/localstack/moto/pull/67, so that we can isolate the changes in this PR (adding the behaviour that has been removed in moto) and already release a new moto version without merging the big S3 stream handling PR. \r\n\r\nAlso, moto does not handle the checksum for CRC32C as it depends on `awscrt`. We are recalculating it for this specific algorithm. \r\n\r\nIt also has benefits on its own, as it allows us to properly cache the checksum value in the S3 Object instead of calculating it every time it's requested. ",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 1005,
        "deletions": 214,
        "changed_files": 17,
        "created_at": "2023-06-13T16:45:21Z",
        "closed_at": "2023-06-27T06:03:29Z",
        "merged_at": "2023-06-27T06:03:29Z",
        "body": "Add additional tests in scaffolding output\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-06-13T15:46:55Z",
        "closed_at": "2023-06-14T05:20:12Z",
        "merged_at": "2023-06-14T05:20:12Z",
        "body": "Fix an issue when issuing a log warning, I missed a string interpolation `%s` and provided 3 parameters for only 2 `%s`. \r\n\r\nThis will fix it. ",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 626,
        "deletions": 3,
        "changed_files": 11,
        "created_at": "2023-06-13T15:08:57Z",
        "closed_at": "2023-06-21T13:36:12Z",
        "merged_at": null,
        "body": "Add two example resource providers:\n\n* AWS::SSM::Parameter\n* AWS::OpenSearchService::Domain\n\nThese providers are not integrated into the main deployment loop in any way, and are additionally gated behind a feature flag (`CFN_RESOURCE_PROVIDERS_V2`) to prevent accidental breakage.\n",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 1,
        "deletions": 287,
        "changed_files": 7,
        "created_at": "2023-06-13T10:55:44Z",
        "closed_at": "2023-07-12T09:58:06Z",
        "merged_at": null,
        "body": null,
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2023-06-13T00:01:49Z",
        "closed_at": "2023-06-22T06:58:39Z",
        "merged_at": "2023-06-22T06:58:39Z",
        "body": "Bumps python from 3.10.11-slim-bullseye to 3.10.12-slim-bullseye.\n\n\n[![Dependabot compatibility score](https://dependabot-badges.githubapp.com/badges/compatibility_score?dependency-name=python&package-manager=docker&previous-version=3.10.11-slim-bullseye&new-version=3.10.12-slim-bullseye)](https://docs.github.com/en/github/managing-security-vulnerabilities/about-dependabot-security-updates#about-compatibility-scores)\n\nDependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.\n\n[//]: # (dependabot-automerge-start)\n[//]: # (dependabot-automerge-end)\n\n---\n\n<details>\n<summary>Dependabot commands and options</summary>\n<br />\n\nYou can trigger Dependabot actions by commenting on this PR:\n- `@dependabot rebase` will rebase this PR\n- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it\n- `@dependabot merge` will merge this PR after your CI passes on it\n- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it\n- `@dependabot cancel merge` will cancel a previously requested merge and block automerging\n- `@dependabot reopen` will reopen this PR if it is closed\n- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually\n- `@dependabot ignore this major version` will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot ignore this minor version` will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot ignore this dependency` will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)\n\n\n</details>",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 12,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-06-12T17:49:48Z",
        "closed_at": "2023-06-13T05:56:36Z",
        "merged_at": "2023-06-13T05:56:36Z",
        "body": "Previously when deploying a resource in `determine_physical_resource_id` a fetch_state was executed and the result was then available in the resource props for later deletion.\r\n\r\nWith our rework of the physical resource ID, this will now not necessarily be the case anymore since the `PhysicalResourceId` is available immediately after the handler/boto call and therefore `determine_physical_resource_id` won't be called and the state missing from the props.\r\n\r\nThis sometimes now leads to issues when trying to delete resources because the attributes they depend on might not have been saved to the resource state if they haven't been added manually in the result handler to the resource properties.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 102,
        "deletions": 2,
        "changed_files": 4,
        "created_at": "2023-06-12T16:15:44Z",
        "closed_at": "2023-06-13T12:53:03Z",
        "merged_at": "2023-06-13T12:53:03Z",
        "body": "When a cloudformation stack fails to deploy, it's hard to know why. In a [previous PR](https://github.com/localstack/localstack/pull/8336) we added printing the events to the traceback, but we don't capture the reason why the stack failed. Also the output format was hard to read.\r\n\r\nNow the output is nicer, and the resource deploy events are nicer.\r\n\r\n### Before\r\n![image](https://github.com/localstack/localstack/assets/59756/d842817f-bf6d-4b28-9058-7eb8fb865f5e)\r\n\r\n### After\r\n![image](https://github.com/localstack/localstack/assets/59756/e4f5b451-5a31-4232-910a-41a2c9a4f077)\r\n\r\n\r\nNote: we don't assert parity right now, just that the failure reason is _present_. It's too much API surface to try to ensure parity on failure events.\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 94,
        "deletions": 42,
        "changed_files": 3,
        "created_at": "2023-06-12T15:28:13Z",
        "closed_at": "2023-06-15T16:42:04Z",
        "merged_at": "2023-06-15T16:42:04Z",
        "body": "This PR fix #8486, the issue is pretty thorough in explaining what the issue is.\r\n\r\nBasically, I forgot to add the logic I've implemented in `publish` for the `publish_batch`, that would already load the message into a dict if the message structure was `json`. This is now fixed and validated via 2 AWS validated and snapshot tests. \r\n\r\nI've also moved around some validations in order to be in line with AWS in how and what they validate in what order. ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 216,
        "deletions": 5,
        "changed_files": 5,
        "created_at": "2023-06-12T05:04:51Z",
        "closed_at": "2023-06-12T08:15:30Z",
        "merged_at": "2023-06-12T08:15:30Z",
        "body": "# \ud83d\ude80 ASF Update Report \ud83d\ude80\nThis PR has been automatically generated to update the generated API stubs for our ASF services.\nIt uses the latest code-generator from the _master_ branch ([scaffold.py](https://github.com/localstack/localstack/blob/master/localstack/aws/scaffold.py)) and the latest _published_ version of [botocore](https://github.com/boto/botocore) to re-generate all API stubs which are already present in the `localstack.aws.api` module of the _master_ branch.\n\n## \ud83d\udd04 Updated Services\nThis PR updates the following services:\n- cloudformation\n- ec2\n- kms\n- logs\n- sqs\n\n## \ud83d\udc77\ud83c\udffd Handle this PR\nThe following options describe how to interact with this PR / the auto-update:\n\n\u2714\ufe0f **Accept Changes**\nIf the changes are satisfying, just squash-merge the PR and delete the source branch.\n\n\ud83d\udeab **Ignore Changes**\nIf you want to ignore the changes in this PR, just close the PR and *do not delete* the source branch. The PR will not be opened and a new PR will not be created for as long as the generated code does not change (or the branch is deleted). As soon as there are new changes, a new PR will be created.\n\n\u270f\ufe0f **Adapt Changes**\n*Don't do this.* The APIs are auto-generated. If you decide that the APIs should look different, you have to change the code-generation.\n\n\u23f8\ufe0f **Pause Updates**\nRemove the cron-schedule trigger of the GitHub Action workflow which creates these PRs. The action can then still be triggered manually, but it will not be executed automatically.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 140,
        "deletions": 5,
        "changed_files": 3,
        "created_at": "2023-06-11T12:35:10Z",
        "closed_at": "2023-06-30T15:14:01Z",
        "merged_at": "2023-06-30T15:14:01Z",
        "body": "Fix #8478 \r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 5,
        "deletions": 3,
        "changed_files": 2,
        "created_at": "2023-06-10T20:11:24Z",
        "closed_at": "2023-06-13T08:37:23Z",
        "merged_at": "2023-06-13T08:37:23Z",
        "body": "Upgrade moto to of 4.1.11.post1",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 13,
        "deletions": 10,
        "changed_files": 3,
        "created_at": "2023-06-10T15:37:39Z",
        "closed_at": "2023-06-12T13:16:49Z",
        "merged_at": "2023-06-12T13:16:49Z",
        "body": "This PR contains a few minor changes required for a companion PR in -ext:\r\n\r\n* add boto client type definitions for new service `emr-serverless`\r\n* extend `map_all_s3_objects` to allow passing in a custom boto S3 resource via `s3_resource` (comes in handy for snapshot testing)\r\n* update `boto3-stubs` definitions in `setup.cfg`",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1028,
        "deletions": 32,
        "changed_files": 11,
        "created_at": "2023-06-10T01:04:07Z",
        "closed_at": "2023-07-07T10:08:52Z",
        "merged_at": "2023-07-07T10:08:52Z",
        "body": "This is a first draft to introduce file streaming in S3, and never load the request data fully in memory.\r\n\r\nThis cannot work without some changes to the `S3_DIR` patching, and minimal changes in moto-ext (PR here: https://github.com/localstack/moto/pull/67). \r\n\r\nPreliminary tests shows that the RAM usage is much lower when putting big objects and especially when completing multipart uploads. \r\n\r\nWe would have an S3 provider dedicated for streaming requests through heavy patching of moto internal. We also need to interweave moto logic within our provider operations, as we cannot pass a stream to moto where it would read the entire content in memory.\r\n\r\nA multithreading issue surfaced when issuing range requests via `download_fileobj`, the underlying client will spawn multiple threads requesting different parts of the object simultaneously, which messed up the access to the underlying stream via `seek`. I've introduced a locking mechanism with the `SynchronizedDefaultDict` using the underlying stream `id` as we don't always have access to the container `StreamedFakeKey` object in moto, however it means that it is now slower. Not sure what mechanism we could use here without duplicating the stream or reading the whole range in memory at once. \r\n\r\nThis PR would also provider a fix for #6659 and #6845 at the same time. ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 128,
        "deletions": 2,
        "changed_files": 3,
        "created_at": "2023-06-09T14:36:09Z",
        "closed_at": "2023-07-03T13:47:21Z",
        "merged_at": "2023-07-03T13:47:21Z",
        "body": "This fix the second issue reported in #8174\r\n\r\nMoto will by default clean up the key name (I'm not sure to what end? I think this should be removed because it can cause conflict between keys, one url encoded and the other not will have the same key in moto). \r\n\r\nSo I've added the key cleaning in our moto access, which at least allows us to use keys with `%XX` encoded in them.\r\n\r\nHowever, as moto cleans up name, what returns from `ListObject` and `ListObjectsV2` is still wrong and is url decoded. However, we cannot for sure know if the key was clean or not, so we can't fix it in our provider. This would need to be fixed upstream. ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 49,
        "deletions": 24,
        "changed_files": 1,
        "created_at": "2023-06-09T09:12:05Z",
        "closed_at": "2023-06-14T09:17:16Z",
        "merged_at": "2023-06-14T09:17:16Z",
        "body": "Make store lookups for Events rule jobs request context aware. This issue surfaced when restoring rule jobs from persistence/pods (companion PR following soon).\r\n\r\nAt its core, the PR replaces `aws_stack.connect_to_service(..)` calls with in-memory lookups, and adds `EventsStore` as a parameter for the `get_scheduled_rule_func`/`put_rule_job_scheduler` util methods, to ensure we're targeting the right account/region.\r\n\r\n/cc @giograno \r\n\r\nSummary of changes:\r\n* pass request context to `get_store(..)`, to extract account/region directly from the `context` object\r\n* add `EventsStore` as a parameter for the `get_scheduled_rule_func`/`put_rule_job_scheduler` util methods\r\n* add `get_event_bus_name(..)` util function that extracts the bus name from a name/ARN, or returns the `default` event bus as a fallback",
        "comments": 8
    },
    {
        "merged": false,
        "additions": 1682,
        "deletions": 1,
        "changed_files": 21,
        "created_at": "2023-06-08T13:43:52Z",
        "closed_at": "2023-06-22T17:43:49Z",
        "merged_at": null,
        "body": "WIP\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 319,
        "deletions": 521,
        "changed_files": 19,
        "created_at": "2023-06-08T13:03:05Z",
        "closed_at": "2023-06-08T14:12:08Z",
        "merged_at": "2023-06-08T14:12:07Z",
        "body": "## Motivation\r\nAWS released the ruby3.2 runtime yesterday: https://aws.amazon.com/blogs/compute/ruby-3-2-runtime-now-available-in-aws-lambda/\r\n\r\nAlso, nodejs12.x and dotnetcore3.1 are deprecated since end of April/beginning of may: https://docs.aws.amazon.com/lambda/latest/dg/lambda-runtimes.html#runtime-support-policy\r\n\r\nSince we cannot snapshot deprecated runtimes anymore, they need to be removed.\r\n\r\n## Changes\r\n* Add support for ruby3.2\r\n* Add ruby3.2 to runtime tests\r\n* Regenerate Function API snapshots\r\n* Update supported runtimes message\r\n* Remove nodejs12.x test execution\r\n* Remove dotnetcore3.1 test execution + test code\r\n* Remove some obsolete listing of images + hashes, as they are outdated anyway",
        "comments": 5
    },
    {
        "merged": true,
        "additions": 5,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2023-06-07T17:21:43Z",
        "closed_at": "2023-06-08T09:50:53Z",
        "merged_at": "2023-06-08T09:50:53Z",
        "body": "## Motivation\r\nCurrently, if additional flags like `LAMBDA_DOCKER_FLAGS` are provided at all, privileged is set to true for docker containers. This is not only dangerous, but also problematic in restricted docker environments, e.g. bitbucket.\r\n\r\nFixes #8460.\r\n\r\n## Changes\r\n* Fixes argparser always adding privileged=True. The cause of this was the argparser setting the privileged flag to true or false, never None, even if not provided. This is expected behavior for the \"store_true\" action.\r\n* Add test to check if privileged flags are indeed false for an empty string as argument string. This test extension would have caught the issue.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 192,
        "deletions": 9,
        "changed_files": 3,
        "created_at": "2023-06-07T16:55:06Z",
        "closed_at": "2023-06-10T13:36:04Z",
        "merged_at": "2023-06-10T13:36:04Z",
        "body": "This PR will fix #8415, and validate that #8441 has been fixed since 1.4. \r\n\r\nWe needed to retrieve the attribute from moto, because moto is hardcoding what attributes it returns, and is not dynamic. \r\nAdded bit of parity, but this is a small fix.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 792,
        "deletions": 0,
        "changed_files": 6,
        "created_at": "2023-06-07T16:38:03Z",
        "closed_at": "2023-06-09T21:41:01Z",
        "merged_at": "2023-06-09T21:41:01Z",
        "body": "Add scaffolding system for resource providers.\r\n\r\nThis will form the basis for how new resource providers are generated going forward. The scaffolding currently generates:\r\n\r\n* a resource provider skeleton file\r\n* a test for helping to understand which properties are valid `GetAtt` targets\r\n* a template for the test generated.",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 45,
        "deletions": 2,
        "changed_files": 4,
        "created_at": "2023-06-07T13:35:51Z",
        "closed_at": "2023-06-12T09:27:39Z",
        "merged_at": "2023-06-12T09:27:39Z",
        "body": "## Motivation\r\nIf the AssumeRolePolicyDocument is not valid json, we have problems later with IAM enforcement, as it breaks the interface contract of the STS IAM plugin.\r\n\r\n## Changes\r\n* Verify the AssumeRolePolicyDocument actually being valid json by trying to decode it\r\n* AWS validated test for this behavior",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 130,
        "deletions": 85,
        "changed_files": 7,
        "created_at": "2023-06-07T11:54:38Z",
        "closed_at": "2023-06-15T09:53:09Z",
        "merged_at": "2023-06-15T09:53:09Z",
        "body": "## Motivation\r\nTo provide IAM enforcement, we have to use the new clients, with the execution role assumed, for the event source mapping operations.\r\n\r\n## Changes\r\n* Use Adapters to get the right clients for the operation\r\n* Migrate to new client factory\r\n* Consolidate `wait_for_dynamodb_stream_ready` fixtures\r\n* Handle failure for get_records operation in the streams event source listener separately, to avoid crashing the whole thread",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-06-06T17:17:15Z",
        "closed_at": "2023-06-07T22:14:47Z",
        "merged_at": "2023-06-07T22:14:47Z",
        "body": "Addresses https://github.com/localstack/localstack/issues/7539\r\n\r\nThis PR re-introduces the `LAMBDA_DOCKER_DNS` configuration previously supported in the [old lambda provider](https://docs.localstack.cloud/references/configuration/#lambda-legacy).\r\nThis optional configuration sets a DNS server for the container running your lambda function. `LAMBDA_DOCKER_DNS` takes precedence over [transparent endpoint injection](https://docs.localstack.cloud/user-guide/tools/transparent-endpoint-injection/dns-server/) when using LocalStack Pro. A warning message informs pro users.\r\n\r\nDepends on ext companion PR to selectively disable transparent endpoint injection: https://github.com/localstack/localstack-ext/pull/1758\r\n\r\n# Testing\r\n\r\nThe following scenarios are tested:\r\n- [x] community with `LAMBDA_DOCKER_DNS`\r\n- [x] community without `LAMBDA_DOCKER_DNS`\r\n- [x] pro with `LAMBDA_DOCKER_DNS` (disables transparent endpoint injection)\r\n- [x] pro without `LAMBDA_DOCKER_DNS` (transparent endpoint injection still works)\r\n- [x] pro with `LAMBDA_DOCKER_DNS` set to the LocalStack gateway and `DNS_SERVER` set to the host gateway (i.e., what `host.docker.internal` resolves to; e.g., `192.168.65.254`) and a custom local DNS server running. This leads to the following DNS chain: Lambda code => Docker custom DNS `127.0.0.11` => LocalStack DNS => Upstream DNS\r\n\r\nTested against Docker (locally built) with a Python Lambda function that performs a DNS lookup and uses transparent endpoint injection:\r\n\r\n```python\r\nimport json\r\nimport os\r\n\r\nimport boto3\r\nfrom nslookup import Nslookup\r\n\r\n\r\ndef handler(event, context):\r\n    localstack_hostname = os.getenv('LOCALSTACK_HOSTNAME')\r\n    print(f\"{localstack_hostname=}\")\r\n\r\n    # Test custom DNS resolution\r\n    # domain = \"aws.amazon.com\"\r\n    # domain = \"amazonaws.com\"\r\n    # domain = \"s3.aws.amazon.com\"\r\n    domain = \"lambda.us-east-1.amazonaws.com\"\r\n    dns_query = Nslookup()\r\n    ips_record = dns_query.dns_lookup(domain)\r\n    print(f\"Lookup {domain=}\")\r\n    print(ips_record.response_full, ips_record.answer)\r\n\r\n    # Test transparent endpoint injection\r\n    client = boto3.client('lambda')\r\n    account_settings = client.get_account_settings()\r\n    print(account_settings)\r\n\r\n    return {\r\n        \"statusCode\": 200,\r\n        \"body\": json.dumps({\r\n            \"message\": f\"{localstack_hostname=}\",\r\n        }),\r\n    }\r\n```",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 1596,
        "deletions": 156,
        "changed_files": 11,
        "created_at": "2023-06-06T02:18:07Z",
        "closed_at": "2023-06-07T16:04:13Z",
        "merged_at": "2023-06-07T16:04:13Z",
        "body": "Changes made to avoid circular references in `Model` containing references to itself, which can happen easily.\r\n\r\nExample: A Person contains a `children` property, which is a collection of `Person`. After resolving the models, it will fail to be serialised to JSON because it contains circular references. Or a container which contains an object with a reference to its container. \r\n\r\nAWS solves this issue by storing the template with its absolute reference[[1]](https://json-schema.org/understanding-json-schema/structuring.html#retrieval-uri)[[2]](https://stackoverflow.com/questions/37823112/how-do-i-reference-one-model-from-another-model-using-aws-api-gateway). It might be stored fully resolved server-side, or might be resolved when actually validating the template. ~Still WIP, so I'll see how I do this, this is only the importer phase now, next step is to properly read those schema when validating.~\r\n\r\nThis PR also implements `RequestValidator` when importing ([see here](https://docs.aws.amazon.com/apigateway/latest/developerguide/api-gateway-swagger-extensions-request-validators.html)), and support for `requestBody` property in `Method` for OpenAPI 3.0 ([see here](https://swagger.io/specification/v3/#request-body-object))\r\n\r\n\r\n### Example:\r\n```json\r\n{\r\n  \"Person\": {\r\n    \"type\": \"object\",\r\n    \"description\": \"Random person schema.\",\r\n    \"properties\": {\r\n      \"randomProperty\": {\r\n        \"type\": \"string\",\r\n        \"description\": \"Random property\",\r\n        \"format\": \"byte\"\r\n      },\r\n      \"container\": {\r\n        \"$ref\": \"#/components/schemas/House\"\r\n      }\r\n    }\r\n  },\r\n  \"House\": {\r\n    \"type\": \"object\",\r\n    \"description\": \"Where Person can live\",\r\n    \"properties\": {\r\n      \"randomProperty\": {\r\n        \"type\": \"string\",\r\n        \"description\": \"Random property\",\r\n        \"format\": \"byte\"\r\n      },\r\n      \"contains\": {\r\n        \"type\": \"array\",\r\n        \"items\": {\r\n          \"$ref\": \"#/components/schemas/Person\"\r\n        },\r\n        \"minItems\": 1,\r\n        \"description\": \"The information of who is living in the house\"\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\nOnce resolved before, it would have lead to `House` having a reference to `Person` and `Person` having a reference to `House`. These 2 models could be part of a bigger model, thus being in the same dictionary and make it non-serializable.\r\n\r\nFrom this example, we want our Model to be able to be used to validate incoming requests. First, it will be resolved like AWS, with absolute paths. We will replace the relative `$ref` part with an absolute link to it, `$ref: \"http://apigateway.{localstackhost}/restapis/{apiId}/models/{ModelName}`. This allows us to safely JSON dump them, avoiding circular references.\r\n\r\nNow, the real issue comes when using those Model. We need to be able to resolve them.\r\nThe key is to use some tricks from JSON Schema, namely recursive[[3]](https://json-schema.org/understanding-json-schema/structuring.html#recursion) and `$defs` [[4]](https://json-schema.org/understanding-json-schema/structuring.html#defs). \r\nThis will allow use to get our Model schema, and all `$ref` inside will be resolved and put into a `$defs` field.\r\nWe will recursively resolve all models and put them into `$defs`, even transitive ones. If we spot a `$ref` to our Model, to avoid infinite looping, we will replace its `$ref` with `#`, signifying to JSON schema that it references its own model. \r\n\r\nThat's basically the gist of it. The PR validates that, changes a bit our schema Resolver, and adds a new `ModelResolver` before validating a request, and that resolved model would be cached in our store (also with the benefit of not `json.loads` every time). \r\n\r\n### What it gives:\r\nStarting with those 2 schemas:\r\n```json\r\n\"schemas\": {\r\n  \"Person\": {\r\n    \"type\": \"object\",\r\n    \"description\": \"Random person schema.\",\r\n    \"properties\": {\r\n      \"name\": {\r\n        \"type\": \"string\",\r\n        \"description\": \"Random property\"\r\n      },\r\n      \"b\": {\r\n        \"type\": \"number\"\r\n      },\r\n      \"house\": {\r\n        \"$ref\": \"#/components/schemas/House\"\r\n      }\r\n    },\r\n    \"required\": [\"name\", \"b\"]\r\n  },\r\n  \"House\": {\r\n    \"type\": \"object\",\r\n    \"description\": \"Where a Person can live\",\r\n    \"properties\": {\r\n      \"randomProperty\": {\r\n        \"type\": \"string\",\r\n        \"description\": \"Random property\",\r\n        \"format\": \"byte\"\r\n      },\r\n      \"contains\": {\r\n        \"type\": \"array\",\r\n        \"items\": {\r\n          \"$ref\": \"#/components/schemas/Person\"\r\n        },\r\n        \"minItems\": 1,\r\n        \"description\": \"The information of who is living in the house\"\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\nWe then resolve them and store them as `Model` with absolute paths (from the snapshot):\r\n```json\r\n[\r\n  {\r\n    \"contentType\": \"application/json\",\r\n    \"description\": \"Where a Person can live\",\r\n    \"id\": \"<model-id:2>\",\r\n    \"name\": \"House\",\r\n    \"schema\": {\r\n      \"type\": \"object\",\r\n      \"properties\": {\r\n        \"randomProperty\": {\r\n          \"type\": \"string\",\r\n          \"description\": \"Random property\",\r\n          \"format\": \"byte\"\r\n        },\r\n        \"contains\": {\r\n          \"minItems\": 1,\r\n          \"type\": \"array\",\r\n          \"description\": \"The information of who is living in the house\",\r\n          \"items\": {\r\n            \"$ref\": \"<model-base-url>/restapis/<rest-id:1>/models/Person\"\r\n          }\r\n        }\r\n      },\r\n      \"description\": \"Where a Person can live\"\r\n    }\r\n  },\r\n  {\r\n    \"contentType\": \"application/json\",\r\n    \"description\": \"Random person schema.\",\r\n    \"id\": \"<model-id:3>\",\r\n    \"name\": \"Person\",\r\n    \"schema\": {\r\n      \"required\": [\r\n        \"b\",\r\n        \"name\"\r\n      ],\r\n      \"type\": \"object\",\r\n      \"properties\": {\r\n        \"name\": {\r\n          \"type\": \"string\",\r\n          \"description\": \"Random property\"\r\n        },\r\n        \"b\": {\r\n          \"type\": \"number\"\r\n        },\r\n        \"house\": {\r\n          \"$ref\": \"<model-base-url>/restapis/<rest-id:1>/models/House\"\r\n        }\r\n      },\r\n      \"description\": \"Random person schema.\"\r\n    }\r\n  }\r\n]\r\n```\r\n\r\nAnd once we want to use them to validate our request, this is the `Person` schema, using `House` for one of its field:\r\nIt's a valid schema, as we can attest [here](https://www.jsonschemavalidator.net/s/xCgryAyF)\r\n```json\r\n{\r\n  \"type\": \"object\",\r\n  \"description\": \"Random person schema.\",\r\n  \"properties\": {\r\n    \"name\": {\r\n      \"type\": \"string\",\r\n      \"description\": \"Random property\"\r\n    },\r\n    \"b\": {\r\n      \"type\": \"number\"\r\n    },\r\n    \"house\": {\r\n      \"$ref\": \"#/$defs/House\"\r\n    }\r\n  },\r\n  \"required\": [\r\n    \"name\",\r\n    \"b\"\r\n  ],\r\n  \"$defs\": {\r\n    \"House\": {\r\n      \"type\": \"object\",\r\n      \"description\": \"Where a Person can live\",\r\n      \"properties\": {\r\n        \"randomProperty\": {\r\n          \"type\": \"string\",\r\n          \"description\": \"Random property\",\r\n          \"format\": \"byte\"\r\n        },\r\n        \"contains\": {\r\n          \"type\": \"array\",\r\n          \"items\": {\r\n            \"$ref\": \"#\"\r\n          },\r\n          \"minItems\": 1,\r\n          \"description\": \"The information of who is living in the house\"\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n### Notes\r\n- [[1] https://json-schema.org/understanding-json-schema/structuring.html#retrieval-uri)](https://json-schema.org/understanding-json-schema/structuring.html#retrieval-uri) \r\n- [[2] https://stackoverflow.com/questions/37823112/how-do-i-reference-one-model-from-another-model-using-aws-api-gateway](https://stackoverflow.com/questions/37823112/how-do-i-reference-one-model-from-another-model-using-aws-api-gateway)\r\n- [[3] https://json-schema.org/understanding-json-schema/structuring.html#recursion](https://json-schema.org/understanding-json-schema/structuring.html#recursion)\r\n- [[4] https://json-schema.org/understanding-json-schema/structuring.html#defs](https://json-schema.org/understanding-json-schema/structuring.html#defs)\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 418,
        "deletions": 14,
        "changed_files": 5,
        "created_at": "2023-06-05T23:01:31Z",
        "closed_at": "2023-06-07T01:28:36Z",
        "merged_at": "2023-06-07T01:28:36Z",
        "body": "This PR is building on #8437, we were not properly setting the `apiKeySource` of the REST API when importing the file.\r\n\r\nAlso, we were not making use of default authorizer defined as a top level property. \r\n\r\nI also fixed passing `x-amazon-apigateway-any-method` as an HTTP method, but properly replaced it by  \"ANY\" like AWS does. I think we could remove any `x-amazon-apigateway-any-method` in the invocation code now, as it has been properly replaced. \r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 405,
        "deletions": 277,
        "changed_files": 4,
        "created_at": "2023-06-05T16:07:07Z",
        "closed_at": "2023-06-06T19:13:56Z",
        "merged_at": "2023-06-06T19:13:56Z",
        "body": "This PR contains some cleanup and restructuring of the LocalStack CLI:\r\n- It adds short-codes for most of the options (f.e. `localstack -p pro start` to select the `pro` profile, `localstack -v` to show the version, `localstack -h` for help, `localstack config validate -f docker-compose-test.yml`,...).\r\n- It adds lots of help text. All commands now have a short help (shown on the group's help output) and a normal help (shown on the command's help output).\r\n- All the help text is now in docstrings (see https://click.palletsprojects.com/en/latest/documentation/#help-texts).\r\n- It does some restructuring (to keep utility functions close to the commands using them).\r\n- It adds proper type hints everywhere.",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 19,
        "deletions": 4,
        "changed_files": 1,
        "created_at": "2023-06-05T15:46:51Z",
        "closed_at": "2023-06-07T07:43:02Z",
        "merged_at": null,
        "body": "Fix for https://github.com/localstack/localstack/issues/8441",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 89,
        "deletions": 111,
        "changed_files": 11,
        "created_at": "2023-06-05T15:14:35Z",
        "closed_at": "2023-06-15T14:34:05Z",
        "merged_at": "2023-06-15T14:34:05Z",
        "body": "The CloudFormation `GenericBaseModel` classes allowed use of an arbitrary function to deploy the resource. The function signature was:\r\n\r\n```\r\ndef create(resource_id, resources, resource_type, func, stack_name):\r\n    ...\r\n```\r\n\r\nWhen deploying a single resource:\r\n* the list of resources is redundant\r\n* the resource type is already known\r\n* the `func` argument is not relevant\r\n\r\nThis PR changes the function signature to `def create(logical_resource_id: str, resource: dict, stack_name: str)` to only supply the relevant information.\r\n\r\nTo prevent `-ext` breakage, if attempting to call this function raises a type error (because the signature is still the old signature) then we fall back to using the old function signature.\r\n\r\n## Motivation\r\n\r\nA PR integrating the new style resource providers depends on this change, since I need to call `execute_resource_action` but don't have access to the complete list of resources in a new style provider. Updating `execute_resource_action` will happen once we've removed the fallback old behaviour from all code.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 56,
        "deletions": 4,
        "changed_files": 4,
        "created_at": "2023-06-05T15:12:31Z",
        "closed_at": "2023-06-06T10:41:58Z",
        "merged_at": "2023-06-06T10:41:58Z",
        "body": "## Motivation\r\nAs seen here: https://docs.aws.amazon.com/amazondynamodb/latest/APIReference/API_streams_GetShardIterator.html, the shard iterator for dynamodbstreams differs from the kinesis one in one important aspect, namely the prefix of the stream arn followed by `|<int>|` and then an iterator in a similar format like kinesis data streams.\r\n\r\n## Changes\r\n* Add tests specifically asserting on the sharditerator format\r\n* Fix shard iterator format\r\n\r\n## Future challenges\r\nIt is quite unclear to me, and I did not find any information on that, what the integer between the pipes `|<int>|` is supposed to represent. I got the values 1 and 2 back from AWS, not sure what they are exactly denoting. As long as this is unclear, and since it does not seem to make a difference for now, I hardcoded it to 1 with a comment for it.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-06-05T14:13:47Z",
        "closed_at": "2023-06-05T15:43:44Z",
        "merged_at": "2023-06-05T15:43:44Z",
        "body": "Update lambda init version to https://github.com/localstack/lambda-runtime-init/releases/tag/v0.1.18-pre\r\n\r\nThis will remove some confusing exception logging where raised exceptions during a function invocation were also logged in the same way that an init error was logged.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 252,
        "deletions": 69,
        "changed_files": 6,
        "created_at": "2023-06-05T10:06:29Z",
        "closed_at": "2023-06-06T17:59:35Z",
        "merged_at": "2023-06-06T17:59:35Z",
        "body": "When looking at an OpenAPI file, I've spotted an issue where we didn't validate what the `apiKeySource` was before validating the key (if the source is set to `AUTHORIZER`, as authorizers are only mocked in community, it would always fail before). \r\n\r\nI've migrated one integration test to be AWS validated, there still one left but it'll be migrated when we pushed the migration further for `UsagePlan` and `ApiKey`. \r\n\r\nAlso fixed a parity issue where we wouldn't validate if the key was enabled. ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 18,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-06-05T05:04:51Z",
        "closed_at": "2023-06-05T07:07:05Z",
        "merged_at": "2023-06-05T07:07:05Z",
        "body": "# \ud83d\ude80 ASF Update Report \ud83d\ude80\nThis PR has been automatically generated to update the generated API stubs for our ASF services.\nIt uses the latest code-generator from the _master_ branch ([scaffold.py](https://github.com/localstack/localstack/blob/master/localstack/aws/scaffold.py)) and the latest _published_ version of [botocore](https://github.com/boto/botocore) to re-generate all API stubs which are already present in the `localstack.aws.api` module of the _master_ branch.\n\n## \ud83d\udd04 Updated Services\nThis PR updates the following services:\n- config\n\n## \ud83d\udc77\ud83c\udffd Handle this PR\nThe following options describe how to interact with this PR / the auto-update:\n\n\u2714\ufe0f **Accept Changes**\nIf the changes are satisfying, just squash-merge the PR and delete the source branch.\n\n\ud83d\udeab **Ignore Changes**\nIf you want to ignore the changes in this PR, just close the PR and *do not delete* the source branch. The PR will not be opened and a new PR will not be created for as long as the generated code does not change (or the branch is deleted). As soon as there are new changes, a new PR will be created.\n\n\u270f\ufe0f **Adapt Changes**\n*Don't do this.* The APIs are auto-generated. If you decide that the APIs should look different, you have to change the code-generation.\n\n\u23f8\ufe0f **Pause Updates**\nRemove the cron-schedule trigger of the GitHub Action workflow which creates these PRs. The action can then still be triggered manually, but it will not be executed automatically.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 8,
        "deletions": 9,
        "changed_files": 4,
        "created_at": "2023-06-03T13:09:13Z",
        "closed_at": "2023-06-05T07:41:46Z",
        "merged_at": "2023-06-05T07:41:46Z",
        "body": "This package will be used by `mediaconvert` in the ext repo, and so we should share the package location.\n\nThis change moves the ffmpeg package to `localstack.packages` and updates the `transcribe` service accordingly.\n\n**Question**: the package is currently directly loaded by the service, but is exposed via the plugins system. Should we update the service to load ffmpeg as a plugin? No code runs at import time, and the plugin only defines two classes, so the runtime overhead of importing the module when `transcribe` is loaded is probably negligable, suggesting that it's fine as it is.\n",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 132,
        "deletions": 1,
        "changed_files": 4,
        "created_at": "2023-06-02T16:35:51Z",
        "closed_at": "2023-06-06T07:40:07Z",
        "merged_at": "2023-06-06T07:40:07Z",
        "body": "This PR adds support for bucket website configuration when creating a S3 bucket using cloudformation.\r\n\r\nMissing feature was revealed by an AWS sample.\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-06-02T14:19:22Z",
        "closed_at": "2023-06-30T14:25:25Z",
        "merged_at": "2023-06-30T14:25:25Z",
        "body": "this small PR updates the events client in utility message_publisher.py\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 3178,
        "deletions": 1811,
        "changed_files": 30,
        "created_at": "2023-06-02T14:17:35Z",
        "closed_at": "2023-07-06T10:55:22Z",
        "merged_at": "2023-07-06T10:55:22Z",
        "body": "Adds support for task heartbeats `HeartbeatSeconds` `HeartbeatSecondsPath`, relevant tests and fixes.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 24,
        "changed_files": 1,
        "created_at": "2023-06-02T10:51:35Z",
        "closed_at": "2023-07-05T10:50:24Z",
        "merged_at": "2023-07-05T10:50:24Z",
        "body": "This PR does some minor cleanup for SNS by removing redudant handler definitions and exception handling",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-06-02T09:33:11Z",
        "closed_at": "2023-06-02T10:35:54Z",
        "merged_at": "2023-06-02T10:35:54Z",
        "body": "It seems like we have issue with the integration tests against our pro extensions due to a conflict with packages being installed on the CI system before running the tests.\r\nThis seems to be related to the package repos on the GitHub runners (it does not happen on other, private runners).\r\nUnfortunately, apt is not automatically resolving the conflict by downgrading postgres to a matching version without explicitly stating it.\r\nI cancelled the circle pipeline runs, because this only touches the GitHub workflow.\r\nI'm happy for any feedback, this apt call caused quite a lot of issues in the past.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 186,
        "deletions": 5,
        "changed_files": 6,
        "created_at": "2023-06-02T08:41:36Z",
        "closed_at": "2023-06-05T20:04:17Z",
        "merged_at": "2023-06-05T20:04:17Z",
        "body": "Depends on #8371 \r\n\r\nImplementing the `BodyS3Location` property to `AWS::ApiGateway::RestApi` as requested by a customer.\r\n\r\nThis property allows Cloudformation to directly fetch the \"Body\" property from an S3 bucket.\r\n\r\nHowever, I am not sure how to do negative testing with Cloudformation, so for now any S3 exception is going to bubble up? \r\n\r\nSmall note: I've also removed a line from the API Gateway importer because it was erasing tags after updating a RestAPI, which is not the default mode anymore. \r\n\r\nResource:\r\nhttps://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/aws-properties-apigateway-restapi-s3location.html",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 27,
        "deletions": 3,
        "changed_files": 3,
        "created_at": "2023-06-01T21:43:25Z",
        "closed_at": "2023-06-06T19:31:25Z",
        "merged_at": "2023-06-06T19:31:25Z",
        "body": "This PR will fix one case of #8422, the first case is already fixed. \r\n\r\nWe would raise an exception when the `key[\"KeyMetadata\"][\"Enabled\"]` was `False`, but there is a specific exception when the `key[\"KeyMetadata\"][\"KeyState\"]` is `PendingDeletion`. We're now raising the proper exception, and it's AWS validated. \r\n\r\nThis fix needs `S3_SKIP_KMS_KEY_VALIDATION=0` to be effective.\r\n\r\n_fixes #8422_",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 38,
        "deletions": 20,
        "changed_files": 2,
        "created_at": "2023-06-01T18:34:57Z",
        "closed_at": "2023-08-28T20:46:57Z",
        "merged_at": "2023-08-28T20:46:57Z",
        "body": "This PR replace the usage of the wait_until method for boto3 waiters due to  the better behavior on stacks that take too much time to deploy.\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 226,
        "deletions": 41,
        "changed_files": 6,
        "created_at": "2023-06-01T17:39:44Z",
        "closed_at": "2023-06-02T15:01:48Z",
        "merged_at": "2023-06-02T15:01:48Z",
        "body": "We've had a report that cross account publishing didn't work as expected, especially with queues from another account.\r\n\r\nThis PR does not add any enforcement of cross account access, but now allow SNS to publish to a queue in another account.\r\nThe fix consists of properly passing `QueueOwnerAWSAccountId` using the account id present in the queue URL to the `get_queue_url` call. Also, `GetQueueUrl` now properly uses this account id to retrieve the proper store.\r\n~Also modified the SNS store attributes to be cross-account, as those are needed in the publisher, and an account can publish to another account's topic.~\r\nNow removed that part, and properly parsed the ARN of the topic in the necessary operation to properly use the account id from the arn to then pass the store to the publisher, and the tests are still passing \ud83c\udf89 \r\n\r\nI've added 2 cross account tests to validate the behaviour.\r\n\r\n\\cc @dfangl, thanks for your help with the client! \r\n\r\n~note: back to the draft, it's more complicated than cross account attributes~",
        "comments": 5
    },
    {
        "merged": true,
        "additions": 5,
        "deletions": 27,
        "changed_files": 2,
        "created_at": "2023-06-01T16:01:47Z",
        "closed_at": "2023-06-02T16:48:28Z",
        "merged_at": "2023-06-02T16:48:28Z",
        "body": "Uses the new `connect_to` construct instead of `aws_stack` to connect to SQS in the SQS Query API. I'd like to use this later to try out #7396  /cc @viren-nadkarni @dfangl \r\n\r\nI also removed a couple of tests that were covering deprecated behavior\r\n* `test_call_fifo_queue_url`\r\n* `test_request_via_url`",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 20,
        "deletions": 4,
        "changed_files": 1,
        "created_at": "2023-06-01T15:18:24Z",
        "closed_at": "2023-06-05T15:39:55Z",
        "merged_at": "2023-06-05T15:39:55Z",
        "body": "This PR extends the endpoint detection (i.e. detecting the IP address of LocalStack) in host mode (outside of docker) for other systems than Linux.\r\nThis is a draft PR, and I would love to get further input and feedback!\r\n/cc @dfangl @dominikschubert @joe4dev @simonrw ",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 80,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2023-06-01T12:06:41Z",
        "closed_at": "2023-06-05T14:44:21Z",
        "merged_at": "2023-06-05T14:44:21Z",
        "body": "This PR adds a new shell command to support the configuration of auto-completion for the LocalStack CLI.\r\nIt uses the Click-feature for Shell completion: https://click.palletsprojects.com/en/8.1.x/shell-completion/\r\n\r\nUnfortunately, the configuration is a bit cumbersome:\r\n> In order for completion to be used, the user needs to register a special function with their shell. The script is different for every shell, and Click will output it when called with _{PROG_NAME}_COMPLETE set to {shell}_source. {PROG_NAME} is the executable name in uppercase with dashes replaced by underscores. The built-in shells are bash, zsh, and fish.\r\n\r\nThis is where the new `completion` command comes in. It basically just simplifies printing the shell completion code for a given shell. This completion code can then - depending on the shell - be used to configure the shell completion.\r\nBy implementing a specific command, it's also easy to ship an extensive documentation explaining the feature (as you can see in the code).\r\n\r\nWhen starting to work on this, I used [click-contrib/click-completion](https://github.com/click-contrib/click-completion) for a first PoC. It would even have an install command and powershell support, but I decided against it because:\r\n- It would have added `Jinja2` as an install dependency.\r\n- It is not too well maintained, there hasn't been a proper release for quite some time (Click >= 8 is not supported in the latest release on PyPi).\r\n- It seem like the powershell support might be broken right now, and click allows to easily add new completions.",
        "comments": 4
    },
    {
        "merged": false,
        "additions": 34,
        "deletions": 1,
        "changed_files": 5,
        "created_at": "2023-06-01T08:42:17Z",
        "closed_at": "2023-08-25T16:06:15Z",
        "merged_at": null,
        "body": "This PR allows the user to configure a \"managed\" docker network.\n\nPutting containers on the same docker network means more straightforward configuration. The containers can make requests to each other using their container names. LocalStack currently adds configuration to allow the user to specify which docker network to add created containers to, for services such as Lambda or ECS. This requires:\n\n1. the user to be aware of docker networking, and\n2. for them to have set up a network in advance.\n\nInstead, let's make LocalStack the curator of this docker network. On startup, create a named network (if it doesn't exist) and add all containers to it for the user. This means:\n\n1. the user does not _have_ to know about docker networking, and\n2. they don't have to perform any setup.\n\nUsers using docker compose will see the example compose file in the repo and replicate the behaviour in their own compose files.\n\n## Implementation\n\nWe use the existing configuration variables to control the networks of created containers, and add new configuration to override their behaviour. When the CLI starts up, we create the network if it doesn't exist.\n\n## Questions\n\n* Should we delete the network after the container stops? Probably not, but this is untidy\n* Should we make this behaviour the default in the compose files? I.e. uncomment the `USE_MANAGED_DOCKER_NETWORK` lines?\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-06-01T07:02:15Z",
        "closed_at": "2023-06-01T09:22:05Z",
        "merged_at": "2023-06-01T09:22:05Z",
        "body": "Bring in S3 cross-account support https://github.com/getmoto/moto/pull/6333\r\n\r\ncc: @macnev2013 ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 40,
        "deletions": 7,
        "changed_files": 2,
        "created_at": "2023-05-31T16:38:19Z",
        "closed_at": "2023-06-02T08:48:08Z",
        "merged_at": "2023-06-02T08:48:08Z",
        "body": "This PR fixes a confusing error message when using the `localstack update` command to update the CLI (either with `all` or `localstack-cli`) when using our LocalStack CLI frozen binaries built with PyInstaller ([localstack/localstack-cli](https://github.com/localstack/localstack-cli)):\r\n```\r\n$ localstack update localstack-cli\r\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 Updating LocalStack CLI \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\u2826 Updating LocalStack CLI...Usage: localstack [OPTIONS] COMMAND [ARGS]...\r\nTry 'localstack --help' for help.\r\n\r\nError: No such option: -m\r\n\u2716 LocalStack CLI update failed\r\n```\r\nWith this PR we explicitly detect that we are running in a frozen environment, print a warning and exit with a non-zero exit code:\r\n```\r\n$ localstack update all\r\n\u2716 The LocalStack CLI can only update itself if installed via PIP. Please follow the instructions on https://docs.localstack.cloud/ to update your CLI.\r\n``` ",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 1853,
        "deletions": 2,
        "changed_files": 22,
        "created_at": "2023-05-31T16:03:28Z",
        "closed_at": "2023-10-09T14:07:06Z",
        "merged_at": null,
        "body": "A first minimal implementation of a CF resource provider for a Lambda function.\r\n\r\nThe initial example demonstrates a simple inline Python Lambda function.\r\n\r\n## Open\r\n\r\n- [ ] Extract code for `create_lambda_archive` misused from testutils\r\n- [ ] Implement all parameters and validations\r\n- [ ] see TODOs in code",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 41,
        "deletions": 10,
        "changed_files": 4,
        "created_at": "2023-05-31T13:22:57Z",
        "closed_at": "2023-06-01T14:20:40Z",
        "merged_at": "2023-06-01T14:20:40Z",
        "body": "This PR fixes a small issue in the CLI which we overlooked in #7329.\r\nThis linked PR fixes the CLI profile detection (by manually parsing the `profile` argument and setting the `CONFIG_PROFILE` environment variable). This works perfectly fine when using the `--profile=<profile-name>` notation, but there was a small issue when using the `--profile <profile-name>` notation.\r\nIt also adds another line to the banner which indicates the loaded profile (if a profile was loaded, otherwise the line is not shown):\r\n```\r\n$ .venv/bin/python -m localstack.cli.main --profile pro start \r\n\r\n     __                     _______ __             __\r\n    / /   ____  _________ _/ / ___// /_____ ______/ /__\r\n   / /   / __ \\/ ___/ __ `/ /\\__ \\/ __/ __ `/ ___/ //_/\r\n  / /___/ /_/ / /__/ /_/ / /___/ / /_/ /_/ / /__/ ,<\r\n /_____/\\____/\\___/\\__,_/_//____/\\__/\\__,_/\\___/_/|_|\r\n\r\n \ud83d\udcbb LocalStack CLI 2.1.1.dev\r\n \ud83d\udc64 Profile: pro\r\n```\r\n\r\nI am happy for any feedback!",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 127,
        "deletions": 46,
        "changed_files": 3,
        "created_at": "2023-05-31T12:27:08Z",
        "closed_at": "2023-06-02T08:48:57Z",
        "merged_at": "2023-06-02T08:48:57Z",
        "body": "This PR addresses https://github.com/localstack/localstack/issues/5758.\r\nIt fixes several issues concerning the protocol handling in the `PortMapping` class, which was introduced in #6314.\r\nPreviously, the existence checks when adding new mappings were not considering the protocol. The fixes in this PR now allow adding both, a UDP and TCP port mapping which has the same range. This in turn fixes an issue in the LocalStack Pro CLI where the DNS TCP port was added to the port mapping, but the UDP port was suppressed.\r\n\r\n/cc @whummer ",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 1681,
        "deletions": 1,
        "changed_files": 20,
        "created_at": "2023-05-31T10:34:21Z",
        "closed_at": "2023-06-22T07:26:37Z",
        "merged_at": null,
        "body": null,
        "comments": 1
    },
    {
        "merged": true,
        "additions": 8,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2023-05-31T08:40:24Z",
        "closed_at": "2023-05-31T09:59:31Z",
        "merged_at": "2023-05-31T09:59:31Z",
        "body": "Adds additional debugging information to identify issues leading to raised errors when creating a runtime environment for a lambda function.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 94,
        "deletions": 1,
        "changed_files": 3,
        "created_at": "2023-05-30T18:43:24Z",
        "closed_at": "2023-05-31T11:40:35Z",
        "merged_at": "2023-05-31T11:40:35Z",
        "body": "Fixes #8397. Looks like we mistakenly considered `ContentBasedDeduplication` to be an intrinsic property, but I added a couple of tests that show it can be updated and checked correctly when calling `CreateQueue` with different values of it.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 99,
        "deletions": 5,
        "changed_files": 5,
        "created_at": "2023-05-30T18:00:51Z",
        "closed_at": "2023-05-31T11:40:05Z",
        "merged_at": "2023-05-31T11:40:05Z",
        "body": "This issue has been reported in #8392, moto would raise an `InternalError` when trying to complete a multipart upload that wasn't initiated, because it was directly accessing the `multiparts` bucket dict field with the `upload_id` as the key, which would raise a `KeyError`. It had the same issue in `upload_part`, but this was correct in `abort_multipart_upload`.\r\n\r\nAdded AWS validated tests, and fixed it in the provider for a quick fix. Ultimately, this should be fixed upstream.\r\n\r\n_fixes #8392_\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 68,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2023-05-30T13:34:41Z",
        "closed_at": "2023-06-02T09:43:55Z",
        "merged_at": "2023-06-02T09:43:55Z",
        "body": "This PR adds tests for cross-account support to S3 for following operations:\r\n- GetObject\r\n- PutObject\r\n- ListObjects\r\n\r\nThe actual implementation was done in Moto in below linked PRs. This also introduces a shared namespace for buckets.\r\n\r\nDepends on:\r\n- https://github.com/getmoto/moto/pull/6333\r\n- https://github.com/localstack/localstack/pull/8410\r\n\r\ncc: @dfangl ",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 5,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2023-05-30T08:43:04Z",
        "closed_at": "2023-06-01T08:44:04Z",
        "merged_at": "2023-06-01T08:44:04Z",
        "body": "Capture additional contexts using pytest and coverage, allowing us to answer the question:\r\n\r\n**Which tests execute this line of code?**\r\n\r\n## Implementation\r\n\r\n`coverage.py` can record \"dynamic contexts\", which annotate coverage \"spans\" with metadata. One supported type of context is \"test context\", meaning that each coverage \"span\" gets annotated by the test name that ran it.\r\n\r\nUsing this, `python -m coverage html --show-contexts` adds annotations to the output HTML page indicating which tests executed which lines of code.\r\n\r\n![image](https://github.com/localstack/localstack/assets/59756/f5d8919a-193b-49f3-89fb-6a6f79997eb2)\r\n\r\nThis is unbelievably useful when trying to execute a specific function. If there's test coverage, then simply executing relevant tests runs the code of interest. I'm finding this powerful for investigating our CloudFormation implementation, since I can quickly go from the code block to test and corresponding CFn template, and set debug breakpoints.\r\n\r\n## Included changes\r\n\r\nAll that's required to enable this feature is update the `coverage.run` configuration block, and save the resulting `.coverage` SQLite database as a run artifact. Those who wish to view coverage information for themselves can go to a relevant pipeline run, view the \"report\" job and find `.coverage` in the list of artifacts [e.g.](https://app.circleci.com/pipelines/github/localstack/localstack/15109/workflows/d3435b1d-73ec-4282-9f9f-f8829573bd4c/jobs/112870/artifacts):\r\n\r\n![image](https://github.com/localstack/localstack/assets/59756/b381d9fe-6528-4121-90e0-44e0380b3bc5)\r\n\r\nAfter you've downloaded this file, run `python -m coverage html --data-file <coverage file> --show-contexts` and open `htmlcov/index.html`.\r\n\r\n\r\n## Performance \r\n\r\nWhen comparing the execution time of this PR and `master`, the [test step](https://app.circleci.com/pipelines/github/localstack/localstack/15109/workflows/d3435b1d-73ec-4282-9f9f-f8829573bd4c/jobs/112869) takes around 23 minutes compared to the [test step on master](https://app.circleci.com/pipelines/github/localstack/localstack/15106/workflows/795c0b03-b56a-4ab2-8955-c11d7ab0dd7e/jobs/112835) which takes 22 minutes and 49 seconds, meaning this execution adds no additional time overhead on the test duration.\r\n\r\nThe final artifact captured is 20 MiB which is worth the negligible space to store. ",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2023-05-30T00:03:19Z",
        "closed_at": "2023-05-31T07:33:04Z",
        "merged_at": "2023-05-31T07:33:04Z",
        "body": "Bumps python from `12af6fa` to `fd86924`.\n\n\n[![Dependabot compatibility score](https://dependabot-badges.githubapp.com/badges/compatibility_score?dependency-name=python&package-manager=docker&previous-version=3.10.11-slim-bullseye&new-version=3.10.11-slim-bullseye)](https://docs.github.com/en/github/managing-security-vulnerabilities/about-dependabot-security-updates#about-compatibility-scores)\n\nDependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.\n\n[//]: # (dependabot-automerge-start)\n[//]: # (dependabot-automerge-end)\n\n---\n\n<details>\n<summary>Dependabot commands and options</summary>\n<br />\n\nYou can trigger Dependabot actions by commenting on this PR:\n- `@dependabot rebase` will rebase this PR\n- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it\n- `@dependabot merge` will merge this PR after your CI passes on it\n- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it\n- `@dependabot cancel merge` will cancel a previously requested merge and block automerging\n- `@dependabot reopen` will reopen this PR if it is closed\n- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually\n- `@dependabot ignore this major version` will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot ignore this minor version` will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot ignore this dependency` will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)\n\n\n</details>",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 1688,
        "deletions": 2,
        "changed_files": 22,
        "created_at": "2023-05-29T23:39:35Z",
        "closed_at": "2023-06-25T15:13:59Z",
        "merged_at": null,
        "body": "Uses the new CFn framework to add the SQS Queue resource",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 38,
        "deletions": 11,
        "changed_files": 6,
        "created_at": "2023-05-29T14:00:57Z",
        "closed_at": "2023-05-29T16:17:57Z",
        "merged_at": "2023-05-29T16:17:57Z",
        "body": "Small change to fix extraction of `Arn` attribute in KMS Key CloudFormation resources.\r\n\r\nThe starting point for this change was an issue with the [`copilotlocal`](https://github.com/localstack/copilot-cli-local) CLI, which was raising seg faults:\r\n```\r\n$ copilotlocal app init\r\n...\r\n$ copilotlocal env init\r\n...\r\npanic: runtime error: invalid memory address or nil pointer dereference\r\n[signal SIGSEGV: segmentation violation code=0x2 addr=0x0 pc=0x102ebd0ec]\r\n\r\ngoroutine 1 [running]:\r\ngithub.com/aws/copilot-cli/internal/pkg/deploy/cloudformation/stack.ToAppRegionalResources(0x14000139438)\r\n\tgithub.com/aws/copilot-cli/internal/pkg/deploy/cloudformation/stack/app.go:237 +0xdc\r\n...\r\n```\r\n\r\nThe root cause for this that the stack outputs of the stack created by Copilot contains an output without `OutputValue` attribute (the value should be included in the output below):\r\n```\r\n$ awslocal cloudformation describe-stacks --stack-name ... \r\n...\r\n            \"Outputs\": [\r\n                {\r\n                    \"OutputKey\": \"KMSKeyARN\",\r\n                    \"Description\": \"KMS Key used by CodePipeline for encrypting artifacts.\",\r\n                    \"ExportName\": \"hosted-ArtifactKey\"\r\n                },\r\n...\r\n```\r\n\r\nThe PR extends one of the existing tests to include a `!GetAtt KMSKey.Arn` stack output, and also adds a snapshot test to verify we have the same behavior as AWS.\r\n\r\n---\r\n\r\nThe PR also contains a small fix in `create_stack_instances(..)`, passing the region name to `find_stack(..)`. Turns out this is required - otherwise the `copilotlocal` deployment raises the following error, when deploying the stack against a non-default region:\r\n```\r\nbotocore.exceptions.ClientError: An error occurred (ValidationError) when calling the CreateStack operation: Stack named \"sset-hosted-infrastructure-000000000000\" already exists with status \"CREATE_COMPLETE\"\r\n```",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 117,
        "deletions": 25,
        "changed_files": 5,
        "created_at": "2023-05-29T12:21:51Z",
        "closed_at": "2023-07-10T21:22:09Z",
        "merged_at": null,
        "body": "Rebased against latest master branch.\r\nFixes #7935\r\n\r\n",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 31,
        "deletions": 21,
        "changed_files": 1,
        "created_at": "2023-05-29T09:55:25Z",
        "closed_at": "2023-05-30T16:33:33Z",
        "merged_at": "2023-05-30T16:33:33Z",
        "body": "Minor extension to our IAM test fixtures, allow to pass in a boto3 client, to facilitate multi-region tests.\r\n\r\nThis requirement came up while working on a test in the upstream -ext repo, where resources should be targeting non-default regions.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 622,
        "deletions": 11,
        "changed_files": 15,
        "created_at": "2023-05-29T09:34:58Z",
        "closed_at": "2023-06-26T06:57:36Z",
        "merged_at": "2023-06-26T06:57:36Z",
        "body": "Adds support for failure events on `waitForTaskToken` callbacks, and relevant tests.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 28,
        "deletions": 12,
        "changed_files": 3,
        "created_at": "2023-05-28T13:36:41Z",
        "closed_at": "2023-05-30T22:24:53Z",
        "merged_at": "2023-05-30T22:24:53Z",
        "body": "This PR adds small enhancements to the bootstrap logic, to enable CLI startup (`localstack start`) from within Docker containers in different environments.\r\n\r\nThe starting point for this change is a Github Codespaces workspace that we're currently preparing for the AWS Builders Day workshop: https://github.com/localstack/localstack-workshop/blob/main/.devcontainer/devcontainer.json . The Codespaces environment is itself running in a Docker container (devcontainer), and with the current version of the CLI we're receiving this error:\r\n```\r\n$ localstack start\r\n ...\r\n  File \"/tmp/venv/lib/python3.10/site-packages/localstack/cli/localstack.py\", line 168, in cmd_start\r\n    bootstrap.start_infra_in_docker()\r\n  File \"/tmp/venv/lib/python3.10/site-packages/localstack/utils/bootstrap.py\", line 591, in start_infra_in_docker\r\n    container.truncate_log()\r\n  File \"/tmp/venv/lib/python3.10/site-packages/localstack/utils/bootstrap.py\", line 458, in truncate_log\r\n    with open(self.logfile, \"wb\") as fd:\r\nFileNotFoundError: [Errno 2] No such file or directory: '/var/lib/localstack/tmp/localstack_main_container.log'\r\n```\r\n\r\nNote that the bootstrap code is attempting to access `/var/lib/localstack`, which is the default directory for the LocalStack volume inside the container.\r\n\r\nOne of the key ingredients of the approach is to allow an override config `OVERRIDE_IN_DOCKER=0`, in addition to the already supported `OVERRIDE_IN_DOCKER=1`. It seems reasonable to not only allow overriding the Docker detection for false negatives, but also for false positives.  As far as I can see in the code (and our docs), this change should be backward-compatible (there is one reference in our [docs](https://docs.localstack.cloud/references/configuration/#miscellaneous) which needs to be updated).\r\n\r\n(As a general note: currently the host/container switch is coupled to the \"is in Docker\" checks (which makes sense, as it covers 99% of use cases!) - but at some point we could consider splitting up the two, and make the distinction a bit more explicit.)\r\n\r\nThe second change in the PR is around mounting of the LocalStack volume dir. When executing in Docker, it can happen that the volume directory inside the container cannot be mounted into a new container, as it may not be available to the Docker engine. The following example is when executing our `test_start_cli_within_container(..)` test using Docker Desktop on macOS without passing the custom volume dir override:\r\n```\r\n...\r\ndocker.errors.APIError: 500 Server Error for http+docker://localhost/v1.42/containers/90af042d297b9254ad5cdf957937e434ef65c884030ba07e3bc9c5e0c64a133c/start: Internal Server Error (\"b'Mounts denied: \\nThe path /root/.cache/localstack/volume is not shared from the host and is not known to Docker.\\nYou can configure shared paths from Docker -> Preferences... -> Resources -> File Sharing.\\nSee https://docs.docker.com/desktop/mac for more info.'\")\r\n```\r\n\r\nThe change proposed in the PR adds a fallback logic which looks for this error message, and then. This is covered by an integration test - parametrizing the existing `test_start_cli_within_container(..)` test to start up with and without the custom volume dir configuration (it should ideally work out of the box without having to specify `LOCALSTACK_VOLUME_DIR` manually).\r\n\r\n---\r\nSummary of changes:\r\n* add new `parse_boolean_env(..)` helper function to parse the value of boolean env variables (if specified)\r\n* update the logic around `OVERRIDE_IN_DOCKER` to allow both, overriding with falsy and truthy values\r\n* adjust the logic in `cli/localstack.py` to ensure `config.OVERRIDE_IN_DOCKER` and `config.is_in_docker` are both set to False, and then re-initialize the directories (somewhat similar to the `if host` logic switch further above in the same function)\r\n* add a fallback logic for `Mounts denied` errors, to gracefully handle situations where the local volume directory (could be either on the host, or inside a countainer) cannot be mounted by Docker into the LocalStack container\r\n\r\nWith these changes, the container properly starts up in a Codespaces environment, after installing the CLI and doing a `localstack start` out of the box. \r\n\r\n/cc @giograno ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 0,
        "deletions": 456,
        "changed_files": 3,
        "created_at": "2023-05-27T23:41:18Z",
        "closed_at": "2023-05-29T18:14:16Z",
        "merged_at": "2023-05-29T18:14:16Z",
        "body": "This PR removes the Thundra plugin. Since, sadly, Thundra has ceased all operations with May 12th, we can safely remove the lambda plugin as part of a minor release.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-05-27T23:30:06Z",
        "closed_at": "2023-05-29T18:06:44Z",
        "merged_at": "2023-05-29T18:06:44Z",
        "body": "This PR adds the `MAIN_DOCKER_NETWORK` config variable to the list of environment variables that are passed through the CLI to the container.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 577,
        "deletions": 4,
        "changed_files": 6,
        "created_at": "2023-05-26T18:07:41Z",
        "closed_at": "2023-07-06T05:44:59Z",
        "merged_at": "2023-07-06T05:44:59Z",
        "body": "This PR adds supports for certain SSM Models in Cloudformation and the corresponding API operations in the SSM provider:\r\n\r\nModels:\r\n- [x]  AWS::SSM::MaintenanceWindow\r\n- [x] AWS::SSM::PatchBaseline\r\n- [x] AWS::SSM::MaintenanceWindowTask\r\n- [x] AWS::SSM::MaintenanceWindowTarget\r\n\r\nOperations added to provider:\r\n- [x] Create and delete Patch Baseline\r\n- [x] Create and delete Maintenance window\r\n- [x] Create and delete Maintenance window task\r\n- [x] Create and delete Maintenance window target\r\n \r\nMoto requirements:\r\n\r\n- [x] Patch Baseline operations: getmoto/moto#6426\r\n- [x] Maintenance window Targets: getmoto/moto#6429\r\n- [x] Maintenance window Tasks: getmoto/moto#6430\r\n\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 4145,
        "deletions": 2374,
        "changed_files": 85,
        "created_at": "2023-05-26T15:10:07Z",
        "closed_at": "2023-06-25T11:04:06Z",
        "merged_at": "2023-06-25T11:04:06Z",
        "body": "Add support for Task `TimeoutSeconds` and `TimeoutSecondsPath` and relevant test cases.\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 331,
        "deletions": 2,
        "changed_files": 4,
        "created_at": "2023-05-26T14:47:02Z",
        "closed_at": "2023-05-30T06:17:45Z",
        "merged_at": "2023-05-30T06:17:45Z",
        "body": "This PR adds support for S3 intelligent tier configuration mocking.\r\n\r\n### Implemented APIs\r\n- get-bucket-intelligent-tiering-configuration\r\n- put-bucket-intelligent-tiering-configuration\r\n- delete-bucket-intelligent-tiering-configuration\r\n- list-bucket-intelligent-tiering-configurations\r\n\r\n### Parity Improvements with TF\r\n- TestAccS3BucketIntelligentTieringConfiguration_basic\r\n- TestAccS3BucketIntelligentTieringConfiguration_disappears\r\n- TestAccS3BucketIntelligentTieringConfiguration_Filter",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-05-26T03:07:37Z",
        "closed_at": "2023-10-18T11:00:30Z",
        "merged_at": "2023-10-18T11:00:30Z",
        "body": "Updates documentation to mention that awslocal is installed separately. I ran into a few seconds of searching to find it and it was mentioned as an [issue](https://github.com/localstack/localstack/issues/7966) previously.\r\n\r\nI didn't want to couple this repository to their installation process so I cross linked to their installation instructions.\r\n\r\nsemvar: none - no need to cut a release.\r\n\r\n**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 5707,
        "deletions": 776,
        "changed_files": 24,
        "created_at": "2023-05-25T22:39:15Z",
        "closed_at": "2023-06-05T18:33:27Z",
        "merged_at": "2023-06-05T18:33:27Z",
        "body": "improving APIGW import from OpenAPI file following recently surfaced issues with the serverless shopping cart sample\r\n\r\n- [x] created a new `test_apigateway_import.py` file and move the related existing tests there, as it was become quite consequent\r\n- [x] added one new import file created by the AWS sample (`swagger-mock-cors.json`)\r\n- [x] migrated `test_put_integration_responses` to be AWS validated\r\n- [x] fixed provider for `test_api_gateway_request_validator` (cleaning up `PutMethod`) \r\n- [x] fix `test_cfn_deploy_apigateway_integration`\r\n  - had to simplify the test, we were deploying a lambda authorizer but we would not link to the REST API nor test its deployment, so I simplified the template and duplicated it. \r\n  - had to change some things in Cloudformation about default parameters\r\n  - also, removed all snapshot skip verify from the tests \ud83c\udf89 \r\n- [x] fix provider for `test_put_method_model` & `test_update_method`, properly removing attributes after updating with JSON patch\r\n- [x] fix `test_apigateway_with_lambda_integration`, AWS validated + migrated to `test_apigateway_lambda.py` + small fixes to returned fields\r\n- [x] migrate and remove `test_import_rest_api`and `test_import_rest_apis` in `test_apigateway_basic.py`: those were not AWS validated\r\n  - [x] another test showed that the type of the authoriser in `Method` was not directly the authorizer's type but one of `NONE` for open access, `AWS_IAM` for using AWS IAM permissions, `CUSTOM` for using a custom authorizer, or `COGNITO_USER_POOLS`.\r\n  - [x] fix `basePath`: these tests were specifically set to test `base_path` mapping, and it seems one template had been changed but it was a mix of Swagger 2.0 and OpenAPI 3. Fixed the template and implemented the additional logic. (see https://docs.aws.amazon.com/apigateway/latest/developerguide/api-gateway-import-api-basePath.html).\r\n    - [x] After migrating the test to be AWS validated, it seems our handling of base path is not correct for `split`. I've fixed our handling of `basePath` to be in line with AWS, and also added support for OpenAPI 3.0. This test has been migrated and split into 2 distinct tests now, namely `test_import_rest_api_with_base_path_oas30` and `test_import_rest_apis_with_base_path_swagger`.\r\n\r\n\r\nIt was a lot of fixing default parameters, properly removing non-set parameters from responses, and fixing the import.\r\n\r\nThere was a massive scope creep from this PR, plus the refactoring of the test file. Sorry for that, every fix made to be in line with AWS made some non-validated tests fail, and without xfailing them, keeping the small fixes made along the way was the way to go.\r\n",
        "comments": 6
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2023-05-25T08:26:13Z",
        "closed_at": "2023-05-25T12:49:22Z",
        "merged_at": "2023-05-25T12:49:22Z",
        "body": "This PR contains a very small fix which allows using `set-dep-ver` in `bin/release-helper.sh` with `requirements.txt` files (instead of just `setup.cfg`). It just changes the regex such that the spaces at the beginning of the file are optional (`\\s*`) instead of \"at least once\" (`\\s+`).",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 5,
        "deletions": 4,
        "changed_files": 1,
        "created_at": "2023-05-24T22:53:13Z",
        "closed_at": "2023-05-25T17:45:57Z",
        "merged_at": "2023-05-25T17:45:57Z",
        "body": "This is a minor change for a test that has been flaking. The reason is that potentially not enough time has passed between the delay and receiving the messages. Since we changed the behavior of `receive_message` in combination with `MaxNumberOfMessages` and `WaitTimeSeconds` there's a chance that fewer messages than 3 will be returned, although we are asking for 3.\r\n\r\nSo now, we do a hard sleep with an extra second to give the messages enough time to arrive in the queue. since this is a FIFO queue, we should receive all three messages in the `receive_message` call if they are in the queue.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 36,
        "deletions": 2,
        "changed_files": 3,
        "created_at": "2023-05-24T08:24:08Z",
        "closed_at": "2023-05-24T11:37:25Z",
        "merged_at": "2023-05-24T11:37:25Z",
        "body": "This PR fixes the order of XML tags for `ListObjects` and `ListObjectsV2`.\r\n\r\nThis issue surfaced with #8359, where the Java SDK `TransferManager` would fail with a bucket name equal to `null`. After investigating, this utils is making use of the `ListObjects` API, and indeed, every object in `ObjectListing` `ObjectSummary` would have a bucket name equal to `null`, even though the response would properly return the `Name` field with the bucket name.\r\nAnd once again, the tag order was important, I think this time from the reflection class `ObjectListing`, the way they cast an XML response into a class makes the order important, as they must first parse the bucket name to properly set it to each object in `Contents`. \r\n\r\nIf these issues are getting more common, we might need to implement something in the serializer, while making use of the S3 documentation (like #8037) which has the proper expected order of XML tags, to _sigh_ sort the keys before serialising the XML. \r\n\r\nThis is the proper order of tags, from the documentation: https://docs.aws.amazon.com/AmazonS3/latest/API/API_ListObjects.html#API_ListObjects_Example_2\r\n\r\nThis also have been validating with a small Java test making use of `TransferManager`, and also checked with both `ListBuckets`.\r\n\r\n```java\r\n// need to create the S3 client, and set the `bucketName`, `key_prefix` and `dir_path`\r\nTransferManager xfer_mgr = TransferManagerBuilder.standard().withS3Client(s3).build();\r\n\r\ntry {\r\n\tMultipleFileDownload xfer = xfer_mgr.downloadDirectory(\r\n\t\t\tbucketName, key_prefix, new File(dir_path));\r\n\t// loop with Transfer.isDone()\r\n\t// XferMgrProgress.showTransferProgress(xfer);\r\n\t// or block with Transfer.waitForCompletion()\r\n\txfer.waitForCompletion();\r\n} catch (AmazonServiceException | InterruptedException e) {\r\n\tSystem.err.println(e.toString());\r\n\tSystem.exit(1);\r\n}\r\nxfer_mgr.shutdownNow();\r\n``` \r\n",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 119,
        "deletions": 27,
        "changed_files": 5,
        "created_at": "2023-05-23T20:33:37Z",
        "closed_at": "2023-05-29T12:22:21Z",
        "merged_at": null,
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\nExtension of the original PR #7936, includes the commit from the original author.\r\n",
        "comments": 5
    },
    {
        "merged": false,
        "additions": 67,
        "deletions": 1,
        "changed_files": 3,
        "created_at": "2023-05-23T18:20:41Z",
        "closed_at": "2023-06-27T13:34:36Z",
        "merged_at": null,
        "body": "This PR allows the template deployer ignore a resource dependency in a ref function if such resource has a conditional deployment and it evaluates to false.\r\n\r\nExplained in a different way. If a resource is not deployable due to a condition, and it is referenced ( in this case inside an if function) the ref evaluates to AWS::NoValue instead of preventing the resource to not be deployed.\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 96,
        "deletions": 3,
        "changed_files": 4,
        "created_at": "2023-05-23T14:24:00Z",
        "closed_at": "2023-05-24T12:28:56Z",
        "merged_at": "2023-05-24T12:28:56Z",
        "body": "## Motivation\r\n\r\nThis PR fixes the account resolution for operations to the SQS QueryAPI. Previously, we were not parsing authorization headers to allow account access outside the default `000000000000` account. This meant that, if you tried to perform an operation on, say, `http://localhost:4566/123456789012/my-queue`, then after proxying the call to the SQS Provider, `context.account_id` would return `000000000000` instead.\r\n\r\nMoreover, in the `delete_queue` implementation in the backend, we were not using the account/region from the parsed queue URL, but instead using that of the context. Technically cross-account delete is not allowed, so it would be fine, but it made sense to fix that and add a defensive piece of code to warn the user that they're potentially doing something that's not allowed.\r\n\r\nThe issue originally surfaced when a user tried to perform a `DeleteQueue` call using a queue in a different account than the default one.\r\n\r\n## Changes\r\n\r\n* Extract the credentials from the auth headers and set it as `aws_access_key_id` before proxying the call to the localstack backend\r\n* Fix the `delete_queue` method to use region and account from the queue URL, and log a warning if the users it trying cross-account access\r\n* Add the ability to add credentials to the HTTP client factory\r\n* Add a localstack-only test for multi-account queue delete",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-05-23T09:04:49Z",
        "closed_at": "2023-05-23T13:22:17Z",
        "merged_at": "2023-05-23T13:22:17Z",
        "body": null,
        "comments": 2
    },
    {
        "merged": true,
        "additions": 384,
        "deletions": 0,
        "changed_files": 4,
        "created_at": "2023-05-23T09:00:47Z",
        "closed_at": "2023-05-26T10:34:34Z",
        "merged_at": "2023-05-26T10:34:34Z",
        "body": "This PR adds support for S3 Analytics Configurations.\r\n\r\n### Bug\r\nThe API was not throwing `Not Implemented` error but the feature was not implemented.\r\n\r\n### Implemented APIs\r\n- get_bucket_analytics_configuration\r\n- put_bucket_analytics_configuration\r\n- list_bucket_analytics_configurations\r\n- delete_bucket_analytics_configuration\r\n\r\n### Parity Improvements with TF\r\n- TestAccS3BucketAnalyticsConfiguration_basic\r\n- TestAccS3BucketAnalyticsConfiguration_removed\r\n- TestAccS3BucketAnalyticsConfiguration_updateBasic\r\n- TestAccS3BucketAnalyticsConfiguration_WithFilter_empty\r\n- TestAccS3BucketAnalyticsConfiguration_WithStorageClassAnalysis_empty\r\n- TestAccS3BucketAnalyticsConfiguration_WithStorageClassAnalysis_default\r\n- TestAccS3BucketAnalyticsConfiguration_WithStorageClassAnalysis_full\r\n- TestAccS3BucketAnalyticsConfiguration_WithFilter_singleTag\r\n- TestAccS3BucketAnalyticsConfiguration_WithFilter_multipleTags\r\n- TestAccS3BucketAnalyticsConfiguration_WithFilter_prefixAndTags\r\n- TestAccS3BucketAnalyticsConfiguration_WithFilter_prefix\r\n- TestAccS3BucketAnalyticsConfiguration_WithFilter_remove\r\n\r\n### Notes\r\n- Related closed PR: https://github.com/localstack/localstack/pull/8346",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 7,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2023-05-23T07:51:05Z",
        "closed_at": "2023-05-24T09:19:14Z",
        "merged_at": "2023-05-24T09:19:14Z",
        "body": "Issue: `test_encrypt_via_aws_encryption_sdk` in localstack-ext repo invokes `aws_encryption_sdk` which internally updates encryption context param value by the method `_generate_signing_key_and_update_encryption_context` which is done after the actual encryption. Now, when we decrypt this cipher text, we have an additional reserved key-value pair of `encryption_context` by the name `aws-crypto-public-key` which was missing during encryption.\r\n\r\nThe PR removes the check of any such reserved key-value pair during decryption as no such value is passed for authentication in encryption.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 448,
        "deletions": 192,
        "changed_files": 8,
        "created_at": "2023-05-22T17:33:34Z",
        "closed_at": "2023-05-23T16:23:48Z",
        "merged_at": "2023-05-23T16:23:48Z",
        "body": "Enhance support for targeting Podman API with our Docker client. Running on Podman has been increasingly requested by some customers recently, and during testing we've identified some gaps and discrepancies between the Docker API and Podman API responses (see also previous PR #8333). \r\n\r\n## Design Notes\r\n\r\nThis PR aims to be a starting point to address Podman support more systematically, and also have it covered by tests (we can reuse our excellent Docker client test suite for that purpose). Some/most of the existing Docker client tests are already working against Podman, and a new test marker `@skip_for_podman` has been introduced to temporarily skip failing tests for now. The goal would be to make all test pass over time, and then remove the `@skip_for_podman` marker.\r\n\r\nThe initial idea was to create a derived `PodmanClient` and inherit the functionality from the Docker client, but it turns out that the two platforms are sufficiently similar to handle both targets in a single client implementation. The majority of compatibility switches (especially in the `CmdDockerClient` class) is to handle slightly different response payloads or error messages returned by the `docker` vs `podman` commands.\r\n\r\nThe PR introduces a new CI build workflow to run the Podman Docker client tests in a separate build, whenever any of the relevant files are changing.\r\n\r\n## Patch vs minor release\r\n\r\nCurrently the changes are targeting a simple patch release and are not behind a feature flag (arguably shouldn't be breaking, as so far we didn't officially support Podman, and our Docker test coverage is pretty decent). I'm open to discussion, though, whether we want to add the compatibility mode behind a feature flag for now. \ud83d\udc4d \r\n\r\n## Summary of changes\r\n\r\n* adjust the logic in the Docker CLI and SDK clients to support both, Docker and Podman API responses\r\n* add `strip_wellknown_repo_prefixes` utility to strip off well-known image repo names like `localhost/` or `docker.io/library/` which are added by the Podman API, but not by Docker\r\n* introduce a new CI build workflow to run the Podman Docker client tests in a separate build",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 57,
        "deletions": 15,
        "changed_files": 5,
        "created_at": "2023-05-22T14:52:51Z",
        "closed_at": "2023-05-23T13:46:19Z",
        "merged_at": "2023-05-23T13:46:19Z",
        "body": "The FindInMap intrinsic function should allow the users to select a mapping using a template parameter. And the Select function should allow to define the index as a string.\r\n\r\nChanges:\r\n\r\n- [x] Template deployer support those specific situations\r\n- [x] Tests modifications to validate the changes",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 346,
        "deletions": 1,
        "changed_files": 4,
        "created_at": "2023-05-22T13:45:42Z",
        "closed_at": "2023-05-23T09:04:37Z",
        "merged_at": null,
        "body": "This PR adds support for S3 Analytics Configurations.\r\n\r\n### Implemented APIs\r\n- get_bucket_analytics_configuration\r\n- put_bucket_analytics_configuration\r\n- list_bucket_analytics_configurations\r\n- delete_bucket_analytics_configuration\r\n\r\nThe API was not throwing `Not Implemented` error but the feature was not implemented.",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-05-22T13:31:03Z",
        "closed_at": "2023-05-25T12:09:12Z",
        "merged_at": "2023-05-25T12:09:12Z",
        "body": null,
        "comments": 0
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2023-05-22T07:08:07Z",
        "closed_at": "2023-05-22T16:56:36Z",
        "merged_at": "2023-05-22T16:56:36Z",
        "body": "This PR changes the Python base image type from `slim-buster` to `slim-bullseye`, effectively upgrading the Docker base image's operating system from Debian Buster to Debian Bullseye.\r\nThis is basically an updated version of https://github.com/localstack/localstack/pull/7876 (Thanks to @Mins).",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 12,
        "deletions": 5,
        "changed_files": 1,
        "created_at": "2023-05-22T05:05:07Z",
        "closed_at": "2023-05-22T07:40:08Z",
        "merged_at": "2023-05-22T07:40:08Z",
        "body": "# \ud83d\ude80 ASF Update Report \ud83d\ude80\nThis PR has been automatically generated to update the generated API stubs for our ASF services.\nIt uses the latest code-generator from the _master_ branch ([scaffold.py](https://github.com/localstack/localstack/blob/master/localstack/aws/scaffold.py)) and the latest _published_ version of [botocore](https://github.com/boto/botocore) to re-generate all API stubs which are already present in the `localstack.aws.api` module of the _master_ branch.\n\n## \ud83d\udd04 Updated Services\nThis PR updates the following services:\n- ec2\n\n## \ud83d\udc77\ud83c\udffd Handle this PR\nThe following options describe how to interact with this PR / the auto-update:\n\n\u2714\ufe0f **Accept Changes**\nIf the changes are satisfying, just squash-merge the PR and delete the source branch.\n\n\ud83d\udeab **Ignore Changes**\nIf you want to ignore the changes in this PR, just close the PR and *do not delete* the source branch. The PR will not be opened and a new PR will not be created for as long as the generated code does not change (or the branch is deleted). As soon as there are new changes, a new PR will be created.\n\n\u270f\ufe0f **Adapt Changes**\n*Don't do this.* The APIs are auto-generated. If you decide that the APIs should look different, you have to change the code-generation.\n\n\u23f8\ufe0f **Pause Updates**\nRemove the cron-schedule trigger of the GitHub Action workflow which creates these PRs. The action can then still be triggered manually, but it will not be executed automatically.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 121,
        "deletions": 219,
        "changed_files": 3,
        "created_at": "2023-05-19T10:07:16Z",
        "closed_at": "2023-05-30T07:18:32Z",
        "merged_at": "2023-05-30T07:18:31Z",
        "body": "This PR adds cross-account access support for SNS topics.\r\n\r\nThis is allowed for following operations:\r\n\r\n- GetTopicAttributes\r\n- SetTopicAttributes\r\n- AddPermission\r\n- RemovePermission\r\n- Publish\r\n- Subscribe\r\n- ListSubscriptionsByTopic\r\n- DeleteTopic\r\n\r\nDepends on [getmoto/moto#6330](https://github.com/getmoto/moto/pull/6330)",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 30,
        "deletions": 23,
        "changed_files": 2,
        "created_at": "2023-05-18T20:55:08Z",
        "closed_at": "2023-05-19T13:19:45Z",
        "merged_at": "2023-05-19T13:19:45Z",
        "body": "Add visit to the `dynamodbstreams` store in the DDB provider.\r\nIt should address #6321 (persistence test [here](https://github.com/localstack/localstack-ext/pull/1704)).\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 48,
        "deletions": 13,
        "changed_files": 2,
        "created_at": "2023-05-18T19:56:15Z",
        "closed_at": "2023-05-31T13:05:07Z",
        "merged_at": "2023-05-31T13:05:07Z",
        "body": "There is currently lots of exception handling in and around the template deployer within CloudFormation. This makes it more complex to understand what goes wrong with stack deployments.\n\nThis change adds a config variable to present exceptions either:\n* fully, raising the exception up, or\n* logging at `exception` level the message, exception and traceback, instead of logging at a lower level (often debug) with a possibly less-than-helpful error message.\n\nThis feature can be enabled with the `CFN_VERBOSE_ERRORS` configuration variable/environment variable.\n",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 68,
        "deletions": 9,
        "changed_files": 4,
        "created_at": "2023-05-18T11:36:44Z",
        "closed_at": "2023-05-18T20:36:26Z",
        "merged_at": "2023-05-18T20:36:26Z",
        "body": "Fix extraction of container Image when using podman. We have some customers who are using podman (with Docker not being available), and one of the issues that has surfaced is that the `list_containers(..)` Docker SDK call fails when using podman.\r\n\r\n<img width=\"1397\" alt=\"image\" src=\"https://github.com/localstack/localstack/assets/2807888/e8d10ba9-2f94-471a-a1ec-ff719b74f0e1\">\r\n\r\nThe root cause is that certain versions of podman use a slightly different API response format for listing containers: https://github.com/containers/podman/issues/8329 . In particular, the `Image` attribute of containers is `\"sha256:...\"` for Docker, but it contains the actual image name/tag like `\"myimage:mytag-123\"` for podman.\r\n\r\nA simple integration test is added which simulates the podman API response via a monkey patch. Without the fix in the PR, this test would fail, and the patch in `docker_sdk_client.py` makes the test pass (and should fix the customer issue, too).\r\n\r\nWe can consider contributing this fix to the upstream repo, too - but for now the goal is to get a fix out quickly to our users.\r\n\r\nThe PR also removes a few unused strings in `constants.py`. \ud83e\uddf9 ",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 162,
        "deletions": 16,
        "changed_files": 6,
        "created_at": "2023-05-18T10:13:52Z",
        "closed_at": "2023-05-22T13:35:28Z",
        "merged_at": "2023-05-22T13:35:28Z",
        "body": "Add a fix for the state fetching of `WaitConditionHandle`, and add a _stub_ implementation for `WaitCondition`s.\n\nThis stub means that anything referencing the wait condition will resolve correctly, but the template deployer won't actually wait until the condition is met. Since we are doing a re-write of CFn anyway, we should factor it into that project.\n\nThis PR also includes a bigfix for EC2 instances: the boto3 `run_instances` method requires `MaxCount` and `MinCount` to be passed, but these are not valid CloudFormation properties.\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 19,
        "deletions": 1,
        "changed_files": 3,
        "created_at": "2023-05-17T19:03:24Z",
        "closed_at": "2023-05-18T12:54:57Z",
        "merged_at": "2023-05-18T12:54:57Z",
        "body": "This PR fixes #8325 \r\nThis bug seemed really weird, as our response was exactly the same as AWS, format was the same.\r\n\r\nHowever, after trying to debug the issue in Java, it seemed the `Owner` field was properly parsed by the SDK. \r\n\r\nAfter looking at the code of the SDK, it seemed the order of the XML tag was important for the way they populate each bucket with the owner. Basically, if the Owner tag is second, they first populate every bucket with an empty owner, even though the owner was properly parsed at the end. (I'll put the Java code snippet from the SDK at the end of the PR).\r\n\r\nWe keep the order from the specs when we serialize the response: we use and iterate over the shapes members.\r\nIn the specs, `Buckets` is first and `Owner` is second. The trick is to remove `Buckets` from the specs and add it back, to put it as the last member. Dirty, but it works. \r\n\r\nI could test the fix in the `localstack-java-utils` repo, by adding a test case in `S3FeaturesTest`. \r\n\r\n```java\r\n@Test\r\npublic void testGetBucketOwner() {\r\n\tAmazonS3 s3 = TestUtils.getClientS3();\r\n\r\n\tString bucketName = UUID.randomUUID().toString();\r\n\tBucket bucket = s3.createBucket(bucketName);\r\n\r\n\tList<Bucket> buckets = s3.listBuckets();\r\n\tSystem.out.println(\"buckets \" + buckets);\r\n\r\n}\r\n```\r\n\r\nI've also added an integration test that is AWS validated to keep the order.\r\n\r\nSDK snippet:\r\n```java\r\nprotected void doStartElement(String uri, String name, String qName, Attributes attrs) {\r\n    if (this.in(new String[]{\"ListAllMyBucketsResult\"})) {\r\n        if (name.equals(\"Owner\")) {\r\n            this.bucketsOwner = new Owner();\r\n        }\r\n    } else if (this.in(new String[]{\"ListAllMyBucketsResult\", \"Buckets\"}) && name.equals(\"Bucket\")) {\r\n        this.currentBucket = new Bucket();\r\n        this.currentBucket.setOwner(this.bucketsOwner);\r\n    }\r\n\r\n}\r\n\r\nprotected void doEndElement(String uri, String name, String qName) {\r\n    if (this.in(new String[]{\"ListAllMyBucketsResult\", \"Owner\"})) {\r\n        if (name.equals(\"ID\")) {\r\n            this.bucketsOwner.setId(this.getText());\r\n        } else if (name.equals(\"DisplayName\")) {\r\n            this.bucketsOwner.setDisplayName(this.getText());\r\n        }\r\n    } else if (this.in(new String[]{\"ListAllMyBucketsResult\", \"Buckets\"})) {\r\n        if (name.equals(\"Bucket\")) {\r\n            this.buckets.add(this.currentBucket);\r\n            this.currentBucket = null;\r\n        }\r\n    } else if (this.in(new String[]{\"ListAllMyBucketsResult\", \"Buckets\", \"Bucket\"})) {\r\n        if (name.equals(\"Name\")) {\r\n            this.currentBucket.setName(this.getText());\r\n        } else if (name.equals(\"CreationDate\")) {\r\n            Date creationDate = DateUtils.parseISO8601Date(this.getText());\r\n            this.currentBucket.setCreationDate(creationDate);\r\n        }\r\n    }\r\n\r\n}\r\n```",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 82,
        "deletions": 5,
        "changed_files": 6,
        "created_at": "2023-05-17T15:22:19Z",
        "closed_at": "2023-05-17T19:45:06Z",
        "merged_at": "2023-05-17T19:45:06Z",
        "body": "This PR implements a resource required by a support request.\r\n\r\nWe don't support wait conditions in CloudFormation, but the resource was required by the deploy process or else the stack didn't deploy.\r\n\r\nIn addition, we change the resource used by `test_unsupported` to _another_ resource that's not supported by CloudFormation, and we rename the test/file to more directly indicate its use.\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-05-17T12:10:20Z",
        "closed_at": "2023-05-19T09:06:38Z",
        "merged_at": "2023-05-19T09:06:38Z",
        "body": "Lot of work has been done on S3 `CopyObject` upstream, which is validated by 2 PRs adding tests:\r\n- #8291\r\n- #8216\r\n(Those PR are already targeting this branch, and the CI is green, so confident the fixes are good \ud83d\udc4d)\r\n\r\nAnother S3 PR will build on work that has been on checksum calculation to remove some parts from our provider.\r\n\r\n-ext run: https://github.com/localstack/localstack-ext/actions/runs/5022174661\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 4682,
        "deletions": 63,
        "changed_files": 25,
        "created_at": "2023-05-17T06:16:10Z",
        "closed_at": "2023-07-31T19:53:52Z",
        "merged_at": "2023-07-31T19:53:52Z",
        "body": "\\* extends https://github.com/localstack/localstack/pull/8742\r\n\r\n- Adds support for state task services using  `DyanamoDB` and tests\r\n- Mild improvements to inheritance relations between `StateTaskService` and `StateTaskServiceCallback` service tasks, to reduce duplication and ease implementation of future service state classes supporting no callback logic\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 504,
        "deletions": 330,
        "changed_files": 14,
        "created_at": "2023-05-16T08:44:04Z",
        "closed_at": "2023-06-06T12:58:01Z",
        "merged_at": "2023-06-06T12:58:01Z",
        "body": "# Changes\r\n- Parameters are resolved only once when executing CREATE/UPDATE tasks. While the corresponding logic lives in `parameters.py` now, the responsibility is moved further up to the API provider to make this as transparent as possible.\r\n- Unifies parameter resolving (previously this was done in multiple places such as in Stack methods, template_processing, transformations, template deployer)\r\n- Update handling is now more robust and simpler.\r\n\r\n# What hasn't changed\r\n\r\n- Does not affect how parameters are used when resolving values/refs in the TemplateDeployer/Stack, i.e. they are still merged with resources and mappings/conditions in `Stack.resources` for now. This will be split up in a future PR.\r\n- No new parameter types have been added\r\n\r\n\r\nAlso note I didn't add further tests yet since I didn't want to bloat this too much. I've started on more parity focused tests but I want to give them a bit more polish and build a proper parameter test suite out of it first.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 5,
        "deletions": 1,
        "changed_files": 3,
        "created_at": "2023-05-16T06:50:58Z",
        "closed_at": "2023-05-17T11:35:30Z",
        "merged_at": "2023-05-17T11:35:30Z",
        "body": "A recent community contribution was aiming at removing the upper version pin on `botocore` (https://github.com/localstack/localstack/pull/8210, thanks @matt-mercer!). Unfortunately, the latest release at the time contained an invalid spec which was reported in https://github.com/boto/botocore/issues/2925.\r\n\r\nThe latest release of `botocore` now contains the requested fixes to the kafka service specs: https://github.com/boto/botocore/commit/8bd1a4d486f28e3dc08991e181e06122f9b0d2bd\r\nThis is why we can finally _remove the pin_ again.\r\n\r\nIn the future we might introduce an automate approach (using dependabot or similar bots) to explicitly upgrade these core libraries on a fixed schedule (to move more towards a proactive approach instead of the currently rather reactive approach when new releases of these libraries - like werkzeug or botocore - break our builds).\r\nWith #8307 we also moved `botocore` and `boto3` from the install dependencies to the runtime extra (aka from a CLI dependency to a runtime dependency, which allows us to be more restrictive with the pins since the CLI dependencies have a wider impact compared to the runtime dependencies which are usually only used within our Docker images).",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 460,
        "deletions": 3,
        "changed_files": 14,
        "created_at": "2023-05-15T16:22:32Z",
        "closed_at": "2023-06-07T17:06:31Z",
        "merged_at": "2023-06-07T17:06:31Z",
        "body": "This PR adds a fixture which performs the following:\n\n1. Sets up an IAM role (with blanket permissions) for use with CloudFormation.\n2. Yield to the test so that CloudFormation uses this role to deploy a stack.\n3. Trigger a step function which waits 5 minutes\n4. During step function execution, capture CloudTrail events emitted using the specified role, and save them to S3.\n\nWe use our existing fixtures to ensure proper teardown.\nAn example test has been created at `tests/integration/cloudformation/test_cloudtrail_trace.py`.\n\nIn addition, the `deploy_cfn_template` fixture has been updated to accept a `role_arn` argument.\n\nThe CDK stack to create the infrastructure resources can be found under `localstack/testing/pytest/cloudtrail_tracking`.\n\n**Documentation for this feature will be available under a new [\"Writing a Resource Provider\" page in notion](https://www.notion.so/localstack/Writing-a-Resource-Provider-d83bbd2d17ec4bff90d193f232a4e945).**\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 38,
        "deletions": 19,
        "changed_files": 2,
        "created_at": "2023-05-15T10:48:29Z",
        "closed_at": "2023-05-15T18:03:03Z",
        "merged_at": "2023-05-15T18:03:03Z",
        "body": "Fixes a regression introduced in recent CFn refactorings. \r\n\r\nPRO overwrites get_resource_type to add support for custom resources, but we didn't use this in get_ref and other call sites, causing this to fail -ext tests.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2023-05-15T05:59:22Z",
        "closed_at": "2023-05-22T06:16:39Z",
        "merged_at": "2023-05-22T06:16:39Z",
        "body": "Follow up on https://github.com/localstack/localstack/pull/8302\r\n\r\nFixes `Sign`, `Encrypt` and `Verify` responses so that the `KeyId` field contains the key ARN.\r\n\r\nhttps://docs.aws.amazon.com/kms/latest/APIReference/API_Encrypt.html#API_Encrypt_ResponseElements\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 100,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2023-05-15T05:05:30Z",
        "closed_at": "2023-05-15T07:14:25Z",
        "merged_at": "2023-05-15T07:14:25Z",
        "body": "# \ud83d\ude80 ASF Update Report \ud83d\ude80\nThis PR has been automatically generated to update the generated API stubs for our ASF services.\nIt uses the latest code-generator from the _master_ branch ([scaffold.py](https://github.com/localstack/localstack/blob/master/localstack/aws/scaffold.py)) and the latest _published_ version of [botocore](https://github.com/boto/botocore) to re-generate all API stubs which are already present in the `localstack.aws.api` module of the _master_ branch.\n\n## \ud83d\udd04 Updated Services\nThis PR updates the following services:\n- support\n- swf\n\n## \ud83d\udc77\ud83c\udffd Handle this PR\nThe following options describe how to interact with this PR / the auto-update:\n\n\u2714\ufe0f **Accept Changes**\nIf the changes are satisfying, just squash-merge the PR and delete the source branch.\n\n\ud83d\udeab **Ignore Changes**\nIf you want to ignore the changes in this PR, just close the PR and *do not delete* the source branch. The PR will not be opened and a new PR will not be created for as long as the generated code does not change (or the branch is deleted). As soon as there are new changes, a new PR will be created.\n\n\u270f\ufe0f **Adapt Changes**\n*Don't do this.* The APIs are auto-generated. If you decide that the APIs should look different, you have to change the code-generation.\n\n\u23f8\ufe0f **Pause Updates**\nRemove the cron-schedule trigger of the GitHub Action workflow which creates these PRs. The action can then still be triggered manually, but it will not be executed automatically.",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 40,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2023-05-13T19:41:46Z",
        "closed_at": "2023-07-12T10:14:52Z",
        "merged_at": null,
        "body": "Add fixture to allow the definition of a CFn stack via CDK.\r\n\r\n*Previous work (that I had forgotten existed): #6333* :facepalm: \r\n\r\n## Motivation\r\n\r\nWe as LocalStack developers have effectively re-built CloudFormation and CDK with our own fixtures. Instead, let's define our test setup with resources that are designed exactly for this purpose.\r\n\r\n## Example\r\n\r\n```python\r\nfrom localstack.aws.connect import ServiceLevelClientFactory\r\nfrom aws_cdk import aws_sns as sns\r\nfrom aws_cdk import aws_sqs as sqs\r\nfrom aws_cdk import aws_sns_subscriptions as subscriptions\r\n\r\n\r\ndef test_plugin(define_infrastructure, aws_client: ServiceLevelClientFactory):\r\n    with define_infrastructure() as cdk:\r\n        topic = sns.Topic(cdk, \"MyTopic\")\r\n        queue = sqs.Queue(cdk, \"MyQueue\")\r\n        topic.add_subscription(subscriptions.SqsSubscription(queue))\r\n\r\n    assert len(aws_client.cloudformation.list_stacks()[\"StackSummaries\"]) == 1\r\n    assert len(aws_client.sns.list_topics()[\"Topics\"]) == 1\r\n    assert len(aws_client.sqs.list_queues()[\"QueueUrls\"]) == 1\r\n```\r\n\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 23,
        "deletions": 9,
        "changed_files": 2,
        "created_at": "2023-05-12T17:38:20Z",
        "closed_at": "2023-05-19T08:58:07Z",
        "merged_at": "2023-05-19T08:58:07Z",
        "body": "localstack currently fails to publish messages if there is a filter policy against a message attribute that contains 'true', 'false' or 'null',\r\n\r\nAs documented, a String.Array attribute [can contain](https://docs.aws.amazon.com/sns/latest/dg/sns-message-attributes.html#SNSMessageAttributes.DataTypes) strings, numbers, or the keywords 'true', 'false' or 'null'. Message attributes are also required to be [valid JSON strings](https://docs.aws.amazon.com/sns/latest/dg/sns-message-attributes.html) for use in filtering.\r\n\r\nParse String.Array values with `json.loads` instead of `ast.literal_eval` to solve these issues.\r\n\r\nResolves #8304\r\n",
        "comments": 4
    },
    {
        "merged": false,
        "additions": 1476,
        "deletions": 1,
        "changed_files": 17,
        "created_at": "2023-05-12T16:39:44Z",
        "closed_at": "2023-06-13T15:11:15Z",
        "merged_at": null,
        "body": "CFn resource provider scaffolding\r\n\r\nVery WIP\r\n\r\nObsoleted by:\r\n* #8457\r\n* #8495 \r\n",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 562,
        "deletions": 249,
        "changed_files": 30,
        "created_at": "2023-05-12T14:33:04Z",
        "closed_at": "2023-05-13T18:49:23Z",
        "merged_at": null,
        "body": "Test of rebasing removal of physical resource id onto other refactoring branch: https://github.com/localstack/localstack/pull/8252\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 181,
        "deletions": 109,
        "changed_files": 3,
        "created_at": "2023-05-12T10:14:42Z",
        "closed_at": "2023-05-25T18:56:48Z",
        "merged_at": "2023-05-25T18:56:48Z",
        "body": "For `ClientRequestToken` in the following operations (CreateSecret, UpdateSecret, RotateSecret, PutSecretValue), there's a specific note in the documentation:\r\nhttps://docs.aws.amazon.com/cli/latest/reference/secretsmanager/create-secret.html#options\r\n\r\n> If you use the AWS CLI or one of the AWS SDKs to call this operation, then you can leave this parameter empty. The CLI or SDK generates a random UUID for you and includes it as the value for this parameter in the request. If you don't use the SDK and instead generate a raw HTTP request to the Secrets Manager service endpoint, then you must generate a ClientRequestToken yourself for the new version and include the value in the request.\r\n\r\nAs we tested with boto, we never tried to run a request without it against AWS (just mocked locally with `request`). It is now done with the use of the `aws_http_client_factory`, and I could validate the behaviour against AWS.\r\n\r\nThis PR also fixes and rewrites tests that had a bad assumption of having the `ClientRequestToken` being created server side like moto does, but as the AWS validated test shows, AWS actually reject any request not having this field. I wonder if those tests have actual value, as they are not AWS tested and I think most of them were testing the wrong behaviour.\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 110,
        "deletions": 149,
        "changed_files": 8,
        "created_at": "2023-05-12T09:46:19Z",
        "closed_at": "2023-05-16T06:23:38Z",
        "merged_at": "2023-05-16T06:23:38Z",
        "body": "This PR contains the following changes:\r\n- It moves the dependency on `localstack_client` (and its transitive dependency `boto3` from `install` to the `runtime` extra).\r\n  - It also cleans up the dependencies a bit (moving `apispec` to `runtime`, removes an unnecessary version pin on `amazon_kclpy`).\r\n  - This effectively reduces the CLI dependencies (because the install dependencies currently are the CLI dependencies).\r\n- It replaces the legacy `service:port` mapping from the `localstack-client` with an dynamically detected list of services based on the loaded plugins.\r\n  - This means that the `localstack-client` does not have to be changed and released when introducing a new service emulator in LocalStack.\r\n  - The ports from the `localstack-client` would only be used with the environment variable `USE_LEGACY_PORTS`, but these wouldn't work with the new \"one endpoint for everything\" anyways.\r\n  - In the long run, we should try to deprecate the rest of `localstack-client` as well (or maybe completely strip it down to the part patching `boto3`), however, this is out of scope for this PR. It's rather a first step towards that direction.\r\n- Updates the list of \"official localstack images\" to the new images defined in v2 (this is used by the validation command in the CLI).\r\n\r\nI am happy for any feedback!",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 109,
        "deletions": 21,
        "changed_files": 6,
        "created_at": "2023-05-12T09:12:25Z",
        "closed_at": "2023-05-16T07:28:58Z",
        "merged_at": "2023-05-16T07:28:58Z",
        "body": "- Fix the return value of `Encrypt` operation \r\n- Add `EncryptionContext` as an additional authentication data during encryption and decryption \r\n- Add encryption tags \r\n- Change mode of encryption from `CBC` to `GCM`, since the previous encryption method lacked built-in authentication and tags. \r\n- Add snapshot tests for encrypt and decrypt operations ",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 786,
        "deletions": 151,
        "changed_files": 14,
        "created_at": "2023-05-11T13:41:42Z",
        "closed_at": "2023-06-21T11:36:52Z",
        "merged_at": "2023-06-21T11:36:52Z",
        "body": "\\* this extends https://github.com/localstack/localstack/pull/8292\r\n\r\n- adds support for state task lambda supported parameters\r\n- improved decoupling of state `task lambda` and `state task states lambda`\r\n- improvements to the dependency graphs of state tasks\r\n- support through abstraction of supported parameters and parameters normalisation\r\n- relevant lambda test",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 135,
        "deletions": 53,
        "changed_files": 3,
        "created_at": "2023-05-11T12:45:34Z",
        "closed_at": "2023-05-11T16:37:41Z",
        "merged_at": "2023-05-11T16:37:41Z",
        "body": "## Motivation\r\n#8253 introduced a regression for some methods the key arn in the `KeyId` field instead of the ID.\r\n\r\nThe API documentation for (at least one) of the operation clearly states it will return the ARN in that field: https://docs.aws.amazon.com/kms/latest/APIReference/API_GenerateDataKey.html#API_GenerateDataKey_ResponseSyntax\r\n\r\n## Changes\r\n* Add snapshot validated tests for the generate_data_key* methods\r\n* Fix the return value\r\n\r\nThis is mainly done because the `aws_encryption_sdk` depends on the format being an ARN, which breaks our -ext pipeline.\r\n\r\n## Future work\r\n* Check more return values of `KeyId` to be the correct ones @viren-nadkarni ",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 33,
        "deletions": 25,
        "changed_files": 2,
        "created_at": "2023-05-11T11:40:55Z",
        "closed_at": "2023-05-15T12:44:04Z",
        "merged_at": "2023-05-15T12:44:04Z",
        "body": "This PR improves the performance of commonly used operations by eliminating a `ListTables` call to DDB Local.\r\n\r\nEarlier, LocalStack would use this call to look up whether the table existed in DDB Local during the replication region resolution. It was originally added to suppress error messages produced by DDB Local.\r\n\r\nThis PR also changes to log level of all DDB Local logs to DEBUG.\r\n\r\nError message printed by DDB Local when operating on non-existent table:\r\n```\r\n2023-05-11T17:07:05.987 DEBUG --- [-functhread9] l.services.dynamodb.server : 17:07:05.974 [qtp1511574902-17] WARN  com.amazonaws.services.dynamodbv2.local.server.LocalDynamoDBServerHandler - DynamoDBLocalServiceException exception occured\r\n2023-05-11T17:07:05.987 DEBUG --- [-functhread9] l.services.dynamodb.server : com.amazonaws.services.dynamodbv2.exceptions.DynamoDBLocalServiceException: Cannot do operations on a non-existent table\r\n2023-05-11T17:07:05.988 DEBUG --- [-functhread9] l.services.dynamodb.server : at com.amazonaws.services.dynamodbv2.exceptions.AWSExceptionFactory.buildLocalServiceException(AWSExceptionFactory.java:93) ~[DynamoDBLocal.jar:?]\r\n2023-05-11T17:07:05.988 DEBUG --- [-functhread9] l.services.dynamodb.server : at com.amazonaws.services.dynamodbv2.exceptions.AWSExceptionFactory.buildAWSException(AWSExceptionFactory.java:58) ~[DynamoDBLocal.jar:?]\r\n2023-05-11T17:07:05.988 DEBUG --- [-functhread9] l.services.dynamodb.server : at com.amazonaws.services.dynamodbv2.local.shared.access.api.DynamoDbApiFunction.validateTableExists(DynamoDbApiFunction.java:67) ~[DynamoDBLocal.jar:?]\r\n2023-05-11T17:07:05.988 DEBUG --- [-functhread9] l.services.dynamodb.server : at com.amazonaws.services.dynamodbv2.local.shared.access.api.dp.PutItemFunction.apply(PutItemFunction.java:41) ~[DynamoDBLocal.jar:?]\r\n2023-05-11T17:07:05.988 DEBUG --- [-functhread9] l.services.dynamodb.server : at com.amazonaws.services.dynamodbv2.local.shared.access.awssdkv1.client.LocalAmazonDynamoDB.putItem(LocalAmazonDynamoDB.java:289) ~[DynamoDBLocal.jar:?]\r\n2023-05-11T17:07:05.988 DEBUG --- [-functhread9] l.services.dynamodb.server : at com.amazonaws.services.dynamodbv2.local.server.LocalDynamoDBRequestHandler.putItem(LocalDynamoDBRequestHandler.java:359) ~[DynamoDBLocal.jar:?]\r\n2023-05-11T17:07:05.988 DEBUG --- [-functhread9] l.services.dynamodb.server : at com.amazonaws.services.dynamodbv2.local.dispatchers.PutItemDispatcher.enact(PutItemDispatcher.java:18) ~[DynamoDBLocal.jar:?]\r\n2023-05-11T17:07:05.988 DEBUG --- [-functhread9] l.services.dynamodb.server : at com.amazonaws.services.dynamodbv2.local.dispatchers.PutItemDispatcher.enact(PutItemDispatcher.java:12) ~[DynamoDBLocal.jar:?]\r\n2023-05-11T17:07:05.988 DEBUG --- [-functhread9] l.services.dynamodb.server : at com.amazonaws.services.dynamodbv2.local.server.LocalDynamoDBServerHandler.packageDynamoDBResponse(LocalDynamoDBServerHandler.java:406) ~[DynamoDBLocal.jar:?]\r\n2023-05-11T17:07:05.988 DEBUG --- [-functhread9] l.services.dynamodb.server : at com.amazonaws.services.dynamodbv2.local.server.LocalDynamoDBServerHandler.handle(LocalDynamoDBServerHandler.java:495) ~[DynamoDBLocal.jar:?]\r\n2023-05-11T17:07:05.988 DEBUG --- [-functhread9] l.services.dynamodb.server : at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:127) ~[jetty-server-9.4.48.v20220622.jar:9.4.48.v20220622]\r\n2023-05-11T17:07:05.988 DEBUG --- [-functhread9] l.services.dynamodb.server : at org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:235) ~[jetty-server-9.4.48.v20220622.jar:9.4.48.v20220622]\r\n2023-05-11T17:07:05.988 DEBUG --- [-functhread9] l.services.dynamodb.server : at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1440) ~[jetty-server-9.4.48.v20220622.jar:9.4.48.v20220622]\r\n2023-05-11T17:07:05.988 DEBUG --- [-functhread9] l.services.dynamodb.server : at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:190) ~[jetty-server-9.4.48.v20220622.jar:9.4.48.v20220622]\r\n2023-05-11T17:07:05.988 DEBUG --- [-functhread9] l.services.dynamodb.server : at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1355) ~[jetty-server-9.4.48.v20220622.jar:9.4.48.v20220622]\r\n2023-05-11T17:07:05.988 DEBUG --- [-functhread9] l.services.dynamodb.server : at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141) ~[jetty-server-9.4.48.v20220622.jar:9.4.48.v20220622]\r\n2023-05-11T17:07:05.988 DEBUG --- [-functhread9] l.services.dynamodb.server : at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:191) ~[jetty-server-9.4.48.v20220622.jar:9.4.48.v20220622]\r\n2023-05-11T17:07:05.988 DEBUG --- [-functhread9] l.services.dynamodb.server : at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:127) ~[jetty-server-9.4.48.v20220622.jar:9.4.48.v20220622]\r\n2023-05-11T17:07:05.988 DEBUG --- [-functhread9] l.services.dynamodb.server : at org.eclipse.jetty.server.Server.handle(Server.java:516) ~[jetty-server-9.4.48.v20220622.jar:9.4.48.v20220622]\r\n2023-05-11T17:07:05.988 DEBUG --- [-functhread9] l.services.dynamodb.server : at org.eclipse.jetty.server.HttpChannel.lambda$handle$1(HttpChannel.java:487) ~[jetty-server-9.4.48.v20220622.jar:9.4.48.v20220622]\r\n2023-05-11T17:07:05.989 DEBUG --- [-functhread9] l.services.dynamodb.server : at org.eclipse.jetty.server.HttpChannel.dispatch(HttpChannel.java:732) ~[jetty-server-9.4.48.v20220622.jar:9.4.48.v20220622]\r\n2023-05-11T17:07:05.989 DEBUG --- [-functhread9] l.services.dynamodb.server : at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:479) ~[jetty-server-9.4.48.v20220622.jar:9.4.48.v20220622]\r\n2023-05-11T17:07:05.989 DEBUG --- [-functhread9] l.services.dynamodb.server : at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:277) ~[jetty-server-9.4.48.v20220622.jar:9.4.48.v20220622]\r\n2023-05-11T17:07:05.989 DEBUG --- [-functhread9] l.services.dynamodb.server : at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:311) ~[jetty-io-9.4.48.v20220622.jar:9.4.48.v20220622]\r\n2023-05-11T17:07:05.989 DEBUG --- [-functhread9] l.services.dynamodb.server : at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:105) ~[jetty-io-9.4.48.v20220622.jar:9.4.48.v20220622]\r\n2023-05-11T17:07:05.989 DEBUG --- [-functhread9] l.services.dynamodb.server : at org.eclipse.jetty.io.ChannelEndPoint$1.run(ChannelEndPoint.java:104) ~[jetty-io-9.4.48.v20220622.jar:9.4.48.v20220622]\r\n2023-05-11T17:07:05.989 DEBUG --- [-functhread9] l.services.dynamodb.server : at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.runTask(EatWhatYouKill.java:338) ~[jetty-util-9.4.48.v20220622.jar:9.4.48.v20220622]\r\n2023-05-11T17:07:05.989 DEBUG --- [-functhread9] l.services.dynamodb.server : at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.doProduce(EatWhatYouKill.java:315) ~[jetty-util-9.4.48.v20220622.jar:9.4.48.v20220622]\r\n2023-05-11T17:07:05.989 DEBUG --- [-functhread9] l.services.dynamodb.server : at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.tryProduce(EatWhatYouKill.java:173) ~[jetty-util-9.4.48.v20220622.jar:9.4.48.v20220622]\r\n2023-05-11T17:07:05.989 DEBUG --- [-functhread9] l.services.dynamodb.server : at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.run(EatWhatYouKill.java:131) ~[jetty-util-9.4.48.v20220622.jar:9.4.48.v20220622]\r\n2023-05-11T17:07:05.989 DEBUG --- [-functhread9] l.services.dynamodb.server : at org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run(ReservedThreadExecutor.java:409) ~[jetty-util-9.4.48.v20220622.jar:9.4.48.v20220622]\r\n2023-05-11T17:07:05.989 DEBUG --- [-functhread9] l.services.dynamodb.server : at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:883) ~[jetty-util-9.4.48.v20220622.jar:9.4.48.v20220622]\r\n2023-05-11T17:07:05.989 DEBUG --- [-functhread9] l.services.dynamodb.server : at org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run(QueuedThreadPool.java:1034) ~[jetty-util-9.4.48.v20220622.jar:9.4.48.v20220622]\r\n2023-05-11T17:07:05.989 DEBUG --- [-functhread9] l.services.dynamodb.server : at java.lang.Thread.run(Thread.java:833) ~[?:?]\r\n2023-05-11T17:07:05.995  INFO --- [   asgi_gw_1] localstack.request.aws     : AWS dynamodb.PutItem => 400 (ResourceNotFoundException)\r\n```\r\n\r\n\r\nPerformance before:\r\n```\r\nIn [12]: %timeit dynamodb.put_item(TableName=\"tab\",Item={\"id\": {\"S\": \"Fred\"},})\r\n51.4 ms \u00b1 2.52 ms per loop (mean \u00b1 std. dev. of 7 runs, 10 loops each)\r\n\r\nIn [13]: %timeit dynamodb.put_item(TableName=\"tab\",Item={\"id\": {\"S\": \"Fred\"},})\r\n47 ms \u00b1 4.2 ms per loop (mean \u00b1 std. dev. of 7 runs, 10 loops each)\r\n```\r\n\r\nPerformance after:\r\n```\r\nIn [8]: %timeit dynamodb.put_item(TableName=\"tab\",Item={\"id\": {\"S\": \"Fred\"},})\r\n28.8 ms \u00b1 3.04 ms per loop (mean \u00b1 std. dev. of 7 runs, 10 loops each)\r\n\r\nIn [9]: %timeit dynamodb.put_item(TableName=\"tab\",Item={\"id\": {\"S\": \"Fred\"},})\r\n26.9 ms \u00b1 3.43 ms per loop (mean \u00b1 std. dev. of 7 runs, 10 loops each)\r\n```\r\n\r\ncc: @thrau ",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-05-11T07:58:35Z",
        "closed_at": "2023-05-11T14:05:41Z",
        "merged_at": "2023-05-11T14:05:41Z",
        "body": "Fix loading of CloudFormation deploy UI HTML code, accessible under localhost:4566/_localstack/cloudformation/deploy . Currently we're getting this error with the Pro image:\r\n\r\n```\r\n...\r\nlocalstack_main  |   File \"/opt/code/localstack/.venv/lib/python3.10/site-packages/localstack/services/internal.py\", line 145, in on_get\r\nlocalstack_main  |     deploy_html = deploy_html.replace(f\"<{key}>\", value)\r\nlocalstack_main  | AttributeError: 'NoneType' object has no attribute 'replace'\r\nlocalstack_main  | 2023-05-11T07:29:37.101 DEBUG --- [   asgi_gw_0] l.aws.handlers.fallback    : setting internal failure response for 'NoneType' object has no attribute 'replace'\r\n```\r\n\r\nThe issue was that the `index.html` file is not added to the `localstack-core` pip package, and the new layout of the `localstack/localstack-pro` image loads the dependencies into the `.venv` only:\r\n```\r\n$ docker run --entrypoint= --rm localstack/localstack-pro ls -la\r\ntotal 16\r\ndrwxrwxrwx 1 root root 4096 May  8 18:50 .\r\ndrwxr-xr-x 1 root root 4096 May  8 18:47 ..\r\ndrwxr-xr-x 1 root root 4096 May  8 18:50 .venv\r\n-rw-r--r-- 1 root root 3222 May  8 18:50 requirements-runtime.txt\r\n```\r\n\r\nIn contrast, the `localstack/localstack` image has the source code added in CWD directly:\r\n```\r\n$ docker run --entrypoint= --rm localstack/localstack ls\r\nMakefile\r\nbin\r\nlocalstack\r\nlocalstack_core.egg-info\r\npyproject.toml\r\nsetup.cfg\r\nsetup.py\r\n```\r\n\r\nThis PR embeds the HTML code in a Python source file directly instead of the `.html` file, which automatically adds it to the pip package.\r\n\r\n/cc @alexrashed @MarcelStranak ",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 5,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2023-05-10T19:25:53Z",
        "closed_at": "2023-05-12T13:40:34Z",
        "merged_at": "2023-05-12T13:40:34Z",
        "body": "This PR updates the Kinesis client for the EventBridge service\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1474,
        "deletions": 873,
        "changed_files": 37,
        "created_at": "2023-05-10T14:03:37Z",
        "closed_at": "2023-06-16T12:55:08Z",
        "merged_at": "2023-06-16T12:55:07Z",
        "body": "This PR adds support for `waitForTaskToken` task resource types:\r\n- introduces `Callbacks` elements that enable the `sfn` backend to notify awaiting jobs\r\n- adds `StateTaskServiceCallback` to implicitly support `waitForTaskToken` operations for supported services\r\n- adds `test_callback` to test for the baseline `waitForTaskToken` in aws' documentation\r\n- adds `sqs_send_task_success_state_machine` fixture which automatically starts a `sfn` machine which asserts `waitForTaskToken` requests (for testing purposes)\r\n- refactors and cleanups dependencies of state tasks abstractions\r\n- adds support for boto arguments normalisation when these are performed by `sfn` (see `aws-sdk` resolver)\r\n- fixes to `sqs` task resolver to implicitly stringify `MessageBody` inputs (supported by `sfn`)\r\n- adds support for `null` `OutputPath` values\r\n- updates `antlr4` to `4.12.0` from `4.11.1`",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 176,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2023-05-10T13:38:00Z",
        "closed_at": "2023-05-22T12:33:24Z",
        "merged_at": "2023-05-22T12:33:24Z",
        "body": "This PR adds test to check the behaviour and the fix of https://github.com/getmoto/moto/pull/6295\r\n\r\nThis PR builds on #8326 \r\n\r\nThis will confirm the fix for #8183\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 22,
        "deletions": 5,
        "changed_files": 2,
        "created_at": "2023-05-09T21:01:40Z",
        "closed_at": "2023-05-10T10:41:01Z",
        "merged_at": "2023-05-10T10:41:01Z",
        "body": "## Motivation\r\n\r\nIf a stack fails to deploy, it currently shows a helpful \"assertion failed: False\" error message. This does not explain _why_ the stack failed to deploy.\r\n\r\n## Changes\r\n\r\nThis PR adds the following information to an exception thrown by the fixture:\r\n* the output of `describe_stacks` on the stack, and\r\n* the stack events as this often shows the actual source of the error.\r\n\r\n\r\n### Before\r\n\r\n```\r\nE       AssertionError: assert False\r\nE        +  where False = wait_until(<function is_change_set_finished.<locals>._is_change_set_finished.<locals>._inner at 0x7f789e8d1750>, _max_wait=(None or 60))\r\nE        +    where <function is_change_set_finished.<locals>._is_change_set_finished.<locals>._inner at 0x7f789e8d1750> = <function is_change_set_finished.<locals>._is_change_set_finished at 0x7f78b2ed1000>('arn:aws:cloudformation:us-east-1:000000000000:changeSet/change-set-06b2e514/47987e23')\r\n```\r\n\r\n### After\r\n\r\n```\r\n>           raise StackDeployError(describe_stack_res, events)\r\nE           localstack.testing.pytest.fixtures.StackDeployError: Stack deploy failed - describe output: {'StackId': 'arn:aws:cloudformation:us-east-1:000000000000:stack/stack-0022f874/2a2b5e0b', 'StackName': 'stack-0022f874', 'ChangeSetId': 'arn:aws:cloudformation:us-east-1:000000000000:changeSet/change-set-5c97fde1/a6d1a8c8', 'Description': 'Test stack', 'CreationTime': datetime.datetime(2023, 5, 10, 9, 13, 15, 915000, tzinfo=tzutc()), 'LastUpdatedTime': datetime.datetime(2023, 5, 10, 9, 13, 15, 915000, tzinfo=tzutc()), 'RollbackConfiguration': {}, 'StackStatus': 'CREATE_FAILED', 'StackStatusReason': 'Deployment failed', 'DisableRollback': False, 'NotificationARNs': [], 'Capabilities': ['CAPABILITY_AUTO_EXPAND', 'CAPABILITY_IAM', 'CAPABILITY_NAMED_IAM'], 'Tags': [], 'EnableTerminationProtection': False, 'DriftInformation': {'StackDriftStatus': 'NOT_CHECKED'}} events: [{'StackId': 'arn:aws:cloudformation:us-east-1:000000000000:stack/stack-0022f874/2a2b5e0b', 'EventId': '48d339c2-0caa-4705-9c83-1c22642adec1', 'StackName': 'stack-0022f874', 'LogicalResourceId': 'stack-0022f874', 'PhysicalResourceId': 'arn:aws:cloudformation:us-east-1:000000000000:stack/stack-0022f874/2a2b5e0b', 'ResourceType': 'AWS::CloudFormation::Stack', 'Timestamp': datetime.datetime(2023, 5, 10, 9, 13, 16, 367000, tzinfo=tzutc()), 'ResourceStatus': 'CREATE_FAILED'}, {'StackId': 'arn:aws:cloudformation:us-east-1:000000000000:stack/stack-0022f874/2a2b5e0b', 'EventId': 'f7eb4d27-9c59-4f1b-987e-e19a2396d032', 'StackName': 'stack-0022f874', 'LogicalResourceId': 'stack-0022f874', 'PhysicalResourceId': 'arn:aws:cloudformation:us-east-1:000000000000:stack/stack-0022f874/2a2b5e0b', 'ResourceType': 'AWS::CloudFormation::Stack', 'Timestamp': datetime.datetime(2023, 5, 10, 9, 13, 15, 934000, tzinfo=tzutc()), 'ResourceStatus': 'CREATE_IN_PROGRESS'}, {'StackId': 'arn:aws:cloudformation:us-east-1:000000000000:stack/stack-0022f874/2a2b5e0b', 'EventId': '55083b4c-60e9-4189-9d55-50ccc06c5ce6', 'StackName': 'stack-0022f874', 'LogicalResourceId': 'stack-0022f874', 'PhysicalResourceId': 'arn:aws:cloudformation:us-east-1:000000000000:stack/stack-0022f874/2a2b5e0b', 'ResourceType': 'AWS::CloudFormation::Stack', 'Timestamp': datetime.datetime(2023, 5, 10, 9, 13, 15, 915000, tzinfo=tzutc()), 'ResourceStatus': 'REVIEW_IN_PROGRESS'}]\r\n```\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 80,
        "deletions": 1,
        "changed_files": 3,
        "created_at": "2023-05-09T18:07:33Z",
        "closed_at": "2023-05-10T06:54:20Z",
        "merged_at": "2023-05-10T06:54:20Z",
        "body": "Added fix and test case if transcription job name is same in `StartTranscriptionJob`\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 5,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2023-05-09T17:23:32Z",
        "closed_at": "2023-05-12T13:40:55Z",
        "merged_at": "2023-05-12T13:40:55Z",
        "body": "This PR updates the Kinesis Firehose client for EventBridge Integration",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 16,
        "changed_files": 1,
        "created_at": "2023-05-09T14:54:43Z",
        "closed_at": "2023-05-10T05:33:43Z",
        "merged_at": "2023-05-10T05:33:43Z",
        "body": "Follow-up to #8257 \r\nNow removes the now unused variables in the `service_models.py` file",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2023-05-09T00:02:53Z",
        "closed_at": "2023-05-09T08:08:44Z",
        "merged_at": "2023-05-09T08:08:44Z",
        "body": "Bumps python from `8368639` to `0287425`.\n\n\n[![Dependabot compatibility score](https://dependabot-badges.githubapp.com/badges/compatibility_score?dependency-name=python&package-manager=docker&previous-version=3.10.11-slim-buster&new-version=3.10.11-slim-buster)](https://docs.github.com/en/github/managing-security-vulnerabilities/about-dependabot-security-updates#about-compatibility-scores)\n\nDependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.\n\n[//]: # (dependabot-automerge-start)\n[//]: # (dependabot-automerge-end)\n\n---\n\n<details>\n<summary>Dependabot commands and options</summary>\n<br />\n\nYou can trigger Dependabot actions by commenting on this PR:\n- `@dependabot rebase` will rebase this PR\n- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it\n- `@dependabot merge` will merge this PR after your CI passes on it\n- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it\n- `@dependabot cancel merge` will cancel a previously requested merge and block automerging\n- `@dependabot reopen` will reopen this PR if it is closed\n- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually\n- `@dependabot ignore this major version` will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot ignore this minor version` will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot ignore this dependency` will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)\n\n\n</details>",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 15,
        "deletions": 6,
        "changed_files": 1,
        "created_at": "2023-05-08T20:03:11Z",
        "closed_at": "2023-05-12T08:08:15Z",
        "merged_at": "2023-05-12T08:08:15Z",
        "body": "This PR would fix the case when the usr restore the state created with the legacy S3 provider (everything would be stored in moto). The assumption was that moto would raise an exception if the CORS configuration didn't exist. However, while restoring an older state, the data would exist in moto but not in our store, thus creating a value error when trying to access the `CORSRules` (`NoneType` etc etc).\r\n\r\nThis will properly raise the 404 exception if the state is not properly restored.  ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2023-05-08T19:14:45Z",
        "closed_at": "2023-05-12T13:41:16Z",
        "merged_at": "2023-05-12T13:41:16Z",
        "body": "This PR updates the Cloudwatch Logs client in the EventBridge message publisher",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 78,
        "deletions": 5,
        "changed_files": 3,
        "created_at": "2023-05-08T17:13:12Z",
        "closed_at": "2023-05-09T09:45:16Z",
        "merged_at": "2023-05-09T09:45:16Z",
        "body": "Currently, if the Docker socket is not available at the start of LocalStack, the initialization of the `SdkDockerClient` fails and the client will not recover during the runtime of LocalStack.\r\nThis PR changes this behavior such that:\r\n- The initialization is tried again if the client is accessed at runtime, but not already available (lazy init of the SDK client if it was unsuccessful before).\r\n- Introduces a retry config `DOCKER_SDK_DEFAULT_RETRIES` which allows configuring the amount of retries when initializing the client.\r\n\r\nThis addresses https://github.com/localstack/helm-charts/issues/21.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 281,
        "deletions": 56,
        "changed_files": 12,
        "created_at": "2023-05-08T12:48:56Z",
        "closed_at": "2023-05-11T12:54:43Z",
        "merged_at": "2023-05-11T12:54:43Z",
        "body": "## Motivation\r\n\r\nTo allow the IAM enforcement of s3 notifications, we need to use the new clients for its requests, and properly send the `s3:TestEvent` for sns and sqs targets (https://docs.aws.amazon.com/AmazonS3/latest/userguide/how-to-enable-disable-notification-intro.html). For lambda, it seems like no such event is sent, so it uses a dryrun invoke there (which needed to be fixed) to check if the invocation passes through.\r\n\r\n## Changes\r\n* Fix lambda dryrun invocations\r\n* Introduce a BucketVerificationContext to contain all data necessary for validation (in essence everything sent in the `s3:TestEvent` payload.\r\n* Send `s3:TestEvent` payload (sns, sqs) / dry run invoke (lambda)\r\n* Migrate to the new clients\r\n* Some changes due to changed AWS error messages caused by snapshot update",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 187,
        "deletions": 0,
        "changed_files": 6,
        "created_at": "2023-05-08T05:04:36Z",
        "closed_at": "2023-05-08T07:38:30Z",
        "merged_at": "2023-05-08T07:38:29Z",
        "body": "# \ud83d\ude80 ASF Update Report \ud83d\ude80\nThis PR has been automatically generated to update the generated API stubs for our ASF services.\nIt uses the latest code-generator from the _master_ branch ([scaffold.py](https://github.com/localstack/localstack/blob/master/localstack/aws/scaffold.py)) and the latest _published_ version of [botocore](https://github.com/boto/botocore) to re-generate all API stubs which are already present in the `localstack.aws.api` module of the _master_ branch.\n\n## \ud83d\udd04 Updated Services\nThis PR updates the following services:\n- cloudwatch\n- config\n- ec2\n- kms\n- opensearch\n\n## \ud83d\udc77\ud83c\udffd Handle this PR\nThe following options describe how to interact with this PR / the auto-update:\n\n\u2714\ufe0f **Accept Changes**\nIf the changes are satisfying, just squash-merge the PR and delete the source branch.\n\n\ud83d\udeab **Ignore Changes**\nIf you want to ignore the changes in this PR, just close the PR and *do not delete* the source branch. The PR will not be opened and a new PR will not be created for as long as the generated code does not change (or the branch is deleted). As soon as there are new changes, a new PR will be created.\n\n\u270f\ufe0f **Adapt Changes**\n*Don't do this.* The APIs are auto-generated. If you decide that the APIs should look different, you have to change the code-generation.\n\n\u23f8\ufe0f **Pause Updates**\nRemove the cron-schedule trigger of the GitHub Action workflow which creates these PRs. The action can then still be triggered manually, but it will not be executed automatically.",
        "comments": 3
    },
    {
        "merged": false,
        "additions": 2061,
        "deletions": 0,
        "changed_files": 6,
        "created_at": "2023-05-05T16:21:16Z",
        "closed_at": "2023-06-13T15:12:35Z",
        "merged_at": null,
        "body": "WIP: scaffolding generation for GetAttr tests\r\n\r\nThese tests test accessing attributes from the schema. The idea is that if these tests are run against AWS, we will record a snapshot of which attributes are valid `GetAtt` targets.\r\n\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 10,
        "deletions": 12,
        "changed_files": 5,
        "created_at": "2023-05-05T15:39:55Z",
        "closed_at": "2023-05-09T07:07:01Z",
        "merged_at": "2023-05-09T07:07:01Z",
        "body": "Fixes:\r\n- Modify the logic for VersionId for S3 following a fix in moto which was incomplete\r\n- Remove the region when calling SES `send_raw_email` directly from the backend, was used for SNS notification processing\r\n- fix SSM: needed to modify 2 patches to 1. properly call the new `SecretsStore`, and 2. return the right data type from a patch\r\n- fix route53: moto doesn't not return the health check anymore after deletion, so we need to check beforehand if it exists\r\n\r\nI have made a run for with the -ext action and it is green. (https://github.com/localstack/localstack-ext/actions/runs/4895713711)",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 46,
        "deletions": 13,
        "changed_files": 2,
        "created_at": "2023-05-05T14:33:19Z",
        "closed_at": "2023-05-06T12:53:00Z",
        "merged_at": "2023-05-06T12:53:00Z",
        "body": "Following up on issue #8142 where memory leaks have been reported when LocalStack runs for a longer period (hours/days).\r\n\r\nThe issue seems to be related to a PR #7182, resulting from a feature request. \r\nWith the PR we also added reporting of `Approximate*` messages to provide AWS parity. On LocalStack those approximate messages are reported periodically, e.g. every minute.\r\nThis leads to more metrics being added to CloudWatch, even without any interaction.\r\n\r\nWe now added two config flags to prevent related issues:\r\n* `SQS_CLOUDWATCH_METRICS_REPORT_INTERVAL` which allows to configure the interval of reporting of the `Approximate*` messages\r\n* `SQS_DISABLE_CLOUDWATCH_METRICS` to disable metrics reporting completely for SQS",
        "comments": 5
    },
    {
        "merged": true,
        "additions": 530,
        "deletions": 370,
        "changed_files": 35,
        "created_at": "2023-05-05T10:16:47Z",
        "closed_at": "2023-06-15T08:21:48Z",
        "merged_at": "2023-06-15T08:21:48Z",
        "body": "Start to remove the physical resource id from `GenericBaseModel` instances.\r\n\r\n## Motivation\r\n\r\nThis _property_ should not need to be a function - it's known after creation. It's also a discrepancy with the CFn extension API, and as part of the migration towards this framework, we should remove this property.\r\n\r\nWe allow graceful fallback of the base model function so the template deployer does not need updating at this stage.\r\n\r\nThis PR starts the process, by selecting some of the \"easy\" services, i.e. the services where `get_physical_resource_id` is not supplied any arguments.\r\n\r\n* [x] certificate manager (easy)\r\n* [x] ecr (easy)\r\n* [x] events (easy)\r\n* [x] redshift (easy)\r\n* [x] sns (easy)\r\n* [x] stepfunctions (easy)\r\n* [x] api gateway (easy)\r\n* [x] cdk (easy)\r\n* [x] cloudformation (easy)\r\n* [x] cloudwatch (@dominikschubert)\r\n* [x] dynamodb\r\n* [x] ec2 (easy)\r\n* [x] iam\r\n* [x] kinesis (@dominikschubert)\r\n* [x] kinesisfirehose (@dominikschubert)\r\n* [x] elasticsearch (@dominikschubert)\r\n* [x] lambda (@dominikschubert)\r\n* [x] logs (@simonrw)\r\n* [x] opensearch (@simonrw)\r\n* [x] resourcegroups (@simonrw)\r\n* [x] route53 (@simonrw)\r\n* [x] s3 (@simonrw)\r\n* [x] secretsmanager (easy)\r\n* [x] sqs (@simonrw)\r\n* [x] ssm (easy)\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 442,
        "deletions": 5,
        "changed_files": 4,
        "created_at": "2023-05-05T10:03:18Z",
        "closed_at": "2023-05-09T14:27:22Z",
        "merged_at": "2023-05-09T14:27:22Z",
        "body": "For the transcribe service: \r\n- add feature for `OutputBucket` and `OutputKey` in `StartTranscriptionJob` request. \r\n- dump the output json in correct s3 bucket \r\n- add test case to verify correct response for different combinations of output bucket and output key \r\n- remove the earlier method of using output json file name as a random `uuid` string ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 135,
        "deletions": 2,
        "changed_files": 3,
        "created_at": "2023-05-05T09:01:49Z",
        "closed_at": "2023-05-12T20:43:49Z",
        "merged_at": "2023-05-12T20:43:49Z",
        "body": "This PR would fix #8261\r\nAWS allows publishing an Event to a nonexistent custom EventBus, it will just accept it and not do anything with it, as the test demonstrates (we even try to describe the nonexistent custom EventBus and it raises an error)",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 0,
        "deletions": 5,
        "changed_files": 1,
        "created_at": "2023-05-04T18:52:00Z",
        "closed_at": "2023-05-05T08:51:05Z",
        "merged_at": "2023-05-05T08:51:05Z",
        "body": "This PR is start to move all ref resolving to occur once before the deploy starts. This will help us split the behaviour of the template deployer up into phases.\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 15,
        "deletions": 15,
        "changed_files": 4,
        "created_at": "2023-05-04T14:48:35Z",
        "closed_at": "2023-05-08T09:41:58Z",
        "merged_at": "2023-05-08T09:41:58Z",
        "body": "Follow-up on https://github.com/localstack/docs/pull/607 ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 25,
        "deletions": 27,
        "changed_files": 6,
        "created_at": "2023-05-04T14:16:47Z",
        "closed_at": "2023-05-09T09:02:17Z",
        "merged_at": "2023-05-09T09:02:17Z",
        "body": null,
        "comments": 2
    },
    {
        "merged": true,
        "additions": 236,
        "deletions": 6,
        "changed_files": 7,
        "created_at": "2023-05-04T12:55:44Z",
        "closed_at": "2023-05-24T21:54:47Z",
        "merged_at": "2023-05-24T21:54:47Z",
        "body": "## Summary\r\n\r\n* fix \"CreateStackInstances\" operation where repetitive calls were resulting in 500 errors. Few runs against AWS have shown that AWS returns an OperationId in any case. This can be also reproduced with `aws copilot`\r\n* update `StackSet` id format to match the one in AWS\r\n* implement `DeleteStackInstances` operation to complete the parity test\r\n* update template metadata on changeset execution\r\n* Include template metadata into `GetTemplateSummary` response\r\n\r\n## Linked Issues\r\n\r\nhttps://github.com/localstack/localstack/issues/8255\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 381,
        "deletions": 105,
        "changed_files": 5,
        "created_at": "2023-05-04T10:44:09Z",
        "closed_at": "2023-05-10T11:53:27Z",
        "merged_at": "2023-05-10T11:53:27Z",
        "body": "### Summary\r\n\r\nThis PR adds support for cross-accounts access to following operations in KMS:\r\n\r\n- CreateGrant                                                                                                                                                                                                                                \r\n- DescribeKey                                                                      \r\n- GetKeyRotationStatus                                                             \r\n- GetPublicKey                                                                     \r\n- ListGrants                                                                       \r\n- RetireGrant                                                                      \r\n- RevokeGrant                                                                      \r\n- Decrypt                                                                   \r\n- Encrypt                                                                          \r\n- GenerateDataKey                                                                  \r\n- GenerateDataKeyPair                                                              \r\n- GenerateDataKeyPairWithoutPlaintext                                              \r\n- GenerateDataKeyWithoutPlaintext                                                  \r\n- GenerateMac                                                                       \r\n- Sign                                                                             \r\n- Verify                                                                           \r\n- VerifyMac\r\n\r\nIn essence, this means that it is possible to use KMS keys belonging to other accounts. This works only when using key ARNs for above operations. Furthermore, this must happen in the same region.\r\n\r\n### Notes\r\n\r\nThis PR changes the nature of Grant Tokens. This will therefore break existing pods/persisted states that have grants.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 385,
        "deletions": 116,
        "changed_files": 24,
        "created_at": "2023-05-04T09:13:43Z",
        "closed_at": "2023-05-12T19:49:30Z",
        "merged_at": "2023-05-12T19:49:30Z",
        "body": "Changes\r\n\r\n* Introduces a `get_ref()` for the `GenericBaseModel`. This replaces the previous `get_physical_resource_id(attribute=\"Ref\")` calls\r\n* GetAtt now actually uses `cfn_get_attribute` instead of first trying to get the physical resource id\r\n* Remove any usage of `get_physical_resource_id` with an attribute parameter\r\n* Adapted models where necessary by adding missing values in `get_cfn_attribute`",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 40,
        "deletions": 41,
        "changed_files": 3,
        "created_at": "2023-05-04T05:03:55Z",
        "closed_at": "2023-05-09T09:10:34Z",
        "merged_at": null,
        "body": "In this first iteration we'll remove any dynamic physical resource ID lookup and replace it with a static lookup based on the state set in the result_handler, i.e. from the create call.",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 15,
        "deletions": 3,
        "changed_files": 2,
        "created_at": "2023-05-03T14:33:01Z",
        "closed_at": "2023-05-03T15:55:41Z",
        "merged_at": null,
        "body": "The template deployer has many levels of exception handlers which catch exceptions and turn them into stack failures. This may swallow the exception (only presented then in debug logs, which may not be enabled by default) or otherwise ignore the error. \r\n\r\nIn this PR, we provide a configuration variable that enables exceptions to be raised at the point of exception, not caught and re-thrown/logged later. This should improve development on CloudFormation going forward.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2023-05-03T12:00:28Z",
        "closed_at": "2023-05-03T14:04:45Z",
        "merged_at": "2023-05-03T14:04:45Z",
        "body": "Bumps python from `1b501f9` to `8368639`.\n\n\n[![Dependabot compatibility score](https://dependabot-badges.githubapp.com/badges/compatibility_score?dependency-name=python&package-manager=docker&previous-version=3.10.11-slim-buster&new-version=3.10.11-slim-buster)](https://docs.github.com/en/github/managing-security-vulnerabilities/about-dependabot-security-updates#about-compatibility-scores)\n\nDependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.\n\n[//]: # (dependabot-automerge-start)\n[//]: # (dependabot-automerge-end)\n\n---\n\n<details>\n<summary>Dependabot commands and options</summary>\n<br />\n\nYou can trigger Dependabot actions by commenting on this PR:\n- `@dependabot rebase` will rebase this PR\n- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it\n- `@dependabot merge` will merge this PR after your CI passes on it\n- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it\n- `@dependabot cancel merge` will cancel a previously requested merge and block automerging\n- `@dependabot reopen` will reopen this PR if it is closed\n- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually\n- `@dependabot ignore this major version` will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot ignore this minor version` will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot ignore this dependency` will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)\n\n\n</details>",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 18,
        "deletions": 18,
        "changed_files": 2,
        "created_at": "2023-05-03T11:58:33Z",
        "closed_at": "2023-05-03T13:07:20Z",
        "merged_at": "2023-05-03T13:07:20Z",
        "body": "## Motivation\r\nOur http integration tests often fail as they return a `504` status code. Since our gateway probably does not return that, it is reasonable to assume the upstream `httpbin.org/robots.txt` request does that.\r\n\r\nLog of failed run:\r\n```\r\ntests/integration/apigateway/test_apigateway_integrations.py::test_put_integration_responses \r\n-------------------------------- live log call ---------------------------------\r\n2023-05-03T11:02:27.604  INFO --- [   asgi_gw_7] localstack.request.aws     : AWS apigateway.CreateRestApi => 201\r\n2023-05-03T11:02:27.612  INFO --- [   asgi_gw_9] localstack.request.aws     : AWS apigateway.GetResources => 200\r\n2023-05-03T11:02:27.621  INFO --- [   asgi_gw_8] localstack.request.aws     : AWS apigateway.PutMethod => 201\r\n2023-05-03T11:02:27.629  INFO --- [   asgi_gw_3] localstack.request.aws     : AWS apigateway.PutMethodResponse => 201\r\n2023-05-03T11:02:27.641  INFO --- [   asgi_gw_2] localstack.request.aws     : AWS apigateway.PutIntegration => 201\r\n2023-05-03T11:02:27.668  INFO --- [   asgi_gw_0] localstack.request.aws     : AWS apigateway.PutIntegrationResponse => 201\r\n2023-05-03T11:02:27.685  INFO --- [   asgi_gw_5] localstack.request.aws     : AWS apigateway.GetIntegrationResponse => 200\r\n2023-05-03T11:02:27.694  INFO --- [   asgi_gw_4] localstack.request.aws     : AWS apigateway.GetMethod => 200\r\n2023-05-03T11:02:27.723  INFO --- [   asgi_gw_1] localstack.services.apigateway.helpers : Failed to get stage local for API id k460vifue5\r\n2023-05-03T11:02:27.724  INFO --- [   asgi_gw_1] localstack.services.apigateway.templates : Method request body before transformations: {\"egg\": \"ham\"}\r\n2023-05-03T11:02:37.730  INFO --- [   asgi_gw_1] localstack.request.http    : GET /restapis/k460vifue5/local/_user_request_/ => 504\r\nFAILED\r\n```\r\n\r\nThis is very annoying, so we need to fix this.\r\n\r\n## Changes\r\n* Use local http echo fixture instead of remote server to test http integrations\r\n* Add a log message for http integrations, if the remote returns a not-ok status code. This should allow us to better debug these issues.",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 101,
        "deletions": 49,
        "changed_files": 2,
        "created_at": "2023-05-02T21:05:25Z",
        "closed_at": "2023-05-04T17:22:09Z",
        "merged_at": "2023-05-04T17:22:09Z",
        "body": "Gain understanding by refactoring internals and add static types.\r\n\r\nIn particular, the `func_details` type was difficult to nail down. \r\n\r\nRemove `configure_resource_via_sdk` since it had two purposes. Instead, inline the two behaviours into\r\n* a  function that resolves the function properties, and\r\n* code that deploys the resource via the SDK.\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 101,
        "deletions": 100,
        "changed_files": 4,
        "created_at": "2023-05-02T20:46:55Z",
        "closed_at": "2023-05-03T13:02:41Z",
        "merged_at": "2023-05-03T13:02:41Z",
        "body": "Changes\r\n\r\n* Move CFn utils from template_deployer to util files\r\n* Remove fallback to \"ResourceType\" when \"Type\" was not available (didn't see where this would occur anyway)\r\n* Remove reference to canonical resource type since all now already in their canonical form ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1021,
        "deletions": 179,
        "changed_files": 6,
        "created_at": "2023-05-02T17:44:26Z",
        "closed_at": "2023-05-09T08:29:29Z",
        "merged_at": "2023-05-09T08:29:29Z",
        "body": "## Motivation\r\n\r\nIn SQS, FIFO queues behave very differently from standard queues when receiving messages. A feature we haven't implemented at all were message group IDs. While we were able to send and track them, we didn't actually do anything with them. But they greatly affect how receiving of messages work. Here's the gist from the [FIFO delivery logic](https://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/FIFO-queues-understanding-logic.html).\r\n\r\n>When receiving messages from a FIFO queue with multiple message group IDs, Amazon SQS first attempts to return as many messages with the same message group ID as possible. This allows other consumers to process messages with a different message group ID. When you receive a message with a message group ID, no more messages for the same message group ID are returned unless you delete the message or it becomes visible.\r\n\r\nThe issue was first raised in #6766, and requested by several Pro users.\r\n\r\nTurns out that this was a non-trivial change to make because of a) the way our `SqsProvider` communicates with the `SqsQueue`, and b) how messages are organized in the `FifoQueue`.\r\n\r\n## Changes\r\n\r\nHere's a summary of changes and their respective commits to make it easier to review:\r\n\r\n* https://github.com/localstack/localstack/pull/8238/commits/f8e87a237bae2933a6387326d4191f692179b104 Added a bunch of tests to validate the behavior of AWS\r\n* https://github.com/localstack/localstack/pull/8238/commits/16821e5f47fd0cc6446320d694224aa06abe1561 Refactor the communication between the `SqsProvider` and `SqsQueue`.\r\n  The problem was that abstracting over a `get` method that only returns a single message was blocking a way to retrieve multiple messages from the queue atomically, which is exactly what the FIFO behavior requires. So I replaced the `SqsQueue.get` method with a `receive` method that much more closely resembles what `ReceiveMessage` is doing, and allows you to get multiple messages at once. Now the access to the underlying datastructure holding the messages is hidden behind `receive`. \r\n* https://github.com/localstack/localstack/pull/8238/commits/8f1d70e49daff499d1f8df761163fc50b82b99d0 Implement the actual message group logic (significant changes in the `FifoQueue` - completely new receive logic).\r\n  Instead of storing individual messages in the queue, we now have a queue that orders `MessageGroup` objects that in turn contain a priority queue of messages. The implication is that we need more memory to store the messages. The worst case if each message has its own unique message group. The trade off is a simplified implementation of making sure that only one consumer receives a message group when there's a race for the queue. We first dequeue the message group (making it inaccessible to other consumers), and then get the messages from the group. Because we know that only one thread will access the messages in the group, it also vastly simplifies concurrent access. The `visible` queue is therefore now a construct that has moved completely into the `StandardQueue`\r\n* https://github.com/localstack/localstack/pull/8238/commits/f08d4ac6c3f1b6dccaf1d4d0f20462e0d3e5cbb3 Adapt SQS developer endpoints to the changes\r\n\r\n## Future work\r\n\r\n### Expired receipt handles\r\nI added a currently xfailed test that shows that you cannot delete a message with an expired receipt handle in FIFO queues. I was too lazy to implement this right now, since the PR is already quite large, and it needs some additional tinkering with the receipt handle encoder.\r\n\r\n### Message group ordering\r\nIt's not clear exactly how message groups themselves are ordered in the queue. There seems to be _some_ sort of priority in AWS given to groups when they expire, but it behaved differently depending on whether messages were removed or expired. I couldn't figure out how AWS does it exactly, and it's not documented. The only mention I could find is a [vague statement](https://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/FIFO-queues-understanding-logic.html) I interpret as \"there is no particular guarantee in which order message groups will be received\".\r\n\r\n> FIFO queue logic applies only per message group ID. Each message group ID represents a distinct ordered message group within an Amazon SQS queue. For each message group ID, all messages are sent and received in strict order. However, messages with different message group ID values might be sent and received out of order.\r\n\r\nFor this reason, I had to currently allow different orderings of message groups (note that the order _within_ a group is guaranteed)\r\nhttps://github.com/localstack/localstack/blob/8a80530b1b6e58bafa08e03b3cf1751d3185d936/tests/integration/test_sqs.py#L1573-L1579\r\n\r\n### More tests\r\n\r\nThere are a bunch more tests one could write. Including concurrent access, ordering behavior of groups with more groups to see how they are ordered after deletion etc.\r\n\r\n### Code duplication\r\n\r\nThere is a bit of code duplication especially in the `receive` implementations. It seems hard to generalize, and maybe not worth it at all, given that we are not going to introduce other queue types. Maybe one could extract some util methods that do some of the work (e.g. collect messages from a queue or queue-like interface).\r\n\r\n### Performance\r\n\r\nThere is a lot of locking going on in FIFO queues. Basically all access to message groups is currently completely linearized across consumers. This will affect performance mostly when there are many parallel consumers. But more systematic benchmarks are necessary, that can maybe be preformed as part of #7342 \r\n\r\n## Fixes\r\n* https://github.com/localstack/localstack/issues/7397 fixed as a convenient side effect from the refactoring of the delivery logic.\r\n* https://github.com/localstack/localstack/issues/6766\r\n* https://github.com/localstack/localstack/issues/7036 (potentially - need to write a specific test)",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 950,
        "deletions": 436,
        "changed_files": 9,
        "created_at": "2023-05-02T16:15:54Z",
        "closed_at": "2023-05-03T10:35:15Z",
        "merged_at": "2023-05-03T10:35:15Z",
        "body": "## Motivation\r\n\r\nAWS Lambda recently released the java17 managed runtime.\r\n\r\nhttps://aws.amazon.com/blogs/compute/java-17-runtime-now-available-on-aws-lambda/\r\n\r\nWe also aim to support it.\r\n\r\n## Changes\r\n* Add java17 to supported runtimes\r\n* Add java17 to snapshot supported runtimes https://docs.aws.amazon.com/lambda/latest/dg/snapstart.html#snapstart-runtimes\r\n* Add java17 to snapshot tests\r\n* Add java17 to common runtime tests\r\n* Add java17 to java specific runtime tests\r\n* Use python3.10 as default runtime for test_lambda.py tests\r\n\r\nI also regenerated a lot of snapshots.\r\n\r\nFixes #8219",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 208,
        "deletions": 155,
        "changed_files": 6,
        "created_at": "2023-05-02T12:53:44Z",
        "closed_at": "2023-05-02T20:04:41Z",
        "merged_at": "2023-05-02T20:04:41Z",
        "body": "An initial iteration over the template_deployer with @simonrw where we tried to untangle a few of the usage of the `Stack` class in the template deployer. More to come in separate PRs\r\n\r\nChanges\r\n- Replace usage of `Stack` class through the template deployer (initial iteration)\r\n- Remove defaults from function details (`get_deploy_templates`)\r\n- Remove ability to use boto3 resources in favor of clients in `get_deploy_templates`",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 23,
        "deletions": 5,
        "changed_files": 4,
        "created_at": "2023-05-02T07:05:12Z",
        "closed_at": "2023-07-06T04:32:56Z",
        "merged_at": "2023-07-06T04:32:56Z",
        "body": "This PR makes a few minor fixes to improve cross-account access in Lambda.\r\n\r\nThis ensures smooth functionality when using a non-default account ID.",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 19,
        "deletions": 3,
        "changed_files": 2,
        "created_at": "2023-05-01T13:03:29Z",
        "closed_at": "2023-05-08T16:46:37Z",
        "merged_at": "2023-05-08T16:46:37Z",
        "body": "Issue: #8232 ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 28,
        "deletions": 3,
        "changed_files": 2,
        "created_at": "2023-05-01T05:05:06Z",
        "closed_at": "2023-05-02T07:04:42Z",
        "merged_at": "2023-05-02T07:04:42Z",
        "body": "# \ud83d\ude80 ASF Update Report \ud83d\ude80\nThis PR has been automatically generated to update the generated API stubs for our ASF services.\nIt uses the latest code-generator from the _master_ branch ([scaffold.py](https://github.com/localstack/localstack/blob/master/localstack/aws/scaffold.py)) and the latest _published_ version of [botocore](https://github.com/boto/botocore) to re-generate all API stubs which are already present in the `localstack.aws.api` module of the _master_ branch.\n\n## \ud83d\udd04 Updated Services\nThis PR updates the following services:\n- ec2\n- lambda-\n\n## \ud83d\udc77\ud83c\udffd Handle this PR\nThe following options describe how to interact with this PR / the auto-update:\n\n\u2714\ufe0f **Accept Changes**\nIf the changes are satisfying, just squash-merge the PR and delete the source branch.\n\n\ud83d\udeab **Ignore Changes**\nIf you want to ignore the changes in this PR, just close the PR and *do not delete* the source branch. The PR will not be opened and a new PR will not be created for as long as the generated code does not change (or the branch is deleted). As soon as there are new changes, a new PR will be created.\n\n\u270f\ufe0f **Adapt Changes**\n*Don't do this.* The APIs are auto-generated. If you decide that the APIs should look different, you have to change the code-generation.\n\n\u23f8\ufe0f **Pause Updates**\nRemove the cron-schedule trigger of the GitHub Action workflow which creates these PRs. The action can then still be triggered manually, but it will not be executed automatically.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-04-30T10:59:10Z",
        "closed_at": "2023-05-03T14:03:20Z",
        "merged_at": "2023-05-03T14:03:20Z",
        "body": null,
        "comments": 2
    },
    {
        "merged": true,
        "additions": 108,
        "deletions": 68,
        "changed_files": 5,
        "created_at": "2023-04-28T13:46:24Z",
        "closed_at": "2023-06-21T08:58:53Z",
        "merged_at": "2023-06-21T08:58:53Z",
        "body": "This is part of an ongoing effort to making credentials more explicit -- by use of well defined access key IDs for testing and internal calls, removing fallbacks and use of context variables. In turn this will improve cross-account functionality.\r\n\r\nSee https://github.com/localstack/localstack/pull/8204",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 8,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2023-04-28T08:26:08Z",
        "closed_at": "2023-05-03T14:23:27Z",
        "merged_at": "2023-05-03T14:23:27Z",
        "body": "## Motivation\r\nCurrently, we just raise a KeyError when a key is not present in the secret we had a Ref to. However, it is possible that this key will be filled by another resource, for example [a SecretTargetAttachement](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-secretsmanager-secrettargetattachment.html) in the future, which was prevented by the immediate error.\r\n\r\nAlso, the Execution Status used for the short circuit condition is not actually available in the return value of the API call: https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_DescribeChangeSet.html\r\n\r\n## Changes\r\n* Raise DependencyNotYetSatisfied instead of KeyError when secret is not yet populated, to be able to wait for another resource to populate it correctly. If this is never the case, the stack will still fail, but it will not fail immediately anymore on the first try.\r\n* Raise a ShortCircuitWaitException when execution status is \"EXECUTE_FAILED\" instead of \"ROLLBACK_COMPLETE\".",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 31,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2023-04-28T03:49:00Z",
        "closed_at": "2023-05-10T15:30:16Z",
        "merged_at": "2023-05-10T15:30:16Z",
        "body": "Issue: https://github.com/localstack/localstack/issues/8211",
        "comments": 11
    },
    {
        "merged": true,
        "additions": 19,
        "deletions": 6,
        "changed_files": 2,
        "created_at": "2023-04-27T19:42:58Z",
        "closed_at": "2023-05-04T15:01:36Z",
        "merged_at": "2023-05-04T15:01:36Z",
        "body": "This PR makes the Events service provider pass the RuleArn to the send_event_to_target function. Now the function can put the correct value on the request metadata for the new internal clients. \r\n\r\nChanges:\r\n- [x] Source ARN for Not Scheduled events\r\n- [x] Source ARN for Scheduled Events\r\n- [x]  ~~Scheduled events now handle alternate event buses~~ this should not be possible for parity sake\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1447,
        "deletions": 3,
        "changed_files": 2,
        "created_at": "2023-04-27T15:23:29Z",
        "closed_at": "2023-05-22T10:54:03Z",
        "merged_at": "2023-05-22T10:54:03Z",
        "body": "~WIP: this is WIP PR, all these tests will/should fail as the functionality is not yet implemented in moto. Will depend on upstream changes, the PR is available here: https://github.com/getmoto/moto/pull/6264~\r\n\r\nThis PR builds on #8326\r\nThis will validate the fixes for #8172 \r\n\r\nAll the tests will pass once all these PR are merged and a new release of moto-ext is done. (tested locally).\r\n\r\nSorry for the big amount of tests added in only one PR, this was built incrementally and I did not want to multiply the drafts PR. All those tests are AWS validated and snapshotted, so we can be pretty confident it works fine. \r\n\r\nMoto PRs linked:\r\n- https://github.com/getmoto/moto/pull/6264\r\n- https://github.com/getmoto/moto/pull/6303\r\n- https://github.com/getmoto/moto/pull/6308\r\n- https://github.com/getmoto/moto/pull/6309\r\n\r\nThe next step building on these tests is to remove the functionality in our provider that has been added in moto now: calculating checksums and saving them to keys. Moto does not support CRC32C yet, so we will have a special case for this checksum algorithm. This will be done in a following PR.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2023-04-27T14:17:58Z",
        "closed_at": "2023-04-27T15:30:45Z",
        "merged_at": "2023-04-27T15:30:45Z",
        "body": "## Motivation\r\nWe are currently seeing error messages in the community test pipeline in -ext which indicate an error when verifying the access denied error of a docker push.\r\n\r\n```\r\n-------------------------------- live log call ---------------------------------\r\n2023-04-27T11:45:30.758 DEBUG --- [  MainThread] localstack.utils.container_utils.docker_cmd_client : Pushing image with cmd: ['docker', 'push', 'alpine']\r\n2023-04-27T11:45:30.758 DEBUG --- [  MainThread] localstack.utils.run       : Executing command: ['docker', 'push', 'alpine']\r\nERROR: '['docker', 'push', 'alpine']': exit code 1; output: b'Using default tag: latest\\nThe push refers to repository [docker.io/library/alpine]\\nf1417ff83b31: Preparing\\nf1417ff83b31: Retrying in 5 seconds\\nf1417ff83b31: Retrying in 4 seconds\\nf1417ff83b31: Retrying in 3 seconds\\nf1417ff83b31: Retrying in 2 seconds\\nf1417ff83b31: Retrying in 1 second\\nf1417ff83b31: Retrying in 10 seconds\\nf1417ff83b31: Retrying in 9 seconds\\nf1417ff83b31: Retrying in 8 seconds\\nf1417ff83b31: Retrying in 7 seconds\\nf1417ff83b31: Retrying in 6 seconds\\nf1417ff83b31: Retrying in 5 seconds\\nf1417ff83b31: Retrying in 4 seconds\\nf1417ff83b31: Retrying in 3 seconds\\nf1417ff83b31: Retrying in 2 seconds\\nf1417ff83b31: Retrying in 1 second\\nf1417ff83b31: Retrying in 15 seconds\\nf1417ff83b31: Retrying in 14 seconds\\nf1417ff83b31: Retrying in 13 seconds\\nf1417ff83b31: Retrying in 12 seconds\\nf1417ff83b31: Retrying in 11 seconds\\nf1417ff83b31: Retrying in 10 seconds\\nf1417ff83b31: Retrying in 9 seconds\\nf1417ff83b31: Retrying in 8 seconds\\nf1417ff83b31: Retrying in 7 seconds\\nf1417ff83b31: Retrying in 6 seconds\\nf1417ff83b31: Retrying in 5 seconds\\nf1417ff83b31: Retrying in 4 seconds\\nf1417ff83b31: Retrying in 3 seconds\\nf1417ff83b31: Retrying in 2 seconds\\nf1417ff83b31: Retrying in 1 second\\nf1417ff83b31: Retrying in 20 seconds\\nf1417ff83b31: Retrying in 19 seconds\\nf1417ff83b31: Retrying in 18 seconds\\nf1417ff83b31: Retrying in 17 seconds\\nf1417ff83b31: Retrying in 16 seconds\\nf1417ff83b31: Retrying in 15 seconds\\nf1417ff83b31: Retrying in 14 seconds\\nf1417ff83b31: Retrying in 13 seconds\\nf1417ff83b31: Retrying in 12 seconds\\nf1417ff83b31: Retrying in 11 seconds\\nf1417ff83b31: Retrying in 10 seconds\\nf1417ff83b31: Retrying in 9 seconds\\nf1417ff83b31: Retrying in 8 seconds\\nf1417ff83b31: Retrying in 7 seconds\\nf1417ff83b31: Retrying in 6 seconds\\nf1417ff83b31: Retrying in 5 seconds\\nf1417ff83b31: Retrying in 4 seconds\\nf1417ff83b31: Retrying in 3 seconds\\nf1417ff83b31: Retrying in 2 seconds\\nf1417ff83b31: Retrying in 1 second\\nunknown: requesting higher privileges than access token allows\\n'\r\nRERUN\r\n```\r\n\r\nWhile it is not clear why there are different error messages returned here, we still have to map this return to AccessDenied (as it effectively is).\r\n\r\n## Changes\r\n* Add case of `requesting higher privileges than access token allows` to be mapped to a AccessDenied exception",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 5,
        "deletions": 3,
        "changed_files": 2,
        "created_at": "2023-04-27T06:26:11Z",
        "closed_at": "2023-05-02T08:25:46Z",
        "merged_at": "2023-05-02T08:25:46Z",
        "body": "This PR upgrades botocore to 1.29.121 and boto3 to 1.26.121. the services ivs and ivs-realtime were added to the list of excluded services for now.",
        "comments": 10
    },
    {
        "merged": true,
        "additions": 3272,
        "deletions": 108,
        "changed_files": 35,
        "created_at": "2023-04-26T21:06:45Z",
        "closed_at": "2023-05-07T19:36:04Z",
        "merged_at": "2023-05-07T19:36:03Z",
        "body": "- Adds baseline support for `SQS` task states\r\n- Adds tests for sqs, and non failing aws-sdk and lambda\r\n- Adds Enhancements to task state abstractions to support uncaught failures\r\n- Adds a number of fixes uncaught failures to implemented state tasks\r\n- Fixes behaviour of lambda non service tasks\r\n- Enhancements to lambda tasks\r\n- Adds tests for lambda, lambda service, sqs, and uncaughts scenarios",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 44,
        "deletions": 41,
        "changed_files": 2,
        "created_at": "2023-04-26T18:06:49Z",
        "closed_at": "2023-04-27T06:34:25Z",
        "merged_at": "2023-04-27T06:34:25Z",
        "body": "Following this test failure: https://app.circleci.com/pipelines/github/localstack/localstack/14435/workflows/accc329c-b2bb-46b3-ab23-17de16e2046a/jobs/107516/tests\r\nIt seems the pipeline will be red until this is merged.\r\n\r\nIt seems in the test we were using an hardcoded user agent to avoid this kind of issue when we update `requests`, but it seems one test was missing it.\r\n\r\nI've also added a transformer to avoid updating the snapshot with the api id change on every regeneration. ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 120,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2023-04-26T17:17:08Z",
        "closed_at": "2023-05-05T13:05:11Z",
        "merged_at": "2023-05-05T13:05:11Z",
        "body": "This is a utils extracted and modified from `botocore`, to allow simple transformation of python types into DDB types accepted by the SDK. This was used in my hackathon project for an IoT feature, and I'm extracting it now in community following @viren-nadkarni advice.\r\n\r\nAlso added a unit test that showed the first implementation was wrong in some aspects. \r\n\r\nalso see https://docs.aws.amazon.com/amazondynamodb/latest/APIReference/API_AttributeValue.html",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 22,
        "deletions": 5,
        "changed_files": 3,
        "created_at": "2023-04-26T15:04:18Z",
        "closed_at": "2023-05-26T07:57:35Z",
        "merged_at": "2023-05-26T07:57:35Z",
        "body": "Should address #8199.\r\nWe reuse the same encoder from the DDB provider. \r\n\r\nNit: we don't do base 64 encoding in DynamoDB. Therefore, I temporarily skipped the validation for `\"$..Records..dynamodb.NewImage.binary_key.B\"`.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2023-04-26T08:15:12Z",
        "closed_at": "2023-04-26T09:25:08Z",
        "merged_at": "2023-04-26T09:25:08Z",
        "body": "Right after upgrading to Werkzeug==2.2.3 with https://github.com/localstack/localstack/pull/8104, version 2.3 has been released: https://github.com/pallets/werkzeug/releases/tag/2.3.0\r\nUnfortunately, the upgrade again causes some issues. These issues are addressed in https://github.com/localstack/localstack/pull/8200.\r\n\r\nIn the meantime, this PR avoids the upgrade to Werkzeug and Flask 2.3.0 by adding an upper version boundary in the `setup.cfg`.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 15,
        "deletions": 15,
        "changed_files": 7,
        "created_at": "2023-04-26T06:43:35Z",
        "closed_at": "2023-05-09T11:01:58Z",
        "merged_at": "2023-05-09T11:01:58Z",
        "body": "Right after upgrading to `Werkzeug==2.2.3` with https://github.com/localstack/localstack/pull/8104, version `2.3` has been released: https://github.com/pallets/werkzeug/releases/tag/2.3.0\r\nIn the meantime, the current release is 2.3.4: https://github.com/pallets/werkzeug/releases/tag/2.3.4\r\nThis upgrade breaks a few tests, which will be fixed within this PR.\r\n\r\nSteps:\r\n- [x] Explicitly upgrade Werkzeug to version 2.3.4.\r\n- [x] Analyze test results\r\n- [x] Fix all failing tests\r\n  - [x] `tests.unit.test_motoserver.test_moto_server`\r\n    - This seems to be an issue with our MotoServer bridge (which is only used in legacy code).\r\n    - This might be related to recent changes in dropping certain decoding steps in Werkzeug 2.3.0 (mentioned in the changeset https://werkzeug.palletsprojects.com/en/2.3.x/changes/).\r\n    - This seems to be fixed with https://github.com/getmoto/moto/pull/6266.\r\n    - The change will end up in localstack with https://github.com/localstack/localstack/pull/8270\r\n  - [x] `tests.integration.test_events.TestEvents.test_api_destinations`\r\n     - https://app.circleci.com/pipelines/github/localstack/localstack/14407/workflows/db9cd6c8-d3e1-4b76-bc66-0f2ee7eb8b24/jobs/107287\r\n     - Caused by https://github.com/pallets/werkzeug/commit/5ee439a692dc4474e0311de2496b567eed2d02cf#diff-abeaeb33abe8954dc4551a4631392ac46ad65e8b9f8404cec0e276a0d345af3b\r\n     - This is actually a bug / implication of a change in werkzeug, its implications in http_server, and the test implementation.\r\n     - Header params with underscores are just removed and cannot be retrieved when using the development server of Werkzeug 2.3+.\r\n     - Changed the test for now. Needs to be clarified with @dominikschubert and @dfangl if this is okay.\r\n     - I created an issue in Werkzeug for this: https://github.com/pallets/werkzeug/issues/2693\r\n     - However, it's effectively a limitation for `pytest-httpserver` (which uses the Werkzeug development server, we don't).\r\n  - [x] `tests.unit.aws.protocol.test_parser.py::test_s3_put_object_keys_with_trailing_slash_and_special_characters`\r\n    - Started failing after rebasing, such that it contains #8198.\r\n    - This has been fixed by removing the encoding handling in the parser (since the path param encoding changed with Werkzeug 2.3).\r\n  - [x] `tests.unit.http_.test_asgi.test_multipart_post_large_payload`\r\n    - This is still to be investigated. This could either be an incompatibility in our ASGI/WSGI bridge, or in Werkzeug 2.3.0.\r\n    - The multipart file streams suddenly have a leading `\\r\\n` when reading the file stream of the request. The test fails because this adds additional 2 characters, which causes the lengths to diverge.\r\n    - Fixed with https://github.com/pallets/werkzeug/pull/2678\r\n  - [x] `tests.unit.utils.test_http_utils.test_download_with_headers`\r\n    - Issue in `pytest-httpserver`: https://github.com/csernazs/pytest-httpserver/issues/241\r\n    - This test will be fixed in 2.3.1: https://github.com/pallets/werkzeug/issues/2665\r\n- [x] Ensure compatibility with downstream deps\r\n  - [x] `tests.integration.docker_utils.test_docker.TestDockerClient.test_push_access_denied`\r\n    - https://github.com/localstack/localstack/runs/13030344607\r\n    - These tests seem unrelated, because they also failed with Werkzeug 2.2.3 in #8202.\r\n  - [x] Run external integration tests against this branch to catch integration issues early.\r\n    - [External tests are \ud83d\udc9a ](https://github.com/localstack/localstack-ext/actions/runs/4923405174)\r\n- [x] Prepare for 2.4 (fix some deprecation warnings)\r\n   - [x] `localstack/http/router.py:137: DeprecationWarning: The 'charset' parameter is deprecated and will be removed in Werkzeug 2.4.`\r\n     - Added a comment in the code to remove with 2.4 (we are copying the request, for now this is still necessary)\r\n   - [x] `localstack/http/router.py:137: DeprecationWarning: The 'encoding_errors' parameter is deprecated and will be removed in Werkzeug 2.4.`\r\n     - Added a comment in the code to remove with 2.4 (we are copying the request, for now this is still necessary)\r\n   - [x] `localstack/testing/pytest/snapshot.py:41: DeprecationWarning: Use get_result() which forces correct exception handling`\r\n   - [x] `localstack/testing/snapshots/transformer.py:145: DeprecationWarning: Flags not at the start of the expression '(?<=(?i)UnsubscribeU' (truncated) but at position 4`\r\n   - [x] `localstack/testing/snapshots/transformer.py:145: DeprecationWarning: Flags not at the start of the expression '(?<=(?i)SubscribeURL' (truncated) but at position 4`",
        "comments": 6
    },
    {
        "merged": true,
        "additions": 15,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2023-04-26T00:27:41Z",
        "closed_at": "2023-04-26T19:12:19Z",
        "merged_at": "2023-04-26T19:12:19Z",
        "body": "Addresses #8174.\r\n\r\nIn a nutshell, the issue was caused by not re-adding a trailing backslash for keys with special quoted characters.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 47,
        "deletions": 6,
        "changed_files": 2,
        "created_at": "2023-04-25T15:10:06Z",
        "closed_at": "2023-04-26T16:16:57Z",
        "merged_at": "2023-04-26T16:16:57Z",
        "body": "## Motivation\r\nThis fixes the _significant_ performance issues of lambda on MacOS / Docker Desktop systems.\r\nThe main issue behind it was the check if a directory in the container exists and whether it is a directory, which was naively implemented as `get_archive`, which downloads the complete target directory.\r\n\r\nThis was caused mainly (by me :D) due to the missing API operation in the upstream docker sdk client for python, which is missing the abstraction for the head operation described here: https://docs.docker.com/engine/api/v1.42/#tag/Container/operation/ContainerArchiveInfo\r\n\r\n## Changes\r\n* Uses the head operation https://docs.docker.com/engine/api/v1.42/#tag/Container/operation/ContainerArchiveInfo to get the container archive info without downloading it. This needs some internal operations of the docker client, but seems like the most compatible option for now.\r\n\r\nCo-debugged by @joe4dev ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 317,
        "deletions": 154,
        "changed_files": 3,
        "created_at": "2023-04-25T13:44:33Z",
        "closed_at": "2023-05-15T06:06:31Z",
        "merged_at": "2023-05-15T06:06:31Z",
        "body": "### Summary\r\n\r\nThis PR adds support for cross-account access to Lambda functions and layers.\r\n\r\nSpecifically, following operations:\r\n\r\n- [Invoke](https://docs.aws.amazon.com/lambda/latest/dg/API_Invoke.html)                                                                                                                                                                     \r\n- [GetFunction](https://docs.aws.amazon.com/lambda/latest/dg/API_GetFunction.html)\r\n- [GetFunctionConfiguration](https://docs.aws.amazon.com/lambda/latest/dg/API_GetFunctionConfiguration.html)\r\n- [UpdateFunctionCode](https://docs.aws.amazon.com/lambda/latest/dg/API_UpdateFunctionCode.html)\r\n- [DeleteFunction](https://docs.aws.amazon.com/lambda/latest/dg/API_DeleteFunction.html)\r\n- [PublishVersion](https://docs.aws.amazon.com/lambda/latest/dg/API_PublishVersion.html)\r\n- [ListVersionsByFunction](https://docs.aws.amazon.com/lambda/latest/dg/API_ListVersionsByFunction.html)\r\n- [CreateAlias](https://docs.aws.amazon.com/lambda/latest/dg/API_CreateAlias.html)\r\n- [GetAlias](https://docs.aws.amazon.com/lambda/latest/dg/API_GetAlias.html)    \r\n- [ListAliases](https://docs.aws.amazon.com/lambda/latest/dg/API_ListAliases.html)\r\n- [UpdateAlias](https://docs.aws.amazon.com/lambda/latest/dg/API_UpdateAlias.html)\r\n- [DeleteAlias](https://docs.aws.amazon.com/lambda/latest/dg/API_DeleteAlias.html)\r\n- [GetPolicy](https://docs.aws.amazon.com/lambda/latest/dg/API_GetPolicy.html)  \r\n- [PutFunctionConcurrency](https://docs.aws.amazon.com/lambda/latest/dg/API_PutFunctionConcurrency.html)\r\n- [DeleteFunctionConcurrency](https://docs.aws.amazon.com/lambda/latest/dg/API_DeleteFunctionConcurrency.html)\r\n- [ListTags](https://docs.aws.amazon.com/lambda/latest/dg/API_ListTags.html)    \r\n- [TagResource](https://docs.aws.amazon.com/lambda/latest/dg/API_TagResource.html)\r\n- [UntagResource](https://docs.aws.amazon.com/lambda/latest/dg/API_UntagResource.html)\r\n- GetLayerVersion\r\n- GetLayerVersionByArn\r\n- ListLayerVersions\r\n- DeleteLayerVersion\r\n- AddLayerVersionPermission\r\n- GetLayerVersionPolicy\r\n- RemoveLayerVersionPermission\r\n\r\nThis is a prerequisite for cross-account IAM policy enforcement.\r\n\r\n\r\n### Related\r\n\r\n<https://docs.aws.amazon.com/lambda/latest/dg/access-control-resource-based.html#permissions-resource-xaccountinvoke>\r\n",
        "comments": 5
    },
    {
        "merged": true,
        "additions": 11,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2023-04-25T13:03:14Z",
        "closed_at": "2023-04-27T06:56:42Z",
        "merged_at": "2023-04-27T06:56:41Z",
        "body": "## Issue\r\nWith the release of 2.0, specifically with #7927, we completely refactored the way LocalStack is built.\r\nTogether with this change, the pre-installation of LPM packages has been removed in order to further decrease the Docker image size (and lazy-loading them on-demand when the respective service needs a specific package).\r\n\r\nUnfortunately, some users are facing issues with DynamoDB, one of the most used services of LocalStack:\r\n- #8192\r\n- #8100\r\n- #8058\r\n- #8054\r\n\r\nThis only affects the Community Docker image, `localstack/localstack-pro` always contained DynamoDB (as well as other packages).\r\n\r\n## Solution\r\nAfter some internal discussions, we came to the conclusion that it might be the best approach to:\r\n- Pre-ship the LocalStack Community Docker image with all packages necessary to run the most used (top 15) services out-of-the-box (i.e. without the necessity to download any packages on demand).\r\n- If there is a high request for a minimum Docker image, we might introduce a `slim` variant of the image in the future (which then does not contain any preinstalled packages).\r\n\r\n## Implications\r\nAnalysis of the Docker image size increase due to this change:\r\n```\r\n$ make docker-build\r\n...\r\n$ docker tag localstack/localstack:latest localstack/localstack:ddb\r\n$ docker pull localstack/localstack\r\n...\r\n$ docker inspect localstack/localstack | jq \".[0].Size\"                                                                                                                                                                               1075345104\r\n$ docker inspect localstack/localstack:ddb | jq \".[0].Size\"                                                                                                                                                                          \r\n1132873716\r\n```\r\nThe uncompressed image size will increase by `1132873716 - 1075345104 = 57528612 bytes = ~55MB`.\r\n\r\n```\r\n$ docker save localstack/localstack:latest | gzip > image-wo-ddb.tar.gz\r\n$ docker save localstack/localstack:ddb | gzip > image-w-ddb.tar.gz\r\n$ ls -lh | grep image | awk -v OFS='\\t' '{print $9, $5}'                                                                                                                                                                     \r\nimage-w-ddb.tar.gz\t371M\r\nimage-wo-ddb.tar.gz\t324M\r\n```\r\nThe compressed image size increases by **~47MB**.\r\nThe lack of compression is not too surprising, considering the fact that the JAR files are already compressed ZIP files.",
        "comments": 8
    },
    {
        "merged": true,
        "additions": 7,
        "deletions": 18,
        "changed_files": 1,
        "created_at": "2023-04-24T16:06:30Z",
        "closed_at": "2023-05-03T14:04:57Z",
        "merged_at": "2023-05-03T14:04:57Z",
        "body": "Remove comments and reintroduce the usage of virtual host addressing in S3 CORS tests. These were in place because at some point, it seemed like it reduced test failures that were finally fixed with #8134\r\n\r\nAlso remove some commented out code.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 21,
        "deletions": 10,
        "changed_files": 2,
        "created_at": "2023-04-24T12:21:24Z",
        "closed_at": "2023-04-25T21:57:54Z",
        "merged_at": "2023-04-25T21:57:54Z",
        "body": "Follow up from #8160 to not raise a TypeError if the wrong parameters are passed to a DynamoDB Table in a cloudformation template. \r\nI am not sure how to add negative testing for CloudFormation, but I tried against AWS with `test_default_name_for_table` and not specifying a `ProvisionedThroughput` and it fails. \r\n\r\nSee https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-dynamodb-table.html#cfn-dynamodb-table-provisionedthroughput",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 2,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-04-24T09:01:04Z",
        "closed_at": "2023-04-30T10:55:11Z",
        "merged_at": null,
        "body": "Add types for mediaconvert client\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2023-04-24T05:04:26Z",
        "closed_at": "2023-04-24T06:38:33Z",
        "merged_at": "2023-04-24T06:38:33Z",
        "body": "# \ud83d\ude80 ASF Update Report \ud83d\ude80\nThis PR has been automatically generated to update the generated API stubs for our ASF services.\nIt uses the latest code-generator from the _master_ branch ([scaffold.py](https://github.com/localstack/localstack/blob/master/localstack/aws/scaffold.py)) and the latest _published_ version of [botocore](https://github.com/boto/botocore) to re-generate all API stubs which are already present in the `localstack.aws.api` module of the _master_ branch.\n\n## \ud83d\udd04 Updated Services\nThis PR updates the following services:\n- lambda-\n- s3\n\n## \ud83d\udc77\ud83c\udffd Handle this PR\nThe following options describe how to interact with this PR / the auto-update:\n\n\u2714\ufe0f **Accept Changes**\nIf the changes are satisfying, just squash-merge the PR and delete the source branch.\n\n\ud83d\udeab **Ignore Changes**\nIf you want to ignore the changes in this PR, just close the PR and *do not delete* the source branch. The PR will not be opened and a new PR will not be created for as long as the generated code does not change (or the branch is deleted). As soon as there are new changes, a new PR will be created.\n\n\u270f\ufe0f **Adapt Changes**\n*Don't do this.* The APIs are auto-generated. If you decide that the APIs should look different, you have to change the code-generation.\n\n\u23f8\ufe0f **Pause Updates**\nRemove the cron-schedule trigger of the GitHub Action workflow which creates these PRs. The action can then still be triggered manually, but it will not be executed automatically.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 562,
        "deletions": 223,
        "changed_files": 11,
        "created_at": "2023-04-23T17:47:30Z",
        "closed_at": "2023-05-02T13:31:54Z",
        "merged_at": "2023-05-02T13:31:54Z",
        "body": "## Changes\r\nThis PR introduces support for the python3.10 runtime recently released by AWS.\r\n\r\nhttps://aws.amazon.com/blogs/compute/python-3-10-runtime-now-available-in-aws-lambda/\r\n\r\nFixes #8185",
        "comments": 12
    },
    {
        "merged": false,
        "additions": 306,
        "deletions": 4,
        "changed_files": 4,
        "created_at": "2023-04-21T18:04:09Z",
        "closed_at": "2023-06-21T18:53:01Z",
        "merged_at": null,
        "body": "This partially addresses #8172\r\n\r\nIt appeared S3 was not returning a checksum when requested, or would not copy the source object's checksum if not provided. This PR fixes that.\r\n\r\nThat is not enough for #8172 as moto's check when copying objects are wrong. There's a test in this PR that is xfail demonstrating the behaviour. This is not fixable by patching, so I'll open a PR upstream with the change I'm already working on, and will open new PR then here de-xfailing the test and adding more cases.\r\n\r\nedit: this is a temporary fix, as moto has been working on adding and saving checksum in `FakeKey`, which will allow us to remove our own fixes in the provider. Until then (and until we update moto too, I'm going to open the PR for the `CopyObject` overhaul upstream), our fix here will provide this functionality.",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 21,
        "deletions": 8,
        "changed_files": 2,
        "created_at": "2023-04-21T11:44:11Z",
        "closed_at": "2023-04-21T12:49:48Z",
        "merged_at": "2023-04-21T12:49:47Z",
        "body": "This PR slightly adjusts the special message encoding for SQS which has been introduced with #5298.\r\n\r\nWith #5298, an SQS specific serializer has been introduced which performs a special escaping logic for the node text content in the XML responses. This is only done by SQS, and since it's a very rare practice, it's not supported by any popular XML serialization libraries.\r\n\r\n#8002 raised the issue that this behavior causes issues when these escaping sequences are used in the sent message itself.\r\nA message `\"&quot;&quot;\"` sent would be received as `\"\"\"\"`.\r\n\r\nThis was due to the nature of the initial implementation:\r\n- These special characters have been escaped before the ElementTree serialization was performed: `\"&quot;&quot;\"` ==> `&quot;&quot;&quot;&quot;`\r\n- The escape sequence itself contains characters which are escaped in XML (specifically `&`): `&quot;` ==> `&amp;quot;&amp;quot;&amp;quot;&amp;quot;`\r\n- A post-serialization step removed the double-escaping: `&amp;quot;&amp;quot;&amp;quot;&amp;quot;` ==> `&quot;&quot;&quot;&quot;`\r\n- The client performs the unescape: `&quot;&quot;&quot;&quot;` ==> `\"\"\"\"`\r\n\r\nWith this PR, the special escaping is done after the XML node is serialized:\r\n- The special characters in the text are \"marked\" (which is just another form of internal escaping): `\"&quot;&quot;\"` ==> `__marker__\"__marker__&quot;&quot;__marker__\"__marker__`\r\n  - The \"marking\" is necessary to identify exactly those special characters within the completely serialized message, without taking any other occurrences of these special characters into account.\r\n- The message is serialized by the XML serializer: `__marker__\"__marker__&quot;&quot;__marker__\"__marker__` ==> `__marker__\"__marker__&amp;quot;&amp;quot;__marker__\"__marker__`\r\n- A post-serialization step replaces the marked special characters with their escape sequence: `__marker__\"__marker__&amp;quot;&amp;quot;__marker__\"__marker__` ==> `&quot;&amp;quot;&amp;quot;&quot;`\r\n- The client performs the unescape: `&quot;&amp;quot;&amp;quot;&quot;` ==> `\"&quot;&quot;\"`\r\n\r\nThis approach now would not work if the \"marked\" / internally escaped representation of the character is used in the raw message. f.e. a message `\"__marker__\"__marker\"` would be received as `\"\"\"`.\r\nHowever, the only approach I can think of right now to properly implement this would be to avoid the specific pre- and post-processing and this could only be done by fixing the serialization itself (i.e. implementing our own XML serialization).\r\nI'm happy for any feedback or ideas!\r\n\r\nFixes #8002.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 503,
        "deletions": 7,
        "changed_files": 3,
        "created_at": "2023-04-21T10:06:22Z",
        "closed_at": "2023-04-24T11:51:24Z",
        "merged_at": "2023-04-24T11:51:23Z",
        "body": "## Motivation\r\n\r\nPublishing image versions from image lambdas is currently broken, as we access the wrong code object.\r\n\r\n## Changes\r\n* Fix access to codesha256\r\n* Add test for versioning image lambdas\r\n* Add dependency of `test_image` fixture to `login_docker_client` fixture, to correctly login (login fixture was previously unused, it seems)",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 112,
        "deletions": 10,
        "changed_files": 3,
        "created_at": "2023-04-21T07:59:23Z",
        "closed_at": "2023-04-24T11:09:46Z",
        "merged_at": "2023-04-24T11:09:46Z",
        "body": "This issue was encountered by a user when updating an `AWS::SSM::Parameter` resource which included a tag and resulted in the following exception:\r\n\r\n```\r\nbotocore.exceptions.ClientError: An error occurred (ValidationException) when calling the PutParameter operation: Invalid request: tags and overwrite can't be used together. To create a parameter with tags, please remove overwrite flag. To update tags for an existing parameter, please use AddTagsToResource or RemoveTagsFromResource.\r\n```\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 65,
        "deletions": 18,
        "changed_files": 4,
        "created_at": "2023-04-20T18:25:58Z",
        "closed_at": "2023-04-21T17:09:29Z",
        "merged_at": "2023-04-21T17:09:29Z",
        "body": "Follow up from #7866, we now allow optional parameters to not be present for a bucket CORS configuration. Validated against AWS.\r\n\r\nfixes #8173 ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 19,
        "deletions": 75,
        "changed_files": 6,
        "created_at": "2023-04-19T11:48:47Z",
        "closed_at": "2023-04-21T07:22:51Z",
        "merged_at": "2023-04-21T07:22:51Z",
        "body": "This PR contains the following changes:\r\n- It adds OpenSearch 2.5 to the list of supported OpenSearch versions.\r\n- It changes the default version of OpenSearch from 2.3 to 2.5 (as it is currently for AWS).\r\n- It removes a previous limitation of AWS Kinesis Data Firehose which was initially not compatible with OpenSearch 2+.\r\n  - This was previously stated in the upgrade docs but has now vanished: https://docs.aws.amazon.com/opensearch-service/latest/developerguide/version-migration.html\r\n  - The docs of AWS Kinesis Data Firehose also don't show any limitations: https://docs.aws.amazon.com/firehose/latest/dev/create-destination.html#create-destination-elasticsearch\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 42,
        "deletions": 0,
        "changed_files": 4,
        "created_at": "2023-04-19T07:35:04Z",
        "closed_at": "2023-04-21T13:00:13Z",
        "merged_at": "2023-04-21T13:00:13Z",
        "body": "This PR is for issue #8027. While creating the stack name, there was no validation done. This PR implements the validation functionality for the CreateStack operation.\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 299,
        "deletions": 15,
        "changed_files": 4,
        "created_at": "2023-04-18T17:15:34Z",
        "closed_at": "2023-04-19T21:52:12Z",
        "merged_at": "2023-04-19T21:52:12Z",
        "body": "Enhance parity for ACM certificates issued for wildcard subdomains . Addresses https://github.com/localstack/localstack/issues/8156\r\n\r\nWith the changes in this PR, the following TF script deploys successfully (confirmed that it was hanging indefinitely before):\r\n```\r\nresource \"aws_route53_zone\" \"this\" {\r\n  name = \"example.com\"\r\n}\r\n\r\nmodule \"acm\" {\r\n  source  = \"terraform-aws-modules/acm/aws\"\r\n  version = \"4.3.2\"\r\n\r\n  domain_name         = \"*.example.com\"\r\n  wait_for_validation = true\r\n  zone_id             = aws_route53_zone.this.zone_id\r\n}\r\n\r\ndata \"aws_acm_certificate\" \"this\" {\r\n  depends_on = [module.acm]\r\n\r\n  domain = \"*.example.com\"\r\n}\r\n```\r\n\r\nThe changes are covered by a snapshot test. Overall, the amount of patching we're performing in ACM is becoming a bit ridiculous ;) - probably a candidate for decoupling from moto in the near future as well.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-04-18T16:12:01Z",
        "closed_at": "2023-04-19T10:59:25Z",
        "merged_at": "2023-04-19T10:59:25Z",
        "body": "## Motivation\r\nAny deployment referencing this parameter type fails currently\r\n\r\n## Changes\r\nAdd `AWS::SSM::Parameter::Value<AWS::EC2::Image::Id>` parameter type and use ssm to retrieve it (it is stored in SSM).",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 157,
        "deletions": 10,
        "changed_files": 4,
        "created_at": "2023-04-18T15:51:35Z",
        "closed_at": "2023-04-21T11:07:14Z",
        "merged_at": "2023-04-21T11:07:14Z",
        "body": "Conditional attributes are not completely/correctly resolved during the execution of `add_defaults` method of a GenericBaeseModel. The current patch allows to have a DynamoDB table that has multiple conditional attributes to be deployed.\r\n\r\nThere's more work required to completely fix the issue but with these small changes the amplify-localstack plugin can finally deploy a API stack to LocalStack.\r\n\r\n\r\nChanges:\r\n- [x] Test with a small example of what amplify tries to deploy.\r\n- [x] Move the addition of default parameters to another phase where conditionals are resolved.\r\n\r\n\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 21,
        "deletions": 3,
        "changed_files": 4,
        "created_at": "2023-04-18T13:54:31Z",
        "closed_at": "2023-04-19T12:18:33Z",
        "merged_at": "2023-04-19T12:18:33Z",
        "body": "## Motivation\r\nCurrently, we completely ignore the roles provided with the sns subscription or firehose s3 records integration.\r\n\r\n## Changes\r\nThis PR uses the roles where provided. If it is not provided, we will just fallback to the service principal. This is to remain non-breaking, but we need to increase parity for this at a later point.",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 990,
        "deletions": 410,
        "changed_files": 31,
        "created_at": "2023-04-18T11:52:07Z",
        "closed_at": "2023-05-05T10:41:32Z",
        "merged_at": "2023-05-05T10:41:32Z",
        "body": "\\* Extends https://github.com/localstack/localstack/pull/8033\r\n\r\nThis pr:\r\n- Restructures `service` `state tasks`, with `lambda service state task` and `lambda state task` now benefitting of this change\r\n- Fixes issues for which runtime failures not always lead to execution failure state events being logged\r\n- Fixed issue with result path not updating its target by value\r\n- Fixes relationship between `catch declaration`s and `catchers`\r\n- Fixes `States.TaskFailed` matching task failure (see `todo` for further investigations)\r\n- Adds custom exception decorators for lambda errors\r\n- Adds baseline snapshot tests for lambda exceptions handling in catch declarations",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 1,
        "changed_files": 3,
        "created_at": "2023-04-17T10:50:39Z",
        "closed_at": "2023-04-18T06:46:46Z",
        "merged_at": "2023-04-18T06:46:46Z",
        "body": "Ships a new Lambda init release: https://github.com/localstack/lambda-runtime-init/releases/tag/v0.1.17-pre\r\n\r\n* Addresses a support case where the optional X-Ray daemon telemetry crashed the Lambda Docker container: https://github.com/localstack/lambda-runtime-init/pull/18\r\n* Improves Lambda init logging: https://github.com/localstack/lambda-runtime-init/pull/19\r\n\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-04-17T10:34:47Z",
        "closed_at": "2023-04-18T08:47:12Z",
        "merged_at": "2023-04-18T08:47:12Z",
        "body": null,
        "comments": 2
    },
    {
        "merged": true,
        "additions": 14,
        "deletions": 9,
        "changed_files": 1,
        "created_at": "2023-04-17T09:53:36Z",
        "closed_at": "2023-04-18T16:47:23Z",
        "merged_at": "2023-04-18T16:47:23Z",
        "body": "In some cases the returned network was actually None here, which wasn't really handled anywhere downstream and was also in conflict with the method description. Returning and trying to use the `bridge` network here instead should still be a more sensible default.\r\n\r\n## Changes\r\n- `get_main_container_network` now also returns \"bridge\" when `DOCKER_CLIENT.get_networks` fails",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 5,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-04-17T05:04:20Z",
        "closed_at": "2023-04-17T06:32:58Z",
        "merged_at": "2023-04-17T06:32:58Z",
        "body": "# \ud83d\ude80 ASF Update Report \ud83d\ude80\nThis PR has been automatically generated to update the generated API stubs for our ASF services.\nIt uses the latest code-generator from the _master_ branch ([scaffold.py](https://github.com/localstack/localstack/blob/master/localstack/aws/scaffold.py)) and the latest _published_ version of [botocore](https://github.com/boto/botocore) to re-generate all API stubs which are already present in the `localstack.aws.api` module of the _master_ branch.\n\n## \ud83d\udd04 Updated Services\nThis PR updates the following services:\n- events\n\n## \ud83d\udc77\ud83c\udffd Handle this PR\nThe following options describe how to interact with this PR / the auto-update:\n\n\u2714\ufe0f **Accept Changes**\nIf the changes are satisfying, just squash-merge the PR and delete the source branch.\n\n\ud83d\udeab **Ignore Changes**\nIf you want to ignore the changes in this PR, just close the PR and *do not delete* the source branch. The PR will not be opened and a new PR will not be created for as long as the generated code does not change (or the branch is deleted). As soon as there are new changes, a new PR will be created.\n\n\u270f\ufe0f **Adapt Changes**\n*Don't do this.* The APIs are auto-generated. If you decide that the APIs should look different, you have to change the code-generation.\n\n\u23f8\ufe0f **Pause Updates**\nRemove the cron-schedule trigger of the GitHub Action workflow which creates these PRs. The action can then still be triggered manually, but it will not be executed automatically.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 86,
        "deletions": 10,
        "changed_files": 3,
        "created_at": "2023-04-14T21:16:03Z",
        "closed_at": "2023-04-17T21:52:36Z",
        "merged_at": "2023-04-17T21:52:36Z",
        "body": "As reported in #8139, the new S3 provider will decode gzip encoded requests before returning the data.\r\nThis was due to our Proxy and more specifically our `SimpleHttpClient`, which uses `requests` under the hood. Requests automatically decode the response, and we need the raw data underneath. I've duplicated our http client to not do a drastic change and only use it in the virtual host part of S3, we can then see if it creates issues or not \ud83d\ude04\r\n\r\nI didn't add unit tests as I believe it could be added on top of #8104, and don't want to create too many conflicts. \r\n\r\nAbout requests and decoding gzip:\r\nhttps://docs.python-requests.org/en/latest/community/faq/#encoded-data\r\n\r\n_fixes #8139_",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 5,
        "deletions": 5,
        "changed_files": 1,
        "created_at": "2023-04-14T19:27:32Z",
        "closed_at": "2023-04-14T20:32:03Z",
        "merged_at": "2023-04-14T20:32:03Z",
        "body": "#8074 just reintroduced usage of the old client fixture, so fixing this to unblock the pipeline. ",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 202,
        "deletions": 10,
        "changed_files": 4,
        "created_at": "2023-04-14T18:48:53Z",
        "closed_at": "2023-04-18T19:32:31Z",
        "merged_at": "2023-04-18T19:32:31Z",
        "body": "While working on #8144 and #8145 I've spotted 2 issues with deduplication on FIFO SQS queues.\r\n\r\nFirst, it seemed we did not deduplicate deleted messages when the SQS documentation says they do.\r\nSee https://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/using-messagededuplicationid-property.html\r\n\r\nWhile reading this, I've also realised that what I thought was a feature of SQS was actually a bug, and that we should deduplicate on the queue level and not the `MessageGroupId`. However, this means breaking persistence as we're changing the structure of the `FifoQueue` object. Is this acceptable for 2.1?\r\n\r\nI've added 2 AWS validated tests, and #8144 is building on this PR. ",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 297,
        "deletions": 43,
        "changed_files": 3,
        "created_at": "2023-04-14T18:19:14Z",
        "closed_at": "2023-04-19T10:38:00Z",
        "merged_at": "2023-04-19T10:38:00Z",
        "body": "This is building on top of #8144 and #8146, and adds test and implement the deduplication for FIFO topics. Right now, we are just properly using the SQS deduplication features, but SNS one is a bit different regarding the `MessageGroupId`, see https://docs.aws.amazon.com/sns/latest/dg/fifo-message-dedup.html, the deduplication is at the topic level. \r\nWe are also not storing the deduplication ID yet, so we cannot return the proper `MessageId` and `SequenceNumber` from the publishing call, which we should do. ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 139,
        "deletions": 96,
        "changed_files": 4,
        "created_at": "2023-04-14T18:12:27Z",
        "closed_at": "2023-04-17T21:51:54Z",
        "merged_at": "2023-04-17T21:51:54Z",
        "body": "This PR continues on #8029. I actually only fixed the DLQ behaviour for FIFO topics for `publish_batch` and not for a simple `publish`.\r\n\r\nI've also refactored our way of passing argument to the SQS client in the publisher, to allow reuse between the regular SQS publisher and the batch one, also when sending it down the DLQ. \r\n\r\nI've also removed `create_sqs_message_attributes` as it was a remnant from the `ProxyListener`, and now ASF properly decodes and casts the `MessageBodyAttributeMap` into the right format. It might have been the issue for https://discuss.localstack.cloud/t/i-have-been-stuck-on-binascii-error-incorrect-padding-not-sure-if-it-is-an-error/297 but not sure yet, anyway, after testing, it was not used anymore.\r\n\r\nThere's a follow up PR building on this to test and implement deduplication for FIFO topic, see #8145 \r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 7,
        "deletions": 3,
        "changed_files": 2,
        "created_at": "2023-04-14T17:33:55Z",
        "closed_at": "2023-04-17T13:19:57Z",
        "merged_at": "2023-04-17T13:19:57Z",
        "body": "Changes:\r\n- [x] Update Firehose Client in SNS Publisher \r\n- [X] Update S3 Client in Firehose Provider ",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 157,
        "deletions": 16,
        "changed_files": 5,
        "created_at": "2023-04-13T14:20:21Z",
        "closed_at": "2023-04-24T12:31:22Z",
        "merged_at": "2023-04-24T12:31:22Z",
        "body": "Reintroduces changes made with #7045\r\n\r\n## Motivation\r\nWe still need to properly extract the account id from the IAM access key id, and its already encoded properly in there.\r\nOn the first try, we encountered issues with users having real AWS credentials in their environment, which led to several problems, as suddenly they were using multi account.\r\n\r\n## Changes\r\n* Access key IDs returned by LocalStack return, if not explicitly disabled, start with an `L` instead of an `A`. So, for account `000000000000` a user access key would be `LKIAQAAAAAAALILNVHFS` instead of `AKIAQAAAAAAALILNVHFS`. This allows us to distinguish AWS credentials from LocalStack credentials, while leaving the rest of the access key id format identical.\r\n* These access key IDs are changed back to start with an A before moto processes them, as moto does a lookup by equality of the whole string\r\n\r\nThis depends on getmoto/moto#6210 for a bugfix affecting the tests.",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 105,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-04-13T12:41:58Z",
        "closed_at": "2023-06-06T14:38:26Z",
        "merged_at": "2023-06-06T14:38:26Z",
        "body": "Add basic performance tests for Lambda. The main idea is to have an initial version of reproducible tests within the IDE.\r\nI looked into the dedicated `performance` directory under tests but they do not integrate with pytest nor can they leverage the convenient test utils such as fixtures, running against external LocalStack, etc.\r\n\r\n## Initial results\r\n\r\nInitial results and basic plotting scripts are available at https://github.com/joe4dev/localstack-performance-testing/\r\n\r\nThe preliminary results support that warm starts are pretty fast around 17ms (min) to 77ms (p99) on macOS but even faster on Linux.\r\nCold starts seem pretty slow 3.3s (min) to 7.5s (p99) on macOS with Docker compared to 700ms (min) to 870ms (p99) on Linux in host mode. Daniel's summary of `tests.integration.awslambda.test_lambda_performance.test_invoke_cold_start`:\r\n\r\n```\r\n==================== EXECUTION TIME (s) for 100 repetitions ====================\r\n0.6990477449999162 (min), 0.7632910385000287 (median), 0.8729619503100002 (p99), 0.8846987280003304 (max)\r\n```\r\n\r\n* Something makes cold starts slow on macOS with Docker compared to host mode, where the execution time goes back to normal ~880 ms. Maybe copying causes slowdown, maybe particularly in multi-arch environments \ud83e\udd14 \r\n* Related to the invocation loop rework, when using `LAMBDA_KEEPALIVE_MS=0` to trigger cold starts, it appears that no new environments are spawned while the previous environment de-provisions. Therefore, the cold start test adds a setup delay `sleep_s = 4` between invocations. This slows down the cold start test, making it run for ~13 min.\r\n\r\n## Published numbers\r\n\r\n* [LocalStack release blog](https://localstack.cloud/blog/2023-03-29-announcing-localstack-2.0-general-availability/): \"800 - 1000ms from the old docker executor to around 10ms for a simple Lambda invocation with an Echo function.\"\r\n* [Lambda Provider Behavioral Changes](https://docs.localstack.cloud/references/lambda-provider-v2/): \"10ms warm-start and 600ms cold-start for an Echo Python Lambda\"\r\n\r\nThese numbers are based on Daniel's benchmarking before the v2 release (see [Lambda Knowledge Base](https://www.notion.so/localstack/Lambda-Knowledge-Base-73d652ded2bd45cf9545860ca3d8764f?pvs=4#5448da714ad14ea8a3166ff4ffdd4fc0)).\r\n\r\n```\r\nOld without pro:\r\ndocker: 1.2s\r\ndocker-reuse: Cold 1s, warm 400ms\r\ndocker-reuse hot: Cold 1s, warm 80ms\r\nlocal: cold 400ms, warm 60ms\r\n\r\nNew:\r\ncold 600ms, warm 10ms\r\n```\r\n\r\n## Preliminary Plot initial results\r\n\r\n> **Disclaimer:** This plot mainly shows a limitation for investigation on macOS with Docker and is not representative of the actual performance LocalStack can achieve!\r\n\r\n![invoke_time](https://user-images.githubusercontent.com/8161292/231809338-6168920b-33d6-4014-aee3-51efd5cc5923.png)\r\n\r\n|    | label                   |   level_1 |   time_seconds |\r\n|---:|:------------------------|----------:|---------------:|\r\n|  0 | v1_docker               |      0    |      1.73869   |\r\n|  1 | v1_docker               |      0.5  |      1.81394   |\r\n|  2 | v1_docker               |      0.95 |      1.91334   |\r\n|  3 | v1_docker               |      0.99 |      2.51415   |\r\n|  4 | v1_docker               |      1    |      2.68338   |\r\n|  5 | v2_docker_cold          |      0    |      3.84627   |\r\n|  6 | v2_docker_cold          |      0.5  |      4.94845   |\r\n|  7 | v2_docker_cold          |      0.95 |      5.81013   |\r\n|  8 | v2_docker_cold          |      0.99 |      6.47774   |\r\n|  9 | v2_docker_cold          |      1    |      6.9414    |\r\n| 10 | v2_docker_cold_arm64    |      0    |      4.77397   |\r\n| 11 | v2_docker_cold_arm64    |      0.5  |      5.20489   |\r\n| 12 | v2_docker_cold_arm64    |      0.95 |      6.15666   |\r\n| 13 | v2_docker_cold_arm64    |      0.99 |      7.23966   |\r\n| 14 | v2_docker_cold_arm64    |      1    |      7.56599   |\r\n| 15 | v2_docker_cold_virtiofs |      0    |      4.1032    |\r\n| 16 | v2_docker_cold_virtiofs |      0.5  |      4.98274   |\r\n| 17 | v2_docker_cold_virtiofs |      0.95 |      6.54635   |\r\n| 18 | v2_docker_cold_virtiofs |      0.99 |      8.11454   |\r\n| 19 | v2_docker_cold_virtiofs |      1    |      8.20455   |\r\n| 20 | v2_docker_warm          |      0    |      0.0184816 |\r\n| 21 | v2_docker_warm          |      0.5  |      0.0330957 |\r\n| 22 | v2_docker_warm          |      0.95 |      0.0498648 |\r\n| 23 | v2_docker_warm          |      0.99 |      0.0772281 |\r\n| 24 | v2_docker_warm          |      1    |      0.0792853 |\r\n| 25 | v2_docker_warm_arm64    |      0    |      0.0178109 |\r\n| 26 | v2_docker_warm_arm64    |      0.5  |      0.0293759 |\r\n| 27 | v2_docker_warm_arm64    |      0.95 |      0.0434178 |\r\n| 28 | v2_docker_warm_arm64    |      0.99 |      0.0632035 |\r\n| 29 | v2_docker_warm_arm64    |      1    |      0.0748119 |\r\n| 30 | v2_host_cold_arm64      |      0    |      0.736802  |\r\n| 31 | v2_host_cold_arm64      |      0.5  |      0.804289  |\r\n| 32 | v2_host_cold_arm64      |      0.95 |      0.925292  |\r\n| 33 | v2_host_cold_arm64      |      0.99 |      1.00363   |\r\n| 34 | v2_host_cold_arm64      |      1    |      1.08274   |\r\n| 35 | v2_host_cold_linux      |      0    |      0.680633  |\r\n| 36 | v2_host_cold_linux      |      0.5  |      0.768912  |\r\n| 37 | v2_host_cold_linux      |      0.95 |      0.853735  |\r\n| 38 | v2_host_cold_linux      |      0.99 |      0.893655  |\r\n| 39 | v2_host_cold_linux      |      1    |      1.09164   |",
        "comments": 7
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2023-04-13T10:11:57Z",
        "closed_at": "2023-04-18T15:04:24Z",
        "merged_at": "2023-04-18T15:04:24Z",
        "body": "Recently, a CORS test continuously fails in CI, while it is not reproducible locally:\r\nThis PR aims at fixing this issue and unblocking the community pipeline.\r\n\r\nThis happens by disabling access to the threadlocal stored access key id before it is being set in the Authorization Header Injector.\r\n\r\nEdit: It turns out that the flaky tests were caused by an invalid fallback to a thread-local. Details can be found in the great writeup of @dfangl: https://github.com/localstack/localstack/pull/8134#issuecomment-1512906567\r\nThis was an absolute great catch, thanks @dfangl and @bentsku for digging into this!",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 139,
        "deletions": 61,
        "changed_files": 2,
        "created_at": "2023-04-13T09:29:43Z",
        "closed_at": "2023-04-13T10:38:26Z",
        "merged_at": "2023-04-13T10:38:26Z",
        "body": "This PR refactors the GitHub pipeline which runs the integration tests from LocalStack Community against LocalStack Pro.\r\nIt contains the following changes:\r\n- The test run has been parallelized. Two groups of tests are executed in parallel using `pytest-split`.\r\n- The GitHub token permissions are explicitly set, which fixes pipelines executed by DependaBot due to [dependabot's permission model](https://docs.github.com/en/code-security/dependabot/working-with-dependabot/automating-dependabot-with-github-actions#changing-github_token-permissions) and the permissions needed by the [test reporting GitHub action](https://github.com/EnricoMi/publish-unit-test-result-action#permissions).\r\n  - Should fix the pipelines triggered by #8123.\r\n\r\n\r\nEdit: I forgot to mention in the description that the push trigger for the master branch on this pipeline has been removed. This means that the Community Integration Tests against Pro are only executed on PRs and if manually triggered from now on. This can easily be reverted by re-introducing the following trigger:\r\n```yaml\r\n  push:\r\n    paths:\r\n      - \".github/workflows/test-pro.yml\"\r\n      - \"localstack/**\"\r\n      - \"tests/**\"\r\n      - \"setup.py\"\r\n      - \"pyproject.toml\"\r\n      - \"setup.cfg\"\r\n      - \"Dockerfile\"\r\n      - \"Dockerfile.rh\"\r\n      - \"docker-compose.yml\"\r\n      - \"bin/**\"\r\n    branches:\r\n      - master\r\n```",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 73,
        "deletions": 37,
        "changed_files": 3,
        "created_at": "2023-04-13T08:26:49Z",
        "closed_at": "2023-04-19T13:28:11Z",
        "merged_at": "2023-04-19T13:28:11Z",
        "body": "This PR refactors the script `upload_raw_test_metrics_and_coverage.py` so it can be used for uploading the results for the pro-version as well. \r\n\r\nThe script will pick the meta-data (for the `tests_raw_builds.datasource`) using the ENVs that are set in the corresponding environment (CircleCI or Github).\r\n\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 500,
        "deletions": 72,
        "changed_files": 4,
        "created_at": "2023-04-13T08:16:01Z",
        "closed_at": "2023-04-17T09:58:34Z",
        "merged_at": "2023-04-17T09:58:34Z",
        "body": null,
        "comments": 3
    },
    {
        "merged": true,
        "additions": 341,
        "deletions": 15,
        "changed_files": 5,
        "created_at": "2023-04-13T03:38:12Z",
        "closed_at": "2023-04-14T14:10:32Z",
        "merged_at": "2023-04-14T14:10:32Z",
        "body": "As reported in #8118, there was an issue with confirming a subscription from a simple http client, because we would use the region from the context, which was using the default region of LocalStack (set from the auth handler `MissingAuthHeaderInjector`). However, we should use the region from the `TopicARN`. I've re-validated the tests against AWS with a local setup with https://localhost.run, and could validate different behaviours that were untested. This adds more parity into our HTTP subscriptions, and fix the linked issue. \r\n\r\nAlso, I've sneaked a little store change to get the parity needed. This should not break persistence nor cloud pods as tokens are usually short lived, and it is more additive. We won't try to get a topic ARN anymore from this dict, so it would not create error per se. \r\n\r\n_fixes #8118_",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 31,
        "deletions": 10,
        "changed_files": 5,
        "created_at": "2023-04-12T15:17:06Z",
        "closed_at": "2023-04-26T16:33:59Z",
        "merged_at": "2023-04-26T16:33:59Z",
        "body": "## Motivation\r\nIAM Enforcement for assuming roles can be enabled in -ext now, so it makes sense to actually send the relevant data with assume role requests.\r\n\r\nFor lambda in particular, the creation of a function already fails when assuming the role does not work, it does not fail later.\r\n\r\n## Changes\r\n* Send source service if provided when creating a client for a role using the new client factory\r\n* Check if a role can be assumed by lambda before creating the function. This can only be properly tested with IAM enforcement on, so no point doing so in this repo.",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2023-04-12T13:23:13Z",
        "closed_at": "2023-04-13T12:35:49Z",
        "merged_at": "2023-04-13T12:35:49Z",
        "body": "Bumps python from 3.10.10-slim-buster to 3.10.11-slim-buster.\n\n\n[![Dependabot compatibility score](https://dependabot-badges.githubapp.com/badges/compatibility_score?dependency-name=python&package-manager=docker&previous-version=3.10.10-slim-buster&new-version=3.10.11-slim-buster)](https://docs.github.com/en/github/managing-security-vulnerabilities/about-dependabot-security-updates#about-compatibility-scores)\n\nDependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.\n\n[//]: # (dependabot-automerge-start)\n[//]: # (dependabot-automerge-end)\n\n---\n\n<details>\n<summary>Dependabot commands and options</summary>\n<br />\n\nYou can trigger Dependabot actions by commenting on this PR:\n- `@dependabot rebase` will rebase this PR\n- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it\n- `@dependabot merge` will merge this PR after your CI passes on it\n- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it\n- `@dependabot cancel merge` will cancel a previously requested merge and block automerging\n- `@dependabot reopen` will reopen this PR if it is closed\n- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually\n- `@dependabot ignore this major version` will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot ignore this minor version` will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot ignore this dependency` will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)\n\n\n</details>",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 30,
        "changed_files": 2,
        "created_at": "2023-04-12T10:33:03Z",
        "closed_at": "2023-04-13T15:30:30Z",
        "merged_at": "2023-04-13T15:30:30Z",
        "body": "infra calls make up about ~5% of our telemetry traffic. This PR removes them because\r\n- I can't think of any usage in the current state\r\n- lazy loading can be assumed, eager loading could be interesting but would ideally need slightly different calls\r\n- less calls => better scaling",
        "comments": 3
    },
    {
        "merged": false,
        "additions": 15,
        "deletions": 6,
        "changed_files": 1,
        "created_at": "2023-04-12T09:39:54Z",
        "closed_at": "2023-06-05T07:57:28Z",
        "merged_at": null,
        "body": "Fixes https://github.com/localstack/localstack/issues/8089",
        "comments": 8
    },
    {
        "merged": true,
        "additions": 127,
        "deletions": 125,
        "changed_files": 3,
        "created_at": "2023-04-12T09:05:33Z",
        "closed_at": "2023-04-13T12:38:28Z",
        "merged_at": "2023-04-13T12:38:28Z",
        "body": "- add transformers for kms \r\n- eliminate skipped mac, signatures, key arn and key ids \r\n- validate results against AWS",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 158,
        "deletions": 8,
        "changed_files": 8,
        "created_at": "2023-04-12T08:36:06Z",
        "closed_at": "2023-04-13T07:19:43Z",
        "merged_at": "2023-04-13T07:19:43Z",
        "body": "One of the core foundations of ASF are the generated API classes based on the service specifications contained in the latest `botocore` package. These generated APIs are contained in the `localstack.aws.api` module and are updated on a weekly basis by the [\"Update ASF APIs\"](https://github.com/localstack/localstack/actions/workflows/asf-updates.yml) workflow.\r\n\r\nUnfortunately, these updates can cause problems if the signature of the generated APIs change, but the corresponding provider method signatures - implementing the abstract generated API methods - are not adjusted.\r\nThis also caused issues with our parity metric collection in the past. /cc @steffyP \r\n\r\nFor example, the latest run of the [Update ASF APIs last Monday](https://github.com/localstack/localstack/actions/runs/4654646951) created PR #8106 with recent API changes related to the Lambda Response Streaming (as mentioned by @joe4dev in the PR). This changes the signature of `LambdaApi.create_function_url_config` by adding a new parameter called `invoke_mode`:\r\nhttps://github.com/localstack/localstack/blob/9debbcc15c83727a560c78f336b0cc44dc516cec/localstack/aws/api/lambda_/__init__.py#L1831\r\n\r\nThis breaks the invocation of the implementing provider function in `LambdaProvider.create_function_url_config` if this new parameter is used by a client.\r\n\r\nThis PR contains the following changes:\r\n- b50c0a1db990f53836787160aacc530cfae7581f adds a new unit test which tries to discover all provider classes based on our conventions (classes where the name is ending with `Provider`, contained in modules called `provider`).\r\n  - I was playing around with discovering the provider classes based on the Plux entrypoints, but I was having a hard time collecting _all_ available provider classes. I'm happy for any feedback concerning the simplification of the provider and base class detection.\r\n  - The current approach detects a total of 2383 operation signatures / tests.\r\n  - The execution time seems to be ~15 seconds for all these tests (comparing [the current run of this branch - 2m48s](https://app.circleci.com/pipelines/github/localstack/localstack/14134/workflows/f2de07a1-1a3c-43ae-98c3-1ccd6fd1237d/jobs/105027) - with the [latest run on master - 2m33s](https://app.circleci.com/pipelines/github/localstack/localstack/14129/workflows/96c4e38f-1f84-4ad7-a0d4-de5e2e1fa224/jobs/104994)).\r\n- 7a7f96307d4c8e0767299de9101875ba6f77486d fixes current issues with the provider signatures detected with the unit test.",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 176,
        "deletions": 1,
        "changed_files": 11,
        "created_at": "2023-04-11T16:42:03Z",
        "closed_at": "2023-05-04T14:34:16Z",
        "merged_at": "2023-05-04T14:34:16Z",
        "body": "Based upon the analytics logger, @ackdav and I prototyped a fairly simple usage logger a few weeks ago.\r\n\r\nOne of the constraints for the prototype was to not add further pressure on the analytics backend, so we aggregate all captured data & \"flush the logs\" only on shutdown. This can be somewhat unreliable though, since in some cases the LocalStack instance might not be properly terminated and thus never wait for the shutdown to actually execute.\r\n\r\nA few examples of what kind of information we wanted to collect:\r\n\r\n* Lambda runtimes\r\n* Usage of certain features (e.g. Lambda hot-reloading)\r\n* Supported CloudFormation models\r\n* Unsupported CloudFormation models\r\n\r\nMost of this data can also be captured via structured logging and log aggregation but for our purposes (forwarding to the analytics backend) this seemed impractical. ",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 11,
        "deletions": 3,
        "changed_files": 3,
        "created_at": "2023-04-11T14:13:46Z",
        "closed_at": "2023-04-27T14:13:56Z",
        "merged_at": "2023-04-27T14:13:56Z",
        "body": "This PR makes all test fixtures use a explicit region instead of falling back the region set in system config.\r\n\r\nEarlier, when run locally, the fixtures used the system region to create resources. Later the assertions would query a different region (`us-east-1`) eg. via endpoints as in SQS and fail.",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 161,
        "deletions": 1,
        "changed_files": 3,
        "created_at": "2023-04-11T12:21:14Z",
        "closed_at": "2023-04-12T06:47:18Z",
        "merged_at": "2023-04-12T06:47:18Z",
        "body": "The issue was partially fixed here #8083, but I also need to check the context based on the key type, not only the max allowed plaintext size.\r\n* Added method to validate the plaintext size based on the key type, all those extracted numbers are from [boto3 documentation](https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/kms/client/encrypt.html)\r\n* Add tests cases to the written function\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 32,
        "deletions": 4,
        "changed_files": 1,
        "created_at": "2023-04-11T09:59:01Z",
        "closed_at": "2023-04-11T15:57:13Z",
        "merged_at": "2023-04-11T15:57:13Z",
        "body": "Previously, if _any_ containerd container was running on the host, and LocalStack was started in host mode then it would detect the `containerd` string in the disk partitions, and return True. This is not a great default for host mode, as it binds LocalStack to 0.0.0.0.\n\nThis change searches through the `/proc/1/mountinfo` virtual file system looking for mount options that include `containerd`. This means that only the root mount point is considered, rather than any host mounts that correspond to other containers. After this update, while running a containerd container in the background and starting LocalStack in host mode, the docker status is correctly determined to be False, and LocalStack is bound to 127.0.0.1.\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-04-10T17:49:48Z",
        "closed_at": "2023-04-14T17:31:35Z",
        "merged_at": "2023-04-14T17:31:35Z",
        "body": "This PR adds a small change to use the new AWS Internal Client.\r\nIt does not call `request_metadata` due to the Publisher being able to just send emails without needing an Identity Policy on the address.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2023-04-10T15:09:42Z",
        "closed_at": "2023-04-12T15:58:01Z",
        "merged_at": "2023-04-12T15:58:01Z",
        "body": "In the persistence test logs, we have a few errors calling the `on_before_state_load`. In these hooks, we usually try to stop a server before loading the state. However, we did not check for threads and processes not being `None` (which is the case when we just started the container).\r\n\r\nThe following issue was present for DDB and StepFunctions:\r\n```\r\nline 87, in stop_dynamodb\r\ndocker-run.sh: self._thread.auto_restart = False\r\ndocker-run.sh: AttributeError: 'NoneType' object has no attribute 'auto_restart'\r\n\r\nline 97, in stop_stepfunctions\r\ndocker-run.sh: if PROCESS_THREAD or not PROCESS_THREAD.process:\r\ndocker-run.sh: AttributeError: 'NoneType' object has no attribute 'process'\r\n```\r\n\r\nCould be replicated by:\r\n- starting LocalStack with `PERSISTENCE=1`;\r\n- create a DDB table;\r\n- restart again with `PERSISTENCE=1`;\r\n- call any DDB operation.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 93,
        "deletions": 1,
        "changed_files": 3,
        "created_at": "2023-04-10T05:05:55Z",
        "closed_at": "2023-04-11T10:52:50Z",
        "merged_at": "2023-04-11T10:52:50Z",
        "body": "# \ud83d\ude80 ASF Update Report \ud83d\ude80\nThis PR has been automatically generated to update the generated API stubs for our ASF services.\nIt uses the latest code-generator from the _master_ branch ([scaffold.py](https://github.com/localstack/localstack/blob/master/localstack/aws/scaffold.py)) and the latest _published_ version of [botocore](https://github.com/boto/botocore) to re-generate all API stubs which are already present in the `localstack.aws.api` module of the _master_ branch.\n\n## \ud83d\udd04 Updated Services\nThis PR updates the following services:\n- config\n- ec2\n- lambda-\n\n## \ud83d\udc77\ud83c\udffd Handle this PR\nThe following options describe how to interact with this PR / the auto-update:\n\n\u2714\ufe0f **Accept Changes**\nIf the changes are satisfying, just squash-merge the PR and delete the source branch.\n\n\ud83d\udeab **Ignore Changes**\nIf you want to ignore the changes in this PR, just close the PR and *do not delete* the source branch. The PR will not be opened and a new PR will not be created for as long as the generated code does not change (or the branch is deleted). As soon as there are new changes, a new PR will be created.\n\n\u270f\ufe0f **Adapt Changes**\n*Don't do this.* The APIs are auto-generated. If you decide that the APIs should look different, you have to change the code-generation.\n\n\u23f8\ufe0f **Pause Updates**\nRemove the cron-schedule trigger of the GitHub Action workflow which creates these PRs. The action can then still be triggered manually, but it will not be executed automatically.",
        "comments": 3
    },
    {
        "merged": false,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2023-04-10T01:58:46Z",
        "closed_at": "2023-04-12T13:24:02Z",
        "merged_at": null,
        "body": "[![Mend Renovate](https://app.renovatebot.com/images/banner.svg)](https://renovatebot.com)\n\nThis PR contains the following updates:\n\n| Package | Type | Update | Change |\n|---|---|---|---|\n| python | final | digest | `2425b3b` -> `6ba3f89` |\n| python | stage | digest | `2425b3b` -> `6ba3f89` |\n\n---\n\n### Configuration\n\n\ud83d\udcc5 **Schedule**: Branch creation - \"before 3am on Monday\" (UTC), Automerge - At any time (no schedule defined).\n\n\ud83d\udea6 **Automerge**: Disabled by config. Please merge this manually once you are satisfied.\n\n\u267b **Rebasing**: Whenever PR becomes conflicted, or you tick the rebase/retry checkbox.\n\n\ud83d\udd15 **Ignore**: Close this PR and you won't be reminded about these updates again.\n\n---\n\n - [ ] <!-- rebase-check -->If you want to rebase/retry this PR, check this box\n\n---\n\nThis PR has been generated by [Mend Renovate](https://www.mend.io/free-developer-tools/renovate/). View repository job log [here](https://app.renovatebot.com/dashboard#github/localstack/localstack).\n<!--renovate-debug:eyJjcmVhdGVkSW5WZXIiOiIzNS40MC4wIiwidXBkYXRlZEluVmVyIjoiMzUuNDAuMCJ9-->\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 472,
        "deletions": 74,
        "changed_files": 14,
        "created_at": "2023-04-10T00:15:06Z",
        "closed_at": "2023-04-21T14:15:08Z",
        "merged_at": "2023-04-21T14:15:08Z",
        "body": "## Motivation\r\nThis PR upgrades werkzeug to 2.2.3, and the dependents flask and quart, that were pinned in https://github.com/localstack/localstack/pull/6514\r\n\r\nThe changes since werkzeug 2.1.2 had the following effects:\r\n* groups in regex host matchers must be non-capturing, otherwise they break. this was a problem in opensearch and s3, and also the `PortConverter` regex. things like `(.*).` in rules matchers need to be changed to `(?:.*).`\r\n* `_request_ctx_stack` used to set the request context for flask and quart was removed\r\n* `/<path:path>` matchers no longer remove trailing slashes. previously `/foo/` and `/foo` would both lead to the `path` being passed to be `foo`, now it is `foo/` and `foo` respectively.\r\n\r\n## Changes\r\nThe PR does the following:\r\n* adds several tests that cover the changed behavior\r\n* fixes our request context handlers to the flask/quart refactoring (thanks to @alexrashed for his solution in #7274, mine was wrong)\r\n* simplifies the opensearch endpoint matchers using the corrected `PortConverter`, to review by @alexrashed \r\n* reworked the `S3VirtualHostProxyHandler` a bit, and made some other minor s3 changes, to review by @bentsku \r\n  * changes the `AWS_REGION_REGEX` to use non-capturing groups\r\n  * simplifies the regex to match domains and ports\r\n  * inject the `Proxy` instance as dependency so we can unit test the implementation\r\n* use `PortConverter` for s3-website regex\r\n* `rstrip(\"/\")` the path before it goes into the op router matcher so we get the old behavior\r\n* tiny fix in s3 website to remove a redundant trailing slash\r\n\r\n## Learnings for the next time slashes come back to haunt us\r\n\r\n* `GreedyPathConverter` is needed to make `/mybucket//mykey` match the rule `/<Bucket>/<path:Key>`, such that `Key=/mykey`. \r\n* the line `path = path.rstrip(\"/\")` in `RestServiceOperationRouter.match` is needed because without it, in combination with the `GreedyPathConverter`, `/mybucket/` would match the rule `/<Bucket>/<path:Key>` instead of `/<Bucket>`, which lead to calls like `GET /mybucket/` being detected as `GetObject` with `Key=''` instead of `ListObjects` (bucket operation)\r\n* URI matching in smithy is explained in https://smithy.io/2.0/spec/http-bindings.html#uri, but there are no examples for the greedy labels for the special cases with trailing slashes or prefix slashes in patterns (like the first example `/mybucket//mykey`). however it states that \"trailing slashes are ignored\", which substantiates that the `rstrip` call in match is OK\r\n",
        "comments": 12
    },
    {
        "merged": false,
        "additions": 161,
        "deletions": 1,
        "changed_files": 3,
        "created_at": "2023-04-09T23:55:05Z",
        "closed_at": "2023-04-11T12:11:12Z",
        "merged_at": null,
        "body": "The issue was partially fixed here #8083, but I also need to check the context based on the key type, not only the max allowed plaintext size.\r\n* Added method to validate the plaintext size based on the key type, all those extracted numbers are from [boto3 documentation](https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/kms/client/encrypt.html)\r\n* Add tests cases to the written function\r\n",
        "comments": 7
    },
    {
        "merged": true,
        "additions": 55,
        "deletions": 97,
        "changed_files": 1,
        "created_at": "2023-04-09T18:56:08Z",
        "closed_at": "2023-04-19T18:13:23Z",
        "merged_at": "2023-04-19T18:13:23Z",
        "body": "This PR simplifies the implementation of the asgi/wsgi bridge fundamental `HTTPRequestEventStreamAdapter`.\r\n\r\nThe adapter exposes and underlying `ASGIReceiveCallable` as a synchronous IO stream which we later plug into the werkzeug request object. Previously we had separate implementations of `read`, `readline`, and `readlines`, and did not use any base abstraction. However, `RawIOBase` already provides generic implementations of these methods over `readinto`. So I removed all of the special implementations and replaced them with a generic `readinto` implementation.\r\n\r\nThe drawback is that the generic implementations are not optimized, and require a buffered reader to be used (for instance, `readline` will always call `readinto` with a buffer size of 1, which causes very poor performance).\r\n",
        "comments": 7
    },
    {
        "merged": true,
        "additions": 29,
        "deletions": 10,
        "changed_files": 3,
        "created_at": "2023-04-07T10:19:37Z",
        "closed_at": "2023-04-07T12:06:53Z",
        "merged_at": "2023-04-07T12:06:53Z",
        "body": "- Fixed error message for decrypt when the key id is different from the one used in encryption\r\n- Added a test case to verify the changes\r\n- Removed old AWS client for test case: `test_error_messaging_for_invalid_keys`",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 66,
        "deletions": 1,
        "changed_files": 10,
        "created_at": "2023-04-07T10:16:35Z",
        "closed_at": "2023-05-03T12:00:01Z",
        "merged_at": "2023-05-03T12:00:01Z",
        "body": "This PR contains the following changes:\r\n- It renames some of the existing GitHub workflow files (in order to somewhat categorize them).\r\n- It adds two more workflows:\r\n  - `.github/workflows/pr-enforce-pr-labels.yml`\r\n    - This workflow enforces that **every single PR** has to be labeled with exactly one of the following three labels: `semver: major`, `semver: minor`, `semver: patch`.\r\n  - `.github/workflows/pr-enforce-bugfix-master.yml`\r\n    - This workflow enforces that (just like now) only PRs which contain patches (non-breaking, no new features) can be merged.\r\n    - This means that when this workflow is enabled, PRs which have been labeled either with `semver: minor` or `semver: major` are **rejected**.\r\n    - If we decide that we open the master branch for features, we can disable this workflow (or rewrite it such that we block PRs labeled with `semver: major`).",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 91,
        "deletions": 33,
        "changed_files": 6,
        "created_at": "2023-04-07T09:48:36Z",
        "closed_at": "2023-04-13T08:07:47Z",
        "merged_at": "2023-04-13T08:07:47Z",
        "body": "This PR makes SQS queues resolve based on the account ID and region in the queue URL.\r\n\r\nPreviously this was based on request context.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 32,
        "deletions": 0,
        "changed_files": 3,
        "created_at": "2023-04-07T06:15:39Z",
        "closed_at": "2023-04-07T07:50:49Z",
        "merged_at": "2023-04-07T07:50:49Z",
        "body": "- validate length of data to be encrypted \r\n- add test case to check this condition \r\n\r\nRelated issue #8083 ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 18,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2023-04-06T17:30:58Z",
        "closed_at": "2023-04-06T20:15:20Z",
        "merged_at": "2023-04-06T20:15:20Z",
        "body": "This PR fixes the issue reported in #8090.\r\n\r\n### Issue\r\n\r\nThe flow is the following:\r\n- request received as virtual host addressed : Host = `pictures.s3.localhost.localstack.cloud`\r\n- the S3 CORS handler does its job correctly\r\n- service name parser wrongly attributes this request to the service named `pi` because the host starts with `pi`\r\n- the general CORS handler thinks it's not an S3 request and reject the request without taking into account S3 CORS config\r\n\r\n\r\nNote that this issue could arise as well with any bucket name starting with an AWS service with an endpoint prefix, like `kmstest` or anything (you can play with the added test to see everything that would break). This did not affect functionality directly, as the request would be correctly routed to the right service in the end because it would be matched on the service router, but it greatly interfere with the CORS handler.\r\n\r\n### Solution\r\n\r\nI've added some checks in the service name parser, to verify that the request is not an S3 request when trying to match on the host. I'm not fond of the `\".s3.\" not in host`, but the only other solution would be to forbid the creation of any S3 bucket with a conflictual name with any AWS service endpoint prefix (which is possible to do too).\r\nI'm open to suggestion as to how to make this better, but it seems to fix the issue for now.\r\n\r\n_fix #8090_\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 243,
        "deletions": 21,
        "changed_files": 4,
        "created_at": "2023-04-06T10:07:26Z",
        "closed_at": "2023-04-07T12:12:38Z",
        "merged_at": "2023-04-07T12:12:38Z",
        "body": "This ticket tries to address a race condition reported in https://github.com/localstack/localstack/issues/8011. \r\n\r\nI was not able to reproduce the issue, but from the stack trace, we see that the issue relates to the `describe-log-groups` operation in moto, where streams are iterated, and apparently modified at the same time. \r\n\r\n* To avoid this issue, I added patches for moto, and make a copy of the streams-dict before iterating it. \r\n* As a quick-win I also implemented support for the `logGroupNamePattern` \r\n* Also addressed https://github.com/localstack/localstack/issues/7850 which is about a missing parameter-support for `logGroupIdentifier` in `describe-log-streams`\r\n* Enhanced tests and improved parity\r\n  * added a patch in `spec-patches.json` to get the `ValidationException` into logs-api (from the specs it should not be raised here, but parity test proofed otherwise)\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 32,
        "deletions": 161,
        "changed_files": 13,
        "created_at": "2023-04-06T09:57:00Z",
        "closed_at": "2023-09-26T09:35:53Z",
        "merged_at": "2023-09-26T09:35:53Z",
        "body": "## Motivation\r\nThis PR contains all changes necessary to upgrade our Python version for the runtime from 3.10 to 3.11.\r\n\r\n## Changes\r\n- Update all CircleCI runners (which use Python 3.11 by default).\r\n- Update all GitHub actions to install Python 3.11 instead of Python 3.10.\r\n- Install `libsnappy-dev` instead of `libsasl2-dev` when running against Pro (see changes there for a detailed explanation).\r\n- Update the dockerfile base image to the latest sha digest of Python 3.11.5.\r\n- Update all references to virtual environments which contain the Python version (f.e. `/usr/lib/localstack/python-packages/lib/python3.11/site-packages`).\r\n- Remove the SSL proxy (it's not used in Community anymore and the used library - `python-proxy` - is not maintained and not compatible with 3.11).\r\n- Update dill to a Python 3.11 compatible version.\r\n- Update the Lambda Runtime version used for local execution (in the runtime of LocalStack itself) from 3.10 to 3.11.\r\n\r\n## Impact\r\nThis PR only updates the runtime version of LocalStack itself. The LocalStack CLI will still be compatible with Python 3.7+.\r\nHowever, [Python Initialization Hooks](https://docs.localstack.cloud/references/init-hooks/) and [LocalStack Extensions](https://docs.localstack.cloud/references/localstack-extensions/) will then run in a Python 3.11 environment instead of Python 3.10.\r\n\r\n## TODO:\r\n- [x] Analyze Podman tests (unrelated)\r\n- [x] Ensure compatibility with LocalStack Pro before merging this PR.",
        "comments": 7
    },
    {
        "merged": true,
        "additions": 124,
        "deletions": 19,
        "changed_files": 3,
        "created_at": "2023-04-06T09:03:45Z",
        "closed_at": "2023-04-07T05:13:43Z",
        "merged_at": "2023-04-07T05:13:43Z",
        "body": "- fixed error messaging for encrypt, decrypt, sign, verify signatures, generate and verify mac, etc. \r\n- added test case for parity between AWS and LS to verify error message when invalid key id is passed to operations  ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 18,
        "deletions": 1,
        "changed_files": 3,
        "created_at": "2023-04-06T08:18:29Z",
        "closed_at": "2023-04-07T08:47:50Z",
        "merged_at": "2023-04-07T08:47:50Z",
        "body": "We have recently seen flaky tests (on a new test environment which uses private GitHub runners). These tests failed due to request timeout errors within the Docker SDK client.\r\n\r\nSome research led to an issue report in `docker-py`: https://github.com/docker/docker-py/issues/2266\r\nAccording to these reports, these issues might be associated with the Docker daemon on the machine, and that it sometimes can happen that spawning a container takes a long time (i.e. longer than the default timeout of 60 seconds).\r\n\r\nSince the Docker client is quite essential, and maybe some users are also facing issues like this in high-load scenarios, this PR introduces a config variable which allows globally setting the default timeout (in seconds) for the Docker SDK client.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 199,
        "deletions": 4,
        "changed_files": 4,
        "created_at": "2023-04-05T13:28:12Z",
        "closed_at": "2023-04-06T10:49:04Z",
        "merged_at": "2023-04-06T10:49:04Z",
        "body": "## Motivation\r\nUntil now, the DeleteImportedKeyMaterial operation was missing.\r\n\r\n## Changes\r\n* Add, at least for External origin keys, some state handling. Keys with External origin are per default in `PendingImport` state (https://docs.aws.amazon.com/kms/latest/developerguide/importing-keys-create-cmk.html). Encrypt/decrypt operation cannot be done while in this state (https://docs.aws.amazon.com/kms/latest/developerguide/key-state.html)\r\n* Set ExpirationModel correctly\r\n* When deleting the key material, set the state to PendingImport again, and remove the key. (Any operation with that key will fail as it will be none, but this should be guarded by the state handling).",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 6,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-04-05T09:06:30Z",
        "closed_at": "2023-04-05T12:00:01Z",
        "merged_at": null,
        "body": "This PR is used to debug current issues with the \"Update Docker Hub Description\" action, which is currently failling.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 274,
        "deletions": 0,
        "changed_files": 5,
        "created_at": "2023-04-05T06:29:12Z",
        "closed_at": "2023-04-14T18:32:46Z",
        "merged_at": "2023-04-14T18:32:46Z",
        "body": "Update policy PR for issue #7963 ",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 16,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-04-04T21:35:39Z",
        "closed_at": "2023-04-05T13:41:54Z",
        "merged_at": "2023-04-05T13:41:54Z",
        "body": "We currently don't detect containers running in containerd correctly. containerd does not set the same docker file or cgroup values as docker does/did.\n\nThis was triggered by a user issue: https://github.com/localstack/localstack/issues/8035\n\nI was able to recreate this by running containerd on Linux, or adding a beta feature of Docker Desktop on macOS.\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 318,
        "deletions": 525,
        "changed_files": 22,
        "created_at": "2023-04-04T17:19:54Z",
        "closed_at": "2023-04-09T04:42:36Z",
        "merged_at": "2023-04-09T04:42:36Z",
        "body": "Another iteration of replacing `*_client` with  `aws_client`. This time the focus is on replacing parameters in fixtures.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 206,
        "deletions": 3,
        "changed_files": 3,
        "created_at": "2023-04-04T16:09:07Z",
        "closed_at": "2023-04-04T17:46:43Z",
        "merged_at": "2023-04-04T17:46:43Z",
        "body": "As reported in https://github.com/localstack/localstack/issues/7975#issuecomment-1495698212, we have an issue while returning a `minimumCompressionSize` when set to an empty string. The docs states:\r\n> To enable compression, apply a replace operation with the accompanying value property set to a non-negative integer between 0 and 10485760. To disable compression, apply a replace operation with the value property set to null or omit the value property.\r\n\r\nhttps://docs.aws.amazon.com/apigateway/latest/api/patch-operations.html#UpdateRestApi-Patch\r\n\r\nApparently, an empty string works as well. I've added the validation + type casting of either `int` or `None` when disabled, but we're not actually enforcing this as a feature, only mocking this value, so no changes down the line.\r\n\r\nIf we updated the RestAPI with an empty string, we would return it in the response and the client would fail parse that response. This is now fixed. \r\n\r\n_fix #7975_",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 7,
        "deletions": 7,
        "changed_files": 5,
        "created_at": "2023-04-04T15:40:24Z",
        "closed_at": "2023-04-04T17:46:51Z",
        "merged_at": null,
        "body": "## Description\r\n\r\nThis PR switches from the [feature coverage](https://docs.localstack.cloud/user-guide/aws/feature-coverage/) page to the [API coverage](https://docs.localstack.cloud/references/coverage/) to make more sense to the users!",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 11,
        "deletions": 8,
        "changed_files": 5,
        "created_at": "2023-04-04T14:56:09Z",
        "closed_at": "2023-04-11T15:06:17Z",
        "merged_at": "2023-04-11T15:06:17Z",
        "body": "Enterprise environments often use HTTP(S) proxies but LocalStack-internal AWS clients fail since boto3 migrated from requests to urllib3 and dropped support for `NO_PROXY` (https://github.com/boto/boto3/issues/3179).\r\n\r\nThis PR disables proxies for LocalStack-internal AWS calls and migrates Lambda (new provider) to the new AWS client (introduced in https://github.com/localstack/localstack/pull/7240).\r\n\r\n## Issue\r\n\r\nThe following minimal configuration now fails against LocalStack:\r\n\r\n```\r\nHTTP_PROXY=http://mycompany.us-east-1.mycorp.com:3587\r\nNO_PROXY = .s3.localhost.localstack.cloud,127.0.0.1,*.localhost\r\n```\r\n\r\nFor example when trying to create any Lambda function via `awslocal lambda create-function ...`, an exception occurs:\r\n**Hint:** For testing the setup, use [mitmproxy](https://mitmproxy.org/) and `HTTP_PROXY=http://localhost:8080`\r\n\r\n```\r\nbotocore.exceptions.ProxyConnectionError: Failed to connect to proxy URL: \"http://mycompany.us-east-1.mycorp.com:3587\"\r\n```\r\n\r\n* We recommend `NO_PROXY` in our FAQ to fix connectivity issues in the BigData image: https://docs.localstack.cloud/getting-started/faq/#how-do-i-resolve-connection-issues-with-proxy-blocking-access-to-localstacks-bigdata-image\r\n\r\nThe issue came up in LocalStack Pro support.\r\n\r\n## Explored Solutions\r\n\r\n`NO_PROXY` supports a list of hosts to selectively disable any proxy configured through HTTP_PROXY\r\nExample:\r\n`NO_PROXY = .s3.localhost.localstack.cloud,127.0.0.1,*.localhost`\r\n\r\nHowever,  we can only disable proxies entirely through botocore configuration: https://boto3.amazonaws.com/v1/documentation/api/latest/guide/configuration.html\r\n\r\nAFIAK, the underlying urllib3 also does not offer a configuration to disable selected hosts from active proxies: https://urllib3.readthedocs.io/en/stable/advanced-usage.html\r\n\r\n## Implemented Solution\r\n\r\nDisable all proxies for LocalStack-internal calls because proxying them never makes sense for customers.\r\nIf we want to use mitmproxy for debugging LocalStack-internal AWS calls, we would need to add `\"http\": \"http://localhost:4566\"` to the proxies config. We could make this configurable if there is high demand among LocalStack developers.\r\n\r\n## Workaround\r\n\r\nI tested the `NO_PROXY` configuration from our [FAQ](https://docs.localstack.cloud/getting-started/faq/#how-do-i-resolve-connection-issues-with-proxy-blocking-access-to-localstacks-bigdata-image) documentation again and discovered that even a more generic version (without the s3 subdomain) `NO_PROXY=localhost.localstack.cloud,127.0.0.1,*.localhost` works against both, the old stack and new AWS client without this fix \ud83e\udd14 \r\n\r\nI don't know exactly why because it got removed from [boto3](https://github.com/boto/boto3/issues/3179#issuecomment-1069709605) and is not implemented in [urllib3](https://github.com/search?q=repo%3Aurllib3%2Furllib3+no_proxy&type=code) used by boto3.",
        "comments": 4
    },
    {
        "merged": false,
        "additions": 14,
        "deletions": 2,
        "changed_files": 3,
        "created_at": "2023-04-04T12:27:38Z",
        "closed_at": "2023-04-05T09:15:49Z",
        "merged_at": null,
        "body": "Adds the types we're using for our typed client factory as dev dependencies\r\n\r\nPackages have been extracted from this file here:\r\nhttps://github.com/localstack/localstack/blob/2e86662f01a450396027982aadceac0006f89bd6/localstack/utils/aws/client_types.py#L4-L10\r\n\r\n\r\nThey're now also installed when running `make install` but I'm also open to move it to a separate target instead :thinking: \r\n\r\n\r\n/cc @pinzon ",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 4,
        "changed_files": 1,
        "created_at": "2023-04-04T12:09:22Z",
        "closed_at": "2023-04-04T17:49:31Z",
        "merged_at": "2023-04-04T17:49:31Z",
        "body": "Update Lambda code owners as discussed with @dominikschubert ",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 18,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-04-04T09:37:36Z",
        "closed_at": "2023-04-04T11:19:57Z",
        "merged_at": "2023-04-04T11:19:57Z",
        "body": "Noticed a few missing clients when migrating the tests in -ext\r\n\r\n\r\nAdds types for the following clients:\r\n\r\n- `dms`\r\n- `efs`\r\n- `elasticache`\r\n- `fis`\r\n- `kinesisanalytics`\r\n- `kinesisanalyticsv2`",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-04-04T08:40:36Z",
        "closed_at": "2023-04-05T07:06:13Z",
        "merged_at": "2023-04-05T07:06:13Z",
        "body": "With the release of `localstack-core==2.0.0`, we had a slight hiccup where the entrypoints were missing in the distribution (hence the `2.0.0.post1` release on PyPi).\r\n\r\nThis PR adds some simple quality gates to avoid publishing distributions without entrypoints.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 8,
        "deletions": 4,
        "changed_files": 2,
        "created_at": "2023-04-04T07:06:56Z",
        "closed_at": "2023-04-04T08:22:27Z",
        "merged_at": "2023-04-04T08:22:27Z",
        "body": "Fixes https://github.com/localstack/localstack/issues/8044",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 65,
        "deletions": 13,
        "changed_files": 6,
        "created_at": "2023-04-03T22:55:10Z",
        "closed_at": "2023-04-05T13:24:42Z",
        "merged_at": "2023-04-05T13:24:42Z",
        "body": "Implements #8053 ",
        "comments": 5
    },
    {
        "merged": true,
        "additions": 59,
        "deletions": 37,
        "changed_files": 4,
        "created_at": "2023-04-03T20:14:25Z",
        "closed_at": "2023-04-04T05:57:37Z",
        "merged_at": "2023-04-04T05:57:37Z",
        "body": "Since PyCharm still can't properly detect the imported pytest plugins from localstack, we'll just duplicate the actual fixture definition across the two repos.\r\n\r\nThe core logic behind the client creation has been moved to `util.py` and is re-used across these client fixture definitions.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 113,
        "deletions": 1,
        "changed_files": 3,
        "created_at": "2023-04-03T19:57:16Z",
        "closed_at": "2023-04-04T17:58:24Z",
        "merged_at": "2023-04-04T17:58:24Z",
        "body": "As reported in #8034, there would be an error down the line when trying to publish delivery logs when using `MessageStructure=\"json\"`. It's because we would pass a `dict` instead of `str` to calculate the md5 hash of the body, because we didn't filter the fields of the received JSON message. In the docs, it's specified that if the field isn't a string, it will be ignored by AWS: https://docs.aws.amazon.com/sns/latest/api/API_Publish.html\r\n\r\nThis PR now properly filters the fields, and add some tests to validate the behaviour with AWS.\r\n\r\n_fixes #8034_",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 50,
        "deletions": 18,
        "changed_files": 7,
        "created_at": "2023-04-03T17:40:12Z",
        "closed_at": "2023-04-05T11:13:35Z",
        "merged_at": "2023-04-05T11:13:35Z",
        "body": "This PR adjusts the links that are printed for `not implemented` errors. \r\n\r\nInstead of pointing to our general feature coverage https://docs.localstack.cloud/user-guide/aws/feature-coverage/ they now point to the specific service page of our docs, e.g. https://docs.localstack.cloud/references/coverage/coverage_sqs/ for `sqs`.\r\n\r\n\r\nquestion: \r\ndo all our services have a related page on the docs?\r\nbased on the fact that the docs are auto-generated, I'm assuming that the answer to the question is yes, hence allowing us to link directly to the coverage page of each service \ud83d\ude42 ",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 1030,
        "deletions": 129,
        "changed_files": 19,
        "created_at": "2023-04-03T16:47:42Z",
        "closed_at": "2023-04-18T09:00:37Z",
        "merged_at": "2023-04-18T09:00:37Z",
        "body": "PR for release/v2.1 branch\r\n\r\nChecklist:\r\n- [ ] Moto-ext bump to 4.1.7.post2",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 685,
        "deletions": 4,
        "changed_files": 4,
        "created_at": "2023-04-03T09:44:36Z",
        "closed_at": "2023-04-04T17:08:10Z",
        "merged_at": "2023-04-04T17:08:10Z",
        "body": "- Added support for key specs - HMAC_224, HMAC_256, HMAC_384 and HMAC_512\r\n- Implemented `CreateKey` for hmac, `GenerateMac` and `VerifyMac`\r\n- Write test cases for them \r\n\r\nRelated issue #7736 ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-04-03T09:17:45Z",
        "closed_at": "2023-04-04T07:33:13Z",
        "merged_at": "2023-04-04T07:33:13Z",
        "body": "With the new coverage docs we also show which tests called certain operations.\r\n\r\nThe automated workflow update in the docs repo reveals that there is a subset of tests changing for every run. \r\nThis is likely due to a wrong recording of the raw-metrics. \r\n\r\nThe raw-metrics are recorded and written to a CSV in the teardown of the test case:\r\n* each api call recorded will be considered to belong to that test\r\n* the metrics-collection array will be reset after writing the records to the CSV\r\n* but there might be other tear-down actions afterwards - which would then be considered being part of the next test\r\n\r\nThis PR adds the `trylast` flag to the `pytest_runtest_teardown` which could help making the recorded test metrics more stable. \r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 61,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2023-04-03T05:04:47Z",
        "closed_at": "2023-04-03T06:49:17Z",
        "merged_at": "2023-04-03T06:49:17Z",
        "body": "# \ud83d\ude80 ASF Update Report \ud83d\ude80\nThis PR has been automatically generated to update the generated API stubs for our ASF services.\nIt uses the latest code-generator from the _master_ branch ([scaffold.py](https://github.com/localstack/localstack/blob/master/localstack/aws/scaffold.py)) and the latest _published_ version of [botocore](https://github.com/boto/botocore) to re-generate all API stubs which are already present in the `localstack.aws.api` module of the _master_ branch.\n\n## \ud83d\udd04 Updated Services\nThis PR updates the following services:\n- ec2\n\n## \ud83d\udc77\ud83c\udffd Handle this PR\nThe following options describe how to interact with this PR / the auto-update:\n\n\u2714\ufe0f **Accept Changes**\nIf the changes are satisfying, just squash-merge the PR and delete the source branch.\n\n\ud83d\udeab **Ignore Changes**\nIf you want to ignore the changes in this PR, just close the PR and *do not delete* the source branch. The PR will not be opened and a new PR will not be created for as long as the generated code does not change (or the branch is deleted). As soon as there are new changes, a new PR will be created.\n\n\u270f\ufe0f **Adapt Changes**\n*Don't do this.* The APIs are auto-generated. If you decide that the APIs should look different, you have to change the code-generation.\n\n\u23f8\ufe0f **Pause Updates**\nRemove the cron-schedule trigger of the GitHub Action workflow which creates these PRs. The action can then still be triggered manually, but it will not be executed automatically.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 98,
        "deletions": 9,
        "changed_files": 4,
        "created_at": "2023-04-02T17:45:10Z",
        "closed_at": "2023-04-03T16:47:09Z",
        "merged_at": "2023-04-03T16:47:08Z",
        "body": "This PR adds simple support for the ASGI lifespan protocol for the ASGIAdapter. The change allows you to attach a listener to the ASGIAdapter that can react to lifespan protocol events. See https://asgi.readthedocs.io/en/latest/specs/lifespan.html\r\n\r\nThis is mostly to get rid of the warning messages that have bothered and mislead some users in issues like #8035\r\n\r\nBut in the future, we could potentially use this for improving startup/shutdown routines.\r\n\r\nThe failure case is a bit tedious to test with the fixtures we have, so I decided to skip it for now, since we don't really have a use case for it yet.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-04-01T21:53:41Z",
        "closed_at": "2023-04-02T01:05:22Z",
        "merged_at": "2023-04-02T01:05:22Z",
        "body": "This PR fixes the `AttributeError: 'NoneType' object has no attribute 'service_name'` error occurring when doing any pod operation after the initialization of the S3 provider.\r\n\r\nI am simply adding a guard clause for `context.service` being None, similar to the other S3 handler for CORS (`s3_cors_request_handler`).\r\n\r\nThe error can be simply reproduced with:\r\n```\r\nawslocal s3 mb s3://localstack-bucket\r\nlocalstack pod save file://my-pod\r\n```",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 185,
        "deletions": 204,
        "changed_files": 4,
        "created_at": "2023-04-01T15:50:00Z",
        "closed_at": "2023-04-03T09:03:18Z",
        "merged_at": "2023-04-03T09:03:18Z",
        "body": "So following #8021, #7983 and #7545, I've investigated and made a list of all S3 operations with a different root node name than the specs. Basically, 41 of 44 operations returning an XML body do not follow the specs. Here's the list:\r\n\u274c: wrong name, \ud83d\udfe0: fixed by patches, \u2705: right from the specs\r\n| | Operation | Spec shape | Root tag\r\n|-|-|-|-|\r\n| \u274c| CompleteMultipartUpload | CompleteMultipartUploadOutput | CompleteMultipartUploadResult\r\n| \u274c| CopyObject | CopyObjectOutput | CopyObjectResult\r\n| \u274c| CreateMultipartUpload | CreateMultipartUploadOutput | InitiateMultipartUploadResult\r\n| \ud83d\udfe0| DeleteObjects | DeleteObjectsOutput | DeleteResult\r\n| \u274c| GetBucketAccelerateConfiguration | GetBucketAccelerateConfigurationOutput | AccelerateConfiguration\r\n| \u274c| GetBucketAcl | GetBucketAclOutput | AccessControlPolicy\r\n| \u274c| GetBucketAnalyticsConfiguration | GetBucketAnalyticsConfigurationOutput | AnalyticsConfiguration\r\n| \u274c| GetBucketCors | GetBucketCorsOutput | CORSConfiguration\r\n| \u274c| GetBucketEncryption | GetBucketEncryptionOutput | ServerSideEncryptionConfiguration\r\n| \u274c| GetBucketIntelligentTieringConfiguration | GetBucketIntelligentTieringConfigurationOutput | IntelligentTieringConfiguration\r\n| \u274c| GetBucketInventoryConfiguration | GetBucketInventoryConfigurationOutput | InventoryConfiguration\r\n| \u274c| GetBucketLifecycle | GetBucketLifecycleOutput | LifecycleConfiguration\r\n| \u274c| GetBucketLifecycleConfiguration | GetBucketLifecycleConfigurationOutput | LifecycleConfiguration\r\n| - | GetBucketLocation | GetBucketLocationOutput | LocationConstraint\r\n| \u274c| GetBucketLogging | GetBucketLoggingOutput | BucketLoggingStatus\r\n| \u274c| GetBucketMetricsConfiguration | GetBucketMetricsConfigurationOutput | MetricsConfiguration\r\n| \u274c| GetBucketNotification | NotificationConfigurationDeprecated | NotificationConfiguration\r\n| \u2705| GetBucketNotificationConfiguration | NotificationConfiguration | NotificationConfiguration\r\n| \u274c| GetBucketOwnershipControls | GetBucketOwnershipControlsOutput | OwnershipControls\r\n| \u274c| GetBucketPolicyStatus | GetBucketPolicyStatusOutput | PolicyStatus\r\n| \u274c| GetBucketReplication | GetBucketReplicationOutput | ReplicationConfiguration\r\n| \u274c| GetBucketRequestPayment | GetBucketRequestPaymentOutput | RequestPaymentConfiguration\r\n| \ud83d\udfe0| GetBucketTagging | GetBucketTaggingOutput | Tagging\r\n| \u274c| GetBucketVersioning | GetBucketVersioningOutput | VersioningConfiguration\r\n| \u274c| GetBucketWebsite | GetBucketWebsiteOutput | WebsiteConfiguration\r\n| \u274c| GetObjectAcl | GetObjectAclOutput | AccessControlPolicy\r\n| \u2705| GetObjectAttributes | GetObjectAttributesOutput | GetObjectAttributesOutput\r\n| \u274c| GetObjectLegalHold | GetObjectLegalHoldOutput | LegalHold\r\n| \u274c| GetObjectLockConfiguration | GetObjectLockConfigurationOutput | ObjectLockConfiguration\r\n| \u274c| GetObjectRetention | GetObjectRetentionOutput | Retention\r\n| \ud83d\udfe0| GetObjectTagging | GetObjectTaggingOutput | Tagging\r\n| \u274c| GetPublicAccessBlock | GetPublicAccessBlockOutput | PublicAccessBlockConfiguration\r\n| \u274c| ListBucketAnalyticsConfigurations | ListBucketAnalyticsConfigurationsOutput | ListBucketAnalyticsConfigurationResult\r\n| \u2705| ListBucketIntelligentTieringConfigurations | ListBucketIntelligentTieringConfigurationsOutput | ListBucketIntelligentTieringConfigurationsOutput\r\n| \u274c| ListBucketInventoryConfigurations | ListBucketInventoryConfigurationsOutput | ListInventoryConfigurationsResult\r\n| \u274c| ListBucketMetricsConfigurations | ListBucketMetricsConfigurationsOutput | ListMetricsConfigurationsResult\r\n| \ud83d\udfe0| ListBuckets | ListBucketsOutput | ListAllMyBucketsResult\r\n| \ud83d\udfe0| ListMultipartUploads | ListMultipartUploadsOutput | ListMultipartUploadsResult\r\n| \ud83d\udfe0| ListObjects | ListObjectsOutput | ListBucketResult\r\n| \ud83d\udfe0| ListObjectsV2 | ListObjectsV2Output | ListBucketResult\r\n| \u274c| ListObjectVersions | ListObjectVersionsOutput | ListVersionsResult\r\n| \u274c| ListParts | ListPartsOutput | ListPartsResult\r\n| - | SelectObjectContent | SelectObjectContentOutput | Payload\r\n| \u274c| UploadPartCopy | UploadPartCopyOutput | CopyPartResult\r\n\r\nNote: I've removed `GetBucketLocation` as it's a special case with no root node wrapper, and `SelectObjectContent` as it's a streaming response.\r\n\r\nThis PR implements a fix by directly renaming the root node while still taking advantages of the specs. Previously, modifying the specs would also have effects on the parser where, for example, the shape would already exists (see `GetBucketTagging` and `GetObjectTagging`, both returns a root node with `Tagging` name but the shape is different). Now we can still differentiate for each operations. \r\n\r\nNow, the issue is systematic testing of those operations. I'm confident the new root node names are the right ones, but it would be nice to have replicable tests against AWS. We already have a test in place (`tests.integration.s3.test_s3.TestS3.test_response_structure`) testing some operations (and we can see that removing the patches didn't make the test fail as the new serializer part is now taking care of it).\r\nHowever, as 41 of 44 operations needs to be tested for their XML response, this makes it a bit difficult as you would need to setup the resources to be able to query them afterwards (ex. `GetBucketCorsConfiguration` would need a configuration to be able to be queried). \r\n\r\nwould fix #8030",
        "comments": 3
    },
    {
        "merged": false,
        "additions": 258,
        "deletions": 14,
        "changed_files": 4,
        "created_at": "2023-04-01T07:45:39Z",
        "closed_at": "2023-04-05T06:07:44Z",
        "merged_at": null,
        "body": "As requested by @pinzon in #7963 implement support for the Update operation on IAM policy. I was working on it along with the help of @pinzon. After a few discussions, we decided to make a test that would create a policy for the user/group/role and again deploy a template to update it.  I also tried a test where we are making use of `put_user_policy` for the same user, and that also works fine.\r\n\r\nPerforming this operation on the current implementation of Cfn::IAM models works perfectly fine. So, I think we can conclude that the current implementation supports the Update operation. \r\n\r\nWhat do you think @thrau @pinzon ?",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1845,
        "deletions": 847,
        "changed_files": 36,
        "created_at": "2023-03-31T23:42:39Z",
        "closed_at": "2023-05-02T05:24:46Z",
        "merged_at": "2023-05-02T05:24:46Z",
        "body": "- adds support for States.TaskFailed error handling in aws-sdk task states\r\n- fixes parsing of empty parameters declarations\r\n- fixes assumption of iam roles for snapshot tests\r\n- fixes event reporting for task workflows\r\n- adds error events\r\n- fixes encoding of environment input dumping\r\n- adds small snapshot tests for aws-sdk failing tasks\r\n- fixes the handling of States.Runtime errors,  which cannot be caught",
        "comments": 3
    },
    {
        "merged": false,
        "additions": 5,
        "deletions": 5,
        "changed_files": 2,
        "created_at": "2023-03-31T20:49:41Z",
        "closed_at": "2023-04-01T22:08:43Z",
        "merged_at": null,
        "body": "The response to a CreateMultipartUpload request should contain a root element InitiateMultipartUploadResult. This will align with the AWS API docs and with client libraries that check the root element.\r\n\r\nhttps://github.com/localstack/localstack/issues/8030",
        "comments": 5
    },
    {
        "merged": true,
        "additions": 13,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-03-31T20:29:53Z",
        "closed_at": "2023-03-31T22:43:41Z",
        "merged_at": "2023-03-31T22:43:41Z",
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 103,
        "deletions": 50,
        "changed_files": 5,
        "created_at": "2023-03-31T18:28:33Z",
        "closed_at": "2023-04-02T18:39:58Z",
        "merged_at": "2023-04-02T18:39:58Z",
        "body": "This PR adds the ability to pass a failed message from a FIFO topic down to a FIFO queue. It was failing before because we would not pass the required attributes needed for a FIFO queue, namely `MessageGroupId` and optionally `MessageDeduplicationId`.\r\n\r\nI've also removed some snapshot skipping by adding the `SequenceNumber` attributes to messages published on FIFO topics. Needed to add a field on `SnsMessage`, not very clean to pass the context there, but it feels like the only solution to be able to return that `SequenceNumber` to the `PublishBatch` operation response, it needs to be pre-defined before actually creating the message body. \r\n\r\nI already added the test for this behaviour, so I just removed the `xfail` mark.  ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 125,
        "deletions": 21,
        "changed_files": 4,
        "created_at": "2023-03-31T15:52:28Z",
        "closed_at": "2023-03-31T17:42:27Z",
        "merged_at": "2023-03-31T17:42:27Z",
        "body": "This issue came up in the support channel, we were not handling OR conditions properly.\r\nWe now properly handle combination of OR and AND filters for the `MessageBody` scope. \r\n\r\nI've also added a unit test to properly test the new filter. \r\n\r\nSee: https://docs.aws.amazon.com/sns/latest/dg/and-or-logic.html\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 10,
        "deletions": 5,
        "changed_files": 1,
        "created_at": "2023-03-31T10:23:25Z",
        "closed_at": "2023-04-01T12:45:56Z",
        "merged_at": "2023-04-01T12:45:56Z",
        "body": "Since #7997, there were errors in tests as follows:\r\n\r\nhttps://github.com/localstack/localstack/actions/runs/4567644230/jobs/8061685484#step:18:23986\r\n```\r\n  File \"/home/runner/work/localstack/localstack/localstack-ext/.venv/lib/python3.10/site-packages/moto/utilities/aws_headers.py\", line 64, in _wrapper\r\n    response = f(*args, **kwargs)\r\n  File \"/home/runner/work/localstack/localstack/localstack-ext/.venv/lib/python3.10/site-packages/moto/cloudwatch/responses.py\", line 173, in put_metric_data\r\n    self.cloudwatch_backend.put_metric_data(namespace, metric_data)\r\n  File \"/home/runner/work/localstack/localstack/localstack-ext/.venv/lib/python3.10/site-packages/moto/cloudwatch/responses.py\", line 28, in cloudwatch_backend\r\n    return cloudwatch_backends[self.current_account][self.region]\r\n  File \"/home/runner/work/localstack/localstack/localstack-ext/.venv/lib/python3.10/site-packages/moto/core/base_backend.py\", line 247, in __getitem__\r\n    return super().__getitem__(region_name)\r\nKeyError: 'pluto-central-2a'\r\n```\r\n\r\n`tests.integration.test_stores` which created the SQS queue in non-standard region `pluto-central-2a` uses monkeypatch to enable `MOTO_ALLOW_NONEXISTENT_REGION` in Moto. SQS creates threads to post certain metrics to Cloudwatch. After the test ends, monkeypatch would disable `MOTO_ALLOW_NONEXISTENT_REGION`, but the said thread continues to attempt to put the Cloudwatch metric in that region.\r\n\r\nThe proper long-term solution is not to use monkeypatch and instead set the env var before LS initialises. However our test framework doesn't support this atm.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1337,
        "deletions": 1058,
        "changed_files": 11,
        "created_at": "2023-03-30T22:54:45Z",
        "closed_at": "2023-03-31T15:29:39Z",
        "merged_at": "2023-03-31T15:29:39Z",
        "body": "## Summary\r\n\r\nAdds the connectionId from ws into the request contex, future iterations will make sure the event is contextualised on the API (HTTP vs REST vs WS), but this requires a refactor on the backend integrations.\r\n\r\nAlso, refactors tests and snapshots and moves iam role and policy fixtures to the community.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 6226,
        "deletions": 6588,
        "changed_files": 101,
        "created_at": "2023-03-30T21:16:22Z",
        "closed_at": "2023-04-03T18:14:06Z",
        "merged_at": "2023-04-03T18:14:05Z",
        "body": "Depends on #7984\r\n\r\nRefactors fixture usage in integration tests from:\r\n\r\n```python\r\ndef test_something(lambda_client, logs_client):\r\n    lambda_client.list_functions()\r\n    logs_client.filter_log_events(...)\r\n    ...\r\n```\r\n\r\nto\r\n\r\n```python\r\ndef test_something(aws_client):\r\n    aws_client.awslambda.list_functions()\r\n    aws_client.logs.filter_log_events(...)\r\n    ...\r\n```\r\n\r\nStill need to adapt some of the fixtures in a next PR, but most of the normal test methods should be done by now",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 41,
        "deletions": 7,
        "changed_files": 4,
        "created_at": "2023-03-30T20:06:26Z",
        "closed_at": "2023-03-31T11:16:56Z",
        "merged_at": "2023-03-31T11:16:55Z",
        "body": "No need to introduce this one anymore, same issue as always. Extending #7983\r\n\r\nI think we need to create a small script to test every single S3 operations to check for the XML of the response, and not only what boto returns, or check the documentation of every operation. \r\n\r\nThis addresses #8019 \r\n\r\nFormat in the docs:\r\nhttps://docs.aws.amazon.com/AmazonS3/latest/API/API_GetObjectTagging.html#API_GetObjectTagging_ResponseElements\r\n\r\nFormat from botocore specs:\r\nhttps://github.com/boto/botocore/blob/a77b1766b2e34a55b3c9d3aed89a8d2376a8eed6/botocore/data/s3/2006-03-01/service-2.json#L4920-L4935\r\n",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 53,
        "deletions": 6,
        "changed_files": 2,
        "created_at": "2023-03-30T15:18:22Z",
        "closed_at": "2023-05-12T20:13:16Z",
        "merged_at": null,
        "body": "WIP",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 8,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2023-03-30T10:54:42Z",
        "closed_at": "2023-03-30T18:14:26Z",
        "merged_at": "2023-03-30T18:14:26Z",
        "body": "Adds the `LAMBDA_INIT_RELEASE_VERSION` config variable. This value will override the default version which was previously hard-coded in the lambda service. We still only really support a 1-1 mapping of localstack version to init version (always whatever is set as `LAMBDA_RUNTIME_DEFAULT_VERSION` at the time of the localstack release), but sometimes it's helpful to test an existing container with a newer released init version without updating localstack first.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 0,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2023-03-30T08:36:51Z",
        "closed_at": "2023-03-30T09:50:33Z",
        "merged_at": "2023-03-30T09:50:33Z",
        "body": "Currently we get a deprecation warning shown in docker because we set\nEDGE_BIND_HOST and LOCALSTACK_HOST in the dockerfile. We default to these\nvalues anyway so we don't need them in the Dockerfile any more.\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2023-03-29T20:08:02Z",
        "closed_at": "2023-03-29T22:30:19Z",
        "merged_at": "2023-03-29T22:30:19Z",
        "body": "Depends on https://github.com/localstack/lambda-runtime-init/pull/17\r\n\r\n- [x] Update init after PR above is released",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 17,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-03-29T16:51:14Z",
        "closed_at": "2023-06-13T12:03:51Z",
        "merged_at": null,
        "body": "Trying to increase stability of the environment spawn process. It's a bit of a bandaid until we get around to refactor the invocation loop, but should avoid some of the issues we've been seeing in CI and with infinite environment spawn retries.  \r\n\r\n## Changes\r\n\r\n- start_environment is sync again to avoid multiple spawns for a single invocation if spawning the environment takes longer than a second\r\n- limit number of attempts for starting a new environment when no environment is available",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 7,
        "deletions": 5,
        "changed_files": 2,
        "created_at": "2023-03-29T16:18:16Z",
        "closed_at": "2023-03-29T18:10:07Z",
        "merged_at": "2023-03-29T18:10:07Z",
        "body": "@dfangl noticed that SIGINT is not terminating localstack correctly in docker. this PR makes sure that SIGINT to the supervisor is translated into a SIGTERM to localstack. we tried to forward SIGINT but couldn't quite figure it out. left a todo in there for future daniel and thomas :P\r\n\r\nWe also now use SIGUSR1 instead of SIGHUP to restart LS, to avoid restarting when the shell is closed (it will now just be ignored. We could start terminating, we can discuss if this is expected).\r\n\r\n/cc @alexrashed ",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 36,
        "deletions": 3,
        "changed_files": 2,
        "created_at": "2023-03-29T16:16:43Z",
        "closed_at": "2023-03-29T20:54:41Z",
        "merged_at": "2023-03-29T20:54:41Z",
        "body": "SImply restores parity with the old provider in regards to the CloudWatch metrics we record in the service.\r\n\r\nRecords two metrics (same as the old provider):\r\n\r\n - `Invocations` ... a simple numeric counter. Records 1 for each invocation result (both  success & result)\r\n - `Errors` ... simple numeric counter. Records 1 for each invocation error. This also applies to failed retries\r\n\r\nThe only other change to the old provider here is that we now connect to the correct region when sending the records.\r\n\r\nWould be a cool project to extend this and add proper parity with AWS for all the service level metrics.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 19,
        "deletions": 5,
        "changed_files": 2,
        "created_at": "2023-03-29T14:50:07Z",
        "closed_at": "2023-03-29T16:19:30Z",
        "merged_at": "2023-03-29T16:19:30Z",
        "body": "This PR adds a separate cache dir for the CLI. I saw errors in the log:\r\n\r\n```\r\n[16:16:34] starting LocalStack in Docker mode \ud83d\udc33                                                                                                                                                  localstack.py:142\r\n2023-03-29T16:16:34.656  WARN --- [  MainThread] localstack.utils.functions : error calling function save: [Errno 13] Permission denied: '/home/thomas/.cache/localstack/cli'\r\n```\r\n\r\nbecause `/home/thomas/.cache/localstack` is created by the container. So instead, we now have `/home/thomas/.cache/localstack-cli` which is managed by the cli and won't have permission errors.",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 43,
        "deletions": 5,
        "changed_files": 3,
        "created_at": "2023-03-29T14:46:04Z",
        "closed_at": "2023-03-29T16:50:26Z",
        "merged_at": "2023-03-29T16:50:26Z",
        "body": "## Motivation\r\nSome tools, for example serverless, seem to send the local code hash with them when using publish version. This comparison will fail, since hot-reloading code does not have a proper hash (but a placeholder string).\r\n\r\nRelated comment: https://github.com/localstack/serverless-localstack/pull/215#issuecomment-1488142179\r\n\r\n## Changes\r\n* Skip code hash verification if code is hot reloading + test\r\n* Sneaked in a opensearch test update to make sure the cluster is properly terminated after the test",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 37,
        "deletions": 597,
        "changed_files": 4,
        "created_at": "2023-03-29T13:22:39Z",
        "closed_at": "2023-03-31T11:51:44Z",
        "merged_at": "2023-03-31T11:51:44Z",
        "body": "* removes scripts that have prior been used to create coverage report and aggregate metrics\r\n* adapt tinybird-upload script to take a directory with raw-metrics as input\r\n\r\nTODO:\r\n\r\n- [x] adapt docs script, as we now need to download + handle two raw-metrics-test files https://github.com/localstack/docs/pull/546\r\n- [ ] merge docs pr after successful merge\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 5,
        "deletions": 3,
        "changed_files": 1,
        "created_at": "2023-03-29T11:52:46Z",
        "closed_at": "2023-03-29T13:03:36Z",
        "merged_at": "2023-03-29T13:03:36Z",
        "body": "Small fix in length check for CloudFormation `TemplateBody` - we should only check the length if the body is specified, not if the template is passed via `TemplateURL`. Addresses https://github.com/localstack/localstack/issues/7880 . \r\n\r\nThe main use case is also to get a larger sample prepared for the Developer Hub: https://github.com/aws-samples/query-data-in-s3-with-amazon-athena-and-aws-sdk-for-dotnet\r\n\r\n/cc @HarshCasper ",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 0,
        "deletions": 10,
        "changed_files": 1,
        "created_at": "2023-03-29T09:22:06Z",
        "closed_at": "2023-03-29T10:22:23Z",
        "merged_at": "2023-03-29T10:22:23Z",
        "body": "Removes a small leftover from #7970: The `DISABLE_TERM_HANDLER` env variable handling in the `docker-entrypoint.sh`.\r\nThis feature seems to be a weird feature, LocalStack should just listen to all signals.\r\n\r\nDocs PR: https://github.com/localstack/docs/pull/543",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 47,
        "deletions": 5,
        "changed_files": 4,
        "created_at": "2023-03-29T08:55:53Z",
        "closed_at": "2023-03-29T15:14:57Z",
        "merged_at": "2023-03-29T15:14:57Z",
        "body": "Introduces a new config option `ALLOW_NONSTANDARD_REGIONS` which disables strict validation of AWS regions.\r\n\r\nCloses https://github.com/localstack/localstack/issues/7993",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 5,
        "changed_files": 1,
        "created_at": "2023-03-29T08:22:15Z",
        "closed_at": "2023-03-29T11:12:24Z",
        "merged_at": "2023-03-29T11:12:24Z",
        "body": "We recently experienced a flake with a CLI test on Python 3.11 in a downstream repo.\r\nThe recent changes with the init system further improved the startup time, so I guess the time has come, @thrau! \ud83d\ude80 \ud83e\udd73 \r\n```\r\n    def test_wait_timeout_raises_exception(self, runner, container_client):\r\n        result = runner.invoke(cli, [\"start\", \"-d\"])\r\n        assert result.exit_code == 0\r\n        assert \"starting LocalStack\" in result.output\r\n    \r\n        result = runner.invoke(cli, [\"wait\", \"-t\", \"0.5\"])\r\n        # one day this test will surely fail ;-)\r\n>       assert result.exit_code != 0\r\nE       assert 0 != 0\r\nE        +  where 0 = <Result okay>.exit_code\r\n```\r\nI verified this locally on my machine with a pre-pulled community image (which is the image being used currently for the CLI tests):\r\n```\r\n$ localstack start -d && localstack wait -t 0.5 && echo $?\r\n\r\n     __                     _______ __             __\r\n    / /   ____  _________ _/ / ___// /_____ ______/ /__\r\n   / /   / __ \\/ ___/ __ `/ /\\__ \\/ __/ __ `/ ___/ //_/\r\n  / /___/ /_/ / /__/ /_/ / /___/ / /_/ /_/ / /__/ ,<\r\n /_____/\\____/\\___/\\__,_/_//____/\\__/\\__,_/\\___/_/|_|\r\n\r\n \ud83d\udcbb LocalStack CLI 1.4.1.dev20230215233822\r\n\r\n[10:12:39] starting LocalStack in Docker mode \ud83d\udc33                                                                                                                                                                                                                         \r\n   ...\r\n[10:12:40] detaching                                                                                                                                                                                                                                                      bootstrap.py:694\r\n0\r\n```",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 225,
        "deletions": 41,
        "changed_files": 10,
        "created_at": "2023-03-28T17:45:46Z",
        "closed_at": "2023-03-29T07:28:52Z",
        "merged_at": "2023-03-29T07:28:52Z",
        "body": "Add and improve lambda deprecation warnings:\r\n\r\n* Clarify the API visibility of lambda config (PUBLIC, SEMI-PUBLIC, DEPRECATED, DEV)\r\n* Add deprecated lambda config to deprecation list in `deprecations.py`\r\n* Add proactive logging for the most common issue when Docker is not available\r\n   * `on_after_init` when the lambda provider is loaded through delegation to the runtime executor in `.validate_environment()`\r\n   * When a function is created and `DockerNotAvailable` is raised\r\n   * When a function is invoked but in the state `Pending` or `Failed`\r\n * Add dedicated Exception for `DockerNotAvailable`",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 371,
        "deletions": 217,
        "changed_files": 17,
        "created_at": "2023-03-28T17:14:38Z",
        "closed_at": "2023-08-14T13:11:15Z",
        "merged_at": "2023-08-14T13:11:15Z",
        "body": "Use GATEWAY_LISTEN to bind hypercorn and TCP proxies\r\n\r\n## Changes\r\n\r\n- make the localstack-start-docker-env.sh script more system-agnostic (I run NixOS and `/bin/bash` does not exist). Also the `$VENV_DIR` variable was not honoured in the script.\r\n- the hypercorn gateway now takes a list of `HostAndPort` types, which allows binding to multiple addresses\r\n- the `HostAndPort.parse` method is more powerful (i.e. handles parse errors better)\r\n- start the hypercorn gateway for unpriviliged ports and create TCP proxies for priviliged ports, running as sudo if required\r\n- add a special case for our custom json encoder to handle `HostAndPort` instances\r\n",
        "comments": 5
    },
    {
        "merged": true,
        "additions": 202,
        "deletions": 78,
        "changed_files": 11,
        "created_at": "2023-03-28T16:54:22Z",
        "closed_at": "2023-03-29T14:29:19Z",
        "merged_at": "2023-03-29T14:29:19Z",
        "body": "## Motivation\r\n* Assuming a role and using a client with the returned credentials is a pattern we often need across the code base, especially for the use of service roles or service-linked roles. The new method provides a simple interface to do this in one call.\r\n* To enforce IAM between some services, we need to use the new aws client, and also handle the exceptions (it should fail with a warning, but should not crash anything important if a request fails).\r\n\r\n## Changes\r\n\r\n### connect_to.with_assumed_role\r\nA new method for the aws client factories.\r\n\r\nUsage:\r\n\r\n```python\r\nlogs_client = connect_to\r\n    .with_assumed_role(role_arn=\"arn:aws:iam::000000000000:role/test-role\", service_principal=\"lambda\")\r\n    .logs\r\n```\r\n\r\nThis call will assume the given role as the given service, and return a service level client factory, where various clients can be created using the returned credentials.\r\n\r\nThe assume role call will be done immediately, the other clients instantiated lazily as they are requested.\r\n\r\n### Client migrations\r\n\r\nSeveral important inter-service calls between lambda, sqs and sns are migrated to the new clients.\r\nThis migration is ongoing, and not complete yet.\r\n\r\nDuring this, I silently killed `SYNCHRONOUS_SNS_EVENTS`, as it is scheduled to remove with 2.0 anyway.\r\n\r\n### Fix check if installed check outside of installer lock\r\nThis one is a tricky one.\r\nBasically, we are circumventing the lock if the `is_installed()` method already returns true. But, the default is just checking if a directory is created, which can be true during the installation as well. Moving this entirely behind the lock avoids one thread installing while the other one is checking, and therefore avoids starting incompletely installed dependencies.\r\n\r\nThis seems to be the root cause for the failing `test_kinesis_firehose_elasticsearch_s3_backup` test, which is so annoying. It is basically trying to start elasticsearch while we are still installing plugins -> class loading failure.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 229,
        "deletions": 61,
        "changed_files": 7,
        "created_at": "2023-03-28T11:08:30Z",
        "closed_at": "2023-03-28T16:41:27Z",
        "merged_at": "2023-03-28T16:41:27Z",
        "body": "It seemed we had an issue with `ListObjectsV2` and Glue. Once again, the specs were not right about the root tag of the XML response of S3. However, the responses for `ListObjects` and `ListObjectsV2` are using the same root tag `ListBucketResult` so we must merge the two wrongly named \"containers\" in the specs into one for both operation. \r\n\r\nAlso, I've realized that we merged this from our old S3 migration branch:\r\n```python\r\n# Forces to use S3 ASF provider, while not loading -ext (does not have asf provider)\r\n# TODO: will need to discuss the best way to do this with -ext, this is temporary for testing\r\nif not os.environ.get(\"PROVIDER_OVERRIDE_S3\"):\r\n    os.environ[\"PROVIDER_OVERRIDE_S3\"] = \"asf\"\r\n```\r\n\r\nSo, removing it. \r\nAlso, thanks @silv-io for the hours long debugging session we've had to find this issue \ud83d\ude04 ",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 148,
        "deletions": 14,
        "changed_files": 1,
        "created_at": "2023-03-27T20:26:40Z",
        "closed_at": "2023-04-18T19:34:16Z",
        "merged_at": null,
        "body": "just running to CI with more debug logs to try to understand the flaky S3 CORS which return 404 after creating objects\r\nedit: obviously doesn't fail at that time. Will relaunch tomorrow during the day?",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 295,
        "deletions": 228,
        "changed_files": 9,
        "created_at": "2023-03-27T19:31:34Z",
        "closed_at": "2023-04-03T13:32:29Z",
        "merged_at": "2023-04-03T13:32:29Z",
        "body": "Introduces 3 new fixtures that build upon another\r\n\r\n1. `aws_session` .. can be used to modify the session for all test clients\r\n2. `aws_client_factory` ... can be used if programmatic client creation, a specific region or credentials  are required.\r\n3. `aws_client` ... use for the most common use-case where we previously had to use multiple different clients for each service.\r\n\r\n\r\n```python\r\ndef my_test(sqs_client, lambda_client, logs_client, iam_client, ...):\r\n    sqs_client.create_queue(...)\r\n    lambda_client.create_function(...)\r\n    ...\r\n```\r\n\r\nbecomes\r\n\r\n```python\r\ndef my_test(aws_client):\r\n    aws_client.sqs.create_queue(...)\r\n    aws_client.awslambda.create_function(...)\r\n    ...\r\n```\r\n\r\n\r\n## Changes\r\n- Add new client fixtures (`aws_session`, `aws_client_factory`, `aws_client`)\r\n- Remove old `_client` and a few related methods\r\n- Add new client factory for external AWS clients (non-internal AWS-targeting clients)\r\n\r\n## TODO (other PRs)\r\n- [ ] Remove all `x_client` fixtures and replace with single `aws_client` across integration tests.\r\n- [ ] Remove all `create_external_boto_client` occurences\r\n- [ ] Remove all usage of resource clients in favor of normal clients (e.g. dynamodb or s3)\r\n- [ ] Refactor fixtures in PRO to use the new clients\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 261,
        "deletions": 29,
        "changed_files": 5,
        "created_at": "2023-03-27T19:15:49Z",
        "closed_at": "2023-03-29T12:43:51Z",
        "merged_at": "2023-03-29T12:43:51Z",
        "body": "This is a follow up from #7545, a user reported an issue in our Community Slack. The test is AWS validated, and once again the specs were not compliant with what S3 really returns. \r\n\r\nWe also reapply the logic that was in a patch previously set, moto would have raised an error if using some request parameters that were not implemented. It would raise a `NotImplemented` exception. The previous provider was swallowing the exception and letting it pass anyway without applying the parameters. We can keep the same behaviour for now and come back later and actually implement the right behaviour. \r\n\r\nrelated: #7981, https://github.com/localstack/docs/pull/539\r\n\r\n\\cc @steffyP ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 91,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2023-03-27T17:52:21Z",
        "closed_at": "2023-03-28T17:13:23Z",
        "merged_at": "2023-03-28T17:13:23Z",
        "body": "While checking https://docs.localstack.cloud/references/coverage/coverage_s3, it appeared `ListMultipartUploads` was not implemented. It seems it is, and I've added a test for coverage of that operation.\r\n\r\n\\cc @steffyP @joe4dev ",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-03-27T14:48:09Z",
        "closed_at": "2023-03-27T16:28:05Z",
        "merged_at": "2023-03-27T16:28:05Z",
        "body": "Before this change, the entrypoint script would strip the `LOCALSTACK_` prefix from `LOCALSTACK_HOST` and try to set the `HOST` environment variable to something. This is bad as the `HOST` enviornment variable is reserved for system things, and should not be set.\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-03-27T14:18:57Z",
        "closed_at": "2023-03-27T17:21:50Z",
        "merged_at": "2023-03-27T17:21:50Z",
        "body": "We added `GATEWAY_LISTEN` to our list of configuration variables, so we should track whether this is being used by anyone or not.\n\nIt has been added to the \"track existence but not value\" section because it may leak user internals (though not likely... \ud83d\ude02).\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 10,
        "deletions": 12,
        "changed_files": 5,
        "created_at": "2023-03-27T14:00:22Z",
        "closed_at": "2023-03-27T15:39:02Z",
        "merged_at": "2023-03-27T15:39:02Z",
        "body": "This PR contains some small improvements for the pipeline:\r\n- 9e3f200c715d19103e1bccb4f16b67c007cbc15c: Fixes flaky firehose tests\r\n  - These tests use non-default elasticsearch and opensearch versions, which need to be downloaded on demand (if there's a cache miss). This commit increases the timeout to give it a bit more time to download the versions.\r\n- 9097b82891302bccc95e4a4428d2c75137318982: Avoid using the runtime environment\r\n  - This is just a small cleanup in the pipeline testing the community integration tests against pro.\r\n  - Here the \"environment\" feature is not necessary anymore.\r\n- ce252b2ba2ffd6f688bc10e3c7fc0260634845ff: Fix formatting for ASF updates\r\n  - This fix just removes the replacement of newlines in the PR description of ASF update PRs (as in #7974).\r\n  - This escaping is not necessary anymore when using the EOF-based action output.\r\n  - Uses a new version of `mad9000/actions-find-and-replace-string` after merging / releasing https://github.com/mad9000/actions-find-and-replace-string/pull/11 to avoid the deprecated set-output.\r\n- 9284ffdd03425b65dc082f88e3e3a326134e8d37: Cleanup / fix RenovateBot and CLA assistant config\r\n  - Removes some unnecessary configs in the RenovateBot config file (for non-existing Dockerfiles).\r\n  - Adds bot users to the CLA via a wildcard.\r\n\r\n/cc @thrau ",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 109,
        "deletions": 9,
        "changed_files": 2,
        "created_at": "2023-03-27T05:05:31Z",
        "closed_at": "2023-03-27T07:19:36Z",
        "merged_at": "2023-03-27T07:19:36Z",
        "body": "# \ud83d\ude80 ASF Update Report \ud83d\ude80\nThis PR has been automatically generated to update the generated API stubs for our ASF services.\nIt uses the latest code-generator from the _master_ branch ([scaffold.py](https://github.com/localstack/localstack/blob/master/localstack/aws/scaffold.py)) and the latest _published_ version of [botocore](https://github.com/boto/botocore) to re-generate all API stubs which are already present in the `localstack.aws.api` module of the _master_ branch.\n\n## \ud83d\udd04 Updated Services\nThis PR updates the following services:\n- ec2%0A- ssm%0A\n\n## \ud83d\udc77\ud83c\udffd Handle this PR\nThe following options describe how to interact with this PR / the auto-update:\n\n\u2714\ufe0f **Accept Changes**\nIf the changes are satisfying, just squash-merge the PR and delete the source branch.\n\n\ud83d\udeab **Ignore Changes**\nIf you want to ignore the changes in this PR, just close the PR and *do not delete* the source branch. The PR will not be opened and a new PR will not be created for as long as the generated code does not change (or the branch is deleted). As soon as there are new changes, a new PR will be created.\n\n\u270f\ufe0f **Adapt Changes**\n*Don't do this.* The APIs are auto-generated. If you decide that the APIs should look different, you have to change the code-generation.\n\n\u23f8\ufe0f **Pause Updates**\nRemove the cron-schedule trigger of the GitHub Action workflow which creates these PRs. The action can then still be triggered manually, but it will not be executed automatically.",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2023-03-27T00:42:15Z",
        "closed_at": "2023-03-27T15:48:23Z",
        "merged_at": null,
        "body": "[![Mend Renovate](https://app.renovatebot.com/images/banner.svg)](https://renovatebot.com)\n\nThis PR contains the following updates:\n\n| Package | Type | Update | Change |\n|---|---|---|---|\n| python | final | digest | `2425b3b` -> `6ba3f89` |\n| python | stage | digest | `2425b3b` -> `6ba3f89` |\n\n---\n\n### Configuration\n\n\ud83d\udcc5 **Schedule**: Branch creation - \"before 3am on Monday\" (UTC), Automerge - At any time (no schedule defined).\n\n\ud83d\udea6 **Automerge**: Disabled by config. Please merge this manually once you are satisfied.\n\n\u267b **Rebasing**: Whenever PR becomes conflicted, or you tick the rebase/retry checkbox.\n\n\ud83d\udd15 **Ignore**: Close this PR and you won't be reminded about these updates again.\n\n---\n\n - [ ] <!-- rebase-check -->If you want to rebase/retry this PR, check this box\n\n---\n\nThis PR has been generated by [Mend Renovate](https://www.mend.io/free-developer-tools/renovate/). View repository job log [here](https://app.renovatebot.com/dashboard#github/localstack/localstack).\n<!--renovate-debug:eyJjcmVhdGVkSW5WZXIiOiIzNS4xNC4yIiwidXBkYXRlZEluVmVyIjoiMzUuMjIuMSJ9-->\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 274,
        "deletions": 117,
        "changed_files": 12,
        "created_at": "2023-03-26T22:16:15Z",
        "closed_at": "2023-03-28T22:15:05Z",
        "merged_at": "2023-03-28T22:15:05Z",
        "body": "This PR completely reworks the way the localstack process is started in the container.\r\n\r\nThe original motivation was to implement a way for localstack to actually exit with a proper exit code from inside the container. It turned out to be non-trivial, given several challenges:\r\n\r\n* previously this was not possible. exiting localstack in the container did not work because of how supervisord was used. it just continued to restart localstack\r\n* there is the `exitcodes`and `autorestart=unexpected` configuration in supervisor, but then actually terminating supervisor correctly turned out to also be non-trivial and involve hacking\r\n* removing supervisor would have had significant implications on the \"restart backdoor\" introduced in 2a0a9a0c\r\n* clean shutdown of localstack subprocesses: [Zombie reaping with PID 1](https://blog.phusion.nl/2015/01/20/docker-and-the-pid-1-zombie-reaping-problem/)\r\n\r\n\r\n## Solution\r\n\r\nThe localstack supervisor is a python program that behaves as follows (from the doc)\r\n\r\n```\r\nSupervisor script for managing localstack processes, acting like a mini init system tailored to\r\nlocalstack. This can be used on the host or in the docker-entrypoint.sh.\r\n\r\nThe supervisor behaves as follows:\r\n* SIGHUP to supervisor will terminate the running localstack instance and then start a new localstack instance\r\n* SIGTERM or SIGINT to supervisor will terminate the running localstack instance and then return\r\n* if the localstack instance exits, then the supervisor exits with the same exit code.\r\n```\r\n\r\n`bin/localstack-supervisor.py` is now used in `docker-entrypoint.sh` together with `exec`, which can forward the exit code of localstack without complicated traps and can properly terminate the container.\r\n\r\nThe PR also adds:\r\n* `LocalstackExit` exception that indiciates during the startup procedure that localstack should \r\n* a small main script to run localstack without the localstack CLI: `localstack.runtime.main`.\r\n\r\n\r\n## Effects / Implications\r\n\r\n* Removes supervisord (introduced in bb73d560233c85e712f90f9af55c133b84ce5c72 to start localstack and the webapp in the container)\r\n* localstack can exit with an exit code when started from the container\r\n* The CLI is no longer used to start localstack, progressing our strategy to separate the CLI and runtime\r\n* Significantly simplify the `docker-entrypoint.sh` and signal handling\r\n* localstack will no longer be automatically restarted on failure. I argue below why I think this is fine, but can be easily introduced again\r\n* The restart backdoor now works without brute-force killing all processes in the container. Instead, the new supervisor can be signaled using `SIGHUP` to cleanly restart localstack. This also works outside docker now.\r\n* Removed `/var/lib/logs/localstack_infra.log` (and the stderr equivalent). The log was introduced in #1018 with the `docker-entrypointy.sh`, but seemed unecessary with the new implementation. If people want this behavior back (i.e., the extra log file), we can introduce it in `localstack-supervisor.py` to write to stdout and a logfile. When starting from the CLI, we still have the main container log.\r\n* It removes the signal handler behavior that was changed in #6000 - basically signals to the container are now always propagated to the localstack process. There was no obvious reason why we would want any other behavior.\r\n\r\n## On automatically restarting localstack\r\n\r\nThe original behavior I had implemented was:\r\n\r\n```\r\n* if the localstack instance exits with any of ``NO_RESTART_EXIT_CODES``, then the supervisor exits\r\n* if the localstack instance exits with any other exit code (1, 128, ...) then we restart localstack\r\n```\r\n\r\nbut i decided to remove it because it seems to me that, in most cases, when localstack terminates, there's no obvious motivation to try to restart it. in fact, i've seen instance be in an endless loop of trying to start up localstack when re-trying makes no sense (e.g., import errors).\r\n\r\nif people need this behavior, then we can easily re-introduce it. it's a few lines of code in the localstack-supervisor.py script.\r\n\r\n## How to test\r\n\r\n### From the host:\r\n\r\nstart the supervisor:\r\n\r\n```\r\n.venv/bin/python bin/localstack-supervisor.py\r\n````\r\n\r\nto restart localstack you can:\r\n\r\n* `pkill -HUP -f \"bin/localstack-supervisor.py\"`\r\n* `curl -X POST -H 'Content-Type: application/json' http://localhost:4566/_localstack/health -d '{\"action\":\"restart\"}'`\r\n\r\nto terminate localstack you can:\r\n* press Ctrl+C in the terminal running the localstack-supervisor\r\n* `pkill -f \"bin/localstack-supervisor.py\"`\r\n* `curl -X POST -H 'Content-Type: application/json' http://localhost:4566/_localstack/health -d '{\"action\":\"kill\"}'`\r\n* from anywhere within localstack, call `infra.exit_infra(0)`\r\n* from within the startup procedure, raise a `LocalstackExit` exception. (in the future, we can write handlers that can exit localstack from an HTTP request - but there seems to be no use case for this yet)\r\n\r\n### Using docker\r\n\r\nYou can check that the subprocesses of localstack terminate correctly:\r\n\r\nrun\r\n\r\n```bash\r\nbin/localstack-start-docker-dev.sh\r\n```\r\n\r\nin a new terminal window, you can observe the process tree:\r\n\r\n```bash\r\ndocker exec -it localstack_main bash -c 'watch -n1 ps aux'\r\n```\r\n\r\nYou can start up some processes by running:\r\n```bash\r\nawslocal dynamodb list-tables\r\nawslocal opensearch create-domain --domain-name \"foobar\"\r\n```\r\n\r\nThen, you can HUP the docker process, or follow any of the steps from earlier:\r\n\r\n```bash\r\ndocker kill --signal=HUP localstack_main\r\n```\r\n\r\n## TODO\r\n\r\n- [x] Remove docs introduced in https://github.com/localstack/docs/pull/150\r\n- [ ] Update v2 changelog to describe the change in behavior\r\n- [ ] Document the new behavior\r\n- [x] adapt for localstack-pro\r\n\r\nIn the future, I would like to further separate `bootstrap.py` and `infra.py`. Where `infra.py` is tasked with starting the runtime itself, and `bootstrap.py` is associated with starting localstack from the CLI.\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 95,
        "deletions": 12,
        "changed_files": 2,
        "created_at": "2023-03-25T12:28:33Z",
        "closed_at": "2023-03-25T15:32:06Z",
        "merged_at": "2023-03-25T15:32:06Z",
        "body": "This PR fixes a race condition in the service plugin loading, where multiple concurrent calls to `service_manager.require(...)` could lead to Service plugins being instantiated more than once, and subsequently `on_after_init` being called multiple times, whose implementation often mutates global state.\r\n\r\nWe haven't seen this manifest yet, other an exception in the logs when running `tests/integration/test_terraform.py::TestTerraform::test_bucket_exists`:\r\n\r\n```\r\n2023-03-24T17:22:07.962 ERROR --- [   asgi_gw_5] localstack.utils.functions : error calling function on_after_init\r\nTraceback (most recent call last):\r\n  File \"/opt/code/localstack/localstack/utils/functions.py\", line 41, in call_safe\r\n    return func(*args, **kwargs)\r\n  File \"/opt/code/localstack/localstack/services/apigateway/provider.py\", line 97, in on_after_init\r\n    apply_patches()\r\n  File \"/opt/code/localstack/localstack/services/apigateway/patches.py\", line 270, in apply_patches\r\n    def get_rest_api(self, function_id):\r\n  File \"/opt/code/localstack/localstack/utils/patch.py\", line 170, in wrapper\r\n    fn.patch = Patch.function(target, fn, pass_target=pass_target)\r\n  File \"/opt/code/localstack/localstack/utils/patch.py\", line 96, in function\r\n    return Patch(obj, name, new)\r\n  File \"/opt/code/localstack/localstack/utils/patch.py\", line 56, in __init__\r\n    self.old = getattr(self.obj, name)\r\nAttributeError: module 'localstack.services.apigateway.patches' has no attribute 'get_rest_api'\r\n```\r\n\r\nwhich was an obscure indicator that `on_after_init` was called twice.\r\n\r\nThe PR introduces a locking mechanism that makes sure that, while the service is being loaded and instantiated, other calls to `require` of the same service block. The `SynchronizedDefaultDict(RLock)` pattern is helpful here - and we make sure we delete the locks after using them (we only need them once).",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 6,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-03-25T06:37:31Z",
        "closed_at": "2023-03-25T16:07:14Z",
        "merged_at": "2023-03-25T16:07:14Z",
        "body": null,
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-03-24T18:30:12Z",
        "closed_at": "2023-03-25T12:41:58Z",
        "merged_at": "2023-03-25T12:41:58Z",
        "body": "This PR fixes the restart of DynamoDB. \r\n\r\nI noticed this issue when working to re-enable the cloud pods tests. I likely introduced this regression in https://github.com/localstack/localstack/pull/7827.\r\n\r\nIn a nutshell, we were creating the assets directory in the `on_before_state_reset()` hook and deleting it when calling the visitor. This PR moves the creation to the server to the `on_after_state_reset()` hook.\r\n\r\nOne can simply test it by creating some resources and calling the endpoint with `curl -X POST http://localhost:4566/_localstack/state/reset`\r\n\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 16,
        "deletions": 4,
        "changed_files": 2,
        "created_at": "2023-03-24T18:08:22Z",
        "closed_at": "2023-03-24T19:54:38Z",
        "merged_at": "2023-03-24T19:54:38Z",
        "body": "Firehose tests with OpenSearch/ES have been really flaky and we're trying to get a deployment out. Let's see if this goes further\r\n\r\nTrying to fix flakiness of the s3 CORS tests that make extensive use of virtual host addressing... could be some issue there? ",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 31,
        "deletions": 5,
        "changed_files": 3,
        "created_at": "2023-03-24T17:05:04Z",
        "closed_at": "2023-03-25T12:43:56Z",
        "merged_at": "2023-03-25T12:43:56Z",
        "body": "It seems we missed a scenario when creating the new CORS handling for S3:\r\n\r\nIf we do a `CreateBucket` request not targeting the S3 specific endpoint (like we do from the web app), we cannot know for sure that the request is targeting S3 (it is a simple `PUT` request with a path, nothing else), because the bucket does not exist yet. So, the pre-process handler does not add any headers, and the request is seen as \"self-managed\" by the default CORS enforcer / enricher because it targets S3, so nobody adds the right headers in the end. \r\n\r\nThe solution for now is to let the handler chain execute before handing the request to the skeleton, and if the request is `CreateBucket` or `ListBuckets`, we will use the default LocalStack CORS handling to enrich the response with the right headers, only of the origin is allowed. Otherwise, we will reject the request. At least we won't get any side effect directly in the provider. \r\n\r\n\\cc @lukqw, thanks for finding and helping in reproducing the issue! ",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-03-24T16:38:52Z",
        "closed_at": "2023-03-25T17:18:50Z",
        "merged_at": "2023-03-25T17:18:50Z",
        "body": "Skipping this test for now since there seems to be a race condition in the test that sometimes triggers. Was also able to reproduce locally, but not reliably.\r\n\r\n/cc @alexrashed ",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 119,
        "deletions": 47,
        "changed_files": 4,
        "created_at": "2023-03-24T12:56:24Z",
        "closed_at": "2023-03-28T10:58:58Z",
        "merged_at": "2023-03-28T10:58:57Z",
        "body": "Extend docker/net utils to allow port checks for UDP ports. Addresses an issue from a support channel where starting up the LS container fails due to UDP port 53 already being bound. \r\n\r\nThis PR extends `container_ports_can_be_bound(..)` to allow us to make port availability checks also for UDP ports, which will allow us to selectively add the port bind for UDP port 53, based on availability.\r\n\r\nTried to make the changes minimally invasive, and backwards-compatible. Ports can be specified as an `int` (in which case we assume TCP as the default protocol), or as a `Port` instance that contains the protocol explicitly.\r\n\r\nThe existing `TestDockerPorts` test has been parameterized to also cover UDP ports, and a new simple test has been added to cover the UDP-based logic for `port_can_be_bound(..)`.\r\n\r\nDebatable whether this is a new feature or a fix \ud83e\udd37 - but since it addresses a support case, arguably this could still be considered for the pre v2 merges (despite the feature freeze). To be discussed..\r\n\r\n/cc @simonrw @dfangl ",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 40,
        "deletions": 16,
        "changed_files": 6,
        "created_at": "2023-03-24T10:22:27Z",
        "closed_at": "2023-03-29T10:03:05Z",
        "merged_at": "2023-03-29T10:03:05Z",
        "body": "Moto is now aware of Event Buses in Eventbridge. This meant some of our tests needed updates.\r\n\r\nIncludes upstream changes that resolve:\r\n- https://github.com/localstack/localstack/issues/6076\r\n- https://github.com/localstack/localstack/issues/7915\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 0,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2023-03-24T09:52:11Z",
        "closed_at": "2023-03-24T14:17:03Z",
        "merged_at": "2023-03-24T14:17:03Z",
        "body": null,
        "comments": 1
    },
    {
        "merged": true,
        "additions": 573,
        "deletions": 50,
        "changed_files": 7,
        "created_at": "2023-03-24T01:03:26Z",
        "closed_at": "2023-03-24T16:51:22Z",
        "merged_at": "2023-03-24T16:51:22Z",
        "body": "While looking at the tests run, I realised we were encountering issue when doing test cleanup. \r\n\r\nTrace:\r\n```python\r\n2023-03-23T21:22:27.7599773Z Traceback (most recent call last):\r\n2023-03-23T21:22:27.7600672Z   File \"/home/runner/work/localstack-ext/localstack-ext/localstack/localstack/aws/chain.py\", line 90, in handle\r\n2023-03-23T21:22:27.7601377Z     handler(self, self.context, response)\r\n2023-03-23T21:22:27.7602178Z   File \"/home/runner/work/localstack-ext/localstack-ext/localstack/localstack/aws/handlers/service.py\", line 122, in __call__\r\n2023-03-23T21:22:27.7602712Z     handler(chain, context, response)\r\n2023-03-23T21:22:27.7603397Z   File \"/home/runner/work/localstack-ext/localstack-ext/localstack/localstack/aws/handlers/service.py\", line 92, in __call__\r\n2023-03-23T21:22:27.7603934Z     skeleton_response = self.skeleton.invoke(context)\r\n2023-03-23T21:22:27.7604622Z   File \"/home/runner/work/localstack-ext/localstack-ext/localstack/localstack/aws/skeleton.py\", line 153, in invoke\r\n2023-03-23T21:22:27.7605130Z     return self.dispatch_request(context, instance)\r\n2023-03-23T21:22:27.7605835Z   File \"/home/runner/work/localstack-ext/localstack-ext/localstack/localstack/aws/skeleton.py\", line 165, in dispatch_request\r\n2023-03-23T21:22:27.7606339Z     result = handler(context, instance) or {}\r\n2023-03-23T21:22:27.7607016Z   File \"/home/runner/work/localstack-ext/localstack-ext/localstack/localstack/aws/forwarder.py\", line 60, in _call\r\n2023-03-23T21:22:27.7607483Z     return handler(context, req)\r\n2023-03-23T21:22:27.7608151Z   File \"/home/runner/work/localstack-ext/localstack-ext/localstack/localstack/aws/skeleton.py\", line 117, in __call__\r\n2023-03-23T21:22:27.7608616Z     return self.fn(*args, **kwargs)\r\n2023-03-23T21:22:27.7609473Z   File \"/home/runner/work/localstack-ext/localstack-ext/localstack/localstack/services/s3/provider.py\", line 485, in delete_objects\r\n2023-03-23T21:22:27.7610083Z     s3_notification_ctx = S3EventNotificationContext.from_request_context(\r\n2023-03-23T21:22:27.7610903Z   File \"/home/runner/work/localstack-ext/localstack-ext/localstack/localstack/services/s3/notifications.py\", line 127, in from_request_context\r\n2023-03-23T21:22:27.7611457Z     key_etag=key.etag.strip('\"'),\r\n2023-03-23T21:22:27.7612135Z AttributeError: 'FakeDeleteMarker' object has no attribute 'etag'\r\n2023-03-23T21:22:27.7613013Z 2023-03-23T21:22:27.760  INFO --- [   asgi_gw_2] localstack.request.aws     : AWS s3.DeleteObjects => 500 (InternalError)\r\n```\r\n\r\nAfter some reproductions, I could reproduce the issue when the bucket is versioned, which we, it turns out, don't support very well. While migrating the S3 provider, we did not account very much for the concept of `VersionId`, and we did not have tests covering it (not a single operation was done with `VersionId` parameter).\r\n\r\nSo I've added some checks and fixed some direct usages of moto `FakeKey` object which can be `FakeDeleteMarker`, a case we didn't account for. We can fix a lot more when using versioned bucket, but at least now we shouldn't raise direct `AttributeError`. \r\n\r\nConcerning notifications, we do not support `s3:ObjectRemoved:DeleteMarkerCreated` at the moment and we will send a `s3:ObjectRemoved:Delete` instead, but this will need a bit of refactoring in the notification handling (in the map determining the service operation, it would depend if the bucket is versioned or not and if we delete a key or delete a key version). \r\n\r\nI guess we can see this as a bandaid, we don't implement versioned buckets in a better way for now (except for `PutObjectAcl`), but at least we don't raise exceptions linked to that. We will need to come back to this to better support the use case with some usage numbers.\r\n\r\nSources:\r\nhttps://docs.aws.amazon.com/AmazonS3/latest/userguide/DeleteMarker.html\r\nhttps://docs.aws.amazon.com/AmazonS3/latest/userguide/DeletingObjectVersions.html\r\nhttps://docs.aws.amazon.com/AmazonS3/latest/userguide/notification-how-to-event-types-and-destinations.html#supported-notification-event-types\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 34,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2023-03-24T00:15:50Z",
        "closed_at": "2023-03-27T20:17:40Z",
        "merged_at": "2023-03-27T20:17:40Z",
        "body": "Suggestion implementation for [issue](https://github.com/localstack/localstack/issues/7946) (Add support for arrays in EventBridge event patterns)\r\n\r\nAs per AWS [documentation](https://docs.aws.amazon.com/eventbridge/latest/userguide/eb-event-patterns-arrays.html), an event pattern that includes the following field\r\n\r\n```\r\n\"type\": [\"A\", \"B\"]\r\n```\r\nThe preceding event pattern matches an event that includes the following field because the first item in the event pattern array matches the second item in the event array.\r\n\r\n```\r\n\"type\": [ \"C\",  \"A\" ]\r\n```",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 85,
        "deletions": 41,
        "changed_files": 2,
        "created_at": "2023-03-23T22:08:58Z",
        "closed_at": "2023-03-24T15:34:40Z",
        "merged_at": "2023-03-24T15:34:40Z",
        "body": "There were some parsing bugs with handling `LOCALSTACK_HOST` and `GATEWAY_LISTEN`. This PR fixes those issues.\r\n\r\n```\r\n % docker run --rm -ti -e LOCALSTACK_HOST=localstack localstack/localstack:latest\r\n2023-03-23 21:18:04,142 CRIT Supervisor is running as root.  Privileges were not dropped because no user is specified in the config file.  If you intend to run as root, you can set user=root in the config file to avoid this message.\r\n2023-03-23 21:18:04,145 INFO supervisord started with pid 15\r\n2023-03-23 21:18:05,155 INFO spawned: 'infra' with pid 17\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.10/runpy.py\", line 196, in _run_module_as_main\r\n    return _run_code(code, main_globals, None,\r\n  File \"/usr/local/lib/python3.10/runpy.py\", line 86, in _run_code\r\n    exec(code, run_globals)\r\n  File \"/opt/code/localstack/localstack/cli/main.py\", line 21, in <module>\r\n    main()\r\n  File \"/opt/code/localstack/localstack/cli/main.py\", line 14, in main\r\n    from .localstack import create_with_plugins\r\n  File \"/opt/code/localstack/localstack/cli/localstack.py\", line 7, in <module>\r\n    from localstack import config\r\n  File \"/opt/code/localstack/localstack/config.py\", line 522, in <module>\r\n    ) = populate_legacy_edge_configuration(os.environ)\r\n  File \"/opt/code/localstack/localstack/config.py\", line 453, in populate_legacy_edge_configuration\r\n    port = int(localstack_host.split(\":\")[-1])\r\nValueError: invalid literal for int() with base 10: 'localstack'\r\n```\r\n\r\nand when supplying multiple `GATEWAY_LISTEN` values:\r\n\r\n```\r\n$ GATEWAY_LISTEN=192.168.0.10:9000,192.168.32.1:9001 python -m localstack.cli.main start\r\nTraceback (most recent call last):\r\n  File \"/nix/store/hhk4wr7hwry854sq69chmrjqyi964p7y-python3-3.10.9/lib/python3.10/runpy.py\", line 196, in _run_module_as_main\r\n    return _run_code(code, main_globals, None,\r\n  File \"/nix/store/hhk4wr7hwry854sq69chmrjqyi964p7y-python3-3.10.9/lib/python3.10/runpy.py\", line 86, in _run_code\r\n    exec(code, run_globals)\r\n  File \"/home/simon/work/localstack/localstack/localstack/cli/main.py\", line 21, in <module>\r\n    main()\r\n  File \"/home/simon/work/localstack/localstack/localstack/cli/main.py\", line 14, in main\r\n    from .localstack import create_with_plugins\r\n  File \"/home/simon/work/localstack/localstack/localstack/cli/localstack.py\", line 7, in <module>\r\n    from localstack import config\r\n  File \"/home/simon/work/localstack/localstack/localstack/config.py\", line 519, in <module>\r\n    ) = populate_legacy_edge_configuration(os.environ)\r\n  File \"/home/simon/work/localstack/localstack/localstack/config.py\", line 455, in populate_legacy_edge_configuration\r\n    LOG.warning(\"multiple GATEWAY_LISTEN addresses are not currently supported\")\r\nNameError: name 'LOG' is not defined\r\n```\r\n\r\nAlso ensure the CLI binds the docker port as prescribed by `GATEWAY_LOCAL`",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 9,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-03-23T19:54:16Z",
        "closed_at": "2023-03-25T11:13:16Z",
        "merged_at": "2023-03-25T11:13:16Z",
        "body": "The intent here is to avoid bricking environments for users that are still setting `PROVIDER_OVERRIDE_S3=v2`. \r\nDefault, `v2` and `asf` are then equivalent and will all start the v2 s3 provider.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 10,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-03-23T17:39:14Z",
        "closed_at": "2023-03-24T09:43:03Z",
        "merged_at": "2023-03-24T09:43:03Z",
        "body": "Adds a cache to the common functions to avoid building them every build.\r\nUses a file with a list of all hashes of hash-key-files as hash-key (so hashing the file full of hashes), as CircleCI does not support hashing multiple files (via a glob or something) sadly.\r\nReduces amd64 build time by about 10 minutes.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 29,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2023-03-23T16:41:27Z",
        "closed_at": "2023-06-02T10:36:23Z",
        "merged_at": "2023-06-02T10:36:23Z",
        "body": "fix: https://github.com/localstack/localstack/issues/7940\r\n\r\nThis PR allows for correct handling of lambda runs that output more than 4000 bytes, including multibyte characters.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 10,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-03-23T13:49:37Z",
        "closed_at": "2023-03-23T15:50:15Z",
        "merged_at": "2023-03-23T15:50:15Z",
        "body": "without setting `LOCALSTACK_CLI=1`, the config.dirs are not set to the CLI directories, but the the host-mode directories using `.filesystem`.\r\n\r\nhttps://github.com/localstack/localstack/blob/a12e673130f5a5c77f6f9a2049d7bfe7bff960a4/localstack/config.py#L1096-L1103\r\n\r\nwe are setting `LOCALSTACK_CLI=1` here, but this is never called in the tests:\r\n\r\nhttps://github.com/localstack/localstack/blob/a12e673130f5a5c77f6f9a2049d7bfe7bff960a4/localstack/cli/main.py#L4-L6\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 501,
        "deletions": 4,
        "changed_files": 3,
        "created_at": "2023-03-23T10:19:45Z",
        "closed_at": "2023-03-24T10:52:30Z",
        "merged_at": "2023-03-24T10:52:30Z",
        "body": "For `DocumentationPart` API in apigateway : \r\n- Wrote create, list, delete, update, invalid operations, etc. test cases \r\n- Resolved issues for json patching, invalid messages, conflicts in responses, etc. ",
        "comments": 3
    },
    {
        "merged": false,
        "additions": 119,
        "deletions": 26,
        "changed_files": 5,
        "created_at": "2023-03-23T01:02:17Z",
        "closed_at": "2023-07-10T21:23:22Z",
        "merged_at": null,
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n\r\nfixes #7935",
        "comments": 5
    },
    {
        "merged": true,
        "additions": 148,
        "deletions": 13,
        "changed_files": 5,
        "created_at": "2023-03-22T18:10:31Z",
        "closed_at": "2023-03-22T21:46:00Z",
        "merged_at": "2023-03-22T21:46:00Z",
        "body": "By default Lambda should retry async event invocations `2` times. We didn't honor this and since max_retry_attempts was `None` this lead to an exception in the spawned thread and therefore was never actually retried.\r\n\r\nExample:\r\n```python\r\nlambda_client.put_function_event_invoke_config(FunctionName=function_name, DestinationConfig={\"OnSuccess\": {\"Destination\": some_arn}})\r\n```\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 40,
        "deletions": 12,
        "changed_files": 3,
        "created_at": "2023-03-22T16:18:21Z",
        "closed_at": "2023-03-23T20:54:16Z",
        "merged_at": "2023-03-23T20:54:16Z",
        "body": "Dynamically determine ports check Docker image to avoid duplicate image download.\r\n\r\nCurrently, the default image we're using for the port availability checks is `localstack/localstack` (unless configured manually via `PORTS_CHECK_DOCKER_IMAGE`). For Pro users (`localstack/localstack-pro`), this means that potentially an additional image would be downloaded at runtime. \r\n\r\nThis hasn't been an issue so far (as the images were aliases), but is now becoming relevant for the upcoming image split in v2.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 7,
        "deletions": 9,
        "changed_files": 1,
        "created_at": "2023-03-22T13:50:11Z",
        "closed_at": "2023-03-22T15:52:42Z",
        "merged_at": "2023-03-22T15:52:41Z",
        "body": "We will start localstack with community services enabled if the `localstack/localstack` image is used instead of `localstack/localstack-pro`. Also, we have a new version-tag file for the new bigdata tag. This PR adapts the existing warning to consider these changes.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 377,
        "deletions": 472,
        "changed_files": 16,
        "created_at": "2023-03-22T13:47:01Z",
        "closed_at": "2023-03-23T10:26:55Z",
        "merged_at": "2023-03-23T10:26:55Z",
        "body": "This PR contains quite fundamental and breaking changes for LocalStack v2 (which have been announced in advance, most notibly in https://github.com/localstack/localstack/issues/7882).\r\nIt contains the following chanages:\r\n- The Dockerfile has been completely refactored such that it does _not_ contain any LocalStack Pro code anymore.\r\n  - This resolves a build-time circular dependency (which caused a lot of problems) and allows us to ship a community-only image (which is much smaller in size).\r\n- The CircleCI pipeline has been heavily refactored.\r\n  - It does not perform any Pro smoke tests anymore.\r\n  - It does not build or push `localstack/localstack-light` or `localstack/localstack-full` anymore.\r\n  - It performs a dev-release of `localstack-core` after every successful build and publishes it on PyPi.\r\n- The `release-helper.sh` script, to simplify the release handling has been moved into this repository. /cc @thrau\r\n- All GitHub workflows have been refactored such that they do not use any deprecated GitHub workflow features anymore.\r\n- The RedHat smoke test pipeline and the example `Dockerfile.rh` has been removed for now (it was a test pipeline for Pro). /cc @whummer\r\n- The \"Collect not Implemented\" step in the CircleCI pipeline is _not_ executed for Pro anymore (since the image does not contain any Pro package anymore). The Tinybird upload script has been slightly adjusted to allow only uploading results for LocalStack Community to Tinybird. See https://github.com/localstack/docs/pull/516. /cc @steffyP",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 496,
        "deletions": 47,
        "changed_files": 4,
        "created_at": "2023-03-22T07:46:42Z",
        "closed_at": "2023-03-23T06:14:48Z",
        "merged_at": null,
        "body": "For `RequestValidator` API in apigateway : \r\n- Wrote create, list, delete, update, invalid operations, etc. test cases \r\n- Resolved issues for json patching, invalid messages, conflicts in responses, etc. \r\n- Fix existing test case- `test_request_validator`",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 0,
        "deletions": 8,
        "changed_files": 1,
        "created_at": "2023-03-22T07:23:22Z",
        "closed_at": "2023-03-23T07:35:05Z",
        "merged_at": "2023-03-23T07:35:05Z",
        "body": "Corresponds to https://github.com/localstack/localstack-ext/pull/1507 ",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 307,
        "deletions": 87,
        "changed_files": 3,
        "created_at": "2023-03-21T16:46:20Z",
        "closed_at": "2023-03-23T08:24:18Z",
        "merged_at": "2023-03-23T08:24:18Z",
        "body": "## Motivation\r\nCurrently, the new AWS provider allows us to set internal request parameters with an underscore in front of the parameter name in Pascal Case, like this:\r\n\r\n```\r\nconnect_to().lambda.list_functions(_ServicePrincipal=\"apigateway\")\r\n```\r\n\r\nDue to the typed nature of the new clients, this will lead to a typing error, as these parameters are not known by the boto stubs.\r\n\r\n## Changes\r\nIntroduces another method to all returned clients, named `request_metadata`. You can use this method to get a \"version\" of your client where these parameters are automatically set on all service calls.\r\n\r\nExample:\r\n\r\n```\r\nconnect_to().lambda.request_metadata(service_principal=\"apigatway\").list_functions()\r\n```\r\n\r\nThis will be typed correctly, which removes all the yellow warnings of your IDE.\r\n\r\n### Drawback\r\n\r\nThe main drawback is the highly weird way this is done in. It introduces a new \"proxy\" object, which will be typed as the boto3 client. On any get attribute operation for a callable (like a client.function), it will return a partial function with the above mentioned parameters pre-filled, so you do not have to provide them.\r\n\r\nThis is quite unorthodox, but works fine without too much of a performance penalty.",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 208,
        "deletions": 51,
        "changed_files": 9,
        "created_at": "2023-03-21T15:11:28Z",
        "closed_at": "2023-08-18T10:49:17Z",
        "merged_at": null,
        "body": "Use the new `LOCALSTACK_HOST` variable to unify URL returning.\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 0,
        "deletions": 77,
        "changed_files": 1,
        "created_at": "2023-03-21T14:55:25Z",
        "closed_at": "2023-03-23T13:46:30Z",
        "merged_at": "2023-03-23T13:46:30Z",
        "body": "Follow up of https://github.com/localstack/localstack-ext/pull/1500",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 71,
        "deletions": 38,
        "changed_files": 2,
        "created_at": "2023-03-21T10:05:46Z",
        "closed_at": "2023-03-23T13:23:44Z",
        "merged_at": "2023-03-23T13:23:43Z",
        "body": "Remove Moto operation being invoked twice which caused sent email counter to be double incremented.\r\n\r\nFixes https://github.com/localstack/localstack/issues/7902",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 496,
        "deletions": 47,
        "changed_files": 4,
        "created_at": "2023-03-21T07:31:31Z",
        "closed_at": "2023-03-22T15:02:19Z",
        "merged_at": "2023-03-22T15:02:19Z",
        "body": "For `RequestValidator` API in apigateway : \r\n- Wrote create, list, delete, update, invalid operations, etc. test cases \r\n- Resolved issues for json patching, invalid messages, conflicts in responses, etc. \r\n- Fix existing test case- `test_request_validator`",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 159,
        "deletions": 62,
        "changed_files": 3,
        "created_at": "2023-03-20T16:24:09Z",
        "closed_at": "2023-03-20T19:12:16Z",
        "merged_at": "2023-03-20T19:12:16Z",
        "body": "Following #7842, we were missing a step in the validation: if the request body was empty, we should consider the request body as an empty JSON object to allow the validation to take effect, and not throw an error for invalid JSON.\r\n\r\nI've extended the existing test for the request validator integration to add the `GET` method, and test with a request with no request body. ",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-03-20T12:45:58Z",
        "closed_at": "2023-03-21T13:53:05Z",
        "merged_at": null,
        "body": null,
        "comments": 2
    },
    {
        "merged": true,
        "additions": 55,
        "deletions": 18,
        "changed_files": 5,
        "created_at": "2023-03-20T09:56:11Z",
        "closed_at": "2023-03-21T15:01:46Z",
        "merged_at": "2023-03-21T15:01:46Z",
        "body": "Adds a first iteration on basic persistence for the new lambda v2 provider.\r\n\r\n## Changes\r\n\r\n- Start loaded lambda function versions. => Detects lambdas that need to start by checking if they have a VersionManager assigned\r\n- Start event source listeners (note: restoring a dynamodbstreams event source mapping is currently broken because the dynamodbstreams provider doesn't properly support persistence yet) => test skipped for now\r\n\r\n\r\n## Left to do (in a later PR)\r\n- Implement state reset\r\n- Implement restore for provisioned concurrency (Depends on https://github.com/localstack/localstack/pull/7881)\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 40,
        "deletions": 8,
        "changed_files": 3,
        "created_at": "2023-03-20T07:46:23Z",
        "closed_at": "2023-03-21T10:08:56Z",
        "merged_at": "2023-03-21T10:08:56Z",
        "body": "This change addresses this issue https://github.com/localstack/localstack/issues/7910\r\nPreviously, due to the `grant_names` only mapping from grant name to grant ID, it was impossible to have more than one grant with the same name across keys. By including the key ID in the mapping, it becomes possible. \r\n\r\nI've added a unit test to demonstrate the fix works, and allows this grant to be created on both keys. \r\n\r\nIf any extra test coverage would help, just point me in the right direction!",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 288,
        "deletions": 0,
        "changed_files": 3,
        "created_at": "2023-03-20T05:04:05Z",
        "closed_at": "2023-03-20T07:27:03Z",
        "merged_at": "2023-03-20T07:27:03Z",
        "body": "# \ud83d\ude80 ASF Update Report \ud83d\ude80\nThis PR has been automatically generated to update the generated API stubs for our ASF services.\nIt uses the latest code-generator from the _master_ branch ([scaffold.py](https://github.com/localstack/localstack/blob/master/localstack/aws/scaffold.py)) and the latest _published_ version of [botocore](https://github.com/boto/botocore) to re-generate all API stubs which are already present in the `localstack.aws.api` module of the _master_ branch.\n\n## \ud83d\udd04 Updated Services\nThis PR updates the following services:\n- config\n- ec2\n- s3control\n\n## \ud83d\udc77\ud83c\udffd Handle this PR\nThe following options describe how to interact with this PR / the auto-update:\n\n\u2714\ufe0f **Accept Changes**\nIf the changes are satisfying, just squash-merge the PR and delete the source branch.\n\n\ud83d\udeab **Ignore Changes**\nIf you want to ignore the changes in this PR, just close the PR and *do not delete* the source branch. The PR will not be opened and a new PR will not be created for as long as the generated code does not change (or the branch is deleted). As soon as there are new changes, a new PR will be created.\n\n\u270f\ufe0f **Adapt Changes**\n*Don't do this.* The APIs are auto-generated. If you decide that the APIs should look different, you have to change the code-generation.\n\n\u23f8\ufe0f **Pause Updates**\nRemove the cron-schedule trigger of the GitHub Action workflow which creates these PRs. The action can then still be triggered manually, but it will not be executed automatically.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 359,
        "deletions": 0,
        "changed_files": 3,
        "created_at": "2023-03-19T16:26:46Z",
        "closed_at": "2023-03-21T10:02:46Z",
        "merged_at": "2023-03-21T10:02:46Z",
        "body": "This PR targets localstack developers and adds tracing functionality to debug the handler chain.\r\nI think this can be useful for work that involves a lot of debugging in the HTTP framework (thinking APIGW, S3, CORS, Lambda, issues with request streaming, ...) :eyes: @bentsku @alexrashed @calvernaz @dfangl @dominikschubert \r\n\r\nYou can enable this behavior by setting `DEBUG_HANDLER_CHAIN=1` \r\n\r\nBy wrapping handlers and recording before/after state of the context, request, and response object, we can report in quite a detailed way what the handler did to the request/response.\r\nThis includes\r\n* attributes set on the context, like the service or operation\r\n* which headers where modified\r\n* whether pesky get_data methods were called on request/response objects\r\n\r\nI'm sure there are better/more generic ways of implementing it than the way I did, but I feel for a first iteration it's OK. \r\nHere are some examples of how the report looks like. I know they're not super pretty - happy for suggestions.\r\n\r\ncalling a non-implemented operation:\r\n\r\n```\r\n=====================================================================================\r\nrequest:  POST http://localhost:4566/\r\nresponse: 501\r\n---- request handlers ---------------------------------------------------------------\r\nlocalstack.aws.handlers.legacy              push_request_context               0.13ms\r\nlocalstack.aws.handlers.metric_handler      method                             0.08ms\r\nlocalstack.aws.chain                        CompositeHandler                   0.08ms\r\nlocalstack.aws.handlers.service             ServiceNameParser                  9.69ms\r\n                                              - set service = 'lightsail'\r\n                                              - modify request headers\r\n                                                - set 'x-localstack-tgt-api: lightsail'\r\nlocalstack.aws.handlers.cors                CorsEnforcer                       0.10ms\r\nlocalstack.aws.handlers.codec               ContentDecoder                     0.09ms\r\nlocalstack.aws.handlers.internal            LocalstackResourceHandler          0.20ms\r\nlocalstack.aws.handlers.legacy              DefaultListenerHandler             0.08ms\r\nlocalstack.aws.handlers.legacy              EdgeRouterHandler                  0.11ms\r\nlocalstack.aws.handlers.auth                MissingAuthHeaderInjector          0.10ms\r\nlocalstack.aws.handlers.region              RegionContextEnricher              0.43ms\r\n                                              - set region = 'us-east-1'\r\nlocalstack.aws.handlers.auth                AccountIdEnricher                  0.44ms\r\n                                              - set account_id = '000000000000'\r\n                                              - modify request headers\r\n                                                - set 'x-moto-account-id: 000000000000'\r\nlocalstack.aws.handlers.internal_requests   InternalRequestParamsEnricher      0.09ms\r\nlocalstack.aws.handlers.service             ServiceRequestParser               0.57ms\r\n                                              - call request.get_data\r\n                                              - call request._load_form_data\r\n                                              - call request.get_data\r\n                                              - set operation = 'GetBundles'\r\nlocalstack.aws.handlers.metric_handler      method                             0.09ms\r\nlocalstack.aws.chain                        CompositeHandler                   0.08ms\r\nlocalstack.aws.handlers.service_plugin      ServiceLoader                      0.13ms\r\n---- response handlers ---------------------------------------------------------------\r\nlocalstack.aws.handlers.service             ServiceResponseHandlers            0.09ms\r\nlocalstack.aws.handlers.service             ServiceResponseParser              0.09ms\r\nlocalstack.aws.handlers.legacy              set_close_connection_header        0.10ms\r\n                                              - modify response headers\r\n                                                - set 'Connection: close'\r\nlocalstack.aws.chain                        CompositeResponseHandler           0.09ms\r\nlocalstack.aws.handlers.cors                CorsResponseEnricher               0.26ms\r\n                                              - modify response headers\r\n                                                - set 'Access-Control-Allow-Methods: HEAD,GET,PUT,POST,DELETE,OPTIONS,PATCH'\r\n                                                - set 'Access-Control-Allow-Origin: *'\r\n                                                - set 'Access-Control-Expose-Headers: etag,x-amz-version-id'\r\n                                                - set 'Access-Control-Allow-Headers: authorization,cache-control,content-length,content-md5,content-type,etag,location,x-amz-acl,x-amz-content-sha256,x-amz-date,x-amz-request-id,x-amz-security-token,x-amz-tagging,x-amz-target,x-amz-user-agent,x-amz-version-id,x-amzn-requestid,x-localstack-target,amz-sdk-invocation-id,amz-sdk-request'\r\nlocalstack.aws.handlers.logging             ResponseLogger                     0.29ms\r\nlocalstack.aws.handlers.analytics           ServiceRequestCounter              0.66ms\r\nlocalstack.aws.handlers.legacy              pop_request_context                0.13ms\r\nlocalstack.aws.handlers.metric_handler      method                             0.11ms\r\n---- exception handlers ---------------------------------------------------------------\r\nlocalstack.aws.handlers.logging             ExceptionLogger                    0.70ms\r\nlocalstack.aws.handlers.service             ServiceExceptionSerializer         5.00ms\r\n                                              - set response stats_code = 501\r\n                                              - modify response headers\r\n                                                - set 'Content-Length: 220'\r\n                                                - set 'x-amzn-requestid: OU72LH39VYZ3NUXXBGQNBONTIELQN10G783JHGP2JW46Q78DLE37'\r\n                                                - set 'X-Amzn-Errortype: InternalFailure'\r\n                                                - set 'Content-Type: application/json'\r\nlocalstack.aws.handlers.fallback            InternalFailureHandler             0.14ms\r\n==================================================================== total    21.37ms\r\n```\r\n\r\n\r\ncalling `awslocal opensearch list-domain-names`\r\n```\r\n=====================================================================================\r\nrequest:  GET http://localhost:4566/2021-01-01/domain\r\nresponse: 200\r\n---- request handlers ---------------------------------------------------------------\r\nlocalstack.aws.handlers.legacy              push_request_context               0.19ms\r\nlocalstack.aws.handlers.metric_handler      method                             0.09ms\r\nlocalstack.aws.chain                        CompositeHandler                   0.06ms\r\nlocalstack.aws.handlers.service             ServiceNameParser                  1.68ms\r\n                                              - set service = 'opensearch'\r\n                                              - modify request headers\r\n                                                - set 'x-localstack-tgt-api: opensearch'\r\nlocalstack.aws.handlers.cors                CorsEnforcer                       0.09ms\r\nlocalstack.aws.handlers.codec               ContentDecoder                     0.08ms\r\nlocalstack.aws.handlers.internal            LocalstackResourceHandler          0.13ms\r\nlocalstack.aws.handlers.legacy              DefaultListenerHandler             0.07ms\r\nlocalstack.aws.handlers.legacy              EdgeRouterHandler                  0.08ms\r\nlocalstack.aws.handlers.auth                MissingAuthHeaderInjector          0.07ms\r\nlocalstack.aws.handlers.region              RegionContextEnricher              0.09ms\r\n                                              - set region = 'us-east-1'\r\nlocalstack.aws.handlers.auth                AccountIdEnricher                  0.09ms\r\n                                              - set account_id = '000000000000'\r\n                                              - modify request headers\r\n                                                - set 'x-moto-account-id: 000000000000'\r\nlocalstack.aws.handlers.internal_requests   InternalRequestParamsEnricher      0.07ms\r\nlocalstack.aws.handlers.service             ServiceRequestParser              55.38ms\r\n                                              - call request.get_data\r\n                                              - call request._load_form_data\r\n                                              - set operation = 'ListDomainNames'\r\nlocalstack.aws.handlers.metric_handler      method                             0.09ms\r\nlocalstack.aws.chain                        CompositeHandler                   0.07ms\r\nlocalstack.aws.handlers.service_plugin      ServiceLoader                     57.39ms\r\nlocalstack.aws.handlers.service             ServiceRequestRouter             116.85ms\r\n                                              - set service_response\r\n                                              - modify response headers\r\n                                                - set 'x-amz-request-id: OP0F0433URHYVS47YDAN1RCGNSZS3XBYXICYAG056R738O6Q2LJP'\r\n                                                - set 'Content-Length: 19'\r\n                                                - set 'x-amzn-requestid: KC0F54NE4YMTBHGW35N7UUECL0WPI0N8Q2TDF9DTLK55JEX1Y1DM'\r\nlocalstack.aws.handlers.fallback            EmptyResponseHandler               0.10ms\r\n---- response handlers ---------------------------------------------------------------\r\nlocalstack.aws.handlers.service             ServiceResponseHandlers            0.08ms\r\nlocalstack.aws.handlers.service             ServiceResponseParser              0.08ms\r\nlocalstack.aws.handlers.legacy              set_close_connection_header        0.09ms\r\n                                              - modify response headers\r\n                                                - set 'Connection: close'\r\nlocalstack.aws.chain                        CompositeResponseHandler           0.08ms\r\nlocalstack.aws.handlers.cors                CorsResponseEnricher               0.15ms\r\n                                              - modify response headers\r\n                                                - set 'Access-Control-Allow-Methods: HEAD,GET,PUT,POST,DELETE,OPTIONS,PATCH'\r\n                                                - set 'Access-Control-Allow-Origin: *'\r\n                                                - set 'Access-Control-Expose-Headers: etag,x-amz-version-id'\r\n                                                - set 'Access-Control-Allow-Headers: authorization,cache-control,content-length,content-md5,content-type,etag,location,x-amz-acl,x-amz-content-sha256,x-amz-date,x-amz-request-id,x-amz-security-token,x-amz-tagging,x-amz-target,x-amz-user-agent,x-amz-version-id,x-amzn-requestid,x-localstack-target,amz-sdk-invocation-id,amz-sdk-request'\r\nlocalstack.aws.handlers.logging             ResponseLogger                     0.26ms\r\nlocalstack.aws.handlers.analytics           ServiceRequestCounter              0.12ms\r\nlocalstack.aws.handlers.legacy              pop_request_context                0.13ms\r\nlocalstack.aws.handlers.metric_handler      method                             0.11ms\r\n---- exception handlers ---------------------------------------------------------------\r\n==================================================================== total   234.82ms\r\n```\r\n\r\ncalling the health endpoint\r\n\r\n```\r\n=====================================================================================\r\nrequest:  GET http://localhost:4566/_localstack/health\r\nresponse: 200\r\n---- request handlers ---------------------------------------------------------------\r\nlocalstack.aws.handlers.legacy              push_request_context               0.11ms\r\nlocalstack.aws.handlers.metric_handler      method                             0.07ms\r\nlocalstack.aws.chain                        CompositeHandler                   0.05ms\r\nlocalstack.aws.handlers.service             ServiceNameParser                  0.58ms\r\nlocalstack.aws.handlers.cors                CorsEnforcer                       0.07ms\r\nlocalstack.aws.handlers.codec               ContentDecoder                     0.06ms\r\nlocalstack.aws.handlers.internal            LocalstackResourceHandler          1.63ms\r\n                                              - stop chain\r\n                                              - modify response headers\r\n                                                - set 'Content-Length: 872'\r\n                                                - set 'Content-Type: application/json'\r\n---- response handlers ---------------------------------------------------------------\r\nlocalstack.aws.handlers.service             ServiceResponseHandlers            0.06ms\r\nlocalstack.aws.handlers.service             ServiceResponseParser              0.06ms\r\nlocalstack.aws.handlers.legacy              set_close_connection_header        0.07ms\r\n                                              - modify response headers\r\n                                                - set 'Connection: close'\r\nlocalstack.aws.chain                        CompositeResponseHandler           0.06ms\r\nlocalstack.aws.handlers.cors                CorsResponseEnricher               0.12ms\r\n                                              - modify response headers\r\n                                                - set 'Access-Control-Allow-Methods: HEAD,GET,PUT,POST,DELETE,OPTIONS,PATCH'\r\n                                                - set 'Access-Control-Allow-Origin: *'\r\n                                                - set 'Access-Control-Expose-Headers: etag,x-amz-version-id'\r\n                                                - set 'Access-Control-Allow-Headers: authorization,cache-control,content-length,content-md5,content-type,etag,location,x-amz-acl,x-amz-content-sha256,x-amz-date,x-amz-request-id,x-amz-security-token,x-amz-tagging,x-amz-target,x-amz-user-agent,x-amz-version-id,x-amzn-requestid,x-localstack-target,amz-sdk-invocation-id,amz-sdk-request'\r\nlocalstack.aws.handlers.logging             ResponseLogger                     0.07ms\r\nlocalstack.aws.handlers.analytics           ServiceRequestCounter              0.07ms\r\nlocalstack.aws.handlers.legacy              pop_request_context                0.08ms\r\nlocalstack.aws.handlers.metric_handler      method                             0.07ms\r\n---- exception handlers ---------------------------------------------------------------\r\n==================================================================== total     3.78ms\r\n```",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 133,
        "deletions": 68,
        "changed_files": 7,
        "created_at": "2023-03-19T14:11:18Z",
        "closed_at": "2023-03-21T17:32:46Z",
        "merged_at": "2023-03-21T17:32:46Z",
        "body": "Disable moto's S3 bucket policy enforcement to unblock CDK bootstraps and bump moto-ext to `4.1.5.post1`\r\n\r\nMoto recently added more strict bucket policy enforcement: https://github.com/getmoto/moto/pull/5883\r\n\r\nThis can break `cdklocal bootstrap` commands, as CDK is creating a bucket policy that denies access to bucket objects over non-SSL connections (by enforcing the `aws:SecureTransport` attribute in the policy): https://github.com/aws/aws-cdk/blob/e8158af34eb6402c79edbc171746fb5501775c68/packages/aws-cdk/lib/api/bootstrap/bootstrap-template.yaml#L217-L233 \r\n\r\nAfter the bootstrap, `cdklocal deploy` can then result in errors in the CloudFormation deployment:\r\n```\r\n  ...\r\n  File \".../localstack/services/cloudformation/provider.py\", line 415, in create_change_set\r\n    api_utils.prepare_template_body(\r\n  File \".../localstack/services/cloudformation/api_utils.py\", line 23, in prepare_template_body\r\n    modified_template_body = get_template_body(req_data)\r\n  File \".../localstack/services/cloudformation/api_utils.py\", line 54, in get_template_body\r\n    result = client.get_object(Bucket=parts[0], Key=parts[2])\r\n  File \".../.venv/lib/python3.10/site-packages/botocore/client.py\", line 530, in _api_call\r\n    return self._make_api_call(operation_name, kwargs)\r\n  File \".../.venv/lib/python3.10/site-packages/botocore/client.py\", line 960, in _make_api_call\r\n    raise error_class(parsed_response, operation_name)\r\nbotocore.exceptions.ClientError: An error occurred (403) when calling the GetObject operation: Forbidden\r\n```\r\n\r\nThis was discovered when deploying some CDK stacks recently, among others this Developer Hub sample here: https://github.com/localstack/microservices-apigateway-lambda-dynamodb-sqs-sample/pull/1 \r\n\r\nSeems like a reasonable approach to disable the bucket enforcement entirely (without making it configurable), to unblock CDK users, and also given the recent enhancements in our own IAM enforcement - but open to suggestions! /cc @bentsku @dfangl @thrau ",
        "comments": 9
    },
    {
        "merged": true,
        "additions": 44,
        "deletions": 85,
        "changed_files": 6,
        "created_at": "2023-03-19T11:17:21Z",
        "closed_at": "2023-03-20T18:48:58Z",
        "merged_at": "2023-03-20T18:48:58Z",
        "body": "\r\nThis PR adds a band-aid to a long-standing issue that `config.dirs` is used when running CLI commands.\r\n\r\nThis caused localstack to create the `.filesystem` directory in the Python path, which was originally just designed for executing host mode in developer environments, even when simply using the CLI.\r\n\r\n```\r\n % locate .filesystem     \r\n/home/thomas/.pyenv/versions/3.10.9/lib/python3.10/site-packages/.filesystem\r\n/home/thomas/workspace/localstack/localstack/.filesystem\r\n/home/thomas/workspace/localstack/localstack-ext/.venv/lib/python3.10/site-packages/.filesystem\r\n```\r\n\r\nBecause the CLI and the runtime share control paths, there are situations where values from `config.dirs` are used to  create directories or files, even though they may not make sense in the context of the CLI.\r\n\r\n* `dirs.cache` is used by the analytics metadata (cache machine id file), and was used by the `get_service_catalog` call (now removed)\r\n* `dirs.data` is used by `localstack_ext.config` (this will be removed)\r\n* `dirs.logs` is used as target to put the logs of the docker run command when starting localstack\r\n* `dirs.tmp` should be removed now, but left it in there just in case\r\n\r\nThere is now a special control path that populates `config.dirs` deliberately with values that make the above examples work without the `.filesystem` directory.\r\nTo reduce the number of calls to `config.dirs`, I also removed some unused code from the startup procedure.\r\n\r\nOnce the old edge proxy logic is removed, we can more easily split up `infra.py` and therefore `bootstrap.py`, which will hopefuly also make it easier to separate out the CLI code.\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 409,
        "deletions": 14,
        "changed_files": 9,
        "created_at": "2023-03-18T21:54:11Z",
        "closed_at": "2023-03-21T22:13:49Z",
        "merged_at": "2023-03-21T22:13:49Z",
        "body": "Add support for VPC endpoints for private API Gateway REST APIs. See docs [here](https://docs.aws.amazon.com/apigateway/latest/developerguide/apigateway-private-apis.html).\r\n\r\nThese endpoints allow users to invoke REST APIs under the following endpoints:\r\n```\r\nhttp(s)://{rest-api-id}-{vpce-id}.execute-api.localhost.localstack.cloud:4566/{stage}\r\n```\r\n... in addition to the standard API GW invocation endpoints:\r\n```\r\nhttp(s)://{rest-api-id}.execute-api.localhost.localstack.cloud:4566/{stage}\r\n```\r\n\r\nA snapshot test has been added to cover the functionality.\r\n\r\nMore detailed description following soon..",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 107,
        "deletions": 10,
        "changed_files": 2,
        "created_at": "2023-03-18T20:36:02Z",
        "closed_at": "2023-03-29T12:52:04Z",
        "merged_at": "2023-03-29T12:52:04Z",
        "body": "This is a follow up from #7554, from an idea proposed by @whummer ([in this comment](https://github.com/localstack/localstack/pull/7554#discussion_r1086872025)) , with dynamic handling of CORS origin for web resource served by LocalStack.\r\nThis is not mergeable as is, as it still has some logging regarding performance, but I'd like to have some comments / opinions.\r\n\r\n### Scenario:\r\n\r\nLocalStack is serving a resource meant to be accessed from the browser (CloudFront or S3 website).\r\n\r\nBut this resource needs to access LocalStack resources as well. Right now, the only way is to set the environment variables of LocalStack to allow the Origin (let\u2019s say, `http://<bucket>.s3-website.localhost.localstack.cloud:4566`).\r\n\r\n\r\n### Fix\r\n\r\nThis PR adds a dynamic check of the origin, to validate if it follows some regex matching 2 service domains known for serving content accessible from a user browser (thus enforcing CORS).  We can then add a regex for every resource subdomain in that situation. \r\n\r\nThe performance right now is around 4\u00b5s on my local machine when a request would be either rejected or matching `s3-website` or `cloudfront`. The performance would not be affected for most requests, as we either don't match CORS because of no `Origin` header, or the request is normally allowed. \r\n\r\n\\cc @whummer @dfangl @alexrashed \r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 58,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-03-18T14:49:10Z",
        "closed_at": "2023-03-18T18:36:09Z",
        "merged_at": "2023-03-18T18:36:09Z",
        "body": "Add Apigateway V2 transformers",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 34,
        "deletions": 1,
        "changed_files": 3,
        "created_at": "2023-03-17T18:41:22Z",
        "closed_at": "2023-03-18T17:11:43Z",
        "merged_at": "2023-03-18T17:11:43Z",
        "body": "Small fix that makes sure there's no exception when sns unsubscribe is called twice (which happens a decent amount of times in tests).\r\n\r\nLogs had quite a few of these errors:\r\n```\r\n2023-03-17T16:38:29.4143947Z ------------------------------ live log teardown -------------------------------\r\n2023-03-17T16:38:29.4144724Z 2023-03-17T16:38:29.412 ERROR --- [   asgi_gw_3] localstack.aws.handlers.logging : exception during call chain\r\n2023-03-17T16:38:29.4146180Z Traceback (most recent call last):\r\n2023-03-17T16:38:29.4146706Z   File \"/home/runner/work/localstack/localstack/localstack/localstack/aws/chain.py\", line 90, in handle\r\n2023-03-17T16:38:29.4147135Z     handler(self, self.context, response)\r\n2023-03-17T16:38:29.4147637Z   File \"/home/runner/work/localstack/localstack/localstack/localstack/aws/handlers/service.py\", line 122, in __call__\r\n2023-03-17T16:38:29.4148043Z     handler(chain, context, response)\r\n2023-03-17T16:38:29.4148523Z   File \"/home/runner/work/localstack/localstack/localstack/localstack/aws/handlers/service.py\", line 92, in __call__\r\n2023-03-17T16:38:29.4148972Z     skeleton_response = self.skeleton.invoke(context)\r\n2023-03-17T16:38:29.4149483Z   File \"/home/runner/work/localstack/localstack/localstack/localstack/aws/skeleton.py\", line 153, in invoke\r\n2023-03-17T16:38:29.4149933Z     return self.dispatch_request(context, instance)\r\n2023-03-17T16:38:29.4150443Z   File \"/home/runner/work/localstack/localstack/localstack/localstack/aws/skeleton.py\", line 165, in dispatch_request\r\n2023-03-17T16:38:29.4150877Z     result = handler(context, instance) or {}\r\n2023-03-17T16:38:29.4151347Z   File \"/home/runner/work/localstack/localstack/localstack/localstack/aws/forwarder.py\", line 60, in _call\r\n2023-03-17T16:38:29.4151737Z     return handler(context, req)\r\n2023-03-17T16:38:29.4152197Z   File \"/home/runner/work/localstack/localstack/localstack/localstack/aws/skeleton.py\", line 117, in __call__\r\n2023-03-17T16:38:29.4152577Z     return self.fn(*args, **kwargs)\r\n2023-03-17T16:38:29.4153072Z   File \"/home/runner/work/localstack/localstack/localstack/localstack/services/sns/provider.py\", line 484, in unsubscribe\r\n2023-03-17T16:38:29.4153525Z     if subscription[\"Protocol\"] in [\"http\", \"https\"]:\r\n2023-03-17T16:38:29.4154012Z TypeError: 'NoneType' object is not subscriptable\r\n2023-03-17T16:38:29.4170528Z 2023-03-17T16:38:29.416  INFO --- [   asgi_gw_3] localstack.request.aws     : AWS sns.Unsubscribe => 500 (InternalError)\r\n```",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 156,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2023-03-17T16:30:27Z",
        "closed_at": "2023-06-25T16:22:41Z",
        "merged_at": "2023-06-25T16:22:41Z",
        "body": "This PR adds a test to verify #7897. Basically it's just a normal \"let the lambda echo the SQS message into another SQS queue and fetch it\" test, but i added message attributes explicitly.\r\n\r\nThe test didn't really reproduce the issue, but it's useful as regression test I suppose. The only difference I could find is that AWS adds empty values for `stringListValues` and `binaryListValues` of message attributes, but 1) [those are not implemented in AWS](https://docs.aws.amazon.com/AWSSimpleQueueService/latest/APIReference/API_MessageAttributeValue.html), and 2) these empty values only show up when using the event source mapper, not in SQS in general. :thinking: :shrug: \r\n\r\n```\r\n  \"Author\": {\r\n    \"stringValue\": \"John Grisham\",\r\n    \"stringListValues\": [],\r\n    \"binaryListValues\": [],\r\n    \"dataType\": \"String\"\r\n  },\r\n```\r\n\r\nin localstack that would be\r\n```\r\n  \"Author\": {\r\n    \"stringValue\": \"John Grisham\",\r\n    \"dataType\": \"String\"\r\n  },\r\n```",
        "comments": 3
    },
    {
        "merged": false,
        "additions": 12,
        "deletions": 12,
        "changed_files": 6,
        "created_at": "2023-03-17T16:08:16Z",
        "closed_at": "2023-03-27T15:00:44Z",
        "merged_at": null,
        "body": "Docker can use a container name for DNS resolution, but hostnames cannot include underscores.\n\nThis change sets the default container name in the documentation to localstack-main to allow it to be used as a hostname.\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 33,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2023-03-17T13:25:57Z",
        "closed_at": "2023-03-17T16:50:05Z",
        "merged_at": "2023-03-17T16:50:05Z",
        "body": "Fixes a small edge case encountered when writing tests for xray with a SortingTransformer where SubSegments can be nested. The value of the detected entry is now also further transformed.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 34,
        "deletions": 27,
        "changed_files": 2,
        "created_at": "2023-03-17T13:21:44Z",
        "closed_at": "2023-03-17T16:05:36Z",
        "merged_at": "2023-03-17T16:05:35Z",
        "body": "While adding persistence test for logs, I found that the validation for this test is actually misleading, as it didn't check the lambda-logs which should ensure the actual invocation\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 316,
        "deletions": 15,
        "changed_files": 4,
        "created_at": "2023-03-17T12:00:09Z",
        "closed_at": "2023-03-23T15:28:15Z",
        "merged_at": "2023-03-23T15:28:15Z",
        "body": "We are switching to using `LOCALSTACK_HOST` and `GATEWAY_LISTEN` to configure LocalStack.\r\n\r\n## Variable types\r\n\r\nThese variables are split into two types: _cosmetic_ and _functional_. Cosmetic are purely used as hostnames in returned URLs or addresses by LocalStack. LocalStack does not use these variables to configure services.\r\n\r\n_functional_ variables are used to configure the networking stack of LocalStack.\r\n\r\n## Roles\r\n\r\n* `LOCALSTACK_HOST`: (cosmetic) this variable is interpolated into URLs and addresses. It has the form `<hostname>:<port>` and defaults to `localhost.localstack.cloud:4566`.\r\n* `GATEWAY_LISTEN`: (functional) this configures the bind addresses of LocalStack. It has the form `<ip address>:<port>(,<ip address>:<port>)*` and defaults to `127.0.0.1:4566` on the host and `0.0.0.0:4566` in docker.\r\n\r\n## `GATEWAY_LISTEN` advantages\r\n\r\nSince `GATEWAY_LISTEN` supports multiple addresses (separated by `,`) we can provide configuration for pro users who wish to use SSL e.g. `GATEWAY_LISTEN=0.0.0.0:4566,0.0.0.0:443`.\r\n\r\n## Legacy configuration\r\n\r\nExisting configuration of the system is maintained with the existing legacy variables (`EDGE_PORT`, `EDGE_PORT_HTTP` and `EDGE_BIND_HOST`) as these are now derived from `GATEWAY_LISTEN` if absent. Some examples:\r\n\r\n* `GATEWAY_LISTEN`: \"\" -> `EDGE_PORT=4566`,`EDGE_PORT_HTTP=4566`,`EDGE_BIND_HOST=127.0.0.1/0.0.0.0`\r\n* `GATEWAY_LISTEN=0.0.0.0:9999` -> `EDGE_PORT=9999`,`EDGE_PORT_HTTP=9999`,`EDGE_BIND_HOST=0.0.0.0`\r\n\r\nIf `GATEWAY_LISTEN` is not given but legacy variables are, they pick up the supplied values rather than inheriting the default `GATEWAY_LISTEN`.\r\n\r\nIf `GATEWAY_LISTEN` includes multiple values, the first will be used to configure our `hypercorn` listener, and the rest will be transparent proxies (implementation in future PR).\r\n\r\nLegacy variables have been marked as deprecated:\r\n* `LOCALSTACK_HOSTNAME`\r\n* `HOSTNAME_EXTERNAL`\r\n* `EDGE_PORT`\r\n* `EDGE_PORT_HTTP`\r\n* `EDGE_BIND_HOST`\r\n\r\n[Design document](https://www.notion.so/localstack/Networking-sync-9f34c512d964469689eff9e815281238)",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 107,
        "deletions": 3,
        "changed_files": 5,
        "created_at": "2023-03-17T09:47:50Z",
        "closed_at": "2023-03-21T15:55:31Z",
        "merged_at": "2023-03-21T15:55:31Z",
        "body": "\r\n- [x] Update init release version init when https://github.com/localstack/lambda-runtime-init/pull/14 is merged",
        "comments": 6
    },
    {
        "merged": true,
        "additions": 134,
        "deletions": 15,
        "changed_files": 5,
        "created_at": "2023-03-16T21:49:26Z",
        "closed_at": "2023-03-20T13:41:56Z",
        "merged_at": "2023-03-20T13:41:56Z",
        "body": "Add an environment variable `LAMBDA_IGNORE_ARCHITECTURE` to ignore the architecture (i.e., x86_64 or arm64) of a Lambda function and let Docker select a matching image based on the host operating system and architecture.\r\n\r\n## Motivation\r\n\r\n* Improve performance by natively running cross-platform compatible lambda functions.\r\n* Facilitate cross-platform testing with different test runners. We might need to introduce pytest markers to indicate compatibility restrictions (e.g., `amd64_only` and `arm64_only`).\r\n\r\n## Further changes\r\n\r\n* Use standardized `get_arch()` to match `aarch64` platform on Linux\r\n* Move `is_arm_compatible()` to platform utils\r\n* Make the `PULLED_IMAGES` cache platform-aware to prevent running into timeouts upon invocation\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 28,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2023-03-16T20:03:27Z",
        "closed_at": "2023-03-16T23:19:55Z",
        "merged_at": "2023-03-16T23:19:55Z",
        "body": "Currently in the process of trying to create some sample concerning CORS configuration of S3, and making a small sample allowing people to create their own CORS rules for their bucket but still allowing the `app.localstack.cloud` / resource browser to access it, I've encountered an issue with the `ListBuckets` operation. \r\n\r\nS3 is a \"self-managed\" CORS service, as it can manage the CORS setting of its buckets. However, the `ListBuckets` operation is not configurable, and should be using the default CORS setting of LocalStack. I've added a check in our general CORS handler to not skip setting CORS headers if the operation is `ListBuckets`. \r\n\r\nWhile creating the test, I've also found that if you try to access `http://localhost:4566`, it should return `ListBuckets`, but our service name parser does not recognise the request as it's not signed.\r\nFunnily, in AWS, if you do the same and try to access `s3.amazonaws.com` which is the default URL for `ListBuckets` in `us-east-1` without signing the request, you get redirected to https://aws.amazon.com/s3/.\r\n\r\nIf you use `s3.localhost.localstack.cloud` without signing the request, you'll get the response for `ListBuckets` because of the host matching.\r\nShould we match on the path being `/` as a sign of an S3 request?\r\n",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 49,
        "deletions": 5,
        "changed_files": 3,
        "created_at": "2023-03-16T19:31:44Z",
        "closed_at": "2023-03-17T15:33:33Z",
        "merged_at": null,
        "body": "This PR contains a small fix to enable the following pattern in `Server` implementations.\r\n\r\nOne example would be a socket server that (synchronously) accepts connections and then (asynchronously) handles them. Using a loop with an is_running check is a common pattern that helps performing cleanup when server shutdown has been requested.\r\n```\r\nclass MyServer(Server):\r\n    def do_run(self):\r\n        server_socket = ...\r\n        while self.is_running():\r\n            socket = server_socket.accept()\r\n            # handle connection ...\r\n        ...\r\n        # clean up ...\r\n```\r\n\r\nThis already works in 99.9% of cases, but there are some rare cases where we run into a race condition - if the server  thread that runs the `do_run(..)` method starts up prior to the `do_start_thread(..)` method returning the thread instance and assigning it to `self._thread`. This rare case was randomly discovered while developing a Server in an upstream repo - since `self._thread` was `None`, the `self.is_running()` check returned `False`, and the `while` loop returned immediately.\r\n\r\nA simple unit test has been added to ensure that `self.is_running()` is true right after server startup (even if `do_start_thread` happens to take more time to finish executing).",
        "comments": 5
    },
    {
        "merged": false,
        "additions": 11,
        "deletions": 3,
        "changed_files": 3,
        "created_at": "2023-03-16T18:37:25Z",
        "closed_at": "2023-03-28T09:43:53Z",
        "merged_at": null,
        "body": "Fix #7873 \r\n\r\n[Lambda nodejs handler](https://docs.aws.amazon.com/lambda/latest/dg/nodejs-handler.html) takes 3 arguments `(event, context, callback)` and `context` is an object with function `getRemainingTimeInMillis`.\r\n \r\n`lambda_executors` passes `context` without `getRemainingTimeInMillis` and does not pass a `callback`.\r\n\r\nIf a nodejs lambda uses `context.getRemainingTimeInMillis` or `callback`, it will work in aws but fail in localstack.\r\n\r\nThis PR adds `getRemainingTimeInMillis` to `context` and provides an empty implementation of `callback`.\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 6,
        "deletions": 44,
        "changed_files": 4,
        "created_at": "2023-03-16T17:15:45Z",
        "closed_at": "2023-03-16T22:18:00Z",
        "merged_at": "2023-03-16T22:18:00Z",
        "body": "This PR removes the immediate use of the `LEGACY_EDGE_PROXY` config flag. Dead code removal can happen at a later point.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 24,
        "deletions": 4,
        "changed_files": 2,
        "created_at": "2023-03-16T16:53:40Z",
        "closed_at": "2023-03-17T02:48:42Z",
        "merged_at": "2023-03-17T02:48:42Z",
        "body": "CloudWatch is using a scheduler, that should check if an alarm state should change periodically.\r\n\r\n* The scheduler should be restarted and check all existing metric-alarms for the `on_*_load` scenario.\r\n* The scheduler should also be restarted for the `on_*_reset` scenario\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-03-16T06:56:50Z",
        "closed_at": "2023-03-16T09:57:41Z",
        "merged_at": "2023-03-16T09:57:41Z",
        "body": "These variables are\n\n* `LOCALSTACK_HOSTNAME` which is not _meant_ to be settable by the user as it's used internally, but it is settable\n* `LOCALSTACK_HOST` which is a new variable that we plan to use in exchange for `HOSTNAME_EXTERNAL` and `LOCALSTACK_HOSTNAME`.\n\nThese variables are added so that we can use the analytics to see the usage of the previous variables drop.\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1426,
        "deletions": 154,
        "changed_files": 14,
        "created_at": "2023-03-15T16:10:29Z",
        "closed_at": "2023-03-21T17:39:29Z",
        "merged_at": "2023-03-21T17:39:29Z",
        "body": "Account limit config addresses https://github.com/localstack/localstack/issues/7074\r\n\r\n## Background\r\n\r\nAWS Lambda concurrency main docs page: https://docs.aws.amazon.com/lambda/latest/dg/lambda-concurrency.html\r\n![image](https://user-images.githubusercontent.com/8161292/225691980-bba261a7-1ca0-447f-b3df-b1f20d524189.png)\r\n\r\n## Assumptions\r\n\r\n* [Lambda quota](https://docs.aws.amazon.com/lambda/latest/dg/gettingstarted-limits.html) apply at different levels\r\n  * Typically \"per AWS region\" (e.g., `Concurrent executions`)\r\n\r\n## Implementation\r\n\r\n* We keep a counter per region and function by storing the unqualified function ARN in a dict, protected by locks.\r\n* The counter should only be updated for 'on-demand' invocation types because provisioned concurrency is always deduced immediately after adding a provisioned concurrency config.\r\n* We calculate `get_available_fn_concurrency` before allowing or denying every potential invocation\r\n\r\n## Open (will mostly come in later PRs\r\n\r\n- Check if there are any provisioned concurrency execution environments available before raising `TooManyRequestsException`. We generally want to favor provisioned execution environments over on-demand.\r\n- `get_available_fn_concurrency` for async invokes \ud83e\udd14 \r\n- [x] Make account limit configurable and monkeypatch the account settings test (opt-in parity)",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-03-15T13:16:06Z",
        "closed_at": "2023-03-16T07:42:23Z",
        "merged_at": "2023-03-16T07:42:23Z",
        "body": "Closes https://github.com/localstack/localstack/issues/7597\r\n\r\nSupersedes https://github.com/localstack/localstack/pull/7598",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 503,
        "deletions": 65,
        "changed_files": 5,
        "created_at": "2023-03-15T11:37:43Z",
        "closed_at": "2023-03-17T06:44:45Z",
        "merged_at": "2023-03-17T06:44:45Z",
        "body": "This PR is based on investigation done by @paullallier in https://github.com/localstack/localstack/issues/6815#issuecomment-1458573903\r\n\r\nLocalStack KMS Sign and Verify operations were double hashing the message payloads. This PR reworks these operations to rely on `cryptography` to perform hashing if required based on the value of `MessageType` argument.\r\n\r\nThe integration tests are also refactored to make the correct assertions.\r\n\r\nAlso checked that signatures produced by KMS:Sign can be correctly verified with OpenSSL (i.e. outside of the KMS:Verify operation).\r\n```\r\n$ cat msg.txt\r\nhello world\r\n\r\n$ awslocal kms create-key --key-spec RSA_4096 --key-usage SIGN_VERIFY\r\n\r\n{\r\n    \"KeyMetadata\": {\r\n        \"AWSAccountId\": \"000000000000\",\r\n        \"KeyId\": \"54ec6e0d-7356-4b08-897c-26eb7b134939\",\r\n        \"Arn\": \"arn:aws:kms:us-east-1:000000000000:key/54ec6e0d-7356-4b08-897c-26eb7b134939\",\r\n        \"CreationDate\": \"2023-03-15T23:06:05.913720+05:30\",\r\n        \"Enabled\": true,\r\n        \"Description\": \"\",\r\n        \"KeyUsage\": \"SIGN_VERIFY\",\r\n        \"KeyState\": \"Enabled\",\r\n        \"Origin\": \"AWS_KMS\",\r\n        \"KeyManager\": \"CUSTOMER\",\r\n        \"CustomerMasterKeySpec\": \"RSA_4096\",\r\n        \"KeySpec\": \"RSA_4096\",\r\n        \"SigningAlgorithms\": [\r\n            \"RSASSA_PKCS1_V1_5_SHA_256\",\r\n            \"RSASSA_PKCS1_V1_5_SHA_384\",\r\n            \"RSASSA_PKCS1_V1_5_SHA_512\",\r\n            \"RSASSA_PSS_SHA_256\",\r\n            \"RSASSA_PSS_SHA_384\",\r\n            \"RSASSA_PSS_SHA_512\"\r\n        ],\r\n        \"MultiRegion\": false\r\n    }\r\n}\r\n\r\n$ awslocal kms get-public-key --key-id 54ec6e0d-7356-4b08-897c-26eb7b134939 --output text --query PublicKey | base64 -d > pubkey.der\r\n\r\n$ openssl rsa -pubin -inform DER     -outform PEM -in pubkey.der     -pubout -out pubkey.pem\r\nwriting RSA key\r\n\r\n$ awslocal kms sign --key-id 54ec6e0d-7356-4b08-897c-26eb7b134939 --message-type RAW --message fileb://msg.txt --signing-algorithm RSASSA_PKCS1_V1_5_SHA_512 --output text --query Signature | base64 -d > sig.sig\r\n\r\n$ openssl dgst -sha512     -verify pubkey.pem     -signature sig.sig msg.txt\r\nVerified OK\r\n```\r\n\r\nSupersedes https://github.com/localstack/localstack/pull/7817\r\n\r\nFixes https://github.com/localstack/localstack/issues/6815, https://github.com/localstack/localstack/issues/7158",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 3,
        "changed_files": 1,
        "created_at": "2023-03-15T11:34:21Z",
        "closed_at": "2023-03-15T13:57:19Z",
        "merged_at": "2023-03-15T13:57:19Z",
        "body": null,
        "comments": 2
    },
    {
        "merged": false,
        "additions": 6,
        "deletions": 6,
        "changed_files": 1,
        "created_at": "2023-03-15T10:28:06Z",
        "closed_at": "2023-03-16T10:44:19Z",
        "merged_at": null,
        "body": "WIP upgrade the base image in Dockerfile to Debian Bullseye\r\n",
        "comments": 6
    },
    {
        "merged": true,
        "additions": 35,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-03-15T09:51:44Z",
        "closed_at": "2023-03-15T18:45:35Z",
        "merged_at": "2023-03-15T18:45:35Z",
        "body": "Since we currently have been advertising the newer provider implementations as `v2`, users might try to \"revert\" to the legacy provider by setting the `PROVIDER_OVERRIDE_<svc>` variable to `v1`. Unfortunately this will currently fail since they need to remove the variable completely.\r\n\r\nThis PR now introduces v1 aliases for the legacy (currently still default) providers with a `v2` provider, i.e. `lambda`, `s3` and `stepfunctions`\r\n\r\ncc @bentsku @dfangl ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 479,
        "deletions": 121,
        "changed_files": 26,
        "created_at": "2023-03-15T08:08:07Z",
        "closed_at": "2023-04-24T16:29:34Z",
        "merged_at": "2023-04-24T16:29:34Z",
        "body": "Keeping this as a draft since we're not merging any new features until mid April.\r\n\r\n## Changes\r\n- Adds `request_id` to the `RequestContext` object that is passed through the handler chain. In `serialize.py` we're now using this context request_id instead of creating new IDs. (@alexrashed  @thrau)\r\n- Format of request_id was adapted to conform to what we know from AWS for the majority of services (a uuid)\r\n- Updates the v2 lambda provider to use the request_id from the context  (@dfangl  @joe4dev)\r\n- Updates a few cases for s3 to use the request_id from the context (@bentsku)\r\n\r\n\r\n## Discussion\r\n\r\nS3 is so far the only one that seems to be behaving differently here.\r\n\r\nThere are actually 2 IDs for a request:\r\n```json\r\n{\r\n    \"x-amz-id-2\": \"k6Fag1MY0geEkMVqP1pi9o0WWmOms7zCOpt5hRXOUhgz+PoNgZOt+yFjc9e8b9WpPc+VlcShrZU=\",\r\n    \"x-amz-request-id\": \"RZQ2PVWKR3H7EYGV\"\r\n}\r\n```\r\n\r\nSee the comment below from @joe4dev for more details: https://github.com/localstack/localstack/pull/7874#issuecomment-1469653419\r\n\r\n\r\n## Potential Follow-up work\r\n\r\n- S3 needs a lot of special handling here since it has 2 (!) request IDs that both differ from the generic request ID here. (see discussion above)\r\n- Identify services that internally make use of the request ID",
        "comments": 5
    },
    {
        "merged": true,
        "additions": 322,
        "deletions": 4,
        "changed_files": 4,
        "created_at": "2023-03-15T00:56:09Z",
        "closed_at": "2023-03-18T14:56:12Z",
        "merged_at": "2023-03-18T14:56:12Z",
        "body": "This PR implements the validation when deleting a `Model` resource: it will check if it's in use in any Method of the RestAPI, and it is, will reject the call. This allows us to not have any integration calling a non existing Model anymore. \r\n\r\nThis logic will also be applied to `RequestValidator`, and maybe some other resources. We will extract the logic then into something more general when applying it to other resources. ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 500,
        "deletions": 235,
        "changed_files": 8,
        "created_at": "2023-03-15T00:09:53Z",
        "closed_at": "2023-03-20T17:07:22Z",
        "merged_at": "2023-03-20T17:07:22Z",
        "body": "Addresses https://github.com/localstack/localstack/issues/6942\r\n\r\nThis PR makes `ulimit` configurable for Lambda as an opt-in option and refactors the Docker flags parser:\r\n\r\n* Make `ulimit` configurable through `LAMBDA_DOCKER_FLAGS=--ulimit nofile=1024:1024 --ulimit nproc=735:735 --ulimit core=-1:-1`\r\n* Add parity test for `ulimit`\r\n* Add unit tests for ulimit, platform, and user flags\r\n* Refactor custom implementation of Docker flags parser using argparse. The custom subclass `NoExitArgumentParser` prevents the parser from exiting (default behavior for interactive CLI).\r\n* Split monolithic unit test case into logical segments and improve structure (mostly alphabetical ordering)",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 36,
        "deletions": 12,
        "changed_files": 2,
        "created_at": "2023-03-14T22:42:24Z",
        "closed_at": "2023-03-15T11:00:51Z",
        "merged_at": "2023-03-15T11:00:51Z",
        "body": "While testing lambda transparent endpoint injection, @thrau came across the issue that we were too restrictive with our domain matching. This is also part of @simonrw #7774, and should simplify the logic concerning matching on external hostname. @whummer also came across the new provider issue at the same time today.\r\n\r\nThis PR is building on the new test Waldemar implemented, and add more scenarios where we should properly match the route. This should be merged right after #7868.\r\n\r\n~The only question I have is: is `s3.localhost.localstack.cloud:{edge_port}` always resolvable from LocalStack? Or is it safer to target `localhost` when proxying the request to ourselves? I'd rather target `s3.localhost.localstack.cloud:{edge_port}` as the service parser will match more effectively against S3 than `localhost`.~\r\nedit: after checking with Thomas and Waldemar, it's faster to use `localhost` for the loopback network device. So we're target the request to `localhost`, but set the `Host` header to `s3.localhost.localstack.cloud:{edge_port}` to allow the service name parser to short-circuit and quickly know it's an S3 request. ",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 79,
        "deletions": 9,
        "changed_files": 3,
        "created_at": "2023-03-14T21:16:31Z",
        "closed_at": "2023-03-15T11:47:30Z",
        "merged_at": "2023-03-15T11:47:30Z",
        "body": "Fix S3 routing in moto to allow upload of `favicon.ico` files.\r\n\r\nThis issue surfaces primarily for hostname-based bucket addressing for Pro users with DNS integration, if an S3 client is making a request to `<bucket>.s3.amazonaws.com` domains.\r\n\r\nMoto defines the [following logic](https://github.com/getmoto/moto/blob/fe8d30ae6329878053a3ae980ed424c737fd8cec/moto/moto_server/werkzeug_app.py#L163-L164) to handle `/favicon.ico` paths as a special case:\r\n```\r\nif path_info.startswith(\"/moto-api\") or path_info == \"/favicon.ico\":\r\n    host = \"moto_api\"\r\n```\r\n\r\nOn a general note, I think we should verify if the routing to `<bucket>.s3.amazonaws.com` domains (i.e., defined via the `Host` HTTP header) is properly supported in the new S3 provider (for the different combinations of path-/host-based addressing). This is a fairly common use case for CloudFormation custom resources (e.g., via CDK templates). Would be great to get your help on this for the v2 switch @bentsku @thrau \ud83d\ude4c ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 98,
        "deletions": 0,
        "changed_files": 4,
        "created_at": "2023-03-14T18:26:03Z",
        "closed_at": "2023-03-27T17:08:35Z",
        "merged_at": "2023-03-27T17:08:35Z",
        "body": "This PR is for issue #7836 \r\nNo CORS configuration was implemented for S3 models if passed through the template. I have implemented the code to consider the CORSConfiguration, too while creating the bucket.\r\n\r\n@pinzon You can review it!",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 8,
        "deletions": 143,
        "changed_files": 7,
        "created_at": "2023-03-14T18:00:47Z",
        "closed_at": "2023-03-15T13:28:06Z",
        "merged_at": "2023-03-15T13:28:06Z",
        "body": "This PR removes code related to legacy directories, according to our deprecation notice.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 40,
        "changed_files": 1,
        "created_at": "2023-03-14T15:45:42Z",
        "closed_at": "2023-03-15T18:43:50Z",
        "merged_at": "2023-03-15T18:43:50Z",
        "body": "This PR removes the legacy `/docker-entrypoint-initaws.d` in favor of the modern [Init hooks](https://docs.localstack.cloud/references/init-hooks/) according to our [deprecation notice of v1.3](https://github.com/localstack/localstack/issues/7257).",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-03-14T14:24:51Z",
        "closed_at": "2023-03-15T07:52:51Z",
        "merged_at": "2023-03-15T07:52:51Z",
        "body": "Currently, when trying to use the [global transform from SecretsManager](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/transform-aws-secretsmanager.html), the entire deployment crashes as it's assuming that we don't know that custom macro name. As the transform itself isn't entirely necessary for local development (as it's needed for secret rotation), we can currently just notify that it's not supported and continue deploying the remainder of the stack instead of crashing.\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 102,
        "deletions": 4,
        "changed_files": 3,
        "created_at": "2023-03-14T11:01:19Z",
        "closed_at": "2023-03-15T01:04:32Z",
        "merged_at": "2023-03-15T01:04:32Z",
        "body": "As reported in #7861, our error message was not in parity with AWS (error thrown from moto). We now check before and raise an exception if the topic does not exist. Added a snapshot validated test.\r\n\r\nIt also shows we have a bit of work to do regarding `TopicAttributes`, regarding `DeliveryPolicy` which seems malformed.\r\n\r\n_fixes #7861_",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 109,
        "deletions": 8,
        "changed_files": 3,
        "created_at": "2023-03-13T22:43:26Z",
        "closed_at": "2023-03-14T08:34:24Z",
        "merged_at": "2023-03-14T08:34:24Z",
        "body": "Follow up from #7749, it seems the validation was lacking and a bit too restrictive while updating Authorizers-related fields. I've added more AWS tests, this should solve our Pro pipeline (tested locally and it works).",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 3,
        "deletions": 9,
        "changed_files": 2,
        "created_at": "2023-03-13T20:49:39Z",
        "closed_at": "2023-03-15T23:02:33Z",
        "merged_at": null,
        "body": "This PR sets the s3 v2 provider as the default provider",
        "comments": 3
    },
    {
        "merged": false,
        "additions": 3,
        "deletions": 3,
        "changed_files": 2,
        "created_at": "2023-03-13T20:48:28Z",
        "closed_at": "2023-03-20T18:52:31Z",
        "merged_at": null,
        "body": "This PR sets the v2 lambda provider as the default",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 0,
        "deletions": 0,
        "changed_files": 0,
        "created_at": "2023-03-13T20:47:30Z",
        "closed_at": "2023-03-23T16:21:38Z",
        "merged_at": null,
        "body": "v2 release branch. related to\r\n* https://github.com/localstack/localstack/issues/7882",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 4,
        "changed_files": 1,
        "created_at": "2023-03-13T20:40:00Z",
        "closed_at": "2023-03-15T05:44:52Z",
        "merged_at": "2023-03-15T05:44:52Z",
        "body": "Fixes https://github.com/localstack/localstack/issues/7216\r\n\r\nReturn the public key in SubjectPublicKeyInfo format for both RSA and ECDSA keys, per the AWS documentation: https://docs.aws.amazon.com/cli/latest/reference/kms/get-public-key.html#output\r\n\r\n**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 37,
        "deletions": 17,
        "changed_files": 3,
        "created_at": "2023-03-13T17:24:56Z",
        "closed_at": "2023-03-13T22:09:49Z",
        "merged_at": "2023-03-13T22:09:49Z",
        "body": "Encountered this issue when I was trying to replace a number that flaked between 0 and non-0\r\n\r\n## Changes\r\n* Explicitly check for `None` with matched result",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 7,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-03-13T17:03:30Z",
        "closed_at": "2023-03-14T11:03:00Z",
        "merged_at": "2023-03-14T11:03:00Z",
        "body": "small fix to handle openapi `x-amazon-apigateway-authorizer` extension for authorizer type `TOKEN`.\r\n\r\nhttps://docs.aws.amazon.com/apigateway/latest/developerguide/api-gateway-swagger-extensions-authorizer.html",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 55,
        "deletions": 3,
        "changed_files": 2,
        "created_at": "2023-03-13T13:38:00Z",
        "closed_at": "2023-03-13T22:09:26Z",
        "merged_at": "2023-03-13T22:09:26Z",
        "body": "Addresses #7847\r\n\r\nSince scheduled events don't have a pattern and it defaults to a \"{}\" pattern, they were always unintentionally triggering the targets of the scheduled event rule when calling `put_events` (which should only consider pattern-based event rules).\r\n\r\nTo fix this we now ignore any rules that have a `scheduled_expression` set (which would otherwise default to None).  ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 455,
        "deletions": 15,
        "changed_files": 7,
        "created_at": "2023-03-13T12:20:34Z",
        "closed_at": "2023-03-17T14:07:53Z",
        "merged_at": "2023-03-17T14:07:52Z",
        "body": "We had a wrong assumption when using a `RequestValidator` and validating the body of a request. If a method did not have a `requestModel` set, we would reject the request. However, AWS uses the default `Empty` model. We now follow the same logic.\r\n\r\nWe also did not have validation for validators before, and would return an empty response if no validators existed with that ID. Now, in parity with AWS, it raises an exception instead of returning `None`.\r\nHowever, that case should not happen because it's not possible to delete an existing `RequestValidator` if it's used by a `Method` in AWS. I'll try to implement this behaviour in following PR. \r\n\r\nWe needed to change the code in `invocations.py` to reflect the change when checking if a request is valid.\r\n\r\nnote: created a `test_apigateway_common`, where we could test \"integrations\", or how different RestAPI resources work together, on a level above the CRUD one. If you have a better name than \"common\", I'm all ears \ud83d\ude04 \r\n\r\n_fixes in part #7842_ \r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2023-03-13T10:27:41Z",
        "closed_at": "2023-03-13T14:13:10Z",
        "merged_at": "2023-03-13T14:13:09Z",
        "body": "Just realised I wasn't tagged in a test modification in S3, so as seen with @alexrashed, updating it.\r\n\r\nAlso using a fixture in the s3 test to not leave a dangling S3 bucket. ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 79,
        "deletions": 14,
        "changed_files": 3,
        "created_at": "2023-03-13T05:02:59Z",
        "closed_at": "2023-03-13T07:53:49Z",
        "merged_at": "2023-03-13T07:53:49Z",
        "body": "# \ud83d\ude80 ASF Update Report \ud83d\ude80\nThis PR has been automatically generated to update the generated API stubs for our ASF services.\nIt uses the latest code-generator from the _master_ branch ([scaffold.py](https://github.com/localstack/localstack/blob/master/localstack/aws/scaffold.py)) and the latest _published_ version of [botocore](https://github.com/boto/botocore) to re-generate all API stubs which are already present in the `localstack.aws.api` module of the _master_ branch.\n\n## \ud83d\udd04 Updated Services\nThis PR updates the following services:\n- dynamodb\n- ec2\n- route53resolver\n\n## \ud83d\udc77\ud83c\udffd Handle this PR\nThe following options describe how to interact with this PR / the auto-update:\n\n\u2714\ufe0f **Accept Changes**\nIf the changes are satisfying, just squash-merge the PR and delete the source branch.\n\n\ud83d\udeab **Ignore Changes**\nIf you want to ignore the changes in this PR, just close the PR and *do not delete* the source branch. The PR will not be opened and a new PR will not be created for as long as the generated code does not change (or the branch is deleted). As soon as there are new changes, a new PR will be created.\n\n\u270f\ufe0f **Adapt Changes**\n*Don't do this.* The APIs are auto-generated. If you decide that the APIs should look different, you have to change the code-generation.\n\n\u23f8\ufe0f **Pause Updates**\nRemove the cron-schedule trigger of the GitHub Action workflow which creates these PRs. The action can then still be triggered manually, but it will not be executed automatically.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 887,
        "deletions": 846,
        "changed_files": 18,
        "created_at": "2023-03-13T01:41:32Z",
        "closed_at": "2023-03-16T09:08:05Z",
        "merged_at": "2023-03-16T09:08:05Z",
        "body": "Refactor API Gateway tests, assert correct JSON content-type for DynamoDB integration. \r\n\r\nSummary of changes:\r\n* move the remaining API GW tests into the `tests/integration/apigateway` module\r\n* move IAM policies required by fixtures in `conftest.py` into that same file\r\n* minor change to initialize `response` in the invocation context (to avoid `AttributeError`)\r\n* fix DynamoDB integration to return proper content-type (`application/json`)\r\n* extend `test_rest_api_to_dynamodb_integration` snapshot test to also capture the response headers (to verify that the content-type matches)\r\n* use `echo_http_server` fixture instead of making `httpbin.org` requests (should fix some flaky tests with 504 timeouts) - some TODOs still remaining in the codebase\r\n\r\nSide note: As also mentioned in the PR comment below, in a future iteration we should unify the logic/interface of integration response handling. \ud83d\udc4d  /cc @calvernaz @bentsku ",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 9,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2023-03-10T14:49:16Z",
        "closed_at": "2023-03-11T15:32:49Z",
        "merged_at": "2023-03-11T15:32:49Z",
        "body": "This PR removes a duplicate slash when creating the queue url under the `path` endpoint strategy\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 32,
        "deletions": 3,
        "changed_files": 3,
        "created_at": "2023-03-10T09:52:43Z",
        "closed_at": "2023-03-14T11:19:25Z",
        "merged_at": "2023-03-14T11:19:25Z",
        "body": "Allows the `--privileged` flag to be passed in `additional_flags` when running Docker containers.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 44,
        "deletions": 4,
        "changed_files": 2,
        "created_at": "2023-03-09T21:02:54Z",
        "closed_at": "2023-03-14T12:46:36Z",
        "merged_at": "2023-03-14T12:46:36Z",
        "body": "Adding the persistence plugin hooks to the StepFunctions provider.",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 149,
        "deletions": 12,
        "changed_files": 5,
        "created_at": "2023-03-09T20:16:57Z",
        "closed_at": "2023-03-10T05:20:02Z",
        "merged_at": "2023-03-10T05:20:02Z",
        "body": "A single lambda function can be associated with multiple `AWS::Lambda::Permission` resources. This was fundamentally incompatible with how the previous fetch_state \"worked'. \r\n\r\n## Changes\r\n* Added a test for adding multiple AWS::Lambda::Permission resources for a single function\r\n* Fixed `fetch_state` & physical resource id for `AWS::Lambda::Permission`\r\n* Fixed overwriting `Code` properties in `AWS::Lambda::Function` which lead to unnecessary updates in certain cases",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 20,
        "deletions": 10,
        "changed_files": 2,
        "created_at": "2023-03-09T20:02:01Z",
        "closed_at": "2023-03-09T22:24:18Z",
        "merged_at": null,
        "body": "Ommiting the host port from the a -p flag added to LAMBDA_DOCKER_FLAGS will cause docker to map a random host port to the container port.\r\n\r\nAn example use case is to have multiple Node.js Lambdas having the Inspector enabled and accessible from the host on different ports.\r\n\r\nFor example:\r\nLAMBDA_DOCKER_FLAGS: -e NODE_OPTIONS=--inspect=0.0.0.0:9230 -p :9230\r\n\r\n**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2023-03-09T18:11:23Z",
        "closed_at": "2023-03-09T19:42:20Z",
        "merged_at": "2023-03-09T19:42:20Z",
        "body": "## Motivation\r\nMaster build is currently red due to some threads not having the _target attribute, and the thread leakage detection therefore failing.\r\n\r\n## Changes\r\nCheck if a thread has the _target attribute before accessing it, otherwise just print `None`.",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 725,
        "deletions": 201,
        "changed_files": 9,
        "created_at": "2023-03-09T17:18:25Z",
        "closed_at": "2023-03-16T13:18:37Z",
        "merged_at": "2023-03-16T13:18:37Z",
        "body": "Adjusting parity for `Model` resource.\r\nI took the opportunity to move the `Model` resource out of moto and into our own store, as there was no dependency between any other resources, only CRUD API with no validation was implemented in moto.\r\n\r\nAlso fixed the logic while validating the request, we would call `get_model` not expecting it to raise an Exception.\r\n(Same issue as in #7846 for validators, will add a proper test in the mentioned PR)\r\n\r\nedit: modified a check in the validation for the model existence (previously in moto, now in our store) that wasn't caught with the tests, will add in a following PR.",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 129,
        "deletions": 108,
        "changed_files": 2,
        "created_at": "2023-03-09T16:46:18Z",
        "closed_at": "2023-03-09T21:28:40Z",
        "merged_at": "2023-03-09T21:28:40Z",
        "body": "This PR refactors the DynamoDB provider to use the new lifecycle hooks.\r\nIn addition, it refactors the singleton instance of the server into the provider itself. Due to these changes, the methods to start the server are not accessible at module level anymore. See related [ext PR](https://github.com/localstack/localstack-ext/pull/1435). ",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 35,
        "deletions": 0,
        "changed_files": 4,
        "created_at": "2023-03-09T16:38:36Z",
        "closed_at": "2023-03-13T10:10:50Z",
        "merged_at": "2023-03-13T10:10:50Z",
        "body": "This PR is for the fix of issue #7494 \r\nInitially, there was no validation on alias names done to create an alias. I have added the Alias name validation which would raise a ValidationException if the given alias name doesn't start with \"alias/\"\r\n\r\n@bentsku You can review this.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 96,
        "deletions": 126,
        "changed_files": 4,
        "created_at": "2023-03-08T23:59:47Z",
        "closed_at": "2023-03-09T21:27:49Z",
        "merged_at": "2023-03-09T21:27:49Z",
        "body": "This PR refactors our Kinesis provider to use the new state lifecycle hooks.\r\n\r\n* Encapsulate starting and stopping of account-specific kinesis-mock backends into `KinesisServerManager`\r\n* Implements the state lifecycle hook methods to properly shut down the managed kinesis backends\r\n  * `on_before_state_load`: before a state load, we only need to shut down already running kinesis backends. the kinesis backends are re-started lazily the next time they are requested.\r\n  * same with `on_before_state_reset`\r\n  * `on_before_stop` just shuts them down\r\n\r\ntested manually with the new persistence plugin using localstack-ext\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 141,
        "deletions": 50,
        "changed_files": 8,
        "created_at": "2023-03-08T23:35:13Z",
        "closed_at": "2023-03-10T12:24:07Z",
        "merged_at": "2023-03-10T12:24:07Z",
        "body": "Improves lambda runtime parity related to user and environment variables:\r\n\r\n* Update Lambda runtime RIE:\r\n  * Switch to `sbx_user1051` user for runtime parity and drop root privileges.\r\n  * Unset internal environment variables\r\n* Systematically group environment variables fix parity mismatches\r\n* Extend snapshot tests for important paths regarding permissions and user/group attributes\r\n* Add `LAMBDA_INIT_USER` flag and populate it automatically to overcome RIE debugging limitation when dropping privileges\r\n\r\nRelated to https://github.com/localstack/lambda-runtime-init/pull/13\r\n\r\nAddresses https://github.com/localstack/localstack/issues/7722",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 24,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2023-03-08T20:58:36Z",
        "closed_at": "2023-03-11T08:05:46Z",
        "merged_at": "2023-03-11T08:05:46Z",
        "body": "Fix to handle OpenAPI 3.0 security schemes object - https://swagger.io/specification/v3/#security-scheme-object\r\n\r\nTerraform sample: https://github.com/localstack/localstack-terraform-samples/tree/master/apigateway-openapi-3.0-import",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 48,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2023-03-08T17:57:23Z",
        "closed_at": "2023-04-03T20:05:39Z",
        "merged_at": "2023-04-03T20:05:39Z",
        "body": "This PR mostly add a test to verify behaviour raised in a community slack issue. The PHP SDK allows the user to specify a bucket with a slash in the name while generating a pre-signed URL. However, this is not allowed by AWS, and we would not raise the proper exception (and there was a small issue in our calculation, as we were using the sanitized path to create the `CanonicalRequest` used for the signature). \r\n\r\nI just added some proper exceptions in that case for the test to pass like it would against AWS. ",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-03-08T12:23:10Z",
        "closed_at": "2023-03-15T08:25:13Z",
        "merged_at": null,
        "body": null,
        "comments": 3
    },
    {
        "merged": true,
        "additions": 10,
        "deletions": 4,
        "changed_files": 1,
        "created_at": "2023-03-08T07:17:50Z",
        "closed_at": "2023-03-08T09:31:54Z",
        "merged_at": "2023-03-08T09:31:54Z",
        "body": "This PR adds a CPU arch standardisation helper for reusability.",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 4,
        "deletions": 4,
        "changed_files": 1,
        "created_at": "2023-03-07T21:17:08Z",
        "closed_at": "2023-03-15T12:11:36Z",
        "merged_at": null,
        "body": "This may be an improvement on issue #6815 - hopefully.\r\nMay also relate to issue #7158.",
        "comments": 12
    },
    {
        "merged": true,
        "additions": 28,
        "deletions": 7,
        "changed_files": 2,
        "created_at": "2023-03-07T13:38:35Z",
        "closed_at": "2023-03-09T09:40:08Z",
        "merged_at": "2023-03-09T09:40:08Z",
        "body": "Resolves #7491 \r\n\r\nAdded the following endpoints:\r\n- `DELETE _localstack/ses` requested by the issue\r\n- `DELETE _localstack/ses?id=<message_id>` [requested in a comment](https://github.com/localstack/localstack/issues/7491#issuecomment-1414126917) \r\n- `GET       _localstack/ses?id=<message_id>` added to match the DELETE by id",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 10,
        "deletions": 58,
        "changed_files": 4,
        "created_at": "2023-03-07T11:58:20Z",
        "closed_at": "2023-03-13T09:51:23Z",
        "merged_at": "2023-03-13T09:51:23Z",
        "body": "Bumps moto-ext to 4.1.4.post1 \r\n\r\nAlso reverts localstack/localstack#7700 as this is now included in moto",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 32,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2023-03-06T12:39:27Z",
        "closed_at": "2023-03-08T16:59:09Z",
        "merged_at": "2023-03-08T16:59:09Z",
        "body": null,
        "comments": 2
    },
    {
        "merged": true,
        "additions": 47,
        "deletions": 7,
        "changed_files": 3,
        "created_at": "2023-03-06T05:04:12Z",
        "closed_at": "2023-03-06T07:50:27Z",
        "merged_at": "2023-03-06T07:50:26Z",
        "body": "# \ud83d\ude80 ASF Update Report \ud83d\ude80\nThis PR has been automatically generated to update the generated API stubs for our ASF services.\nIt uses the latest code-generator from the _master_ branch ([scaffold.py](https://github.com/localstack/localstack/blob/master/localstack/aws/scaffold.py)) and the latest _published_ version of [botocore](https://github.com/boto/botocore) to re-generate all API stubs which are already present in the `localstack.aws.api` module of the _master_ branch.\n\n## \ud83d\udd04 Updated Services\nThis PR updates the following services:\n- ec2\n- lambda-\n- transcribe\n\n## \ud83d\udc77\ud83c\udffd Handle this PR\nThe following options describe how to interact with this PR / the auto-update:\n\n\u2714\ufe0f **Accept Changes**\nIf the changes are satisfying, just squash-merge the PR and delete the source branch.\n\n\ud83d\udeab **Ignore Changes**\nIf you want to ignore the changes in this PR, just close the PR and *do not delete* the source branch. The PR will not be opened and a new PR will not be created for as long as the generated code does not change (or the branch is deleted). As soon as there are new changes, a new PR will be created.\n\n\u270f\ufe0f **Adapt Changes**\n*Don't do this.* The APIs are auto-generated. If you decide that the APIs should look different, you have to change the code-generation.\n\n\u23f8\ufe0f **Pause Updates**\nRemove the cron-schedule trigger of the GitHub Action workflow which creates these PRs. The action can then still be triggered manually, but it will not be executed automatically.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 392,
        "deletions": 200,
        "changed_files": 6,
        "created_at": "2023-03-04T19:45:23Z",
        "closed_at": "2023-03-11T21:26:04Z",
        "merged_at": "2023-03-11T21:26:03Z",
        "body": "As we're currently working on persistence, I'd like to refactor the SNS store to facilitate lookup and have its data structures more aligned with how we are using them in the provider and to how AWS stores them.\r\n\r\nAdded some validations where I had questions on how AWS would behave. ",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-03-03T22:53:39Z",
        "closed_at": "2023-03-05T15:18:53Z",
        "merged_at": "2023-03-05T15:18:53Z",
        "body": "This PR passes the `cwd` argument through the `ShellCommandThread` to the underlying `popen` command.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 2674,
        "deletions": 0,
        "changed_files": 6,
        "created_at": "2023-03-03T09:32:07Z",
        "closed_at": "2023-03-08T17:00:00Z",
        "merged_at": "2023-03-08T16:59:59Z",
        "body": "Adds tests based on workflow samples from [serverlessland.com](https://serverlessland.com/workflows?type=Standard&simplicity=1+-+Fundamental)\r\n\r\n- [x] path-based-on-data\r\n- [x] wait-for-callback\r\n- [x] step-functions-calling-api-gateway\r\n\r\n\r\nI've had to drop a lot of the samples since they were a poor fit (either too complicated or too simple and some of them didn't even properly allow testing all paths defined in the workflow definition). The rest were all simplified/fixed.\r\n\r\nAll tests are designed to be able to take a single CloudFormation template as an input with lambda code & workflow definitions being included in-line in the template.\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 86,
        "deletions": 2,
        "changed_files": 3,
        "created_at": "2023-03-02T23:22:08Z",
        "closed_at": "2023-03-17T21:16:39Z",
        "merged_at": "2023-03-17T21:16:39Z",
        "body": "This PR adds logic to our fallback exception handler to render werkzeug HTTPException instances.\r\n\r\nPreviously, calling internal resources (or custom routes that would not be detected as s3 routes) with wrong methods would output:\r\n\r\n```json\r\n{\r\n  \"error\": \"Unexpected exception\",\r\n  \"message\": \"405 Method Not Allowed: The method is not allowed for the requested URL.\",\r\n  \"type\": \"MethodNotAllowed\"\r\n}\r\n```\r\n\r\nbecause it interprets the `MethodNotAllowed` exception as unexpected exception. with this new logic that generalize capturing of werkzeug HTTP exceptions, you can actually raise HTTP exceptions from within handlers, and get proper exception messages:\r\n\r\n```json\r\n{\r\n  \"error\": \"Method Not Allowed\",\r\n  \"message\": \"The method is not allowed for the requested URL.\"\r\n}\r\n```\r\n\r\nUnfortunately, because the service name parser is still executed before the router handler, it doesn't work for most requests, since those are captured by the `ServiceExceptionSerializer` which will serialize exceptions into s3 exceptions although the calls are not being made to s3. I added a bunch of tests & xfailed tests to document the expected behavior once that is remedied.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-03-02T21:58:51Z",
        "closed_at": "2023-03-03T20:38:47Z",
        "merged_at": "2023-03-03T20:38:47Z",
        "body": "Adds a runtime hook used in pro and plugins that is only run when pro is activated. This makes it easier to hook in functionality that's conditionally after license activation. ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 323,
        "deletions": 2,
        "changed_files": 5,
        "created_at": "2023-03-02T20:06:23Z",
        "closed_at": "2023-03-12T14:36:23Z",
        "merged_at": "2023-03-12T14:36:22Z",
        "body": "A user reported an issue in the community slack channel that they could not use a Terraform module creating a RestAPI with API Gateway after 1.4.0.\r\n\r\nTerraform was creating then updating the API, we would send a 200 status code but it would keep going (it felt like we were returning something unexpected or wrong). \r\n\r\nAfter running the user sampler and re-using the data sent by Terraform to create a snapshot AWS validated test, it seemed the version type we returned was an `int` when AWS returns a `str`. After fixing that, the user sample is running.\r\n\r\nThe snapshot test shows the lack of parity while importing an API, but some of it might be because of how we return the data, and should be fix in our parity effort. Anyway, it's a good indicator on where to focus some effort.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 183,
        "deletions": 8,
        "changed_files": 4,
        "created_at": "2023-03-02T18:31:11Z",
        "closed_at": "2023-03-08T11:38:58Z",
        "merged_at": "2023-03-08T11:38:58Z",
        "body": "As reported in #7782, we did not check the state of the KMS key when validating it.\r\nNote that we need to set `S3_SKIP_KMS_KEY_VALIDATION` to `0` if we want this validation to be active, as we don't validate the existence of the KMS key per default, and only in the new provider (`PROVIDER_OVERRIDE_S3=asf`). \r\n\r\nThis PR implements the validation of the state and a AWS validated snapshot test, as well as a fix for the key format when returned (keyArn instead of just the keyId). \r\n\r\n_fixes #7782_",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 91,
        "deletions": 0,
        "changed_files": 6,
        "created_at": "2023-03-02T18:21:41Z",
        "closed_at": "2023-03-05T22:51:24Z",
        "merged_at": "2023-03-05T22:51:24Z",
        "body": "This PR uses the persistence API to integrate community services into the persistence lifecycle. It's \"basic\" because it doesn't fully add restore functionality for every services.\r\n* added `accept_state_visitor` methods to community services that have an asset directory\r\n* added the `SAVE_STRATEGY` variable used by the persistence plugin to the config\r\n* I was able to add the restore functionality for opensearch (tested manually), but not for others. Those will be part of follow-up PRs once we have a good persistence testing setup.\r\n* I also snuck in the two parameters to the opensearch `create_domain`  method that were missing after the last ASF API update /cc @alexrashed ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 771,
        "deletions": 7,
        "changed_files": 6,
        "created_at": "2023-03-02T17:20:50Z",
        "closed_at": "2023-04-24T08:25:44Z",
        "merged_at": "2023-04-24T08:25:44Z",
        "body": "Extends https://github.com/localstack/localstack/pull/7764\r\n\r\nAdds baseline implementation of  `Timestamp*` operators\r\nAdds tests for added operators",
        "comments": 3
    },
    {
        "merged": false,
        "additions": 75,
        "deletions": 23,
        "changed_files": 3,
        "created_at": "2023-03-02T16:56:44Z",
        "closed_at": "2023-03-07T19:45:20Z",
        "merged_at": null,
        "body": "Fix for issue #7657 \r\n\r\nNow the get-template response for the command with created stack-name \"test-stack\": \r\n`awslocal cloudformation get-template --stack-name test-stack` returns\r\n\r\n``` {\r\n    \"TemplateBody\": {\r\n        \"Resources\": {\r\n            \"topic69831491\": {\r\n                \"Type\": \"AWS::SNS::Topic\"\r\n            }\r\n        },\r\n        \"Outputs\": {\r\n            \"TopicName\": {\r\n                \"Value\": {\r\n                    \"Fn::GetAtt\": [\r\n                        \"topic69831491\",\r\n                        \"TopicName\"\r\n                    ]\r\n                }\r\n            }\r\n        },\r\n        \"StackName\": \"test-stack\",\r\n        \"ChangeSetName\": \"awscli-cloudformation-package-deploy-1678120472\"\r\n    },\r\n    \"StagesAvailable\": [\r\n        \"Original\",\r\n        \"Processed\"\r\n    ]\r\n}\r\n```",
        "comments": 5
    },
    {
        "merged": true,
        "additions": 20,
        "deletions": 5,
        "changed_files": 3,
        "created_at": "2023-03-02T00:29:45Z",
        "closed_at": "2023-03-25T16:04:54Z",
        "merged_at": "2023-03-25T16:04:54Z",
        "body": "### Summary\r\n\r\nMinor fix to handle template expressions for WebSockets API for the simplest case, non VTL expressions.\r\n\r\nhttps://docs.aws.amazon.com/apigateway/latest/developerguide/websocket-api-data-transformations.html#apigateway-websocket-api-template-selection-expressions\r\n\r\n### Issues\r\n\r\nHandles https://github.com/localstack/localstack/issues/7737",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 87,
        "deletions": 1,
        "changed_files": 3,
        "created_at": "2023-03-01T22:02:38Z",
        "closed_at": "2023-03-02T16:40:54Z",
        "merged_at": "2023-03-02T16:40:54Z",
        "body": "Enhance CloudFormation parity for policy of API Gateway REST APIs . Addresses #7773",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 390,
        "deletions": 24,
        "changed_files": 11,
        "created_at": "2023-03-01T14:33:28Z",
        "closed_at": "2023-03-20T09:37:36Z",
        "merged_at": "2023-03-20T09:37:36Z",
        "body": "This PR centralises the way we decide what hostname is returned when requested by the resource.\n\nThis PR contains tests that ensure the _current_ behaviour. This is important as I consider changing the way the user configures returned names to be a backwards incompatible change. In a future PR when v2 will be released, we will update the new url function to be systematic, based on the new configuration.\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 851,
        "deletions": 328,
        "changed_files": 6,
        "created_at": "2023-03-01T14:07:40Z",
        "closed_at": "2023-04-24T06:51:07Z",
        "merged_at": "2023-04-24T06:51:07Z",
        "body": "Extends https://github.com/localstack/localstack/pull/7764\r\n\r\n- Adds baseline implementation of  `String*` operators\r\n- Adds tests for added operators",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 290,
        "deletions": 12,
        "changed_files": 4,
        "created_at": "2023-03-01T13:28:38Z",
        "closed_at": "2023-03-01T21:58:09Z",
        "merged_at": "2023-03-01T21:58:09Z",
        "body": "This PR fixes #7768, a regression introduced by remove a call to `json_safe` on the payload.\r\nHowever, there was no payload to get here, because the lambda invocation is asynchronous. The parity was wrong here, and it's nice to be able to introduce additional behaviour in SNS.\r\nI've introduced a test by retrieving CloudWatch logs for this particular scenario and improved parity.\r\n\r\nWe would still need to check parity for all other \"Publisher\" (SQS, Kinesis, HTTP and Platform application endpoint), to see how they store their logs. See https://docs.aws.amazon.com/sns/latest/dg/sns-topic-attributes.html\r\n\r\nWe will also need to add a conditional on storing the logs, as they should be enabled first. \r\n\r\nNote: I'll introduce a scenario fixture regarding setting up the logs for Success/Failure in SNS when introducing the next parity check for another publisher!",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 3,
        "changed_files": 1,
        "created_at": "2023-03-01T00:12:53Z",
        "closed_at": "2023-03-01T19:12:38Z",
        "merged_at": "2023-03-01T19:12:38Z",
        "body": "Alias records, for example, should explicitly not have a TTL set, as it's derived from the TTL of the target.\r\n\r\n\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1881,
        "deletions": 0,
        "changed_files": 4,
        "created_at": "2023-02-28T21:02:18Z",
        "closed_at": "2023-04-24T05:53:10Z",
        "merged_at": "2023-04-24T05:53:10Z",
        "body": "Extends [MEP-sfn-choice-ops](https://github.com/localstack/localstack/pull/7764)\r\n- Adds baseline implementation of  `Numeric*` operators\r\n- Adds tests for added operators",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-02-28T17:15:38Z",
        "closed_at": "2023-03-01T07:36:55Z",
        "merged_at": "2023-03-01T07:36:55Z",
        "body": "Greenify pipeline: Fixes a suddenly failing test case for the new lambda provider `tests.integration.awslambda.test_lambda_common.TestLambdaRuntimesCommon.test_introspection_invoke[nodejs18.x]`\r\nhttps://app.circleci.com/pipelines/github/localstack/localstack/12943/workflows/a0a0ec66-a580-472f-8ae7-66a573f3a2d6/jobs/93952\r\n\r\nQuickfix skips snapshot validation for the environment variable `NODE_EXTRA_CA_CERTS` (only occurs for nodjs18 runtime)\r\n\r\n\r\n## Follow up\r\n\r\n- [ ] Check whether we need to set `NODE_EXTRA_CA_CERTS` explicitly to ensure runtime parity for the Nodejs18 runtime.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 3261,
        "deletions": 85,
        "changed_files": 20,
        "created_at": "2023-02-28T13:28:10Z",
        "closed_at": "2023-04-03T13:57:53Z",
        "merged_at": "2023-04-03T13:57:53Z",
        "body": "- Improves the choice operation delegation strategy\r\n- Adds baseline implementation of `Is*` and `BooleanEquals*` operators\r\n- Adds testing setup/env\r\n- Adds tests for added operators\r\n\r\nNote: logs a warning on invocations of `IsTimestamp` as AWS's behaviour can only be partially replicated at this time.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2394,
        "deletions": 558,
        "changed_files": 29,
        "created_at": "2023-02-27T19:31:55Z",
        "closed_at": "2023-03-01T12:04:23Z",
        "merged_at": "2023-03-01T12:04:23Z",
        "body": "## Contributions\r\n\r\n* Add support for [runtime management controls](https://docs.aws.amazon.com/lambda/latest/dg/runtimes-update.html) at API level\r\n* Add support for [SnapStart](https://docs.aws.amazon.com/lambda/latest/dg/snapstart.html) at API level\r\n* Add snapshot tests for SnapStart API\r\n* Update all lambda-related snapshot tests due to model updates (only for `aws_validated` tests)\r\n* Add platform flag to docker clients for `build_image`\r\n* Fix Lambda tests on ARM hosts. This enables running Lambda tests on ARM hosts.\r\n* Conditionally skip the concurrency tests if the AWS account has too low limits (improve error messages).\r\n\r\n## Limitations\r\n\r\n* Runtime management controls use a hard-coded sha256 value (`8eeff65f6809a3ce81507fe733fe09b835899b99481ba22fd75b5a7338290ec1`) instead of inspecting the Docker image.\r\n* Rust builds on ARM (tested on M1 MacBook Pro) are slow (~5 minutes) due to emulation. See Makefile for potential performance improvements.\r\n* The SnapStart tests are a little slow (~1-2min) against AWS\r\n\r\n## Breaking changes\r\n\r\n* This PR includes model changes in lambda and will break CloudPods for the new lambda provider",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 195,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2023-02-27T08:18:54Z",
        "closed_at": "2023-03-06T06:38:20Z",
        "merged_at": "2023-03-06T06:38:20Z",
        "body": "This PR contains AWS validated test case for the issue mentioned in #5025.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 157,
        "deletions": 4,
        "changed_files": 1,
        "created_at": "2023-02-27T05:03:35Z",
        "closed_at": "2023-02-27T07:21:48Z",
        "merged_at": "2023-02-27T07:21:48Z",
        "body": "# \ud83d\ude80 ASF Update Report \ud83d\ude80\nThis PR has been automatically generated to update the generated API stubs for our ASF services.\nIt uses the latest code-generator from the _master_ branch ([scaffold.py](https://github.com/localstack/localstack/blob/master/localstack/aws/scaffold.py)) and the latest _published_ version of [botocore](https://github.com/boto/botocore) to re-generate all API stubs which are already present in the `localstack.aws.api` module of the _master_ branch.\n\n## \ud83d\udd04 Updated Services\nThis PR updates the following services:\n- opensearch\n\n## \ud83d\udc77\ud83c\udffd Handle this PR\nThe following options describe how to interact with this PR / the auto-update:\n\n\u2714\ufe0f **Accept Changes**\nIf the changes are satisfying, just squash-merge the PR and delete the source branch.\n\n\ud83d\udeab **Ignore Changes**\nIf you want to ignore the changes in this PR, just close the PR and *do not delete* the source branch. The PR will not be opened and a new PR will not be created for as long as the generated code does not change (or the branch is deleted). As soon as there are new changes, a new PR will be created.\n\n\u270f\ufe0f **Adapt Changes**\n*Don't do this.* The APIs are auto-generated. If you decide that the APIs should look different, you have to change the code-generation.\n\n\u23f8\ufe0f **Pause Updates**\nRemove the cron-schedule trigger of the GitHub Action workflow which creates these PRs. The action can then still be triggered manually, but it will not be executed automatically.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 412,
        "deletions": 355,
        "changed_files": 7,
        "created_at": "2023-02-26T13:02:00Z",
        "closed_at": "2023-02-27T08:57:39Z",
        "merged_at": "2023-02-27T08:57:39Z",
        "body": "Enable generic actions and further enhance parity for DynamoDB API GW integration. Follow-up from #7753 \r\n\r\nSo far, we had support for `dynamodb:action/PutItem` and `dynamodb:action/Query` DynamoDB integrations. While working on deploying a more complex [AWS sample app](https://github.com/aws-samples/serverless-coffee-workshop) against LocalStack, the requirements for further integration operations came up (incl. `dynamodb:action/Scan`, among others). \r\n\r\nSummary of changes:\r\n* make the DynamoDB integration generic - accepting any type of valid `dynamodb:action/*` integration action that can be executed against DynamoDB\r\n* add snapshot test for additional DynamoDB integrations (incl. `PutItem`, `Scan`)\r\n* refactor additional `invocations.py` into separate backend classes in `integrations.py`\r\n\r\n/cc @calvernaz @bentsku @joe4dev ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 499,
        "deletions": 296,
        "changed_files": 11,
        "created_at": "2023-02-25T18:19:19Z",
        "closed_at": "2023-02-25T22:11:36Z",
        "merged_at": "2023-02-25T22:11:35Z",
        "body": "Enhance parity for API Gateway DynamoDB integrations. Follow-up from https://github.com/localstack/localstack/pull/7572\r\n\r\nThe PR also contains a few refactorings, starting to pull more of the service-specific integrations as classes into `integrations.py`\r\n\r\nSummary of changes:\r\n* pull out logic for Kinesis/DDB integrations into separate `KinesisIntegration` and `DynamoDBIntegration`\r\n* add snapshot test for DDB integration\r\n* introduce a couple more `@patch` decorators for API GW patches\r\n* add `BadRequestException` for incorrect use of `AWS_PROXY` integration (AWS parity)\r\n* extract generic `create_rest_api_with_integration` fixture that can used for DDB&Kinesis integration tests (and other integrations in the future)",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 457,
        "deletions": 318,
        "changed_files": 7,
        "created_at": "2023-02-25T13:10:01Z",
        "closed_at": "2023-03-09T16:13:51Z",
        "merged_at": "2023-03-09T16:13:51Z",
        "body": "This PR refactors the store of API Gateway to make use of dictionary for an easier look up of RestAPI sub-entities.\r\n~~I've added utilities to support the use of both old restored stores and new, fresh stores, but it makes it a bit verbose.~~\r\n\r\nThis refactor will also help in the recent parity work, to move more data into our stores and add more validations.\r\n\r\nI'm not sure how much breakage we can do with persistence, but if we can break, I'll remove the utils and just use the new store attributes directly, which will be much cleaner. If we can't break it yet, we can keep those utils to support restored state, and remove them before `v2`. I will be working on API Gateway until then, so I can undertake that effort then. \r\n\r\nAlso cleaned up some methods that were not used anymore anywhere. \r\n\r\n\\cc @whummer @thrau about how this should tackled, should I break the store, or use these utils until then? \r\n\r\nnote: green lighted the breakage of persistence, so now this PR just uses the new store format \ud83d\ude04 ",
        "comments": 5
    },
    {
        "merged": true,
        "additions": 904,
        "deletions": 78,
        "changed_files": 6,
        "created_at": "2023-02-24T18:33:00Z",
        "closed_at": "2023-03-13T12:04:01Z",
        "merged_at": "2023-03-13T12:04:01Z",
        "body": "This PR reimplements the `Method` resource CRUD API, removing the patches from moto to integrate them in our provider. \r\nThere was quite some validations on the json patch area, I will focus my time on resources where `Update*` is more often called, as those can be huge rabbit holes. \r\n\r\n- [x] remove all moto patches related to the `Method` resource\r\n- [x] implement validations on `UpdateMethod`, snapshot tested, see https://docs.aws.amazon.com/apigateway/latest/api/patch-operations.html#UpdateMethod-Patch\r\n- [x] fixes in json patch logic, especially while adding new field in nested properties\r\n- [x] add validations about \"linked\" resources to the created/updates resources (Authorizers, Validators, Models, etc)",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-02-24T18:05:29Z",
        "closed_at": "2023-02-28T15:54:41Z",
        "merged_at": "2023-02-28T15:54:41Z",
        "body": "See bugfix in https://github.com/etspaceman/kinesis-mock/releases/tag/0.3.7 and https://github.com/etspaceman/kinesis-mock/releases/tag/0.3.9\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 409,
        "deletions": 5,
        "changed_files": 3,
        "created_at": "2023-02-24T15:04:04Z",
        "closed_at": "2023-03-02T12:47:56Z",
        "merged_at": "2023-03-02T12:47:56Z",
        "body": "When moving on to implement resource methods validation/removing patches, I've seen this page of the docs:\r\nhttps://docs.aws.amazon.com/apigateway/latest/developerguide/api-gateway-method-settings-method-request.html#api-gateway-proxy-resource\r\nSo I followed it to implement more validations on the previous PR #7738\r\n\r\nStumbled unto an interesting issue in the docs:\r\n> An API can have more than one proxy resource. For example, the following proxy resources are allowed within an API.\r\n```\r\n/{proxy+}\r\n/parent/{proxy+}\r\n/parent/{child}/{proxy+}\r\n```\r\nBut it's not actually allowed, as the 2 last paths have a variable part, which will throw an exception. Implemented all the validations around this example in the docs. \r\n\r\nBased on #7738\r\n\r\n\\cc @whummer ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 39,
        "deletions": 45,
        "changed_files": 4,
        "created_at": "2023-02-23T18:16:24Z",
        "closed_at": "2023-02-24T14:02:01Z",
        "merged_at": "2023-02-24T14:02:01Z",
        "body": "Refactor authorizer info in API Gateway invocation context. Companion to upstream PR.\r\n\r\nThe main changes in this PR is to rename the `auth_info` attribute and unify it with `auth_context` in the API GW invocation context\r\n\r\nThe PR also adds a few type hints across the codebase.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 93,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-02-23T14:07:40Z",
        "closed_at": "2023-02-24T09:25:53Z",
        "merged_at": "2023-02-24T09:25:53Z",
        "body": "This adds a scripts that enables to gather which snapshots are older than a given date. The data is gathered within a JSON object\r\n\r\nThe data includes at the moment:\r\n- The provided date to check the snapshot date against\r\n- The number of outdated snapshots\r\n- The name/node-ids of the outdated snapshots as list\r\n- If invoked via cli, the names in a whitespace-separated string instead of a list, to make automated execution via pytest possible if wanted",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 673,
        "deletions": 77,
        "changed_files": 6,
        "created_at": "2023-02-23T13:32:33Z",
        "closed_at": "2023-02-28T14:28:02Z",
        "merged_at": "2023-02-28T14:28:02Z",
        "body": "Work on APIGW Resource parity, improve UpdateResource parity (patch operations validation), remove moto patches to move them into provider directly (we still manipulates moto entities directly as its tightly integrated, but extend moto with our own store), and fix deleting child resources when deleting a resource that was used as a parent.\r\n\r\nExample:\r\n`/` -> `/pets` -> `/pets/dogs` \r\nWe delete `/pets`, `/pets/dogs` should be deleted as well because it declared `/pets` to be its parent.\r\nWe do this by mapping children IDs when they are created with a parent ID. When deleting a resource, we check if it is in the parent list, and then recursively delete resources. \r\n\r\n- [x] remove patches on Resource entity\r\n- [x] create AWS validated tests with snapshots for resource manipulation\r\n- [x] fix parity for `UpdateResource` (validation)\r\n- [x] fix recursively deleting all child `Resource` when deleting a parent `Resource` with `DeleteResource`\r\n\r\nnote: I might delete the fixture for creating resource in a following PR, as we clean up all related resources when deleting the RestAPI.\r\nnote2: more tests are coming for deleting the resource with more children in a following PR. (#7746)\r\nnote3: I'd like to do a store refactor to allow easier validation of resources, see #7750 \r\n\r\n\\cc @whummer ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 149,
        "deletions": 14,
        "changed_files": 3,
        "created_at": "2023-02-23T02:43:54Z",
        "closed_at": "2023-02-27T15:03:25Z",
        "merged_at": "2023-02-27T15:03:25Z",
        "body": "This PR enables a minimal implementation for the `UpdateContinuousBackups` and `DescribeContinuousBackups` actions.\r\n\r\nThe feature of continuous backup is actually not implemented. We only return the minimum needed to achieve Terraform parity for https://github.com/localstack/localstack/issues/7569.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 11,
        "deletions": 52,
        "changed_files": 3,
        "created_at": "2023-02-22T13:26:52Z",
        "closed_at": "2023-02-27T10:02:17Z",
        "merged_at": "2023-02-27T10:02:17Z",
        "body": "This PR is a preparation for upcoming changes with v2 concerning the packaging and Docker image structure.\r\nWith this PR, the python distribution which is published from this repository is renamed from `localstack` to `localstack-core`.\r\nIt loses its dependency on our \"extensions\" distribution (which will resolve the build and release issues due to our cyclic dependency, and will introduce a clear separation between community and pro).\r\nSome of the CLI / bootstrap tests have been moved to the extensions repo, since they were depending on them.",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 334,
        "deletions": 19,
        "changed_files": 3,
        "created_at": "2023-02-22T10:48:25Z",
        "closed_at": "2023-02-24T11:33:07Z",
        "merged_at": "2023-02-24T11:33:07Z",
        "body": "This PR fixes an rest api parity issue related to encoding paths in URL.\r\n\r\n## Actual behavior\r\n\r\nGiven the following invocation URL against a rest api (e.g., with `{proxy+}` integration and a lambda function as backend):\r\n\r\n`GET https://{restapi_id}.execute-api.{region}.amazonaws.com/{stage_name}/user/test%2Balias@gmail.com/plus/test+alias@gmail.com?email=test%2Balias@gmail.com`\r\n\r\n* `path`: `\"/{stage_name}/user/test+alias@gmail.com/plus/test+alias@gmail.com?email=test%2Balias@gmail.com\"`\r\n* `queryStringParameters.email`: `test+alias@gmail.com`\r\n\r\n\r\n## Expected behavior\r\n\r\nThe base `path` should not decode URL encoded characters such as `%2B => +` and looks like this in AWS: `/user/test%2Balias@gmail.com/plus/test+alias@gmail.com`\r\n\r\n## Implementation\r\n\r\nInstead of relying on decoded `request.path` or `request.full_path` from Werkzeug, we need to compose the invocation `path` manually consisting of a non-decoded base part and a decode params part.\r\n\r\n## Questions\r\n\r\n* When can `url_params` be None?\r\n* Can we assume defaults for non-present stage and path variables or should we fail fast?\r\n* Does the current solution work with custom domain names where the `stage_name` is omitted?\r\n* Any other special cases to consider?\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 31,
        "deletions": 29,
        "changed_files": 4,
        "created_at": "2023-02-21T09:09:55Z",
        "closed_at": "2023-02-21T17:03:06Z",
        "merged_at": "2023-02-21T17:03:06Z",
        "body": "This PR started by just adding the fixture to the testing package, but end up adding more baggage to it.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 44,
        "deletions": 10,
        "changed_files": 2,
        "created_at": "2023-02-20T13:58:52Z",
        "closed_at": "2023-02-20T16:32:10Z",
        "merged_at": "2023-02-20T16:32:10Z",
        "body": "## Motivation\r\nCurrently, we do not allow checking privileged ports to be bound by LS. This leads to a problem with a hostport configuration in ECS for privileged ports - even if they are free.\r\n\r\nAlso, we are checking for each port we check on the host, if the port is free in the container as well. We should not do this, as we might want to use ports bound inside LS on the host as well.\r\n\r\n## Changes\r\n* Introduce separate port ranges for ports returned by `reserve_available_container_port` and ports which can be reserved on request. Per default, the former only returns non-privileged ports, while the whole port range can be reserved on explicit request for a port\r\n* Add additional option to override the port range for reserving available ports. This can be used to further limit the random port range, for example for ECS: https://docs.aws.amazon.com/AmazonECS/latest/APIReference/API_PortMapping.html (The default ephemeral port range for Docker version 1.6.0 and later is listed on the instance under /proc/sys/net/ipv4/ip_local_port_range. If this kernel parameter is unavailable, the default ephemeral port range from 49153 through 65535 is used.)\r\n\r\n## Remaining Problems\r\nIf checking is_port_available_for_containers before reserving the port, with the new changes, the port check will be done twice, which can lead to reduced performance.\r\nWhere possible, we should try reserving and catching the exception, instead of checking if it is possible first.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 54,
        "deletions": 8,
        "changed_files": 3,
        "created_at": "2023-02-20T13:03:00Z",
        "closed_at": "2023-02-21T06:04:20Z",
        "merged_at": "2023-02-21T06:04:20Z",
        "body": "Fixes a regression introduced in #7509\r\n\r\n\r\nCFn Changesets, in contrast to Stacks, don't require the `CAPABILITY_AUTO_EXPAND` capability set when they include transformations/macros.\r\n\r\n```\r\n          NOTE:\r\n                 This capacity doesn't apply  to  creating  change  sets,  and\r\n                 specifying it when creating change sets has no effect. If you\r\n                 want to create a stack from a stack  template  that  contains\r\n                 macros and nested stacks, you must create or update the stack\r\n                 directly from the template using the  CreateStack or   Updat-\r\n                 eStack action, and specifying this capability.\r\n```\r\n\r\nTODOs:\r\n\r\n- [x] add test covering change sets with transformation",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 36,
        "deletions": 5,
        "changed_files": 1,
        "created_at": "2023-02-20T12:21:22Z",
        "closed_at": "2023-02-21T06:04:48Z",
        "merged_at": "2023-02-21T06:04:48Z",
        "body": "@steffyP  found an issue with stack deletion when deleting a stack that contains resources with dependencies\r\n\r\nhttps://github.com/localstack/localstack/issues/7703#issuecomment-1436728012\r\n\r\n\r\n## Changes\r\n- Add retry loop around deletion of stack resources and only try to delete stack resources that are not already in a `DELETE_COMPLETE` state.\r\n\r\nThe loop is similar to the core deployment loop we already have. This retry now allows that first an independent resource is deleted and the dependent one is retried up to 10 times which is usually enough for the old one to be deleted as well.\r\n\r\nThere are of course still a few issues but they are quite out of scope like doing this asynchronously and not primarily  relying on the loop, but instead using the resource graph.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 8,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2023-02-20T09:45:32Z",
        "closed_at": "2023-02-20T11:41:10Z",
        "merged_at": "2023-02-20T11:41:10Z",
        "body": "We're often running into rate-limits in the `GitHubReleaseInstaller` which calls the GitHub Rest API to get a list of artifacts for a given release. This is by default capped at **60 calls per hour** (per IP) for **unauthenticated** calls and any further calls currently lead to pipeline failures.\r\n\r\nIn CircleCI we're now using a custom secret (`GITHUB_API_TOKEN` which is a personal access token from @localstack-bot without any permissions). This increases the rate-limit to **5_000 calls per hour** (independent of IP)\r\n\r\nIn GitHub we're now using the intrinsic `GITHUB_TOKEN` secret. This increases the rate-limit to **1_000 calls per hour** \r\n (independent of IP). If we ever need a higher limit in GitHub we can also use the token, but as long as it's not necessary I feel using `GITHUB_TOKEN` is more reliable.\r\n\r\n\r\nFollow-up TODO:\r\n- [x] check for more GitHub API calls in LocalStack and add token\r\n- [x] Use token in -ext repo",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 10,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-02-20T05:05:03Z",
        "closed_at": "2023-02-20T07:51:38Z",
        "merged_at": "2023-02-20T07:51:38Z",
        "body": "# \ud83d\ude80 ASF Update Report \ud83d\ude80\nThis PR has been automatically generated to update the generated API stubs for our ASF services.\nIt uses the latest code-generator from the _master_ branch ([scaffold.py](https://github.com/localstack/localstack/blob/master/localstack/aws/scaffold.py)) and the latest _published_ version of [botocore](https://github.com/boto/botocore) to re-generate all API stubs which are already present in the `localstack.aws.api` module of the _master_ branch.\n\n## \ud83d\udd04 Updated Services\nThis PR updates the following services:\n- ec2\n\n## \ud83d\udc77\ud83c\udffd Handle this PR\nThe following options describe how to interact with this PR / the auto-update:\n\n\u2714\ufe0f **Accept Changes**\nIf the changes are satisfying, just squash-merge the PR and delete the source branch.\n\n\ud83d\udeab **Ignore Changes**\nIf you want to ignore the changes in this PR, just close the PR and *do not delete* the source branch. The PR will not be opened and a new PR will not be created for as long as the generated code does not change (or the branch is deleted). As soon as there are new changes, a new PR will be created.\n\n\u270f\ufe0f **Adapt Changes**\n*Don't do this.* The APIs are auto-generated. If you decide that the APIs should look different, you have to change the code-generation.\n\n\u23f8\ufe0f **Pause Updates**\nRemove the cron-schedule trigger of the GitHub Action workflow which creates these PRs. The action can then still be triggered manually, but it will not be executed automatically.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 545,
        "deletions": 2,
        "changed_files": 7,
        "created_at": "2023-02-19T06:37:13Z",
        "closed_at": "2023-02-20T14:58:33Z",
        "merged_at": "2023-02-20T14:58:33Z",
        "body": "This PR extends the persistence API to prepare localstack core for the persistence extension.\r\n\r\nMost noteworthy, the PR adds a wrapper around pickle/dill, and exposes a similar API that is composable and extensible.\r\n* Visitors in the persistence extensions use `Encoder` and `Decoder` instances (they give more flexibility and decouple higher-level logic like visitors from pickle), but `PickleEncoder` and `PickleDecoder` by default\r\n* If you're lazy and you don't want to use encoders, you can also just use `from localstack.state import pickle; pickle.dump(...)`\r\n* Wraps the global reducer function dispatch table in dill (`dill.Pickler.dispatch`) with a mechanism that can also match subclasses (apply certain reducers for all subclasses rather than just the specific type)\r\n* A plugin interface for the snapshot-based persistence mechanism that allows one to plug in custom visitors for save and load operations\r\n\r\n`pickle.dumps` can now be used in the store police, as it will be extended dynamically with custom serializers by the persistence plugin, and the underlying system is used for both pods and snapshot persistence.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 181,
        "deletions": 27,
        "changed_files": 11,
        "created_at": "2023-02-17T13:48:46Z",
        "closed_at": "2023-02-22T08:36:10Z",
        "merged_at": "2023-02-22T08:36:10Z",
        "body": "Add initial support for CFn `Fn:Transform` intrinsic functions. This requirement came up while playing around with a more complex AWS sample app using a SAM / CloudFormation template: https://workshop.serverlesscoffee.com\r\n\r\nFor reference - part of the SAM template in the sample is a construct like this:\r\n```\r\n  RESTApConfigService:\r\n    Type: AWS::Serverless::Api\r\n    Properties:\r\n      StageName: Prod\r\n      DefinitionBody:\r\n        'Fn::Transform':\r\n          Name: 'AWS::Include'\r\n          Parameters:\r\n            Location: '../backends/2-config-service/RestAPIs/api.yaml'\r\n```\r\n(the `Location` parameter is replaced with an `s3://...` URL by SAM upon deployment)",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 497,
        "deletions": 5,
        "changed_files": 12,
        "created_at": "2023-02-17T12:52:45Z",
        "closed_at": "2023-03-01T09:45:56Z",
        "merged_at": "2023-03-01T09:45:56Z",
        "body": "Adds base implementation for States Encode and Decode Intrinsic Functions",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-02-17T12:31:12Z",
        "closed_at": "2023-02-17T14:30:47Z",
        "merged_at": "2023-02-17T14:30:47Z",
        "body": null,
        "comments": 1
    },
    {
        "merged": true,
        "additions": 804,
        "deletions": 23,
        "changed_files": 4,
        "created_at": "2023-02-16T18:33:00Z",
        "closed_at": "2023-02-21T12:37:18Z",
        "merged_at": "2023-02-21T12:37:18Z",
        "body": "This PR implements missing behaviour in S3 regarding checksums. It's not implemented yet in moto and a TODO is written about it:\r\n\r\n> TODO: AWS computes the provided value and verifies it's the same. Afterwards, it should be returned in every subsequent call\r\n\r\nI've implemented the behaviour inside the ASF provider, with multiple AWS validated and snapshotted tests. \r\nAs `moto` does not store the computed or given hash in the key, for minimal changes we can compute the hash when it's requested (aka not often). This PR does not implement additional checksum validation (we have some on `PutObject`), but simply return the object checksum where it was missing.\r\n\r\nFor multipart uploads, I added some AWS validated tests, but we need additional behaviour for this, and it's out of scope of this PR.\r\n\r\nFixes:\r\n\r\n- [x] Add `Checksum` field to `GetObjectAttributes` if the object was created with a checksum\r\n- [x] Add `Checksum` field to `GetObject` if the object was created with a checksum and `ChecksumMode` is `\"ENABLED\"`\r\n- [x] Investigate `Content-Encoding: ''` from AWS response and copy behaviour\r\n- [x] Set a hardcoded timestamp when creating `gzip` files so that tests are reproducible\r\n- [x] Create tests for checksum for multipart uploads (out of scope of this PR to add functionality, would be best in moto)\r\n\r\nSee:\r\n- https://docs.aws.amazon.com/AmazonS3/latest/userguide/checking-object-integrity.html\r\n- https://docs.aws.amazon.com/AmazonS3/latest/userguide/mpuoverview.html#mpuchecksums\r\n\\cc @whummer ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 0,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-02-16T15:01:12Z",
        "closed_at": "2023-02-21T07:16:00Z",
        "merged_at": "2023-02-21T07:16:00Z",
        "body": "Re-enables a Docker CLI test that depends on the not-immediately-updated `localstack/localstack` image from Dockerhub.\r\n\r\nFollow up from https://github.com/localstack/localstack/pull/7675\r\n\r\n## Background\r\n\r\n`tests.bootstrap.test_cli.TestCliContainerLifecycle.test_start_cli_within_container` depends on the latest [localstack/localstack](https://github.com/localstack/localstack/blob/ce0f939c228448eb0b4aedcd7ea6110c132243e2/tests/bootstrap/test_cli.py#L185) image from DockerHub. The test could not pass because bumping the PyPi `docker` version added an incompatibility. Specifically, a `platform` flag required for fixing ARM compatibility in lambda.\r\n\r\nSee internal [demo](https://www.notion.so/localstack/Releasing-a-change-with-conflicting-circular-dependency-8ca299173c5140bdb766b0a0512bd2d3?pvs=4)\r\n",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 0,
        "deletions": 0,
        "changed_files": 0,
        "created_at": "2023-02-16T13:33:56Z",
        "closed_at": "2023-02-17T00:12:37Z",
        "merged_at": null,
        "body": "fix: correct missing constraints on queue name and acceptable characters\r\n\r\n#7645\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 56,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2023-02-16T08:58:12Z",
        "closed_at": "2023-02-16T11:06:02Z",
        "merged_at": "2023-02-16T11:06:02Z",
        "body": "Adds support for the `route.destination-cidr-block` filter in `EC2.DescribeRouteTables`\r\n\r\nSee: https://docs.aws.amazon.com/AWSEC2/latest/APIReference/API_DescribeRouteTables.html\r\n\r\nCan be removed once https://github.com/getmoto/moto/pull/5932/files is merged upstream and we have updated our fork.",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 0,
        "deletions": 0,
        "changed_files": 0,
        "created_at": "2023-02-16T06:28:24Z",
        "closed_at": "2023-02-16T13:15:01Z",
        "merged_at": null,
        "body": "fix: corrected missing constraints on queue name size and accepted characters\r\n\r\n#7645\r\n",
        "comments": 5
    },
    {
        "merged": true,
        "additions": 60,
        "deletions": 0,
        "changed_files": 3,
        "created_at": "2023-02-15T16:17:31Z",
        "closed_at": "2023-02-27T18:57:05Z",
        "merged_at": "2023-02-27T18:57:04Z",
        "body": "This PR makes the **CreateEventSourceMapping** operation validate the **StartingPosition** parameter. Addresses #7548\r\n\r\nChanges:\r\n- validation\r\n- snapshoted test",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-02-15T14:31:17Z",
        "closed_at": "2023-02-15T17:11:46Z",
        "merged_at": "2023-02-15T17:11:46Z",
        "body": "The integration with coveralls.io is broken for a while.\r\nAfter [CircleCI's incident in January](https://circleci.com/blog/jan-4-2023-incident-report/) we rotated all secrets (including the coveralls token).\r\nThe token has been updated. With this PR we also upgrade to the latest version to keep up to date.",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 189,
        "deletions": 168,
        "changed_files": 15,
        "created_at": "2023-02-15T13:14:13Z",
        "closed_at": "2023-02-15T23:37:22Z",
        "merged_at": "2023-02-15T23:37:22Z",
        "body": "This PR tries to decrease the coupling to our LocalStack Pro extensions.\r\nIt can only merged together with its companion PR.\r\n\r\nThe changes are separated in different commits:\r\n- _remove DNS startup from community:_\r\n  - This commit removes the DNS startup from the `edge.py`. It will be started as a Pro plugin (infra start hook) instead.\r\n    /cc @dfangl \r\n- _refactor SSL cert handling:_\r\n  - Moves the SSL cert handling to community, since it is used and supported by community since the HTTP/HTTPS multiplexing is used (https://github.com/localstack/localstack/pull/1823).\r\n    /cc @whummer \r\n- _unify, move, document ext imports:_\r\n  - Documents, moves, and unifies remaining (for now tolerated) ext imports.\r\n- _migrate serve_flask_app to only remaining using module:_\r\n  - A somewhat unrelated refactoring, moving a legacy function from the generic proxy to its only using module (a legacy service provider).\r\n    /cc @dominikschubert ",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 7,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-02-15T06:59:07Z",
        "closed_at": "2023-02-15T21:43:55Z",
        "merged_at": "2023-02-15T21:43:55Z",
        "body": "Previously we generated a list of all images which also included images such as `localstack/localstack:<none>`, i.e. dangling images without tags assigned.\r\n\r\n## Changes\r\n\r\n- Filter list of all images and removes any image names ending with `:<none>` before trying to update them.\r\n- Add new new image prefix to check for updates in images used by the lambda v2 provider (`public.ecr.aws/lambda`)\r\n\r\n\r\nCloses #7156",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 11,
        "deletions": 7,
        "changed_files": 3,
        "created_at": "2023-02-15T06:18:32Z",
        "closed_at": "2023-02-15T21:44:55Z",
        "merged_at": "2023-02-15T21:44:55Z",
        "body": "Closes #7681\r\n\r\n## Changes\r\n\r\nNow allows overriding the default image that is used internally in ECS to verify we can open ports with a docker container. Previously this was statically set to `localstack/localstack` and some users might not have access to that image in their environment.\r\n\r\n\r\n\r\n## Discussion\r\n\r\nI've noticed we are also using the DOCKER_IMAGE_NAME (`localstack/localstack`) in other places as well.\r\nShould we maybe make these constants configurable as well? :thinking: ",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1028,
        "deletions": 5,
        "changed_files": 16,
        "created_at": "2023-02-14T19:27:23Z",
        "closed_at": "2023-03-01T07:42:01Z",
        "merged_at": "2023-03-01T07:42:01Z",
        "body": "Adds base implementation for missing `States.Math` intrinsic functions",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 99,
        "deletions": 2,
        "changed_files": 3,
        "created_at": "2023-02-14T19:20:24Z",
        "closed_at": "2023-02-27T16:34:20Z",
        "merged_at": "2023-02-27T16:34:20Z",
        "body": "This PR adds the validation for the Targets Ids in the Put Target Operation. Addresses #7567\r\n\r\nChanges:\r\n- validation\r\n- tests",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 28,
        "deletions": 5,
        "changed_files": 2,
        "created_at": "2023-02-14T19:05:37Z",
        "closed_at": "2023-02-15T12:23:10Z",
        "merged_at": "2023-02-15T12:23:10Z",
        "body": "Change behavior of the `VtlTemplate` utility class to modify variable values in-place. This PR is a prerequisite for an upstream PR that enhances support for AppSync pipeline resolvers.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 12,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2023-02-14T18:06:33Z",
        "closed_at": "2023-02-21T15:10:20Z",
        "merged_at": "2023-02-21T15:10:20Z",
        "body": "The API for some services changed over time. Currently, we do not have linting/checks that verify that the arguments of overriden functions differ.\r\n\r\nThis PR changes the definition of the implemented functions in the corresponding `provider.py`. It only fixes the `unexpected keyword argument` error (as e.g. mentioned in issue #7654).\r\n\r\nAs source, I used the CircleCI output for the script `capture_notimplemented_responses.py`, which logs the \"unexpected keyword argument\" errors. \r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 0,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-02-14T16:46:27Z",
        "closed_at": "2023-02-21T20:46:22Z",
        "merged_at": "2023-02-21T20:46:22Z",
        "body": "This seemed to misbehave previously because we sometimes mutate/set environment variables during startup.\r\n\r\n## Example\r\nSetting `PERISTENCE=1` will still log the deprecation warning for `DATA_DIR` even though it hasn't been explicitly set.\r\n\r\n## Changes\r\n- Remove manual setting of `DATA_DIR` env variable when `PERSISTENCE=1`\r\n- <s>Copy the environment directly after we finish loading any profiles. This copy is then used in when determining deprecations instead of using the current environment.</s> Talked with @alexrashed about this and we decided against this for now. Instead removed the line that was causing the specifically observed issue with the environment variable `DATA_DIR` being set manually as a fallback.\r\n\r\n@thrau & @giograno  Do you remember why this was added? What are the potential regressions we'd be creating by  removing this?\r\n\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 198,
        "deletions": 18,
        "changed_files": 7,
        "created_at": "2023-02-14T13:16:54Z",
        "closed_at": "2023-02-14T15:31:40Z",
        "merged_at": "2023-02-14T15:31:40Z",
        "body": "This PR addresses several encoding issues:\r\n- `get_raw_base_url` now avoids multi-encoding by avoiding the usage of `werkzeug.sansio.utils.get_current_url`.\r\n- `SimpleRequestsClient` now avoids multi-encoding by avoiding the usage of `werkzeug.sansio.utils.get_current_url`.\r\n- `Proxy` uses the encoded path of the given request (instead of the decoded one) if no `forward_path` is given.\r\n- `Router` now matches on the encoded path (instead of the decoded one).\r\n  - This is a quite fundamental change, but it is necessary, because otherwise the encoding information is lost for parsed path parameters (f.e. when using `/<path:path>`).\r\n- `ArnPartitionRewriteHandler` now uses the correct forward path (the modified one, instead of the original one).\r\n- `ArnPartitionRewriteHandler` does not decode string values anymore. It uses the encoding-specific regex if necessary anyways.\r\n\r\n/cc @whummer ",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 80,
        "deletions": 6,
        "changed_files": 4,
        "created_at": "2023-02-13T22:20:25Z",
        "closed_at": "2023-02-16T21:30:09Z",
        "merged_at": "2023-02-16T21:30:09Z",
        "body": "The Ref of the resource model is fixed now. This PR addresses #7665.\r\n\r\nChanges:\r\n-  Resource model implements the resource handler to store the InternetGatewayId as PhysicalResourceId\r\n-  The resource model now uses the InternetGatewayId to fetch the state\r\n- Test to validate the changes.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 9,
        "deletions": 1,
        "changed_files": 3,
        "created_at": "2023-02-13T19:37:57Z",
        "closed_at": "2023-02-13T22:12:43Z",
        "merged_at": "2023-02-13T22:12:43Z",
        "body": "The TTL should be accepted either as a string or int.\r\n\r\nChanges:\r\n- Convert attribute to integer if it's a string\r\n- Altered one test to validate the behavior\r\n- mark the test as AWS validated",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-02-13T17:43:28Z",
        "closed_at": "2023-02-13T18:46:19Z",
        "merged_at": "2023-02-13T18:46:19Z",
        "body": "A new version was published recently ([2.1.1](https://pypi.org/project/amazon-kclpy/#history)).\r\n\r\n\r\nThe tests previously worked fine, but let's see if this will make it more stable again :thinking: ",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 309,
        "deletions": 30,
        "changed_files": 14,
        "created_at": "2023-02-13T17:01:41Z",
        "closed_at": "2023-02-16T12:41:30Z",
        "merged_at": "2023-02-16T12:41:30Z",
        "body": "This PR adds support for additional Docker flags and fixes ARM issues with lambda.\r\n\r\n## Changes\r\n\r\n* Bump docker dependency version (required for supporting platform flag)\r\n* Add user and platform flags to docker clients (SdkDockerClient and CmdDockerClient). Set platform flag based on the architecture of the lambda function\r\n* Test ARM create function exceptions and enable ARM functions\r\n* Respect new provider override flags (`v2`) in lambda tests\r\n\r\n## Addresses\r\n\r\n* https://github.com/localstack/localstack/issues/7637\r\n  * Resolves this issue by adding basic support for ARM Lambdas (more testing planned)\r\n* https://github.com/localstack/localstack/pull/6724#issuecomment-1227314083\r\n  * Enables workaround `LAMBDA_DOCKER_FLAGS=--user nobody`\r\n\r\n## Related Issues\r\n\r\n* https://github.com/localstack/localstack/issues/4921\r\n* Shared ARM layers: https://github.com/localstack/localstack/issues/4932\r\n\r\n## Follow Up\r\n\r\n- [x] Re-enable the skipped test `tests.bootstrap.test_cli.TestCliContainerLifecycle.test_start_cli_within_container` as soon as the new localstack image is on DockerHub (see [comment here](tests.bootstrap.test_cli.TestCliContainerLifecycle.test_start_cli_within_container))",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 300,
        "deletions": 8,
        "changed_files": 4,
        "created_at": "2023-02-13T14:58:45Z",
        "closed_at": "2023-02-14T17:47:07Z",
        "merged_at": "2023-02-14T17:47:07Z",
        "body": "### Problem\r\nAfter reading the report from #7662, I could not understand how this could happen when we were filtering the messages before passing the context to worker to send the message. If after filtering there were no messages to send, we would not pass the task to the executor, so no empty message entries could be passed to SQS.\r\n\r\nHowever, after reading the publishing code again for `PublishBatch`, it showed that I was setting the filtered messages (messages are filtered on a subscriber basis) on the global context (used by all subscribers). It created 2 issues:\r\n- First, if in the order of subscription, we have a subscription with a filter then one without filter, we would filter the message and set them in the global context, so the next subscription in line would not have any messages in its context, even if it had no filter.\r\n- Second, if the order is reversed. A subscription with no filter, then one with a filter. We would in this order:\r\n  - Iterate over subscribers\r\n  - During iteration, send the context to the first worker with for example 1 message\r\n  - Continuing iteration, filter the messages depending on the subscriber and set them in the global context\r\n  - Sending it to the second worker\r\n  - During that time, the first worker would start its job, and might have an empty `messages` attributes while using the given context, which lead to the exception in the issue report.\r\n\r\n### Solution\r\n\r\nIf some messages are filtered, we will create a copy of the context, set the filtered messages only on the copy and pass the copy to the worker, instead of always passing a global context. If no filter is set, we can safely pass the global one (allows us to not always copy the context if there are no reasons for it, workers do not manipulate the context, it is used read-only). \r\n\r\nI've added a test case for the first issue, the second one will mostly happen as a race condition and is not always reproducible. But if one is fixed, so is there other.\r\n\r\n\r\n_fixes #7662_",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1277,
        "deletions": 397,
        "changed_files": 24,
        "created_at": "2023-02-13T12:23:05Z",
        "closed_at": "2023-02-24T19:18:28Z",
        "merged_at": "2023-02-24T19:18:28Z",
        "body": "- Adds base support for the missing Json Manipulation intrinsic function 'States.JsonMerge'.\r\n- Adds base support for all States hashing intrinsic functions\r\n- Snapshot test for this new function\r\n- Adds support for parsing boolean literal arguments in intrinsic functions functions calls",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 13,
        "deletions": 30,
        "changed_files": 2,
        "created_at": "2023-02-13T06:53:47Z",
        "closed_at": "2023-02-14T17:45:48Z",
        "merged_at": "2023-02-14T17:45:48Z",
        "body": "Updates to readme for 1.4.0 release.\r\n\r\nThis also PR removes the SVG banner in favour of regular GitHub flavoured markdown. The SVG banner style is jarring in dark mode and in other viewports.",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 4,
        "changed_files": 1,
        "created_at": "2023-02-13T05:04:58Z",
        "closed_at": "2023-02-13T08:48:10Z",
        "merged_at": "2023-02-13T08:48:10Z",
        "body": "# \ud83d\ude80 ASF Update Report \ud83d\ude80\nThis PR has been automatically generated to update the generated API stubs for our ASF services.\nIt uses the latest code-generator from the _master_ branch ([scaffold.py](https://github.com/localstack/localstack/blob/master/localstack/aws/scaffold.py)) and the latest _published_ version of [botocore](https://github.com/boto/botocore) to re-generate all API stubs which are already present in the `localstack.aws.api` module of the _master_ branch.\n\n## \ud83d\udd04 Updated Services\nThis PR updates the following services:\n- ec2\n\n## \ud83d\udc77\ud83c\udffd Handle this PR\nThe following options describe how to interact with this PR / the auto-update:\n\n\u2714\ufe0f **Accept Changes**\nIf the changes are satisfying, just squash-merge the PR and delete the source branch.\n\n\ud83d\udeab **Ignore Changes**\nIf you want to ignore the changes in this PR, just close the PR and *do not delete* the source branch. The PR will not be opened and a new PR will not be created for as long as the generated code does not change (or the branch is deleted). As soon as there are new changes, a new PR will be created.\n\n\u270f\ufe0f **Adapt Changes**\n*Don't do this.* The APIs are auto-generated. If you decide that the APIs should look different, you have to change the code-generation.\n\n\u23f8\ufe0f **Pause Updates**\nRemove the cron-schedule trigger of the GitHub Action workflow which creates these PRs. The action can then still be triggered manually, but it will not be executed automatically.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 17,
        "deletions": 13,
        "changed_files": 2,
        "created_at": "2023-02-12T16:23:46Z",
        "closed_at": "2023-02-14T10:54:47Z",
        "merged_at": "2023-02-14T10:54:47Z",
        "body": "This PR adds a `ServiceLifecycleHook` for the legacy lambda provider. This is to properly register lambda function URLs when persistence restores the service state, and will help in pro to unify persistence behavior into lifecycle hooks.\r\n\r\nFor community this has to significant effects other than the routes being registered a bit earlier now. ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 25,
        "deletions": 7,
        "changed_files": 1,
        "created_at": "2023-02-12T08:00:32Z",
        "closed_at": "2023-02-14T23:31:48Z",
        "merged_at": "2023-02-14T23:31:48Z",
        "body": "## Motivation\r\n\r\nIt's quite hard to find the container you're looking for when just looking at the list of running/exited containers right now since we just assign the randomly generated executor ID as a container name and one has to actually check the container metadata/config to find out which lambda is being executed in it.\r\n\r\nResolves #7635\r\n\r\n## Changes\r\n\r\n- Changed default container name from generic executor ID (e.g. `ffa532cb281182ee92052ff97e1f37c4`) to the following pattern: `<main-container-name>-lambda-<function-name>-<excecutor-id>`\r\n  - example: `localstack-main-lambda-processing-ffa532cb281182ee92052ff97e1f37c4`\r\n\r\n## Discussion\r\n\r\nWe could make this more generic in the future by providing a config variable we'll use to format this\r\ne.g. `LAMBDA_DOCKER_CONTAINER_NAME_GENERATOR=\"<main-container-name>-lambda-<region>-<function-name>-<runtime>\"`\r\nor   `LAMBDA_DOCKER_CONTAINER_NAME_GENERATOR=\"<main-container-name>-lambda-<function-arn>\"`\r\nStill, we'll always add the executor/runtime ID as a suffix\r\n\r\n\r\nAlso open to suggestion of other defaults :+1: ",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 4,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-02-11T13:45:44Z",
        "closed_at": "2023-02-14T17:54:31Z",
        "merged_at": null,
        "body": "fix for #7662 ",
        "comments": 6
    },
    {
        "merged": true,
        "additions": 484,
        "deletions": 41,
        "changed_files": 7,
        "created_at": "2023-02-10T11:19:48Z",
        "closed_at": "2023-02-12T14:46:59Z",
        "merged_at": "2023-02-12T14:46:59Z",
        "body": "This PR extends the OpenSearch and ElasticSearch service such that it supports enabling the security plugin for OpenSearch domains.\r\n\r\nThis first iteration supports the internal user database, there is no integration with IAM yet (might be implemented in later iterations, based on user feedback). Currently, only OpenSearch domains are supported. ElasticSearch domains are currently not supported (neither via the OpenSearch nor the ElasticSearch service).\r\n\r\nA secured OpenSearch domain can be spawned with this example CLI input:\r\n```json\r\n{\r\n    \"DomainName\": \"secure-domain\",\r\n    \"ClusterConfig\": {\r\n        \"InstanceType\": \"r5.large.search\",\r\n        \"InstanceCount\": 1,\r\n            \"DedicatedMasterEnabled\": false,\r\n            \"ZoneAwarenessEnabled\": false,\r\n            \"WarmEnabled\": false\r\n        },\r\n    \"EBSOptions\": {\r\n        \"EBSEnabled\": true,\r\n        \"VolumeType\": \"gp2\",\r\n        \"VolumeSize\": 10\r\n    },\r\n    \"EncryptionAtRestOptions\": {\r\n        \"Enabled\": true\r\n    },\r\n    \"NodeToNodeEncryptionOptions\": {\r\n        \"Enabled\": true\r\n    },\r\n    \"DomainEndpointOptions\": {\r\n        \"EnforceHTTPS\": true\r\n    },\r\n    \"AdvancedSecurityOptions\": {\r\n        \"Enabled\": true,\r\n        \"InternalUserDatabaseEnabled\": true,\r\n        \"MasterUserOptions\": {\r\n            \"MasterUserName\": \"admin\",\r\n            \"MasterUserPassword\": \"really-secure-passwordAa!1\"\r\n        }\r\n    }\r\n}\r\n```\r\nIt can be provisioned with the following aws(local) cli command:\r\n```bash\r\n$ awslocal opensearch create-domain --cli-input-json file://./opensearch_domain.json\r\n```\r\nOnce the domain is set up (`Processing: false`), the cluster can only be accessed with the given master user credentials (via HTTP basic auth):\r\n```\r\n$ curl -u \"admin:really-secure-passwordAa!1\" http://secure-domain.us-east-1.opensearch.localhost.localstack.cloud:4566/_cluster/health\r\n{\"cluster_name\":\"opensearch\",\"status\":\"green\",...}\r\n```\r\nAny unauthorized requests will result in an HTTP response status code 401 (Unauthorized).\r\n\r\nThis feature is implemented by:\r\n- Setting up the TLS certificates in the config folder of the OpenSearch installations.\r\n- Setting up initial roles, roles mappings, and internal users in the config folder of the OpenSearch installstions.\r\n  - It defines a hidden, reserved user called `localstack-internal` which is used to manipulate the OpenSearch instance at runtime.\r\n  - This user is used to create the initial master user once the cluster is up.\r\n  - This is necessary because the initial user cannot be defined in the startup configuration and the user config would otherwise be shared among multiple instances (since they share an installation directory containing the config files).\r\n- Modifying the configuration on startup to enable the security plugin.\r\n\r\nOnce this PR is merged, and the feature becomes available in the latest image, the docs will be extended accordingly.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 23,
        "deletions": 10,
        "changed_files": 3,
        "created_at": "2023-02-09T21:27:39Z",
        "closed_at": "2023-02-10T12:45:56Z",
        "merged_at": "2023-02-10T12:45:56Z",
        "body": "## Motivation\r\nOur current flake8 version seemed to have problems with python 3.10 dict structural decomposition. In -ext, the following code:\r\n```\r\n    match something:\r\n        case {\"AWS\": a_variable}:\r\n              print(a_variable)\r\n```\r\nRaised a name not found error to a_variable, as it could not detect the assignment.\r\n\r\n## Changes\r\n* Update flake8 to 6.0.0\r\n* Update isort to 5.12.0\r\n* Update all flake8 dependencies to their current version\r\n* Update flake8 + isort in the precommit hooks (this is the reason why isort has to be updated, the older version could not be installed anymore with poetry, issue: https://github.com/PyCQA/isort/issues/2077)\r\n\r\n## Discussion\r\nNot sure if we want to leave the version ranges that open for now. Any opinions? A breaking change should at least be a quick fix and instantly detectable.\r\n\r\nsuperseding #7208",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 8734,
        "deletions": 73,
        "changed_files": 64,
        "created_at": "2023-02-09T09:58:39Z",
        "closed_at": "2023-02-23T12:40:38Z",
        "merged_at": "2023-02-23T12:40:38Z",
        "body": "In this PR:\r\n- Snapshot tests for SFN Intrinsic Functions\r\n- Fixes for current Intrinsic Functions\r\n- Base implementation of States Array functions\r\n- Base implementation of States String operations functions",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 5,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-02-09T06:30:45Z",
        "closed_at": "2023-02-09T09:52:51Z",
        "merged_at": "2023-02-09T09:52:51Z",
        "body": "For REST APIs defined with OpenAPI, [`x-amazon-apigateway-any-method`](https://docs.aws.amazon.com/apigateway/latest/developerguide/api-gateway-swagger-extensions-any-method.html) is used as catch-all placeholder\r\n\r\nThis change addresses the following failing tests:\r\n```\r\n2023-02-09T00:11:50.6643127Z FAILED ../localstack/tests/integration/test_apigateway.py::TestAPIGateway::test_create_rest_api_with_custom_id[path_based_url]\r\n2023-02-09T00:11:50.6643884Z FAILED ../localstack/tests/integration/test_apigateway.py::TestAPIGateway::test_create_rest_api_with_custom_id[host_based_url]\r\n2023-02-09T00:11:50.6644620Z FAILED ../localstack/tests/integration/test_apigateway.py::TestAPIGateway::test_api_gateway_lambda_asynchronous_invocation\r\n2023-02-09T00:11:50.6645333Z FAILED ../localstack/tests/integration/test_apigateway.py::TestAPIGateway::test_api_gateway_mock_integration\r\n```\r\n\r\nRelated: https://github.com/localstack/localstack-ext/pull/1354",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 128,
        "deletions": 80,
        "changed_files": 6,
        "created_at": "2023-02-08T22:57:20Z",
        "closed_at": "2023-02-15T13:35:05Z",
        "merged_at": "2023-02-15T13:35:05Z",
        "body": "This PR includes some minor refactoring (mostly moving and renaming) of code related to persistence, state, and the visitors.\r\n\r\n* Introduce `localstack.state` for the state API (which are the base abstractions for disk-based persistence and pods)\r\n* Extracted a comprehensive `StateLifecyleHook` that will be used in the future\r\n* Made `ServiceLifecycleHook` extend from that\r\n* let `Service` implement the `accept_state_visitor` (pre-requisite for follow-up code)\r\n* Removed unused `BackendStateLifecycle` (now `StateLifecycleHook` as originally intended)",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 14,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2023-02-08T13:56:30Z",
        "closed_at": "2023-02-08T15:59:53Z",
        "merged_at": "2023-02-08T15:59:53Z",
        "body": "`PROVIDER_OVERRIDE_S3=v2` is now equivalent to setting `PROVIDER_OVERRIDE_S3=asf`",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-02-08T13:12:46Z",
        "closed_at": "2023-02-08T15:07:44Z",
        "merged_at": "2023-02-08T15:07:44Z",
        "body": "Changes introduced in https://github.com/localstack/localstack/pull/7629/ caused failures in the persistence test suite:\r\n```\r\n2023-02-08T18:11:42.280 DEBUG --- [   asgi_gw_0] l.utils.persistence        : Unable to read pickled persistence file /home/viren/repo/localstack/.filesystem/var/lib/localstack/state/api_states/ec2/backend.state: 'Subnet' object has no attribute 'cidr'\r\n```\r\nDuring unpickling, the `__init__()` is not called which meant that `self.cidr` did not exist. This prevented the persisted state from being restored.\r\n\r\nThis PR fixes this so that `cidr` from the state is used to create `_subnet_ip_generator`.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 15,
        "deletions": 16,
        "changed_files": 2,
        "created_at": "2023-02-08T01:36:37Z",
        "closed_at": "2023-02-08T14:05:16Z",
        "merged_at": "2023-02-08T14:05:16Z",
        "body": "While working on a support case, I've seen an Exception raises while trying to check a pre-signed URL with the new S3 ASF provider. The logic was inverted and we trying to replace a string with `None` parameter, which failed. \r\n\r\nThis PR fixes the issue and removes an old xfail for this specific case that was fixed a while ago. I've added a new case for when we don't have the port (which was actually failing for the new provider). \r\n\r\nAlso added a fix for the CI failure ([see here the run](https://app.circleci.com/pipelines/github/localstack/localstack/12466/workflows/18f7ea07-662a-4d7c-8862-9e5d3491a3c2/jobs/89244)), it seems the host header was wrong for the signature calculation, weird that nothing picked it up before. ",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 53,
        "deletions": 1,
        "changed_files": 4,
        "created_at": "2023-02-07T22:58:48Z",
        "closed_at": "2023-02-08T14:06:07Z",
        "merged_at": "2023-02-08T14:06:07Z",
        "body": "While working on different support tickets, it appeared Serverless had an issue saying that the deployment bucket would not be in the same region as the lambda, while it was. By debugging Serverless adding `console.log` statement around, I've realized we were missing a newline return after the XML preamble, which was added in the old S3 provider for some responses (especially `LocationConstraint`). \r\n\r\nI've added it to the serializer, and in the `GetBucketLocation` as well, as it's a bit specific: it does not have the usual root tag, so I've declared it as a `payload` as a workaround. Problem is, we don't parse the response from moto, we pass its response \"as-is\", so we need to add the newline manually. It's a bit of an odd case, so I suppose we should not modify the serializer for something like that, a very specific case, but I'd like to hear @alexrashed opinion!\r\n\r\nAnyway, this fix allows us to use Serverless with the new S3 ASF provider. I've added some checks in an existing test case checking XML response structure. \r\n\r\nBefore the change, the response returned was:\r\n```xml\r\n<?xml version=\"1.0\" encoding=\"UTF-8\"?><LocationConstraint xmlns=\"http://s3.amazonaws.com/doc/2006-03-01/\">eu-west-2</LocationConstraint>\r\n```\r\n\r\nAnd after (note the `\\n` after the XML preamble):\r\n```xml\r\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\\n<LocationConstraint xmlns=\"http://s3.amazonaws.com/doc/2006-03-01/\">eu-west-2</LocationConstraint>\r\n```\r\n\r\nServerless would parse the response without newline this way:\r\n```js\r\n{\r\n  LocationConstraint: '<LocationConstraint xmlns=\"http://s3.amazonaws.com/doc/2006-03-01/\">eu-west-2'\r\n}\r\n```\r\nWhen it should have been:\r\n```js\r\n{\r\n  LocationConstraint: 'eu-west-2'\r\n}\r\n```",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 149,
        "deletions": 1,
        "changed_files": 3,
        "created_at": "2023-02-07T20:19:11Z",
        "closed_at": "2023-04-18T00:01:09Z",
        "merged_at": null,
        "body": "Store Police is a defensive mechanism against pickling errors. In a nutshell, after each test, it attempts at pickling the backends for the running services to make sure they are serializable.\r\n",
        "comments": 5
    },
    {
        "merged": true,
        "additions": 19,
        "deletions": 8,
        "changed_files": 3,
        "created_at": "2023-02-07T19:12:49Z",
        "closed_at": "2023-02-08T06:18:29Z",
        "merged_at": "2023-02-08T06:18:29Z",
        "body": null,
        "comments": 1
    },
    {
        "merged": true,
        "additions": 24,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-02-07T15:44:16Z",
        "closed_at": "2023-02-08T23:01:29Z",
        "merged_at": "2023-02-08T23:01:29Z",
        "body": "This is the follow-up PR to https://github.com/localstack/localstack/pull/7604 - it adds deprecated config vars to the analytics event. However, depending on value, we only store its presence.",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 4,
        "deletions": 14,
        "changed_files": 5,
        "created_at": "2023-02-07T15:34:10Z",
        "closed_at": "2023-02-08T14:56:04Z",
        "merged_at": null,
        "body": "See https://github.com/etspaceman/kinesis-mock/releases/tag/0.3.5\r\n\r\nIn particular, fixes a couple of fields in response types so that they are nullable, rather than empty lists (or 0'd integers).\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 2998,
        "deletions": 0,
        "changed_files": 25,
        "created_at": "2023-02-07T14:57:09Z",
        "closed_at": "2023-05-02T15:16:48Z",
        "merged_at": "2023-05-02T15:16:48Z",
        "body": "The scope of the PR is to set up a set of tests for the Cloud Control API and CloudFormation Extensions API before starting on the implementation at a later stage.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 53,
        "deletions": 20,
        "changed_files": 2,
        "created_at": "2023-02-07T12:32:55Z",
        "closed_at": "2023-02-08T07:37:09Z",
        "merged_at": "2023-02-08T07:37:09Z",
        "body": "This PR refactors the `route` decorator, as well as the `_RuleAttriburtes` handling a bit, such that the `route` decorator can be used multiple times on a single function / endpoint.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 344,
        "deletions": 39,
        "changed_files": 13,
        "created_at": "2023-02-07T10:07:02Z",
        "closed_at": "2023-02-07T16:11:49Z",
        "merged_at": "2023-02-07T16:11:49Z",
        "body": "The previous YAML parsing had an issue with parsing this: `!GetAtt Sub1.Outputs.OutputA` which led to the parameter being passed empty.\r\n\r\nThis also touched code that I recently refactored and I continued there to refactor the yaml parsing a bit to be cleaner & more robust. This also only uses the yaml module now without other external libs.\r\n\r\n\r\n## Changes\r\n- Rewrote YAML parsing of cloudformation templates which also now includes a fix for !GetAtt short hand parsing\r\n- Added validated parity test for a simple reproduction sample with snapshots\r\n- Fixed a unit test that had an invalid assertion. (This was already broken on master but didn't evaluate to false because yaml loader was globally patched when the cloudformation module was loaded in other tests)",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 23,
        "deletions": 16,
        "changed_files": 2,
        "created_at": "2023-02-07T09:22:57Z",
        "closed_at": "2023-02-07T11:57:33Z",
        "merged_at": "2023-02-07T11:57:33Z",
        "body": "This PR migrates the internal endpoint to retrieve emails sent by SES from `/_localstack/ses` to `/_aws/ses`.\r\nThe old endpoint is still routed, but on each invocation a deprecation warning is logged.\r\n\r\nThis PR is based on https://github.com/localstack/localstack/pull/7614 (since it refactors the resource routing quite a lot).",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 67,
        "deletions": 19,
        "changed_files": 5,
        "created_at": "2023-02-07T02:54:20Z",
        "closed_at": "2023-02-08T06:14:59Z",
        "merged_at": "2023-02-08T06:14:59Z",
        "body": "This PRs solves #7608 (thanks to @whummer for the pickling magic). Introduces a simple integration test that tries to pickle a backend following the creation of some state. Over time, we might think about spreading this pattern to other services.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 254,
        "deletions": 3,
        "changed_files": 4,
        "created_at": "2023-02-06T21:19:04Z",
        "closed_at": "2023-02-07T14:28:29Z",
        "merged_at": "2023-02-07T14:28:29Z",
        "body": "This PR fixes #5269 in the new ASF provider.\r\n\r\nThis is a bit of a rabbit hole, as the issue stems from different behaviour between signers in the SDKs:\r\nWhen signing a `PutObject` request with the `ServerSideEncryption` parameter, `boto` won't hoist this parameter into the query string, and will need you to provide it in the request headers (`x-amz-service-side-encryption`) when using the pre-signed URL.\r\nThe `@aws-sdk` v3 JS SDK will actually have the same behaviour. \r\nBut the older JS SDK `aws-sdk` will put this parameter into the query string, __and__ in the `SignedHeaders` query string parameter as well. However, you don't __have to__  provide in the headers, as it's already in the query string.\r\n\r\nBecause we were used to `boto` behaviour, we didn't encounter this issue during our tests, and we were expecting that every value in `SignedHeaders` would need to provider as header and not as a query string parameter.\r\n\r\nThis fix takes the parameter from the query string into the signed headers in order to properly recreate the signature of the request. I've created 2 AWS validated test to check this behaviour with both JS SDK with the help of lambda functions.\r\n\r\n\r\nIn the meantime, I've tried with another parameter not specially treated like `x-amz-service-side-encryption` (it has a special condition marked as `unhoistable` ([see docs](https://docs.aws.amazon.com/AWSJavaScriptSDK/v3/latest/clients/client-s3/interfaces/requestpresigningarguments.html)) if part of this kind of header, starting with this prefix, in the new v3 JS SDK, I suppose for privacy/security reason). I've tried with `x-amz-storage-class`, and `boto` does not hoist it either when the JS SDK does. You'd have to manually add the header to the request if generated with the `boto` SDK. \r\n\r\nThe sample from the linked issue is now working as well. \r\n\r\n\\cc @pinzon ",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 5,
        "deletions": 7,
        "changed_files": 2,
        "created_at": "2023-02-06T16:11:29Z",
        "closed_at": "2023-03-08T13:39:54Z",
        "merged_at": null,
        "body": "This PR fixes the RedHat image build after the removal of the \"init\" make target with https://github.com/localstack/localstack/pull/7129.\r\nThe RedHat smoke test workflow is executed once a week on a fixed schedule.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-02-06T15:37:13Z",
        "closed_at": "2023-02-06T17:49:59Z",
        "merged_at": "2023-02-06T17:49:59Z",
        "body": "This PR addresses issues with the latest version of npm:\r\n- [node 18.14.0 has been released on 2023-02-02.](https://nodejs.org/fr/blog/release/v18.14.0/)\r\n- This minor release of node upgrades the shipped npm version from version 8.19.3 to 9.3.1.\r\n- npm v9 contains a breaking change: It will no longer attempt to modify the ownership of files it creates.\r\n  - https://github.com/npm/cli/pull/5704\r\n\r\nThis PR ensures that all files created in the LPM step of the Docker build are in fact owned by the `localstack` user / group.\r\n\r\nFixes #7620",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 8,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-02-06T12:52:07Z",
        "closed_at": "2023-02-06T16:31:48Z",
        "merged_at": "2023-02-06T16:31:48Z",
        "body": "Having `asf` as the new provider name presented a few issues:\r\n\r\n* It leaks internal concepts to users that don't know what ASF is (and they shouldn't have to)\r\n* While this provider is now using ASF under the hood, this does not really properly communicate what the new provider represents.\r\n\r\nThe solution: Register a new provider name `v2` for the lambda service using the same provider implementation as `asf`.\r\n\r\nThere's no need for formal deprecation since we'll remove those with 2.0 anyway (merged as default), but communication (& docs) going forward should use `v2` for the new provider.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 20,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2023-02-06T12:32:22Z",
        "closed_at": "2023-02-06T16:33:52Z",
        "merged_at": "2023-02-06T16:33:52Z",
        "body": "Introduces the option to mirror the previous \"simplified\" behavior where the `Lambda.CreateFunction` API call now blocks until the created function/version is in a non-transitional state (e.g. it will be either `Active` or `Failed`).\r\n\r\nThis feature is only available via an optional feature flag, since it technically breaks behavior parity with AWS.\r\n\r\nIntended primarily for people getting started when only using CLI/SDKs and for easier friction-less migration paths from the old to the new provider.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 10,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2023-02-06T11:43:52Z",
        "closed_at": "2023-02-07T16:31:41Z",
        "merged_at": "2023-02-07T16:31:41Z",
        "body": "The intent here is to capture which `LAMBDA_EXECUTOR` mode we fall back to (`docker` vs. `local`).\r\nMost sessions currently don't provide an explicit executor, but so far we have not been able to determine if those sessions are falling back to `docker` or `local`.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-02-06T07:27:20Z",
        "closed_at": "2023-02-08T23:02:14Z",
        "merged_at": "2023-02-08T23:02:14Z",
        "body": null,
        "comments": 1
    },
    {
        "merged": true,
        "additions": 42,
        "deletions": 45,
        "changed_files": 1,
        "created_at": "2023-02-06T05:03:21Z",
        "closed_at": "2023-02-06T07:58:00Z",
        "merged_at": "2023-02-06T07:58:00Z",
        "body": "# \ud83d\ude80 ASF Update Report \ud83d\ude80\nThis PR has been automatically generated to update the generated API stubs for our ASF services.\nIt uses the latest code-generator from the _master_ branch ([scaffold.py](https://github.com/localstack/localstack/blob/master/localstack/aws/scaffold.py)) and the latest _published_ version of [botocore](https://github.com/boto/botocore) to re-generate all API stubs which are already present in the `localstack.aws.api` module of the _master_ branch.\n\n## \ud83d\udd04 Updated Services\nThis PR updates the following services:\n- ec2\n\n## \ud83d\udc77\ud83c\udffd Handle this PR\nThe following options describe how to interact with this PR / the auto-update:\n\n\u2714\ufe0f **Accept Changes**\nIf the changes are satisfying, just squash-merge the PR and delete the source branch.\n\n\ud83d\udeab **Ignore Changes**\nIf you want to ignore the changes in this PR, just close the PR and *do not delete* the source branch. The PR will not be opened and a new PR will not be created for as long as the generated code does not change (or the branch is deleted). As soon as there are new changes, a new PR will be created.\n\n\u270f\ufe0f **Adapt Changes**\n*Don't do this.* The APIs are auto-generated. If you decide that the APIs should look different, you have to change the code-generation.\n\n\u23f8\ufe0f **Pause Updates**\nRemove the cron-schedule trigger of the GitHub Action workflow which creates these PRs. The action can then still be triggered manually, but it will not be executed automatically.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 8,
        "deletions": 4,
        "changed_files": 1,
        "created_at": "2023-02-05T23:46:16Z",
        "closed_at": "2023-02-06T20:28:56Z",
        "merged_at": "2023-02-06T20:28:56Z",
        "body": "This PR adds several config variables to the list of tracked vars (mostly from pro). Also sorted the list alphabetically.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 3,
        "changed_files": 1,
        "created_at": "2023-02-05T23:32:04Z",
        "closed_at": "2023-02-06T07:50:32Z",
        "merged_at": "2023-02-06T07:50:32Z",
        "body": "This PR fixes an issue that would prevent opensearch persistence to restore clusters properly under certain conditions.\r\n\r\n`OpensearchProvider.get_store()` relies on having a request context, but when we're restoring the cluster through `restore_backend_state`, we don't have that.\r\nConveniently, we have the account and the region information in the `DomainKey`, so we just use that.",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 34,
        "deletions": 8,
        "changed_files": 3,
        "created_at": "2023-02-05T08:37:49Z",
        "closed_at": "2023-02-05T18:34:57Z",
        "merged_at": null,
        "body": "Added .NET support for local lambda executor",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 3,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-02-04T22:08:16Z",
        "closed_at": "2023-03-12T23:31:55Z",
        "merged_at": null,
        "body": "Cloudformation fails to create API Gateway when resource policy is defined",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 109,
        "deletions": 7,
        "changed_files": 3,
        "created_at": "2023-02-04T19:21:00Z",
        "closed_at": "2023-02-09T17:52:08Z",
        "merged_at": null,
        "body": "**\ud83d\udea7 Work in progress - please do not merge**\r\n\r\nThis PR adds a simple pytest hook to test cloud pod save (export) operations, on each teardown of the test functions in the integration test suite. This is a first attempt to get a better understanding of the surface area of persistence/pickle issues we've been facing.\r\n\r\nTriggering this as a first test CI run for now - it will be interesting to see how large the state files in our CI are growing, and whether we can get any meaningful insights with this approach..",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 533,
        "deletions": 185,
        "changed_files": 16,
        "created_at": "2023-02-04T19:19:46Z",
        "closed_at": "2023-02-07T09:45:14Z",
        "merged_at": "2023-02-07T09:45:14Z",
        "body": "The main goal of this PR is to enable the migration of `/_pods` endpoints into the `/_localstack` namespace, without having to refactor the current pods endpoints into what I'll call the \"resource class pattern\" (classes with `on_<http-method>` functions).\r\n\r\nPreviously, a Router needed the special `resource_dispatcher` to make the resource class pattern work, meaning it was not possible to mix the use of `@route` endpoints with the resoure class pattern. The changes in this PR get rid of the special `resource_dispatcher` all together. The way we should think about this is that, dispatchers are responsible for *how* functions are called (i.e., how the request parameters are unpacked into the method call), and rules are responsible for *which* functions are called. So instead of having the dispatcher find the methods, we now generate rules that tell the router where the methods are, which is IMO also much cleaner design (even though I found that the previous solution nicely demonstrated how flexible the dispatchers are).\r\n\r\nHere are examples of achieving the same thing in different ways:\r\n\r\n```python\r\nclass MyResource:\r\n    def on_get(request: Request, resource_id: str) -> Response:\r\n        return Response(f\"GET called on {resource_id}\")\r\n\r\n    def on_post(request: Request, resource_id: str) -> Response:\r\n        return Response(f\"POST called on {resource_id}\")\r\n\r\n\r\n@resource(\"/myresource/<resource_id>\")\r\nclass MyDecoratedResource:\r\n    def on_get(request: Request, resource_id: str) -> Response:\r\n        return Response(...)\r\n    ...\r\n\r\nclass MyResource:\r\n    @route(\"/myresource/<resource_id>\", methods=[\"GET\"])\r\n    def on_get(request: Request, resource_id: str) -> Response:\r\n        return Response(...)\r\n\r\n    ...\r\n\r\n\r\ndef on_get(request: Request, resource_id: str) -> Response:\r\n    return Response(...)\r\n\r\n\r\ndef on_post(request: Request, resource_id: str) -> Response:\r\n    return Response(...)\r\n\r\n\r\nrouter = Router(dispatcher=handler_dispatcher())\r\n\r\n# wrapping a resource class with the Resource rule factory to specify the path\r\nrouter.add(Resource(\"/myresource/<resource_id>\", MyResource()))\r\n\r\n# adding a class decorated with @resource\r\nrouter.add(MyDecoratedResource())\r\n\r\n# using classes the have @route decorated methods\r\nrouter.add(MyRoutes())\r\n\r\n# functions decorated with route\r\nrouter.add(MyRoutes().on_get)\r\nrouter.add(MyRoutes().on_post)\r\n\r\n# using manual rules\r\nrouter.add(\"/myresource/<resource_id>\", on_get, methods=[\"GET\"])\r\nrouter.add(\"/myresource/<resource_id>\", on_post, methods=[\"POST\"])\r\n```\r\n\r\nTo enable this in a clean way, I made several changes to the `Router`.\r\n\r\n* `add` can now be used universally to add things to the router, making the interface more user-friendly\r\n* consequently, `add` now returns either a rule or multiple rules. to make life easier, `remove` was introduced, that can now take both a list of rules, or a single rule. that way there's a coherent api (`router.remove(router.add(...))` will always work, regardless of what you pass to `add`.\r\n* `add` now also takes `RuleFactory` instances. by default, the werkzeug `Map` does not return the `Rule` objects created by passing the `RuleFactory`. this is however needed for the `add` contract. so the method to add a `RuleFactory` to the router works a bit differently: it adds the rules individually, and also conveniently adds the catch-all host matching.\r\n* to make those things work, i re-organized some of the internal methods and deprecated the confusing `add_route_endpoint`, `add_route_endpoints`\r\n\r\nFinally, I refactored the `LocalstackResourceRouter` to use the new pattern. Also added a little decorator that can be used analogous to `@route` for resource classes.\r\nI'm deliberately not using this decorator for the default resources, since the HealthResource cannot use it (needs to be added to two different paths), and it is more consistent in the code this way. Everywhere else I added the decorator.\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2023-02-04T02:19:29Z",
        "closed_at": "2023-02-08T20:49:59Z",
        "merged_at": "2023-02-08T20:49:59Z",
        "body": "Bumps [tokio](https://github.com/tokio-rs/tokio) from 1.18.4 to 1.18.5.\n<details>\n<summary>Commits</summary>\n<ul>\n<li><a href=\"https://github.com/tokio-rs/tokio/commit/171ce0ff8d38b87a39c1e6a16fedc9a2373720e0\"><code>171ce0f</code></a> chore: prepare Tokio v1.18.5 release</li>\n<li><a href=\"https://github.com/tokio-rs/tokio/commit/d6ea7a742b92d3e516035a584ab9347a96be363a\"><code>d6ea7a7</code></a> Add <code>T: Unpin</code> bound to ReadHalf::unsplit</li>\n<li>See full diff in <a href=\"https://github.com/tokio-rs/tokio/compare/tokio-1.18.4...tokio-1.18.5\">compare view</a></li>\n</ul>\n</details>\n<br />\n\n\n[![Dependabot compatibility score](https://dependabot-badges.githubapp.com/badges/compatibility_score?dependency-name=tokio&package-manager=cargo&previous-version=1.18.4&new-version=1.18.5)](https://docs.github.com/en/github/managing-security-vulnerabilities/about-dependabot-security-updates#about-compatibility-scores)\n\nDependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.\n\n[//]: # (dependabot-automerge-start)\n[//]: # (dependabot-automerge-end)\n\n---\n\n<details>\n<summary>Dependabot commands and options</summary>\n<br />\n\nYou can trigger Dependabot actions by commenting on this PR:\n- `@dependabot rebase` will rebase this PR\n- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it\n- `@dependabot merge` will merge this PR after your CI passes on it\n- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it\n- `@dependabot cancel merge` will cancel a previously requested merge and block automerging\n- `@dependabot reopen` will reopen this PR if it is closed\n- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually\n- `@dependabot ignore this major version` will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot ignore this minor version` will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot ignore this dependency` will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot use these labels` will set the current labels as the default for future PRs for this repo and language\n- `@dependabot use these reviewers` will set the current reviewers as the default for future PRs for this repo and language\n- `@dependabot use these assignees` will set the current assignees as the default for future PRs for this repo and language\n- `@dependabot use this milestone` will set the current milestone as the default for future PRs for this repo and language\n\nYou can disable automated security fix PRs for this repo from the [Security Alerts page](https://github.com/localstack/localstack/network/alerts).\n\n</details>",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2023-02-04T02:19:05Z",
        "closed_at": "2023-02-09T09:26:09Z",
        "merged_at": "2023-02-09T09:26:09Z",
        "body": "Bumps [tokio](https://github.com/tokio-rs/tokio) from 1.18.4 to 1.18.5.\n<details>\n<summary>Commits</summary>\n<ul>\n<li><a href=\"https://github.com/tokio-rs/tokio/commit/171ce0ff8d38b87a39c1e6a16fedc9a2373720e0\"><code>171ce0f</code></a> chore: prepare Tokio v1.18.5 release</li>\n<li><a href=\"https://github.com/tokio-rs/tokio/commit/d6ea7a742b92d3e516035a584ab9347a96be363a\"><code>d6ea7a7</code></a> Add <code>T: Unpin</code> bound to ReadHalf::unsplit</li>\n<li>See full diff in <a href=\"https://github.com/tokio-rs/tokio/compare/tokio-1.18.4...tokio-1.18.5\">compare view</a></li>\n</ul>\n</details>\n<br />\n\n\n[![Dependabot compatibility score](https://dependabot-badges.githubapp.com/badges/compatibility_score?dependency-name=tokio&package-manager=cargo&previous-version=1.18.4&new-version=1.18.5)](https://docs.github.com/en/github/managing-security-vulnerabilities/about-dependabot-security-updates#about-compatibility-scores)\n\nDependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.\n\n[//]: # (dependabot-automerge-start)\n[//]: # (dependabot-automerge-end)\n\n---\n\n<details>\n<summary>Dependabot commands and options</summary>\n<br />\n\nYou can trigger Dependabot actions by commenting on this PR:\n- `@dependabot rebase` will rebase this PR\n- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it\n- `@dependabot merge` will merge this PR after your CI passes on it\n- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it\n- `@dependabot cancel merge` will cancel a previously requested merge and block automerging\n- `@dependabot reopen` will reopen this PR if it is closed\n- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually\n- `@dependabot ignore this major version` will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot ignore this minor version` will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot ignore this dependency` will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot use these labels` will set the current labels as the default for future PRs for this repo and language\n- `@dependabot use these reviewers` will set the current reviewers as the default for future PRs for this repo and language\n- `@dependabot use these assignees` will set the current assignees as the default for future PRs for this repo and language\n- `@dependabot use this milestone` will set the current milestone as the default for future PRs for this repo and language\n\nYou can disable automated security fix PRs for this repo from the [Security Alerts page](https://github.com/localstack/localstack/network/alerts).\n\n</details>",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2023-02-04T02:18:48Z",
        "closed_at": "2023-02-09T09:26:24Z",
        "merged_at": "2023-02-09T09:26:24Z",
        "body": "Bumps [tokio](https://github.com/tokio-rs/tokio) from 1.18.4 to 1.18.5.\n<details>\n<summary>Commits</summary>\n<ul>\n<li><a href=\"https://github.com/tokio-rs/tokio/commit/171ce0ff8d38b87a39c1e6a16fedc9a2373720e0\"><code>171ce0f</code></a> chore: prepare Tokio v1.18.5 release</li>\n<li><a href=\"https://github.com/tokio-rs/tokio/commit/d6ea7a742b92d3e516035a584ab9347a96be363a\"><code>d6ea7a7</code></a> Add <code>T: Unpin</code> bound to ReadHalf::unsplit</li>\n<li>See full diff in <a href=\"https://github.com/tokio-rs/tokio/compare/tokio-1.18.4...tokio-1.18.5\">compare view</a></li>\n</ul>\n</details>\n<br />\n\n\n[![Dependabot compatibility score](https://dependabot-badges.githubapp.com/badges/compatibility_score?dependency-name=tokio&package-manager=cargo&previous-version=1.18.4&new-version=1.18.5)](https://docs.github.com/en/github/managing-security-vulnerabilities/about-dependabot-security-updates#about-compatibility-scores)\n\nDependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.\n\n[//]: # (dependabot-automerge-start)\n[//]: # (dependabot-automerge-end)\n\n---\n\n<details>\n<summary>Dependabot commands and options</summary>\n<br />\n\nYou can trigger Dependabot actions by commenting on this PR:\n- `@dependabot rebase` will rebase this PR\n- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it\n- `@dependabot merge` will merge this PR after your CI passes on it\n- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it\n- `@dependabot cancel merge` will cancel a previously requested merge and block automerging\n- `@dependabot reopen` will reopen this PR if it is closed\n- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually\n- `@dependabot ignore this major version` will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot ignore this minor version` will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot ignore this dependency` will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot use these labels` will set the current labels as the default for future PRs for this repo and language\n- `@dependabot use these reviewers` will set the current reviewers as the default for future PRs for this repo and language\n- `@dependabot use these assignees` will set the current assignees as the default for future PRs for this repo and language\n- `@dependabot use this milestone` will set the current milestone as the default for future PRs for this repo and language\n\nYou can disable automated security fix PRs for this repo from the [Security Alerts page](https://github.com/localstack/localstack/network/alerts).\n\n</details>",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2023-02-04T02:18:47Z",
        "closed_at": "2023-02-09T09:26:40Z",
        "merged_at": "2023-02-09T09:26:40Z",
        "body": "Bumps [tokio](https://github.com/tokio-rs/tokio) from 1.18.4 to 1.18.5.\n<details>\n<summary>Commits</summary>\n<ul>\n<li><a href=\"https://github.com/tokio-rs/tokio/commit/171ce0ff8d38b87a39c1e6a16fedc9a2373720e0\"><code>171ce0f</code></a> chore: prepare Tokio v1.18.5 release</li>\n<li><a href=\"https://github.com/tokio-rs/tokio/commit/d6ea7a742b92d3e516035a584ab9347a96be363a\"><code>d6ea7a7</code></a> Add <code>T: Unpin</code> bound to ReadHalf::unsplit</li>\n<li>See full diff in <a href=\"https://github.com/tokio-rs/tokio/compare/tokio-1.18.4...tokio-1.18.5\">compare view</a></li>\n</ul>\n</details>\n<br />\n\n\n[![Dependabot compatibility score](https://dependabot-badges.githubapp.com/badges/compatibility_score?dependency-name=tokio&package-manager=cargo&previous-version=1.18.4&new-version=1.18.5)](https://docs.github.com/en/github/managing-security-vulnerabilities/about-dependabot-security-updates#about-compatibility-scores)\n\nDependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.\n\n[//]: # (dependabot-automerge-start)\n[//]: # (dependabot-automerge-end)\n\n---\n\n<details>\n<summary>Dependabot commands and options</summary>\n<br />\n\nYou can trigger Dependabot actions by commenting on this PR:\n- `@dependabot rebase` will rebase this PR\n- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it\n- `@dependabot merge` will merge this PR after your CI passes on it\n- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it\n- `@dependabot cancel merge` will cancel a previously requested merge and block automerging\n- `@dependabot reopen` will reopen this PR if it is closed\n- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually\n- `@dependabot ignore this major version` will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot ignore this minor version` will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot ignore this dependency` will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot use these labels` will set the current labels as the default for future PRs for this repo and language\n- `@dependabot use these reviewers` will set the current reviewers as the default for future PRs for this repo and language\n- `@dependabot use these assignees` will set the current assignees as the default for future PRs for this repo and language\n- `@dependabot use this milestone` will set the current milestone as the default for future PRs for this repo and language\n\nYou can disable automated security fix PRs for this repo from the [Security Alerts page](https://github.com/localstack/localstack/network/alerts).\n\n</details>",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 44,
        "deletions": 3,
        "changed_files": 3,
        "created_at": "2023-02-03T23:59:35Z",
        "closed_at": "2023-02-14T14:20:54Z",
        "merged_at": "2023-02-14T14:20:54Z",
        "body": "Following an inquiry by @dfangl, I noticed that `shutdown` is never called on the `HypercornServer` serving the ASF gateway. This may be one of the causes for some of the exceptions we've been seeing at the end of test runs. I also found an error in the code that shuts down the event loop (`shutdown_asyncgens` is an async function) \r\n\r\nThis change _will_ affect the shutdown procedure and make it take - worst case - 10 seconds, because of this line: https://github.com/localstack/localstack/blob/d74b3550fc4d05f46abaa7454f10327313c830b2/localstack/http/hypercorn.py#L62\r\n\r\nI know the mantra has been making localstack shut down fast. With this change, the shutdown procedure will take at least 10 seconds _if_ an HTTP  request is currently in progress that is blocking the gateway shutdown. There's no practical way of forcefully cancelling request threads that are spawned by the gateway.\r\n\r\nWe could add a check for `config.FORCE_SHUTDOWN`, but that is turned off by default, and  doubt there's anyone actually turning it on, so the change would have no effect. Although it could be useful for tests, since the added shutdown routine should have no other effect on the user experience (other than maybe removing some of the exceptions when localstack shuts down).\r\n\r\nPlease share your thoughts @alexrashed @dfangl \r\n\r\n/add 2023-02-07\r\nfollowing further investigation, it became quite obvious that the shutdown procedure wouldn't have any effect on the interpreter shutdown, because `ThreadPoolExecutor` threads are not daemon threads. So I implemented an Executor that spawns daemon threads. It's a bit simpler than the default implementation, since we don't need to globally keep track of threads any more, and the reference keeping goes away.\r\n\r\nNow the interpreter will shut down correctly, with the caveat that threads that claim resources may not free those correctly.\r\n\r\n/add 2023-02-13\r\nas @dfangl pointed out, the problem is not actually threads being not being daemon threads (which they are if they are spawned from another daemon thread), but actually the global atexit handler that joins all threads created in a thread pool. i changed the custom thread pool to a version that simply deletes the threads it creates from the global list of threads. with our current way of starting the asgi gateway (from another daemon thread), the interpreter should now shut down correctly.\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 8,
        "deletions": 141,
        "changed_files": 7,
        "created_at": "2023-02-03T19:24:50Z",
        "closed_at": "2023-02-06T16:40:23Z",
        "merged_at": "2023-02-06T16:40:22Z",
        "body": "This PR removes an `ext` dependency related to the saving of `startup_info.json`. \r\nSome context: this was introduced at some point to save the startup's community/pro information, and it does not make much sense with the current restructuring. A proper implementation would require some patching in pro. \r\nAfter a brief discussion with @thrau, we decided to drop this and, eventually, rework it in the future if it ever arises again as a requirement. ",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 22,
        "deletions": 55,
        "changed_files": 2,
        "created_at": "2023-02-03T17:40:13Z",
        "closed_at": "2023-02-03T20:12:29Z",
        "merged_at": "2023-02-03T20:12:29Z",
        "body": "Fixes current CI failures caused by updates to the latest runtime images provided by AWS.\r\n\r\nWe could still work with some form of pinning but I feel like the stack trace is inherently too brittle for a full snapshot comparison.",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 6,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-02-03T10:58:18Z",
        "closed_at": "2023-02-07T10:51:31Z",
        "merged_at": null,
        "body": "This PR adds all deprecated environment variables to the config event introduced in #7508.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 183,
        "deletions": 45,
        "changed_files": 7,
        "created_at": "2023-02-02T15:26:12Z",
        "closed_at": "2023-02-07T10:53:37Z",
        "merged_at": "2023-02-07T10:53:37Z",
        "body": "This PR fixes several issues with our proxy framework, namely:\r\n- **Forwarding of streamed requests (HTTP 1.1 streaming using `Transfer-Encoding: chunked`):**\r\n  - Incoming streamed requests have the header `Transfer-Encoding: chunked` and no `Content-Length` header.\r\n  - The forwarding currently does not support forwarding the stream itself, therefore it loads the data in memory and sends the request (just as the legacy gateway did), but it did not reset the `Transfer-Encoding` header or set the `Content-Length`.\r\n- **Preserving the `Host` header of the origin client:**\r\n  - The `SimpleRequestsClient` solely used the `Host` header to determine the host part of the target URL.\r\n  - The proxy has to preserve the `Host` header because it might be used by backend services to build URLs which should be reachable by the original client.\r\n  - The `SimpleRequestsClient` now allows being configured to use the WSGI `SERVER_` settings instead of the `Host` header.\r\n  - This allows setting the target on the request object, without modifying the `HttpClient` interface, and without modifying the `Host` header of the request which should be sent.\r\n  - This has the consequence that the `Proxy` cannot use an arbitrary `HttpClient` anymore. However, this feature has not been used yet, and the described use-case (setting header on all requests) could still easily be added again.\r\n\r\nRelates to: #7465, #7563",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 17,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2023-02-02T10:01:55Z",
        "closed_at": "2023-02-03T12:48:20Z",
        "merged_at": "2023-02-03T12:48:20Z",
        "body": "## Motivation\r\nPR was motivated by failing downloads of ffmpeg where the Installer tries to extract the empty installer file instead of just re-trying to download the archive first. It also didn't log any meaningful exceptions in this case since it wasn't a `requests.exceptions.ReadTimeout`\r\n\r\n\r\n## Changes\r\n\r\n* Downloads are retried up to 3 times\r\n* Exception + retry attempt number are logged in case of a failure\r\n* Extraction is not attempted on an empty \"archive\" file.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 39,
        "deletions": 2,
        "changed_files": 3,
        "created_at": "2023-02-02T00:06:39Z",
        "closed_at": "2023-02-21T00:08:20Z",
        "merged_at": "2023-02-21T00:08:20Z",
        "body": "With this change the CFn Api returns the correct resource type in the stack events. Important for cli tools that rely in the stack events for progress indicators.",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-02-01T22:01:12Z",
        "closed_at": "2023-03-15T13:18:17Z",
        "merged_at": null,
        "body": "Issue:\r\n\r\nhttps://github.com/localstack/localstack/issues/7597\r\n\r\nThe fix is simple. unprocessed items should be appended to `unprocessed[table_name]` not `unprocessed_items[table_name]`\r\n\r\nTested the fix in my docker container. ",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 769,
        "deletions": 144,
        "changed_files": 7,
        "created_at": "2023-02-01T20:12:22Z",
        "closed_at": "2023-02-08T11:26:37Z",
        "merged_at": "2023-02-08T11:26:37Z",
        "body": "This PR introduces and migrates some current API Gateway tests to a new file structure, and those are AWS validated. The focus of this PR is the `RestAPI` resource. \r\n\r\nThe end goal is to remove most of the moto patches contained in `localstack/services/apigateway/patches.py` if those can be part of the ASF provider (some makes sense to stay, as they directly interact with the moto backend and would be harder to implement, those will be migrate to use `@patch`), and to improve parity on basic CRUD operations of the provider. \r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 53,
        "deletions": 11,
        "changed_files": 3,
        "created_at": "2023-02-01T17:41:46Z",
        "closed_at": "2023-02-02T20:28:18Z",
        "merged_at": "2023-02-02T20:28:17Z",
        "body": "Add test for `aws-sdk:s3:deleteObject` custom SDK call tasks in StepFunctions. Depends on https://github.com/localstack/localstack-artifacts/pull/13",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 102,
        "deletions": 28,
        "changed_files": 5,
        "created_at": "2023-02-01T11:21:51Z",
        "closed_at": "2023-02-01T13:17:18Z",
        "merged_at": "2023-02-01T13:17:18Z",
        "body": "Extend Docker client utilities (SDK-based as well as CLI-based Docker client) to accept `--label` flags in the additional flags. This is a requirement that recently came up for the [LocalStack Docker Desktop extension](https://github.com/localstack/localstack-docker-extension). /cc @HarshCasper @Pive01\r\n\r\nThe PR also contains slight refactoring of the `parse_additional_flags(..)` util function - returning a `DockerRunFlags` object, instead of a tuple with the result entries.\r\n\r\nTests have been extended to cover the new functionality.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 582,
        "deletions": 34,
        "changed_files": 5,
        "created_at": "2023-02-01T08:47:50Z",
        "closed_at": "2023-02-01T10:21:50Z",
        "merged_at": "2023-02-01T10:21:50Z",
        "body": "# \ud83d\ude80 ASF Update Report \ud83d\ude80\nThis PR has been automatically generated to update the generated API stubs for our ASF services.\nIt uses the latest code-generator from the _master_ branch ([scaffold.py](https://github.com/localstack/localstack/blob/master/localstack/aws/scaffold.py)) and the latest _published_ version of [botocore](https://github.com/boto/botocore) to re-generate all API stubs which are already present in the `localstack.aws.api` module of the _master_ branch.\n\n## \ud83d\udd04 Updated Services\nThis PR updates the following services:\n- cloudformation\n- ec2\n- lambda-\n- opensearch\n- route53\n\n## \ud83d\udc77\ud83c\udffd Handle this PR\nThe following options describe how to interact with this PR / the auto-update:\n\n\u2714\ufe0f **Accept Changes**\nIf the changes are satisfying, just squash-merge the PR and delete the source branch.\n\n\ud83d\udeab **Ignore Changes**\nIf you want to ignore the changes in this PR, just close the PR and *do not delete* the source branch. The PR will not be opened and a new PR will not be created for as long as the generated code does not change (or the branch is deleted). As soon as there are new changes, a new PR will be created.\n\n\u270f\ufe0f **Adapt Changes**\n*Don't do this.* The APIs are auto-generated. If you decide that the APIs should look different, you have to change the code-generation.\n\n\u23f8\ufe0f **Pause Updates**\nRemove the cron-schedule trigger of the GitHub Action workflow which creates these PRs. The action can then still be triggered manually, but it will not be executed automatically.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-02-01T08:10:01Z",
        "closed_at": "2023-02-01T10:43:42Z",
        "merged_at": "2023-02-01T10:43:42Z",
        "body": "Updates the init release for the ASF Lambda provider\r\n\r\nRelease notes: https://github.com/localstack/lambda-runtime-init/releases/tag/v0.1.11-pre",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 9,
        "deletions": 33,
        "changed_files": 3,
        "created_at": "2023-01-31T19:40:53Z",
        "closed_at": "2023-02-03T17:07:35Z",
        "merged_at": "2023-02-03T17:07:35Z",
        "body": "This makes the template deployer stop relying in a list of updatable resources and checks if the resource  model implements the update_resource method",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 220,
        "deletions": 0,
        "changed_files": 3,
        "created_at": "2023-01-31T15:35:34Z",
        "closed_at": "2023-02-07T08:57:28Z",
        "merged_at": "2023-02-07T08:57:28Z",
        "body": "* adding ec2.modify_launch_template functionality\r\n* adding some tests\r\n* adding some basic parameter validation for ec2.create_launch_template and some minimal tests\r\n\r\n",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 28,
        "deletions": 0,
        "changed_files": 3,
        "created_at": "2023-01-31T12:39:17Z",
        "closed_at": "2023-02-01T19:53:55Z",
        "merged_at": "2023-02-01T19:53:55Z",
        "body": "## Changes\r\n- By default an execution environment will now wait 10 minutes after the last invocation has been processed and stop itself afterwards. Each new invocation it receives resets this timer.\r\n- The timeout is configurable via `LAMBDA_KEEPALIVE_MS`.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 15,
        "deletions": 4,
        "changed_files": 2,
        "created_at": "2023-01-31T12:18:53Z",
        "closed_at": "2023-01-31T15:44:43Z",
        "merged_at": "2023-01-31T15:44:43Z",
        "body": "## Motivation\r\nThe copying of the lambda runtime init binary into the container fails, if `/var/rapid` does not exist beforehand. This does not appear in AWS provided lambda images, as the folder is already present there, but for custom images without this folder.\r\n\r\n## Changes\r\n* Adapt the installer slightly, so the binary is stored under `<version>/<arch>/var/rapid/init`. With this, we can just copy the contents of `<version>/<arch>` to `/`, and it will create / copy all the necessary parent directories with it, circumventing that problem.\r\n\r\n@alexrashed @baermat might be a unusual usage of the installers, tagging for reference",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 166,
        "deletions": 14,
        "changed_files": 6,
        "created_at": "2023-01-31T11:25:55Z",
        "closed_at": "2023-02-24T17:17:03Z",
        "merged_at": "2023-02-24T17:17:03Z",
        "body": "Improve support for request parameters.\r\n\r\nTerraform Sample - https://github.com/localstack/localstack-terraform-samples/tree/master/apigateway-appsync-integration\r\n\r\nLinks to: https://github.com/localstack/localstack/pull/7729",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-01-30T19:36:26Z",
        "closed_at": "2023-01-30T22:58:56Z",
        "merged_at": "2023-01-30T22:58:56Z",
        "body": "See https://github.com/etspaceman/kinesis-mock/releases/tag/0.3.4 and https://github.com/etspaceman/kinesis-mock/releases/tag/0.3.3\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-01-30T17:31:18Z",
        "closed_at": "2023-02-01T15:04:06Z",
        "merged_at": "2023-02-01T15:04:06Z",
        "body": "This PR adds the internal `_pods` endpoint to our legacy cors checks, which essentially applies typical cors handling onto those routes.\r\n\r\nNecessitated by the Pods Launchpad\r\n\r\n\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 23,
        "deletions": 3,
        "changed_files": 1,
        "created_at": "2023-01-30T09:30:45Z",
        "closed_at": "2023-01-30T15:48:34Z",
        "merged_at": "2023-01-30T15:48:34Z",
        "body": "Fix for failing pipeline in `capture_not_implemented` script for pro. \r\nThere is a new pattern `\\\\p{Alnum}]` used for some parameters in `sagemaker` that was not yet sanitized. \r\n\r\nAdded additional logs to see those kind of errors quicker, e.g. in the output when the job fails.",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 398,
        "deletions": 0,
        "changed_files": 3,
        "created_at": "2023-01-30T05:04:51Z",
        "closed_at": "2023-02-01T08:44:34Z",
        "merged_at": null,
        "body": "# \ud83d\ude80 ASF Update Report \ud83d\ude80\nThis PR has been automatically generated to update the generated API stubs for our ASF services.\nIt uses the latest code-generator from the _master_ branch ([scaffold.py](https://github.com/localstack/localstack/blob/master/localstack/aws/scaffold.py)) and the latest _published_ version of [botocore](https://github.com/boto/botocore) to re-generate all API stubs which are already present in the `localstack.aws.api` module of the _master_ branch.\n\n## \ud83d\udd04 Updated Services\nThis PR updates the following services:\n- ec2\n- lambda-\n- route53\n\n## \ud83d\udc77\ud83c\udffd Handle this PR\nThe following options describe how to interact with this PR / the auto-update:\n\n\u2714\ufe0f **Accept Changes**\nIf the changes are satisfying, just squash-merge the PR and delete the source branch.\n\n\ud83d\udeab **Ignore Changes**\nIf you want to ignore the changes in this PR, just close the PR and *do not delete* the source branch. The PR will not be opened and a new PR will not be created for as long as the generated code does not change (or the branch is deleted). As soon as there are new changes, a new PR will be created.\n\n\u270f\ufe0f **Adapt Changes**\n*Don't do this.* The APIs are auto-generated. If you decide that the APIs should look different, you have to change the code-generation.\n\n\u23f8\ufe0f **Pause Updates**\nRemove the cron-schedule trigger of the GitHub Action workflow which creates these PRs. The action can then still be triggered manually, but it will not be executed automatically.",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-01-30T04:18:30Z",
        "closed_at": "2023-01-30T18:04:50Z",
        "merged_at": null,
        "body": "See https://github.com/etspaceman/kinesis-mock/releases/tag/0.3.3\r\n\r\nSpecifically, see https://github.com/etspaceman/kinesis-mock/pull/412\r\n\r\nThis release fixes several issues with regards to how scaling operations worked, and most notably provides the capability to scale the Kinesis streams while consuming them. This also provides StreamARN support to all API calls that added it.\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 31,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-01-29T16:18:30Z",
        "closed_at": "2023-02-25T14:34:02Z",
        "merged_at": "2023-02-25T14:34:02Z",
        "body": "Support API Gateway to Dynamodb intergration queries ",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 101,
        "deletions": 144,
        "changed_files": 2,
        "created_at": "2023-01-29T02:10:31Z",
        "closed_at": "2023-02-04T10:58:15Z",
        "merged_at": "2023-02-04T10:58:15Z",
        "body": "This PR adds a factory for creating `Service` instances for ASF providers.\r\n\r\nThrough the `MotoFallbackDispatcher` we lost the reference the original provider instance. Basically there was no way to use the `ServicePluginManager` to iterate over the provider instances. This is however necessary for the state visitor pattern to work correctly. Providers need to be able to implement the `accept_state_visitor` method, and some higher-order mechanism needs to collect all provider instances and call the method on them. Now this can be the `Service` instance, since the `Service` can delegate the call to the `_provider` attribute it now holds.\r\nSo basically what this will enable down the road is\r\n\r\n```python\r\nfor service in SERVICE_PLUGINS:\r\n     service.accept_state_visitor(visitor)\r\n```\r\n\r\nIt also creates a nice way of phasing out the `AwsApiListener` which will go away soon :partying_face:  it isolates the use into the factory method.\r\n\r\nPlus it makes the `providers.py` a bit cleaner :-)\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 6,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-01-28T14:16:41Z",
        "closed_at": "2023-03-27T16:28:53Z",
        "merged_at": "2023-03-27T16:28:53Z",
        "body": "Fixed issue, which is the same as in #1081 but for `LAMBDA_EXECUTOR: local`. Using local executor to avoid using DIND in Gitlab CI",
        "comments": 5
    },
    {
        "merged": true,
        "additions": 154,
        "deletions": 15,
        "changed_files": 3,
        "created_at": "2023-01-27T18:58:37Z",
        "closed_at": "2023-01-28T17:40:28Z",
        "merged_at": "2023-01-28T17:40:28Z",
        "body": "This fixes an issue reported in #7529.\r\n\r\nWe've had wrong assumptions with SNS FIFO topics, we assumed that if they were set with `ContentBasedDeplication=true`, the subscribed SQS queue would have it set too, and would take care of the message deduplication. But it's actually wrong, as SNS will create a `MessageDeduplicationId` from the message content that will take precedence over the content of the SQS message, which makes sense, as we would pass a JSON encoded string from SNS to SQS, containing a timestamp, and that would defeat the purpose of the anti deduplication system.\r\n\r\nThis PR fixes this wrong assumption to be more in line with how AWS behaves, tested with snapshots. \r\n\r\n_fixes #7529_",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 88,
        "deletions": 5,
        "changed_files": 3,
        "created_at": "2023-01-27T18:49:35Z",
        "closed_at": "2023-01-30T15:37:55Z",
        "merged_at": "2023-01-30T15:37:55Z",
        "body": "Add idempotence for `chmod` utils, to make startup as non-root users more resilient.\r\n\r\nAddresses a customer issue where the Kinesis startup fails when running the container as a non-root user:\r\n<img width=\"1226\" alt=\"image\" src=\"https://user-images.githubusercontent.com/2807888/215150446-e5eddcc6-19d4-4589-b866-ff7267c9683a.png\">\r\n\r\nWe have several occurrences of chmod logic where this change can help improve the startup resilience. This change will allow us to gracefully handle situations where the filesystem is not modifiable, but the correct permissions are already in place.\r\n\r\nThe alternative would be to wrap each call to `chmod_r(..)` in a try/except, but it seems appropriate to handle this logic centrally in this case. ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 33,
        "deletions": 5,
        "changed_files": 2,
        "created_at": "2023-01-27T17:51:19Z",
        "closed_at": "2023-01-31T13:53:19Z",
        "merged_at": "2023-01-31T13:53:19Z",
        "body": "An issue (#7562) has been reported when publishing to SNS FIFO topics with `TargetArn`: our validation was only for when `TopicArn` was set. For compatibility reasons, AWS allows users to use either `TargetArn` or `TopicArn` while publishing to an SNS topic. This moves the logic that used a bit later in the method to validate topics with either `TargetArn` or `TopicArn`.\r\n\r\n_fixes #7562_",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 140,
        "deletions": 26,
        "changed_files": 4,
        "created_at": "2023-01-27T12:18:29Z",
        "closed_at": "2023-01-27T14:48:49Z",
        "merged_at": "2023-01-27T14:48:49Z",
        "body": "This PR adds two new utility specializations of the `HypercornServer`:\r\n- `GatewayServer` which simplifies serving a `localstack.aws.gatway.Gateway` as a `Server`.\r\n- `ProxyServer` which serves a `Gateway` with only a `ProxyHandler`.\r\n  - The `ProxyHandler` is just a handler which forwards requests to an external system.\r\n  - This effectively means serving a HTTP/HTTPS mulitplexing proxy server.\r\n\r\nRelates to: #7465",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 27,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-01-26T20:09:24Z",
        "closed_at": "2023-01-27T19:30:34Z",
        "merged_at": "2023-01-27T19:30:34Z",
        "body": "This PR adds a patch to pickle the `CertBundle` models. ",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 175,
        "deletions": 25,
        "changed_files": 9,
        "created_at": "2023-01-26T16:27:27Z",
        "closed_at": "2023-02-07T20:27:33Z",
        "merged_at": "2023-02-07T20:27:33Z",
        "body": "See https://github.com/localstack/localstack-ext/pull/1322\r\n\r\n* Add hook for `inject_layer_fetcher`\r\n* Test layers limits (>5 layers)",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 285,
        "deletions": 434,
        "changed_files": 6,
        "created_at": "2023-01-26T03:55:16Z",
        "closed_at": "2023-01-27T00:47:40Z",
        "merged_at": "2023-01-27T00:47:40Z",
        "body": "Continuation of #7510\r\nThis PR aims at migrating the opensearch provider from the legacy edge proxy to the new edge proxy. Changes include\r\n- The proxying now works with registering rules with the edge router. `EndpointProxy` is no longer related `ProxyListener`\r\n- To achieve this, the custom endpoint is now passed to the `EndpointProxy`\r\n- Moved `EndpointProxy` and `FakeEndpointProxyServer` out of `generic_proxy.py` to `cluster.py` since they are only used for opensearch.\r\n\r\nRelated to https://github.com/localstack/localstack/pull/7465\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 34,
        "deletions": 6,
        "changed_files": 5,
        "created_at": "2023-01-26T00:29:26Z",
        "closed_at": "2023-02-22T00:04:14Z",
        "merged_at": "2023-02-22T00:04:14Z",
        "body": "This PR accomplishes two things:\r\n\r\n1) making sure literal booleans are correctly parsed on our VTL templates. Why `ast.literal_eval` and not `json.loads`? Imagine the following case:\r\n\r\n```\r\n# valid rendered template (well, given airspeed implementation)\r\ntpl = '{\"key\": True}' \r\n\r\n# fails because the string above is not valid json, True is not a valid json literal\r\njson.loads(tpl)\r\n# works and returns the following dict {\"key\": True}\r\nast.literal_eval(tpl)\r\n```\r\n2) routes with trailing slashes are correctly handled inside APIGW router, it uses the `strict_slashes` where it's needed.\r\n\r\nThere is a comprehensive test upstream for the templating and routing issue.",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 11,
        "deletions": 3,
        "changed_files": 1,
        "created_at": "2023-01-25T17:10:16Z",
        "closed_at": "2023-02-02T13:23:55Z",
        "merged_at": "2023-02-02T13:23:55Z",
        "body": "When doing a reset of resources, the schedule cloudwatch alarms still assume that the alarms can be found.\r\nIncluded a check which will ensure that the alarm exists.\r\n\r\nThis happens only if the backend is deleted, e.g. when running a cleanup process. I.e. when the api `delete_alarm` is used, the scheduler will be removed anyhow.\r\n\r\n@giograno: I realized there is another `persistence` pattern for the Pro version, where we can do additional resets. \r\nHowever, the alarm-scheduler is part of the `CloudwatchProvider` and it seems tricky to do reset and I have a feeling this is a rare edge case anyhow.\r\n\r\nDo you think it's fine to just keep the scheduler running, given that in normal setup, just deleting the backends (without restarting LocalStack) should not happen?\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 90,
        "deletions": 45,
        "changed_files": 4,
        "created_at": "2023-01-25T14:11:13Z",
        "closed_at": "2023-01-26T09:32:39Z",
        "merged_at": "2023-01-26T09:32:39Z",
        "body": "Extend allowed CORS origins to include `EDGE_PORT_HTTP` endpoint. This change ensures that the `http://localhost:4566` endpoint is in the `ALLOWED_CORS_ORIGINS` list (for Community + Pro users). \r\n\r\nThe issue surfaced when deploying our [demo sample app](https://github.com/localstack/localstack-demo/pull/47) Web UI (HTML file) as an S3 website, and testing against LocalStack Pro: In the default Pro setup, we have `EDGE_PORT=443` and `EDGE_PORT_HTTP=4566`, and since we were previously configuring the allowed origins only via `config.EDGE_PORT`, it was not possible to access the LocalStack APIs from a website running under `http://localhost:4566` (only when using port 443).\r\n\r\nTouching the CORS setup is always a bit finicky, but this change (1) should have no negative security side effects (we're only allowing the additional localhost port 4566, in addition to localhost port 443), and (2) ensures that we can offer S3 websites (e.g., `http://localhost:4566/mybucket/index.html`) that can connect directly to the LocalStack APIs, working for both Community and Pro.\r\n\r\nThe PR adds a small integration test to cover the logic around `EXTRA_CORS_EXPOSE_HEADERS` (existing logic, currently not yet covered), as well as a unit test to cover the new functionality around allowed localhost origins with different ports (incl. `EDGE_PORT_HTTP`).",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 119,
        "deletions": 20,
        "changed_files": 9,
        "created_at": "2023-01-25T12:25:50Z",
        "closed_at": "2023-02-06T08:22:24Z",
        "merged_at": "2023-02-06T08:22:24Z",
        "body": "### Summary\r\n\r\n- Add support for Opensearch 2.3\r\n- Make 2.3 the default version. The integration tests now run against this version\r\n- Bumps opensearch-py to allow client support for OS 2.x. It is also mostly compatible with OS 1.x, functionality with OS 1.x won't break unless for things that are removed in 2.x [more info](https://github.com/opensearch-project/opensearch-py/blob/main/COMPATIBILITY.md)\r\n\r\n### Notes\r\n\r\n- Opensearch 2.3 has an updgrade path from Opensearch 1.3, [more info here](https://docs.aws.amazon.com/opensearch-service/latest/developerguide/version-migration.html)\r\n- AWS docs don't mention the default Opensearch version, but attempting to create a domain using CLI without a version specified causes Opensearch 2.3 to be used.\r\n\r\n### Related\r\nDocs: https://github.com/localstack/docs/pull/451",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 12,
        "deletions": 12,
        "changed_files": 1,
        "created_at": "2023-01-25T11:23:34Z",
        "closed_at": "2023-01-25T13:37:55Z",
        "merged_at": "2023-01-25T13:37:55Z",
        "body": "Follow up of https://github.com/localstack/localstack/pull/7482\r\nFixes Daniel's naming comment.",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 5,
        "deletions": 4,
        "changed_files": 2,
        "created_at": "2023-01-25T08:57:13Z",
        "closed_at": "2023-01-25T11:24:31Z",
        "merged_at": null,
        "body": "If docker is not running, then `docker ps` hangs indefinitely. I discovered this when running `make entrypoints` on a mac which was not running docker.\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 0,
        "deletions": 40,
        "changed_files": 1,
        "created_at": "2023-01-25T08:48:15Z",
        "closed_at": "2023-01-25T20:05:49Z",
        "merged_at": "2023-01-25T20:05:49Z",
        "body": "This PR just removes a leftover file from the cleanup of the terraform test GitHub action workflows (which have been removed with https://github.com/localstack/localstack/pull/7519). \r\nThe patch was migrated to [localstack/localstack-terraform-test](https://github.com/localstack/localstack-terraform-test/pull/14) with https://github.com/localstack/localstack-terraform-test/pull/14: [/etc/001-hardcode-endpoint.patch](https://github.com/localstack/localstack-terraform-test/blob/094ed90ecf9678105e8099cd36c8f4d36b93ae2b/etc/001-hardcode-endpoint.patch)\r\n/cc @macnev2013 ",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 13,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-01-24T19:48:22Z",
        "closed_at": "2023-01-26T08:51:24Z",
        "merged_at": "2023-01-26T08:51:24Z",
        "body": "This PR adds tests an additional location for moto-backends that is used in `visitors.py` to determine cleanup locations.\r\nSome services that have a name with an underscore, like `application_autoscaling` have a related moto-backend that does exclude the underscore.\r\n\r\nAdditionally, the service `ce` has a special location for the model, I also added it with this PR.\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-01-24T15:38:45Z",
        "closed_at": "2023-01-25T08:49:40Z",
        "merged_at": "2023-01-25T08:49:40Z",
        "body": "See https://github.com/etspaceman/kinesis-mock/releases\r\n\r\nSpecifically adds StreamARN parameter support for putRecord and putRecords. Needed for the KPL 0.15.x releases.\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 77,
        "deletions": 36,
        "changed_files": 4,
        "created_at": "2023-01-24T13:19:34Z",
        "closed_at": "2023-02-06T09:18:09Z",
        "merged_at": "2023-02-06T09:18:09Z",
        "body": "# Issue\r\n- #7541 \r\n\r\n# Fix\r\n- Patched `ListBucketsOutput` to `ListAllMyBucketsResult`.\r\n  - In boto spec definition of output from `ListBuckets` is `ListBucketsOutput` whereas AWS is returning  `ListAllMyBucketsResult`.\r\n- `list_objects` contains `ListBucketResult` object whereas we are returning `ListObjectsOutput` \r\n\r\n# Commands to Reproduce\r\n\r\n```\r\nStart localstack instance with env `PROVIDER_OVERRIDE_S3: \"asf\"`\r\n```\r\n\r\nComparing the response from this commands will po\r\n`list_bucket`\r\n```\r\nawslocal s3api list-buckets --profile ls --debug\r\n```\r\n```\r\naws s3api list-buckets --profile ls --debug\r\n```\r\n\r\n`list-objects`\r\n```\r\nawslocal s3 mb s3://test-bucket --profile ls --region us-east-1 --debug\r\nawslocal s3api list-objects --bucket test-bucket --profile ls --region us-east-1 --debug\r\n```\r\n```\r\naws s3 mb s3://test-bucket --profile ls --region us-east-1 --debug\r\naws s3api list-objects --bucket test-bucket --profile ls --region us-east-1 --debug\r\n```\r\n\r\n\r\n# Tested Also with\r\nhttps://github.com/Dowwie/localstack_s3_xml_issue",
        "comments": 6
    },
    {
        "merged": true,
        "additions": 118,
        "deletions": 40,
        "changed_files": 7,
        "created_at": "2023-01-24T12:50:02Z",
        "closed_at": "2023-01-24T16:53:20Z",
        "merged_at": "2023-01-24T16:53:20Z",
        "body": "The `ArnPartitionRewriteHandler` intercepts incoming requests and tries to adjust the partitions in ARNs within the intercepted requests. These ARNs can be located in all parts of the request which can be used as an operation's parameter, including the HTTP path. If an ARN is contained in the HTTP path, it needs to be URL encoded (because it can contain URL encoded characters like colons or slashes).\r\nThe encoding of these paths has not yet been properly handled / preserved bythe `ArnPartitionRewriteHandler` as well as our HTTP proxy infrastructure.\r\nThis PR contains the following changes:\r\n- It ensures that the raw path is preserved within the HTTP proxy infrastructure.\r\n- It explicitly handles URL encoded paths in the `ArnPartitionRewriteHandler`.\r\n- It renames the python test module `unit.logging` to `unit.logging_` (analogous to #6071) in order to fix issues with debugging the tests in PyCharm.",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 32,
        "deletions": 6,
        "changed_files": 2,
        "created_at": "2023-01-24T11:42:05Z",
        "closed_at": "2023-01-24T13:22:18Z",
        "merged_at": null,
        "body": "# Issue\r\n- #7541 \r\n\r\n# Fix\r\n- Patched `ListBucketsOutput` to `ListAllMyBucketsResult`.\r\n  - In boto spec definition of output from `ListBuckets` is `ListBucketsOutput` whereas AWS is returning  `ListAllMyBucketsResult`.\r\n\r\n# Commands to Reproduce\r\n\r\n```\r\nStart localstack instance with env `PROVIDER_OVERRIDE_S3: \"asf\"`\r\n```\r\n\r\nComparing the response from this commands will po\r\n```\r\nawslocal s3api list-buckets --profile ls --debug\r\n```\r\n```\r\naws s3api list-buckets --profile ls --debug\r\n```\r\n\r\n# Tested Also with\r\nhttps://github.com/Dowwie/localstack_s3_xml_issue",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2023-01-23T12:49:04Z",
        "closed_at": "2023-01-23T20:54:26Z",
        "merged_at": "2023-01-23T20:54:26Z",
        "body": null,
        "comments": 1
    },
    {
        "merged": true,
        "additions": 104,
        "deletions": 5,
        "changed_files": 3,
        "created_at": "2023-01-23T05:05:52Z",
        "closed_at": "2023-01-23T08:07:13Z",
        "merged_at": "2023-01-23T08:07:13Z",
        "body": "# \ud83d\ude80 ASF Update Report \ud83d\ude80\nThis PR has been automatically generated to update the generated API stubs for our ASF services.\nIt uses the latest code-generator from the _master_ branch ([scaffold.py](https://github.com/localstack/localstack/blob/master/localstack/aws/scaffold.py)) and the latest _published_ version of [botocore](https://github.com/boto/botocore) to re-generate all API stubs which are already present in the `localstack.aws.api` module of the _master_ branch.\n\n## \ud83d\udd04 Updated Services\nThis PR updates the following services:\n- cloudwatch\n- ec2\n- opensearch\n\n## \ud83d\udc77\ud83c\udffd Handle this PR\nThe following options describe how to interact with this PR / the auto-update:\n\n\u2714\ufe0f **Accept Changes**\nIf the changes are satisfying, just squash-merge the PR and delete the source branch.\n\n\ud83d\udeab **Ignore Changes**\nIf you want to ignore the changes in this PR, just close the PR and *do not delete* the source branch. The PR will not be opened and a new PR will not be created for as long as the generated code does not change (or the branch is deleted). As soon as there are new changes, a new PR will be created.\n\n\u270f\ufe0f **Adapt Changes**\n*Don't do this.* The APIs are auto-generated. If you decide that the APIs should look different, you have to change the code-generation.\n\n\u23f8\ufe0f **Pause Updates**\nRemove the cron-schedule trigger of the GitHub Action workflow which creates these PRs. The action can then still be triggered manually, but it will not be executed automatically.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 202,
        "deletions": 10,
        "changed_files": 6,
        "created_at": "2023-01-21T20:41:27Z",
        "closed_at": "2023-01-27T05:07:28Z",
        "merged_at": "2023-01-27T05:07:28Z",
        "body": "This PR improves the integration response handling by checking if any of the status code returned by the integration is configured on API Gateway, such as:\r\n\r\n- If there is a configuration for the status code returned by the integration, use the template (if it exists) to do the transformation\r\n- Or if there are no configurations, return the response from the integration without transformation\r\n- Or if there are configurations but not for the status code returned by the integration. This needs to be tested with responses for >= 400 vs 2xx\r\n\r\nIncludes snapshot testing for the kineses integration output. Tests for the API Gateway will be created at a different time with the focus on the API gateway control plane.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-01-20T05:36:03Z",
        "closed_at": "2023-01-20T08:26:13Z",
        "merged_at": "2023-01-20T08:26:13Z",
        "body": null,
        "comments": 1
    },
    {
        "merged": true,
        "additions": 3136,
        "deletions": 855,
        "changed_files": 41,
        "created_at": "2023-01-19T21:45:28Z",
        "closed_at": "2023-02-22T10:43:27Z",
        "merged_at": "2023-02-22T10:43:27Z",
        "body": "Adds base: lexer, grammar, components, and implementation of stepfunctions' intrinsic functions.\r\n\r\nUnrelated test failure:\r\n`tests/integration/stepfunctions/legacy/test_stepfunctions_legacy.py::test_aws_sdk_task_delete_s3_object`",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 79,
        "deletions": 21,
        "changed_files": 3,
        "created_at": "2023-01-19T17:30:01Z",
        "closed_at": "2023-01-21T14:09:35Z",
        "merged_at": "2023-01-21T14:09:35Z",
        "body": "Relates to #7465\r\n\r\nWe're adding a migration path to `ConfigUpdateProxyListener(ProxyListener)`\r\n\r\nIt currently allows to update the config with a POST on `/?_config_`, and some services can set up listeners to react to the changes. \r\n\r\nThis endpoint will be deprecated.\r\n\r\nWe can't remove the current ProxyListener and will log a deprecation message.\r\nIt currently match on `/?_config_`, a query string, which we cannot use the router to match. The new route is at `/_localstack/config` and make uses of `LocalstackResources`. \r\n\r\n\\cc @thrau for the change in `LocalstackResources`",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 16,
        "deletions": 6,
        "changed_files": 3,
        "created_at": "2023-01-19T16:25:43Z",
        "closed_at": "2023-01-20T00:36:59Z",
        "merged_at": "2023-01-20T00:36:59Z",
        "body": "This issue comes from a support ticket.\r\nThe `request-id` for an S3 notification to EventBridge would hard coded, which prevented them to check for duplicate events.\r\nAdds a simple fix + small test. \r\n",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 173,
        "deletions": 18,
        "changed_files": 3,
        "created_at": "2023-01-19T16:10:54Z",
        "closed_at": "2023-07-05T07:30:43Z",
        "merged_at": null,
        "body": "With the access to `response.data`, the response logger consumed the whole iterator / response data generator when trying to log the response data.\r\nThis PR fixes the ASF response streaming by wrapping the response data iterable with a logging function in case of a streaming response.\r\n\r\nTODO:\r\n- [x] Write a proper test which ensures that streaming responses are properly handled when using an ASF route and the default ASF handler chain.\r\n- [x] Maybe also write a small test on ASF request body streaming.\r\n\r\nResolves #7518.\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 76,
        "deletions": 16,
        "changed_files": 4,
        "created_at": "2023-01-19T09:12:28Z",
        "closed_at": "2023-01-20T08:49:25Z",
        "merged_at": "2023-01-20T08:49:25Z",
        "body": "moto currently does not implement API Gatway's \"UpdateMethodResponse\" operation (which is invoked with an HTTP PATCH request):\r\nhttps://github.com/getmoto/moto/blob/173e1549c06e3bdea110bd5222ed09307867a923/moto/apigateway/responses.py#L222-L254\r\nThe raised exception in moto translates to a status code `500` (\"Internal Server Error\") in the HTTP response in the client, even though it should raise a `501` (\"Not Implemented\"). This slight difference can cause issues, f.e. with IaC tools like Terraform.\r\n\r\nThis PR introduces a new feature in the fallback dispatching logic (and therefore to the `MotoFallbackDispatcher`) which allows the primary provider to avoid a fallback, but actually raise the 501 to the client.\r\nThis is used in the API Gateway provider to define the `update_method_response` operation to fix the status code.\r\n/cc @macnev2013 ",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 0,
        "deletions": 690,
        "changed_files": 5,
        "created_at": "2023-01-19T09:01:28Z",
        "closed_at": "2023-01-19T14:39:31Z",
        "merged_at": "2023-01-19T14:39:30Z",
        "body": "# Summary\r\n- Cleaned up terraform workflow and related files. \r\n- Terraform test workflow is being shifted over to [localstack/localstack-terraform-test](https://github.com/localstack/localstack-terraform-test)",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 83,
        "deletions": 77,
        "changed_files": 2,
        "created_at": "2023-01-18T17:41:24Z",
        "closed_at": "2023-01-19T12:07:46Z",
        "merged_at": "2023-01-19T12:07:46Z",
        "body": "This PR addresses an issue with the streaming body serialization in ASF.\r\nPreviously, the event streaming serialization has only been tested with Kinesis (since it was the only implemented example).\r\nWith the ASF S3 provider, a new streamed operation has been implemented (S3's SelectObjectContent).\r\nUnfortunately, the serialization did not work correctly for the specific operation due to two small bugs:\r\n- The streaming event name differs here from the shape name (in contrast to the Kinesis API), which broke an assumption previously made. This is fixed by using the correct name of the shape member (instead of the name of the shape itself).\r\n- The streaming serialization caused issues with non-JSON serializations (S3 is `rest-xml`) due to a missing event payload member lookup.\r\n\r\nThanks to @bentsku for identifying the issue, sharing a reproducible test case, and helping identifying the root cause!",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 28,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2023-01-18T16:25:57Z",
        "closed_at": "2023-02-07T14:40:33Z",
        "merged_at": "2023-02-07T14:40:33Z",
        "body": "This fixes #7503 as far as I can test, as we don't want to treat URL parameters as an object key if the bucket name has a trailing `/` in the URL request.\r\n\r\nNot sure where is the appropriate place for a unit/integration test.",
        "comments": 7
    },
    {
        "merged": false,
        "additions": 361,
        "deletions": 419,
        "changed_files": 7,
        "created_at": "2023-01-18T10:54:56Z",
        "closed_at": "2023-01-26T07:57:27Z",
        "merged_at": null,
        "body": "This PR aims at migrating the opensearch provider from the legacy edge proxy to the new edge proxy. Changes include\r\n- Introducing a new class `RegisteredProxyServer(Server, abc.ABC)` between `Server` and the implementing classes. This class bundles the functionality of the register process, much like the old `EndpointProxy`\r\n- Renaming of classes like `EdgeProxiedOpensearchCluster` to `EdgeProxiedOpensearchServer`, since these classes have members and methods to manage a cluster, but no cluster functionality in itself.\r\n- The proxying now works with registering rules with the edge router\r\n\r\nRelated to #7465\r\n\r\nEDIT: #7558  is the continuiation (this PR became extremely messy). I don't know if this is proper procedure, but I needed a clean slate",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 608,
        "deletions": 94,
        "changed_files": 13,
        "created_at": "2023-01-17T14:52:04Z",
        "closed_at": "2023-02-16T22:00:33Z",
        "merged_at": "2023-02-16T22:00:33Z",
        "body": "This PR adds supports for CFn Macros/Global Transformations. Several feature tests were added in a previous PR so the objective of this one is to make several of those tests pass.\r\n\r\nTests Passing:\r\n\r\n- [x] test_macro_deployment\r\n- [x] test_global_scope\r\n- [x] test_capabilities_requirements\r\n- [x] test_validate_lamba_internals\r\n- [x] test_to_validate_template_limit\r\n- [x] test_error_pass_macro_as_reference\r\n- [x] test_functions_and_references_during_transformation.\r\n- [x] test_failed_state\r\n\r\nNotes: \r\n- the correct behaviours and errors messages need to be correctly defined for the update_stack and create_change_set operations.\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 44,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-01-17T12:57:28Z",
        "closed_at": "2023-01-19T15:27:21Z",
        "merged_at": "2023-01-19T15:27:21Z",
        "body": "## Summary\r\nThis PR adds a small helper function to push environment variables as an analytics event at `on_infra_start`\r\n\r\n### Some notes:\r\n- I've successfully retrieved the event in the backend\r\n- This is simply a first iteration over the problem/topic, happy to make adjustments now or using further usecases\r\n- We could also read from `config.py`, however it might already be sanitized ([example](https://github.com/localstack/localstack/blob/master/localstack/config.py#L634)).. so it isn't truly set by a user.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 50,
        "deletions": 141,
        "changed_files": 23,
        "created_at": "2023-01-16T18:25:09Z",
        "closed_at": "2023-01-18T15:23:55Z",
        "merged_at": "2023-01-18T15:23:55Z",
        "body": "In #7149 (nearly a month ago) this has been disabled by default, since we had the hypothesis that it is actually redundant. We haven't had to make use of the fallback flag since, so it is safe to assume that we can finally remove it.\r\n\r\nThis PR now cleans up all the resource models by removing the corresponding calls as well as the implementation itself.\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 256,
        "deletions": 3,
        "changed_files": 6,
        "created_at": "2023-01-16T17:29:56Z",
        "closed_at": "2023-01-19T11:07:07Z",
        "merged_at": "2023-01-19T11:07:07Z",
        "body": "This PR fixes an issue reported here #7493\r\n\r\nIt seems moto validation is outdated, and we can make use of the specs for validation. Added snapshot tests and missing field to an exception.\r\n\r\nI tested on `PutObject` because that's what moto uses under the hood after completing a multi part upload. However, there's an issue there as the validation occurs after completing the upload, meaning that the data would be lost if an exception is raised when trying to complete. \r\n\r\n__fixes #7493__",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 38,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2023-01-16T16:52:24Z",
        "closed_at": "2023-01-19T17:30:53Z",
        "merged_at": "2023-01-19T17:30:53Z",
        "body": "# Summary\r\n- Patched get and delete operations for `maintenance_window` from moto to handle `DoesNotExistException`.\r\n\r\n- Tests inside `terraform-provider-aws/internal/service/ssm/maintenance_window_test.go` file were timing because of unhandled retrieval from dict exception in moto - which caused overall terraform test suite pipeline to timeout for SSM service.\r\n\r\n# Steps to reproduce the issue\r\n- `awslocal ssm get-maintenance-window --window-id mw-00000000000000000`",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 174,
        "deletions": 36,
        "changed_files": 5,
        "created_at": "2023-01-16T14:28:21Z",
        "closed_at": "2023-01-17T11:45:38Z",
        "merged_at": "2023-01-17T11:45:38Z",
        "body": "Currently, we launch a proxy to access the local-kms instance. This PR introduces a `Server` abstraction combined with the usage of a `HttpFallbackDispatcher` to provide local-kms. It's analogous to the kinesis-mock integration.",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 65,
        "deletions": 8,
        "changed_files": 3,
        "created_at": "2023-01-16T05:05:05Z",
        "closed_at": "2023-01-17T08:21:56Z",
        "merged_at": "2023-01-17T08:21:55Z",
        "body": "# \ud83d\ude80 ASF Update Report \ud83d\ude80\nThis PR has been automatically generated to update the generated API stubs for our ASF services.\nIt uses the latest code-generator from the _master_ branch ([scaffold.py](https://github.com/localstack/localstack/blob/master/localstack/aws/scaffold.py)) and the latest _published_ version of [botocore](https://github.com/boto/botocore) to re-generate all API stubs which are already present in the `localstack.aws.api` module of the _master_ branch.\n\n## \ud83d\udd04 Updated Services\nThis PR updates the following services:\n- lambda-\n- logs\n- resource-groups\n\n## \ud83d\udc77\ud83c\udffd Handle this PR\nThe following options describe how to interact with this PR / the auto-update:\n\n\u2714\ufe0f **Accept Changes**\nIf the changes are satisfying, just squash-merge the PR and delete the source branch.\n\n\ud83d\udeab **Ignore Changes**\nIf you want to ignore the changes in this PR, just close the PR and *do not delete* the source branch. The PR will not be opened and a new PR will not be created for as long as the generated code does not change (or the branch is deleted). As soon as there are new changes, a new PR will be created.\n\n\u270f\ufe0f **Adapt Changes**\n*Don't do this.* The APIs are auto-generated. If you decide that the APIs should look different, you have to change the code-generation.\n\n\u23f8\ufe0f **Pause Updates**\nRemove the cron-schedule trigger of the GitHub Action workflow which creates these PRs. The action can then still be triggered manually, but it will not be executed automatically.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 11,
        "deletions": 11,
        "changed_files": 2,
        "created_at": "2023-01-15T18:09:19Z",
        "closed_at": "2023-01-16T10:21:07Z",
        "merged_at": "2023-01-16T10:21:07Z",
        "body": "Minor: Pass `providerARNs` to API Gateway authorizer entity on OpenAPI import.\r\n\r\nThis resolves a customer issue where an API endpoint with Cognito authorizer - imported from OpenAPI/Swagger spec - could not be invoked because no user pools are associated with the API:\r\n```\r\n    pool, user = self._lookup_user(invocation_context)\r\n  File \"localstack-ext/localstack_ext/services/apigateway/authorizers.py\", line 96, in _lookup_user\r\n    raise Exception(f\"Unable to find user {username} in configured user pools: {providers}\")\r\nException: Unable to find user test in configured user pools: []\r\n```\r\n\r\nTODO: Probably still going to add a test for this functionality (upstream in -ext) - would make sense, given our current focus to increase the level of testing/parity. \ud83d\udc4d ",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 112,
        "deletions": 27,
        "changed_files": 5,
        "created_at": "2023-01-15T17:57:26Z",
        "closed_at": "2023-01-16T17:37:41Z",
        "merged_at": "2023-01-16T17:37:41Z",
        "body": "Fix resolving SSM stack parameters in CloudFormation `!Sub` references. This issue has surfaced in a user SAM template that used a `AWS::SSM::Parameter::Value<String>` stack reference in an ARN reference that was constructed via a `!Sub` (`Fn::Sub`) intrinsic function.\r\n\r\nSummary of changes:\r\n* update template deployer logic to allow resolving `AWS::SSM::Parameter::Value<String>` references in `!Sub` CloudFormation intrinsic functions\r\n* encapsulate the resolution of `AWS::SSM::Parameter::Value<String>` stack parameters in a single `resolve_ssm_parameter_value(..)` utility function\r\n* add a snapshot test to ensure parity with AWS\r\n* a few minor refactorings, f-strings, etc\r\n\r\n\r\nOverall, working on this PR has highlighted again that stack parameters are in a pretty bad state, unfortunately :/ (as we already previously discussed @dominikschubert ). A more general overhaul of stack/template parameters will be very helpful to make the logic more maintainable, going forward. Happy to take a stab at it, to help out with a first round of basic refactoring - unless you already have plans for this on your own roadmap/backlog @dominikschubert \ud83d\udc4d ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-01-14T12:53:38Z",
        "closed_at": "2023-01-15T20:20:45Z",
        "merged_at": "2023-01-15T20:20:45Z",
        "body": "Seems we're encountering errors in CI because a 3rd party release is broken at the moment: `amazon-kclpy`.\r\nhttps://github.com/awslabs/amazon-kinesis-client-python/commit/2642ae73edd72cb2c0c70ca448294577a3702995\r\nhttps://github.com/awslabs/amazon-kinesis-client-python/compare/v2.0.6...v2.1.0\r\n\r\nPinning the version to the previous release until it is fixed. \r\n\r\nTwo failed build:\r\nhttps://app.circleci.com/pipelines/github/localstack/localstack/11871/workflows/4346b802-95f8-4e54-a9c9-2cba836635fe/jobs/83637\r\nhttps://app.circleci.com/pipelines/github/localstack/localstack/11869/workflows/f24b9c21-d3e1-41bc-823a-edd4ac4b88b7/jobs/83635\r\n\r\nI could reproduce locally the issue as well.\r\n\r\n```python\r\nFailed to build amazon-kclpy\r\nInstalling collected packages: [...redacted, too long of a list]\r\n  Running setup.py install for amazon-kclpy ... - error\r\n  error: subprocess-exited-with-error\r\n  \r\n  \u00d7 Running setup.py install for amazon-kclpy did not run successfully.\r\n  \u2502 exit code: 1\r\n  \u2570\u2500> [8 lines of output]\r\n      /tmp/workspace/repo/.venv/lib/python3.10/site-packages/setuptools/dist.py:770: UserWarning: Usage of dash-separated 'description-file' will not be supported in future versions. Please use the underscore name 'description_file' instead\r\n        warnings.warn(\r\n      /tmp/workspace/repo/.venv/lib/python3.10/site-packages/setuptools/installer.py:27: SetuptoolsDeprecationWarning: setuptools.installer is deprecated. Requirements should be satisfied by a PEP 517 installer.\r\n        warnings.warn(\r\n      running install\r\n      /tmp/workspace/repo/.venv/lib/python3.10/site-packages/setuptools/command/install.py:34: SetuptoolsDeprecationWarning: setup.py install is deprecated. Use build and pip and other standards-based tools.\r\n        warnings.warn(\r\n      error: [Errno 2] No such file or directory: 'pom.xml'\r\n      [end of output]\r\n  \r\n  note: This error originates from a subprocess, and is likely not a problem with pip.\r\nerror: legacy-install-failure\r\n\r\n\u00d7 Encountered error while trying to install package.\r\n\u2570\u2500> amazon-kclpy\r\n```\r\n\r\nedit: not sure why it fails for `integrations-against-pro`, I must be missing something\r\n\r\ncc\\ @alexrashed ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 152,
        "deletions": 1,
        "changed_files": 5,
        "created_at": "2023-01-14T12:34:44Z",
        "closed_at": "2023-01-16T16:21:43Z",
        "merged_at": "2023-01-16T16:21:43Z",
        "body": "This issue was brought up in #7492 \r\n\r\n`CompleteMultipartUpload` would not raise an exception when the parts were not ordered in the `MultipartUpload.Parts` parameter. \r\n\r\nAdded snapshotted test cases against AWS + the validation in the provider operation. \r\n\r\n_fixes #7492_\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 21,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-01-13T18:28:05Z",
        "closed_at": "2023-01-16T08:36:28Z",
        "merged_at": "2023-01-16T08:36:28Z",
        "body": "While working on migrating away from ProxyListeners, I tried to test the behaviour of migrated services. It happens that S3 was completely broken with `LEGACY_EDGE_PROXY=1`, which would break CloudTrail tests, because the default account id in moto is `123456789012` and we would use `000000000000` while trying to access moto backends, which would lead to resource not existing. \r\n\r\nAs we don't test the old edge proxy anymore, I didn't add test but it's easily reproducible locally. \r\n\r\n```bash\r\n$ LEGACY_EDGE_PROXY=1 localstack start\r\n$ awslocal s3 mb s3://test-bucket\r\nmake_bucket: test-bucket\r\n$ awslocal s3 cp ./Makefile s3://test-bucket/makefile                    \r\nupload: ./Makefile to s3://test-bucket/makefile                 \r\n$ awslocal s3api get-object --bucket test-bucket --key makefile /tmp/wharever\r\nAn error occurred (NoSuchBucket) when calling the GetObject operation (reached max retries: 0): The specified bucket does not exist\r\n```\r\n\r\nWhen debugging, I could find that in our S3 patches, when accessing moto internally, the backend would have `123456789012` as account id and in our listener we would access the backend with `000000000000`, leading to non existing bucket exception. \r\n\r\nI've copied the code from `localstack/localstack/aws/handlers/auth.py` to add the same account-id that will be used in LS.\r\n\r\nAfter the fix:\r\n```bash\r\n$ LEGACY_EDGE_PROXY=1 localstack start\r\n$ awslocal s3 mb s3://test-bucket\r\nmake_bucket: test-bucket\r\n$ awslocal s3 cp ./Makefile s3://test-bucket/makefile                    \r\nupload: ./Makefile to s3://test-bucket/makefile                 \r\n$ awslocal s3api get-object --bucket test-bucket --key makefile /tmp/wharever\r\n{\r\n    \"AcceptRanges\": \"bytes\",\r\n    \"LastModified\": \"Fri, 13 Jan 2023 18:26:19 GMT\",\r\n    \"ContentLength\": 7362,\r\n    \"ETag\": \"\\\"0386ad802884c265c2e571b519937f66\\\"\",\r\n    \"VersionId\": \"null\",\r\n    \"ContentLanguage\": \"en-US\",\r\n    \"ContentType\": \"binary/octet-stream\",\r\n    \"Metadata\": {}\r\n}\r\n```\r\n\r\n\\cc @alexrashed ",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 71,
        "deletions": 2,
        "changed_files": 3,
        "created_at": "2023-01-13T17:52:44Z",
        "closed_at": "2023-01-16T09:34:30Z",
        "merged_at": "2023-01-16T09:34:30Z",
        "body": "While checking the non-implemented coverage responses, I found a weird error for `list_firewall_domain_lists`:\r\n\r\n```\r\nexception while calling route53resolver.ListFirewallDomainLists: Traceback (most recent call last):\r\n  File \"/opt/code/localstack/localstack/aws/chain.py\", line 90, in handle\r\n    handler(self, self.context, response)\r\n  File \"/opt/code/localstack/localstack/aws/handlers/service.py\", line 122, in __call__\r\n    handler(chain, context, response)\r\n  File \"/opt/code/localstack/localstack/aws/handlers/service.py\", line 92, in __call__\r\n    skeleton_response = self.skeleton.invoke(context)\r\n  File \"/opt/code/localstack/localstack/aws/skeleton.py\", line 153, in invoke\r\n    return self.dispatch_request(context, instance)\r\n  File \"/opt/code/localstack/localstack/aws/skeleton.py\", line 165, in dispatch_request\r\n    result = handler(context, instance) or {}\r\n  File \"/opt/code/localstack/localstack/aws/forwarder.py\", line 56, in _call\r\n    return handler(context, req)\r\n  File \"/opt/code/localstack/localstack/aws/skeleton.py\", line 117, in __call__\r\n    return self.fn(*args, **kwargs)\r\n  File \"/opt/code/localstack/localstack/services/route53resolver/provider.py\", line 224, in list_firewall_domain_lists\r\n    firewall_domain_list.append(\r\nAttributeError: 'dict' object has no attribute 'append'\r\n```\r\n\r\nIt seems like a little typo in the implementation - the PR contains a fix, and I also added a snapshot test to verify the behavior.\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 13,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2023-01-13T14:03:30Z",
        "closed_at": "2023-01-14T00:10:51Z",
        "merged_at": "2023-01-14T00:10:51Z",
        "body": "Fixes https://github.com/localstack/localstack-ext/issues/1278.\r\n\r\nCFN deviates from the standard pattern when it comes to the `AccountRegionBundle` module (normally, `localstack.services.<service>.models`; `localstack.services.cloudformation.stores` instead).\r\n\r\nIn addition, `GetTemplateSummaryOutput` was containing unspecified members. I filtered the result with the `select_from_typed_dict` utility function.",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 399,
        "deletions": 72,
        "changed_files": 15,
        "created_at": "2023-01-13T12:24:27Z",
        "closed_at": "2023-01-31T12:47:57Z",
        "merged_at": null,
        "body": "### Summary\r\n\r\n\r\n### Tests\r\n\r\n\r\n### Related\r\nDepends on:\r\n- https://github.com/localstack/localstack/pull/7467\r\n- https://github.com/localstack/localstack/pull/7240",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1393,
        "deletions": 22,
        "changed_files": 30,
        "created_at": "2023-01-13T11:59:56Z",
        "closed_at": "2023-01-31T12:04:49Z",
        "merged_at": "2023-01-31T12:04:49Z",
        "body": "## Changes\r\n- Adds a multiruntime test which tries to call a localstack service (in this case sqs.ListQueues). If PRO is enabled during the test run it will try to use transparent endpoint injection.\r\n- Update init binary release version to [v0.1.10-pre](https://github.com/localstack/lambda-runtime-init/releases/tag/v0.1.10-pre)\r\n- Enhance multiruntime fixture to support *both* generic runtime directories as well as prioritized concrete runtimes. In this case this was necessary  because nodejs18.x uses the v3 SDK for example\r\n- Add support for `LAMBDA_REMOVE_CONTAINERS` config\r\n\r\n## Currently unsupported runtimes\r\n \r\n- go1.x\r\n- dotnet6\r\n- dotnetcore3.1",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1315,
        "deletions": 119,
        "changed_files": 8,
        "created_at": "2023-01-13T11:27:32Z",
        "closed_at": "2023-01-18T10:30:53Z",
        "merged_at": "2023-01-18T10:30:53Z",
        "body": "Test + implement revisions (i.e., RevisionId) for lambda in general (with versions, \r\naliases, layers, etc). It seems that the revision id of permissions is \r\nthe same as for qualified lambdas (i.e., VersionFunctionConfiguration).\r\n\r\n## Motivation\r\n\r\n- Follow-up from https://github.com/localstack/localstack/pull/7336\r\n- Mentioned in skip_snapshot_verify and TODO comments at multiple places\r\n    - CloudFormation tests also mentions: \u201cseems the revision id of the policy actually corresponds to the one of the function version\u201d\r\n\r\n## Behavior\r\n\r\n- [CreateFunction](https://docs.aws.amazon.com/lambda/latest/dg/API_CreateFunction.html): **[RevisionId](https://docs.aws.amazon.com/lambda/latest/dg/API_CreateFunction.html#API_CreateFunction_ResponseSyntax)** The latest updated revision of the function or alias.\r\n- Non-matching revision id raises a **`PreconditionFailedException`**\r\n\r\nOverview of Actions / [API Operations](https://docs.aws.amazon.com/lambda/latest/dg/API_Operations.html) with RevisionId support:\r\n\r\n| Request | Response | Both |\r\n| --- | --- | --- |\r\n| [AddPermission](https://docs.aws.amazon.com/lambda/latest/dg/API_AddPermission.html) \u2714\ufe0f | [CreateAlias](https://docs.aws.amazon.com/lambda/latest/dg/API_CreateAlias.html) \u2714\ufe0f | [AddLayerVersionPermission](https://docs.aws.amazon.com/lambda/latest/dg/API_AddLayerVersionPermission.html) \u2714\ufe0f |\r\n| [RemoveLayerVersionPermission](https://docs.aws.amazon.com/lambda/latest/dg/API_RemoveLayerVersionPermission.html) \u2714\ufe0f | [CreateFunction](https://docs.aws.amazon.com/lambda/latest/dg/API_CreateFunction.html) \u2714\ufe0f | [PublishVersion](https://docs.aws.amazon.com/lambda/latest/dg/API_PublishVersion.html) \u2714\ufe0f |\r\n| [RemovePermission](https://docs.aws.amazon.com/lambda/latest/dg/API_RemovePermission.html) \u2714\ufe0f | [GetAlias](https://docs.aws.amazon.com/lambda/latest/dg/API_GetAlias.html) \u2714\ufe0f | [UpdateAlias](https://docs.aws.amazon.com/lambda/latest/dg/API_UpdateAlias.html) \u2714\ufe0f |\r\n|  | [GetFunction](https://docs.aws.amazon.com/lambda/latest/dg/API_GetFunction.html) \u2714\ufe0f | [UpdateFunctionCode](https://docs.aws.amazon.com/lambda/latest/dg/API_UpdateFunctionCode.html) \u2714\ufe0f |\r\n|  | [GetFunctionConfiguration](https://docs.aws.amazon.com/lambda/latest/dg/API_GetFunctionConfiguration.html) | [UpdateFunctionConfiguration](https://docs.aws.amazon.com/lambda/latest/dg/API_UpdateFunctionConfiguration.html) \u2714\ufe0f |\r\n|  | [GetLayerVersionPolicy](https://docs.aws.amazon.com/lambda/latest/dg/API_GetLayerVersionPolicy.html) \u2714\ufe0f |  |\r\n|  | [GetPolicy](https://docs.aws.amazon.com/lambda/latest/dg/API_GetPolicy.html) \u2714\ufe0f |  |\r\n|  | [ListAliases](https://docs.aws.amazon.com/lambda/latest/dg/API_ListAliases.html) |  |\r\n|  | [ListFunctions](https://docs.aws.amazon.com/lambda/latest/dg/API_ListFunctions.html) |  |\r\n|  | [ListVersionsByFunction](https://docs.aws.amazon.com/lambda/latest/dg/API_ListVersionsByFunction.html) |  |\r\n\r\n- \u2714\ufe0f\u00a0 refers to snapshot tested request/response\r\n- The list* operations are not explicitly tested within the revisions lifecycle but are covered by other tests\r\n- Note: This just shows which request/responses contain a revision_id but do NOT show which operations UPDATE it! For example, add_permission updates the revision_id despite not returning it.\r\n- Q/A about behavior that prevents atomic updates: [https://repost.aws/questions/QU2NMlYyvYSaaoNY8xrPYcvQ/lambda-function-updating-cannot-be-made-atomic-with-revision-id](https://repost.aws/questions/QU2NMlYyvYSaaoNY8xrPYcvQ/lambda-function-updating-cannot-be-made-atomic-with-revision-id)\r\n\r\n## Scope\r\n\r\n* LayerVersionPolicy: have their own RevisionId independent of functions as they can exist without functions.\r\n* RevisionId per function configuration. Aliases and versions have their own function configuration but lambda permissions don\u2019t.\r\n    - The fact that the permissions only require the RevisionId in the request but don\u2019t contain it in the reply, could hint that it\u2019s not part of their entity and only stored per function configuration\r\n    - Also fits together with DeleteAlias not mentioning any RevisionId because it\u2019s gone with the associated function configuration after deleting the alias\r\n\r\n\r\n## Questions\r\n\r\n* Do we need locking to ensure atomic updates across entities?\r\n\r\n## Details\r\n\r\nFor more details: See [Revisions](https://www.notion.so/localstack/Revisions-5592ceef78fa421eaebfeb014d77daf6) in the Notion Lambda Board.\r\n\r\n## Follow Up (out of scope)\r\n\r\n- [ ] Consider updating the data model such that property updates automatically trigger a revision_id update within the right entity such that we a) don't need locks for ensuring atomic updates b) simplify code for retrieval and updates.\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 6,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2023-01-13T10:33:50Z",
        "closed_at": "2023-01-13T12:34:46Z",
        "merged_at": "2023-01-13T12:34:46Z",
        "body": "Minor: Add package/version information in installer exception message. This can help with debugging if `NoSuchVersionException` instances are caught and printed in the logs. \ud83d\udc4d ",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 208,
        "deletions": 33,
        "changed_files": 8,
        "created_at": "2023-01-12T22:43:04Z",
        "closed_at": "2023-02-13T21:00:14Z",
        "merged_at": null,
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 6,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-01-12T17:42:03Z",
        "closed_at": "2023-01-19T12:59:25Z",
        "merged_at": "2023-01-19T12:59:25Z",
        "body": "Adds a method to the Extension interface to hook into the shutdown procedure of LocalStack.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 121,
        "deletions": 24,
        "changed_files": 3,
        "created_at": "2023-01-12T12:59:00Z",
        "closed_at": "2023-01-26T17:09:42Z",
        "merged_at": "2023-01-26T17:09:41Z",
        "body": "Analyzing the capture_not_implemented responses for different runs revealed a few issues:\r\n\r\n## Unexpected return codes\r\n- return code 901 (timeout related indicator set be us) happens quite often:\r\n   - when checking the corresponding LocalStack log, there is a valid response logged\r\n   - **Resolved by:** increased the `connect_timeout` and `read_timeout` for the boto client\r\n- return code 0\r\n   - unknown reasons, in tinybird recorded for \r\n        - `s3 PostObject` + `ListBuckets` (each 338 times) --> **Resolved by:** setting empty parameters for `ListBuckets` + remove `PostObject` from the operations, as it is a phantom operation introduced by LocalStack\r\n        - `events PutEvents` (16) - the pattern for EndpointId seems not be correct, sometimes botocore rejects the EndpointId therefore -> **Resolved by:** changed the pattern in `mocking.py`\r\n        - `sagemaker-runtime InvokeEndpointAsync` (125) - **Unresolved** could not find details yet\r\n- return code 902 (set in the script for any `ResponseParserError`)\r\n   - recorded for `elasticbeanstalk CreateApplicationVersion` (11 times) and `DescribeApplicationVersions` (1 time)\r\n   - **Resolved by:** added exception logs to get details\r\n- return code 903 (set in the script for any `EndpointConnectionError`) has not appeared in the records\r\n\r\n**General approach to get rid of sporadic issues:** Re-run the request if we see any of those error codes + add details about the exception in the logs + generated output file\r\n\r\n## Parsing issues\r\n- `iot`, `iotanalytics`, `backup`, `sesv2` - **Resolved by:** timestamp parsing: https://github.com/localstack/localstack/pull/7473\r\n-  `cloudfront CreateDistributionWithTags` and `CreateStreamingDistributionWithTags` (sporadically): `localstack.aws.protocol.parser.ProtocolParserError: Unable to parse request (not well-formed (invalid token): line 1, column 6874), invalid XML received` -> might be invalid input, happens sporadically - **Unresolved:** retry the request with new parameter input if we see parsing error\r\n- Occasionally errors because API is not yet updated: `Got 'TypeError' with unexpected keyword argument '<argument>'` -> **Resolved by:** re-run request, but remove the argument (which is most of the time not required)**\r\n- some parsing issues in `s3control`with invalid xml `localstack.aws.protocol.parser.ProtocolParserError: Unable to parse request (not well-formed (invalid token)` **Resolved by:** improved mocked input, by adding shapes ending with `ArnString` to generate a valid arn.\r\n\r\n## Motofallback issues\r\n- at least for `apigateway` some operations do have a motofallback, but are not handled, and return `None` when running the `dispatch`\r\n  - **Resolved by:** added check if returned value is `None` and raise `NotImplementedError` in that case\r\n  \r\n## Parameter generation issues\r\n- added special handling for pattern\r\n   -  `\\\\p{ASCII}*` **for simplicity changed to pattern `[a-zA-Z0-9]`**\r\n   -  `^(https|s3)://([^/]+)/?(.*)$` **changed to `^(https|s3)://(\\\\w+)$` because it should be a valid url**\r\n\r\n## Service specific issues\r\n- Tagging for `codecommit` was not working properly (issued a PR for pro)\r\n- Issue in `route53resolver.ListFirewallDomainLists` (issued a PR #7488)\r\n\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 20,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2023-01-12T10:14:01Z",
        "closed_at": "2023-01-12T15:37:04Z",
        "merged_at": "2023-01-12T15:37:04Z",
        "body": "This PR sets the default timestamp format when parsing query strings timestamps to \"iso8601\".\r\n\r\n\r\nWhen analyzing the responses for the not/implemented coverage tests, I found that a parser issue occurs for `iot` and relates to the timestamp.\r\n\r\nI tested the operation `ListAuditMitigationActionsTasks` with different timestamp formats (also using `awscli`) and it seems like it will [always be converted](https://github.com/boto/botocore/blob/develop/botocore/serialize.py#L597) to a date in [iso8601 format](https://github.com/boto/botocore/blob/develop/botocore/serialize.py#L430). \r\n\r\nThe operation does not have a `timestampFormat`defined in its shape, and would default to unix-timestamp. But also the unix timestamp is converted in botocore before sending the request:\r\n\r\n```\r\n$ awslocal iot list-audit-mitigation-actions-tasks --start-time 1673459237 --end-time 1673459240\r\n\r\nAn error occurred (InternalError) when calling the ListAuditMitigationActionsTasks operation (reached max retries: 4): exception while calling iot with unknown operation: Traceback (most recent call last):\r\n  File \"/opt/code/localstack/localstack/aws/protocol/parser.py\", line 262, in _parse_shape\r\n    return handler(request, shape, payload, uri_params) if payload is not None else None\r\n  File \"/opt/code/localstack/localstack/aws/protocol/parser.py\", line 120, in _get_text_content\r\n    return func(self, request, shape, text, uri_params)\r\n  File \"/opt/code/localstack/localstack/aws/protocol/parser.py\", line 300, in _parse_timestamp\r\n    return self._convert_str_to_timestamp(node, timestamp_format)\r\n  File \"/opt/code/localstack/localstack/aws/protocol/parser.py\", line 324, in _convert_str_to_timestamp\r\n    final_value = converter(value)\r\n  File \"/opt/code/localstack/localstack/aws/protocol/parser.py\", line 333, in _timestamp_unixtimestamp\r\n    return datetime.datetime.utcfromtimestamp(int(timestamp_string))\r\nValueError: invalid literal for int() with base 10: '2023-01-11T17:47:17Z'\r\n```\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 188,
        "deletions": 123,
        "changed_files": 5,
        "created_at": "2023-01-11T11:22:52Z",
        "closed_at": "2023-01-11T16:51:01Z",
        "merged_at": "2023-01-11T16:51:01Z",
        "body": "This PR replaces the Legacy Edge Proxy `EDGE_PROXY_FORWARDING` with a new TCP proxy edge component.\r\n\r\nPreviously, if the `EDGE_PORT` is a privileged port (<1024), the legacy edge proxy has been started with elevated privileges and the `EDGE_FORWARD_URL` set to the non-privileged `EDGE_PORT_HTTP`. This short-circuits the edge proxy to just behave as a transparent proxy to the `EDGE_FORWARD_URL`.\r\n\r\nIn order to migrate to the new HTTP gateway (and away from any usage of the `ProxyListener` implementations), this proxy mechanism is replaced by a new \"component\" (alongside the \"edge\" and the \"dns\" component).\r\nThis component just performs a TCP-level forwarding to the port given in the `EDGE_FORWARD_URL` (to provide backwards-compatibility).\r\n\r\nRelated to: https://github.com/localstack/localstack/pull/7465.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 11,
        "deletions": 4,
        "changed_files": 2,
        "created_at": "2023-01-10T16:58:50Z",
        "closed_at": "2023-01-10T19:37:29Z",
        "merged_at": "2023-01-10T19:37:28Z",
        "body": "## Problem\r\nCurrently, we never properly create the directory specified by `config.VOLUME_DIR`. This can lead to permission errors, if docker creates this folder (and any missing parents) as root.\r\n\r\nThe default configuration for the CLI is one of these cases, where `~/config/localstack/volume` is created as root, which leads to `~/.config/localstack` not being writable as non root user which in turn leads to problems for `localstack status docker` (due to some cache files being written to that directory).\r\n\r\n## Proposed solution\r\nTry to `mkdir` the `VOLUME_DIR` directory (and its parents) instead of letting docker do so, failing non-fatally.\r\nAn error message will be printed, but the docker start is not prevented.",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 112,
        "deletions": 53,
        "changed_files": 6,
        "created_at": "2023-01-10T08:55:11Z",
        "closed_at": "2023-01-31T12:47:04Z",
        "merged_at": null,
        "body": "### Summary\r\nThis is a proof-of-concept for cross-account access for resources that are identified by an ARN.\r\n\r\nSNS topics are identified by ARNs. This PR allows access to SNS topics in any account or region. IAM policy enforcement is ignored for now.\r\n\r\n#### A note on endpoints\r\nFor production AWS, the CLI uses the `region` field to determine the API service endpoint. Thus, attempting to retrieve `arn:aws:sns:ap-south-1:000000000000:lorem` by setting `region` as `us-east-1` will not work. LocalStack converges AWS regions into a single endpoint, hence this PR implementation and following example is assumed to be logically sound.\r\n\r\n```\r\n# Create a topic in AP region with default account ID\r\n$ awslocal sns create-topic --name lorem --region ap-south-1\r\n{\r\n    \"TopicArn\": \"arn:aws:sns:ap-south-1:000000000000:lorem\"\r\n}\r\n\r\n# Retrieve the topic from EU region\r\n$ awslocal sns get-topic-attributes --topic-arn arn:aws:sns:ap-south-1:000000000000:lorem --region eu-central-1\r\n{\r\n    \"Attributes\": {\r\n        \"Owner\": \"000000000000\",\r\n        \"Policy\": \"{\\\"Version\\\":\\\"2008-10-17\\\",\\\"Id\\\":\\\"__default_policy_ID\\\",\\\"Statement\\\":[{\\\"Effect\\\":\\\"Allow\\\",\\\"Sid\\\":\\\"__default_statement_ID\\\",\\\"Principal\\\":{\\\"AWS\\\":\\\"*\\\"},\\\"Action\\\":[\\\"SNS:GetTopicAttributes\\\",\\\"SNS:SetTopicAttributes\\\",\\\"SNS:AddPermission\\\",\\\"SNS:RemovePermission\\\",\\\"SNS:DeleteTopic\\\",\\\"SNS:Subscribe\\\",\\\"SNS:ListSubscriptionsByTopic\\\",\\\"SNS:Publish\\\",\\\"SNS:Receive\\\"],\\\"Resource\\\":\\\"arn:aws:sns:ap-south-1:000000000000:lorem\\\",\\\"Condition\\\":{\\\"StringEquals\\\":{\\\"AWS:SourceOwner\\\":\\\"000000000000\\\"}}}]}\",\r\n        \"TopicArn\": \"arn:aws:sns:ap-south-1:000000000000:lorem\",\r\n        \"DisplayName\": \"\",\r\n        \"SubscriptionsPending\": \"0\",\r\n        \"SubscriptionsConfirmed\": \"0\",\r\n        \"SubscriptionsDeleted\": \"0\",\r\n        \"DeliveryPolicy\": \"\",\r\n        \"EffectiveDeliveryPolicy\": \"{\\\"defaultHealthyRetryPolicy\\\": {\\\"numNoDelayRetries\\\": 0, \\\"numMinDelayRetries\\\": 0, \\\"minDelayTarget\\\": 20, \\\"maxDelayTarget\\\": 20, \\\"numMaxDelayRetries\\\": 0, \\\"numRetries\\\": 3, \\\"backoffFunction\\\": \\\"linear\\\"}, \\\"sicklyRetryPolicy\\\": null, \\\"throttlePolicy\\\": null, \\\"guaranteed\\\": false}\"\r\n    }\r\n}\r\n\r\n# Retrieve the topic from SA region and a different account ID\r\n$ AWS_ACCESS_KEY_ID=999988887777 AWS_DEFAULT_REGION=sa-south-1 awslocal sns get-topic-attributes --topic-arn arn:aws:sns:ap-south-1:000000000000:lorem\r\n{\r\n    \"Attributes\": {\r\n        \"Owner\": \"000000000000\",\r\n        \"Policy\": \"{\\\"Version\\\":\\\"2008-10-17\\\",\\\"Id\\\":\\\"__default_policy_ID\\\",\\\"Statement\\\":[{\\\"Effect\\\":\\\"Allow\\\",\\\"Sid\\\":\\\"__default_statement_ID\\\",\\\"Principal\\\":{\\\"AWS\\\":\\\"*\\\"},\\\"Action\\\":[\\\"SNS:GetTopicAttributes\\\",\\\"SNS:SetTopicAttributes\\\",\\\"SNS:AddPermission\\\",\\\"SNS:RemovePermission\\\",\\\"SNS:DeleteTopic\\\",\\\"SNS:Subscribe\\\",\\\"SNS:ListSubscriptionsByTopic\\\",\\\"SNS:Publish\\\",\\\"SNS:Receive\\\"],\\\"Resource\\\":\\\"arn:aws:sns:ap-south-1:000000000000:lorem\\\",\\\"Condition\\\":{\\\"StringEquals\\\":{\\\"AWS:SourceOwner\\\":\\\"000000000000\\\"}}}]}\",\r\n        \"TopicArn\": \"arn:aws:sns:ap-south-1:000000000000:lorem\",\r\n        \"DisplayName\": \"\",\r\n        \"SubscriptionsPending\": \"0\",\r\n        \"SubscriptionsConfirmed\": \"0\",\r\n        \"SubscriptionsDeleted\": \"0\",\r\n        \"DeliveryPolicy\": \"\",\r\n        \"EffectiveDeliveryPolicy\": \"{\\\"defaultHealthyRetryPolicy\\\": {\\\"numNoDelayRetries\\\": 0, \\\"numMinDelayRetries\\\": 0, \\\"minDelayTarget\\\": 20, \\\"maxDelayTarget\\\": 20, \\\"numMaxDelayRetries\\\": 0, \\\"numRetries\\\": 3, \\\"backoffFunction\\\": \\\"linear\\\"}, \\\"sicklyRetryPolicy\\\": null, \\\"throttlePolicy\\\": null, \\\"guaranteed\\\": false}\"\r\n    }\r\n}\r\n```\r\n\r\n#### Impact\r\nThis PR changes the store definition which will break any existing cloud pods and persisted states. We don't have a versioning system for either in place yet. Users will have to manually intervene to fix the conflicts.\r\n\r\n### Related\r\n\r\nDepends on https://github.com/localstack/localstack/pull/7457",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 264,
        "deletions": 299,
        "changed_files": 7,
        "created_at": "2023-01-09T21:29:22Z",
        "closed_at": "2023-01-13T11:35:06Z",
        "merged_at": "2023-01-13T11:35:06Z",
        "body": "This PR is the start list of tests to migrate from using the `ProxyListener`.\r\n\r\nThis PR mostly refactors tests using the `ProxyListener`, to use pytest `httpserver` fixture instead.\r\n\r\n- [x] `test_forward_to_fallback_url_http#MyUpdateListener(ProxyListener)`\r\n- [x] `test_api_destinations#HttpEndpointListener(ProxyListener)`\r\n- [x] `test_scheduled_expression_events#HttpEndpointListener(ProxyListener)`\r\n- [x] `test_firehose_http#MyUpdateListener(ProxyListener)`\r\n- [x] `TestAPIGateway#start_http_backend#TestListener(ProxyListener)`\r\n- [x] `test_download_with_timeout#DownloadListener(ProxyListener)`\r\n\r\nWe also had some tests validating the CloudFormation UI to help deploy a template, which is migrated into a `Resource` test and an integration test in the CloudFormation test module.\r\n- [x] `test_cloudformation_ui#LocalstackResourceHandler(ProxyListener)`\r\n\r\nThere still some usage of `ProxyListener` via `testutil#proxy_server` method, but it tests its internals and will be removed once we fully remove it.\r\n\r\n- `testutil.py#proxy_server (test utils function)`\r\n    -  used in `TestRouterListener` which is migrated\r\n    - used in `TestAwsApiListener` which can be deleted\r\n    - used in `LocalstackResourceHandler` which is migrated\r\n- `TestLocalstackResourceHandlerIntegration#test_fallthrough#RaiseError(ProxyListener)`\r\n    - using `LocalstackResourceHandler` which is migrated\r\n\r\nnote: took the opportunity to clean up some `utils.common` imports.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 17564,
        "deletions": 25,
        "changed_files": 199,
        "created_at": "2023-01-09T20:30:22Z",
        "closed_at": "2023-02-13T13:03:08Z",
        "merged_at": "2023-02-13T13:03:08Z",
        "body": "Introduces initial efforts on stepfunctions `v2` provider. Enable with `PROVIDER_OVERRIDE_STEPFUNCTIONS=v2`. Please refer to knowledge-base for an overview of these changes.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 481,
        "deletions": 34,
        "changed_files": 5,
        "created_at": "2023-01-09T16:59:49Z",
        "closed_at": "2023-01-12T11:00:17Z",
        "merged_at": "2023-01-12T11:00:17Z",
        "body": "While adding #7448, it came out that I could pass a KMS Key ARN with a different region to `DescribeKey` and it would still return the key with the same ID but from the request context region, disregarding the region contained in the ARN. I've added snapshotted test to validate behaviour and improve the parity a bit while fixing this behaviour. \r\n\r\nI'm not fond of using the `Store` `_region_name` and `_account_id` attributes, but with the current logic implemented in the store itself (and thus no access to the `RequestContext`), it makes it a bit difficult to change. ",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 559,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2023-01-09T14:50:03Z",
        "closed_at": "2023-01-10T09:02:19Z",
        "merged_at": "2023-01-10T09:02:19Z",
        "body": "## Motivation\r\nOur new provider provides the option to use runtime wrapper scripts per default but it was never tested with a test.\r\n\r\n## Changes\r\nAdd test for supported al2 runtimes for creating and using a runtime wrapper script. The recommended way would be using a layer for this but without layer support the wrapper has to be shipped with the deployment archive.\r\n\r\nRelated to #7442.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-01-09T13:03:22Z",
        "closed_at": "2023-01-11T22:17:34Z",
        "merged_at": "2023-01-11T22:17:34Z",
        "body": "Fixes an issue where the VTL template headers would be returned with a serialized python object instead of a dict. \r\n\r\nNote: werkzeug.datastructures.Headers object is dict casting compatible - \r\n\r\n<img width=\"538\" alt=\"image\" src=\"https://user-images.githubusercontent.com/16493770/211314524-7eb87e10-e64d-46c6-ac2b-a7be4a6d0ca0.png\">\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 8,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2023-01-09T09:02:06Z",
        "closed_at": "2023-01-28T20:09:43Z",
        "merged_at": "2023-01-28T20:09:43Z",
        "body": "Integration support for APIGateway V1 and AppSync.\r\n\r\nAlso fixed a bug in the apigateway PATCH request from CDK.\r\n\r\nrefer to this - https://aswinkumar4018.medium.com/aws-api-gateway-as-a-proxy-to-appsync-5d4dcd609a2c",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 129,
        "deletions": 6,
        "changed_files": 4,
        "created_at": "2023-01-09T06:58:49Z",
        "closed_at": "2023-01-11T09:36:05Z",
        "merged_at": "2023-01-11T09:36:05Z",
        "body": "This PR adds a new descriptor protocol to mark certain store attributes as cross-account. This will be used for resources like S3 bucket names, DNS names, etc. which must be unique across all region and all accounts.\r\n\r\nThis will also be useful for the new internal AWS client. For services that allow resource-level IAM policy attachment, it is possible to retrieve the resources by the ARN. The ARN uniquely identifies the resource -- it has the account ID and region as part of itself. This makes using the `CrossAccountAttribute` suited for such resources, and furthermore allows operations to support resource operations based on ARNs.\r\n\r\nCloses localstack/localstack-ext#1132",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-01-09T05:05:42Z",
        "closed_at": "2023-01-09T08:22:36Z",
        "merged_at": "2023-01-09T08:22:36Z",
        "body": "# \ud83d\ude80 ASF Update Report \ud83d\ude80\nThis PR has been automatically generated to update the generated API stubs for our ASF services.\nIt uses the latest code-generator from the _master_ branch ([scaffold.py](https://github.com/localstack/localstack/blob/master/localstack/aws/scaffold.py)) and the latest _published_ version of [botocore](https://github.com/boto/botocore) to re-generate all API stubs which are already present in the `localstack.aws.api` module of the _master_ branch.\n\n## \ud83d\udd04 Updated Services\nThis PR updates the following services:\n- ssm\n\n## \ud83d\udc77\ud83c\udffd Handle this PR\nThe following options describe how to interact with this PR / the auto-update:\n\n\u2714\ufe0f **Accept Changes**\nIf the changes are satisfying, just squash-merge the PR and delete the source branch.\n\n\ud83d\udeab **Ignore Changes**\nIf you want to ignore the changes in this PR, just close the PR and *do not delete* the source branch. The PR will not be opened and a new PR will not be created for as long as the generated code does not change (or the branch is deleted). As soon as there are new changes, a new PR will be created.\n\n\u270f\ufe0f **Adapt Changes**\n*Don't do this.* The APIs are auto-generated. If you decide that the APIs should look different, you have to change the code-generation.\n\n\u23f8\ufe0f **Pause Updates**\nRemove the cron-schedule trigger of the GitHub Action workflow which creates these PRs. The action can then still be triggered manually, but it will not be executed automatically.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 8,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-01-08T12:15:31Z",
        "closed_at": "2023-01-09T19:12:30Z",
        "merged_at": "2023-01-09T19:12:29Z",
        "body": "Updates the firehose provider implementation to the API updates in #7281.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 293,
        "deletions": 116,
        "changed_files": 13,
        "created_at": "2023-01-08T01:26:08Z",
        "closed_at": "2023-01-11T09:43:58Z",
        "merged_at": "2023-01-11T09:43:58Z",
        "body": "Pulumi uses the import API from OpenAPI spec to create the resources. The authoriser was created using the moto \"Authorizer\" model object and stored on the service backend (moto) instead of the Apigateway store. This discrepancy is related to a recent change to enhance parity that makes \"Authorizers\" created using the API stored on the Apigateway store.\r\n\r\nThis PR handles the issue by creating the authorizer through the import api to be stored on the Apigateway store.\r\n\r\nIssue https://github.com/localstack/localstack/issues/7391\r\n\r\nThis PR:\r\n- Moves previous patch method \"put_rest_api\" into the ApiGatewayProvider handler\r\n- Stores the Authorizer on the Apigateway store `ApiGatewayStore`\r\n- Creates a new module and small snapshot test for apigateway",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 116,
        "deletions": 23,
        "changed_files": 4,
        "created_at": "2023-01-07T19:17:23Z",
        "closed_at": "2023-01-09T19:25:24Z",
        "merged_at": "2023-01-09T19:25:24Z",
        "body": "This PR updates `HttpClient` and `Proxy` to make it possible to re-use underlying HTTP client connections. By introducing session, we also need to introduce `close` at every level of abstraction. I also added the contextmanager pattern where possible. The added test demonstrates that the underlying session is used correctly. ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 10,
        "changed_files": 2,
        "created_at": "2023-01-06T22:21:02Z",
        "closed_at": "2023-01-12T06:38:21Z",
        "merged_at": "2023-01-12T06:38:21Z",
        "body": "Bumps [tokio](https://github.com/tokio-rs/tokio) from 1.18.1 to 1.18.4.\n<details>\n<summary>Release notes</summary>\n<p><em>Sourced from <a href=\"https://github.com/tokio-rs/tokio/releases\">tokio's releases</a>.</em></p>\n<blockquote>\n<h2>Tokio v1.18.3</h2>\n<h1>1.18.3 (September 27, 2022)</h1>\n<p>This release removes the dependency on the <code>once_cell</code> crate to restore the MSRV of the 1.18.x LTS release. (<a href=\"https://github-redirect.dependabot.com/tokio-rs/tokio/issues/5048\">#5048</a>)</p>\n<p><a href=\"https://github-redirect.dependabot.com/tokio-rs/tokio/issues/5048\">#5048</a>: <a href=\"https://github-redirect.dependabot.com/tokio-rs/tokio/pull/5048\">tokio-rs/tokio#5048</a></p>\n<h2>Tokio v1.18.2</h2>\n<h1>1.18.2 (May 5, 2022)</h1>\n<p>Add missing features for the <code>winapi</code> dependency. (<a href=\"https://github-redirect.dependabot.com/tokio-rs/tokio/issues/4663\">#4663</a>)</p>\n<p><a href=\"https://github-redirect.dependabot.com/tokio-rs/tokio/issues/4663\">#4663</a>: <a href=\"https://github-redirect.dependabot.com/tokio-rs/tokio/pull/4663\">tokio-rs/tokio#4663</a></p>\n</blockquote>\n</details>\n<details>\n<summary>Commits</summary>\n<ul>\n<li><a href=\"https://github.com/tokio-rs/tokio/commit/9241c3eddf4a6a218681b088d71f7191513e2376\"><code>9241c3e</code></a> chore: prepare Tokio v1.18.4 release</li>\n<li><a href=\"https://github.com/tokio-rs/tokio/commit/699573d550fabf4bfb45d82505d6709faaae9037\"><code>699573d</code></a> net: fix named pipes server configuration builder</li>\n<li><a href=\"https://github.com/tokio-rs/tokio/commit/5c76d070e28bd9153ec72f13d0ebe24935b9dea0\"><code>5c76d07</code></a> chore: prepare Tokio v1.18.3 (<a href=\"https://github-redirect.dependabot.com/tokio-rs/tokio/issues/5051\">#5051</a>)</li>\n<li><a href=\"https://github.com/tokio-rs/tokio/commit/05e661490b87a3d60a8342535bdc9d213048519c\"><code>05e6614</code></a> chore: don't use <code>once_cell</code> for 1.18.x LTS release (<a href=\"https://github-redirect.dependabot.com/tokio-rs/tokio/issues/5048\">#5048</a>)</li>\n<li><a href=\"https://github.com/tokio-rs/tokio/commit/7aa1566cde7e04cebe60711ed6ce2f8b277158e9\"><code>7aa1566</code></a> chore: prepare Tokio v1.18.2</li>\n<li><a href=\"https://github.com/tokio-rs/tokio/commit/7c8e552f290a7cbae21f6d3343c2ee26c418d2fb\"><code>7c8e552</code></a> windows: add features for winapi (<a href=\"https://github-redirect.dependabot.com/tokio-rs/tokio/issues/4663\">#4663</a>)</li>\n<li>See full diff in <a href=\"https://github.com/tokio-rs/tokio/compare/tokio-1.18.1...tokio-1.18.4\">compare view</a></li>\n</ul>\n</details>\n<br />\n\n\n[![Dependabot compatibility score](https://dependabot-badges.githubapp.com/badges/compatibility_score?dependency-name=tokio&package-manager=cargo&previous-version=1.18.1&new-version=1.18.4)](https://docs.github.com/en/github/managing-security-vulnerabilities/about-dependabot-security-updates#about-compatibility-scores)\n\nDependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.\n\n[//]: # (dependabot-automerge-start)\n[//]: # (dependabot-automerge-end)\n\n---\n\n<details>\n<summary>Dependabot commands and options</summary>\n<br />\n\nYou can trigger Dependabot actions by commenting on this PR:\n- `@dependabot rebase` will rebase this PR\n- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it\n- `@dependabot merge` will merge this PR after your CI passes on it\n- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it\n- `@dependabot cancel merge` will cancel a previously requested merge and block automerging\n- `@dependabot reopen` will reopen this PR if it is closed\n- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually\n- `@dependabot ignore this major version` will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot ignore this minor version` will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot ignore this dependency` will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot use these labels` will set the current labels as the default for future PRs for this repo and language\n- `@dependabot use these reviewers` will set the current reviewers as the default for future PRs for this repo and language\n- `@dependabot use these assignees` will set the current assignees as the default for future PRs for this repo and language\n- `@dependabot use this milestone` will set the current milestone as the default for future PRs for this repo and language\n\nYou can disable automated security fix PRs for this repo from the [Security Alerts page](https://github.com/localstack/localstack/network/alerts).\n\n</details>",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 10,
        "changed_files": 2,
        "created_at": "2023-01-06T22:21:01Z",
        "closed_at": "2023-01-12T06:39:01Z",
        "merged_at": "2023-01-12T06:39:01Z",
        "body": "Bumps [tokio](https://github.com/tokio-rs/tokio) from 1.18.1 to 1.18.4.\n<details>\n<summary>Release notes</summary>\n<p><em>Sourced from <a href=\"https://github.com/tokio-rs/tokio/releases\">tokio's releases</a>.</em></p>\n<blockquote>\n<h2>Tokio v1.18.3</h2>\n<h1>1.18.3 (September 27, 2022)</h1>\n<p>This release removes the dependency on the <code>once_cell</code> crate to restore the MSRV of the 1.18.x LTS release. (<a href=\"https://github-redirect.dependabot.com/tokio-rs/tokio/issues/5048\">#5048</a>)</p>\n<p><a href=\"https://github-redirect.dependabot.com/tokio-rs/tokio/issues/5048\">#5048</a>: <a href=\"https://github-redirect.dependabot.com/tokio-rs/tokio/pull/5048\">tokio-rs/tokio#5048</a></p>\n<h2>Tokio v1.18.2</h2>\n<h1>1.18.2 (May 5, 2022)</h1>\n<p>Add missing features for the <code>winapi</code> dependency. (<a href=\"https://github-redirect.dependabot.com/tokio-rs/tokio/issues/4663\">#4663</a>)</p>\n<p><a href=\"https://github-redirect.dependabot.com/tokio-rs/tokio/issues/4663\">#4663</a>: <a href=\"https://github-redirect.dependabot.com/tokio-rs/tokio/pull/4663\">tokio-rs/tokio#4663</a></p>\n</blockquote>\n</details>\n<details>\n<summary>Commits</summary>\n<ul>\n<li><a href=\"https://github.com/tokio-rs/tokio/commit/9241c3eddf4a6a218681b088d71f7191513e2376\"><code>9241c3e</code></a> chore: prepare Tokio v1.18.4 release</li>\n<li><a href=\"https://github.com/tokio-rs/tokio/commit/699573d550fabf4bfb45d82505d6709faaae9037\"><code>699573d</code></a> net: fix named pipes server configuration builder</li>\n<li><a href=\"https://github.com/tokio-rs/tokio/commit/5c76d070e28bd9153ec72f13d0ebe24935b9dea0\"><code>5c76d07</code></a> chore: prepare Tokio v1.18.3 (<a href=\"https://github-redirect.dependabot.com/tokio-rs/tokio/issues/5051\">#5051</a>)</li>\n<li><a href=\"https://github.com/tokio-rs/tokio/commit/05e661490b87a3d60a8342535bdc9d213048519c\"><code>05e6614</code></a> chore: don't use <code>once_cell</code> for 1.18.x LTS release (<a href=\"https://github-redirect.dependabot.com/tokio-rs/tokio/issues/5048\">#5048</a>)</li>\n<li><a href=\"https://github.com/tokio-rs/tokio/commit/7aa1566cde7e04cebe60711ed6ce2f8b277158e9\"><code>7aa1566</code></a> chore: prepare Tokio v1.18.2</li>\n<li><a href=\"https://github.com/tokio-rs/tokio/commit/7c8e552f290a7cbae21f6d3343c2ee26c418d2fb\"><code>7c8e552</code></a> windows: add features for winapi (<a href=\"https://github-redirect.dependabot.com/tokio-rs/tokio/issues/4663\">#4663</a>)</li>\n<li>See full diff in <a href=\"https://github.com/tokio-rs/tokio/compare/tokio-1.18.1...tokio-1.18.4\">compare view</a></li>\n</ul>\n</details>\n<br />\n\n\n[![Dependabot compatibility score](https://dependabot-badges.githubapp.com/badges/compatibility_score?dependency-name=tokio&package-manager=cargo&previous-version=1.18.1&new-version=1.18.4)](https://docs.github.com/en/github/managing-security-vulnerabilities/about-dependabot-security-updates#about-compatibility-scores)\n\nDependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.\n\n[//]: # (dependabot-automerge-start)\n[//]: # (dependabot-automerge-end)\n\n---\n\n<details>\n<summary>Dependabot commands and options</summary>\n<br />\n\nYou can trigger Dependabot actions by commenting on this PR:\n- `@dependabot rebase` will rebase this PR\n- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it\n- `@dependabot merge` will merge this PR after your CI passes on it\n- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it\n- `@dependabot cancel merge` will cancel a previously requested merge and block automerging\n- `@dependabot reopen` will reopen this PR if it is closed\n- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually\n- `@dependabot ignore this major version` will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot ignore this minor version` will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot ignore this dependency` will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot use these labels` will set the current labels as the default for future PRs for this repo and language\n- `@dependabot use these reviewers` will set the current reviewers as the default for future PRs for this repo and language\n- `@dependabot use these assignees` will set the current assignees as the default for future PRs for this repo and language\n- `@dependabot use this milestone` will set the current milestone as the default for future PRs for this repo and language\n\nYou can disable automated security fix PRs for this repo from the [Security Alerts page](https://github.com/localstack/localstack/network/alerts).\n\n</details>",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 10,
        "changed_files": 2,
        "created_at": "2023-01-06T22:20:17Z",
        "closed_at": "2023-01-12T06:39:40Z",
        "merged_at": "2023-01-12T06:39:40Z",
        "body": "Bumps [tokio](https://github.com/tokio-rs/tokio) from 1.18.1 to 1.18.4.\n<details>\n<summary>Release notes</summary>\n<p><em>Sourced from <a href=\"https://github.com/tokio-rs/tokio/releases\">tokio's releases</a>.</em></p>\n<blockquote>\n<h2>Tokio v1.18.3</h2>\n<h1>1.18.3 (September 27, 2022)</h1>\n<p>This release removes the dependency on the <code>once_cell</code> crate to restore the MSRV of the 1.18.x LTS release. (<a href=\"https://github-redirect.dependabot.com/tokio-rs/tokio/issues/5048\">#5048</a>)</p>\n<p><a href=\"https://github-redirect.dependabot.com/tokio-rs/tokio/issues/5048\">#5048</a>: <a href=\"https://github-redirect.dependabot.com/tokio-rs/tokio/pull/5048\">tokio-rs/tokio#5048</a></p>\n<h2>Tokio v1.18.2</h2>\n<h1>1.18.2 (May 5, 2022)</h1>\n<p>Add missing features for the <code>winapi</code> dependency. (<a href=\"https://github-redirect.dependabot.com/tokio-rs/tokio/issues/4663\">#4663</a>)</p>\n<p><a href=\"https://github-redirect.dependabot.com/tokio-rs/tokio/issues/4663\">#4663</a>: <a href=\"https://github-redirect.dependabot.com/tokio-rs/tokio/pull/4663\">tokio-rs/tokio#4663</a></p>\n</blockquote>\n</details>\n<details>\n<summary>Commits</summary>\n<ul>\n<li><a href=\"https://github.com/tokio-rs/tokio/commit/9241c3eddf4a6a218681b088d71f7191513e2376\"><code>9241c3e</code></a> chore: prepare Tokio v1.18.4 release</li>\n<li><a href=\"https://github.com/tokio-rs/tokio/commit/699573d550fabf4bfb45d82505d6709faaae9037\"><code>699573d</code></a> net: fix named pipes server configuration builder</li>\n<li><a href=\"https://github.com/tokio-rs/tokio/commit/5c76d070e28bd9153ec72f13d0ebe24935b9dea0\"><code>5c76d07</code></a> chore: prepare Tokio v1.18.3 (<a href=\"https://github-redirect.dependabot.com/tokio-rs/tokio/issues/5051\">#5051</a>)</li>\n<li><a href=\"https://github.com/tokio-rs/tokio/commit/05e661490b87a3d60a8342535bdc9d213048519c\"><code>05e6614</code></a> chore: don't use <code>once_cell</code> for 1.18.x LTS release (<a href=\"https://github-redirect.dependabot.com/tokio-rs/tokio/issues/5048\">#5048</a>)</li>\n<li><a href=\"https://github.com/tokio-rs/tokio/commit/7aa1566cde7e04cebe60711ed6ce2f8b277158e9\"><code>7aa1566</code></a> chore: prepare Tokio v1.18.2</li>\n<li><a href=\"https://github.com/tokio-rs/tokio/commit/7c8e552f290a7cbae21f6d3343c2ee26c418d2fb\"><code>7c8e552</code></a> windows: add features for winapi (<a href=\"https://github-redirect.dependabot.com/tokio-rs/tokio/issues/4663\">#4663</a>)</li>\n<li>See full diff in <a href=\"https://github.com/tokio-rs/tokio/compare/tokio-1.18.1...tokio-1.18.4\">compare view</a></li>\n</ul>\n</details>\n<br />\n\n\n[![Dependabot compatibility score](https://dependabot-badges.githubapp.com/badges/compatibility_score?dependency-name=tokio&package-manager=cargo&previous-version=1.18.1&new-version=1.18.4)](https://docs.github.com/en/github/managing-security-vulnerabilities/about-dependabot-security-updates#about-compatibility-scores)\n\nDependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.\n\n[//]: # (dependabot-automerge-start)\n[//]: # (dependabot-automerge-end)\n\n---\n\n<details>\n<summary>Dependabot commands and options</summary>\n<br />\n\nYou can trigger Dependabot actions by commenting on this PR:\n- `@dependabot rebase` will rebase this PR\n- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it\n- `@dependabot merge` will merge this PR after your CI passes on it\n- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it\n- `@dependabot cancel merge` will cancel a previously requested merge and block automerging\n- `@dependabot reopen` will reopen this PR if it is closed\n- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually\n- `@dependabot ignore this major version` will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot ignore this minor version` will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot ignore this dependency` will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot use these labels` will set the current labels as the default for future PRs for this repo and language\n- `@dependabot use these reviewers` will set the current reviewers as the default for future PRs for this repo and language\n- `@dependabot use these assignees` will set the current assignees as the default for future PRs for this repo and language\n- `@dependabot use this milestone` will set the current milestone as the default for future PRs for this repo and language\n\nYou can disable automated security fix PRs for this repo from the [Security Alerts page](https://github.com/localstack/localstack/network/alerts).\n\n</details>",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 310,
        "deletions": 4,
        "changed_files": 6,
        "created_at": "2023-01-06T17:49:10Z",
        "closed_at": "2023-01-13T20:57:20Z",
        "merged_at": "2023-01-13T20:57:20Z",
        "body": "This PR introduces a validation issue reported in #7177 \r\nHowever, I'll introduce this feature behind a feature flag to not slow down users not creating KMS keys while testing. It will need an entry in the docs once merged.\r\nTo enable this feature, the user needs to set `S3_SKIP_KMS_KEY_VALIDATION=0`. \r\n\r\nThis PR will check the existence of the KMS key provided in `PutObject`, `CopyObject` and `CreateMultipartUpload` operations. A next step in a following PR would be to also validate it in `PutBucketEncryption` if it is done in AWS. \r\n\r\nThis PR allowed us to uncover some bugs in KMS implementation of `DescribeKey`, see #7463, which might allow to reuse the error message of KMS. \r\n\r\n_fixes #7177_\r\n\r\nedit: doc PR here: https://github.com/localstack/docs/pull/440",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2023-01-06T17:04:54Z",
        "closed_at": "2023-01-12T12:31:03Z",
        "merged_at": "2023-01-12T12:31:03Z",
        "body": "Make sure we support Python 3.11\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 35,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2023-01-06T15:15:15Z",
        "closed_at": "2023-01-10T08:16:06Z",
        "merged_at": "2023-01-10T08:16:06Z",
        "body": "Follow up from lambda permission PR https://github.com/localstack/localstack/pull/7336\r\n\r\nHaving an AWS-validated test case ready is useful for implementing actual permission policy logic.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 476,
        "deletions": 4,
        "changed_files": 2,
        "created_at": "2023-01-06T14:46:16Z",
        "closed_at": "2023-04-17T22:33:40Z",
        "merged_at": "2023-04-17T22:33:40Z",
        "body": "Implement AWS validated tests for #6882.\r\n\r\nThe fix was worked on in moto here (https://github.com/localstack/moto/pull/65) but an issue with the tests prevented me for merging at the time. I will come back to this later on, but we can merge the added tests and skip for now. \r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 148,
        "deletions": 6,
        "changed_files": 5,
        "created_at": "2023-01-05T21:09:59Z",
        "closed_at": "2023-01-11T12:04:30Z",
        "merged_at": "2023-01-11T12:04:30Z",
        "body": "The PR just adds more validation on `PutBucketACL` as a user was having an issue with an empty ACL configuration throwing a 500 error. At least now it's properly caught. ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 62,
        "deletions": 7,
        "changed_files": 5,
        "created_at": "2023-01-05T20:44:09Z",
        "closed_at": "2023-01-10T19:40:30Z",
        "merged_at": "2023-01-10T19:40:30Z",
        "body": "Addresses #6861\r\n\r\nChanges:\r\n- [x] Make access key updatable\r\n- [x] Ignore parameters not used for creation \r\n- [x] Update access key test\r\n\r\n**Note:** at the moment it's not possible to track the changes in the Serial value to trigger a key rotation.\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 226,
        "deletions": 31,
        "changed_files": 5,
        "created_at": "2023-01-05T18:27:04Z",
        "closed_at": "2023-01-10T09:43:54Z",
        "merged_at": "2023-01-10T09:43:54Z",
        "body": "This PR adds a decorator for HTTP request handlers that takes care of  serializing ASF response objects or exceptions. The changes to the SQS developer endpoints should demonstrate its utility. There we were calling the serializer explicitly very often, which is now hidden in the decorator.\r\n\r\nThe PR also adds a small fix for the SQS dev endpoint (raise proper error when calling the endpoint without a `QueueUrl` parameter)\r\n\r\nBefore adding more tests for it, I'd like to get your opinion @alexrashed on whether you think this could be useful, or whether this may be over engineering :-)",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-01-05T15:22:45Z",
        "closed_at": "2023-01-05T17:56:31Z",
        "merged_at": "2023-01-05T17:56:31Z",
        "body": "This new post release of Moto-ext contains 2 fix/features:\r\n- https://github.com/localstack/moto/pull/62\r\n- https://github.com/localstack/moto/pull/63\r\n\r\nAllowing those 2 LocalStack PR to build on top:\r\n- https://github.com/localstack/localstack/pull/7408\r\n- https://github.com/localstack/localstack/pull/7409\r\n\r\nWhich will fix 2 bugs/feature requests. \r\n\r\nNote: I'll cherry pick this commit in the 2 PR to try running the CI pipeline, to check if everything is good. ",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 41,
        "deletions": 4,
        "changed_files": 2,
        "created_at": "2023-01-05T14:29:27Z",
        "closed_at": "2023-01-06T07:10:50Z",
        "merged_at": "2023-01-06T07:10:50Z",
        "body": "Added a fallback to dynamodb get_key_schema() when the KeySchema information is not present in the Memory Store.\r\n\r\nThe `table_definition` object that is being used in memory is only filled in by the `create_table` and `update_table`, meaning that when LocalStack restarts, the object are not re-populated. This function will then always fail without this fallback.\r\n\r\nAlternatively, this could be a part of the start up by querying all the tables on start up and populate the `table_definitions` dictionary, although I haven't had the time to figure out exactly where that logic would fit.\r\n\r\nThis PR aims to overcome the latest reports in https://github.com/localstack/localstack/issues/7118.\r\n\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 11,
        "deletions": 10,
        "changed_files": 1,
        "created_at": "2023-01-05T13:11:21Z",
        "closed_at": "2023-01-05T15:03:43Z",
        "merged_at": "2023-01-05T15:03:43Z",
        "body": "This PR sets the current codeowners of S3 and SQS.\r\n\r\nPrimary owners s3: @bentsku \r\nSecondary: @macnev2013 \r\n\r\nSecondary owner of SQS: @baermat",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 5,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-01-05T12:53:24Z",
        "closed_at": "2023-01-05T14:51:03Z",
        "merged_at": "2023-01-05T14:51:03Z",
        "body": "This PR adds the `remove=True` flag for `container_port_can_be_bound` because it was not cleaning up after testing if a port is free.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 5,
        "deletions": 3,
        "changed_files": 1,
        "created_at": "2023-01-04T19:12:10Z",
        "closed_at": "2023-01-04T22:19:52Z",
        "merged_at": "2023-01-04T22:19:52Z",
        "body": "extend CFn deployment utility to add the ability to avoid transforming child parameters. ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 45,
        "deletions": 5,
        "changed_files": 5,
        "created_at": "2023-01-04T16:06:42Z",
        "closed_at": "2023-01-05T18:02:05Z",
        "merged_at": "2023-01-05T18:02:04Z",
        "body": "This PR fixes #7424 \r\nThe issue stems from the fact that the host header contains subdomains, which moto mistakes for a virtual host addressed request. \r\nSome patches were skipped while migrating S3 to ASF.\r\nThanks for the `S3VirtualHostProxyHandler`, those patches are now greatly simplified as we know for sure that requests forwarded to moto are path addressed in 100% of cases. And if they don't pass through, ASF could not parse them anyway. \r\n\r\nI've created a small test case which would fail before the fix. ",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 115,
        "deletions": 1,
        "changed_files": 4,
        "created_at": "2023-01-04T15:34:16Z",
        "closed_at": "2023-01-04T18:58:28Z",
        "merged_at": "2023-01-04T18:58:28Z",
        "body": "Add support for the CloudFormation `update-termination-protection` API (this is a requirement that has come up recently with a CDK stack that relies on this functionality). The PR also adds a simple snapshot test.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-01-04T14:23:05Z",
        "closed_at": "2023-01-04T16:37:13Z",
        "merged_at": "2023-01-04T16:37:13Z",
        "body": "The tests for this future feature are taking too much time. So for now they need to be skipped.\r\ncc @dominikschubert ",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 275,
        "deletions": 7,
        "changed_files": 5,
        "created_at": "2023-01-04T00:39:50Z",
        "closed_at": "2023-01-05T10:25:32Z",
        "merged_at": null,
        "body": "very very WIP, needs a lot more documenting\r\n\r\n- [x] added a locking mechanism linked to SequenceNumber\r\n- [x] added a test for SequenceNumber\r\n- [ ] added a test for the ordering with multiple subscribers, only have a local test for now",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 7,
        "deletions": 6,
        "changed_files": 1,
        "created_at": "2023-01-03T20:04:41Z",
        "closed_at": "2023-01-04T04:52:53Z",
        "merged_at": "2023-01-04T04:52:53Z",
        "body": "Updated contribution guidelines. Polished some of the formulations and added a point to add issues before submitting PRs.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 25,
        "deletions": 8,
        "changed_files": 1,
        "created_at": "2023-01-03T18:35:58Z",
        "closed_at": "2023-01-04T19:02:08Z",
        "merged_at": "2023-01-04T19:02:08Z",
        "body": "Minor change to improve parity for API Gateway response shapes. Resolves ASF serializer warning messages like:\r\n\r\n```\r\n2023-01-03T19:31:47.160  WARN --- [   asgi_gw_0] l.aws.protocol.serializer  : Response object Authorizer contains a member which is not specified: _links\r\n```\r\n\r\nOn a general note, it seems that we can simplify and remove the `to_response_json(..)` utility function - in the past, it seemed to be a requirement to include `\"_links\"` response elements (as per the API GW docs), but this attribute is not present in the standard responses returned by real AWS. Seems like we can get rid of it (as this is anyway already taken care of by the serializer)..? /cc @alexrashed @thrau ",
        "comments": 3
    },
    {
        "merged": false,
        "additions": 23,
        "deletions": 7,
        "changed_files": 2,
        "created_at": "2023-01-03T10:15:02Z",
        "closed_at": "2023-01-03T20:05:02Z",
        "merged_at": null,
        "body": "This PR fixes an issue when setting up FIFO SNS topics that publish messages to FIFO SQS queues.\r\n\r\n**Issue description**\r\nThe issue is that when publishing to FIFO SNS topics sending messages to it's subscribers was an async operation, meaning that if multiple messages were sent in short succession, SQS would receive these messages out of order.\r\nIn addition, SQS treated the time the messages were received as the ordering method for the messages. In the case that a message was received by SNS, we can use the `SentTimestamp` as the correct ordering method instead of the time received to better ensure correct ordering in FIFO queues.\r\n\r\n**The downside to this PR:**\r\nSeems like localstack SNS publishing is pretty slow, when you have multiple subscribers from the FIFO SNS topic, publishing may take a couple of seconds, slowing down FIFO SNS topics.\r\n\r\n**Better solution might be:**\r\nKeep a priority queue or a mutex in FIFO SNS topics and send messages in a thread according to the queue/mutex, while releasing the client to move on. There will still be a delay for the messages to arrive in the SQS queue but at least it will not be client blocking, but it might push the issue to the client's end requiring it to handle the delay (?)\r\nSee this alternate solution using mutex locks here - https://github.com/amitassaraf/localstack/commit/3cebf501cd9d61ec76f9df6a0630ddfb99ebe33f \r\n\r\n**Summary**\r\nAt Landa, the company I work at, we currently swallow this delay in order to ensure the correct ordering of the messages. For your consideration whether localstack needs this change or not.\r\n\r\nIn addition, I saw that there is an SNS refactor PR that is open that might conflict with this fix, https://github.com/localstack/localstack/pull/7267 ",
        "comments": 8
    },
    {
        "merged": true,
        "additions": 6,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-01-02T14:44:54Z",
        "closed_at": "2023-01-03T08:07:04Z",
        "merged_at": "2023-01-03T08:07:04Z",
        "body": "# \ud83d\ude80 ASF Update Report \ud83d\ude80\nThis PR has been automatically generated to update the generated API stubs for our ASF services.\nIt uses the latest code-generator from the _master_ branch ([scaffold.py](https://github.com/localstack/localstack/blob/master/localstack/aws/scaffold.py)) and the latest _published_ version of [botocore](https://github.com/boto/botocore) to re-generate all API stubs which are already present in the `localstack.aws.api` module of the _master_ branch.\n\n## \ud83d\udd04 Updated Services\nThis PR updates the following services:\n- secretsmanager\n\n## \ud83d\udc77\ud83c\udffd Handle this PR\nThe following options describe how to interact with this PR / the auto-update:\n\n\u2714\ufe0f **Accept Changes**\nIf the changes are satisfying, just squash-merge the PR and delete the source branch.\n\n\ud83d\udeab **Ignore Changes**\nIf you want to ignore the changes in this PR, just close the PR and *do not delete* the source branch. The PR will not be opened and a new PR will not be created for as long as the generated code does not change (or the branch is deleted). As soon as there are new changes, a new PR will be created.\n\n\u270f\ufe0f **Adapt Changes**\n*Don't do this.* The APIs are auto-generated. If you decide that the APIs should look different, you have to change the code-generation.\n\n\u23f8\ufe0f **Pause Updates**\nRemove the cron-schedule trigger of the GitHub Action workflow which creates these PRs. The action can then still be triggered manually, but it will not be executed automatically.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 2,
        "changed_files": 3,
        "created_at": "2023-01-02T08:44:41Z",
        "closed_at": "2023-01-02T14:20:58Z",
        "merged_at": "2023-01-02T14:20:58Z",
        "body": "This PR addresses issues with our dependency on pyOpenSSL / cryptography by removing the exact pin on `pyOpenSSL`.\r\n[Recent ASF Update action runs](https://github.com/localstack/localstack/actions/runs/3820397617/jobs/6498675594) failed, but also the normal build pipeline will be affected:\r\n```\r\nTraceback (most recent call last):\r\n  File \"/opt/hostedtoolcache/Python/3.8.15/x64/lib/python3.8/runpy.py\", line 1[9](https://github.com/localstack/localstack/actions/runs/3820397617/jobs/6498675594#step:8:10)4, in _run_module_as_main\r\n    return _run_code(code, main_globals, None,\r\n  File \"/opt/hostedtoolcache/Python/3.8.15/x64/lib/python3.8/runpy.py\", line 87, in _run_code\r\n    exec(code, run_globals)\r\n  File \"/home/runner/work/localstack/localstack/localstack/aws/scaffold.py\", line [12](https://github.com/localstack/localstack/actions/runs/3820397617/jobs/6498675594#step:8:13), in <module>\r\n    from botocore.model import (\r\n  File \"/home/runner/work/localstack/localstack/.venv/lib/python3.8/site-packages/botocore/model.py\", line 22, in <module>\r\n    from botocore.utils import CachedProperty, hyphenize_service_id, instance_cache\r\n  File \"/home/runner/work/localstack/localstack/.venv/lib/python3.8/site-packages/botocore/utils.py\", line 37, in <module>\r\n    import botocore.httpsession\r\n  File \"/home/runner/work/localstack/localstack/.venv/lib/python3.8/site-packages/botocore/httpsession.py\", line 46, in <module>\r\n    from urllib3.contrib.pyopenssl import (\r\n  File \"/home/runner/work/localstack/localstack/.venv/lib/python3.8/site-packages/urllib3/contrib/pyopenssl.py\", line 50, in <module>\r\n    import OpenSSL.crypto\r\n  File \"/home/runner/work/localstack/localstack/.venv/lib/python3.8/site-packages/OpenSSL/__init__.py\", line 8, in <module>\r\n    from OpenSSL import crypto, SSL\r\n  File \"/home/runner/work/localstack/localstack/.venv/lib/python3.8/site-packages/OpenSSL/crypto.py\", line 3268, in <module>\r\n    _lib.OpenSSL_add_all_algorithms()\r\nAttributeError: module 'lib' has no attribute 'OpenSSL_add_all_algorithms'\r\nError: Process completed with exit code 1.\r\n```\r\n\r\nThe issue seems to be caused by new pyOpenSSL / cryptography releases (and some version incompatibilities with them):\r\n- https://github.com/pyca/cryptography/releases/tag/39.0.0\r\n- https://github.com/pyca/pyopenssl/releases/tag/23.0.0\r\n\r\nPrevious PRs related to pyOpenSSL:\r\n- Initial pin (due to incompatibilities with `pyftplib`): #6936 \r\n  - `pyftplib` issues should already be fixed with https://github.com/giampaolo/pyftpdlib/issues/578\r\n- Upgrade to 22.0.0 (to fix compatibility with OpenSSL 1.1.1): #6940 \r\n\r\nThe fix has been verified by manually running the ASF Update action against this branch: https://github.com/localstack/localstack/actions/runs/3821309691",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 13,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2022-12-31T00:36:32Z",
        "closed_at": "2023-01-03T11:15:32Z",
        "merged_at": "2023-01-03T11:15:32Z",
        "body": "This PR adds code to correctly reuse HTTP connections in the analytics client when possible.\r\n\r\nPreviously, every analytics event would create a new HTTP connection, leading to an excessive amount of new connections on the analytics endpoint. [`requests.Session` does keep-alive by default](https://requests.readthedocs.io/en/latest/user/advanced/?highlight=keep%20alive#keep-alive), so simply using the session object is enough to enable client-side keep alive. The default flush interval of the analytics client is 10 seconds, and it looks like connections are kept this long (or longer) by ELB.\r\n\r\nI checked by setting the `urllib3` log level to DEBUG, and observed that fewer connections are created when sending analytics events. Here's what to look for in the log:\r\n\r\n```\r\n2022-12-31T01:53:20.000 DEBUG --- [-functhread1] urllib3.connectionpool     : Starting new HTTPS connection (1): analytics.localstack.cloud:443\r\n```\r\n\r\nor \r\n```\r\n2022-12-31T02:01:55.188 DEBUG --- [-functhread9] urllib3.connectionpool     : Resetting dropped connection: analytics.localstack.cloud\r\n```",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 519,
        "deletions": 96,
        "changed_files": 8,
        "created_at": "2022-12-31T00:01:05Z",
        "closed_at": "2023-01-16T11:53:50Z",
        "merged_at": "2023-01-16T11:53:50Z",
        "body": "This PR mainly adds support for `s3:ObjectAcl:Put` S3 notification event.\r\n\r\nFollows up on https://github.com/localstack/moto/pull/63\r\n\r\nI've also added:\r\n- [x] some ACL validation for Object\r\n- [x] add 2 tests for the `ObjectAcl:Put` notification in SQS and EventBridge (to check the 2 different format).\r\n- [x] clean up some `skip_snapshot_verify` for the new provider\r\n- [x] remove an `xfail` on an ACL test thanks to the moto PR linked above\r\n\r\nI'll add some object ACL validation test like the buckets one in a following PR, as I'm working on ACL validation in #7444\r\n\r\n_fixes #7407_",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 712,
        "deletions": 187,
        "changed_files": 6,
        "created_at": "2022-12-30T20:16:56Z",
        "closed_at": "2023-01-11T12:42:10Z",
        "merged_at": "2023-01-11T12:42:10Z",
        "body": "AWS recently added a new feature to SNS (around end of November 22), concerning the `FilterPolicy` of subscriptions.\r\nPreviously, when filtering messages going to be fanned out to subscribers, we could only filter on `MessageAttributes`. However, this was a limitation especially between their own integrations: S3 notifications for example. You don't have a say in how the event looks, and can't add message attributes.\r\nThey introduced the `FilterPolicyScope` subscription attribute, and you can now choose between `MessageAttributes` (the default) and `MessageBody`. This will require the body to be a parsable JSON string, but you can now filter based on the message body.\r\n\r\nYou can read more with examples here:\r\nhttps://aws.amazon.com/blogs/compute/introducing-payload-based-message-filtering-for-amazon-sns/\r\n\r\nThis PR needs https://github.com/localstack/moto/pull/62 to be able to run (add the `FilterPolicyScope` attribute in the validated subscriptions attributes and implements the logic to validate nested properties in the `FilterPolicy`)\r\n\r\nThis PR implements:\r\n- all the AWS validated tests for this new feature, as well as validations tests.\r\n- validation of parameters, a small fix for saving the filter policy at the right place (it was never returned by moto)\r\n- the new filtering behaviour in the new `SubscriptionFilter` class. \r\n- small fix of returned field when listing subscriptions attributes and saving correct fields when creating the sub\r\n- clean up the `skip_snapshot_verify` for SNS after those fixes\r\n\r\n_fixes #7398_",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 46,
        "deletions": 0,
        "changed_files": 4,
        "created_at": "2022-12-29T08:22:55Z",
        "closed_at": "2022-12-30T12:31:38Z",
        "merged_at": "2022-12-30T12:31:38Z",
        "body": "Adding a simple check for `MaxNumberOfMessages` in `ReceiveMessage`. It came up while having a look at #7397.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 260,
        "deletions": 129,
        "changed_files": 5,
        "created_at": "2022-12-29T06:13:27Z",
        "closed_at": "2023-01-04T13:39:15Z",
        "merged_at": "2023-01-04T13:39:15Z",
        "body": "### Summary\r\n\r\nThis PR adds global table support more operations. Global tables are tables that are replicated across regions. It is now possible to do these operations either in the source region or replicated regions:\r\n\r\n  - `UpdateItem`\r\n  - `DeleteItem`\r\n  - `ListTables`\r\n  - `UpdateTable`\r\n  - `DescribeTable`\r\n\r\n### Tests\r\n\r\nNew assertions to existings test\r\n\r\n### Related\r\n\r\nCloses https://github.com/localstack/localstack/issues/7377\r\n\r\nDocs https://github.com/localstack/docs/pull/400",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-12-29T05:51:42Z",
        "closed_at": "2022-12-30T18:00:18Z",
        "merged_at": "2022-12-30T18:00:18Z",
        "body": "Resolves:\r\n- https://github.com/localstack/localstack/issues/5230\r\n- https://github.com/localstack/localstack/issues/7362\r\n- https://github.com/localstack/localstack/issues/7366\r\n- https://github.com/localstack/localstack/issues/7263",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2022-12-26T07:41:07Z",
        "closed_at": "2022-12-26T09:17:07Z",
        "merged_at": "2022-12-26T09:17:07Z",
        "body": "<https://aws.amazon.com/about-aws/whats-new/2022/12/amazon-transcribe-speech-text-languages-swedish-vietnamese/>",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 13,
        "deletions": 4,
        "changed_files": 2,
        "created_at": "2022-12-26T05:05:38Z",
        "closed_at": "2022-12-28T18:05:30Z",
        "merged_at": "2022-12-28T18:05:30Z",
        "body": "# \ud83d\ude80 ASF Update Report \ud83d\ude80\nThis PR has been automatically generated to update the generated API stubs for our ASF services.\nIt uses the latest code-generator from the _master_ branch ([scaffold.py](https://github.com/localstack/localstack/blob/master/localstack/aws/scaffold.py)) and the latest _published_ version of [botocore](https://github.com/boto/botocore) to re-generate all API stubs which are already present in the `localstack.aws.api` module of the _master_ branch.\n\n## \ud83d\udd04 Updated Services\nThis PR updates the following services:\n- ec2\n- transcribe\n\n## \ud83d\udc77\ud83c\udffd Handle this PR\nThe following options describe how to interact with this PR / the auto-update:\n\n\u2714\ufe0f **Accept Changes**\nIf the changes are satisfying, just squash-merge the PR and delete the source branch.\n\n\ud83d\udeab **Ignore Changes**\nIf you want to ignore the changes in this PR, just close the PR and *do not delete* the source branch. The PR will not be opened and a new PR will not be created for as long as the generated code does not change (or the branch is deleted). As soon as there are new changes, a new PR will be created.\n\n\u270f\ufe0f **Adapt Changes**\n*Don't do this.* The APIs are auto-generated. If you decide that the APIs should look different, you have to change the code-generation.\n\n\u23f8\ufe0f **Pause Updates**\nRemove the cron-schedule trigger of the GitHub Action workflow which creates these PRs. The action can then still be triggered manually, but it will not be executed automatically.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 443,
        "deletions": 3,
        "changed_files": 4,
        "created_at": "2022-12-25T23:52:33Z",
        "closed_at": "2022-12-30T14:13:06Z",
        "merged_at": "2022-12-30T14:13:06Z",
        "body": "This PR adds developer endpoints for SQS to `/_aws/sqs`. Specifically, it adds an endpoint that is compatible with `ReceiveMessage` that can be used to retrieve all messages of a queue without side-effects. To simplify things, it returns all message attributes and system attributes by default and ignores any other parameters from the `ReceiveMessage` operation, except `QueueUrl`.\r\n\r\nThis is a more robust replacement for features building on #7331 (/cc @lukqw)\r\n\r\nHere are some example invocations:\r\n\r\n```bash\r\n# uses /_aws/sqs/messages as endpoint URL - demonstrating the compatibility with aws clients\r\naws --endpoint-url=http://localhost:4566/_aws/sqs/messages \\\r\n    sqs receive-message \\\r\n    --queue-url http://queue.localhost.localstack.cloud:4566/000000000000/test-queue-01\r\n\r\n# equivalent cURL call but as GET request\r\ncurl \"http://localhost:4566/_aws/sqs/messages?QueueUrl=http://queue.localhost.localstack.cloud:4566/000000000000/test-queue-01\"\r\n\r\n# there's also an endpoint where the queue information is encoded into the path directly\r\ncurl -H 'Accept: application/json' \"http://localhost:4566/_aws/sqs/messages/us-east-1/000000000000/test-queue-01\"\r\n```\r\n\r\nTODO:\r\n- [X] basic implementation\r\n- [x] write tests\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 250,
        "deletions": 8,
        "changed_files": 4,
        "created_at": "2022-12-23T10:29:43Z",
        "closed_at": "2022-12-24T20:52:03Z",
        "merged_at": "2022-12-24T20:52:03Z",
        "body": "This PR tackles the new API for resource tagging in cloudwatch logs, which was not yet implemented.\r\nIt is part of a fix for https://github.com/localstack/localstack/issues/7378.\r\n\r\nThe implementation relies on https://github.com/localstack/localstack/pull/7086 where the botocore/boto3 lib is upgraded.\r\n\r\nThe PR includes:\r\n* new store for logs\r\n* implementation of new resource-tagging APIs\r\n* override old tagging APIs (previously handled by moto), for easier accessing of tags (both APIs should return the same output)\r\n* snapshot test\r\n\r\n\r\n**TODO**\r\n- [ ] rebase with master (currently based on #7086)\r\n\r\n\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 105,
        "deletions": 58,
        "changed_files": 3,
        "created_at": "2022-12-23T05:42:25Z",
        "closed_at": "2022-12-28T07:13:48Z",
        "merged_at": "2022-12-28T07:13:48Z",
        "body": "Closes https://github.com/localstack/localstack/issues/7236",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 243,
        "deletions": 425,
        "changed_files": 21,
        "created_at": "2022-12-22T21:12:42Z",
        "closed_at": "2022-12-29T14:13:11Z",
        "merged_at": "2022-12-29T14:13:10Z",
        "body": "## Changes\r\n\r\n- Remove `PLACEHOLDER_RESOURCE_NAME` and `GenericBaseModel.get_resource_name`\r\n- Use full resource type names everywhere (e.g. `AWS::SQS::Queue` instead of `SQS::Queue`)\r\n- Use `GenericBaseModel.logical_resource_id` instead of `GenericBaseModel.resource_id`\r\n- Move non-engine utils to `api_utils.py` (like in lambda)\r\n- Move policy loading to `policy_loader.py`\r\n- Remove `nested_stacks` as mentioned in a previous PR",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 53,
        "deletions": 2,
        "changed_files": 3,
        "created_at": "2022-12-22T15:52:25Z",
        "closed_at": "2022-12-22T21:46:16Z",
        "merged_at": "2022-12-22T21:46:16Z",
        "body": "This PR removes the base64 decoding of binary message attributes in SQS, as the parser would already take care of this.\r\n\r\nWe can see a reproducible example in #7381 \r\n\r\nThe parser takes care of it here:\r\nhttps://github.com/localstack/localstack/blob/162a21f993ba565b6b748e5ba491262d214a4550/localstack/aws/protocol/parser.py#L292-L293\r\n\r\nAnd the type of the `BinaryValue` is defined in the specs as:\r\n```json\r\n\"Binary\":{\"type\":\"blob\"},\r\n```\r\n```json\r\n\"BinaryValue\":{\r\n    \"shape\":\"Binary\",\r\n    \"documentation\":\"<p>Binary type attributes can store any binary data, such as compressed data, encrypted data, or images.</p>\"\r\n}\r\n```\r\n\r\nNow that the SQS legacy provider has been deleted, we can safely assume all requests are \"ASF parsed\". \r\n\r\n_fixes #7381_\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 12,
        "deletions": 3,
        "changed_files": 1,
        "created_at": "2022-12-22T10:27:41Z",
        "closed_at": "2022-12-23T05:54:06Z",
        "merged_at": "2022-12-23T05:54:06Z",
        "body": "Fixes https://github.com/localstack/localstack/issues/7310",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2022-12-22T09:19:03Z",
        "closed_at": "2022-12-23T08:38:36Z",
        "merged_at": "2022-12-23T08:38:36Z",
        "body": "Companion PR for [fix in moto upstream](https://github.com/spulec/moto/pull/5793#issuecomment-1362168672).\r\n\r\nIt can be merged before we update moto-ext: we now filter for a specific class, but the name of the class didn't change.\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 723,
        "deletions": 655,
        "changed_files": 10,
        "created_at": "2022-12-22T07:18:20Z",
        "closed_at": "2022-12-22T21:10:23Z",
        "merged_at": "2022-12-22T21:10:23Z",
        "body": "The goal here is to untangle the resources, methods, modules, etc. a bit and reduce complexity.\r\nRemoving circular dependencies here allows us to properly add types in the `template_deployer` to facilitate further refactoring efforts.\r\n\r\n## Changes\r\n\r\n- Move Stack, StackChangeSet, StackSet, StackInstance from `provider.py` to separate file\r\n- Remove dependencies from those moved classes to any other cfn modules. Fix circular dependencies\r\n- Temporarily disable (commented out) `Stack.nested_stacks`. If the pipeline is green this will be removed in a follow-up PR.\r\n- Stack outputs are resolved *once* after applying changes. `Stack.outputs_list` has been removed (functionality moved to `template_deployer.resolve_outputs` temporarily.\r\n- Grouped stack set operations in `provider.py` and moved to the end of the class\r\n\r\n## Next up\r\n\r\nIn follow-up PRs:\r\n- Introduce more typing for utils and template_deployer\r\n- Reduce code paths where possible\r\n- Introduction of cfn-lint\r\n- Migrate 'entitites' to be more data-focused and remove custom logic\r\n- Remove inheritance between Stack/StackChangeSet",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 300,
        "deletions": 1,
        "changed_files": 3,
        "created_at": "2022-12-21T19:00:26Z",
        "closed_at": "2022-12-22T10:35:06Z",
        "merged_at": "2022-12-22T10:35:06Z",
        "body": "This issue arose in a support ticket.\r\n\r\nWhen passing a message from the `default` event bus of EventBridge to a custom one with a rule, we would first `json.loads` the event `Details` then pass it down the chain for it to be sent again through `put_events` if the target was an event bus. However, we would not `json.dumps` it again after it being decoded, so we would try to send a `dict` in the `put_event Entries` parameter, which would raise a silent exception. \r\n\r\nSee here for the code decoding the JSON details before calling `localstack.services.events.provider.process_events` which calls `localstack.utils.aws.message_forwarding.send_event_to_target` where the fix is:\r\nhttps://github.com/localstack/localstack/blob/05aa3907cd2166823ee2bb10d145227e8383115b/localstack/services/events/provider.py#L468-L486\r\n\r\nThe chain is S3 notification -> default EventBridge event bus -> rule on default eventbridge bus -> custom eventbridge bus -> SQS queue. \r\n\r\n```\r\n2022-12-20T23:11:49.182  INFO --- [   asgi_gw_0] l.services.events.provider : Unable to send event notification {'version': '0', 'id': 'a26463c1-9f3e-4e9b-a4f0-0475d478ab9a', 'detail-type': 'Object Created', 'sou... to target {'Arn': 'arn:aws:events:us-west-2:000000000000:event-bus/custom-event-bus', 'Id': 'terraform-20221220230701396700000002', 'RoleArn': 'arn:aws:iam::000000000000:role/service-role/custom-role'}: Parameter validation failed:\r\nInvalid type for parameter Entries[0].Detail, value: {'version': '0', 'bucket': {'name': 'bucket-name'}, 'object': {'key': 'delivery/test.txt', 'size': 212, 'etag': '\"ef34c94690f8a66f9e9880c01f6e6818\"', 'sequencer': '0062E99A88DC407460'}, 'request-id': 'RKREYG1RN2X92YX6', 'requester': '074255357339', 'source-ip-address': '127.0.0.1', 'reason': 'PutObject'}, type: <class 'dict'>, valid types: <class 'str'>\r\n```\r\n\r\nThe added test is the sample of the user, taken from Terraform and put into boto3 commands.  ",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 22,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2022-12-21T17:14:45Z",
        "closed_at": "2022-12-21T20:38:48Z",
        "merged_at": "2022-12-21T20:38:48Z",
        "body": "## Motivation\r\nWe already got multiple requests (e.g. https://discuss.localstack.cloud/t/nodejs-remote-debugging-with-provider-override-lambda-asf/185/2) for the flag to be supported again, as it is used in multiple debugging setups.\r\n\r\n## Changes\r\n* Allow lambda docker flags to be present again\r\n* Add test to developer tools which verifies the correct usage (of at least the environment flag)",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 7,
        "deletions": 3,
        "changed_files": 1,
        "created_at": "2022-12-21T10:39:10Z",
        "closed_at": "2022-12-21T16:10:20Z",
        "merged_at": "2022-12-21T16:10:20Z",
        "body": "Changes\r\n\r\n- Move patch of `AWS::EC2::SecurityGroup` here\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2022-12-20T22:42:30Z",
        "closed_at": "2022-12-22T17:26:11Z",
        "merged_at": "2022-12-22T17:26:11Z",
        "body": "<!--\r\n**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n-->\r\n\r\nCloses #7358.\r\n\r\nRan:\r\n* `make venv`,\r\n* `make install`,\r\n* `make format`,\r\n* `make lint`, and\r\n* `make test`.\r\n\r\nPushing to check how CI reacts.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2022-12-20T19:24:51Z",
        "closed_at": "2022-12-20T20:58:06Z",
        "merged_at": "2022-12-20T20:58:06Z",
        "body": "## Problem\r\nWith #6603 we removed the `\"sqs\": True` part of sqs payloads.\r\nWhile this is correct in terms of parity, this broke the lambda-java-utils (https://github.com/localstack/localstack-java-utils) library we use for local lambda execution, which depended on that attribute.\r\n\r\n## Solution\r\n* The new version of localstack-java-utils uses an attribute which is supposed to be in the payload to determine SQS events, which fixes the execution of these handlers in LocalStack.\r\n\r\nIt is not a good fix, since we should not rely on the data layout for this, but it fixes the regression.\r\n\r\nFixes #6995\r\n\r\nRelevant localstack-java-utils PR: localstack/localstack-java-utils#98",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 21,
        "deletions": 5,
        "changed_files": 4,
        "created_at": "2022-12-20T19:01:23Z",
        "closed_at": "2022-12-20T20:36:31Z",
        "merged_at": "2022-12-20T20:36:31Z",
        "body": "## Problem\r\nLS multiplies the timestamps for `ApproximateCreationDateTime` (dynamodb) and `approximateArrivalTimestamp` (kinesis) by 1000, so it is provided in milliseconds.\r\n\r\nThis is, however, not what AWS does, there the value is a posix timestamp, so in seconds. For kinesis, it has millisecond precision, but the integer part still represents seconds.\r\nSo basically, the correct formats would be:\r\nkinesis:            `1671562498.449` (currently `1671562498449.0`)\r\ndynamodb:     `1671562498.0` (currently `1671562498000`)\r\n\r\nAlso, the encryptionType should not be present in the kinesis records of the lambda event. This is basically a repetition of #3346 .\r\n\r\n## AWS docs for this behavior\r\nKinesis provides a hint here: https://docs.aws.amazon.com/kinesis/latest/APIReference/API_GetRecords.html . It says the value has `millisecond precision`, but in this case it is still a POSIX timestamp with the integer part representing seconds, the millisecond precision is provided in the fractional part.\r\n\r\nDynamoDB quite clearly state it has to be unix epoch time format here: https://docs.aws.amazon.com/amazondynamodb/latest/APIReference/API_streams_StreamRecord.html\r\n\r\n## Changes\r\n* This PR fixes this behavior, and adds assertions regarding the length of the integer part to the tests.\r\n* Remove snapshot ignore of the encryptionType (to assert it being absent)\r\n\r\n## Related issues\r\n* #6355\r\n* #6369\r\nBoth are locally tested to be fixed.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 39,
        "deletions": 6,
        "changed_files": 2,
        "created_at": "2022-12-20T14:11:07Z",
        "closed_at": "2023-01-03T15:04:48Z",
        "merged_at": "2023-01-03T15:04:48Z",
        "body": "It seems we had a flaky test run here: [circleCI run](https://app.circleci.com/pipelines/github/localstack/localstack/11427/workflows/da8762f4-382a-4346-baf5-a57e5a5ffb4f/jobs/79436/tests)\r\n\r\nWe had an issue before where we would delete the subscription after failing to deliver. This test checks for this regression.\r\n\r\nWhat we do is we create an SNS topic, set a subscription with an SQS queue, test that it works, then delete the queue.\r\nIt should then fail to publish. We then waited 1 second (now 3) before setting a `RedrivePolicy` with a dead letter queue to then try publishing again and see that it arrives in the DLQ. \r\n\r\nWhat happens apparently is that 1 second is not enough, and that the asynchronous publishing part took more than 1 second, which made the message arrive in the DLQ because it was already configured.\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 20,
        "deletions": 2,
        "changed_files": 3,
        "created_at": "2022-12-20T14:06:31Z",
        "closed_at": "2022-12-23T08:22:21Z",
        "merged_at": "2022-12-23T08:22:21Z",
        "body": "Co-authored by @dominikschubert \r\n\r\n## Problem\r\n\r\nThe new lambda provider requires bi-directional communication (host <=> lambda container), which breaks host mode in macOS because the lambda container is not reachable via IPv4 in bridge mode.\r\nHence, invoking any lambda fails while the lambda container waits for an invocation (i.e., during `\"blocking the credentials service\"`) after a connection timeout with the error `Connection to 172.17.0.2 timed out.`\r\n\r\nEnable new lambda provider: `PROVIDER_OVERRIDE_LAMBDA=asf`\r\n\r\nRelevant test case: `tests.integration.awslambda.test_lambda.TestLambdaFeatures.test_invocation_type_request_response`\r\n\r\n## Background\r\n\r\n> Docker Desktop can\u2019t route traffic to Linux containers. However, if you\u2019re a Windows user, you can ping the Windows containers. (Source: Docker [I cannot ping my containers](https://docs.docker.com/desktop/networking/#i-cannot-ping-my-containers))\r\n\r\nThere is also a long discussion thread about this issue in the [moby project](https://github.com/moby/moby/issues/22753#issuecomment-222943352).\r\n\r\n## LocalStack Workarounds\r\n\r\n- Start LS in a container with bind-mounted code and run tests against it using `TEST_SKIP_LOCALSTACK_START=1`\r\n    - \u2796\u00a0 Debugging doesn\u2019t work\r\n    - \u2796\u00a0Tests that monkey-patch stuff don\u2019t work\r\n- Execute test in container\u00a0`TEST_PATH=\"tests/integration/awslambda/test_lambda_common.py\" make test-docker-mount`\r\n    - \u2796\u00a0 cannot install moto using `pip install -e`\r\n    \u21d2 delete `-v $$PACKAGES_DIR/moto:/opt/code/localstack/.venv/lib/python3.10/site-packages/moto/` from test-docker-mount-code in the Makefile\r\n\r\nThanks, @dfangl for the hints \ud83d\ude4f \r\n\r\n\r\n## Potential macOS networking Workarounds (not tested)\r\n\r\n- Blogpost summarizing solutions: https://itecnote.com/tecnote/r-how-to-ping-the-docker-container-from-the-host/\r\n    - \u2795\u00a0most comprehensive overview\r\n- Docker Toolbox/VirtualBox or Vagrant/Ansible-based setup: https://stackoverflow.com/a/39217691\r\n    - \u2796 cumbersome to configure\r\n    - \u2796 doesn't support host volume mapping\r\n- shim based fix:  https://github.com/AlmirKadric-Published/docker-tuntap-osx\r\n    - \u2796\u00a0depends on unmaintained [TunTap](https://tuntaposx.sourceforge.net/)\r\n\r\n## Suggested Changes\r\n\r\nIntroduce a dev config flag `LAMBDA_DEV_PORT_EXPOSE` and conditionally expose a free TCP port in the lambda container.",
        "comments": 5
    },
    {
        "merged": true,
        "additions": 56,
        "deletions": 1,
        "changed_files": 3,
        "created_at": "2022-12-20T11:56:54Z",
        "closed_at": "2022-12-20T16:47:16Z",
        "merged_at": "2022-12-20T16:47:16Z",
        "body": "This PR adds a band-aid for the issue described in https://github.com/pallets/werkzeug/issues/2558.\r\n\r\nIt should fix/address (cc @bentsku @pinzon)\r\n* #6588\r\n* #7247\r\n* #7256\r\n\r\nThe problem manifested mostly in S3 pre-signed POST, where the combination of payloads larger than the buffer size in werkzeug's [MultiPartParser](https://github.com/pallets/werkzeug/blob/eef696b15c5e9fc20ed718f6685a3f21f2fbc3b8/src/werkzeug/formparser.py#L348) would force chunking, and further down the line would cause the issue described in the upstream issue report I linked.\r\n\r\nI added a unit test, which created the following traceback:\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"/home/thomas/workspace/localstack/localstack/tests/unit/http_/test_asgi.py\", line 222, in app\r\n    for k, file_storage in request.files.items():\r\n  File \"/home/thomas/workspace/localstack/localstack/.venv/lib/python3.10/site-packages/werkzeug/utils.py\", line 107, in __get__\r\n    value = self.fget(obj)  # type: ignore\r\n  File \"/home/thomas/workspace/localstack/localstack/.venv/lib/python3.10/site-packages/werkzeug/wrappers/request.py\", line 480, in files\r\n    self._load_form_data()\r\n  File \"/home/thomas/workspace/localstack/localstack/.venv/lib/python3.10/site-packages/werkzeug/wrappers/request.py\", line 266, in _load_form_data\r\n    data = parser.parse(\r\n  File \"/home/thomas/workspace/localstack/localstack/.venv/lib/python3.10/site-packages/werkzeug/formparser.py\", line 263, in parse\r\n    return parse_func(self, stream, mimetype, content_length, options)\r\n  File \"/home/thomas/workspace/localstack/localstack/.venv/lib/python3.10/site-packages/werkzeug/formparser.py\", line 140, in wrapper\r\n    return f(self, stream, *args, **kwargs)\r\n  File \"/home/thomas/workspace/localstack/localstack/.venv/lib/python3.10/site-packages/werkzeug/formparser.py\", line 290, in _parse_multipart\r\n    form, files = parser.parse(stream, boundary, content_length)\r\n  File \"/home/thomas/workspace/localstack/localstack/.venv/lib/python3.10/site-packages/werkzeug/formparser.py\", line 418, in parse\r\n    for data in iterator:\r\n  File \"/home/thomas/workspace/localstack/localstack/.venv/lib/python3.10/site-packages/werkzeug/wsgi.py\", line 653, in _make_chunk_iter\r\n    item = _read(buffer_size)\r\n  File \"/home/thomas/workspace/localstack/localstack/.venv/lib/python3.10/site-packages/werkzeug/wsgi.py\", line 925, in read\r\n    return self.on_disconnect()\r\n  File \"/home/thomas/workspace/localstack/localstack/.venv/lib/python3.10/site-packages/werkzeug/wsgi.py\", line 893, in on_disconnect\r\n    raise ClientDisconnected()\r\n```\r\n\r\nThe patch is a temporary solution that should be removed once the upstream issue is fixed.",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 150,
        "deletions": 20,
        "changed_files": 12,
        "created_at": "2022-12-20T11:22:50Z",
        "closed_at": "2022-12-21T09:55:28Z",
        "merged_at": "2022-12-21T09:55:28Z",
        "body": "## Changes\r\n\r\n- Move template_deployer and template_preparer from the utils to the cloudformation service package\r\n- Move CFn resource classes for Layer and Layer permission. Alias was duplicated and will be removed in -ext only.\r\n\r\nCompanion PR cleans up the related -ext code.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 14,
        "deletions": 26,
        "changed_files": 1,
        "created_at": "2022-12-20T11:08:38Z",
        "closed_at": "2022-12-20T13:55:29Z",
        "merged_at": "2022-12-20T13:55:29Z",
        "body": "The messages were previously sorted before comparing with the snapshot, but something got lost in a failed merge commit in the past and missed. This PR adds the missing message sorting before comparing with the snapshot to prevent flaky test runs.\n\n- fix: sort messages before comparing with raw email\n- refactor: extract sorting function\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 51,
        "deletions": 10,
        "changed_files": 3,
        "created_at": "2022-12-20T09:02:23Z",
        "closed_at": "2022-12-20T12:37:12Z",
        "merged_at": "2022-12-20T12:37:12Z",
        "body": "Add lock for StepFunction creation to prevent concurrency issues. This issue surfaced while deploying a Terraform script with N number of copies of the same state machine, which then resulted in the following error:\r\n\r\n```\r\nbotocore.errorfactory.InvalidDefinition: An error occurred (InvalidDefinition) when calling the\r\n        CreateStateMachine operation: Invalid State Machine Definition: ''DUPLICATE_STATE_NAME: Duplicate State name:\r\n        MissingValue at /States/MissingValue', 'DUPLICATE_STATE_NAME: Duplicate State name: Add at /States/Add''\r\n```\r\n\r\nAdded a simple test that creates a number of state machines in parallel.",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 18,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2022-12-19T21:38:38Z",
        "closed_at": "2022-12-20T11:59:15Z",
        "merged_at": null,
        "body": "WIP, for CI run\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2022-12-19T15:57:09Z",
        "closed_at": "2022-12-20T19:26:38Z",
        "merged_at": "2022-12-20T19:26:38Z",
        "body": "Marks two notoriously flaky tests as xfail to avoid having to restart the CI all the time.\r\n\r\nThere seem to be a few other apigw related flakes still detected by CircleCI: https://app.circleci.com/insights/github/localstack/localstack/workflows/main/tests?branch=master \r\n/cc @calvernaz ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 10,
        "deletions": 3,
        "changed_files": 1,
        "created_at": "2022-12-19T11:57:12Z",
        "closed_at": "2022-12-21T10:22:07Z",
        "merged_at": "2022-12-21T10:22:07Z",
        "body": "Until we have the new stepfunctions implementation ready we're stuck on 1.7.9 since we want to avoid adding additional 300MB+ to our final image size. \r\n\r\nFortunately the reverted PR was not affecting anything yet since we're not actively using the version string to get the respective files from the image. \r\nTo update the code used for the stepfunctions execution one needs to update the `SFN_IMAGE_LAYER_DIGEST` (see related comment in `localstack/services/stepfunctions/packages.py`).",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 122,
        "deletions": 36,
        "changed_files": 3,
        "created_at": "2022-12-19T05:05:02Z",
        "closed_at": "2022-12-19T08:48:20Z",
        "merged_at": "2022-12-19T08:48:20Z",
        "body": "# \ud83d\ude80 ASF Update Report \ud83d\ude80\nThis PR has been automatically generated to update the generated API stubs for our ASF services.\nIt uses the latest code-generator from the _master_ branch ([scaffold.py](https://github.com/localstack/localstack/blob/master/localstack/aws/scaffold.py)) and the latest _published_ version of [botocore](https://github.com/boto/botocore) to re-generate all API stubs which are already present in the `localstack.aws.api` module of the _master_ branch.\n\n## \ud83d\udd04 Updated Services\nThis PR updates the following services:\n- cloudwatch\n- ec2\n- kinesis\n\n## \ud83d\udc77\ud83c\udffd Handle this PR\nThe following options describe how to interact with this PR / the auto-update:\n\n\u2714\ufe0f **Accept Changes**\nIf the changes are satisfying, just squash-merge the PR and delete the source branch.\n\n\ud83d\udeab **Ignore Changes**\nIf you want to ignore the changes in this PR, just close the PR and *do not delete* the source branch. The PR will not be opened and a new PR will not be created for as long as the generated code does not change (or the branch is deleted). As soon as there are new changes, a new PR will be created.\n\n\u270f\ufe0f **Adapt Changes**\n*Don't do this.* The APIs are auto-generated. If you decide that the APIs should look different, you have to change the code-generation.\n\n\u23f8\ufe0f **Pause Updates**\nRemove the cron-schedule trigger of the GitHub Action workflow which creates these PRs. The action can then still be triggered manually, but it will not be executed automatically.",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-12-17T12:27:09Z",
        "closed_at": "2023-01-25T08:10:55Z",
        "merged_at": null,
        "body": "Running the localstack locally with Python 3.7 results in a syntax error.\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.7/bin/localstack\", line 23, in <module>\r\n    main()\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.7/bin/localstack\", line 19, in main\r\n    main.main()\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/localstack/cli/main.py\", line 3, in main\r\n    from .profiles import set_profile_from_sys_argv\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/localstack/cli/profiles.py\", line 13\r\n    if profile := parse_profile_argument(sys.argv):\r\n                ^\r\nSyntaxError: invalid syntax\r\n```\r\n\r\nThe colon equal operator (`:=`) was added from Python 3.8. https://docs.python.org/3/whatsnew/3.8.html#assignment-expressions. The documentation seems outdated.\r\n\r\n\r\n**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 11
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 4,
        "changed_files": 2,
        "created_at": "2022-12-16T21:55:28Z",
        "closed_at": "2022-12-17T11:21:02Z",
        "merged_at": "2022-12-17T11:21:02Z",
        "body": "Rebased PR.\r\n\r\nCloses https://github.com/localstack/localstack/pull/7339",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2022-12-16T21:02:10Z",
        "closed_at": "2022-12-17T19:19:33Z",
        "merged_at": "2022-12-17T19:19:33Z",
        "body": "Bump `stepfunctions-local` package to version 1.12.0\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 9,
        "deletions": 1,
        "changed_files": 3,
        "created_at": "2022-12-16T20:37:24Z",
        "closed_at": "2022-12-17T20:03:52Z",
        "merged_at": "2022-12-17T20:03:52Z",
        "body": "See https://github.com/etspaceman/kinesis-mock/releases/tag/0.3.0\r\n\r\nThis adds the UpdateStreamMode API, as well as updates to a few other request/response bodies with information from the stream mode. \r\n\r\nAlso see https://docs.aws.amazon.com/kinesis/latest/APIReference/API_UpdateStreamMode.html\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 14,
        "deletions": 4,
        "changed_files": 3,
        "created_at": "2022-12-16T18:29:04Z",
        "closed_at": "2022-12-19T12:39:28Z",
        "merged_at": "2022-12-19T12:39:28Z",
        "body": "## Motivation\r\nWe want to be able to watch arbitrary paths to allow hot reload, for more advanced features, like layer hot reloading.\r\n\r\n## Changes\r\n* Update LRI to v0.1.8-pre to get support for specifying arbitrary paths to be watched for changes (and reloading after a change)\r\n* Skip the whole test class instead of just a test, as it seems to fit better for the functionality\r\n\r\nDepends on localstack/lambda-runtime-init#8",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2022-12-16T12:00:15Z",
        "closed_at": "2022-12-18T14:23:57Z",
        "merged_at": "2022-12-18T14:23:57Z",
        "body": "Small fix to check that the content of the downloaded SSL cert file is non-empty, to make the startup more reliable. Discovered this issue during a time of bad network connectivity, where the SSL cert file was created on disk, but the download failed and hence the file had empty content.\r\n\r\n```\r\nFile \"/opt/code/localstack/localstack/services/generic_proxy.py\", line 585, in create_ssl_cert\r\nreturn generate_ssl_cert(cert_pem_file, serial_number=serial_number)\r\nFile \"/opt/code/localstack/localstack/utils/sync.py\", line 101, in _wrapper\r\nreturn wrapped(*args, **kwargs)\r\nFile \"/opt/code/localstack/localstack/utils/crypto.py\", line 70, in generate_ssl_cert\r\ncert_file_name, key_file_name = store_cert_key_files(target_file_tmp)\r\nFile \"/opt/code/localstack/localstack/utils/crypto.py\", line 50, in store_cert_key_files\r\nkey_start = key_start.group(0)\r\nAttributeError: 'NoneType' object has no attribute 'group'\r\n```",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-12-16T09:45:46Z",
        "closed_at": "2022-12-16T11:04:23Z",
        "merged_at": "2022-12-16T11:04:23Z",
        "body": "`HOST_TMP_FOLDER` has been deprecated with 1.0.0, but the CLI still sets the environment variable to avoid breaking the usage of the legacy directory mode (where this env var is still be used).\r\nVersion 1.3.0 introduced proper deprecation warnings when deprecated environment variables are used (see #7197).\r\nThis caused the following deprecation warning on every startup of localstack with the CLI:\r\n```\r\nWARN --- [  MainThread] localstack.deprecations    : HOST_TMP_FOLDER is deprecated (since 1.0.0) and will be removed in upcoming releases of LocalStack! Please remove this environment variable.\r\n```\r\n\r\nThis PR changes the container configuration by the CLI such that by default (if the legacy directory mode is not set), the `HOST_TMP_FOLDER` is also not set. It is only set if the legacy directory mode is enabled.\r\nThis avoids the deprecation warning on a default startup using the CLI.",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 4,
        "deletions": 4,
        "changed_files": 2,
        "created_at": "2022-12-15T13:54:37Z",
        "closed_at": "2022-12-17T11:21:03Z",
        "merged_at": null,
        "body": "> **Note** This PR is a replacement for #7335\u2014I had deleted my fork before the PR was merged and can no longer rebase that branch to fix unrelated unit test issues.\r\n\r\nLocalstack is expecting the API Gateway `GetExport` `export_type` for OpenAPI v3 to be `oas3` instead of `oas30`.\r\n\r\nSee https://docs.aws.amazon.com/apigateway/latest/api/API_GetExport.html\r\n> **export_type**\r\n> The type of export. Acceptable values are '**oas30**' for OpenAPI 3.0.x and 'swagger' for Swagger/OpenAPI 2.0.",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 1594,
        "deletions": 106,
        "changed_files": 6,
        "created_at": "2022-12-15T08:56:43Z",
        "closed_at": "2022-12-28T12:53:34Z",
        "merged_at": "2022-12-28T12:53:34Z",
        "body": "Tests and fixes several TODOs related to Lambda permissions and ARN, qualifier handling, especially focusing on API validation and exception handling.\r\nAll changes apply to the new lambda provider enabled through `PROVIDER_OVERRIDE_LAMBDA=asf`\r\n\r\n- [x] Validation + exception testing for add_permission\r\n- [x] Fix add_permission exception handling\r\n- [x] Fix alias detection regex (see new unit tests, manually validated against AWS, some cases are covered in parity tests).\r\n- [x] Check the scope of uniqueness constraint (see `TODO: is this unique just in the policy or across all policies in region/account/function (?)` in `provider.py`)\r\n- [x]  Fix disparity behavior when publishing a new version. Observation: Publishing a new lambda version creates a new revision id for the permission associated with $LATEST. The current implementation doesn\u2019t reflect that\r\n- [x]  Fix disparity when adding permissions to old versions. Probably a follow-up issue due to the publishing version disparity\r\n- [x] `revision_id` for `remove_permission`\r\n- [x] `revision_id` for `add_permission`\r\n- [x]  Double-check against old impl: `localstack.services.awslambda.lambda_api.add_permission_policy_statement`\r\n- [x] Generalize function name (ARN, ARN shortname) and qualifier resolving and re-use for lambda permissions\r\n- [x] Check where new helpers `_validate_qualifier_expression` and `_resolve_fn_qualifier` could be re-used in lambda (e.g., see TODOs in `create_function_url_config`)\r\n- [x] Extend `localstack.services.awslambda.api_utils.build_statement` (hard to test\r\n- [x] test Alexa (see `TODO: add test for event_source_token (alexa smart home) and auth_type`)\r\n\r\n## Follow-Up (out of scope in this PR)\r\n\r\n- [x] Test + implement revisions for lambda in general (with versions, aliases, layers, etc). It seems that the revision id of permissions is the same as for qualified lambdas (i.e., `VersionFunctionConfiguration`).\r\n- [x] MAYBE write a failing test for actual permission behavior (manually validated with SNS, tried SQS, but synchronous invocation via apigateway would be better because it executes much faster and more reliably)",
        "comments": 3
    },
    {
        "merged": false,
        "additions": 4,
        "deletions": 4,
        "changed_files": 2,
        "created_at": "2022-12-14T19:57:19Z",
        "closed_at": "2022-12-15T13:55:25Z",
        "merged_at": null,
        "body": "Localstack is expecting the API Gateway `GetExport` `export_type` for OpenAPI v3 to be `oas3` instead of `oas30`.\r\n\r\nSee https://docs.aws.amazon.com/apigateway/latest/api/API_GetExport.html\r\n> **export_type**\r\n> The type of export. Acceptable values are '**oas30**' for OpenAPI 3.0.x and 'swagger' for Swagger/OpenAPI 2.0.",
        "comments": 8
    },
    {
        "merged": true,
        "additions": 69,
        "deletions": 50,
        "changed_files": 3,
        "created_at": "2022-12-14T19:01:52Z",
        "closed_at": "2022-12-16T11:05:29Z",
        "merged_at": "2022-12-16T11:05:29Z",
        "body": "This PR fix some small S3 pre-signed issues, like a wrong type return and mistake in returning a variable for exception, as well as passing a value in a context instead of changing the signature of a Signer method (`add_auth`) \r\n\r\nAlso, spotted some issues in the test and clarified what it was supposed to test and do. (one test was actually testing twice the same payload).",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 145,
        "deletions": 55,
        "changed_files": 3,
        "created_at": "2022-12-14T18:03:22Z",
        "closed_at": "2022-12-21T11:08:15Z",
        "merged_at": "2022-12-21T11:08:15Z",
        "body": "This PR adds support for propagating custom tags when sending emails through to SNS.\n\nNote: as per discussion with the reporter, we are focusing on custom tags at this stage. If required we will add the aws-added tags in a follow up PR.\n\nCloses #7323",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2022-12-14T17:39:28Z",
        "closed_at": "2022-12-16T11:07:25Z",
        "merged_at": "2022-12-16T11:07:24Z",
        "body": "This PR enables us to call sqs.receive_message with `max_number_of_messages -1` to receive all messages of the queue.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 42,
        "deletions": 4,
        "changed_files": 3,
        "created_at": "2022-12-14T15:28:23Z",
        "closed_at": "2022-12-14T17:12:54Z",
        "merged_at": "2022-12-14T17:12:54Z",
        "body": "This PR introduces a pre-processing of CLI flags to make sure config profiles are loaded correctly. Previously, config profiles beyond `default.env` did not work at all, because `localstack.config` (and subsequently the config profiles) was loaded *before* the CLI was created and `--profile=...` was parsed. This is a fundamental issue with our current import paths.\r\n\r\nTested locally, and we should put proper bootstrap tests on the roadmap for when we rework the pipeline.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 14,
        "deletions": 4,
        "changed_files": 3,
        "created_at": "2022-12-14T12:49:54Z",
        "closed_at": "2022-12-16T16:00:29Z",
        "merged_at": "2022-12-16T16:00:29Z",
        "body": "Whenever we start localstack we're greeting with this warning message:\r\n\r\n```\r\nWARN --- [  MainThread] localstack.deprecations    : DEFAULT_REGION is deprecated (since 0.12.7) and will be removed in upcoming releases of LocalStack! LocalStack now has full multi-region support. Please remove this environment variable.\r\n```\r\n\r\nThis happens even if we don't have the environment variable `DEFAULT_REGION` set.\r\nThis is because in `localstack/config.py` the check for the environment variable has a side effect of creating it if the environment variable is not set!\r\n\r\nLater on the detection `log_deprecation_warnings()` checks kick-in and detect that the environment variable is set and issue the warning.\r\n\r\nWith this commit we're avoiding creating the environment variable.\r\n\r\nSee https://github.com/localstack/localstack/issues/7257#issuecomment-1351278444\r\n\r\n**NOTE**: There's an extra commit to fix a typo in the python doc.\r\n",
        "comments": 8
    },
    {
        "merged": true,
        "additions": 67,
        "deletions": 29,
        "changed_files": 4,
        "created_at": "2022-12-13T18:49:20Z",
        "closed_at": "2022-12-16T08:42:01Z",
        "merged_at": "2022-12-16T08:42:01Z",
        "body": "Quick cleanup following #7284 :\r\n\r\n1. Added basic parity tests covering the basic CRUD (put = create/update) scenario for function concurrency\r\n2. Re-use `get_account_settings` instead of relying on outdated duplicated code",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 583,
        "deletions": 16,
        "changed_files": 5,
        "created_at": "2022-12-13T18:31:57Z",
        "closed_at": "2023-01-03T08:35:59Z",
        "merged_at": "2023-01-03T08:35:59Z",
        "body": "This PR was part of hackathon project with @ackdav and adds an additional job to the CircleCI build, to upload data from the run to tinybird:\r\n- test raw data (from integration tests)\r\n- not/implemented coverage data\r\n\r\nThe PR includes:\r\n- improvements for `metric_handler`:\r\n  - do not add duplicate entries (ignore header in the comparison as it includes a timestamp) to the raw test metadata\r\n- exclude `operation` field in the coverage aggregation output (seems like copy-paste-error, it aggregates data for the entire `service`)\r\n- `tinybird_upload.py`\r\n  - handles the upload to tinybird, used in the new build-step\r\n- `retrieve_legacy_data_from_circleci.py`\r\n  - script used to extract historical data from master, and load into tinybird\r\n  - used only once, added workflow-ids to keep track of what has been uploaded already\r\n  - **Q: does it make sense to merge this script? it will only be executed locally and on demand** \r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 20,
        "deletions": 19,
        "changed_files": 2,
        "created_at": "2022-12-13T16:24:11Z",
        "closed_at": "2022-12-15T09:02:57Z",
        "merged_at": "2022-12-15T09:02:57Z",
        "body": "Addresses #7007 by removing the `ContributorInsightsSpecification` key (we do not currently implement the related APIs in DynamoDB) while building the global secondary indexes. ",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 325,
        "deletions": 34,
        "changed_files": 12,
        "created_at": "2022-12-13T15:28:52Z",
        "closed_at": "2022-12-16T17:44:27Z",
        "merged_at": "2022-12-16T17:44:27Z",
        "body": "## Motivation\r\n\r\nFor efficient lambda development, we have to provide an easy solution to hot reload lambda functions, especially those of interpreted languages (like python and nodejs).\r\nHowever, we want to make it available for all managed runtimes.\r\nIt should also only reset the environments if a change is detected, to prevent unnecessary initializations.\r\n\r\n## Breaking Changes with Fallbacks\r\n\r\n* Change of the default hot-reloading bucket marker, from `__local__` to `hot-reload`. The current provider will continue to support the `__local__` marker for now, the new one will only support the new one. Would move the deprecation to 1.4 and the removal to 2.0.\r\n\r\n## Other Changes\r\n\r\n* Add hot-reloading support\r\n* Allow VolumeBind objects to be used directly in docker client, and add option for read only mounts (necessary for hot reloading)\r\n* Add test for hot reloading\r\n\r\nFixes #7200",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 15,
        "changed_files": 3,
        "created_at": "2022-12-13T13:57:26Z",
        "closed_at": "2022-12-23T08:43:41Z",
        "merged_at": "2022-12-23T08:43:41Z",
        "body": "This PR:\r\n- Bumps moto-ext to 4.0.12.post1\r\n- Reverts the pending changes made in https://github.com/localstack/localstack/pull/7291\r\n- Improve error tracing for failing Transcribe jobs. There are [intermittent failures](https://github.com/localstack/localstack/pull/7344#issuecomment-1356810066) in transcribe tests. I suspect they're happening due to the [ffmpeg mirror](https://www.johnvansickle.com/ffmpeg/) and will continue to monitor cc: @whummer ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 17,
        "deletions": 21,
        "changed_files": 5,
        "created_at": "2022-12-13T11:40:53Z",
        "closed_at": "2022-12-15T07:31:03Z",
        "merged_at": "2022-12-15T07:31:03Z",
        "body": "### Summary\r\n\r\nRemoves dependency on `pytz`. All the functionality that it offered is now included in the standard library.\r\n\r\n### Related\r\nhttps://github.com/spulec/moto/pull/5749\r\n\r\n<https://blog.ganssle.io/articles/2018/03/pytz-fastest-footgun.html>",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 132,
        "deletions": 8,
        "changed_files": 3,
        "created_at": "2022-12-13T09:03:16Z",
        "closed_at": "2022-12-13T11:41:01Z",
        "merged_at": "2022-12-13T11:41:01Z",
        "body": "Adds a `RuntimeImageResolver` class and a corresponding new config variable `LAMBDA_RUNTIME_IMAGE_MAPPING`\r\n\r\nCopied doc from the class:\r\n\r\n> Resolves Lambda runtimes to corresponding docker images\r\n> The default behavior resolves based on a prefix (including the repository) and a suffix (per runtime).\r\n> \r\n> This can be customized via the LAMBDA_RUNTIME_IMAGE_MAPPING config in 2 distinct ways:\r\n> \r\n>   Option A: use a pattern string for the config variable that includes the \"<runtime>\" string\r\n>       e.g. \"myrepo/lambda:<runtime>-custom\" would resolve the runtime \"python3.9\" to \"myrepo/lambda:python3.9-custom\"\r\n> \r\n>   Option B: use a JSON dict string for the config variable, mapping the runtime to the full image name & tag\r\n>       e.g. {\"python3.9\": \"myrepo/lambda:python3.9-custom\", \"python3.8\": \"myotherrepo/pylambda:3.8\"}\r\n>   \r\n>       Note that with Option B this will only apply to the runtimes included in the dict.\r\n>       All other (non-included) runtimes will fall back to the default behavior.\r\n\r\nsample configurations:\r\n\r\n* `LAMBDA_RUNTIME_IMAGE_MAPPING=\"customrepo/lambda-<runtime>:2022\"`\r\n* `LAMBDA_RUNTIME_IMAGE_MAPPING='{\"python3.9\": \"customrepo/lambda-py-thon:3.9\"}'`",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 42,
        "deletions": 5,
        "changed_files": 3,
        "created_at": "2022-12-12T21:04:38Z",
        "closed_at": "2022-12-13T10:36:02Z",
        "merged_at": "2022-12-13T10:36:02Z",
        "body": "Addresses #7312.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2022-12-12T12:32:04Z",
        "closed_at": "2022-12-13T08:03:00Z",
        "merged_at": "2022-12-13T08:03:00Z",
        "body": null,
        "comments": 1
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2022-12-12T05:05:32Z",
        "closed_at": "2022-12-12T07:51:20Z",
        "merged_at": "2022-12-12T07:51:20Z",
        "body": "# \ud83d\ude80 ASF Update Report \ud83d\ude80\nThis PR has been automatically generated to update the generated API stubs for our ASF services.\nIt uses the latest code-generator from the _master_ branch ([scaffold.py](https://github.com/localstack/localstack/blob/master/localstack/aws/scaffold.py)) and the latest _published_ version of [botocore](https://github.com/boto/botocore) to re-generate all API stubs which are already present in the `localstack.aws.api` module of the _master_ branch.\n\n## \ud83d\udd04 Updated Services\nThis PR updates the following services:\n- transcribe\n\n## \ud83d\udc77\ud83c\udffd Handle this PR\nThe following options describe how to interact with this PR / the auto-update:\n\n\u2714\ufe0f **Accept Changes**\nIf the changes are satisfying, just squash-merge the PR and delete the source branch.\n\n\ud83d\udeab **Ignore Changes**\nIf you want to ignore the changes in this PR, just close the PR and *do not delete* the source branch. The PR will not be opened and a new PR will not be created for as long as the generated code does not change (or the branch is deleted). As soon as there are new changes, a new PR will be created.\n\n\u270f\ufe0f **Adapt Changes**\n*Don't do this.* The APIs are auto-generated. If you decide that the APIs should look different, you have to change the code-generation.\n\n\u23f8\ufe0f **Pause Updates**\nRemove the cron-schedule trigger of the GitHub Action workflow which creates these PRs. The action can then still be triggered manually, but it will not be executed automatically.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2022-12-12T02:28:03Z",
        "closed_at": "2022-12-12T07:51:36Z",
        "merged_at": "2022-12-12T07:51:36Z",
        "body": "[![Mend Renovate](https://app.renovatebot.com/images/banner.svg)](https://renovatebot.com)\n\nThis PR contains the following updates:\n\n| Package | Type | Update | Change |\n|---|---|---|---|\n| python | final | digest | `95f2dd6` -> `6f0a933` |\n| python | stage | digest | `95f2dd6` -> `6f0a933` |\n\n---\n\n### Configuration\n\n\ud83d\udcc5 **Schedule**: Branch creation - \"before 3am on Monday\" (UTC), Automerge - At any time (no schedule defined).\n\n\ud83d\udea6 **Automerge**: Disabled by config. Please merge this manually once you are satisfied.\n\n\u267b **Rebasing**: Whenever PR becomes conflicted, or you tick the rebase/retry checkbox.\n\n\ud83d\udd15 **Ignore**: Close this PR and you won't be reminded about these updates again.\n\n---\n\n - [ ] <!-- rebase-check -->If you want to rebase/retry this PR, check this box\n\n---\n\nThis PR has been generated by [Mend Renovate](https://www.mend.io/free-developer-tools/renovate/). View repository job log [here](https://app.renovatebot.com/dashboard#github/localstack/localstack).\n<!--renovate-debug:eyJjcmVhdGVkSW5WZXIiOiIzNC41NC4wIiwidXBkYXRlZEluVmVyIjoiMzQuNTQuMCJ9-->\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 10,
        "deletions": 9,
        "changed_files": 2,
        "created_at": "2022-12-11T10:12:36Z",
        "closed_at": "2023-03-29T10:34:18Z",
        "merged_at": "2023-03-29T10:34:18Z",
        "body": "## Description\r\n\r\nThis PR:\r\n\r\n- Directs users to create feature requests on Discussion Pages\r\n- Deletes the `feature-request.yml` file\r\n- Add a `enhancement-request.yml` file",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 56,
        "deletions": 35,
        "changed_files": 4,
        "created_at": "2022-12-09T15:31:51Z",
        "closed_at": "2022-12-09T16:59:18Z",
        "merged_at": "2022-12-09T16:59:18Z",
        "body": "### Summary\r\nThis PR fixes an encoding issue that occurred when updating an item.\r\nIssue #7146 contains a nicely detailed account of the issue and how to reproduce it.\r\n\r\nFixes: #7146 ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 60,
        "deletions": 4,
        "changed_files": 2,
        "created_at": "2022-12-09T07:59:44Z",
        "closed_at": "2022-12-13T08:44:40Z",
        "merged_at": "2022-12-13T08:44:40Z",
        "body": "Added some simple tests for generating mocked requests/responses to make sure we have basic test coverage. ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 0,
        "deletions": 363,
        "changed_files": 1,
        "created_at": "2022-12-08T16:39:44Z",
        "closed_at": "2022-12-08T19:14:27Z",
        "merged_at": "2022-12-08T19:14:27Z",
        "body": "This PR removes an unused logs file introduced in #7269",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 14,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2022-12-08T07:04:03Z",
        "closed_at": "2023-03-27T16:17:39Z",
        "merged_at": null,
        "body": "While creating lambda function without adding `runtime` argument - It should throw an exception.\r\n\r\nExample 1:\r\nShould result in error.\r\n```\r\naws lambda create-function --function-name my-function \\\r\n--zip-file fileb://code.zip --handler main.lambda_handler --runtime s \\\r\n--role arn:aws:iam::054596861717:role/lambda-ex --region us-east-1\r\n```\r\nExample 2:\r\nShould result in error.\r\n```\r\naws lambda create-function --function-name my-function \\\r\n--zip-file fileb://code.zip --handler main.lambda_handler --runtime s \\\r\n--role arn:aws:iam::054596861717:role/lambda-ex --region us-east-1\r\n```",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 10,
        "changed_files": 1,
        "created_at": "2022-12-07T15:20:28Z",
        "closed_at": "2022-12-10T14:42:20Z",
        "merged_at": "2022-12-10T14:42:20Z",
        "body": "This PR removes the last subclass of `AwsApiListener`.\r\nAddresses #6668.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 135,
        "deletions": 32,
        "changed_files": 6,
        "created_at": "2022-12-06T15:12:56Z",
        "closed_at": "2022-12-07T08:04:08Z",
        "merged_at": "2022-12-07T08:04:08Z",
        "body": "CloudFormation templates are defines in JSON or YAML. Both have type support for primitive types like string or integer.\r\nHowever, AWS CloudFormation is not too strict about the types of the different fields, f.e. `ClusterConfig.InstanceCount` can be defined as string instead of integer in `AWS::OpenSearchService::Domain`.\r\n\r\nThis PR introduces a new utility which performs a best-effort TypedDict conversion.\r\nIt can be used with the TypedDicts generated by ASF, and will try to recursively convert the members of a given dict to the types of the members of a specific TypedDict.\r\n\r\n`convert_to_typed_dict` is then used in the cloudformation models for elasticsearch and opensearch to fix the described type differences.\r\n\r\nFixes #7282",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 15,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2022-12-06T09:40:59Z",
        "closed_at": "2022-12-13T13:52:34Z",
        "merged_at": "2022-12-13T13:52:34Z",
        "body": "- Bumps moto-ext\r\n- Adds `pytz` which was earlier provided by moto-ext but since has been removed upstream\r\n- Skips assertion of `x-amz-sdk-checksum-algorithm` header. This is a negative test that is being fixed upstream and reverted at a later point.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 21,
        "deletions": 5,
        "changed_files": 2,
        "created_at": "2022-12-06T06:33:30Z",
        "closed_at": "2022-12-11T09:14:50Z",
        "merged_at": "2022-12-11T09:14:50Z",
        "body": "## Description\r\n\r\nBased on a discussion, this PR proposes two separate files:\r\n\r\n- `docker-compose.yml` for community users\r\n- `docker-compose-pro.yml` for licensed users\r\n\r\nThis PR would also involve a documentation change (which I will take care off). ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1211,
        "deletions": 31,
        "changed_files": 23,
        "created_at": "2022-12-05T21:36:00Z",
        "closed_at": "2022-12-28T20:15:15Z",
        "merged_at": "2022-12-28T20:15:15Z",
        "body": "More tests for future CFn improvements. \r\n- [x] Test global scope transformation\r\n- [x] Test snippet scope transformations\r\n- [x] Test scope conflict\r\n- [x] Test for capabilities requirements\r\n- [x] Test for lambda internals on a macro execution\r\n- [x]  Test error for template limit\r\n- [x]  Test error for passing macro as reference\r\n- [x]  Test functions and parameters status during a macro execution\r\n- [x]  Test multiple errors during the lambda execution\r\n\r\nNote: Also renamed the file `test_engine.py` to `test_template_engine.py`",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 14,
        "deletions": 6,
        "changed_files": 1,
        "created_at": "2022-12-05T17:39:53Z",
        "closed_at": "2022-12-05T20:38:58Z",
        "merged_at": "2022-12-05T20:38:58Z",
        "body": "For APIGW v2, we slightly deviate from the usual pattern of the module and attribute naming for the stores.\r\nI figured this issue out while testing the save and load of the `ecs-app` Cloud Pod.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 199,
        "deletions": 14,
        "changed_files": 5,
        "created_at": "2022-12-05T14:25:21Z",
        "closed_at": "2022-12-07T14:30:25Z",
        "merged_at": "2022-12-07T14:30:25Z",
        "body": "This PR adds a test for getting Lambda account settings (focusing on total code size) and fixes/completes its implementation.",
        "comments": 5
    },
    {
        "merged": true,
        "additions": 20,
        "deletions": 5,
        "changed_files": 3,
        "created_at": "2022-12-05T11:38:31Z",
        "closed_at": "2022-12-08T23:04:39Z",
        "merged_at": "2022-12-08T23:04:39Z",
        "body": "The custom patch wasn't adapted to reflect the recent uptake of the new moto model. The fix makes sure we access the correct property from the model.\r\n\r\n- Sample https://github.com/localstack/localstack-terraform-samples/tree/master/apigateway-rest-cors\r\n\r\nResolves https://github.com/localstack/localstack/issues/7278\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1807,
        "deletions": 81,
        "changed_files": 7,
        "created_at": "2022-12-05T05:06:01Z",
        "closed_at": "2022-12-05T10:53:48Z",
        "merged_at": "2022-12-05T10:53:48Z",
        "body": "# \ud83d\ude80 ASF Update Report \ud83d\ude80\nThis PR has been automatically generated to update the generated API stubs for our ASF services.\nIt uses the latest code-generator from the _master_ branch ([scaffold.py](https://github.com/localstack/localstack/blob/master/localstack/aws/scaffold.py)) and the latest _published_ version of [botocore](https://github.com/boto/botocore) to re-generate all API stubs which are already present in the `localstack.aws.api` module of the _master_ branch.\n\n## \ud83d\udd04 Updated Services\nThis PR updates the following services:\n- config\n- ec2\n- firehose\n- kms\n- lambda-\n- s3control\n- stepfunctions\n\n## \ud83d\udc77\ud83c\udffd Handle this PR\nThe following options describe how to interact with this PR / the auto-update:\n\n\u2714\ufe0f **Accept Changes**\nIf the changes are satisfying, just squash-merge the PR and delete the source branch.\n\n\ud83d\udeab **Ignore Changes**\nIf you want to ignore the changes in this PR, just close the PR and *do not delete* the source branch. The PR will not be opened and a new PR will not be created for as long as the generated code does not change (or the branch is deleted). As soon as there are new changes, a new PR will be created.\n\n\u270f\ufe0f **Adapt Changes**\n*Don't do this.* The APIs are auto-generated. If you decide that the APIs should look different, you have to change the code-generation.\n\n\u23f8\ufe0f **Pause Updates**\nRemove the cron-schedule trigger of the GitHub Action workflow which creates these PRs. The action can then still be triggered manually, but it will not be executed automatically.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 3,
        "changed_files": 1,
        "created_at": "2022-12-02T16:37:36Z",
        "closed_at": "2022-12-02T18:34:17Z",
        "merged_at": "2022-12-02T18:34:17Z",
        "body": "## Motivation\r\nCurrently, on master, tests are failing due to the put_metric_alarm_escape_character test failing.\r\nSince it describes all alarms in the describe_alarms check, and just takes the first, it is very possible a leftover alarm from another test failing this one.\r\n\r\n## Changes\r\n* use cleanups fixture for cleanup of this alarm\r\n* filter describe alarms so the first returned alarm should always be the just-created one.",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 9,
        "deletions": 7,
        "changed_files": 2,
        "created_at": "2022-12-02T11:45:16Z",
        "closed_at": "2023-04-11T06:36:53Z",
        "merged_at": null,
        "body": "This PR removes the pins for `werkzeug`, `flask`, and `Quart` introduced in #6514 and #6593.\r\n\r\nTODO:\r\n- [x] Remove pins.\r\n- [x] Fix usage of removed request context stack (for both flask and quart).\r\n- [ ] Ensure all tests are green.\r\n  - Current test failures seem to be related to https://github.com/pallets/werkzeug/issues/2533 and should be fixed with https://github.com/pallets/werkzeug/pull/2535.\r\n  - This means that this PR is blocked until `2.2.3` of Werkzeug is released (which is the next release and the current milestone of the PR which should fix the issue).",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 192,
        "deletions": 2,
        "changed_files": 6,
        "created_at": "2022-12-01T16:29:50Z",
        "closed_at": "2022-12-02T14:33:54Z",
        "merged_at": "2022-12-02T14:33:54Z",
        "body": "This PR fixes an issue with updating updated stacks. After deploying a stack three (!!) times, the stack status would go through\n\n1. `CREATE_COMPLETE`\n2. `UPDATE_COMPLETE`\n3. `CREATE_COMPLETE`\n\nwhich is not correct. This impacted AWS SAM since it would be waiting for `UPDATE_COMPLETE` for an update operation, and would hang/timeout. With this change, the stack status is correctly returned to `cloudformation.describe_stacks` as `UPDATE_COMPLETE`.\n\nCloses #6155",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 25,
        "deletions": 27,
        "changed_files": 8,
        "created_at": "2022-12-01T13:47:24Z",
        "closed_at": "2022-12-05T06:27:15Z",
        "merged_at": "2022-12-05T06:27:15Z",
        "body": "This PR:\r\n\r\n- Switch docs links to updated one to prevent redirects\r\n- Ensures users are up-to-date with new documentation links",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 724,
        "deletions": 309,
        "changed_files": 6,
        "created_at": "2022-11-30T21:50:34Z",
        "closed_at": "2022-12-05T19:24:09Z",
        "merged_at": "2022-12-05T19:24:09Z",
        "body": "As @calvernaz pointed out. The ApiGW Method wasn't creating correctly the Integration Responses. This PR addresses that.\r\n\r\nChanges:\r\n\r\n- [x] Refactor the test for the apigateway integration deployment\r\n- [x] Resource model creates the integration response \r\n- [x] Change the template to Yaml for easier reading\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 2439,
        "deletions": 1023,
        "changed_files": 9,
        "created_at": "2022-11-30T18:00:51Z",
        "closed_at": "2023-01-03T18:20:17Z",
        "merged_at": "2023-01-03T18:20:17Z",
        "body": "This PR refactors SNS publishing and the underlying data model.\r\nThe ASF provider was still making use of the data model used by the `ProxyListener` (using query string parameters).\r\n\r\nThis PR splits the publishing in different class depending on the target: `Lambda`, `SQS`, `Firehose`, `SMS`, `Platform Endpoint` (mobile push notification system), `email`&`email-json`, and `http`/`https`. \r\n\r\nIt makes uses of a `ThreadPoolExecutor`, in the same way as S3 notifications.\r\n\r\nPreviously, while using `publish_batch`, it would send the messages sequentially and synchronously (maybe in order to keep the FIFO order right). This is now all asynchronous.\r\nAlso, while batch publishing to an SQS queue, the new publisher will make use of SQS `SendMessageBatch` instead of making individual calls (the batching size and limitations are the same, so it must use it under the hood).\r\n\r\nDifferent validations were added along the way, for example to `SetSubscriptionAttributes`, and different parameters to `Publish`, with corresponding AWS validated tests.\r\n\r\nAlso, I've put a feature allowing us to directly publish to the real GCM/FCM mobile notification platform behind a feature flag, for now called `LEGACY_SNS_GCM_PUBLISHING` but maybe in need of a new name. This feature was not advertised, but was blocking some other users as they would need real world credentials to GCM to be able to use LocalStack.\r\n\r\nLimitations: while testing, I've realised that messages sent to FIFO topics would not properly be directed to the DLQ in case of issue, most probably because we don't pass down the `MessageGroupId` and such necessary parameters. This will be treated as the next iteration, an `xfail` test is already in place and I know how to fix the issue, but the PR was getting a bit out of scope. \r\n\r\n_note: CI run failed on a fluke, should be green_\r\n\r\n_fixes #6863_",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 1261,
        "deletions": 36,
        "changed_files": 12,
        "created_at": "2022-11-30T16:02:17Z",
        "closed_at": "2022-12-02T12:44:51Z",
        "merged_at": "2022-12-02T12:44:51Z",
        "body": "## Motivation\r\nCurrent implementation of the new lambda provider is missing relevant features regarding ImageUri CRUD.\r\nEven though container image execution is a LocalStack Pro feature, the basic CRUD functionality should be in community, on the one hand to prevent tools which use them from throwing errors based on invalid API responses, and for the other to make a implementation easier for pro.\r\n\r\n## Changes\r\n* Added lambda image / imageconfig crud\r\n* add tests\r\n* Move deployment package specific code behind guards, so they are only executed if needed\r\n* Add hooks to hook into from pro, to support container images and layers",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2022-11-30T14:37:02Z",
        "closed_at": "2022-11-30T15:50:46Z",
        "merged_at": "2022-11-30T15:50:46Z",
        "body": "adds `aliases` to the coverage-template that will be used for the doc to update the parity coverage\r\n \r\n/cc @HarshCasper \r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 57,
        "deletions": 2,
        "changed_files": 3,
        "created_at": "2022-11-30T14:36:03Z",
        "closed_at": "2022-12-02T12:40:24Z",
        "merged_at": "2022-12-02T12:40:24Z",
        "body": "Outputs `Parameters` from `cloudformation.get_template_summary` - this is a required piece of information for SAM. This error is only triggered when there are no parameters in the template. Otherwise, the parameters _are_ returned.\r\n\r\nWe add a single snapshot test that handles one case. This is likely to not be complete as far as CloudFormation is concerned, but it's a huge surface area to tackle, and there is a project in the works to re-do CloudFormation.\r\n\r\nNote: we don't verify `$..ResourceIdentifierSummaries..ResourceIdentifiers` as this also requires a refactoring of CloudFormation: the field groups stack resources by their type, and for each type lists the identifier, e.g. `TopicArn` for SNS topics. This state is likely per-resource, and could ideally be part of the autogeneraiton of stack resource definitions (TBD). It does not really have a place here just yet.\r\n\r\nUnfortunately this PR does not fully enable SAM support due to https://github.com/localstack/localstack/issues/6155\r\n\r\nCloses #6974\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 11,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2022-11-30T02:43:25Z",
        "closed_at": "2022-12-26T22:52:20Z",
        "merged_at": "2022-12-26T22:52:20Z",
        "body": "HEAD query support was disabled as part of the refactoring in #4883.\r\n\r\nIt used to be supported by the following implementation.\r\n\r\n```python\r\ndef handle(self, method, path, data) -> Optional[Dict]:\r\n    if method == \"GET\":\r\n        return self.get(path, data)\r\n    if method == \"POST\":\r\n        return self.post(path, data)\r\n    if method == \"PUT\":\r\n        return self.put(path, data)\r\n\r\n    return {}\r\n```\r\n\r\nWhen using LocalStack in a Docker environment, third-party tools like `wait-for-200` might be used to probe the readiness of the LocalStack service. And some of these tools use HEAD queries by default. In such environments, upgrading from an older version of LocalStack might break some pods accidentally and it's not straightforward to debug because you can only see the following output in your LocalStack logs:\r\n\r\n```\r\n2022-11-29T09:03:01.545 ERROR --- [   asgi_gw_1] l.aws.handlers.logging\r\n: exception during call chain: 405 Method Not Allowed: The method is not\r\nallowed for the requested URL.\r\n```\r\n\r\nThis PR attempts to add HEAD query support back to ease the upgrade for users with such setups.\r\n\r\n**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 12,
        "deletions": 13,
        "changed_files": 8,
        "created_at": "2022-11-29T15:23:14Z",
        "closed_at": "2022-11-30T15:12:05Z",
        "merged_at": "2022-11-30T15:12:05Z",
        "body": "Fix internal usages of deprecation mentioned in: #7257 \r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 399,
        "deletions": 6,
        "changed_files": 12,
        "created_at": "2022-11-29T14:54:25Z",
        "closed_at": "2022-12-05T16:11:32Z",
        "merged_at": "2022-12-05T16:11:32Z",
        "body": "This PR fixes some issues presented with certain CFn models, mentioned in a ticket\r\n\r\n- [x] Correct ApiGW Account model\r\n- [x] Update for Lambda Permisions\r\n- [x]  Update for ApiGW Usage Plan\r\n- [x]  Update for SSM Parameter\r\n- [x]  Update for CDK Metadata",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 772,
        "deletions": 28,
        "changed_files": 11,
        "created_at": "2022-11-29T10:05:16Z",
        "closed_at": "2022-12-20T06:01:08Z",
        "merged_at": "2022-12-20T06:01:08Z",
        "body": "## Changes\r\n* Add support for configuring max retry attempts at 0,1 or 2 for asynchronous invocations. The first retry attempt will be delayed by 60s, the second one by 120s. To avoid having this test run for 3min+ a config was introduced to configure the base delay and scale the second one (2x)\r\n* Add support for configuring a maximum event age. If the invoke would take place at a time later than that event age it will not be rescheduled for a retry.\r\n* Add typing for retry util\r\n* Improve event invoke config tests",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2022-11-29T07:11:40Z",
        "closed_at": "2022-11-29T15:05:21Z",
        "merged_at": "2022-11-29T15:05:21Z",
        "body": "Minor fix for the `deploy_cfn_template` test fixture.\r\n\r\nI've noticed that it sometimes was leaking stacks when testing against AWS since it only added the stack id to its internal cleanup state when it was successfully deployed. A timeout would then cause the deployment to fail (it didn't wait for the completion), so the ID was missing from the cleanups even though on AWS it was still in progress, finished a bit later and then was never cleaned up.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 524,
        "deletions": 26,
        "changed_files": 4,
        "created_at": "2022-11-28T16:26:59Z",
        "closed_at": "2022-12-08T14:41:43Z",
        "merged_at": "2022-12-08T14:41:43Z",
        "body": "This fixes an incorrect merge on my part \ud83e\udd26\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 26,
        "deletions": 3,
        "changed_files": 3,
        "created_at": "2022-11-28T14:12:50Z",
        "closed_at": "2022-11-29T09:42:32Z",
        "merged_at": "2022-11-29T09:42:32Z",
        "body": "- [x] Add markers for localstack-full and localstack-light (if not present)\r\n- [x] Show a deprecation warning whenever localstack-light or localstack-full are used (but not when localstack/localstack is used).\r\n\r\nTo be merged after https://github.com/localstack/localstack/pull/7249",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 387,
        "deletions": 29,
        "changed_files": 4,
        "created_at": "2022-11-28T13:09:35Z",
        "closed_at": "2022-12-08T17:19:20Z",
        "merged_at": "2022-12-08T17:19:20Z",
        "body": null,
        "comments": 2
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2022-11-28T09:53:45Z",
        "closed_at": "2022-12-05T06:11:59Z",
        "merged_at": "2022-12-05T06:11:59Z",
        "body": "More context here: https://github.com/localstack/localstack-ext/pull/1191. Adds a hook to the state lifecycle to be triggered when a new state is loaded into the provider via Cloud Pods. The logic executed with this trigger often requires method proper of the provider.  ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 150,
        "deletions": 93,
        "changed_files": 7,
        "created_at": "2022-11-28T09:26:03Z",
        "closed_at": "2022-11-30T10:56:12Z",
        "merged_at": "2022-11-30T10:56:12Z",
        "body": "- [x] Add a new push target to localstack/localstack-pro.\r\n- [x] In the beginning, this should just be the localstack/localstack image.\r\n- [x] With 2.0 this should be the pro image, and localstack/localstack should just contain the community code!\r\n- [x] Add a deprecation warning when Pro is activated, but localstack/localstack is used.\r\n- [x] Make sure to use the correct image in the CLI.\r\n- [x] Add markers for localstack-full and localstack-light (if not present)\r\n- [x] Show a deprecation warning whenever localstack-light or localstack-full are used (but not when localstack/localstack is used).\r\n\r\n### Comparison of pipeline duration:\r\n\r\n- **pipeline instances in question:** \r\n- https://app.circleci.com/pipelines/github/localstack/localstack/11053/workflows/49684c6d-ae81-4b4e-bd26-2914d4aa377d/jobs/75793 for the new pipeline\r\n- https://app.circleci.com/pipelines/github/localstack/localstack/11061/workflows/4a0c989a-31e7-4d9d-afdc-dc31c697fd11 for the old pipeline (latest master)\r\n- **building the image**: can add quite the overhead (5-6mins in this case) when creating full image (though this could be because of the lost cache of the entire image because of concurrent pipelines in the master branch - the extra downloading which will happen more often took 1min in this example). The light/pro/community images are much quicker due to the caching structure. Saving the additional 2 images takes around 1min as well and persisting the workspace takes 2 mins longer as well.\r\n- **attaching workspace in test steps**: now takes half a minute longer due to the increased size from 1.7GB to 3.2GB\r\n- **attaching workspace in push step**: now takes 7-8 minutes longer due to the increased size from 3.4GB to 6.2GB\r\n\r\nIn total - depending on the caching behaviour in the build - the pipeline could take around 5-15 minutes longer on master builds.\r\n\r\nThis can probably be circumvented by downloading the elasticsearch dependencies in its own builder step and just copying them into the step where the version gets marked. This way we can cache the Elasticsearch dependencies in a deeper layer (before our code) and avoid downloading them almost every time.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 121,
        "deletions": 4,
        "changed_files": 4,
        "created_at": "2022-11-28T05:05:47Z",
        "closed_at": "2022-11-28T09:03:00Z",
        "merged_at": "2022-11-28T09:03:00Z",
        "body": "# \ud83d\ude80 ASF Update Report \ud83d\ude80\nThis PR has been automatically generated to update the generated API stubs for our ASF services.\nIt uses the latest code-generator from the _master_ branch ([scaffold.py](https://github.com/localstack/localstack/blob/master/localstack/aws/scaffold.py)) and the latest _published_ version of [botocore](https://github.com/boto/botocore) to re-generate all API stubs which are already present in the `localstack.aws.api` module of the _master_ branch.\n\n## \ud83d\udd04 Updated Services\nThis PR updates the following services:\n- cloudwatch\n- logs\n- route53\n- transcribe\n\n## \ud83d\udc77\ud83c\udffd Handle this PR\nThe following options describe how to interact with this PR / the auto-update:\n\n\u2714\ufe0f **Accept Changes**\nIf the changes are satisfying, just squash-merge the PR and delete the source branch.\n\n\ud83d\udeab **Ignore Changes**\nIf you want to ignore the changes in this PR, just close the PR and *do not delete* the source branch. The PR will not be opened and a new PR will not be created for as long as the generated code does not change (or the branch is deleted). As soon as there are new changes, a new PR will be created.\n\n\u270f\ufe0f **Adapt Changes**\n*Don't do this.* The APIs are auto-generated. If you decide that the APIs should look different, you have to change the code-generation.\n\n\u23f8\ufe0f **Pause Updates**\nRemove the cron-schedule trigger of the GitHub Action workflow which creates these PRs. The action can then still be triggered manually, but it will not be executed automatically.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 11,
        "changed_files": 2,
        "created_at": "2022-11-25T22:10:53Z",
        "closed_at": "2022-11-29T13:54:05Z",
        "merged_at": "2022-11-29T13:54:05Z",
        "body": "Fix https://github.com/localstack/localstack/issues/6553\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 51,
        "deletions": 28,
        "changed_files": 3,
        "created_at": "2022-11-25T12:22:03Z",
        "closed_at": "2022-11-25T15:09:40Z",
        "merged_at": "2022-11-25T15:09:40Z",
        "body": "The message id was not being emitted as part of the payload. This was required by the issue creator to link the notification with the specific email.\r\n\r\nhttps://github.com/localstack/localstack/issues/7184#issuecomment-1327213316\r\n\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 6,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2022-11-25T10:28:32Z",
        "closed_at": "2022-11-25T12:53:24Z",
        "merged_at": "2022-11-25T12:53:24Z",
        "body": "This PR fixes two small issues with the connectivity to elasticsearch:\r\n- Fixes the bind host configuration for elasticsearch instances when using the endpoint strategy `PORT`.\r\n  - Migrates a fix by @silv-io in #6638 for opensearch to elasticsearch.\r\n- Fixes a small issue with the connectivity from firehose to elasticsearch when using a strategy which does not expose an HTTPS endpoint (i.e. when using the endpoint strategy `PORT` or providing a custom endpoint).",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 136,
        "deletions": 40,
        "changed_files": 5,
        "created_at": "2022-11-25T09:05:21Z",
        "closed_at": "2022-11-30T06:26:30Z",
        "merged_at": "2022-11-30T06:26:30Z",
        "body": "### Summary\r\n\r\nThis PR fixes additional issues with DynamoDB multi-accounts implementation.\r\n\r\n1. The regex for `Credentials` field in `Authorization` header can now accept `-` and `_` characters. See https://github.com/localstack/localstack/issues/7233. We modify this header before forwarding the request to DynamoDB Local to achieve namespacing.\r\n2. Update helpers to explictly take account and region to correctly perfrom global table operations. In DynamoDB, global tables are tables that are replicated across multiple regions. In LS, instead of actually replicating the table, we modify the request context to point to the original region. This means that Boto clients must also be created with the region where the table exists, and not necessarily the region from the request.\r\n\r\n### Tests\r\n\r\nUpdate integration test to assert that the context region modification happens correctly.\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 51,
        "deletions": 16,
        "changed_files": 2,
        "created_at": "2022-11-25T08:13:03Z",
        "closed_at": "2023-01-26T22:13:04Z",
        "merged_at": "2023-01-26T22:13:04Z",
        "body": "Issue #7124\r\n\r\n\r\nhttps://docs.aws.amazon.com/step-functions/latest/dg/tutorial-api-gateway.html\r\n\r\n# Terraform samples\r\n\r\n- https://github.com/localstack/localstack-terraform-samples/tree/master/apigateway-step-functions-integration\r\n- https://github.com/localstack/localstack-terraform-samples/tree/master/apigatewayv2-step-functions-integration\r\n\r\n# Not covered\r\n\r\n- Passthrough templates, for cases where the input is not transformed via request templates (REST) or request parameters (HTTP)",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 859,
        "deletions": 1,
        "changed_files": 6,
        "created_at": "2022-11-24T15:27:47Z",
        "closed_at": "2023-03-13T18:24:33Z",
        "merged_at": "2023-03-13T18:24:33Z",
        "body": "## Summary\r\n\r\nThe new AWS API client stack with support for sending additional metadata for internal calls.\r\n\r\nWe want to gradually move all functionality and use of `aws_stack` to this and remove it.\r\n\r\n## Supported Scenarios\r\nOur new AWS client factory needs to take different scenarios of usage into account.\r\n\r\n### Scenarios\r\n\r\n#### Internal Hidden\r\nRequest which either AWS does not do, or does not document in any way. Used for LS workarounds or completely hidden calls.\r\n\r\n\u274c CloudTrail\r\n\u274c IAM Enforcement\r\n\u2714\ufe0f In Memory Possible\r\n\r\n#### Internal as Service\r\nCall of a service to another service as that service principal. Usually has a sourcearn of the resource on which behalf the request was made.\r\n\r\n\u2714\ufe0f CloudTrail\r\n\u2714\ufe0f IAM Enforcement\r\n\u2714\ufe0f In memory possible\r\n\r\n#### Internal as Role\r\nCall of a service which assumed a provided role (assumption is enforced via \u201cInternal as Service` itself) beforehand, as that role.\r\n\r\n\u2714\ufe0f CloudTrail\r\n\u2714\ufe0f IAM Enforcement\r\n\u2714\ufe0f In memory possible\r\n\r\n#### Internal as calling User\r\nAccording to @dominikschubert this is the case for some CloudFormation functionality. Basically, CloudFormation does requests on behalf of the user which created the stack.\r\n\r\n\u2714\ufe0f CloudTrail\r\n\u2714\ufe0f IAM Enforcement\r\n\u2714\ufe0f In memory possible\r\n\r\n#### External for third-party providers\r\nUsed for communication to provider backends outside of our control. For example, `dynamodblocal` or `kinesis-mock`.\r\n\r\n\u274c CloudTrail\r\n\u274c IAM Enforcement\r\n\u274c In memory possible\r\n\r\n#### External for testing\r\nUsed by testing clients to test our resources using boto3.\r\n\r\n\u2714\ufe0f CloudTrail\r\n\u2714\ufe0f IAM Enforcement\r\n\u274c In memory possible\r\n\r\n### Factories\r\nThis PR provides two subtypes of client factories.\r\n\r\n**Scenario 1-4** will be taken care of by the `InternalClientFactory`\r\n\r\n**Scenario 5-6** will be taken care of by the `ExternalClientFactory`\r\n\r\n## Sample usage\r\n\r\nCalls made from outside of LocalStack (eg. in integration tests etc.)\r\n\r\n```python3\r\nfrom localstack.aws.connect import connect_to\r\n\r\nclient = connect_to().s3\r\n\r\nclient.list_objects(BucketName='foo')\r\n```\r\n\r\nCalls made internally across services\r\n```python3\r\nfrom localstack.aws.connect import connect_to\r\n\r\nclient = connect_to().s3\r\n\r\nclient.publish(\r\n  TopicArn='arn:aws:sns:ap-south-1:000000000000:lorem', \\\r\n  Message='blah', \\\r\n  _ServicePrincipal='s3',\r\n)\r\n```\r\n\r\n#### Performance\r\n\r\nNew client clocks faster for equivalent `aws_stack` functionality:\r\n\r\n```plaintext\r\n$ AWS_ACCESS_KEY_ID=test AWS_SECRET_ACCESS_KEY=test AWS_DEFAULT_REGION=us-east-1 ipython\r\nPython 3.10.8 (main, Nov 10 2022, 18:37:57) [GCC 12.2.0]\r\nType 'copyright', 'credits' or 'license' for more information\r\nIPython 8.11.0 -- An enhanced Interactive Python. Type '?' for help.\r\n\r\nIn [1]: from localstack.aws.connect import connect_to, connect_externally_to\r\n   ...:\r\n   ...: def test():\r\n   ...:     c = connect_to(region_name='eu-central-1').ec2\r\n   ...:     d = connect_to(region_name='eu-central-1').ec2\r\n   ...:     e = connect_to(region_name='ap-south-1').ec2\r\n   ...:     f = connect_to(region_name='ap-south-1').ec2\r\n   ...:     i = connect_externally_to(region_name=None, aws_access_key_id=None, aws_secret_access_key=None).dynamodb\r\n   ...:     j = connect_externally_to(region_name=None, aws_access_key_id=None, aws_secret_access_key=None).dynamodb\r\n   ...:     k = connect_externally_to(region_name='ap-south-1', aws_access_key_id='test', aws_secret_access_key='test').dynamodb\r\n   ...: %timeit test()\r\n   ...:\r\n38.8 \u00b5s \u00b1 225 ns per loop (mean \u00b1 std. dev. of 7 runs, 10,000 loops each)\r\n\r\nIn [2]: from localstack.utils.aws.aws_stack import connect_to_service, create_external_boto_client\r\n   ...: def test_old():\r\n   ...:     c = connect_to_service('ec2')\r\n   ...:     d = connect_to_service('ec2')\r\n   ...:     e = connect_to_service('ec2', region_name='ap-south-1')\r\n   ...:     f = connect_to_service('ec2', region_name='ap-south-1')\r\n   ...:     i = create_external_boto_client('dynamodb')\r\n   ...:     j = create_external_boto_client('dynamodb')\r\n   ...:     k = create_external_boto_client('dynamodb', region_name='ap-south-1', aws_access_key_id='test', aws_secret_access_key='test')\r\n   ...: %timeit test_old()\r\n   ...:\r\n58.2 \u00b5s \u00b1 251 ns per loop (mean \u00b1 std. dev. of 7 runs, 10,000 loops each)\r\n```\r\n\r\n#### Other notes\r\n\r\nCreated by a mob programming session by @alexrashed @dominikschubert @simonrw @thrau @viren-nadkarni @dfangl \r\n\r\nSample use in DynamoDB: https://github.com/localstack/localstack/compare/aws-client...aws-client-dynamodb\r\n\r\n### Tests\r\n\r\nUnit tested, against a fake Gateway with the real handlers.\r\nThe unit tests aim to test the above mentioned scenarios, even though there is some duplication.\r\nSome of the unit tests will in the next iteration be used to check some \"convenience utilities\", like creating a client directly for a to-be-assumed role, etc.\r\n\r\nPotential future use for test clients:\r\n```python\r\n# this is only a demonstration how a fixture could look like, and that the approach matches our requirements\r\nclass TestFactoryTestUsage:\r\n    @pytest.fixture(scope=\"module\")\r\n    def test_client_factory(self):\r\n        return ExternalClientFactory()\r\n\r\n    @pytest.fixture(scope=\"class\")\r\n    def clients(self, test_client_factory):\r\n        \"\"\"Clients fixture which will allow all kind of clients to be initialized\"\"\"\r\n        botocore_config = botocore.config.Config()\r\n\r\n        # can't set the timeouts to 0 like in the AWS CLI because the underlying http client requires values > 0\r\n        if os.environ.get(\"TEST_DISABLE_RETRIES_AND_TIMEOUTS\"):\r\n            botocore_config = botocore_config.merge(\r\n                botocore.config.Config(\r\n                    connect_timeout=1_000, read_timeout=1_000, retries={\"total_max_attempts\": 1}\r\n                )\r\n            )\r\n\r\n        if os.environ.get(\"TEST_TARGET\") == \"AWS_CLOUD\":\r\n            return test_client_factory(config=botocore_config)\r\n\r\n        return test_client_factory(\r\n            region_name=\"us-east-1\",\r\n            aws_access_key_id=\"test\",\r\n            aws_secret_access_key=\"test\",\r\n            endpoint_url=config.get_edge_url(),\r\n            config=botocore_config,\r\n        )\r\n\r\n    @pytest.mark.skip\r\n    def test_something_with_boto_clients(self, clients):\r\n        functions = clients.awslambda.list_functions()\r\n        print(functions)\r\n```\r\n\r\n## Future work\r\n* Add convenience method for assume a role and creating a client directly\r\n* Add convenience method proxy for type-safe adding of SourceArn and SourcePrincipal",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 1106,
        "deletions": 1148,
        "changed_files": 80,
        "created_at": "2022-11-24T07:58:52Z",
        "closed_at": "2022-11-25T17:57:55Z",
        "merged_at": "2022-11-25T17:57:55Z",
        "body": "Preliminary cleanup of `aws_stack.py` to split up the file. Will avoid some headaches later when we work on this in parallel.\r\n\r\n\r\n- move arn utils to separate file\r\n- remove unnecessary utils and replace with more idiomatic versions",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 21,
        "deletions": 4,
        "changed_files": 2,
        "created_at": "2022-11-23T16:57:06Z",
        "closed_at": "2022-11-24T08:04:17Z",
        "merged_at": "2022-11-24T08:04:17Z",
        "body": "When creating an OpenSearch domain in a different region than the default one, the startup monitor failed (since it selected the wrong store, and in turn did not find the domain to change the status for). As a result, the `Processing` status is never set to `false` (indicating that the domain creation was successful / has finished).\r\n\r\nThis PR addresses this issue by:\r\n- Explicitly setting the region when using `OpensearchProvider.get_store` outside of a request-scoped thread (i.e. the startup monitor thread).\r\n- Raising an `AssertionError` in case `OpensearchProvider.get_store` does not get an explicit region nor is run in a request-scoped thread (i.e. `get_region_from_request_context` returns `None`).",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-11-23T11:22:06Z",
        "closed_at": "2022-11-23T15:20:58Z",
        "merged_at": "2022-11-23T15:20:58Z",
        "body": "Attempts to fix a flaky test by increasing timeouts.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 241,
        "deletions": 51,
        "changed_files": 3,
        "created_at": "2022-11-23T11:14:19Z",
        "closed_at": "2022-11-23T15:25:45Z",
        "merged_at": "2022-11-23T15:25:45Z",
        "body": "Addresses #7209\r\n\r\n## Motivation\r\nLambda recently added support for nodejs18.x runtime: https://aws.amazon.com/blogs/compute/node-js-18-x-runtime-now-available-in-aws-lambda/\r\n\r\n## Changes\r\n* Add support for nodejs18.x runtime\r\n* Add tests for nodejs18.x runtime\r\n* Update snapshots\r\n* Update images for nodejs14.x and nodejs16.x to achieve parity with recent lambda env changes (AWS updated the images on their side as well - see new line numbers in error handling snapshot)",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2022-11-23T08:36:07Z",
        "closed_at": "2022-11-23T11:25:39Z",
        "merged_at": "2022-11-23T11:25:39Z",
        "body": "The issue was initially observed when the access token expired: https://github.com/localstack/localstack/actions/runs/3530759350/jobs/5923109632#step:3:70",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 663,
        "deletions": 45,
        "changed_files": 9,
        "created_at": "2022-11-23T06:55:24Z",
        "closed_at": "2022-11-23T12:44:12Z",
        "merged_at": "2022-11-23T12:44:12Z",
        "body": "This will still need a lot of work after the initial release but should for now have parity with the existing implementation in the old non-ASF provider.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 159,
        "deletions": 67,
        "changed_files": 10,
        "created_at": "2022-11-23T05:16:39Z",
        "closed_at": "2022-12-08T13:15:20Z",
        "merged_at": "2022-12-08T13:15:20Z",
        "body": "### Summary\r\n\r\nThis PR implements multi-accounts support for Kinesis.\r\n\r\nThe Kinesis provider uses an external application -- Kinesis Mock. Calls are forwarded to Kinesis mock.\r\n\r\nMulti-accounts has been implemented by starting a new instance for each account ID. Kinesis Mock natively supports multi-regions so each instance caters to a single AWS account for all regions.\r\n\r\n### Tests\r\n\r\nAdded integration test which attempts to create streams with same name in different regions and different accounts.\r\n\r\n### Related\r\n\r\nCloses: https://github.com/localstack/localstack/issues/7203",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 33,
        "deletions": 11,
        "changed_files": 2,
        "created_at": "2022-11-22T23:58:55Z",
        "closed_at": "2022-11-28T14:49:44Z",
        "merged_at": "2022-11-28T14:49:43Z",
        "body": "Proper management of SES resources require deletion of AWS resources. Deletion of configuration sets and configuration set event destinations were not supported by localstack.\n\n*Note: these resources are not implemented in `moto` either, so we have to implement the logic in request handlers. We manipulate the `moto` state within the handlers since `moto` does not do it for us \ud83d\ude02*\n\nThese changes are well tested as part of #7207 and that PR must be merged first.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 524,
        "deletions": 26,
        "changed_files": 4,
        "created_at": "2022-11-22T23:48:35Z",
        "closed_at": "2022-11-28T16:18:22Z",
        "merged_at": "2022-11-28T16:18:22Z",
        "body": "In the previous PR (#7207), integration with SNS was implemented. There are two other methods:\n\n* `SendTemplatedEmail` and\n* `SendRawEmail`.\n\nThese should also emit SNS messages.\n\nIn addition, before this PR configuration sets and configuration set event destinations were shared global state, and as such caused test failures. We implement\n\n* `CreateConfigurationSetEventDestination`\n* `DeleteConfigurationSet`\n* `DeleteConfigurationSetEventDestination`\n\nto remove this restriction.\n\n**PR #7229 must be merged first**",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 167,
        "deletions": 147,
        "changed_files": 5,
        "created_at": "2022-11-22T22:25:19Z",
        "closed_at": "2022-12-24T13:24:56Z",
        "merged_at": "2022-12-24T13:24:56Z",
        "body": "This PR tackles the escape javascript function used on VTL templates by not \"double\" encoding strings.\r\nI also converted a new test to be AWS-validated.\r\nFor example,\r\n\r\n```\r\n#set( $body = $input.json(\"$\") )\r\n#define( $loop )\r\n{\r\n    #foreach($e in $map.keySet())\r\n       #set( $k = $e )\r\n       #set( $v = $map.get($k))\r\n       // previously $k and $v weren't wrapped on double-quotes, because of the bug, however it's required (validated on AWS)\r\n       \"$k\": \"$v\"\r\n       #if( $foreach.hasNext ) , #end\r\n    #end\r\n}\r\n```\r\n\r\nor issues like \r\n\r\n```\r\n\"\"proxy\"\":\r\n\"\"test\"\"\r\n```\r\nIt also organises the step functions integration tests using parameters to ensure APIs are deployed between changes. The previous tests was not working on AWS since an update to REST APIs needed to be deployed.\r\n\r\n\r\nResolves https://github.com/localstack/localstack/issues/7188",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 352,
        "deletions": 21,
        "changed_files": 6,
        "created_at": "2022-11-22T22:22:32Z",
        "closed_at": "2022-11-23T10:27:30Z",
        "merged_at": "2022-11-23T10:27:30Z",
        "body": "Mostly C&P of existing code with the intention of decoupling it from the legacy provider since going forward changes should be focused on the ASF provider anyway and some of the mapping concepts don't apply anymore. \r\n\r\nAlso:\r\n- Now supports a correct response for unhandled exceptions and added a corresponding test.\r\n- Added a router class that follows the design of  the router for the apigateway ASF provider.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-11-22T21:50:38Z",
        "closed_at": "2022-11-29T13:00:19Z",
        "merged_at": "2022-11-29T13:00:19Z",
        "body": "See https://github.com/etspaceman/kinesis-mock/releases/tag/0.2.6\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 473,
        "deletions": 386,
        "changed_files": 5,
        "created_at": "2022-11-22T18:16:13Z",
        "closed_at": "2022-12-07T16:36:40Z",
        "merged_at": "2022-12-07T16:36:40Z",
        "body": "## Motivation\r\nOur partition rewrite listener, which was still implemented as ProxyListener in the old request handling framework, was more or less ineffective, as it would only work for services still being implemented in this framework.\r\nTo be able to use it properly again, and to get rid of this old framework at some point, a migration to a Handler is necessary.\r\n\r\n## Changes\r\n* Instead of a request and a response listener, the partition handler is now implemented as Handler\r\n* The handler will proxy all requests back to the handler chain with requests being rewritten before / responses being rewritten afterwards. This allows us to have no impact on the rest of the chain, by not modifying werkzeug's requests objects.\r\n* Tests are rewritten to make use of Request / Response objects\r\n* Arn's without a region field (e.g. IAM) will be rewritten on response based on the region header set in the request. If it is not set, fallbacks as usual will commence.\r\n* Changes in the handler are mostly `__call__`, `modify_request`, `modify_response`. All other changes are only for using the request region for arns without region.\r\n\r\n## Limitations\r\n* Streaming: Won't work for now. Maybe we can for now not proxy any streaming requests? Can confirm this kinesis subscription to shards is broken.\r\n* Cross partition error handling: While cross partition requests are not allowed, we currently will not enforce anything like this.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 34,
        "deletions": 7,
        "changed_files": 3,
        "created_at": "2022-11-22T15:19:49Z",
        "closed_at": "2022-11-25T08:10:24Z",
        "merged_at": "2022-11-25T08:10:24Z",
        "body": "This PR fixes the API id lookup by ignoring case sensitivity.\r\n\r\nThe issue reported above manifestastes because our router match transforms the API id into lowercase, which would fail when compared with the string used on the `_custom_id_` tag.\r\n\r\nResolves https://github.com/localstack/localstack/issues/7160\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2022-11-22T13:45:07Z",
        "closed_at": "2022-11-22T20:09:54Z",
        "merged_at": "2022-11-22T20:09:54Z",
        "body": "We are currently pinning requests < 2.26, because lambda tests failed over 1 year ago.\r\nThis PR tries to remove this pin to check test failures.\r\n\r\nCircleCI will probably not pick up the changes immediately due to the -ext pin, though.\r\n\r\nFixes #7078",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-11-21T14:25:03Z",
        "closed_at": "2022-11-21T22:04:17Z",
        "merged_at": "2022-11-21T22:04:17Z",
        "body": null,
        "comments": 2
    },
    {
        "merged": true,
        "additions": 60,
        "deletions": 24,
        "changed_files": 2,
        "created_at": "2022-11-21T11:51:28Z",
        "closed_at": "2022-11-21T16:27:00Z",
        "merged_at": "2022-11-21T16:27:00Z",
        "body": "This PR adds SQS fixtures for receiving both a) _some_ messages, and b) a specific number of messages.\r\n\r\nThese features will support an [upcoming PR](https://github.com/localstack/localstack/pull/7207) which adds SES -> SNS integration, using an SQS queue to verify that the messages have been sent.\r\n\r\nSee #7184 ",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 162,
        "deletions": 1,
        "changed_files": 8,
        "created_at": "2022-11-21T05:06:01Z",
        "closed_at": "2022-11-21T07:52:26Z",
        "merged_at": "2022-11-21T07:52:26Z",
        "body": "# \ud83d\ude80 ASF Update Report \ud83d\ude80\nThis PR has been automatically generated to update the generated API stubs for our ASF services.\nIt uses the latest code-generator from the _master_ branch ([scaffold.py](https://github.com/localstack/localstack/blob/master/localstack/aws/scaffold.py)) and the latest _published_ version of [botocore](https://github.com/boto/botocore) to re-generate all API stubs which are already present in the `localstack.aws.api` module of the _master_ branch.\n\n## \ud83d\udd04 Updated Services\nThis PR updates the following services:\n- cloudformation\n- ec2\n- lambda-\n- route53\n- s3\n- s3control\n- ssm\n- stepfunctions\n\n## \ud83d\udc77\ud83c\udffd Handle this PR\nThe following options describe how to interact with this PR / the auto-update:\n\n\u2714\ufe0f **Accept Changes**\nIf the changes are satisfying, just squash-merge the PR and delete the source branch.\n\n\ud83d\udeab **Ignore Changes**\nIf you want to ignore the changes in this PR, just close the PR and *do not delete* the source branch. The PR will not be opened and a new PR will not be created for as long as the generated code does not change (or the branch is deleted). As soon as there are new changes, a new PR will be created.\n\n\u270f\ufe0f **Adapt Changes**\n*Don't do this.* The APIs are auto-generated. If you decide that the APIs should look different, you have to change the code-generation.\n\n\u23f8\ufe0f **Pause Updates**\nRemove the cron-schedule trigger of the GitHub Action workflow which creates these PRs. The action can then still be triggered manually, but it will not be executed automatically.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2022-11-21T00:36:28Z",
        "closed_at": "2022-11-21T07:52:07Z",
        "merged_at": "2022-11-21T07:52:07Z",
        "body": "[![Mend Renovate](https://app.renovatebot.com/images/banner.svg)](https://renovatebot.com)\n\nThis PR contains the following updates:\n\n| Package | Type | Update | Change |\n|---|---|---|---|\n| python | final | digest | `c2b2fbf` -> `95f2dd6` |\n| python | stage | digest | `c2b2fbf` -> `95f2dd6` |\n\n---\n\n### Configuration\n\n\ud83d\udcc5 **Schedule**: Branch creation - \"before 3am on Monday\" (UTC), Automerge - At any time (no schedule defined).\n\n\ud83d\udea6 **Automerge**: Disabled by config. Please merge this manually once you are satisfied.\n\n\u267b **Rebasing**: Whenever PR becomes conflicted, or you tick the rebase/retry checkbox.\n\n\ud83d\udd15 **Ignore**: Close this PR and you won't be reminded about these updates again.\n\n---\n\n - [ ] <!-- rebase-check -->If you want to rebase/retry this PR, check this box\n\n---\n\nThis PR has been generated by [Mend Renovate](https://www.mend.io/free-developer-tools/renovate/). View repository job log [here](https://app.renovatebot.com/dashboard#github/localstack/localstack).\n<!--renovate-debug:eyJjcmVhdGVkSW5WZXIiOiIzNC4yOC4wIiwidXBkYXRlZEluVmVyIjoiMzQuMjguMCJ9-->\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 466,
        "deletions": 2,
        "changed_files": 4,
        "created_at": "2022-11-18T15:26:08Z",
        "closed_at": "2022-11-23T16:14:02Z",
        "merged_at": "2022-11-23T16:14:02Z",
        "body": "Configure SES to emit SNS messages when configured. This is supported in AWS but not currently implemented in Localstack.\n\nThis PR builds on #7214.\n\nNote: support for other `Send*Email` methods follows in PRs:\n\n* #7229\n* #7228\n\n#7184",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 2225,
        "deletions": 91,
        "changed_files": 9,
        "created_at": "2022-11-18T10:37:22Z",
        "closed_at": "2022-11-23T15:55:03Z",
        "merged_at": "2022-11-23T15:55:03Z",
        "body": "Adds basic CRUD support for lambda layers into the community offering.\r\n\r\nThis is only a superficial CRUD-based simulation, i.e. the code won't actually be mounted into the lambda. (This feature is reserved for LocalStack PRO.)\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 21,
        "deletions": 5,
        "changed_files": 2,
        "created_at": "2022-11-18T07:42:20Z",
        "closed_at": "2022-11-18T08:59:25Z",
        "merged_at": "2022-11-18T08:59:25Z",
        "body": "Currently, the new 1.3 release branch is not recognized by the rebase workflow.\r\nThis PR changes the workflow such that it considers branches with a `release/` prefix as release branches and:\r\n- Rebases the release branch for each commit on the master.\r\n- Rebases branches targeting the release branch for each commit on the release branch.\r\n\r\nUnfortunately, [peter-evans/rebase](https://github.com/peter-evans/rebase) does not accept wildcards in the `head` param (you can only set wildcards for \"sections\", i.e. act across all orgs or all refs, but not filter within the refs).\r\nThis is why we build a simple matrix workflow where each release branch is one matrix param value.\r\nThe release branches are detected using [github-script](https://github.com/actions/github-script).",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 537,
        "deletions": 1868,
        "changed_files": 40,
        "created_at": "2022-11-17T12:05:41Z",
        "closed_at": "2022-11-30T13:10:55Z",
        "merged_at": "2022-11-30T13:10:55Z",
        "body": "This PR prepares LocalStack for the upcoming minor release (`v1.3`).\r\n\r\nIt will contain the following changes:\r\n- Add a simple way of logging deprecation warnings if deprecated features and variables are used.\r\n- Removal of code which has been deprecated for quite some time (and is finally removed with 1.3).\r\n- Feature-flag switches for features which are enabled by default with 1.3.\r\n\r\nThis PR supersedes https://github.com/localstack/localstack/pull/7187 (since we introduced the `release/` branch prefix to simplify the rebase action).",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 35,
        "deletions": 2,
        "changed_files": 3,
        "created_at": "2022-11-17T02:17:25Z",
        "closed_at": "2022-11-17T18:34:22Z",
        "merged_at": "2022-11-17T18:34:22Z",
        "body": "The dynamic reference for a secret in the SecretsManager includes an optional json-key, version-stage and version-id at the end of the ARN. This changes fixes parsing those optional parts to not raise a ValueError when unpacking missing values.\r\n\r\nFixes #7192 ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2022-11-16T10:53:57Z",
        "closed_at": "2022-11-17T18:46:47Z",
        "merged_at": "2022-11-17T18:46:47Z",
        "body": "Add `java.security.*` modules to JRE - these modules are required to run certain components like Spark/Hadoop inside the main container.\r\n\r\nThis change adds apprx. ~8-10MB (uncompressed) to the image. Build before (1711803587 bytes): \r\n```\r\nlocalstack/localstack                                                   latest                                                                       ab65bfe50469   5 minutes ago       1.71GB\r\n```\r\nBuild after (1719584564 bytes):\r\n```\r\nREPOSITORY                                                                   TAG                                                                          IMAGE ID       CREATED          SIZE\r\nlocalstack/localstack                                                   latest                                                                       d3e918e5c44d   59 minutes ago   1.72GB\r\n```",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 230,
        "deletions": 1629,
        "changed_files": 23,
        "created_at": "2022-11-16T09:44:04Z",
        "closed_at": "2022-11-17T11:59:28Z",
        "merged_at": null,
        "body": "This PR prepares LocalStack for the upcoming minor release (`v1.3`).\r\n\r\nIt will contain the following changes:\r\n- Add a simple way of logging deprecation warnings if deprecated features and variables are used.\r\n- Removal of code which has been deprecated for quite some time (and is finally removed with 1.3).\r\n- Feature-flag switches for features which are enabled by default with 1.3.\r\n\r\nEdit: This PR has been superseded by #7197 (since we introduced the `release/` branch prefix to simplify the rebase action).",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 556,
        "deletions": 3,
        "changed_files": 5,
        "created_at": "2022-11-15T19:32:57Z",
        "closed_at": "2022-12-02T07:06:15Z",
        "merged_at": "2022-12-02T07:06:15Z",
        "body": "- [x] test basic update\r\n- [x] test update using template url\r\n- [x] test update with previous template\r\n- [x] test update with capabilities\r\n- [x] test update with resource types\r\n- [x] test set notification arn with update\r\n- [x] test update tags\r\n- [x] test no template error\r\n- [x] test no parameters update\r\n- [x] test update with previous parameter value\r\n- [x] test update with role without permissions\r\n- [x] test update with invalid rollback configuration errors\r\n- [x] test update with rollback configuration",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 408,
        "deletions": 4,
        "changed_files": 7,
        "created_at": "2022-11-15T17:10:48Z",
        "closed_at": "2022-11-17T18:18:44Z",
        "merged_at": "2022-11-17T18:18:44Z",
        "body": "This PR addresses issue #7131 by sending SQS metrics to cloudwatch.\r\nThe metrics are defined in the [AWS docs](https://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/sqs-available-cloudwatch-metrics.html).\r\n\r\nLimitations:\r\n* `ApproximateAgeOfOldestMessage` is currently not considered\r\n* Other `Approximate[...]` metrics are scheduled to be send every minute (on AWS the timeframe might be longer, but for LocalStack it probably makes sense to make the metrics available sooner)\r\n\r\n\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 95,
        "deletions": 3,
        "changed_files": 3,
        "created_at": "2022-11-15T15:06:51Z",
        "closed_at": "2022-11-18T09:09:33Z",
        "merged_at": "2022-11-18T09:09:33Z",
        "body": "This PR fixes a regression introduced in #6938 and reported by many users in #7109, the validation of SNS message attributes data types was a bit too strict. A user (@rafaelpontezup, thanks again for the pointer!) in the reported issue made a very good summary of the issue:\r\n\r\n> The interesting thing is that SQS supports optional custom data type labels with the format .custom-data-type. [Its documentation says](https://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/sqs-message-metadata.html#sqs-message-attributes):\r\n> Custom \u2013 To create a custom data type, append a custom-type label to any data type. For example:\r\n> Number.byte, Number.short, Number.int, and Number.float can help distinguish between number types.\r\nBinary.gif and Binary.png can help distinguish between file types.\r\nBut [SNS documentation says nothing about that](https://docs.aws.amazon.com/sns/latest/dg/sns-message-attributes.html). Although AWS SNS does not shows this issue, I guess it simply ignores those custom data type labels, I think the Localstack is following the spec correctly.\r\n> Looking at the code of Spring Cloud Message 2.4.2 it seems like the it is adding those custom data type labels for both SQS and SNS, but the later does not support them by spec.\r\n\r\nI've introduced a test to support the case of correctly prefixed data types, and reused the same logic as SQS to validate the correctly prefixed data types. \r\n\r\n_fix #7109_",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 241,
        "deletions": 4,
        "changed_files": 4,
        "created_at": "2022-11-15T13:19:39Z",
        "closed_at": "2022-11-15T16:50:23Z",
        "merged_at": "2022-11-15T16:50:22Z",
        "body": "## Motivation\r\nImplementing lambda timeouts, to achieve parity with AWS behavior.\r\nThis implementation only affects the new, ASF - based lambda provider.\r\n\r\n## Changes\r\n* Added test making assertions about the execution environment and infrastructure after a timeout\r\n* Update aws lambda init binary to 0.1.6-pre.\r\n\r\nMost actual changes for this functionality happened in https://github.com/localstack/lambda-runtime-init/pull/6 .",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 150,
        "deletions": 69,
        "changed_files": 4,
        "created_at": "2022-11-15T09:53:39Z",
        "closed_at": "2022-11-15T15:33:43Z",
        "merged_at": "2022-11-15T15:33:43Z",
        "body": "This PR adds two new versions to the OpenSearch and ElasticSearch service:\r\n- `OpenSearch_1.2` (added in [April](https://aws.amazon.com/about-aws/whats-new/2022/04/amazon-opensearch-supports-version-1-2/))\r\n- `OpenSearch_1.3` (added in [July](https://aws.amazon.com/about-aws/whats-new/2022/07/amazon-opensearch-service-supports-version-1-3/))\r\n\r\nThis PR also changes the default version of OpenSearch to 1.3 (since it is already the default version when creating a new domain in AWS without specifying any version).",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 12,
        "deletions": 4,
        "changed_files": 2,
        "created_at": "2022-11-15T01:26:54Z",
        "closed_at": "2022-11-15T09:25:07Z",
        "merged_at": "2022-11-15T09:25:07Z",
        "body": "This is a follow-up from #7174 and #7123 . Unfortunately, one control path (if `clean_db_path=False` is passed explicitly) was still not being considered properly, leading to cloud pods testing issues upstream. This should be fixed in this PR now - also added a docstring to clarify the parameters for the `create_dynamodb_server(..)` function.",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 61,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2022-11-14T18:12:37Z",
        "closed_at": "2022-11-15T20:03:05Z",
        "merged_at": "2022-11-15T20:03:05Z",
        "body": "Use `exec` passing in the globals from the interpreter rather than the globals from the function.\n\nThis fixes the issue with running a python init script that access a global variable. In essence, calling `exec` inside a class method evaluates that code from the context of that class, rather than the interpreter. \"Global\" variables in the users' script are stored in `locals()` when run from inside a function (as per in `PythonScriptRunner.run`) rather than in `globals()`. This means that when the variable is accessed inside the users' function, it is looked up from the `locals()` store rather than the `globals()` and is therefore not found.\n\nSee #7135",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 6,
        "deletions": 6,
        "changed_files": 1,
        "created_at": "2022-11-14T15:26:59Z",
        "closed_at": "2022-11-14T17:00:42Z",
        "merged_at": "2022-11-14T17:00:42Z",
        "body": "Following up on the discussion in https://github.com/localstack/localstack/pull/7123. Went on with option 1 since pods always fetch from a well-known directory (we do not have to implement the logic for random assets dir).\r\n\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 30,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2022-11-14T15:06:59Z",
        "closed_at": "2022-11-17T09:58:34Z",
        "merged_at": "2022-11-17T09:58:34Z",
        "body": "This PR adds a new parallel step to our CircleCI workflow to test the S3 ASF provider on every build.\r\nIt depends on https://github.com/localstack/localstack/pull/7081 (fixes the remaining tests for the new S3 ASF provider).\r\nIt should be reverted once the new S3 provider is default (such that the legacy provider is tested).\r\nFinally, the tests should be removed when the legacy providers are removed.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 448,
        "deletions": 2,
        "changed_files": 6,
        "created_at": "2022-11-14T05:08:16Z",
        "closed_at": "2022-11-14T07:50:42Z",
        "merged_at": "2022-11-14T07:50:42Z",
        "body": "# \ud83d\ude80 ASF Update Report \ud83d\ude80\nThis PR has been automatically generated to update the generated API stubs for our ASF services.\nIt uses the latest code-generator from the _master_ branch ([scaffold.py](https://github.com/localstack/localstack/blob/master/localstack/aws/scaffold.py)) and the latest _published_ version of [botocore](https://github.com/boto/botocore) to re-generate all API stubs which are already present in the `localstack.aws.api` module of the _master_ branch.\n\n## \ud83d\udd04 Updated Services\nThis PR updates the following services:\n- acm\n- ec2\n- es\n- opensearch\n- route53\n- ssm\n\n## \ud83d\udc77\ud83c\udffd Handle this PR\nThe following options describe how to interact with this PR / the auto-update:\n\n\u2714\ufe0f **Accept Changes**\nIf the changes are satisfying, just squash-merge the PR and delete the source branch.\n\n\ud83d\udeab **Ignore Changes**\nIf you want to ignore the changes in this PR, just close the PR and *do not delete* the source branch. The PR will not be opened and a new PR will not be created for as long as the generated code does not change (or the branch is deleted). As soon as there are new changes, a new PR will be created.\n\n\u270f\ufe0f **Adapt Changes**\n*Don't do this.* The APIs are auto-generated. If you decide that the APIs should look different, you have to change the code-generation.\n\n\u23f8\ufe0f **Pause Updates**\nRemove the cron-schedule trigger of the GitHub Action workflow which creates these PRs. The action can then still be triggered manually, but it will not be executed automatically.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 73,
        "deletions": 22,
        "changed_files": 4,
        "created_at": "2022-11-12T10:13:21Z",
        "closed_at": "2022-11-16T12:47:30Z",
        "merged_at": "2022-11-16T12:47:30Z",
        "body": "Fix https://github.com/localstack/localstack/issues/7147\r\n",
        "comments": 8
    },
    {
        "merged": true,
        "additions": 74,
        "deletions": 0,
        "changed_files": 3,
        "created_at": "2022-11-11T15:24:21Z",
        "closed_at": "2022-11-29T17:57:09Z",
        "merged_at": "2022-11-29T17:57:09Z",
        "body": "This PR relates to an [upstream PR in moto](https://github.com/spulec/moto/pull/5658). The PR in moto fixes issue #7154, and adds support for using `values` lists for `put-metric-data`.\r\n* adds snapshot test to verify parity with AWS\r\n* fix small parity issue, by removing empty `ExtendedStatistics` from moto-result if it is empty\r\n  \r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 930,
        "deletions": 524,
        "changed_files": 44,
        "created_at": "2022-11-11T10:55:02Z",
        "closed_at": "2022-11-29T21:29:58Z",
        "merged_at": "2022-11-29T21:29:58Z",
        "body": "When this PR is green the new provider can be assumed to cover the same features as the old one for all community features.\r\n\r\nNote: The changes to the CI will be reverted and moved into #6724 . They are just needed to execute *all* tests in the context of the new ASF provider instead of just selected ones like we currently do in master. => circle CI config does not need to be reviewed\r\n\r\nList of fixed tests\r\n\r\n- [x] Fix test_terraform.py\r\n- [x] Fix `test_secretsmanager.py::TestSecretsManager::test_rotate_secret_with_lambda_1` ==> skipped for now since they need a rework\r\n- [x] Fix `test_secretsmanager.py::TestSecretsManager::test_rotate_secret_with_lambda_2` ==> skipped for now since they need a rework\r\n- [x] Fix `tests/integration/test_stepfunctions.py::test_aws_sdk_task`\r\n- [x] Fix `test_apigateway.py::TestAPIGateway::test_api_gateway_lambda_proxy_integration_any_method_with_path_param`\r\n- [x] Fix `test_apigateway.py::TestAPIGateway::test_apigateway_with_lambda_integration`\r\n- [x] Fix `test_apigateway.py::TestAPIGateway::test_apigateway_with_custom_authorization_method`\r\n- [x] Fix `test_apigateway.py::TestAPIGateway::test_step_function_integrations`\r\n- [x] Fix `test_events.py::TestEvents::test_put_events_with_target_lambda`\r\n- [x] Fix `test_logs.py::TestCloudWatchLogs::test_put_subscription_filter_lambda`\r\n- [x] Fix `test_lambda_common.py::TestLambdaRuntimesCommon` (java, dotnet, go, provided rust) ==> fixed by pre-building before running the tests\r\n- [x] Fix `test_serverless.py::TestServerless::test_dynamodb_stream_handler_deployed`\r\n- [x] Fix `test_serverless.py::TestServerless::test_kinesis_stream_handler_deployed`\r\n- [x] Fix `test_serverless.py::TestServerless::test_queue_handler_deployed`\r\n- [x] Fix `test_sam.py::test_sam_template`\r\n- [x] Fix `test_security.py::TestCSRF::test_disable_cors_checks`\r\n- [x] Fix `test_lambda_legacy.py`\r\n- [x] Fix `test_lambda_whitebox.py`\r\n- [x] Fix `test_stepfunctions.py::test_nested_statemachine_with_sync2`\r\n- [x] Fix `test_docker.py::TestDockerClient` ==> failing in the following constellation: docker socket available but docker client is not available\r\n- [x] Fix `test_lambda_destinations.py::TestLambdaDLQ::test_dead_letter_queue`\r\n- [x] Fix `test_dynamodb.py::TestDynamoDB::test_dynamodb_stream_to_lambda`\r\n- [x] Add wait for active state at every location `testutil.create_lambda_function` is used\r\n\r\n\r\nOther non-test-fix changes:\r\n\r\n- [x] Makes version manager lookup more robust\r\n- [x] `AWS::Lambda::Function` waits for the function to be active before finishing the create\r\n- [x] Remove python3.6 runtime usage\r\n- [x] Added support for the `aws-sdk` generic stepfunctions task with the new Lambda provider.\r\n- [x] Changed default lambda image repository to ECR public (since it has ARM support)\r\n\r\nTo be done in a follow-up:\r\n- [ ] Running lambda tests on ARM instances ( => ignore the current failing tests on circleci in the docker-test-arm64 job)\r\n",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 5,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2022-11-11T10:23:09Z",
        "closed_at": "2022-11-11T12:41:35Z",
        "merged_at": null,
        "body": "Directories created during initialization have to strict permissions. So I moved the existing call of chmod after the initialization.\r\n\r\nFixes #7163 ",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 973,
        "deletions": 0,
        "changed_files": 6,
        "created_at": "2022-11-10T15:01:04Z",
        "closed_at": "2022-11-28T13:36:36Z",
        "merged_at": "2022-11-28T13:36:36Z",
        "body": "This PR adds the next tests:\r\n\r\n- [x] Test Stack policy lifecycle\r\n- [x] Test setting of policy using a lambda URL\r\n- [x] Test Set invalid policy with URL\r\n- [x] Test set empty policy with url\r\n- [x] Test Set invalid policy with different principal attribute\r\n- [x] Test Set invalid policy with different action attribute\r\n- [x] Test setting operation with both the body of a policy and a policy URL\r\n- [x] test setting an empty policy body\r\n- [x] test setting an empty policy URL\r\n- [x] Test prevent update with a stack policy\r\n- [x] Test prevent a resource replacement\r\n- [x] Test prevent a resource deletion with a stack policy using conditions\r\n- [x] Test prevent a resource modification with a stack policy using the logic resource id\r\n- [x] Test update operation with a stack policy that allows it\r\n- [x] Test to validate behavior when setting different overlapping statements in policy\r\n- [x] Test to validate creating a stack with a stack policy\r\n- [x] Test to validate updating a stack with a stack policy (also asserts the behavior during update)\r\n- [x] Test to validate the behavior of a stack update with the  \"StackPolicyDuringUpdate\" parameters \r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 204,
        "deletions": 89,
        "changed_files": 4,
        "created_at": "2022-11-10T07:31:48Z",
        "closed_at": "2022-11-21T09:39:16Z",
        "merged_at": "2022-11-21T09:39:16Z",
        "body": "### Summary\r\nThis PR implements multi-accounts and multi-region for DynamoDB.\r\n\r\nDynamoDB depends on an external application -- DynamoDBLocal. Requests are forwarded to the DDBLocal instance, which has built-in support for AWS API. \r\n\r\nDDBLocal supports namespacing based on the value of `Credential` field in `Authorization` header. This is an undocumented feature. To achieve namespacing, we use a concatenation of account ID and region for this field before the request is forwarded to DDBLocal.\r\n\r\nFurthermore, there are fixes to KMS and Kinesis integration. These are changed to use account ID and region from ARN instead of thread context. Unfortunately itself Kinesis does not fully support namespacing either given it also uses an external component. This will be addressed in a subsequent PR.\r\n\r\n### Tests\r\nNew integration test which attempts to create table with same name in different region and different account.\r\n\r\n### Related\r\nCloses: #7126",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 246,
        "deletions": 215,
        "changed_files": 2,
        "created_at": "2022-11-09T14:37:35Z",
        "closed_at": "2022-11-18T13:48:23Z",
        "merged_at": "2022-11-18T13:48:23Z",
        "body": "Follow-up PR to #7070\r\nWhile migrating the tests, it came to light that port permutation while checking for SigV4 signature was not working.\r\nFor context, while validating the signature, we check the host value. But with LocalStack, you can access S3 from different ports (edge port, 443, 80 or not port at all for example in the browser). So we permute ports to try for different `host` value if the first received one is incorrect.\r\nThis also comes with a significant refactor, as we would create a lot of resource for every permutation which needed to be created only once. ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-11-09T10:25:36Z",
        "closed_at": "2022-11-09T13:30:25Z",
        "merged_at": "2022-11-09T13:30:25Z",
        "body": "Recent automated docs update revealed that some s3 API calls are sometimes classified as not being implemented, even though those are available. \r\n* the API sometime returns `404 Not Found` if the bucket does not exist, e.g. for:\r\n  - DeleteBucketCors\r\n  - GetBucketLifecycle\r\n  - GetBucketLifecycleConfiguration\r\n  - GetBucketRequestPayment\r\n  - HeadBucket\r\n  - PutBucketLifecycle\r\n  - PutBucketLifecycleConfiguration\r\n* previously some of those have been assumed as \"implemented\" but only if the API returned a `Bad Request` (which might be caused by an invalid bucket name)\r\n\r\nAs a fix, we exclude `s3` for the specific paths that assumed responses `404 Not Found` relates to not implemented API calls.\r\n\r\n\r\n\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 14,
        "deletions": 5,
        "changed_files": 2,
        "created_at": "2022-11-09T07:57:05Z",
        "closed_at": "2022-12-20T10:52:30Z",
        "merged_at": "2022-12-20T10:52:30Z",
        "body": "Changed the scope of the PR to only disabling the calls to resolve_refs_recursively in `GenericResourceModel`. It can be re-enabled via a feature flag if someone experiences any issues.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 110,
        "deletions": 3,
        "changed_files": 2,
        "created_at": "2022-11-07T10:01:44Z",
        "closed_at": "2023-01-22T21:36:09Z",
        "merged_at": "2023-01-22T21:36:09Z",
        "body": "Adds support for stage variables. Stage variables can be used to render request mapping and request parameters.\r\n\r\nReference API - https://docs.aws.amazon.com/apigateway/latest/developerguide/aws-api-gateway-stage-variables-reference.html\r\n\r\nVerified with https://github.com/localstack/localstack-terraform-samples/tree/master/apigateway-stage-variables\r\nImplements https://github.com/localstack/localstack/issues/6928\r\n\r\nTODO\r\n\r\n- [ ] stage variables doesn't warrant a snapshot test by itself but we can add to a templating request test with AWS_PROXY",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 184,
        "deletions": 15,
        "changed_files": 3,
        "created_at": "2022-11-07T05:10:25Z",
        "closed_at": "2022-11-07T09:08:42Z",
        "merged_at": "2022-11-07T09:08:41Z",
        "body": "# \ud83d\ude80 ASF Update Report \ud83d\ude80\nThis PR has been automatically generated to update the generated API stubs for our ASF services.\nIt uses the latest code-generator from the _master_ branch ([scaffold.py](https://github.com/localstack/localstack/blob/master/localstack/aws/scaffold.py)) and the latest _published_ version of [botocore](https://github.com/boto/botocore) to re-generate all API stubs which are already present in the `localstack.aws.api` module of the _master_ branch.\n\n## \ud83d\udd04 Updated Services\nThis PR updates the following services:\n- ec2\n- logs\n- s3control\n\n## \ud83d\udc77\ud83c\udffd Handle this PR\nThe following options describe how to interact with this PR / the auto-update:\n\n\u2714\ufe0f **Accept Changes**\nIf the changes are satisfying, just squash-merge the PR and delete the source branch.\n\n\ud83d\udeab **Ignore Changes**\nIf you want to ignore the changes in this PR, just close the PR and *do not delete* the source branch. The PR will not be opened and a new PR will not be created for as long as the generated code does not change (or the branch is deleted). As soon as there are new changes, a new PR will be created.\n\n\u270f\ufe0f **Adapt Changes**\n*Don't do this.* The APIs are auto-generated. If you decide that the APIs should look different, you have to change the code-generation.\n\n\u23f8\ufe0f **Pause Updates**\nRemove the cron-schedule trigger of the GitHub Action workflow which creates these PRs. The action can then still be triggered manually, but it will not be executed automatically.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2022-11-07T00:27:43Z",
        "closed_at": "2022-11-07T07:44:11Z",
        "merged_at": "2022-11-07T07:44:11Z",
        "body": "[![Mend Renovate](https://app.renovatebot.com/images/banner.svg)](https://renovatebot.com)\n\nThis PR contains the following updates:\n\n| Package | Type | Update | Change |\n|---|---|---|---|\n| python | final | digest | `9727fe7` -> `c2b2fbf` |\n| python | stage | digest | `9727fe7` -> `c2b2fbf` |\n\n---\n\n### Configuration\n\n\ud83d\udcc5 **Schedule**: Branch creation - \"before 3am on Monday\" (UTC), Automerge - At any time (no schedule defined).\n\n\ud83d\udea6 **Automerge**: Disabled by config. Please merge this manually once you are satisfied.\n\n\u267b **Rebasing**: Whenever PR becomes conflicted, or you tick the rebase/retry checkbox.\n\n\ud83d\udd15 **Ignore**: Close this PR and you won't be reminded about these updates again.\n\n---\n\n - [ ] <!-- rebase-check -->If you want to rebase/retry this PR, check this box\n\n---\n\nThis PR has been generated by [Mend Renovate](https://www.mend.io/free-developer-tools/renovate/). View repository job log [here](https://app.renovatebot.com/dashboard#github/localstack/localstack).\n<!--renovate-debug:eyJjcmVhdGVkSW5WZXIiOiIzNC4xOS4wIiwidXBkYXRlZEluVmVyIjoiMzQuMTkuMCJ9-->\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 302,
        "deletions": 3,
        "changed_files": 10,
        "created_at": "2022-11-06T22:05:40Z",
        "closed_at": "2023-07-06T17:33:35Z",
        "merged_at": "2023-07-06T17:33:35Z",
        "body": "Adds support for API Gateway EventBridge integration\r\nAPI Reference - https://docs.aws.amazon.com/eventbridge/latest/APIReference/API_PutEvents.html\r\n\r\n\r\n# What changes:\r\n\r\n- Adds support to eventbridge integration\r\n- Adds support to eventbridge **test_event_pattern**\r\n- Adds snapshot test\r\n- Implements a first version of `requestOverride` just to support the use case, that will be augment on a follow up issue (https://github.com/localstack/localstack/issues/7727)\r\n- Add support to hiphens in assignments (airspeed, https://github.com/localstack/airspeed/issues/4).\r\n\r\n## Related issues:\r\nImplements - https://github.com/localstack/localstack/issues/6925\r\nFixes - https://github.com/localstack/localstack/issues/6806\r\n\r\n## Partial fixes:\r\nhttps://github.com/localstack/localstack/issues/7727\r\nhttps://github.com/localstack/airspeed/issues/4\r\n\r\n## TF Sample\r\nterraform sample - https://github.com/localstack/localstack-terraform-samples/tree/master/apigateway-eventbridge-integration",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 168,
        "deletions": 347,
        "changed_files": 25,
        "created_at": "2022-11-04T14:51:14Z",
        "closed_at": "2022-11-16T07:38:03Z",
        "merged_at": "2022-11-16T07:38:03Z",
        "body": "This PR performs a final cleanup of the legacy code in community, which was left after the migration to the new package abstraction introduced in https://github.com/localstack/localstack/pull/6783.\r\nIt contains the following changes:\r\n- Remove the `init` make target and its usage in the `Dockerfile`.\r\n  - Instead, the `Dockerfile` now uses `lpm` and explicitly states the packages which should be contained in the image by default.\r\n  - The installation of `elasticmq` (which is used in the legacy sqs provider) is not migrated, since it has been deprecated quite some time ago (and elasticmq will be installed on demand anyways).\r\n- Removes the `install` hook (since it became obsolete, as it was only called by `make init`).\r\n- Migrates the remaining - and still used - constants in `localstack.services.install` to their proper locations.\r\n- Migrate the remaining utility functions in `localstack.services.install` to `localstack.utils.archives`.\r\n- Finally removes the `localstack.services.install` module.\r\n- Removes the `Vagrantfile`.\r\n  - This is not directly related to this PR, but the `Vagrantfile` is not functional anymore and is not reported to be used by any collaborators anymore.\r\n- Sets 777 on `/var/lib/localstack` to allow running localstack with a non-root user. Fixes #7163 /cc @dfangl \r\n\r\nTODO:\r\n- [x] Either remove the last commit (creating a temporary install module again, redirecting to the new locations, to fix the tests), or remove it in an upcoming PR.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 181,
        "deletions": 0,
        "changed_files": 4,
        "created_at": "2022-11-04T13:33:12Z",
        "closed_at": "2022-11-08T11:12:10Z",
        "merged_at": "2022-11-08T11:12:10Z",
        "body": "WIP: currently broken when deploying\r\n\r\nAddresses #7122 ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 17,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2022-11-04T06:22:42Z",
        "closed_at": "2022-11-09T10:24:45Z",
        "merged_at": "2022-11-09T10:24:45Z",
        "body": "DynamoDB provider went into an inconsistent state when `PERSISTENCE=1` and API key was not set. \r\n\r\nOnly the DBLocal data was being persisted and Store data was not.\r\n\r\nSee #7118",
        "comments": 5
    },
    {
        "merged": true,
        "additions": 109,
        "deletions": 18,
        "changed_files": 3,
        "created_at": "2022-11-03T15:29:16Z",
        "closed_at": "2022-11-04T13:48:59Z",
        "merged_at": "2022-11-04T13:48:59Z",
        "body": "This PR enhances the lock handling for the new package installers such that `PackageInstallers` can define custom locks used for the installers. This can be useful when multiple installers need to be synchronized with each other.\r\nIt also changes the parallelization approach in LPM from process-based to thread-based parallelization (in order to ensure that the thread-based locks are respected).\r\n\r\nSee also:\r\n- Package abstraction introduced in https://github.com/localstack/localstack/pull/6783\r\n- Initial lock handling introduced in https://github.com/localstack/localstack/pull/7053",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-11-02T12:56:21Z",
        "closed_at": "2022-11-10T11:11:12Z",
        "merged_at": "2022-11-10T11:11:12Z",
        "body": "This PR modifies the internally used config for `LEGACY_S3_PROVIDER` and checks if the provider is not \"asf\" neither \"asf_pro\".",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 32,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2022-10-31T05:15:56Z",
        "closed_at": "2022-11-02T14:06:26Z",
        "merged_at": "2022-11-02T14:06:26Z",
        "body": "# \ud83d\ude80 ASF Update Report \ud83d\ude80\nThis PR has been automatically generated to update the generated API stubs for our ASF services.\nIt uses the latest code-generator from the _master_ branch ([scaffold.py](https://github.com/localstack/localstack/blob/master/localstack/aws/scaffold.py)) and the latest _published_ version of [botocore](https://github.com/boto/botocore) to re-generate all API stubs which are already present in the `localstack.aws.api` module of the _master_ branch.\n\n## \ud83d\udd04 Updated Services\nThis PR updates the following services:\n- cloudformation\n- ec2\n\n## \ud83d\udc77\ud83c\udffd Handle this PR\nThe following options describe how to interact with this PR / the auto-update:\n\n\u2714\ufe0f **Accept Changes**\nIf the changes are satisfying, just squash-merge the PR and delete the source branch.\n\n\ud83d\udeab **Ignore Changes**\nIf you want to ignore the changes in this PR, just close the PR and *do not delete* the source branch. The PR will not be opened and a new PR will not be created for as long as the generated code does not change (or the branch is deleted). As soon as there are new changes, a new PR will be created.\n\n\u270f\ufe0f **Adapt Changes**\n*Don't do this.* The APIs are auto-generated. If you decide that the APIs should look different, you have to change the code-generation.\n\n\u23f8\ufe0f **Pause Updates**\nRemove the cron-schedule trigger of the GitHub Action workflow which creates these PRs. The action can then still be triggered manually, but it will not be executed automatically.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2022-10-28T15:34:59Z",
        "closed_at": "2022-10-28T17:36:45Z",
        "merged_at": "2022-10-28T17:36:45Z",
        "body": "The CI just broke because of CORS headers for S3 requests with an allowed origin in LocalStack, a test was snapshotting all headers, which fails because AWS doesn't return CORS headers if not configured (but we need to for the web app and such). \r\n\r\n\\cc @steffyP\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1333,
        "deletions": 123,
        "changed_files": 20,
        "created_at": "2022-10-28T08:01:11Z",
        "closed_at": "2022-11-22T12:50:16Z",
        "merged_at": "2022-11-22T12:50:16Z",
        "body": "Changes:\r\n\r\n- [x] Adapter extended to work for Kinesis and DynamoDB Event Source Mappings (a bit dirty but didn't want to change the logic in the event source listeners for now)\r\n- [x] SNS => Lambda invoke is now asynchronous (`Event` type)\r\n- [x] Fixed physical resource ID and attributes for some cloudformation models\r\n- [x] Removed config settings for `SYNCHRONOUS_*_EVENTS`. We should always use the proper invocation types here since a lot of additional logic depends on them (e.g. destinations).  The config setting for `KINESIS` and `SNS` was kept for now since those were still used in the code. They're being deprecated are only available in the old provider until 2.0\r\n\r\n\r\nSome cleanup/enhancements still open:\r\n- [ ] ~~Use proper invoke and use the return code when passing payload to event source mapping destinations~~ => after the initial parity release",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 42,
        "deletions": 1,
        "changed_files": 3,
        "created_at": "2022-10-28T00:29:36Z",
        "closed_at": "2022-10-28T11:07:20Z",
        "merged_at": "2022-10-28T11:07:20Z",
        "body": "Addresses #7106",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 24,
        "deletions": 2,
        "changed_files": 3,
        "created_at": "2022-10-27T15:22:06Z",
        "closed_at": "2022-10-27T17:41:03Z",
        "merged_at": "2022-10-27T17:41:03Z",
        "body": "Adds a config environment variable which allows to define a path to a custom server certificate.\r\nThis setting is introduced as a simple \"redirect\". This means that if the cert cannot be found at the given path, the remote cert will be downloaded to the given path.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1296,
        "deletions": 31,
        "changed_files": 10,
        "created_at": "2022-10-27T06:30:01Z",
        "closed_at": "2022-11-11T07:10:55Z",
        "merged_at": "2022-11-11T07:10:55Z",
        "body": "- Added integration test scenarios and added transformer utility for route53 resolver\r\n- Added 2 integration test cases for secret manager service\r\n- Fixed few bugs that were encountered during testing these service apis\r\n",
        "comments": 5
    },
    {
        "merged": true,
        "additions": 404,
        "deletions": 36,
        "changed_files": 11,
        "created_at": "2022-10-26T19:58:36Z",
        "closed_at": "2022-11-14T20:14:45Z",
        "merged_at": "2022-11-14T20:14:45Z",
        "body": "- [x] Drift detection test\r\n- [x] \"Linting error instead of trying to deploy\" test\r\n- [x] list-imports tests \r\n- [x] Notifications\r\n- [x] Update and delete nested stacks\r\n- [x] DeletePolicy: Retain\r\n- [x] Stack policy to prevent deletion",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 176,
        "deletions": 52,
        "changed_files": 8,
        "created_at": "2022-10-26T10:17:43Z",
        "closed_at": "2022-11-16T10:23:44Z",
        "merged_at": "2022-11-16T10:23:44Z",
        "body": "### Summary\r\n\r\nThis PR introduces the ability to use resource namespacing based on Account IDs in LocalStack community edition.\r\n\r\n### Related\r\n\r\nDocs: https://github.com/localstack/docs/pull/323\r\n\r\nSee: https://github.com/localstack/localstack/issues/7068",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 27,
        "deletions": 3,
        "changed_files": 3,
        "created_at": "2022-10-25T19:36:14Z",
        "closed_at": "2022-10-26T21:11:24Z",
        "merged_at": "2022-10-26T21:11:24Z",
        "body": "This PR patches the `VariableExpression` parse method from airspeed to support variables with dashes (`$request.header.X-User`)\r\n\r\nThis change was tested in airspeed test set and broke only one test because `-` need spacing to be correctly interpreted. The failing test is the same include in this change set.\r\n\r\nhttps://velocity.apache.org/engine/devel/vtl-reference.html#variables",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2022-10-25T09:45:05Z",
        "closed_at": "2022-10-25T11:13:07Z",
        "merged_at": "2022-10-25T11:13:06Z",
        "body": "[boto/botocore](https://github.com/boto/botocore) recently changed the endpoint detection: https://github.com/boto/botocore/commit/357d5a81311b9c63286423b64d54ff3d6b99534b\r\nThese changes (which are contained in [`boto3==1.25.0`](https://github.com/boto/boto3/releases/tag/1.25.0) / [`botocore==1.2.8`](https://github.com/boto/botocore/releases/tag/1.28.0)) break some of the internal APIs we are using for testing and for our forwarding API (because the endpoint parameter became mandatory), and have impact on the routing (due to changes with the endpoints).\r\n\r\nThis PR provides a quick-fix by pinning to the previous versions.\r\nThe root cause / adjustment to the new versions will be addressed https://github.com/localstack/localstack/pull/7086.\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 25,
        "deletions": 12,
        "changed_files": 6,
        "created_at": "2022-10-25T08:48:20Z",
        "closed_at": "2022-10-27T08:30:47Z",
        "merged_at": "2022-10-27T08:30:47Z",
        "body": "## Motivation\r\nWe released a new version of the lambda runtime init, which we will now update to.\r\nAlso, the LambdaRuntimeException is better suited to live in the runtime_executor module (due to it potentially being used by multiple executor implementations).\r\nAnd, for different executors, a config variable for the runtime environment timeout comes in handy.\r\nAlso, when an error is thrown in the start() method, we until now did not set this environment to failed, and stop any executor that might be running.\r\n\r\n## Changes\r\n* Add `LAMBDA_RUNTIME_ENVIRONMENT_TIMEOUT` config, which tells us the default timeout for an environment to report back (before it is killed and restarted). The default is 10, which should be enough for docker, but other executors might need more time here.\r\n* Move `LambdaRuntimeException` to runtime_executor module\r\n* Update runtime init to 0.1.5-pre.\r\n* Add error handling to calls of RuntimeExecutor.start()",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 47,
        "deletions": 7,
        "changed_files": 5,
        "created_at": "2022-10-25T08:45:54Z",
        "closed_at": "2022-12-23T16:00:30Z",
        "merged_at": "2022-12-23T16:00:30Z",
        "body": "[boto/botocore](https://github.com/boto/botocore) recently changed the endpoint detection: https://github.com/boto/botocore/commit/357d5a81311b9c63286423b64d54ff3d6b99534b\r\nThese changes (which are contained in [`botocore==1.28.0`](https://github.com/boto/botocore/releases/tag/1.28.0)) break some of the internal APIs we are using for testing and for our forwarding API (because the endpoint parameter became mandatory).\r\n\r\nThis PR aims at adjusting to these changes.",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-10-25T06:15:47Z",
        "closed_at": "2023-02-07T11:29:24Z",
        "merged_at": "2023-02-07T11:29:24Z",
        "body": "This healthcheck inside the image times out after 5 seconds (https://github.com/localstack/localstack/blob/434b9eb2daaf27a5dda6e1c6f75e56d7958fe3f8/Dockerfile#L268)\r\n\r\nThe ping command used to determine bridge IP has a timeout of 10 secs on each IP (2 of them) that it attempts.\r\n\r\nNet result is that if localstack is running in a docker daemon that doesn't respond to the first IP that gets pinged then the service is going to be marked as unhealthy.\r\n\r\nThis PR sets a timeout of 2 secs on each ping so that it will still allow the healthcheck command to finish even when the bridge IP determination logic couldn't find docker daemon. Because if and when the IP is valid... it doesn't take that long so if it hasn't worked by 2 secs then it's unlikely going to work by 10 secs.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1493,
        "deletions": 108,
        "changed_files": 13,
        "created_at": "2022-10-24T16:00:06Z",
        "closed_at": "2022-10-27T16:21:15Z",
        "merged_at": "2022-10-27T16:21:15Z",
        "body": "`aws_validated` cloudformation integration tests added for:\r\n\r\n- [x] [AWS::Lambda::Alias](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-lambda-alias.html)\r\n- [x] [AWS::Lambda::CodeSigningConfig](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-lambda-codesigningconfig.html)\r\n- [x] [AWS::Lambda::EventInvokeConfig](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-lambda-eventinvokeconfig.html)\r\n- [x] [AWS::Lambda::EventSourceMapping](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-lambda-eventsourcemapping.html)\r\n- [x] [AWS::Lambda::Function](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-lambda-function.html)\r\n- [x] [AWS::Lambda::Permission](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-lambda-permission.html)\r\n- [x] [AWS::Lambda::Url](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-lambda-url.html)\r\n- [x] [AWS::Lambda::Version](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-lambda-version.html)\r\n\r\n\r\nChanges besides the tests:\r\n\r\n* Fix `AWS::Lambda::Permission`\r\n* Fix `AWS::Lambda::Version`\r\n* Introduce `AWS::Lambda::Alias`\r\n* Introduce `AWS::Lambda::CodeSigningConfig`\r\n* Fix some minor CRUD issues in the new provider",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1771,
        "deletions": 46,
        "changed_files": 14,
        "created_at": "2022-10-24T15:37:55Z",
        "closed_at": "2022-11-16T14:02:19Z",
        "merged_at": "2022-11-16T14:02:19Z",
        "body": "This implements S3 CORS for the new provider.\r\nCurrent issues with CORS is that we depend on the service name parser to correctly handle CORS depending on the service (S3 and API GW can both manage their own CORS rules). \r\n\r\nWe make use of the handler chain, with a very early handler which \"pre-parse\" the request with a simplified way to determine if the request would be directed towards S3. If it does, we then handle CORS based on the configured rules if there are, otherwise default to the LocalStack behaviour for CORS.\r\n\r\nHere's a simplified flow chart for how we handle CORS.\r\n(The top right box will actually differ depending on the previous path, but to simplify the chart, it is drawn as one path only).\r\n\r\n![s3 cors2](https://user-images.githubusercontent.com/42031100/197566884-94d2fe7c-fb9f-4642-92ee-cb580348e7d9.png)\r\n",
        "comments": 6
    },
    {
        "merged": true,
        "additions": 23,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2022-10-24T05:31:23Z",
        "closed_at": "2022-10-24T06:55:22Z",
        "merged_at": "2022-10-24T06:55:22Z",
        "body": "# \ud83d\ude80 ASF Update Report \ud83d\ude80\nThis PR has been automatically generated to update the generated API stubs for our ASF services.\nIt uses the latest code-generator from the _master_ branch ([scaffold.py](https://github.com/localstack/localstack/blob/master/localstack/aws/scaffold.py)) and the latest _published_ version of [botocore](https://github.com/boto/botocore) to re-generate all API stubs which are already present in the `localstack.aws.api` module of the _master_ branch.\n\n## \ud83d\udd04 Updated Services\nThis PR updates the following services:\n- config\n- s3\n\n## \ud83d\udc77\ud83c\udffd Handle this PR\nThe following options describe how to interact with this PR / the auto-update:\n\n\u2714\ufe0f **Accept Changes**\nIf the changes are satisfying, just squash-merge the PR and delete the source branch.\n\n\ud83d\udeab **Ignore Changes**\nIf you want to ignore the changes in this PR, just close the PR and *do not delete* the source branch. The PR will not be opened and a new PR will not be created for as long as the generated code does not change (or the branch is deleted). As soon as there are new changes, a new PR will be created.\n\n\u270f\ufe0f **Adapt Changes**\n*Don't do this.* The APIs are auto-generated. If you decide that the APIs should look different, you have to change the code-generation.\n\n\u23f8\ufe0f **Pause Updates**\nRemove the cron-schedule trigger of the GitHub Action workflow which creates these PRs. The action can then still be triggered manually, but it will not be executed automatically.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 220,
        "deletions": 16,
        "changed_files": 4,
        "created_at": "2022-10-21T19:58:16Z",
        "closed_at": "2022-11-25T17:45:58Z",
        "merged_at": "2022-11-25T17:45:58Z",
        "body": "First POC of a visitor pattern we can use to retrieve the backends (meaning, an `AccountRegionBundle` and/or a `BackendDict`) of a service.\r\n\r\nThis is going to be used in the Cloud Pods code to replace `lookup_utils` and `get_backends` (see companion [PR](https://github.com/localstack/localstack-ext/pull/1124)).",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 173,
        "deletions": 157,
        "changed_files": 3,
        "created_at": "2022-10-21T19:14:05Z",
        "closed_at": "2022-11-13T19:57:29Z",
        "merged_at": "2022-11-13T19:57:29Z",
        "body": "# S3 presign test migration and cleanup\r\n\r\nIn this PR two remaining presigned-tests are migrated to `tests/integration/s3/test_s3.py` and the old `tests/integration/test_s3.py` is removed.\r\n\r\n* The test `test_presign_check_signature_validation_for_port_permutation` is marked with `xfail` now, as it still needs a fix. This fix will be resolved in a separate PR. \r\n\r\n* Some other tests related to presigned-post, that are flaky in the CI have been set to `xfail` or skip some validation. \r\n\r\n* removed `xfail` for test `test_put_and_get_object_with_content_language_disposition` and replaced it with a `skip_snapshot_verify` for now.\r\n\r\n**TODO:**\r\n- [x] rebase with master and remove commits from `s3-migration` branch\r\n- [x] link follow-up PR with fix for `test_presign_check_signature_validation_for_port_permutation`",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 87,
        "deletions": 12,
        "changed_files": 4,
        "created_at": "2022-10-21T16:25:21Z",
        "closed_at": "2022-10-28T13:12:43Z",
        "merged_at": "2022-10-28T13:12:43Z",
        "body": "Related to #7050. The problem is that the resource model of the table generates the table name only when the resource is created, but the table name (also used as Ref) can be referenced before that.\r\n\r\nThe fix to the situation is to create the default name at the proper time so it can be used (referenced) before its creation.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 12,
        "deletions": 10,
        "changed_files": 4,
        "created_at": "2022-10-21T16:14:06Z",
        "closed_at": "2022-10-31T13:30:23Z",
        "merged_at": "2022-10-31T13:30:23Z",
        "body": null,
        "comments": 2
    },
    {
        "merged": true,
        "additions": 28,
        "deletions": 16,
        "changed_files": 5,
        "created_at": "2022-10-21T15:46:32Z",
        "closed_at": "2022-11-11T13:23:20Z",
        "merged_at": "2022-11-11T13:23:20Z",
        "body": "This PR deactivates the `VirtualHostRewriter` if the ASF provider for S3 is activated.\r\n\r\nS3 virtual host routes are registered `on_infra_ready` to ensure the hosts are resolved correctly, even if s3 is not yet loaded (this requirement was revealed by the terraform test suite).\r\n\r\n\r\n\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 360,
        "deletions": 313,
        "changed_files": 20,
        "created_at": "2022-10-21T12:31:50Z",
        "closed_at": "2022-10-27T11:20:56Z",
        "merged_at": "2022-10-27T11:20:56Z",
        "body": "This PR migrates LPM to use a new plugin mechanism based on the package abstraction introduced in https://github.com/localstack/localstack/pull/6783.\r\n\r\nIt basically replaces the (pluggable) `InstallerRepository` classes with **fine-grained package plugins** where each entrypoint delivers a single package. The package plugins can have a scope (f.e. `community` or `ext`), which directly relates to the former `InstallerRepository` namespace.\r\n\r\nA package can easily be defined as follows:\r\n```python\r\n@package(name=\"dynamodb-local\")\r\ndef dynamodb_local_package() -> Package:\r\n    from localstack.services.dynamodb.packages import dynamodblocal_package\r\n\r\n    return dynamodblocal_package\r\n```\r\nThe local import is necessary to avoid loading all installers (and their code) when discovering / listing the packages.\r\nThe resulting `lpm list` looks the same as before:\r\n```bash\r\ndynamodb-local/community\r\n```\r\n\r\nIt also adds the following features to `lpm`:\r\n- **List package versions**: A \"verbose\" output to `lpm list` (with `--verbose` or `-v`) which shows the available versions for the different packages.\r\n- **Specify the installation target**: Define if the package should be installed to `var_libs` or to `static_libs` (with `--target <var_libs|static_libs>`). Defaults to `static_libs` (since `lpm` is meant to be used at Docker build time).\r\n- **Specify the version**: Define the version of a package to be installed (with `--version <version>`). This can be used across the installation of multiple packages, however there is no syntax for defining different versions for different packages yet.\r\n\r\nFeedback on the plugin mechanism, usage, and the implementation in general is highly appreciated. :)",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 25,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2022-10-21T11:21:30Z",
        "closed_at": "2022-11-03T08:52:03Z",
        "merged_at": "2022-11-03T08:52:03Z",
        "body": null,
        "comments": 3
    },
    {
        "merged": false,
        "additions": 144,
        "deletions": 42,
        "changed_files": 6,
        "created_at": "2022-10-20T17:00:38Z",
        "closed_at": "2022-10-24T13:40:19Z",
        "merged_at": null,
        "body": "The template deployer fails to obtaining the value of an Stack model output as an attribute due to sometimes the resource is handle as dictionary. The changes forces to obtain all attributes from the Resource Model.\r\n\r\nChange related to ticket. ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 127,
        "deletions": 0,
        "changed_files": 3,
        "created_at": "2022-10-20T15:21:17Z",
        "closed_at": "2022-10-27T14:31:02Z",
        "merged_at": "2022-10-27T14:31:02Z",
        "body": "## Summary \r\nTo increase Localstack coverage for [KMS](https://docs.localstack.cloud/localstack/coverage/#kms), this is a request to add `GenerateRandom` implementation. \r\n\r\nAWS Docs : [AWS APIReference/API_GenerateRandom](https://docs.aws.amazon.com/kms/latest/APIReference/API_GenerateRandom.html)\r\nMoto example: [localstack/moto/kms/responses.py#L588-L605](https://github.com/localstack/moto/blob/localstack/moto/kms/responses.py#L588-L605)\r\n\r\n## awslocal test\r\n\r\nSuccess case\r\n\r\n```bash\r\n$ awslocal kms generate-random --number-of-bytes 32\r\n{\r\n    \"Plaintext\": \"gIOXDaGrFBmWRKIlqalIaAJDVX9CBWWi0JRLxzJLLGE=\"\r\n}\r\n\r\n$ echo gIOXDaGrFBmWRKIlqalIaAJDVX9CBWWi0JRLxzJLLGE= | base64 --decode | wc -c\r\n    \r\n      32\r\n```\r\n\r\nValidations \r\n```bash\r\n$ awslocal kms generate-random --number-of-bytes 0\r\n\r\nParameter validation failed:\r\nInvalid value for parameter NumberOfBytes, value: 0, valid min value: 1\r\n```\r\n\r\n```bash\r\n$ awslocal kms generate-random --number-of-bytes 1025\r\n\r\nAn error occurred (ValidationException) when calling the GenerateRandom operation: 1 validation error detected: Value '1025' at 'numberOfBytes' failed to satisfy constraint: Member must have value less than or equal to 1024\r\n```\r\n\r\n```bash\r\n$ awslocal kms generate-random                    \r\n\r\nAn error occurred (ValidationException) when calling the GenerateRandom operation: NumberOfBytes is required.\r\n```",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 15,
        "deletions": 8,
        "changed_files": 1,
        "created_at": "2022-10-20T12:28:52Z",
        "closed_at": "2022-10-21T08:03:22Z",
        "merged_at": "2022-10-21T08:03:21Z",
        "body": "This PR moves the installation steps behind a mutex lock to avoid race conditions if the installer is invoked multiple times.\r\n\r\nWe rely on the LRU-cached `get_installer()` method to return the same installer instance for a given version to ensure the same lock is utilised.",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 38,
        "deletions": 34,
        "changed_files": 4,
        "created_at": "2022-10-20T11:53:18Z",
        "closed_at": "2022-10-24T06:54:54Z",
        "merged_at": "2022-10-24T06:54:54Z",
        "body": "Migrate the testlibs used for the lambda tests to the new architecture in #6783 . This will remove the necessity of a `make` call to download these testlibs. The tests are now directly responsible for downloading the necessary library.\r\n- Introduces a packages module for the test module.\r\n- ~~Open question: should this PR already remove the corresponding part in the Makefile?~~ Removes make init-testlibs",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 10,
        "changed_files": 2,
        "created_at": "2022-10-20T09:12:32Z",
        "closed_at": "2022-10-20T11:07:41Z",
        "merged_at": "2022-10-20T11:07:41Z",
        "body": "Not super happy with the general install setup there but this should fix the immediate issue of the pipeline failing atm.\r\n\r\n* Add missing `@aws-sdk/util-endpoints` dependency\r\n* Merge the different npm installs\r\n* Adjust endpoint since it seems to expect a string there now instead of an object.",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 38,
        "deletions": 12,
        "changed_files": 3,
        "created_at": "2022-10-20T06:09:10Z",
        "closed_at": "2022-10-26T10:28:35Z",
        "merged_at": null,
        "body": "Fix an issue where in certain scenarios, the default account ID is returned when in fact we want the patched account ID to be returned.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 20,
        "deletions": 16,
        "changed_files": 2,
        "created_at": "2022-10-19T15:31:21Z",
        "closed_at": "2022-10-21T06:29:19Z",
        "merged_at": "2022-10-21T06:29:19Z",
        "body": "This PR tries to revive our RedHat Dockerfile example located in `Dockerfile.rh`.\r\nThe workflow has been deactivated due to several issues over the time (python upgrades, filesystem changes, certain non-redhat compatible installers,...).\r\nWith our new installer structure (introduced in https://github.com/localstack/localstack/pull/6783), these issues can now be addressed.\r\nThis PR also changes the trigger of the pipeline from being executed on every master build to be executed on a schedule (every week) since it only tests the latest dev releases against each other (and therefore doesn't directly test the latest commit on the master).\r\n\r\nUnfortunately, the pipeline can't really be tested (since it had no workflow trigger before). I tested the steps locally though.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 119,
        "deletions": 5,
        "changed_files": 2,
        "created_at": "2022-10-19T12:49:03Z",
        "closed_at": "2022-10-19T16:09:50Z",
        "merged_at": "2022-10-19T16:09:50Z",
        "body": "## Motivation\r\nCurrently, we do not extract the account id from iam/sts access keys on requests, which leads to problems with the multi account feature when using iam access keys.\r\nAfter the changes in https://github.com/spulec/moto/pull/5501 , we can now use this to extract the account id stateless from the access key id.\r\n## Changes\r\n* Extract account id for access key id if it matches the correct format. A lot of warnings/fallbacks if it gets an malformed one.\r\n* Add two tests testing access keys generated by iam / sts and the sts get caller identity feature, which in the end depends on our account id extraction.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 48,
        "deletions": 22,
        "changed_files": 3,
        "created_at": "2022-10-19T11:39:20Z",
        "closed_at": "2022-10-19T19:11:56Z",
        "merged_at": "2022-10-19T19:11:56Z",
        "body": "This PR migrates the debugpy install routine to the new architecture introduced in https://github.com/localstack/localstack/pull/6783.\r\nNote: the check if it is already installed seems kinda hacky (at least the part to determine the \"root\" localstack directory). Critique is very much appreciated\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2022-10-18T22:30:50Z",
        "closed_at": "2022-10-19T00:00:02Z",
        "merged_at": "2022-10-19T00:00:02Z",
        "body": "Adapting the patch to match the signature of the `IAMBackend`. We experienced a `TypeError: apply_patches.<locals>.add_attributes() takes 4 positional arguments but 5 were given` when trying to reset the IAM status. Thanks to @whummer for noticing the problem.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 73,
        "deletions": 41,
        "changed_files": 4,
        "created_at": "2022-10-18T16:32:49Z",
        "closed_at": "2022-10-19T12:55:54Z",
        "merged_at": "2022-10-19T12:55:54Z",
        "body": "## Motivation\r\nWe are currently spawning a new flask server for every runtime environment. This is both costly and cannot be shutdown easily, also in need of a lot of tcp ports which can lead to problems when not all ports are accessible from other containers.\r\n## Changes\r\n* Instead of an own port, every request now goes to the edge port.\r\nThe urls will therefore change from `{LOCALSTACK_IP}:{RANDOM_PORT}/...` to `{LOCALSTACK_IP}:{EDGE_PORT}/_localstack_lambda/{ENVIRONMENT_ID}/...`. This can be done without needing to change the runtime init binary.\r\n* Use of the localstack router instead of flask\r\n\r\nPair programming with @thrau ",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 11,
        "deletions": 5,
        "changed_files": 1,
        "created_at": "2022-10-18T14:59:12Z",
        "closed_at": "2022-10-28T14:39:52Z",
        "merged_at": "2022-10-28T14:39:52Z",
        "body": "After working on CORS for the new S3 provider, we realised that S3 would allow all origins by default if CORS was configured for the bucket. This fix cleans up all CORS headers returned by moto, then checks if CORS is configured for the bucket.\r\n(Before, the headers would be cleaned up only if the bucket had CORS configured).\r\nThe new logic is:\r\n1. After the response is returned from moto, clean up all CORS related headers\r\n2. If CORS is configured for the bucket, append the specific matched CORS rule headers.\r\n3. If CORS is not configured, append the default CORS headers of LocalStack (which you can extend with config variables).\r\n\r\nWe worked on this fix in tandem with @dfangl\r\n\r\nThis might create some issues with customers accessing S3 from websites. The quickest fix to this issue is to add the needed origins to `EXTRA_CORS_ALLOWED_ORIGINS`, or to configure CORS for the S3 bucket. ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 351,
        "deletions": 218,
        "changed_files": 6,
        "created_at": "2022-10-17T15:26:28Z",
        "closed_at": "2022-10-18T11:30:27Z",
        "merged_at": "2022-10-18T11:30:27Z",
        "body": "## Description\r\nThe lambda runtime executor class can now be configured and is loadable using the plux plugin mechanism.\r\nAlso introduced an abc to specify the interface for runtime executors.\r\n\r\n## Introduced configuration options\r\n* `LAMBDA_RUNTIME_EXECUTOR`: Specify the runtime executor using its plugin name. Will make it possible to switch to another executor (like kubernetes or static executor) specified as plugins.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 6,
        "deletions": 3,
        "changed_files": 1,
        "created_at": "2022-10-17T15:22:32Z",
        "closed_at": "2022-10-18T07:54:06Z",
        "merged_at": "2022-10-18T07:54:06Z",
        "body": "This PR fixes a small issue with those installers which have already been migrated to the new structure (introduced in https://github.com/localstack/localstack/pull/6783) and are installed at build time (via the `make init` command).\r\nUnfortunately, these installers have been executed with the install target `VAR_LIBS` (the default - which is overwritten when a local filesystem is mounted) rather than with the `STATIC_LIBS` target (which is not overwritten when a var lib is mounted).\r\n\r\nThis can be verfied with the following commands:\r\n```\r\n$ docker pull localstack/localstack\r\n$ docker run --entrypoint bash localstack/localstack \r\n# ls -al /var/lib/localstack/lib\r\ntotal 172\r\ndrwxr-xr-x 11 root root   4096 Oct 17 15:23 .\r\ndrwxrwxrwx  6 root root   4096 Oct 17 15:23 ..\r\ndrwxr-xr-x  4 root root   4096 Oct 17 15:23 apt-libs\r\ndrwxr-xr-x  3 root root   4096 Oct 17 15:23 awslambda-runtime\r\ndrwxr-xr-x  3 root root   4096 Oct 17 15:23 cloudformation\r\ndrwxr-xr-x  3 root root   4096 Oct 17 15:23 dynamodb-local\r\ndrwxr-xr-x  3 root root   4096 Oct 17 15:23 elasticmq\r\ndrwxr-xr-x  3 root root   4096 Oct 17 15:23 kinesis-mock\r\ndrwxr-xr-x  3 root root   4096 Oct 17 15:23 lambda-java-libs\r\ndrwxr-xr-x  3 root root   4096 Oct 17 15:23 local-kms\r\n-rw-r--r--  1 root root 127033 Oct 17 07:43 localstack-utils-tests.jar\r\ndrwxr-xr-x  3 root root   4096 Oct 17 15:23 stepfunctions-local\r\n\r\n```\r\n\r\nThis PR simply fixes this by setting the default target for these installers to `STATIC_LIBS`. This should be enough for now because (1) these installers are only executed by `make init`, and (2) these installers will be superseded by explicit `lpm` calls in the Dockerfile / at Docker build-time soon.",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 346,
        "deletions": 92,
        "changed_files": 15,
        "created_at": "2022-10-17T13:16:45Z",
        "closed_at": "2022-10-24T08:09:05Z",
        "merged_at": "2022-10-24T08:09:05Z",
        "body": "More or less as shortcut to get parity with the old provider by re-using most of the event source mapping / DLQ constructs.\r\n\r\n\r\nChanges:\r\n\r\n- [x] DLQ support for lambda ASF provider\r\n- [x] SQS EventSourceMappings (a lot of the CRUD + tests is still WIP)\r\n- [ ] ~~Support for OnSuccess / OnFailure Destinations~~ => will come in a separate PR",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2022-10-17T05:33:05Z",
        "closed_at": "2022-10-17T07:10:57Z",
        "merged_at": "2022-10-17T07:10:57Z",
        "body": "# \ud83d\ude80 ASF Update Report \ud83d\ude80\nThis PR has been automatically generated to update the generated API stubs for our ASF services.\nIt uses the latest code-generator from the _master_ branch ([scaffold.py](https://github.com/localstack/localstack/blob/master/localstack/aws/scaffold.py)) and the latest _published_ version of [botocore](https://github.com/boto/botocore) to re-generate all API stubs which are already present in the `localstack.aws.api` module of the _master_ branch.\n\n## \ud83d\udd04 Updated Services\nThis PR updates the following services:\n- ssm\n\n## \ud83d\udc77\ud83c\udffd Handle this PR\nThe following options describe how to interact with this PR / the auto-update:\n\n\u2714\ufe0f **Accept Changes**\nIf the changes are satisfying, just squash-merge the PR and delete the source branch.\n\n\ud83d\udeab **Ignore Changes**\nIf you want to ignore the changes in this PR, just close the PR and *do not delete* the source branch. The PR will not be opened and a new PR will not be created for as long as the generated code does not change (or the branch is deleted). As soon as there are new changes, a new PR will be created.\n\n\u270f\ufe0f **Adapt Changes**\n*Don't do this.* The APIs are auto-generated. If you decide that the APIs should look different, you have to change the code-generation.\n\n\u23f8\ufe0f **Pause Updates**\nRemove the cron-schedule trigger of the GitHub Action workflow which creates these PRs. The action can then still be triggered manually, but it will not be executed automatically.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2022-10-17T00:35:57Z",
        "closed_at": "2022-10-17T06:21:45Z",
        "merged_at": "2022-10-17T06:21:45Z",
        "body": "[![Mend Renovate](https://app.renovatebot.com/images/banner.svg)](https://renovatebot.com)\n\nThis PR contains the following updates:\n\n| Package | Type | Update | Change |\n|---|---|---|---|\n| python | final | patch | `3.10.7-slim-buster` -> `3.10.8-slim-buster` |\n| python | stage | patch | `3.10.7-slim-buster` -> `3.10.8-slim-buster` |\n\n---\n\n### Configuration\n\n\ud83d\udcc5 **Schedule**: Branch creation - \"before 3am on Monday\" (UTC), Automerge - At any time (no schedule defined).\n\n\ud83d\udea6 **Automerge**: Disabled by config. Please merge this manually once you are satisfied.\n\n\u267b **Rebasing**: Whenever PR becomes conflicted, or you tick the rebase/retry checkbox.\n\n\ud83d\udd15 **Ignore**: Close this PR and you won't be reminded about these updates again.\n\n---\n\n - [ ] <!-- rebase-check -->If you want to rebase/retry this PR, click this checkbox.\n\n---\n\nThis PR has been generated by [Mend Renovate](https://www.mend.io/free-developer-tools/renovate/). View repository job log [here](https://app.renovatebot.com/dashboard#github/localstack/localstack).\n<!--renovate-debug:eyJjcmVhdGVkSW5WZXIiOiIzMi4yMzcuMCIsInVwZGF0ZWRJblZlciI6IjMyLjIzNy4wIn0=-->\n",
        "comments": 3
    },
    {
        "merged": false,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2022-10-16T13:13:09Z",
        "closed_at": "2023-10-09T02:53:07Z",
        "merged_at": null,
        "body": "Fixes issues raised by #5249\r\n1. unique RoleName is created, so throws an error if the same role is created twice.\r\n2. fixes a `/` suffix issue in PATH as given in [cli docs](https://awscli.amazonaws.com/v2/documentation/api/latest/reference/iam/create-service-linked-role.html)\r\n\r\nHowever, mapping is still not complete i.e. works for `ecs/ecr` as it's simply uppercase of the service name, but not so for `Lex` etc. The reason is, I'm not able to find a complete source of all potential RoleNames. \r\n\r\nCan anyone can point me to the right document? Else I will try to search and see if I can improve on this.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 992,
        "deletions": 29,
        "changed_files": 13,
        "created_at": "2022-10-14T17:19:57Z",
        "closed_at": "2022-10-21T15:41:59Z",
        "merged_at": "2022-10-21T15:41:59Z",
        "body": "This PR contains several fixes for S3 ASF that were detected by the terraform test suite:\r\n\r\n- Website Hosting: fix handling for empty `ReplaceKeyPrefixWith` for redirect-routing rule (in that case it should remove the the `KeyPrefixEquals` from the original url and then do the redirect)\r\n- Bucket name with slashes: fix parsing issue; preserve name for keys that end with slash\r\n- Patch to change casing of `content-lanugage` , `content-disposition` and `cache-control` to be picked up by parser\r\n- Patch for bucket-key-enbled header `x-amz-server-side-encryption-bucket-key-enabled` which is returned as camel-case by moto, but should be lowercase to be picked up by the parser\r\n- fix resetting of `content-length` for HEAD requests that are forwarded using the `Proxy` for vhost-style requests.\r\n- fix issues with `delete-objects`:\r\n   - query parameter was added twice to the url for vhost-style forwarding\r\n   - add moto-patch to include old fix from legacy s3 provider\r\n   - remove trailing `=` from the path (`/<bucket>/?delete=` but expects `/<bucket>/?delete`)\r\n   - add notifications for `delete-objects`\r\n   - implement `quiet` mode for `delete-objects`\r\n- fix bucket replication and added tests\r\n- add spec-patch for `log-delivery-write`, which was missing from the `BucketCannedACL`\r\n\r\n\r\n## TODO before merge:\r\n\r\n- [x]  remove last commit, which excludes some cors-related tests, that were timing out (CORS not yet implemented)\r\n- [x] rebase with master (remove ASF enabled by default)",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 41,
        "deletions": 8,
        "changed_files": 1,
        "created_at": "2022-10-14T15:46:19Z",
        "closed_at": "2022-10-17T17:07:23Z",
        "merged_at": "2022-10-17T17:07:23Z",
        "body": "Our test suite executes tests that exactly match the names specified in the `tests/terraform/terraform-tests.yaml`. The current config lists list names of test bundles instead of tests themselves, so no tests match those names, nothing gets executed.\r\n\r\nThis PR lists full names of the tests instead.",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 6,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2022-10-14T13:24:59Z",
        "closed_at": "2023-01-05T08:33:28Z",
        "merged_at": null,
        "body": "Continuation fix for https://github.com/localstack/localstack/issues/6141",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 230,
        "changed_files": 4,
        "created_at": "2022-10-14T10:01:58Z",
        "closed_at": "2022-10-17T07:36:41Z",
        "merged_at": "2022-10-17T07:36:41Z",
        "body": "Move OSPackageInstaller and the PostgreSQLPackage(Installer) to ext (since we don't it them in community anyway). \r\nNote: SystemNotSupportedException is left in community due to a DownloadInstaller that doesn't seem to support binaries for certain OS/arch types\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 9,
        "deletions": 12,
        "changed_files": 3,
        "created_at": "2022-10-14T07:20:46Z",
        "closed_at": "2022-10-14T10:02:13Z",
        "merged_at": "2022-10-14T10:02:13Z",
        "body": "This PR removes `bson` direct dependency and adds `pymongo` as a dependency that in turn brings a compatible transitive `bson` dependency.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 782,
        "deletions": 164,
        "changed_files": 16,
        "created_at": "2022-10-13T20:00:13Z",
        "closed_at": "2022-10-28T16:46:40Z",
        "merged_at": "2022-10-28T16:46:40Z",
        "body": "This PR continues the work of reorganization and extension of the test for the CFn service.\r\nChanges:\r\n\r\n- More tests for intrinsic functions\r\n  - Join\r\n  - Split\r\n  -  GetAZs\r\n  - JsonTransform\r\n  - CIDR\r\n  - Length\r\n- Reorganization of function tests into engine.\r\n- Add a test for double nested stack\r\n- Test for failure options options (Disable Rollback)   ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 298,
        "deletions": 134,
        "changed_files": 9,
        "created_at": "2022-10-13T13:55:18Z",
        "closed_at": "2022-10-19T07:29:54Z",
        "merged_at": "2022-10-19T07:29:54Z",
        "body": "## Motivation\r\nCurrently, we store the code of a lambda on disk for every version. This has the following problems:\r\n* inefficiency, mainly needing to unzip for every publish as well as every update\r\n* since unzipping can take a while, the lambda version state will not be active on first return\r\n\r\n## Changes\r\nThis PR fixes this behavior by encapsulating the unzipped code on disk with the code storage in S3. As long as the code is not updated, it will be shared (across versions of a function, never across functions).\r\nThis leads to faster preparation times and better API parity.\r\n\r\nThe publish version preparation is now nearly instantaneous, and therefore handled synchronously. The only exception is when publish is triggered by a state changing operation, like the publish=True parameter of `create_function` and `update_function_code`, in this case it will still be asynchronous, and both versions will wait for the unzipping (but its only unzipped once, due to a lock).\r\n\r\nCleanups will be only done after ensuring no other version is taking up the code, on delete of the version or on function updates. Those complete cleanups will also delete the data in S3.\r\nCache cleanups of the code, namely cleaning up only the unzipped code on disk, will be done on service stop. In this case, the S3 data is not deleted, to enable persistence.",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 13,
        "deletions": 4,
        "changed_files": 3,
        "created_at": "2022-10-13T13:38:34Z",
        "closed_at": "2022-10-31T09:37:02Z",
        "merged_at": null,
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\nWIP",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 91,
        "deletions": 3,
        "changed_files": 4,
        "created_at": "2022-10-12T13:40:07Z",
        "closed_at": "2022-10-13T18:14:53Z",
        "merged_at": "2022-10-13T18:14:53Z",
        "body": "Add error response for invalid SQS batch message IDs (AWS parity).\r\n\r\nThis small issue surfaced when running some experiments in \"hybrid mode\" against real AWS (pointing Lambda event source listeners at an SQS queue in real AWS) - we were basically passing the `ReceiptHandle` for the message ID on batch deletion in the event source listener.\r\n\r\nAlso added a small snapshot test to cover this functionality. The PR adds a snapshot transformer to remove the `Detail` section of returned error responses - could be useful for some of the other `skip_snapshot_verify` marked tests as well.. \ud83d\udc4d (perhaps could be turned into a fixture, to simplify things a bit..). @thrau @dominikschubert ",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 61,
        "deletions": 42,
        "changed_files": 3,
        "created_at": "2022-10-12T03:35:20Z",
        "closed_at": "2022-10-24T15:50:49Z",
        "merged_at": null,
        "body": "WIP, more explanation will be written soon!\r\nMaybe some tests will fail, I haven't checked that. \r\nThere another handler to check Origin/Referrer for CSRF protection, but we should separate CORS and CSRF protection to allow us to debug more easily CORS and not create issues between the two. \r\n\r\nI think we should CSRF reject requests that are not `GET` and not from allowed origins even for self managed services. (S3 does not enforce any origin check by default, and it only concerns CORS, not CSRF)\r\n\r\nAlso, we let `OPTIONS` requests pass through first, there's no security issue with them. \r\n\r\n@thrau to continue on the subject. I think this is what the logic should look like\r\n\r\nnote: we should also validate CORS rules with `CORS_ALLOWED_HEADERS` instead of joining the request one and allowed ones, otherwise we don't validate the rule and accept any headers.\r\n\r\nedit: currently failing APIGW tests because of the change of logic with `OPTIONS` requests. Would be easily fixable",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 142,
        "deletions": 118,
        "changed_files": 23,
        "created_at": "2022-10-11T20:41:31Z",
        "closed_at": "2022-10-12T09:07:46Z",
        "merged_at": "2022-10-12T09:07:46Z",
        "body": "Changes:\r\n\r\n* Pinned image digests for managed runtimes\r\n* Pinned image digests for lambda common test build containers in their respective Makefile\r\n* Other misc. fixes in Makefiles\r\n* ~~Common tests don't have to skip the code fields anymore since the build for each runtime is now reproducible (i.e. always produces the same hash)~~  Unfortunately this only works locally, CI still produces different hashes for some reason",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 112,
        "deletions": 13,
        "changed_files": 9,
        "created_at": "2022-10-11T16:35:52Z",
        "closed_at": "2022-10-12T15:25:40Z",
        "merged_at": "2022-10-12T15:25:39Z",
        "body": "## Infra shutdown handler\r\nThis PR introduces a new option to hook into the infrastructure shutdown process.\r\nThe registered handlers will be called on infra shutdown, but before the python interpreter shutdown routine begins, giving a good alternative to `atexit` handlers, which can lead to problems with shutdown if they for example spawn non-daemonic threads.\r\nThe analytics still uses atexit, as it would need bigger refactoring to correctly differentiate between CLI and infra runs here.\r\n\r\n## Other changes\r\n* events job scheduler will now shutdown with the events service. If the interpreter hangs, at least most of the ASGI gateway error requests are related to this scheduler, and should be missing afterwards\r\n* lambda local execution will no longer block if the process refuses to terminate / answer. This should solve a hanging thread I found in a failing CI run, after a test rerun (might or might not influence the interpreter hang, but definitely good to fix)",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 5,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-10-11T14:45:59Z",
        "closed_at": "2022-10-12T10:03:14Z",
        "merged_at": "2022-10-12T10:03:14Z",
        "body": "The missing tags property in Rest API creation causes custom API IDs to not work in CDK deployments. This PR fixes that.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 40,
        "deletions": 5,
        "changed_files": 3,
        "created_at": "2022-10-11T08:07:28Z",
        "closed_at": "2022-10-11T11:17:58Z",
        "merged_at": "2022-10-11T11:17:58Z",
        "body": "This PR fixes the GitHub package installer's (and in particular the KinesisMock installer's) presence check for offline startups of LocalStack.\r\nPreviously, the path which is checked to test if the package is already installed was created by using the filename in the download URL. However, for GitHub assets, the download URL needs to be fetched from the release / tag data.\r\nIn order to allow offline startups, the GitHub installer has been slightly refactored such that it now uses the GitHub asset name (which can not use the release data anymore, but this wasn't needed in the first place).\r\n\r\nThis might cause minor conflicts with https://github.com/localstack/localstack/pull/6916.\r\nFixes https://github.com/localstack/localstack/issues/7000.",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 76,
        "deletions": 13,
        "changed_files": 3,
        "created_at": "2022-10-10T20:42:28Z",
        "closed_at": "2022-10-11T09:43:29Z",
        "merged_at": "2022-10-11T09:43:29Z",
        "body": "This PR adds the RegexConverter, and a new PortConverter as default converters to the `Router`. I've changed my mind a bit since this PR https://github.com/localstack/localstack/pull/5574, and I think adding some default converters to the `Router` can add value on top of werkzeug's `Map`. (/cc @giograno)\r\n\r\nThe port converter can hopefully simplify some of our URL patterns.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 137,
        "deletions": 91,
        "changed_files": 3,
        "created_at": "2022-10-10T16:17:00Z",
        "closed_at": "2022-10-11T01:48:07Z",
        "merged_at": "2022-10-11T01:48:07Z",
        "body": "This PR moves the S3 ASF virtual host proxy (rewriting virtual host addressed bucket requests to path addressed ones).\r\nIt also refactors a bit, adding the handler inside a class, allowing to have the rewriting logic inside of it. Also added a bit of logic removing server added headers (by hypercorn), because they would be added twice (once after being proxied, then when returning the actual response). \r\nAdded a small test to check that the headers are actually returned once, not sure it should be in s3 but maybe something along the testing the router or proxy, I'm not sure? \r\n",
        "comments": 5
    },
    {
        "merged": false,
        "additions": 19,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2022-10-10T14:55:37Z",
        "closed_at": "2022-10-11T07:48:06Z",
        "merged_at": null,
        "body": "Fixes #6973 \r\n\r\nChanges:\r\n* added a test to verify stack is in DELETE_COMPLETED state after deletion\r\n* fix state",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 324,
        "deletions": 518,
        "changed_files": 10,
        "created_at": "2022-10-10T12:03:53Z",
        "closed_at": "2022-10-18T06:33:59Z",
        "merged_at": "2022-10-18T06:33:59Z",
        "body": "### Summary\r\n\r\n- Removes dead code related to RegionBackend and legacy multi-accounts implementation\r\n- Migrates these provides to Stores which I overlooked :facepalm: Kinesis, Route53Resolver, Lambda\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 275,
        "deletions": 241,
        "changed_files": 5,
        "created_at": "2022-10-10T09:37:39Z",
        "closed_at": "2022-10-10T21:19:07Z",
        "merged_at": "2022-10-10T21:19:07Z",
        "body": "This PR aims at fixing the current S3 terraform test timeouts by enabling the parallel test execution for the S3 TF tests.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 18,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2022-10-10T05:32:04Z",
        "closed_at": "2022-10-10T21:30:36Z",
        "merged_at": "2022-10-10T21:30:36Z",
        "body": "# \ud83d\ude80 ASF Update Report \ud83d\ude80\nThis PR has been automatically generated to update the generated API stubs for our ASF services.\nIt uses the latest code-generator from the _master_ branch ([scaffold.py](https://github.com/localstack/localstack/blob/master/localstack/aws/scaffold.py)) and the latest _published_ version of [botocore](https://github.com/boto/botocore) to re-generate all API stubs which are already present in the `localstack.aws.api` module of the _master_ branch.\n\n## \ud83d\udd04 Updated Services\nThis PR updates the following services:\n- ec2\n- s3control\n\n## \ud83d\udc77\ud83c\udffd Handle this PR\nThe following options describe how to interact with this PR / the auto-update:\n\n\u2714\ufe0f **Accept Changes**\nIf the changes are satisfying, just squash-merge the PR and delete the source branch.\n\n\ud83d\udeab **Ignore Changes**\nIf you want to ignore the changes in this PR, just close the PR and *do not delete* the source branch. The PR will not be opened and a new PR will not be created for as long as the generated code does not change (or the branch is deleted). As soon as there are new changes, a new PR will be created.\n\n\u270f\ufe0f **Adapt Changes**\n*Don't do this.* The APIs are auto-generated. If you decide that the APIs should look different, you have to change the code-generation.\n\n\u23f8\ufe0f **Pause Updates**\nRemove the cron-schedule trigger of the GitHub Action workflow which creates these PRs. The action can then still be triggered manually, but it will not be executed automatically.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2022-10-10T02:31:43Z",
        "closed_at": "2022-10-11T08:52:23Z",
        "merged_at": "2022-10-11T08:52:23Z",
        "body": "[![Mend Renovate](https://app.renovatebot.com/images/banner.svg)](https://renovatebot.com)\n\nThis PR contains the following updates:\n\n| Package | Type | Update | Change |\n|---|---|---|---|\n| python | final | digest | `7bb70ac` -> `06d5be9` |\n| python | stage | digest | `7bb70ac` -> `06d5be9` |\n\n---\n\n### Configuration\n\n\ud83d\udcc5 **Schedule**: Branch creation - \"before 3am on Monday\" (UTC), Automerge - At any time (no schedule defined).\n\n\ud83d\udea6 **Automerge**: Disabled by config. Please merge this manually once you are satisfied.\n\n\u267b **Rebasing**: Whenever PR becomes conflicted, or you tick the rebase/retry checkbox.\n\n\ud83d\udd15 **Ignore**: Close this PR and you won't be reminded about these updates again.\n\n---\n\n - [ ] <!-- rebase-check -->If you want to rebase/retry this PR, click this checkbox.\n\n---\n\nThis PR has been generated by [Mend Renovate](https://www.mend.io/free-developer-tools/renovate/). View repository job log [here](https://app.renovatebot.com/dashboard#github/localstack/localstack).\n<!--renovate-debug:eyJjcmVhdGVkSW5WZXIiOiIzMi4yMjIuMyIsInVwZGF0ZWRJblZlciI6IjMyLjIzMi4wIn0=-->\n",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 78,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2022-10-09T15:31:30Z",
        "closed_at": "2022-10-11T10:58:55Z",
        "merged_at": "2022-10-11T10:58:55Z",
        "body": "Fix https://github.com/localstack/localstack/issues/6934\r\n\r\n@viren-nadkarni May you please guide me to improve? This is my first PR for hacktoberfest. I'm not sure if I've done it correctly. Thank you and I hope you have a wonderful day.",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 125,
        "deletions": 182,
        "changed_files": 11,
        "created_at": "2022-10-09T14:41:26Z",
        "closed_at": "2022-11-29T07:21:07Z",
        "merged_at": "2022-11-29T07:21:07Z",
        "body": "Upgrades moto-ext to 4.0.10.post1, which builds on the recent 4.0.10 release\r\n\r\nAdapted our patches/imports affected by\r\n* https://github.com/spulec/moto/pull/5122\r\n* https://github.com/spulec/moto/pull/5613\r\n* https://github.com/spulec/moto/pull/5654\r\n* https://github.com/spulec/moto/pull/5570",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 386,
        "deletions": 51,
        "changed_files": 11,
        "created_at": "2022-10-06T21:00:56Z",
        "closed_at": "2022-10-10T21:56:20Z",
        "merged_at": "2022-10-10T21:56:20Z",
        "body": "This PR implements the last small fixes to get the tests green in community.\r\n\r\n- Set the attributes stored in the `S3Store` to be `CrossRegionAttribute`, as a bucket can only be created in one region, and its configuration can be accessed from anywhere.\r\n- Fix notifications in case of a S3 pre-signed POST request (a bit of an ugly fix)\r\n- fix headers capitalization for S3 pre-signed URLs\r\n- return `Location` header in `CompleteMultipartUpload` response\r\n- fix tagging an object with an empty list\r\n- implement `GetObjectAttributes` operation, which is not implemented at all in moto (a mix of `HeadObject` and `ListParts`\r\n- fix non-caught exception when trying to get a deleted key in a versioned bucket\r\n- disable tests for the ASF S3 provider in `test_edge.py` that were related to S3 and the old proxy listener behaviour. \r\n- @dominikschubert fix a test in `test_cloudformation_legacy.py`: for s3 notifications configuration, when you set a target for notifications, S3 will check that the target exists by default. The provided ARN was computed using the region of the S3 bucket, but the actual queue was created in `us-east-1` by CFn. Not sure what the expected behaviour was, but computing the ARN to match the actual created queue's ARN fixed the test. ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 54,
        "deletions": 6,
        "changed_files": 4,
        "created_at": "2022-10-06T17:44:35Z",
        "closed_at": "2022-10-11T16:34:21Z",
        "merged_at": "2022-10-11T16:34:21Z",
        "body": "## Problem\r\nWe currently have the problem with the interpreter not shutting down on several test runs, both in CircleCI and GitHub Actions.\r\nIt seems some threads are actively still making requests, since requests keep coming in.\r\n\r\n## Changes\r\n* Add thread inspection output on the end of test executions, to check which threads are still running (and should not) after LocalStack is instructed to shutdown. Also, subprocesses spawned are enumerated and printed.\r\n* Add informational log outputs to requests failing due to executor shutdown, to check what requests are actually coming in here, to potentially make assumptions about the caller.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 832,
        "deletions": 37,
        "changed_files": 8,
        "created_at": "2022-10-05T21:14:59Z",
        "closed_at": "2022-10-06T17:39:00Z",
        "merged_at": "2022-10-06T17:39:00Z",
        "body": "This PR implements S3 pre-signed POST support\r\nCurrently, the provider does not implement signature validation, but it is not a lot of work to implement, as only the policy is signed (a JSON string encoded in base64). It can be done in a follow up PR. \r\n\r\nTo implement support for this operation, we needed to create an operation not defined in the specs, as the clients (like `Boto`) would never call directly to this URL. But it is implement server side, and documented. See https://docs.aws.amazon.com/AmazonS3/latest/API/RESTObjectPOST.html\r\n\r\nAlso, I had to make a small change to the serializer, but I'm not sure it should be generalised. I think 3XX status code are not supposed to return a body. So I skipped serializing the body in case the status code was >= 300 and < 400. \r\n\r\nIt also came to light that the botocore parser does not like 3XX responses from moto, as it tries to parse them as exception. I need to add a special `try...except` clause to catch the exception and act in consequence. \r\n\r\nIt also implements small tests fixes for pre-signed URL in general, and wrong logic in skipping them/checking conditions based on Legacy/ASF. ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 29,
        "deletions": 3,
        "changed_files": 2,
        "created_at": "2022-10-05T13:45:39Z",
        "closed_at": "2022-10-05T16:07:51Z",
        "merged_at": "2022-10-05T16:07:51Z",
        "body": "This PR fixes a bug where we wouldn't correctly add the `methods=[\"GET\", ...]` parameter from a route to the underlying rule, and would therefore not route correctly if there were multiple methods with different HTTP methods on the same URL.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 10,
        "deletions": 4,
        "changed_files": 2,
        "created_at": "2022-10-05T12:09:18Z",
        "closed_at": "2022-10-05T16:09:28Z",
        "merged_at": "2022-10-05T16:09:28Z",
        "body": "This PR adds two path prefix rules for sagemaker",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 59,
        "deletions": 23,
        "changed_files": 3,
        "created_at": "2022-10-05T11:28:19Z",
        "closed_at": "2022-10-05T16:03:09Z",
        "merged_at": "2022-10-05T16:03:09Z",
        "body": "Tie Lambda backend lookup to resource ARNs to avoid region mismatches.\r\n\r\nThe problem is that we're currently accessing `LambdaRegion.get()` in a few places, and the assumption is that the proper region is configured in the context (which is a conceptual flaw in the first place). This may not be the case, e.g., when restoring state from persistence/pods, where we iterate through the regions, and then restore the function code for each function in each region.\r\n\r\nThis is currently breaking our integration tests upstream (restoring Lambdas from pods/persistence) in platform. Example of an error we're seeing in the logs:\r\n```\r\nlocalstack_main | 2022-10-04T21:56:21.428  INFO --- [   asgi_gw_1] l.s.awslambda.persistence  : Unable to load user code for Lambda function arn:aws:lambda:us-east-2:000000000000:function:PreSignUpLambda: 'arn:aws:lambda:us-east-1:000000000000:function:PreSignUpLambda'\r\n```\r\n\r\nShould be considered more as a quick fix / bandaid for now. Also added a small unit test, to test the lookup with different input parameters.",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 861,
        "deletions": 696,
        "changed_files": 46,
        "created_at": "2022-10-04T18:31:12Z",
        "closed_at": "2022-10-17T13:05:16Z",
        "merged_at": "2022-10-17T13:05:16Z",
        "body": "This PR organizes the CFn tests. ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 99,
        "deletions": 184,
        "changed_files": 4,
        "created_at": "2022-10-04T12:53:23Z",
        "closed_at": "2022-10-04T15:46:49Z",
        "merged_at": "2022-10-04T15:46:49Z",
        "body": "test_integration.py has been notoriously flaky, which i think is in part because it is not resilient towards reruns. reruns almost never work, because tests don't clean up resources properly. [Here is an example](https://circleci.com/api/v1.1/project/github/localstack/localstack/64160/output/105/0?file=true&allocation-id=633a1249265c77718d64f868-0-build%2FW9WZCTDV) (search for `tests/integration/test_integration.py::TestIntegration::test_firehose_kinesis_to_s3 `).\r\n\r\nThis PR refactors the test to use our factory fixtures, and generated resource names where possible.\r\n\r\nI also removed a flaky sqs test that has been skipped for a while, which is now in covered by `test_lambda_integration_sqs.py` (apart from the assert whether the lambda logs return the correct events, for which i created a TODO)\r\n\r\nThis will hopefully greenify https://github.com/localstack/localstack/pull/6964\r\n\r\n/add\r\na very odd linting error occured in #6971 that tried to lint the git history :thinking:\r\ni thought creating a new pr with a different branch name would fix the issue, which it did, but i also added .git to the list of exclusions for flake8",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 98,
        "deletions": 183,
        "changed_files": 3,
        "created_at": "2022-10-04T10:54:19Z",
        "closed_at": "2022-10-04T12:42:48Z",
        "merged_at": null,
        "body": "test_integration.py has been notoriously flaky, which i think is in part because it is not resilient towards reruns. reruns almost never work, because tests don't clean up resources properly. [Here is an example](https://circleci.com/api/v1.1/project/github/localstack/localstack/64160/output/105/0?file=true&allocation-id=633a1249265c77718d64f868-0-build%2FW9WZCTDV) (search for `tests/integration/test_integration.py::TestIntegration::test_firehose_kinesis_to_s3 `).\r\n\r\nThis PR refactors the test to use our factory fixtures, and generated resource names where possible.\r\n\r\nI also removed a flaky sqs test that has been skipped for a while, which is now in covered by `test_lambda_integration_sqs.py` (apart from the assert whether the lambda logs return the correct events, for which i created a TODO)\r\n\r\nThis will hopefully greenify https://github.com/localstack/localstack/pull/6964",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2022-10-03T14:44:45Z",
        "closed_at": "2022-10-04T09:30:37Z",
        "merged_at": "2022-10-04T09:30:37Z",
        "body": "## Problem\r\n`importlib-metadata` recently had their 5.0 major version update, where they removed some \"compatibility shims\" (https://importlib-metadata.readthedocs.io/en/latest/history.html). I think it is, more concretely, https://github.com/python/importlib_metadata/issues/284 which lead to the incompatibility. \r\nThis lead to stevedore returning an error, since it tries to access the entrypoints like a dict, and therefore in python 3.7 (3.8 and later use importlib.metadata directly) the CLI to start LS did not work anymore.\r\nSince stevedore abandoned python3.7 with its latest version 4.0.0, the chances of a fix are slim (even though the dict-like access might be removed at some point), so for now a dependency pin has to suffice.\r\n\r\n## Solution\r\nPin the dependency of importlib-metadata to <5.0 for now. Since this dependency is only used in python3.7 or lower, the pin is only applicable for those versions.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 3,
        "changed_files": 1,
        "created_at": "2022-10-03T09:07:56Z",
        "closed_at": "2022-10-03T22:01:14Z",
        "merged_at": "2022-10-03T22:01:14Z",
        "body": null,
        "comments": 0
    },
    {
        "merged": true,
        "additions": 89,
        "deletions": 0,
        "changed_files": 3,
        "created_at": "2022-10-03T05:19:28Z",
        "closed_at": "2022-10-03T20:13:42Z",
        "merged_at": "2022-10-03T20:13:42Z",
        "body": "# \ud83d\ude80 ASF Update Report \ud83d\ude80\nThis PR has been automatically generated to update the generated API stubs for our ASF services.\nIt uses the latest code-generator from the _master_ branch ([scaffold.py](https://github.com/localstack/localstack/blob/master/localstack/aws/scaffold.py)) and the latest _published_ version of [botocore](https://github.com/boto/botocore) to re-generate all API stubs which are already present in the `localstack.aws.api` module of the _master_ branch.\n\n## \ud83d\udd04 Updated Services\nThis PR updates the following services:\n- acm\n- ec2\n- ssm\n\n## \ud83d\udc77\ud83c\udffd Handle this PR\nThe following options describe how to interact with this PR / the auto-update:\n\n\u2714\ufe0f **Accept Changes**\nIf the changes are satisfying, just squash-merge the PR and delete the source branch.\n\n\ud83d\udeab **Ignore Changes**\nIf you want to ignore the changes in this PR, just close the PR and *do not delete* the source branch. The PR will not be opened and a new PR will not be created for as long as the generated code does not change (or the branch is deleted). As soon as there are new changes, a new PR will be created.\n\n\u270f\ufe0f **Adapt Changes**\n*Don't do this.* The APIs are auto-generated. If you decide that the APIs should look different, you have to change the code-generation.\n\n\u23f8\ufe0f **Pause Updates**\nRemove the cron-schedule trigger of the GitHub Action workflow which creates these PRs. The action can then still be triggered manually, but it will not be executed automatically.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 3,
        "changed_files": 2,
        "created_at": "2022-10-02T20:03:30Z",
        "closed_at": "2022-10-04T14:33:10Z",
        "merged_at": "2022-10-04T14:33:10Z",
        "body": "Upgrades moto to the latest version that was recently released.\r\n\r\n* Had to fix one cfn ec2 test that started failing, apparently due to this change: https://github.com/spulec/moto/pull/5509 unfortunately I couldn't verify the behavior against AWS (stack would not deploy, did not figure out why)",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 12,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2022-10-02T17:09:17Z",
        "closed_at": "2022-10-02T19:46:32Z",
        "merged_at": "2022-10-02T19:46:32Z",
        "body": "This PR downgrades terraform to 1.2.9 in the terraform tests. This is a wrokaround for an issue that started appearing with 1.3.0 https://github.com/hashicorp/terraform-provider-aws/issues/27049\r\n\r\n@dominikschubert already did some initial detective work in https://github.com/localstack/localstack/pull/6954.\r\n\r\nI remembered from working on https://github.com/localstack/localstack-terraform-test that the tests actually check the path for an existing terraform binary, and they will use that to deploy the test scripts. The github action seems to come with terraform 1.3.0, so I added a step to overwrite it with a pinned version, in this case 1.2.9, which seems to still work.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1358,
        "deletions": 11,
        "changed_files": 7,
        "created_at": "2022-10-01T20:33:27Z",
        "closed_at": "2022-10-04T18:15:04Z",
        "merged_at": "2022-10-04T18:15:04Z",
        "body": "This PR implement support for S3 website hosting with additional features than the current provider.\r\n\r\nMost S3 website features are now implemented, including `RoutingRules`, configuration validation...\r\n\r\nhttps://docs.aws.amazon.com/AmazonS3/latest/userguide/WebsiteHosting.html\r\n\r\nNote: permission/ACLs are not enforced currently, and it can be added in another PR with a feature flag in the same vein as IAM. ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 35,
        "deletions": 225,
        "changed_files": 19,
        "created_at": "2022-10-01T17:40:39Z",
        "closed_at": "2022-10-04T09:27:53Z",
        "merged_at": "2022-10-04T09:27:53Z",
        "body": "This PR cleans up some dead code, or simplifies existing code to remove util functions only used in few locations.\r\n\r\nI also refactored some imports to get rid of the `utils.generic` package.",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 0,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-09-30T05:21:43Z",
        "closed_at": "2023-01-25T10:19:44Z",
        "merged_at": null,
        "body": "[`setup_logging`](https://github.com/localstack/localstack/blob/75f70e667fa164d442413372154b3e28269fea58/localstack/services/infra.py#L414\r\n) is also being done on `infra.start_infra()`\r\n\r\n**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 38,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2022-09-30T05:05:59Z",
        "closed_at": "2022-10-11T13:51:51Z",
        "merged_at": "2022-10-11T13:51:51Z",
        "body": "Trying to find the issues that cause the terrarform tests to fail recently.\r\n\r\nA few notes (will be updated as the PR progresses):\r\n- changing the AWS region fixes some of these issues. Not all AWS AMIs in EC2 are available in all regions, so for example setting region to \"us-west-2\" fixes one error in the EC2 tests complaining about an AMI not existing. This indicates that the recent moto + store changes might be related somehow to these issues.\r\n\r\n\r\nChanges in this PR:\r\n\r\n- GitHub action has more control over the refs we checkout when using workflow_dispatch (i.e. manually initiated runs).\r\n- GitHub action stores debug logs for each test and uploads them on failure ( => might need to be adjusted a bit since this produces quite a lot of output). They're only uploaded when the tests fail.\r\n",
        "comments": 9
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2022-09-29T15:11:25Z",
        "closed_at": "2022-09-29T16:15:47Z",
        "merged_at": "2022-09-29T16:15:47Z",
        "body": "this PR addresses several issues that caused builds to hit github rate limits and then causing kinesis tests to fail/time out.\r\n\r\n* decorators are not inherited when methods are overwritten. therefore adding `@lru_cache()` on the abstract method will not cache anything. \r\n* `_get_installer` creates a fresh version of the installer every time, so even then, caches in the installer wouldn't be used, so i added an `lru_cache()` around the high-level `get_installer` function to memoize installer instances.\r\n\r\n/cc @viren-nadkarni @alexrashed ",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-09-29T12:54:34Z",
        "closed_at": "2022-09-30T14:11:29Z",
        "merged_at": "2022-09-30T14:11:29Z",
        "body": "This is a fix for https://github.com/localstack/localstack/issues/6739. There is no breaking changes and the linting / format tests are passing.",
        "comments": 6
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-09-29T12:39:46Z",
        "closed_at": "2022-09-29T14:59:26Z",
        "merged_at": "2022-09-29T14:59:26Z",
        "body": "This PR fixes refs to an upstream dependency: https://github.com/carlossg/docker-maven\r\n\r\nThe files were removed from `master` and are causing build failures:\r\n\r\nhttps://github.com/carlossg/docker-maven/commit/b0539da7612b617ecc19de057872e1469e2ac825\r\n\r\n```\r\n#6 [java-builder 1/3] FROM docker.io/library/python:3.10.7-slim-buster@sha256:7bb70ac0176d6a8bdabba60cd8ededd6494605f225365510f7ee5691a4004463\r\n#6 DONE 0.0s\r\n\r\n#7 https://raw.githubusercontent.com/carlossg/docker-maven/master/openjdk-11/settings-docker.xml\r\n#7 ERROR: invalid response status 404\r\n\r\n#8 importing cache manifest from localstack/localstack-light\r\n#8 ...\r\n\r\n#9 [auth] localstack/localstack-light:pull token for registry-1.docker.io\r\n#9 DONE 0.0s\r\n\r\n#8 importing cache manifest from localstack/localstack-light\r\n#8 DONE 1.2s\r\n\r\n#3 [internal] load metadata for docker.io/library/python:3.10.7-slim-buster@sha256:7bb70ac0176d6a8bdabba60cd8ededd6494605f225365510f7ee5691a4004463\r\n------\r\n > https://raw.githubusercontent.com/carlossg/docker-maven/master/openjdk-11/settings-docker.xml:\r\n------\r\nERROR: failed to solve: failed to load cache key: invalid response status 404\r\nmake[1]: *** [Makefile:99: docker-build] Error 1\r\nmake[1]: Leaving directory '/home/runner/work/localstack-ext/localstack-ext/localstack'\r\nmake: *** [Makefile:109: docker-build-light] Error 2\r\nError: Process completed with exit code 2.\r\n```\r\n\r\nhttps://github.com/localstack/localstack-ext/actions/runs/3150725974/jobs/5125007279#step:16:882",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 9,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2022-09-28T19:58:02Z",
        "closed_at": "2022-09-29T14:59:46Z",
        "merged_at": "2022-09-29T14:59:46Z",
        "body": "Upgrades to the latest moto-ext which is based on https://github.com/spulec/moto/commit/76b127bba65771c1d3f279cd2c69309959b675d8 (already part of moto 4.0.6.dev)\r\n\r\nI added a method to the serializer that was removed/renamed in moto to localstack.\r\n\r\n/cc @ackdav: includes the fix for the organizations support case",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 24,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2022-09-28T18:35:10Z",
        "closed_at": "2022-09-29T16:19:28Z",
        "merged_at": "2022-09-29T16:19:27Z",
        "body": "This PR is a bandaid for an issue between the old s3 provider and ASF. The issue is related to s3-website requests and the response parser in the ASF handler chain.\r\n\r\nWhen calling something like `curl http://web-ui-test.s3-website.localhost.localstack.cloud:4566`, the ASF parser will interpret the request as a `ListObjects` operation because the parser doesn't know that s3-website requests are treated specially. It simply returns the content of the configured index file. Consequently, the service response parser fails and spams the logs, because it attempts to parse the response as a `ListObjectOutput`.\r\n\r\nAs a solution, we add a service response modifier that unsets the operation from the context before continuing handling the response.\r\n\r\nTo reproduce the issue with the current provider:\r\n\r\nprepare the website:\r\n```bash\r\nmkdir web-ui-test\r\necho '<!DOCTYPE html><html></html>' > web-ui-test/index.html\r\nawslocal s3 mb s3://web-ui-test\r\nawslocal s3 sync --delete ./web-ui-test s3://web-ui-test\r\nawslocal s3 website s3://web-ui-test --index-document index.html\r\n```\r\n\r\nmake a request to the website index:\r\n```bash\r\ncurl http://web-ui-test.s3-website.localhost.localstack.cloud:4566\r\n```\r\n\r\nin the logs you should see that the last request in the log is a `ListObjects` request that raises an error in the handler chain.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 56,
        "deletions": 21,
        "changed_files": 2,
        "created_at": "2022-09-28T10:37:41Z",
        "closed_at": "2022-10-18T15:18:09Z",
        "merged_at": "2022-10-18T15:18:09Z",
        "body": "Adds initial support for removing services from the active service pool. \r\nRelated to CP pr in ext.",
        "comments": 6
    },
    {
        "merged": true,
        "additions": 9,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-09-27T23:02:45Z",
        "closed_at": "2022-09-29T16:50:52Z",
        "merged_at": "2022-09-29T16:50:52Z",
        "body": "I went to use localstack for the first time yesterday, installed it via homebrew, and ran `localstack start --host` as I didn't have docker running at the moment. Because homebrew is effectively the same as the \"light\" docker image, I got greeted with an unhelpful stacktrace and no indication of what went wrong:\n\n```\n$ localstack start --host\n\n     __                     _______ __             __\n    / /   ____  _________ _/ / ___// /_____ ______/ /__\n   / /   / __ \\/ ___/ __ `/ /\\__ \\/ __/ __ `/ ___/ //_/\n  / /___/ /_/ / /__/ /_/ / /___/ / /_/ /_/ / /__/ ,<\n /_____/\\____/\\___/\\__,_/_//____/\\__/\\__,_/\\___/_/|_|\n\n \ud83d\udcbb LocalStack CLI 1.1.0\n\n[16:59:23] starting LocalStack in host mode \ud83d\udcbb                                                                                                                                                                                    localstack.py:137\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 LocalStack Runtime Log (press CTRL-C to quit) \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nTraceback (most recent call last):\n  File \"/opt/homebrew/bin/localstack\", line 23, in <module>\n    main()\n  File \"/opt/homebrew/bin/localstack\", line 19, in main\n    main.main()\n  File \"/opt/homebrew/Cellar/localstack/1.1.0/libexec/lib/python3.10/site-packages/localstack/cli/main.py\", line 6, in main\n    cli()\n  File \"/opt/homebrew/Cellar/localstack/1.1.0/libexec/lib/python3.10/site-packages/localstack/cli/plugin.py\", line 15, in __call__\n    self.group(*args, **kwargs)\n  File \"/opt/homebrew/Cellar/localstack/1.1.0/libexec/lib/python3.10/site-packages/click/core.py\", line 1130, in __call__\n    return self.main(*args, **kwargs)\n  File \"/opt/homebrew/Cellar/localstack/1.1.0/libexec/lib/python3.10/site-packages/click/core.py\", line 1055, in main\n    rv = self.invoke(ctx)\n  File \"/opt/homebrew/Cellar/localstack/1.1.0/libexec/lib/python3.10/site-packages/click/core.py\", line 1657, in invoke\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\n  File \"/opt/homebrew/Cellar/localstack/1.1.0/libexec/lib/python3.10/site-packages/click/core.py\", line 1404, in invoke\n    return ctx.invoke(self.callback, **ctx.params)\n  File \"/opt/homebrew/Cellar/localstack/1.1.0/libexec/lib/python3.10/site-packages/click/core.py\", line 760, in invoke\n    return __callback(*args, **kwargs)\n  File \"/opt/homebrew/Cellar/localstack/1.1.0/libexec/lib/python3.10/site-packages/localstack/utils/analytics/cli.py\", line 66, in publisher_wrapper\n    return fn(*args, **kwargs)\n  File \"/opt/homebrew/Cellar/localstack/1.1.0/libexec/lib/python3.10/site-packages/localstack/cli/localstack.py\", line 147, in cmd_start\n    bootstrap.start_infra_locally()\n  File \"/opt/homebrew/Cellar/localstack/1.1.0/libexec/lib/python3.10/site-packages/localstack/utils/bootstrap.py\", line 258, in start_infra_locally\n    from localstack.services import infra\n  File \"/opt/homebrew/Cellar/localstack/1.1.0/libexec/lib/python3.10/site-packages/localstack/services/infra.py\", line 13, in <module>\n    from moto.core import BaseModel\nModuleNotFoundError: No module named 'moto'\n```\n\nAt first I was afraid that I had actually done something to break localstack without even trying, but eventually realized I simply didn't have a \"full\" install of localstack. I've added an ImportError check around running in `--host` mode that prints out a nicer message with a potential resolution:\n\n```\n$ localstack start --host --no-banner\nError: It appears you have a light install of localstack which only supports running in docker\nIf you would like to use --host, please reinstall localstack using `pip install localstack[runtime]`\n```",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 107,
        "deletions": 161,
        "changed_files": 9,
        "created_at": "2022-09-27T19:24:16Z",
        "closed_at": "2022-10-07T04:34:06Z",
        "merged_at": "2022-10-07T04:34:06Z",
        "body": "Work in progress to make the template_deployer.py leaner.",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 29,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2022-09-27T16:02:24Z",
        "closed_at": "2022-10-04T20:44:28Z",
        "merged_at": "2022-10-04T20:44:28Z",
        "body": "Test to validate Opensearch domain deployment through Cfn. Related to #6830",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 68,
        "deletions": 10,
        "changed_files": 3,
        "created_at": "2022-09-27T10:33:00Z",
        "closed_at": "2022-10-14T18:31:06Z",
        "merged_at": "2022-10-14T18:31:06Z",
        "body": "Addresses https://github.com/localstack/localstack/issues/6815\r\n\r\nSign/Verify operations in KMS have two modes. Users can supply\r\n- either raw message - KMS then calculates a digest of that message internally and then signs/verifies that digest;\r\n- or a digest prepared by a user - in this case the digest calculation inside of KMS is skipped, and the supplied digest is signed/verified directly.\r\n\r\nOriginally LocalStack was ignoring MessageType parameter. This PR adds logic to check the value of the MessageType parameter and to act accordingly.\r\n\r\nAWS probably calculates different digests depending on the SigningAlgorithm parameter. While with this PR in LocalStack we are going to always use SHA256 digest. Not ideal, but currently there is little need to spend more effort into this.\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-09-27T06:55:10Z",
        "closed_at": "2022-09-27T11:27:04Z",
        "merged_at": "2022-09-27T11:27:04Z",
        "body": "PyOpenSSL was pinned to 21.0.0 in #6936. However this introduced other unrelated regressions.\r\n\r\nThis PR now pins PyOpenSSL to 22.0.0, which is compatible with OpenSSL 1.1.1 and without the issue in #6936 \r\n\r\nPreviously failing ext test: https://github.com/localstack/localstack-ext/actions/runs/3133713131/jobs/5087396457#step:17:1157",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 282,
        "deletions": 4,
        "changed_files": 3,
        "created_at": "2022-09-26T17:21:40Z",
        "closed_at": "2022-09-28T15:13:00Z",
        "merged_at": "2022-09-28T15:13:00Z",
        "body": "This PR adds validation to message attributes in SNS, which was allowing empty message attributes values, unlike AWS. This in turn would raises a `KeyError` while preparing the message in a thread. \r\nWe now validate the message synchronously in the operation call to allow raising an Exception.\r\n\r\n_fixes #6907_",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 53,
        "deletions": 5,
        "changed_files": 2,
        "created_at": "2022-09-26T16:03:05Z",
        "closed_at": "2022-09-26T21:50:23Z",
        "merged_at": "2022-09-26T21:50:23Z",
        "body": "This PR fixes a performance issue that occurred with AWS responses that have streaming bodies. The change exposes the underlying iterator of `Response` directly through the `_ResponseStream` wrapper, so invocations of the form `for item in stream` no longer go through the pointless `read_into` abstraction.\r\n\r\n## Detailed explanation\r\n\r\nThis issues surfaced with the new S3 provider, where `get_object` download would take exponentially longer the larger the body. When bodies are streamed, we wrap the response in a `_ResponseStream` object that exposes the response as a readable IO object\r\nhttps://github.com/localstack/localstack/blob/68c507ed073da8d5c5bd626e4106e4a40b4daee0/localstack/aws/client.py#L150\r\n\r\nThe issue is that the `_ResponseStream` is invoked in the form `for item in stream`. Through the RawIOBase abstraction, this creates an iterator by looping over calls to `read_into` with a byte buffer of size 1.\r\nThe culprit is this line in particular:\r\nhttps://github.com/localstack/localstack/blob/68c507ed073da8d5c5bd626e4106e4a40b4daee0/localstack/aws/client.py#L37\r\nSince the underlying response is one big blob in memory, `chunk` will actually contain the entire s3 object. Consequently, we're always popping a _single_ byte off the entire chunk to populate the response, and copying the remaining buffer. This will take longer depending on how big chunk is, which is the exponential runtime behavior we were seeing.\r\n\r\nAfter the fix, read_into might actually be dead code now, since the underlying webserver always consumes the response stream using the `for data in stream` pattern. However, `read_into` is still necessary for the `RawIOBase` implementation, so I added tests to cover it.\r\n\r\n## Reproduce\r\n\r\nHere's a simple benchmark. On my machine this takes\r\n* 1.3 seconds without the fix\r\n* 0.00016 seconds with the fix\r\n\r\n```python\r\nimport timeit\r\n\r\nfrom werkzeug.wrappers.response import _iter_encoded, Response\r\n\r\nfrom localstack.aws.client import _ResponseStream\r\n\r\nn_bytes = 200000\r\n\r\n\r\ndef process_stream():\r\n    b = b'0' * n_bytes\r\n    stream = _ResponseStream(Response(b))\r\n\r\n    for line in _iter_encoded(stream, 'utf-8'):\r\n        assert line\r\n\r\n\r\ndef main():\r\n    print(timeit.timeit(stmt=process_stream, number=1))\r\n\r\n\r\nif __name__ == '__main__':\r\n    main()\r\n```",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-09-26T10:31:09Z",
        "closed_at": "2022-09-27T05:18:25Z",
        "merged_at": "2022-09-27T05:18:25Z",
        "body": "pyOpenSSL 22.1.0 drops support for SSLv2 and SSLv3. This breaks pyftplib which is used in AWS Transfer tests. It is not possible to pin it in pyftplib as it uses pyOpenSSL as an indirect dependency (by not having an explicit dependency in setup).\r\n\r\nChangelog: https://pypi.org/project/pyOpenSSL/\r\n\r\nFailure: https://github.com/localstack/localstack-ext/actions/runs/3125572451/jobs/5071294179#step:17:1174",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 54,
        "deletions": 4,
        "changed_files": 5,
        "created_at": "2022-09-26T07:26:48Z",
        "closed_at": "2022-09-27T17:41:42Z",
        "merged_at": "2022-09-27T17:41:42Z",
        "body": "Minor fix for Lambda layer response parsing. Addresses https://github.com/localstack/serverless-localstack/issues/175\r\n\r\nCurrently, we're taking the incoming `Layers` parameter (which is a list of strings) in the `UpdateFunctionConfiguration` API method, and simply pass it through to the response - however, the response `Layers` attribute should be a list of dicts with the details. \r\n\r\nFor now, simply removing `Layers` from the response - it is already being added separately upstream, so this should not break -ext functionality.\r\n\r\n---\r\nPR also sneaks in a small fix for `transact_write_items` that surfaced during testing, to raise the correct exception (ASF exception, instead of boto3 error), in order to avoid 500 errors. (Happy to create that as a separate PR, but seemed reasonably simple/innocuous to add it here)",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 171,
        "deletions": 92,
        "changed_files": 3,
        "created_at": "2022-09-26T05:31:22Z",
        "closed_at": "2022-09-30T14:12:58Z",
        "merged_at": "2022-09-30T14:12:58Z",
        "body": "# \ud83d\ude80 ASF Update Report \ud83d\ude80\nThis PR has been automatically generated to update the generated API stubs for our ASF services.\nIt uses the latest code-generator from the _master_ branch ([scaffold.py](https://github.com/localstack/localstack/blob/master/localstack/aws/scaffold.py)) and the latest _published_ version of [botocore](https://github.com/boto/botocore) to re-generate all API stubs which are already present in the `localstack.aws.api` module of the _master_ branch.\n\n## \ud83d\udd04 Updated Services\nThis PR updates the following services:\n- ec2\n- s3control\n- ssm\n\n## \ud83d\udc77\ud83c\udffd Handle this PR\nThe following options describe how to interact with this PR / the auto-update:\n\n\u2714\ufe0f **Accept Changes**\nIf the changes are satisfying, just squash-merge the PR and delete the source branch.\n\n\ud83d\udeab **Ignore Changes**\nIf you want to ignore the changes in this PR, just close the PR and *do not delete* the source branch. The PR will not be opened and a new PR will not be created for as long as the generated code does not change (or the branch is deleted). As soon as there are new changes, a new PR will be created.\n\n\u270f\ufe0f **Adapt Changes**\n*Don't do this.* The APIs are auto-generated. If you decide that the APIs should look different, you have to change the code-generation.\n\n\u23f8\ufe0f **Pause Updates**\nRemove the cron-schedule trigger of the GitHub Action workflow which creates these PRs. The action can then still be triggered manually, but it will not be executed automatically.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 10,
        "deletions": 1,
        "changed_files": 3,
        "created_at": "2022-09-25T19:09:32Z",
        "closed_at": "2022-09-25T21:35:17Z",
        "merged_at": "2022-09-25T21:35:17Z",
        "body": "Small fix to handle empty (`None`) values for `init` dir with legacy directories in non-Docker mode.\r\n\r\nAddresses https://github.com/localstack/helm-charts/issues/60 \r\n\r\nThe issue can be replicated when deploying the Helm chart in a local k3d Kubernetes cluster. More easily, can also be replicated when using legacy directories in host mode:\r\n```\r\nLEGACY_DIRECTORIES=1 bin/localstack start --host\r\n```\r\n\r\n@thrau If you feel that there is a better fix , please feel free to push changes directly to the PR. \ud83d\udc4d  This is more of a bandaid/quickfix now - but seems to be good enough, just to fix the symptom for now (and as we're going to phase out the legacy filesystem hierarchy at some point soon).\r\n\r\n---\r\nSide note: Interestingly, this cannot be replicated in the built-in Kubernetes that ships with Docker Desktop (as commented on issue https://github.com/localstack/helm-charts/issues/60). The reason is that after deploying the Helm chart into the local kube cluster, and `exec`'ing into the pod, the `/.dockerenv` marker file is present in the pod (which we're using for our `in_docker()` detection):\r\n```\r\n$ helm install ...\r\n...\r\n$ kubectl exec -it test-localstack-776b769f8-k9rjw bash\r\n# ls -la /.dockerenv\r\n-rwxr-xr-x 1 root root 0 Sep 25 11:42 /.dockerenv\r\n```",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 31,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2022-09-25T19:02:15Z",
        "closed_at": "2023-10-10T14:56:44Z",
        "merged_at": null,
        "body": "* Some AWS SDKs require header flag value in bool to be in lowercase\r\n\r\n**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 5
    },
    {
        "merged": true,
        "additions": 158,
        "deletions": 4,
        "changed_files": 4,
        "created_at": "2022-09-24T13:24:25Z",
        "closed_at": "2022-09-26T14:34:20Z",
        "merged_at": "2022-09-26T14:34:20Z",
        "body": "Add utilities to check availability and reserve Docker container ports. This is a preparation for upcoming changes to address #6225 .\r\n\r\nSummary of changes:\r\n* add `container_port_can_be_bound(..)` utility to determine whether a (host) port can be bound by a container. The current approach is to simply spin up a temporary test container with the port mapping, to see if it can be started up properly. An alternative would be to query the Docker API for current containers and port allocations, but this approach seems simpler and more reliable for now.\r\n* add `reserve_available_container_port(..)` utility that determines and reserves a (random) port that can be bound by new Docker containers to be created\r\n* add `is_port_reserved(..)` method to `PortRange` class to determine whether a port is already reserved (in-memory)\r\n* add a few simple tests to cover the port reservation functionality",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 94,
        "deletions": 7,
        "changed_files": 5,
        "created_at": "2022-09-23T14:19:38Z",
        "closed_at": "2022-10-05T21:39:12Z",
        "merged_at": "2022-10-05T21:39:11Z",
        "body": "### Summary\r\nThis PR solves an issue where `GetItem` of DynamoDB returns a differently encoded value than `GetRecords` of DynamoDBStreams. This is especially obvious when using binary data (a test case of `b\"\\x90\"` already reveals the issue).\r\n\r\nAdds test case `test_data_encoding_consistency`\r\n\r\n### Related\r\nFixes: #6786, Fixes: #6700 \r\n\r\n### Note\r\nThe test case is currently flaky, therefore I draft the PR for now. \r\nHowever, since a similary structured test case [here](https://github.com/localstack/localstack/blob/master/tests/integration/test_dynamodb.py#L1188) is also flaky, I highly suspect that the flakiness is not because of my solution, but because of the client. ",
        "comments": 3
    },
    {
        "merged": false,
        "additions": 45,
        "deletions": 0,
        "changed_files": 3,
        "created_at": "2022-09-23T14:11:47Z",
        "closed_at": "2023-03-14T17:00:11Z",
        "merged_at": null,
        "body": "This logger is supposed to help with 2 things:\r\n1. It is easier to debug configurations when we see what they are. If LocalStack is queried by Terraform etc, it is not always clear, what calls are there, what resources get created. This logging would make it explicit.\r\n2. Not all calls end up logging regular responses. For example, test_crypto.py from the Pro version uses some streaming libraries that make calls that do not result in ResponseLogger outputting anything. This RequestLogger succeeds there.\r\n\r\nThe resulting log looks like this:\r\n\r\nAWS request to kms.DescribeKey. Can reproduce in CLI with: awslocal kms describe-key --region us-east-1 --cli-input-json '{\"KeyId\": \"41cc5e04-7326-43c6-b7c5-79cfedb23f01\"}'\r\nAWS kms.DescribeKey => 200\r\n\r\nThere is an assumption here that all operation names like GenerateDataKey can be turned into proper operation names for CLI with this parsing - splitting CamelCase, lowercasing all the words and joining them with dashes. But even if that is not true - there is already a benefit from seeing parameters.\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 613,
        "deletions": 309,
        "changed_files": 22,
        "created_at": "2022-09-23T05:31:17Z",
        "closed_at": "2022-10-13T14:02:19Z",
        "merged_at": "2022-10-13T14:02:19Z",
        "body": "This pr migrates the install routines of the following dependencies to the new architecture as introduced in #6783:\r\n\r\n- awslambda-runtime\r\n- awslambda-go-runtime\r\n- cloudformation-libs\r\n- elasticmq (legacy)\r\n- kms-local\r\n- lambda-java-libs\r\n- stepfunctions-local\r\n- terraform\r\n\r\nThis completes all the install routines currently installable via lpm.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 143,
        "deletions": 70,
        "changed_files": 3,
        "created_at": "2022-09-22T19:56:10Z",
        "closed_at": "2022-09-26T16:28:44Z",
        "merged_at": "2022-09-26T16:28:44Z",
        "body": "The main part is adding key state constraints for KMS operations, e.g. making KMS to throw an exception if there is an attempt to use a disabled key for encryption etc.\r\n\r\nAlso some cleanups - removal of the deprecated KmsBackend and some other junk.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 6,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-09-22T11:22:17Z",
        "closed_at": "2022-09-22T17:48:16Z",
        "merged_at": "2022-09-22T17:48:16Z",
        "body": "In the old edge proxy, we assumed each proxy listener was assigned a port which pointed to the running backend (this was often just moto). A generic health check would check whether the port of the backend was available. For ASF services, this doesn't really make sense, so the port may be None in these cases. This PR adds a guard to avoid errors that would emerge sometimes when adding new services.\r\n\r\nThis is candidate code to be removed/reworked once we have the remaining proxy listeners (S3, Lambda) refactored.\r\n\r\nExample:\r\n\r\n```\r\n--- Logging error ---\r\nTraceback (most recent call last):\r\n  File \"/home/thomas/.pyenv/versions/3.10.4/lib/python3.10/logging/__init__.py\", line 1100, in emit\r\n    msg = self.format(record)\r\n  File \"/home/thomas/.pyenv/versions/3.10.4/lib/python3.10/logging/__init__.py\", line 943, in format\r\n    return fmt.format(record)\r\n  File \"/home/thomas/.pyenv/versions/3.10.4/lib/python3.10/logging/__init__.py\", line 678, in format\r\n    record.message = record.getMessage()\r\n  File \"/home/thomas/.pyenv/versions/3.10.4/lib/python3.10/logging/__init__.py\", line 368, in getMessage\r\n    msg = msg % self.args\r\nTypeError: %d format: a real number is required, not NoneType\r\nCall stack:\r\n  File \"/home/thomas/.pyenv/versions/3.10.4/lib/python3.10/threading.py\", line 966, in _bootstrap\r\n    self._bootstrap_inner()\r\n  File \"/home/thomas/.pyenv/versions/3.10.4/lib/python3.10/threading.py\", line 1009, in _bootstrap_inner\r\n    self.run()\r\n  File \"/home/thomas/.pyenv/versions/3.10.4/lib/python3.10/threading.py\", line 946, in run\r\n    self._target(*self._args, **self._kwargs)\r\n  File \"/home/thomas/.pyenv/versions/3.10.4/lib/python3.10/concurrent/futures/thread.py\", line 83, in _worker\r\n    work_item.run()\r\n  File \"/home/thomas/.pyenv/versions/3.10.4/lib/python3.10/concurrent/futures/thread.py\", line 58, in run\r\n    result = self.fn(*self.args, **self.kwargs)\r\n  File \"/home/thomas/workspace/localstack/localstack-ext/.venv/lib/python3.10/site-packages/localstack/aws/serving/wsgi.py\", line 50, in __call__\r\n    self.gateway.process(request, response)\r\n  File \"/home/thomas/workspace/localstack/localstack-ext/.venv/lib/python3.10/site-packages/localstack/aws/gateway.py\", line 36, in process\r\n    chain.handle(context, response)\r\n  File \"/home/thomas/workspace/localstack/localstack-ext/.venv/lib/python3.10/site-packages/localstack/aws/chain.py\", line 57, in handle\r\n    handler(self, self.context, response)\r\n  File \"/home/thomas/workspace/localstack/localstack-ext/.venv/lib/python3.10/site-packages/localstack/aws/handlers/service_plugin.py\", line 34, in __call__\r\n    return self.require_service(chain, context, response)\r\n  File \"/home/thomas/workspace/localstack/localstack-ext/.venv/lib/python3.10/site-packages/localstack/aws/handlers/service_plugin.py\", line 56, in require_service\r\n    service_plugin: Service = self.service_manager.require(service_name)\r\n  File \"/home/thomas/workspace/localstack/localstack-ext/.venv/lib/python3.10/site-packages/localstack/utils/bootstrap.py\", line 77, in wrapped\r\n    return f(*args, **kwargs)\r\n  File \"/home/thomas/workspace/localstack/localstack-ext/.venv/lib/python3.10/site-packages/localstack/services/plugins.py\", line 356, in require\r\n    if container.start():\r\n  File \"/home/thomas/workspace/localstack/localstack-ext/.venv/lib/python3.10/site-packages/localstack/services/plugins.py\", line 259, in start\r\n    return self.check()\r\n  File \"/home/thomas/workspace/localstack/localstack-ext/.venv/lib/python3.10/site-packages/localstack/services/plugins.py\", line 263, in check\r\n    self.service.check(print_error=True)\r\n  File \"/home/thomas/workspace/localstack/localstack-ext/.venv/lib/python3.10/site-packages/localstack/services/plugins.py\", line 211, in check\r\n    return self.check_function(expect_shutdown=expect_shutdown, print_error=print_error)\r\n  File \"/home/thomas/workspace/localstack/localstack-ext/.venv/lib/python3.10/site-packages/localstack/services/plugins.py\", line 717, in _check\r\n    LOG.debug(\"checking service health %s:%d\", service, port)\r\nMessage: 'checking service health %s:%d'\r\nArguments: ('mq', None)\r\n--- Logging error ---\r\nTraceback (most recent call last):\r\n  File \"/home/thomas/workspace/localstack/localstack-ext/.venv/lib/python3.10/site-packages/localstack/services/plugins.py\", line 718, in _check\r\n    wait_for_port_status(port, expect_success=not expect_shutdown)\r\n  File \"/home/thomas/workspace/localstack/localstack-ext/.venv/lib/python3.10/site-packages/localstack/utils/net.py\", line 133, in wait_for_port_status\r\n    return retry(check, sleep=sleep_time, retries=retries)\r\n  File \"/home/thomas/workspace/localstack/localstack-ext/.venv/lib/python3.10/site-packages/localstack/utils/sync.py\", line 63, in retry\r\n    raise raise_error\r\n  File \"/home/thomas/workspace/localstack/localstack-ext/.venv/lib/python3.10/site-packages/localstack/utils/sync.py\", line 59, in retry\r\n    return function(**kwargs)\r\n  File \"/home/thomas/workspace/localstack/localstack-ext/.venv/lib/python3.10/site-packages/localstack/utils/net.py\", line 126, in check\r\n    status = is_port_open(port, http_path=http_path, expect_success=expect_success)\r\n  File \"/home/thomas/workspace/localstack/localstack-ext/.venv/lib/python3.10/site-packages/localstack/utils/net.py\", line 70, in is_port_open\r\n    result = sock.connect_ex((host, port))\r\nTypeError: 'NoneType' object cannot be interpreted as an integer\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/thomas/.pyenv/versions/3.10.4/lib/python3.10/logging/__init__.py\", line 1100, in emit\r\n    msg = self.format(record)\r\n  File \"/home/thomas/.pyenv/versions/3.10.4/lib/python3.10/logging/__init__.py\", line 943, in format\r\n    return fmt.format(record)\r\n  File \"/home/thomas/.pyenv/versions/3.10.4/lib/python3.10/logging/__init__.py\", line 678, in format\r\n    record.message = record.getMessage()\r\n  File \"/home/thomas/.pyenv/versions/3.10.4/lib/python3.10/logging/__init__.py\", line 368, in getMessage\r\n    msg = msg % self.args\r\nTypeError: %d format: a real number is required, not NoneType\r\nCall stack:\r\n  File \"/home/thomas/.pyenv/versions/3.10.4/lib/python3.10/threading.py\", line 966, in _bootstrap\r\n    self._bootstrap_inner()\r\n  File \"/home/thomas/.pyenv/versions/3.10.4/lib/python3.10/threading.py\", line 1009, in _bootstrap_inner\r\n    self.run()\r\n  File \"/home/thomas/.pyenv/versions/3.10.4/lib/python3.10/threading.py\", line 946, in run\r\n    self._target(*self._args, **self._kwargs)\r\n  File \"/home/thomas/.pyenv/versions/3.10.4/lib/python3.10/concurrent/futures/thread.py\", line 83, in _worker\r\n    work_item.run()\r\n  File \"/home/thomas/.pyenv/versions/3.10.4/lib/python3.10/concurrent/futures/thread.py\", line 58, in run\r\n    result = self.fn(*self.args, **self.kwargs)\r\n  File \"/home/thomas/workspace/localstack/localstack-ext/.venv/lib/python3.10/site-packages/localstack/aws/serving/wsgi.py\", line 50, in __call__\r\n    self.gateway.process(request, response)\r\n  File \"/home/thomas/workspace/localstack/localstack-ext/.venv/lib/python3.10/site-packages/localstack/aws/gateway.py\", line 36, in process\r\n    chain.handle(context, response)\r\n  File \"/home/thomas/workspace/localstack/localstack-ext/.venv/lib/python3.10/site-packages/localstack/aws/chain.py\", line 57, in handle\r\n    handler(self, self.context, response)\r\n  File \"/home/thomas/workspace/localstack/localstack-ext/.venv/lib/python3.10/site-packages/localstack/aws/handlers/service_plugin.py\", line 34, in __call__\r\n    return self.require_service(chain, context, response)\r\n  File \"/home/thomas/workspace/localstack/localstack-ext/.venv/lib/python3.10/site-packages/localstack/aws/handlers/service_plugin.py\", line 56, in require_service\r\n    service_plugin: Service = self.service_manager.require(service_name)\r\n  File \"/home/thomas/workspace/localstack/localstack-ext/.venv/lib/python3.10/site-packages/localstack/utils/bootstrap.py\", line 77, in wrapped\r\n    return f(*args, **kwargs)\r\n  File \"/home/thomas/workspace/localstack/localstack-ext/.venv/lib/python3.10/site-packages/localstack/services/plugins.py\", line 356, in require\r\n    if container.start():\r\n  File \"/home/thomas/workspace/localstack/localstack-ext/.venv/lib/python3.10/site-packages/localstack/services/plugins.py\", line 259, in start\r\n    return self.check()\r\n  File \"/home/thomas/workspace/localstack/localstack-ext/.venv/lib/python3.10/site-packages/localstack/services/plugins.py\", line 263, in check\r\n    self.service.check(print_error=True)\r\n  File \"/home/thomas/workspace/localstack/localstack-ext/.venv/lib/python3.10/site-packages/localstack/services/plugins.py\", line 211, in check\r\n    return self.check_function(expect_shutdown=expect_shutdown, print_error=print_error)\r\n  File \"/home/thomas/workspace/localstack/localstack-ext/.venv/lib/python3.10/site-packages/localstack/services/plugins.py\", line 721, in _check\r\n    LOG.exception(\"service health check %s:%d failed\", service, port)\r\nMessage: 'service health check %s:%d failed'\r\nArguments: ('mq', None)\r\n```",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1915,
        "deletions": 67,
        "changed_files": 8,
        "created_at": "2022-09-21T22:41:40Z",
        "closed_at": "2022-10-01T20:34:46Z",
        "merged_at": "2022-10-01T20:34:46Z",
        "body": "Pre-signed URLs are a feature of S3, allowing to use the client or the CLI to pre-sign a request with the credentials used by the client. The docs are quite extensive about it, and you see more about it here:\r\nhttps://docs.aws.amazon.com/AmazonS3/latest/API/sig-v4-authenticating-requests.html\r\nhttps://docs.aws.amazon.com/AmazonS3/latest/userguide/S3_Authentication2.html\r\n\r\nYou can sign the request with 2 types: `SigV2`, which is supposed to be deprecated by still used, and `SigV4`.\r\nYou effectively sign the request like you would in the headers normally, but pass it in the query parameters instead.\r\n\r\nThe LocalStack pre-signed URLs feature is checking if the signature of the request is valid (and does not authenticate the request).\r\n\r\nWe verify the signature by checking the request we received, reconstructing the Canonical Request as required by AWS, and signing the request with the utilities from `botocore` to check if the signatures are identical. We keep the usage of the feature flag `S3_SKIP_SIGNATURE_VALIDATION` to allow requests with wrong signatures to go through.\r\n\r\nWe are making use of the handler chain, to catch the requests before they go through the skeleton to reject them if necessary.\r\nWe also modify the responses of operations using `PUT` method, because AWS \"erases\" the body content when the request is coming from a pre-signed URL. \r\n\r\nThis PR still miss the pre-signed POST requests, added in a follow-up PR.\r\n\r\nThe validation should work better than the old provider, and be more precise and in-line with AWS.\r\n",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 558,
        "deletions": 93,
        "changed_files": 5,
        "created_at": "2022-09-21T13:32:49Z",
        "closed_at": "2022-09-26T21:53:04Z",
        "merged_at": "2022-09-26T21:53:04Z",
        "body": "This PR implement fixes to bugs that are also present in the current provider, coming from moto.\r\nThe VersionId would be present when it should not be, added logic to the versioning for that.\r\nWhen `PutObject` would be used with a pre-signed URL signed with SigV2, the object would be instantly expired because moto merges headers and query string parameters, and the signature contains an `Expires` query parameter which would be treated as the `Expires` header. \r\n\r\nIt also implement the Response{Headers} overriding behaviour.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 51,
        "deletions": 6,
        "changed_files": 3,
        "created_at": "2022-09-20T22:35:47Z",
        "closed_at": "2022-09-21T06:57:38Z",
        "merged_at": "2022-09-21T06:57:38Z",
        "body": "Add rule for execute-api and extend test coverage for API Gateway custom CORS. This is a follow-up from #6895 , where an additional switch for `../_user_request_/..` paths was introduced - we need to apply the same switch for `...execute-api...` domain names. (this should fix the tests upstream in ext)\r\n\r\nTried to cover the different cases with a parameterized integration test, which should cover the relevant combinations of settings (using a simple API GW MOCK integration).",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1856,
        "deletions": 413,
        "changed_files": 14,
        "created_at": "2022-09-20T17:16:16Z",
        "closed_at": "2022-09-30T17:50:41Z",
        "merged_at": "2022-09-30T17:50:41Z",
        "body": "This PR contains S3 bucket notifications for:\r\n* SQS\r\n* SNS\r\n* Lambda (Cloudfunctions)\r\n* Event Bridge\r\n\r\n## Implemented:\r\nFollowing events are covered (also by existing tests):\r\n- s3_ObjectCreated_Put\r\n- s3_ObjectCreated_Copy\r\n- s3_ObjectCreated_CompleteMultipartUpload\r\n- s3_ObjectRemoved_Delete\r\n- s3_ObjectTagging_Put\r\n- s3_ObjectTagging_Delete\r\n\r\nOther implementation:\r\n- Filters\r\n- verification for filters, destination configuration\r\n- added tests, refactored existing tests\r\n\r\n\r\n## Known Issues + Future work:\r\n- `InvalidArgument` Error: marked a few TODOs here, because in [another PR](https://github.com/localstack/localstack/commit/34a71b4cbf3ba7c472ea55abfc560eb9a9889db0#diff-4b0f4fffc414ff51da92d57d0afdbedd29bfd8cb5683c57867fa2bf31e8753efR640) we already have a batch for that missing Exception\r\n- xray-feature: no tests yet for lambda + SQS and not sure how it should work here (need to AWS validate)\r\n- s3_ObjectCreated_Post -> this is only triggered for pre-signed urls (related test `test_create_object_by_presigned_request_via_dynamodb` is failing)\r\n- Only covered notifications that are actually covered by our test suite, but [there are more](https://docs.aws.amazon.com/AmazonS3/latest/userguide/notification-how-to-event-types-and-destinations.html#supported-notification-event-types) currently not covered, including:\r\n  - s3:ObjectRemoved:DeleteMarkerCreated\r\n  - s3:ObjectRestore:*\r\n  - s3:ReducedRedundancyLostObject\r\n  - s3:Replication:*\r\n  - s3:LifecycleExpiration:*\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 22,
        "deletions": 3,
        "changed_files": 2,
        "created_at": "2022-09-20T15:31:17Z",
        "closed_at": "2022-09-21T07:03:17Z",
        "merged_at": "2022-09-21T07:03:17Z",
        "body": "Adding a flag to filter empty values in `select_from_typed_dict`",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 125,
        "deletions": 6,
        "changed_files": 4,
        "created_at": "2022-09-20T12:35:22Z",
        "closed_at": "2022-09-20T16:27:46Z",
        "merged_at": "2022-09-20T16:27:46Z",
        "body": "This PR adds some API docs for constructs that are exposed as public API through the extensions API.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-09-20T10:08:29Z",
        "closed_at": "2022-09-20T11:48:59Z",
        "merged_at": "2022-09-20T11:48:59Z",
        "body": "## Problem\r\nWith a recent PRO PR, we have introduced a better parameter validation for rds create-db-cluster. Mainly, we have to specify an existing db cluster parameter group name (if specified).\r\nSince the current pre release pro tests do not do this, the tests fail.\r\n\r\n## Fix\r\nRemove the non-existent parameter group name, and let RDS create one for us.",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2022-09-20T10:00:57Z",
        "closed_at": "2022-10-03T11:37:31Z",
        "merged_at": "2022-10-03T11:37:31Z",
        "body": "This addresses https://github.com/localstack/localstack/issues/6881",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 539,
        "deletions": 854,
        "changed_files": 42,
        "created_at": "2022-09-19T22:52:01Z",
        "closed_at": "2022-09-27T13:09:08Z",
        "merged_at": "2022-09-27T13:09:08Z",
        "body": "Refactor CFN test to use Snapshots and parameters.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-09-19T12:45:35Z",
        "closed_at": "2022-09-20T20:53:08Z",
        "merged_at": "2022-09-20T20:53:08Z",
        "body": "L112 in the SES Provider suggests that the Email source can have nil-values: \r\n```python\r\n            if filter_source in (msg[\"Source\"], None, \"\"):\r\n```\r\nThe included dictionary access causes a KeyError in this case. This PR changes that to a `.get()` call to avoid that. \r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 7,
        "deletions": 8,
        "changed_files": 4,
        "created_at": "2022-09-19T07:38:32Z",
        "closed_at": "2022-09-20T10:51:27Z",
        "merged_at": "2022-09-20T10:51:27Z",
        "body": "\r\nFixes https://github.com/localstack/localstack/issues/6707",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 252,
        "deletions": 30,
        "changed_files": 1,
        "created_at": "2022-09-19T05:32:41Z",
        "closed_at": "2022-09-20T14:48:18Z",
        "merged_at": "2022-09-20T14:48:18Z",
        "body": "# \ud83d\ude80 ASF Update Report \ud83d\ude80\nThis PR has been automatically generated to update the generated API stubs for our ASF services.\nIt uses the latest code-generator from the _master_ branch ([scaffold.py](https://github.com/localstack/localstack/blob/master/localstack/aws/scaffold.py)) and the latest _published_ version of [botocore](https://github.com/boto/botocore) to re-generate all API stubs which are already present in the `localstack.aws.api` module of the _master_ branch.\n\n## \ud83d\udd04 Updated Services\nThis PR updates the following services:\n- ec2\n\n## \ud83d\udc77\ud83c\udffd Handle this PR\nThe following options describe how to interact with this PR / the auto-update:\n\n\u2714\ufe0f **Accept Changes**\nIf the changes are satisfying, just squash-merge the PR and delete the source branch.\n\n\ud83d\udeab **Ignore Changes**\nIf you want to ignore the changes in this PR, just close the PR and *do not delete* the source branch. The PR will not be opened and a new PR will not be created for as long as the generated code does not change (or the branch is deleted). As soon as there are new changes, a new PR will be created.\n\n\u270f\ufe0f **Adapt Changes**\n*Don't do this.* The APIs are auto-generated. If you decide that the APIs should look different, you have to change the code-generation.\n\n\u23f8\ufe0f **Pause Updates**\nRemove the cron-schedule trigger of the GitHub Action workflow which creates these PRs. The action can then still be triggered manually, but it will not be executed automatically.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2022-09-19T01:50:25Z",
        "closed_at": "2022-09-20T14:48:47Z",
        "merged_at": "2022-09-20T14:48:46Z",
        "body": "[![Mend Renovate](https://app.renovatebot.com/images/banner.svg)](https://renovatebot.com)\n\nThis PR contains the following updates:\n\n| Package | Type | Update | Change |\n|---|---|---|---|\n| python | final | digest | `3e2f594` -> `7bb70ac` |\n| python | stage | digest | `3e2f594` -> `7bb70ac` |\n\n---\n\n### Configuration\n\n\ud83d\udcc5 **Schedule**: Branch creation - \"before 3am on Monday\" (UTC), Automerge - At any time (no schedule defined).\n\n\ud83d\udea6 **Automerge**: Disabled by config. Please merge this manually once you are satisfied.\n\n\u267b **Rebasing**: Whenever PR becomes conflicted, or you tick the rebase/retry checkbox.\n\n\ud83d\udd15 **Ignore**: Close this PR and you won't be reminded about these updates again.\n\n---\n\n - [ ] <!-- rebase-check -->If you want to rebase/retry this PR, click this checkbox.\n\n---\n\nThis PR has been generated by [Mend Renovate](https://www.mend.io/free-developer-tools/renovate/). View repository job log [here](https://app.renovatebot.com/dashboard#github/localstack/localstack).\n<!--renovate-debug:eyJjcmVhdGVkSW5WZXIiOiIzMi4xOTcuMCIsInVwZGF0ZWRJblZlciI6IjMyLjE5Ny4wIn0=-->\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-09-17T22:15:25Z",
        "closed_at": "2022-09-27T13:54:55Z",
        "merged_at": "2022-09-27T13:54:55Z",
        "body": "I guess the previous link is outdated",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 32,
        "deletions": 8,
        "changed_files": 3,
        "created_at": "2022-09-17T21:54:54Z",
        "closed_at": "2022-12-02T22:58:58Z",
        "merged_at": null,
        "body": "Not sure if these are the only files that need changing. Should I also add more tests?\r\n\r\nBased on the `BatchSize` values documented in https://docs.aws.amazon.com/lambda/latest/dg/API_CreateEventSourceMapping.html#SSS-CreateEventSourceMapping-request-BatchSize.\r\n\r\nAppreciate any feedback \ud83d\ude42 ",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 13,
        "deletions": 3,
        "changed_files": 2,
        "created_at": "2022-09-16T15:11:45Z",
        "closed_at": "2022-10-06T15:14:01Z",
        "merged_at": "2022-10-06T15:14:01Z",
        "body": "This PR adds a condition to the fixture so it;s stops waiting in case a resource failed and the status of the stack is set ROLLBACK_COMPLETED.\r\n\r\nIt also adds the default parameters for CDK model.",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 6,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-09-15T22:40:14Z",
        "closed_at": "2022-09-17T12:33:41Z",
        "merged_at": null,
        "body": "\ud83d\udea7 **Work in progress - please do not merge yet**\r\n\r\nAdd installation of OpenSearch cluster if version not yet available (i.e., not installed locally).\r\n\r\nShould fix this issue that we're currently seeing upstream for persistence tests:\r\n```\r\n    result = orig_func(version=version, cluster_path=cluster_path, data_root=data_root)\r\n  File \"/opt/code/localstack/localstack/services/opensearch/cluster.py\", line 95, in resolve_directories\r\n    install_dir = opensearch_package.get_installed_dir(version)\r\n  File \"/usr/local/lib/python3.10/posixpath.py\", line 76, in join\r\n    a = os.fspath(a)\r\n```\r\n\r\nUpdate: This is not yet ready to merge - briefly discussed different solution approaches with @baermat today, he'll be helping out with this issue. Feel free to push any changes directly to this branch @baermat \ud83d\udc4d ",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 1708,
        "deletions": 1969,
        "changed_files": 19,
        "created_at": "2022-09-15T17:16:01Z",
        "closed_at": "2022-09-21T04:16:20Z",
        "merged_at": "2022-09-21T04:16:20Z",
        "body": "The aim of this PR is to split up `test_cloudformation.py` into the resource specific files and remove/refactor tests where needed.\r\n\r\nRemaining tests that have yet to be cleaned up are now in `test_cloudformation_legacy.py`",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 29,
        "deletions": 64,
        "changed_files": 3,
        "created_at": "2022-09-15T15:18:02Z",
        "closed_at": "2022-09-16T11:39:42Z",
        "merged_at": "2022-09-16T11:39:42Z",
        "body": "Unfortunately, we introduced an issue with https://github.com/localstack/localstack/pull/6783 for opensearch.\r\nThe domain creation failed when the opensearch installation was not yet present on the machine.\r\nThis was due to the directory resolve order: The installation directories have been resolved before they were available (because with the new installer, the installation target cannot be determined before the package is installed).\r\n\r\nThis PR addresses this issue by deferring the directory resolving to a later point, i.e. when actually starting the cluster (and when the package is ensured to be installed).",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 186,
        "deletions": 61,
        "changed_files": 6,
        "created_at": "2022-09-15T10:35:22Z",
        "closed_at": "2022-09-20T09:34:35Z",
        "merged_at": "2022-09-20T09:34:35Z",
        "body": "Some minor fixes for the local execution of python lambdas (and local executor in general)\r\n\r\n* Actually spawns a new process now instead of calling `Process.run` which just executed the handler in the same process.\r\n* Usage of the `logging` module now works in lambdas as expected\r\n* Usage of print now should also work as expected",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 504,
        "deletions": 383,
        "changed_files": 11,
        "created_at": "2022-09-15T08:55:55Z",
        "closed_at": "2022-09-21T06:05:18Z",
        "merged_at": "2022-09-21T06:05:18Z",
        "body": "This PR contains another set of enhancements for the installer refactoring started with https://github.com/localstack/localstack/pull/6783.\r\n\r\nIt contains some basic changes to the packages module:\r\n- Separated the basic API in `api.py` with the base classes and `core.py` with some core package installer abstractions.\r\n- Migrates the kinesis installers (kinesismock and kinesalite) to the new packages abstraction.",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 466,
        "deletions": 131,
        "changed_files": 5,
        "created_at": "2022-09-15T08:47:41Z",
        "closed_at": "2022-09-19T15:18:48Z",
        "merged_at": "2022-09-19T15:18:48Z",
        "body": "### Summary\r\n- Marked every dynamodb test with either only_localstack or aws_validated\r\n- Added snapshots for each aws_validated test\r\n- Corrected a few minor things to make snapshots validate (or added a skip_validate)\r\n- Removed test_dynamodb_batch_write_item as it tests the same as test_batch_write_items \r\n\r\nIn a second PR I will correct several only_localstack tests to make them aws validated... ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 619,
        "deletions": 3,
        "changed_files": 7,
        "created_at": "2022-09-14T20:47:21Z",
        "closed_at": "2022-09-26T13:54:21Z",
        "merged_at": "2022-09-26T13:54:21Z",
        "body": "No integration tests were really checking ACLs, so this one is not reducing tests failure as much.\r\n- Implement Bucket ACL operations and validation in provider.\r\n- ACL enforcement is not part of it, as it's not currently done in the current provider. ",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-09-14T11:57:36Z",
        "closed_at": "2022-09-14T13:07:18Z",
        "merged_at": "2022-09-14T13:07:18Z",
        "body": "Disable the analytics collection for the CircleCI-steps where we collect information about not-implemented API endpoints.\r\n\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 50,
        "deletions": 50,
        "changed_files": 2,
        "created_at": "2022-09-14T07:56:39Z",
        "closed_at": "2022-09-14T12:28:00Z",
        "merged_at": "2022-09-14T12:28:00Z",
        "body": "Previously the `skip_snapshot_verify` marker was influencing how transformations are applied and would lead to hard to debug issues when for example the order of `<resource:num>` tokens were mixed up due to this.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 3116,
        "deletions": 2584,
        "changed_files": 9,
        "created_at": "2022-09-13T22:58:38Z",
        "closed_at": "2022-09-23T09:16:39Z",
        "merged_at": "2022-09-23T09:16:39Z",
        "body": "This PR adds more operations to the S3 provider, and reorganised the tests by class, grouping them more coherently.\r\nThis will reduces the number of failing test and implement a lot of basic functionality, and fixes some current bugs at the same time. \r\nIt is a bit hard to keep track of implemented operation and fixed exceptions, as a lot of fixes are done by moto patching. \r\n\r\nImplemented operations:\r\n- `GetBucketRequestPayment`\r\n- `PutBucketRequestPayment`\r\n- `GetBucketLifecycleConfiguration` (had to reimplement it, moto is not validating correctly Transition actions, and will raise exceptions. Would need a bigger rewrite in moto. Needed for Terraform).\r\n- `PutBucketLifecycleConfiguration`\r\n- `DeleteBucketLifecycleConfiguration`\r\n\r\n- fix object Expires parameter\r\n- fix `GetObject` with range headers, and return proper status code\r\n- fix restoring object from `DEEP_ARCHIVE`, raise error if trying to get an object in that state\r\n- fix exceptions missing in the specs, or missing members\r\n- implement proper DeleteResult for `DeleteObjects`\r\n\r\nAlso had to regenerate all s3 snapshots as the moving of tests made a lot of changes, it was simpler to regenerate everything from scratch. \r\n\r\n~~Currently having unit tests failing as they are testing patched behaviour against original specs. Will need to fix this before merging.~~ Done, seen with Alex. \r\n\r\nSorry this PR is quite large, subsequent PR based on this one will be smaller and implement specific things. This one was quite general.",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 3,
        "changed_files": 1,
        "created_at": "2022-09-13T19:28:58Z",
        "closed_at": "2022-09-13T22:37:40Z",
        "merged_at": "2022-09-13T22:37:40Z",
        "body": "Mostly related to usage with PRO. With the changes in 20e9c0e4dc75ac1c2822c2304db59a13335c3eaf users now started seeing warnings in the logs when deploying CloudFormation custom resources.\r\n\r\nExample:\r\n```\r\n2022-09-13T21:27:20.254 WARNING --- [  Thread-120] localstack.utils.cloudformation.template_deployer : Unable to get client for \"dynamodbu\" API, skipping deployment: Unknown service: 'dynamodbu'. Valid service names are: accessanalyzer, account, acm, acm-pca, alexaforbusiness, amp, amplify, amplifybackend, amplifyuibuilder, apigateway, apigatewaymanagementapi, apigatewayv2, appconfig, appconfigdata, appflow, appintegrations, application-autoscaling, application-insights, applicationcostprofiler, appmesh, apprunner, appstream, appsync, athena, auditmanager, autoscaling, autoscaling-plans, backup, backup-gateway, backupstorage, batch, billingconductor, braket, budgets, ce, chime, chime-sdk-identity, chime-sdk-media-pipelines, chime-sdk-meetings, chime-sdk-messaging, cloud9, cloudcontrol, clouddirectory, cloudformation, cloudfront, cloudhsm, cloudhsmv2, cloudsearch, cloudsearchdomain, cloudtrail, cloudwatch, codeartifact, codebuild, codecommit, codedeploy, codeguru-reviewer, codeguruprofiler, codepipeline, codestar, codestar-connections, codestar-notifications, cognito-identity, cognito-idp, cognito-sync, comprehend, comprehendmedical, compute-optimizer, config, connect, connect-contact-lens, connectcampaigns, connectparticipant, controltower, cur, customer-profiles, databrew, dataexchange, datapipeline, datasync, dax, detective, devicefarm, devops-guru, directconnect, discovery, dlm, dms, docdb, drs, ds, dynamodb, dynamodbstreams, ebs, ec2, ec2-instance-connect, ecr, ecr-public, ecs, efs, eks, elastic-inference, elasticache, elasticbeanstalk, elastictranscoder, elb, elbv2, emr, emr-containers, emr-serverless, es, events, evidently, finspace, finspace-data, firehose, fis, fms, forecast, forecastquery, frauddetector, fsx, gamelift, gamesparks, glacier, globalaccelerator, glue, grafana, greengrass, greengrassv2, groundstation, guardduty, health, healthlake, honeycode, iam, identitystore, imagebuilder, importexport, inspector, inspector2, iot, iot-data, iot-jobs-data, iot1click-devices, iot1click-projects, iotanalytics, iotdeviceadvisor, iotevents, iotevents-data, iotfleethub, iotsecuretunneling, iotsitewise, iotthingsgraph, iottwinmaker, iotwireless, ivs, ivschat, kafka, kafkaconnect, kendra, keyspaces, kinesis, kinesis-video-archived-media, kinesis-video-media, kinesis-video-signaling, kinesisanalytics, kinesisanalyticsv2, kinesisvideo, kms, lakeformation, lambda, lex-models, lex-runtime, lexv2-models, lexv2-runtime, license-manager, license-manager-user-subscriptions, lightsail, location, logs, lookoutequipment, lookoutmetrics, lookoutvision, m2, machinelearning, macie, macie2, managedblockchain, marketplace-catalog, marketplace-entitlement, marketplacecommerceanalytics, mediaconnect, mediaconvert, medialive, mediapackage, mediapackage-vod, mediastore, mediastore-data, mediatailor, memorydb, meteringmarketplace, mgh, mgn, migration-hub-refactor-spaces, migrationhub-config, migrationhubstrategy, mobile, mq, mturk, mwaa, neptune, network-firewall, networkmanager, nimble, opensearch, opsworks, opsworkscm, organizations, outposts, panorama, personalize, personalize-events, personalize-runtime, pi, pinpoint, pinpoint-email, pinpoint-sms-voice, pinpoint-sms-voice-v2, polly, pricing, privatenetworks, proton, qldb, qldb-session, quicksight, ram, rbin, rds, rds-data, redshift, redshift-data, redshift-serverless, rekognition, resiliencehub, resource-groups, resourcegroupstaggingapi, robomaker, rolesanywhere, route53, route53-recovery-cluster, route53-recovery-control-config, route53-recovery-readiness, route53domains, route53resolver, rum, s3, s3control, s3outposts, sagemaker, sagemaker-a2i-runtime, sagemaker-edge, sagemaker-featurestore-runtime, sagemaker-runtime, savingsplans, schemas, sdb, secretsmanager, securityhub, serverlessrepo, service-quotas, servicecatalog, servicecatalog-appregistry, servicediscovery, ses, sesv2, shield, signer, sms, sms-voice, snow-device-management, snowball, sns, sqs, ssm, ssm-contacts, ssm-incidents, sso, sso-admin, sso-oidc, stepfunctions, storagegateway, sts, support, support-app, swf, synthetics, textract, timestream-query, timestream-write, transcribe, transfer, translate, voice-id, waf, waf-regional, wafv2, wellarchitected, wisdom, workdocs, worklink, workmail, workmailmessageflow, workspaces, workspaces-web, xray\r\n\r\n```\r\n\r\nThese warnings technically didn't break anything but caused a few reports already since users thought these might be related to other issues.\r\n\r\nThe root cause here was the removal of the `continue` statement and redundant execution of `get_client` even after the execution of the function.\r\n\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 13816,
        "deletions": 3969,
        "changed_files": 46,
        "created_at": "2022-09-13T12:18:34Z",
        "closed_at": "2022-10-07T08:04:58Z",
        "merged_at": "2022-10-07T08:04:58Z",
        "body": "## Goal\r\n\r\nContinued implementation for new ASF provider for lambda. The goal of this PR is to make the integration tests in `tests.integration.awslambda/test_lambda_api.py|test_lambda.py|test_lambda_common.py` pass for the new provider on CircleCI since this was disabled in the preceding test rework.\r\n\r\n## Changes\r\n\r\n* Implement CRUD of most (except those in Future Work) endpoints\r\n* Tests of both API and error handling\r\n* Alias routing with routing config\r\n* Migration to Stores\r\n* Proper API error handling\r\n* Lambda Role Injection\r\n* Event invocations\r\n* Zip file storage in S3 buckets / presigned urls for code location\r\n\r\n## Future Work\r\n\r\n* Event source mappings (currently only barebone crud)\r\n* Invoke async (deprecated anyway, but should have it)\r\n* Layer / LayerVersion / LayerPermission CRUD\r\n* LambdaUrls\r\n* Event destinations / event retries\r\n* Timeouts\r\n* Dry Run\r\n* Init duration in logs\r\n* More correct error responses (the todos)",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 242,
        "deletions": 5,
        "changed_files": 4,
        "created_at": "2022-09-13T09:57:11Z",
        "closed_at": "2022-09-15T09:33:28Z",
        "merged_at": "2022-09-15T09:33:28Z",
        "body": "Add validation when creating a lambda function via the CLI or SDKs.\r\n\r\nWe update the `envvars` attribute on `LambdaFunction` so that whenever an instance is created and the envvars set, this validation occurs.\r\n\r\nIn the future, there may be need for more fleshed out validation, in which case I'd reach for a helper library such as `pydantic` or `marshmallow` but until we have a greater need, we perform ad-hoc validation for this property.\r\n\r\nNote: other methods of creating lambda functions (e.g. CloudFormation) may bypass this step. There may be a follow on PR to resolve this.\r\n\r\nI have also moved the assignment of the `LambdaFunction` instance to after it has been set up. Without this, the validation would prevent the lambda function from being created, but the lambda function would \"exist\".",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 35,
        "deletions": 10,
        "changed_files": 3,
        "created_at": "2022-09-12T18:07:34Z",
        "closed_at": "2022-09-13T12:21:52Z",
        "merged_at": "2022-09-13T12:21:52Z",
        "body": "The physical id for a Kinesis Stream Resource must be the name of the stream. ",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 848,
        "deletions": 82,
        "changed_files": 10,
        "created_at": "2022-09-12T12:20:55Z",
        "closed_at": "2022-09-14T13:46:08Z",
        "merged_at": "2022-09-14T13:46:08Z",
        "body": "This PR starts the implementation of S3 actions. Simple behaviour is implemented first, reducing the number of test failure. Additional behaviour will be added later in those actions implementation, for example S3 notifications.\r\nAll these actions are based on Moto and no additional logic is involved, except adding/fixing some fields.\r\nPatching of the specs was very needed and will continued to be. \r\n\r\nThis also introduces the `S3Store` for the provider, but it doesn't have a use case yet (will surely have importance with notifications).\r\n\r\nActions implemented: \r\n- CreateBucket (very simple one, missing features)\r\n- ListObjects\r\n- ListObjectsV2\r\n- HeadObject\r\n- GetObject\r\n- PutObject\r\n- GetBucketLifecycle\r\n- GetBucketLifecycleConfiguration\r\n- PutBucketLifecycleConfiguration\r\n- DeleteBucketLifecycleConfiguration\r\n\r\nThis also add patching of moto for some actions: some headers were returned lower-cased (`\"last-modified\"`) when their location in the specs was `\"Last-Modified\"`. I fixed what they return in Moto, but no sure if this should be handled in the parser.\r\n\r\nThis PR is based on #6827 for testing against ASF provider, and will be rebased on master for a test run before being merged.\r\n~~Once rebased on master, I will regenerate the specs without the docs to match the auto generated ones.~~ (Already done because of merge conflict)\r\n\r\nFor an easier review, those files should be ignored and are part of #6827:\r\n- `.github/workflows/terraform-tests.yml`\r\n- `localstack/config.py`\r\n- `localstack/aws/protocol/service_router.py`\r\n\r\n### Local tests results for the `TestS3` class: \r\n|/|Before|After|\r\n|--|--|--|\r\n|\u2705 Passed |18|38|\r\n|\ud83d\ude48 Ignored|6|6|\r\n|\u2757 Failed|31|14|\r\n|Total|55|58|\r\n\r\nI will mark with conditions in the next PR some `skip_snapshot_verify` paths that are already parts of the new provider and not the legacy one. \r\n\r\nEdit: thanks to Alex [commit](https://github.com/localstack/localstack/pull/6859/commits/1b5d24812ca7db3ab1ab46e28e3343e5124dee93),\r\nthere's one less xfail test, but it will be counted once we introduce condition for tests.",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 6110,
        "deletions": 1,
        "changed_files": 88,
        "created_at": "2022-09-12T11:54:06Z",
        "closed_at": "2022-09-15T15:47:06Z",
        "merged_at": "2022-09-15T15:47:06Z",
        "body": "Introduces a new testing utility for running tests across multiple lambda runtimes.\r\n\r\nUsage:\r\n```python\r\n@pytest.mark.multiruntime(scenario=\"myscenario\", runtimes=[\"python\", \"ruby\", \"nodejs12.x\"])\r\ndef test_something_lambda(self, multiruntime_lambda):\r\n    create_result = multiruntime_lambda.create_function()\r\n```\r\n\r\nWhich will need to be accompanied with the corresponding handlers in `tests/integration/awslambda/functions/common/<scenario>/<runtime>`\r\n\r\n\r\nIn the case from above these paths would be:\r\n```\r\ntests/integration/awslambda/functions/common/myscenario/python\r\ntests/integration/awslambda/functions/common/myscenario/ruby\r\ntests/integration/awslambda/functions/common/myscenario/nodejs12.x\r\n```\r\n\r\n\r\nAdditional features:\r\n\r\n* `multiruntime_lambda.create_function` allows overwriting of all parameters\r\n* `runtimes` can either be a concrete runtime such as `python3.9` or an aggregated one such as `python`, which includes all python runtimes (`python3.7`, `python3.8`, `python3.9`)\r\n* if no runtime is specified, all runtimes are used\r\n  `@pytest.mark.multiruntime(scenario=\"myscenario\")`",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 112,
        "changed_files": 4,
        "created_at": "2022-09-12T09:41:48Z",
        "closed_at": "2022-09-12T15:14:00Z",
        "merged_at": "2022-09-12T15:14:00Z",
        "body": "Clean up deprecated Java libs for STS integration with Kinesis client. \ud83e\uddf9 \r\n\r\nThis code dates back to the very early days, when parts of the Kinesis client utils were used to connect to Kinesis streams in real AWS (using IAM/STS tokens). This is no longer required today, and should be removed.\r\n\r\nWe have recently also seen some users running into issues with the Java compilation in local dev mode - removing it should hopefully simplify the installation a bit further.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 14,
        "deletions": 18,
        "changed_files": 7,
        "created_at": "2022-09-12T08:31:13Z",
        "closed_at": "2022-09-13T17:08:16Z",
        "merged_at": "2022-09-13T17:08:16Z",
        "body": "This PR addresses issues with the terraform test pipeline discovered while working on https://github.com/localstack/localstack/pull/6853.\r\nThe `route53resolver` tests are currently timing out, but the pipeline does not fail.\r\n\r\nThis PR contains the following changes:\r\n- [x] Ensures that the pipeline fails if any terraform tests fail (proper error management in `run.sh`).\r\n- [x] Implements a strict collection of the allowlisted terraform tests (use strict regexes in `get-tf-tests.py`).\r\n- [x] Fixes for the failing tests:\r\n    - [x] `s3`:\r\n      - [x] ` TestAccS3Bucket_Duplicate_UsEast1AltAccount` (removed from the test allowlist)\r\n        ```\r\n        2022-09-12T09:50:52.4625278Z === CONT  TestAccS3Bucket_Duplicate_UsEast1AltAccount\r\n        2022-09-12T09:51:01.1596683Z     bucket_test.go:400: Step 1/1, expected an error with pattern, no match on: Error running apply: exit status 1\r\n        2022-09-12T09:51:01.1597193Z         \r\n        2022-09-12T09:51:01.1598165Z         Error: creating Amazon S3 (Simple Storage) Bucket (tf-test-bucket-583879316476979402): bucket already exists\r\n        2022-09-12T09:51:01.1598545Z         \r\n        2022-09-12T09:51:01.1598878Z           with aws_s3_bucket.test,\r\n        2022-09-12T09:51:01.1599417Z           on terraform_plugin_test.tf line 12, in resource \"aws_s3_bucket\" \"test\":\r\n        2022-09-12T09:51:01.1599899Z           12: resource \"aws_s3_bucket\" \"test\" {\r\n        ```\r\n     - [x] `route53resolver`:\r\n       - [x] `TestAccRoute53ResolverQueryLogConfig_disappears` (fixed by accessing the store properly)\r\n       - [x] `TestAccRoute53ResolverQueryLogConfig_tags` (fixed by accessing the store properly)\r\n       - [x] `TestAccRoute53ResolverQueryLogConfig_basic` (fixed by accessing the store properly)\r\n       - [x] `TestAccRoute53ResolverQueryLogConfigAssociation_disappears` (fixed by accessing the store properly)\r\n       - [x] `TestAccRoute53ResolverFirewallDomainList_domains` (fixed by accessing the store properly)\r\n            ```\r\n            2022-09-12T09:53:47.8795642Z     query_log_config_test.go:54: Step 1/1 error: Error running apply: exit status 1\r\n            2022-09-12T09:53:47.8796007Z\r\n            2022-09-12T09:53:47.8798233Z         Error: error creating Route53 Resolver Query Log Config: InternalError: exception while calling route53resolver.CreateResolverQueryLogConfig: 'AccountSpecificBackend' object has no attribute 'tagger'\r\n            2022-09-12T09:53:47.8799214Z         \tstatus code: 500, request id: 9KM3SHS5UN2724213D63LIN6FQGTJQKC206DG8E4R598AB5ZVYF7\r\n            2022-09-12T09:53:47.8799591Z\r\n            2022-09-12T09:53:47.8800164Z           with aws_route53_resolver_query_log_config.test,\r\n            2022-09-12T09:53:47.8800960Z           on terraform_plugin_test.tf line 7, in resource \"aws_route53_resolver_query_log_config\" \"test\":\r\n            2022-09-12T09:53:47.8801678Z            7: resource \"aws_route53_resolver_query_log_config\" \"test\" {\r\n            2022-09-12T09:53:47.8801947Z\r\n            2022-09-12T09:53:49.5246826Z --- FAIL: TestAccRoute53ResolverQueryLogConfig_disappears (2810.72s)\r\n            2022-09-12T09:58:41.5540977Z === CONT  TestAccRoute53ResolverQueryLogConfig_tags\r\n            2022-09-12T09:58:41.5544064Z     query_log_config_test.go:78: Step 1/4 error: Error running apply: exit status 1\r\n            2022-09-12T09:58:41.5544629Z\r\n            2022-09-12T09:58:41.5546143Z         Error: error creating Route53 Resolver Query Log Config: InternalError: exception while calling route53resolver.CreateResolverQueryLogConfig: 'AccountSpecificBackend' object has no attribute 'tagger'\r\n            2022-09-12T09:58:41.5547319Z         \tstatus code: 500, request id: CW9PP08LGG2OB3EVENR8F5GHKE20F9VW0XRHYGC8U6AJL48CH5RT\r\n            2022-09-12T09:58:41.5547645Z\r\n            2022-09-12T09:58:41.5548191Z           with aws_route53_resolver_query_log_config.test,\r\n            2022-09-12T09:58:41.5548821Z           on terraform_plugin_test.tf line 6, in resource \"aws_route53_resolver_query_log_config\" \"test\":\r\n            2022-09-12T09:58:41.5549390Z            6: resource \"aws_route53_resolver_query_log_config\" \"test\" {\r\n            2022-09-12T09:58:41.5549661Z\r\n            2022-09-12T09:58:43.0838174Z --- FAIL: TestAccRoute53ResolverQueryLogConfig_tags (3104.28s)\r\n            2022-09-12T09:58:57.4419492Z === CONT  TestAccRoute53ResolverQueryLogConfig_basic\r\n            2022-09-12T09:58:57.4420249Z     query_log_config_test.go:23: Step 1/2 error: Error running apply: exit status 1\r\n            2022-09-12T09:58:57.4420641Z\r\n            2022-09-12T09:58:57.4422182Z         Error: error creating Route53 Resolver Query Log Config: InternalError: exception while calling route53resolver.CreateResolverQueryLogConfig: 'AccountSpecificBackend' object has no attribute 'tagger'\r\n            2022-09-12T09:58:57.4423075Z         \tstatus code: 500, request id: IFCWL3RL0OH78VFWYY5DCOAM7VCQU1J1ATYMPDJ8IB4SRPKVLQC8\r\n            2022-09-12T09:58:57.4423487Z\r\n            2022-09-12T09:58:57.4423954Z           with aws_route53_resolver_query_log_config.test,\r\n            2022-09-12T09:58:57.4424649Z           on terraform_plugin_test.tf line 7, in resource \"aws_route53_resolver_query_log_config\" \"test\":\r\n            2022-09-12T09:58:57.4425292Z            7: resource \"aws_route53_resolver_query_log_config\" \"test\" {\r\n            2022-09-12T09:58:57.4425646Z\r\n            2022-09-12T09:59:00.2395038Z --- FAIL: TestAccRoute53ResolverQueryLogConfig_basic (3098.44s)\r\n            2022-09-12T09:59:26.9404733Z === CONT  TestAccRoute53ResolverQueryLogConfigAssociation_disappears\r\n            2022-09-12T09:59:26.9405659Z     query_log_config_association_test.go:52: Step 1/1 error: Error running apply: exit status 1\r\n            2022-09-12T09:59:26.9406182Z\r\n            2022-09-12T09:59:26.9408505Z         Error: error creating Route53 Resolver Query Log Config: InternalError: exception while calling route53resolver.CreateResolverQueryLogConfig: 'AccountSpecificBackend' object has no attribute 'tagger'\r\n            2022-09-12T09:59:26.9409555Z         \tstatus code: 500, request id: K4UB9MWFJM5H9QFGI93Z1624PFDFI6RSL897YSCZPPD102IAH3ZD\r\n            2022-09-12T09:59:26.9410362Z\r\n            2022-09-12T09:59:26.9411072Z           with aws_route53_resolver_query_log_config.test,\r\n            2022-09-12T09:59:26.9412077Z           on terraform_plugin_test.tf line 14, in resource \"aws_route53_resolver_query_log_config\" \"test\":\r\n            2022-09-12T09:59:26.9412974Z           14: resource \"aws_route53_resolver_query_log_config\" \"test\" {\r\n            2022-09-12T09:59:26.9413535Z\r\n            2022-09-12T09:59:30.7844206Z --- FAIL: TestAccRoute53ResolverQueryLogConfigAssociation_disappears (3099.95s)\r\n            2022-09-12T10:00:52.0020687Z === CONT  TestAccRoute53ResolverFirewallDomainList_domains\r\n            2022-09-12T10:00:52.0023109Z     firewall_domain_list_test.go:53: Step 4/4 error: After applying this test step and performing a `terraform refresh`, the plan was not empty.\r\n            2022-09-12T10:00:52.0051294Z         stdout\r\n            2022-09-12T10:00:52.0051847Z\r\n            2022-09-12T10:00:52.0052826Z\r\n            2022-09-12T10:00:52.0053577Z         Terraform used the selected providers to generate the following execution\r\n            2022-09-12T10:00:52.0055342Z         plan. Resource actions are indicated with the following symbols:\r\n            2022-09-12T10:00:52.0056183Z           ~ update in-place\r\n            2022-09-12T10:00:52.0056603Z\r\n            2022-09-12T10:00:52.0198315Z         Terraform will perform the following actions:\r\n            2022-09-12T10:00:52.0198637Z\r\n            2022-09-12T10:00:52.0201092Z           # aws_route53_resolver_firewall_domain_list.test will be updated in-place\r\n            2022-09-12T10:00:52.0203740Z           ~ resource \"aws_route53_resolver_firewall_domain_list\" \"test\" {\r\n            2022-09-12T10:00:52.0206149Z               ~ domains  = [\r\n            2022-09-12T10:00:52.0208862Z                   - \"66tguovt.test.\",\r\n            2022-09-12T10:00:52.0211570Z                 ]\r\n            2022-09-12T10:00:52.0214240Z                 id       = \"rslvr-fdl-e166b265c167fdb5b\"\r\n            2022-09-12T10:00:52.0217093Z                 name     = \"tf-acc-test-8485330124294055099\"\r\n            2022-09-12T10:00:52.0219938Z                 tags     = {}\r\n            2022-09-12T10:00:52.0222213Z                 # (2 unchanged attributes hidden)\r\n            2022-09-12T10:00:52.0224318Z             }\r\n            2022-09-12T10:00:52.0226361Z\r\n            2022-09-12T10:00:52.0228536Z         Plan: 0 to add, 1 to change, 0 to destroy.\r\n            2022-09-12T10:00:56.0390280Z --- FAIL: TestAccRoute53ResolverFirewallDomainList_domains (61.30s)\r\n            ```\r\n    - [x] `route53`:\r\n      - [x] `TestAccRoute53ZoneAssociation_crossAccount` (removed from the allowlist)\r\n      - [x] `TestAccRoute53VPCAssociationAuthorization_disappears` (removed from the allowlist)\r\n      - [x] `TestAccRoute53VPCAssociationAuthorization_basic` (removed from the allowlist)\r\n          ```\r\n        2022-09-12T09:15:17.5808405Z     zone_association_test.go:118: Step 1/2 error: Error running apply: exit status 1\r\n        2022-09-12T09:15:17.5808906Z\r\n        2022-09-12T09:15:17.5810873Z         Error: Error creating Route53 VPC Association Authorization: InternalFailure: API action 'CreateVPCAssociationAuthorization' for service 'route53' not yet implemented or pro feature - check https://docs.localstack.cloud/aws/feature-coverage for further information\r\n        2022-09-12T09:15:17.5812009Z         \tstatus code: 501, request id: 6MJPGBSLVP4LFB2OCV4YW9CMQOQ5VR8R5A77IZ2QQ0SVBIUY37OR\r\n        2022-09-12T09:15:17.5812438Z\r\n        2022-09-12T09:15:17.5812954Z           with aws_route53_vpc_association_authorization.test,\r\n        2022-09-12T09:15:17.5813765Z           on terraform_plugin_test.tf line 36, in resource \"aws_route53_vpc_association_authorization\" \"test\":\r\n        2022-09-12T09:15:17.5814539Z           36: resource \"aws_route53_vpc_association_authorization\" \"test\" {\r\n        2022-09-12T09:15:17.5814892Z\r\n        2022-09-12T09:15:20.7815499Z --- FAIL: TestAccRoute53ZoneAssociation_crossAccount (37.82s)\r\n        2022-09-12T09:18:21.8024190Z === CONT  TestAccRoute53VPCAssociationAuthorization_disappears\r\n        2022-09-12T09:18:21.8025713Z     vpc_association_authorization_test.go:48: Step 1/1 error: Error running apply: exit status 1\r\n        2022-09-12T09:18:21.8026384Z\r\n        2022-09-12T09:18:21.8028598Z         Error: Error creating Route53 VPC Association Authorization: InternalFailure: API action 'CreateVPCAssociationAuthorization' for service 'route53' not yet implemented or pro feature - check https://docs.localstack.cloud/aws/feature-coverage for further information\r\n        2022-09-12T09:18:21.8185472Z         \tstatus code: 501, request id: QQY9JQ4ZV7Y1TH1FW4UCMPWOGMEVWLMV5ZBRB5MWV37RC37DRNRK\r\n        2022-09-12T09:18:21.8186139Z\r\n        2022-09-12T09:18:21.8186667Z           with aws_route53_vpc_association_authorization.test,\r\n        2022-09-12T09:18:21.8187484Z           on terraform_plugin_test.tf line 29, in resource \"aws_route53_vpc_association_authorization\" \"test\":\r\n        2022-09-12T09:18:21.8188203Z           29: resource \"aws_route53_vpc_association_authorization\" \"test\" {\r\n        2022-09-12T09:18:21.8188556Z\r\n        2022-09-12T09:18:26.5223056Z --- FAIL: TestAccRoute53VPCAssociationAuthorization_disappears (50.24s)\r\n        2022-09-12T09:18:50.3039511Z === CONT  TestAccRoute53VPCAssociationAuthorization_basic\r\n        2022-09-12T09:18:50.3040676Z     vpc_association_authorization_test.go:20: Step 1/2 error: Error running apply: exit status 1\r\n        2022-09-12T09:18:50.3041349Z\r\n        2022-09-12T09:18:50.3043512Z         Error: Error creating Route53 VPC Association Authorization: InternalFailure: API action 'CreateVPCAssociationAuthorization' for service 'route53' not yet implemented or pro feature - check https://docs.localstack.cloud/aws/feature-coverage for further information\r\n        2022-09-12T09:18:50.3044875Z         \tstatus code: 501, request id: D0MPVX16I1Y4EFBB6PZIDGTLUJQSJVF35NV90MKPHIVG6V3GASBI\r\n        2022-09-12T09:18:50.3045562Z\r\n        2022-09-12T09:18:50.3046236Z           with aws_route53_vpc_association_authorization.test,\r\n        2022-09-12T09:18:50.3047227Z           on terraform_plugin_test.tf line 29, in resource \"aws_route53_vpc_association_authorization\" \"test\":\r\n        2022-09-12T09:18:50.3048187Z           29: resource \"aws_route53_vpc_association_authorization\" \"test\" {\r\n        2022-09-12T09:18:50.3048784Z\r\n        2022-09-12T09:18:53.4851715Z --- FAIL: TestAccRoute53VPCAssociationAuthorization_basic (35.34s)\r\n        ```\r\n\r\n/cc @dominikschubert  @macnev2013 ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 57,
        "deletions": 6009,
        "changed_files": 5,
        "created_at": "2022-09-12T08:29:10Z",
        "closed_at": "2022-09-12T11:37:32Z",
        "merged_at": "2022-09-12T11:37:32Z",
        "body": "# \ud83d\ude80 ASF Update Report \ud83d\ude80\nThis PR has been automatically generated to update the generated API stubs for our ASF services.\nIt uses the latest code-generator from the _master_ branch ([scaffold.py](https://github.com/localstack/localstack/blob/master/localstack/aws/scaffold.py)) and the latest _published_ version of [botocore](https://github.com/boto/botocore) to re-generate all API stubs which are already present in the `localstack.aws.api` module of the _master_ branch.\n\n## \ud83d\udd04 Updated Services\nThis PR updates the following services:\n- ec2\n- route53\n- s3\n- sns\n- ssm\n\n## \ud83d\udc77\ud83c\udffd Handle this PR\nThe following options describe how to interact with this PR / the auto-update:\n\n\u2714\ufe0f **Accept Changes**\nIf the changes are satisfying, just squash-merge the PR and delete the source branch.\n\n\ud83d\udeab **Ignore Changes**\nIf you want to ignore the changes in this PR, just close the PR and *do not delete* the source branch. The PR will not be opened and a new PR will not be created for as long as the generated code does not change (or the branch is deleted). As soon as there are new changes, a new PR will be created.\n\n\u270f\ufe0f **Adapt Changes**\n*Don't do this.* The APIs are auto-generated. If you decide that the APIs should look different, you have to change the code-generation.\n\n\u23f8\ufe0f **Pause Updates**\nRemove the cron-schedule trigger of the GitHub Action workflow which creates these PRs. The action can then still be triggered manually, but it will not be executed automatically.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 8,
        "deletions": 8,
        "changed_files": 1,
        "created_at": "2022-09-12T06:59:30Z",
        "closed_at": "2022-09-12T08:26:54Z",
        "merged_at": "2022-09-12T08:26:54Z",
        "body": "With https://github.com/localstack/localstack/commit/3baefea6df1e590c426bd8458d6d2564f2dabf92, @macnev2013 introduced an automation which automatically executes a set of terraform tests (created by the terraform community) against localstack.\r\nThe testing infrastructure depends on a small patch which is applied on top of https://github.com/hashicorp/terraform-provider-aws. Unfortunately, the patch broke with https://github.com/hashicorp/terraform-provider-aws/commit/2b217fc97c080aa193516f1c2249a1ba3571154a.\r\n\r\nThis PR fixes the patch for now. In another iteration, we could make the testing infrastructure more resilient by:\r\n- Maybe get the terraform team to allow configuring the endpoints when executing the tests (that would be awesome).\r\n- Use a pinned version of the repo (i.e. a tag) which is automatically updated by some kind of \"dependency bot\" like renovate.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 174,
        "deletions": 9,
        "changed_files": 14,
        "created_at": "2022-09-12T06:49:22Z",
        "closed_at": "2022-12-15T10:14:58Z",
        "merged_at": "2022-12-15T10:14:58Z",
        "body": "Hi, here's my contribution for the \"feature request: More input audio formats for Transcribe #6398\" (#6818). Thank you for your time to review my code. If there is anything I need to modify, please let me know. \r\n\r\nThank you for your support!\r\n\r\n## Todo\r\n\r\n- ~[ ] Add usage tracking for ffmpeg installer~ Current workaround is to treat the use of `transcribe` service as equivalent.",
        "comments": 8
    },
    {
        "merged": false,
        "additions": 57,
        "deletions": 6009,
        "changed_files": 5,
        "created_at": "2022-09-12T05:33:18Z",
        "closed_at": "2022-09-12T08:27:19Z",
        "merged_at": null,
        "body": "# \ud83d\ude80 ASF Update Report \ud83d\ude80\nThis PR has been automatically generated to update the generated API stubs for our ASF services.\nIt uses the latest code-generator from the _master_ branch ([scaffold.py](https://github.com/localstack/localstack/blob/master/localstack/aws/scaffold.py)) and the latest _published_ version of [botocore](https://github.com/boto/botocore) to re-generate all API stubs which are already present in the `localstack.aws.api` module of the _master_ branch.\n\n## \ud83d\udd04 Updated Services\nThis PR updates the following services:\n- ec2\n- route53\n- s3\n- sns\n- ssm\n\n## \ud83d\udc77\ud83c\udffd Handle this PR\nThe following options describe how to interact with this PR / the auto-update:\n\n\u2714\ufe0f **Accept Changes**\nIf the changes are satisfying, just squash-merge the PR and delete the source branch.\n\n\ud83d\udeab **Ignore Changes**\nIf you want to ignore the changes in this PR, just close the PR and *do not delete* the source branch. The PR will not be opened and a new PR will not be created for as long as the generated code does not change (or the branch is deleted). As soon as there are new changes, a new PR will be created.\n\n\u270f\ufe0f **Adapt Changes**\n*Don't do this.* The APIs are auto-generated. If you decide that the APIs should look different, you have to change the code-generation.\n\n\u23f8\ufe0f **Pause Updates**\nRemove the cron-schedule trigger of the GitHub Action workflow which creates these PRs. The action can then still be triggered manually, but it will not be executed automatically.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2022-09-12T01:45:28Z",
        "closed_at": "2022-09-12T11:24:19Z",
        "merged_at": "2022-09-12T11:24:19Z",
        "body": "[![Mend Renovate](https://app.renovatebot.com/images/banner.svg)](https://renovatebot.com)\n\nThis PR contains the following updates:\n\n| Package | Type | Update | Change |\n|---|---|---|---|\n| python | final | patch | `3.10.6-slim-buster` -> `3.10.7-slim-buster` |\n| python | stage | patch | `3.10.6-slim-buster` -> `3.10.7-slim-buster` |\n\n---\n\n### Configuration\n\n\ud83d\udcc5 **Schedule**: Branch creation - \"before 3am on Monday\" (UTC), Automerge - At any time (no schedule defined).\n\n\ud83d\udea6 **Automerge**: Disabled by config. Please merge this manually once you are satisfied.\n\n\u267b **Rebasing**: Whenever PR becomes conflicted, or you tick the rebase/retry checkbox.\n\n\ud83d\udd15 **Ignore**: Close this PR and you won't be reminded about these updates again.\n\n---\n\n - [ ] <!-- rebase-check -->If you want to rebase/retry this PR, click this checkbox.\n\n---\n\nThis PR has been generated by [Mend Renovate](https://www.mend.io/free-developer-tools/renovate/). View repository job log [here](https://app.renovatebot.com/dashboard#github/localstack/localstack).\n<!--renovate-debug:eyJjcmVhdGVkSW5WZXIiOiIzMi4xOTQuMyIsInVwZGF0ZWRJblZlciI6IjMyLjE5NC4zIn0=-->\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 438,
        "deletions": 6,
        "changed_files": 4,
        "created_at": "2022-09-09T15:14:43Z",
        "closed_at": "2022-09-20T16:49:03Z",
        "merged_at": "2022-09-20T16:49:03Z",
        "body": "Buckets can be addressed either in path-style `s3.<region>.localhost.localstack.cloud:4566/mybucket` or virtual host-style `mybucket.<region>.localhost.localstack.cloud:4566`.\r\n\r\nPath style (without region) is covered by moto.\r\n* Added routes for vhost-style \r\n* Added more specific routes for buckets that contain dot(s) in the name -> this is a special case as it changes the domain\r\n  * put requests for such buckets will currently not work\r\n* Added route to match path-style urls that contain a region\r\n  * currently only strips the region, and re-sends the request\r\n\r\nNote: AWS works a bit differently (also compared to the old provider): if bucket is created with a location constraint and the path-style contains another region, it would respond with 301 (for any region other than `us-east-1`), or 307 (for `us-east-1`). see test `test_access_bucket_different_region`\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 12,
        "deletions": 6,
        "changed_files": 1,
        "created_at": "2022-09-09T04:54:31Z",
        "closed_at": "2022-09-15T04:42:35Z",
        "merged_at": "2022-09-15T04:42:35Z",
        "body": "Closes https://github.com/localstack/localstack-ext/issues/950",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 39,
        "deletions": 7,
        "changed_files": 6,
        "created_at": "2022-09-08T19:35:20Z",
        "closed_at": "2022-09-12T11:51:43Z",
        "merged_at": "2022-09-12T11:51:43Z",
        "body": "Extend CLI to run container from within Docker using SDK client. \r\n\r\nThe starting point for this PR is a [Docker Extension](https://www.docker.com/products/extensions/) PoC for LocalStack - these extensions do not allow us to run native commands on the host, but only spawn Docker containers. Hence, in order to be able to reuse the full power of the CLI, this PR adds a few small adjustments to allow us to run the CLI (and `localstack start`) from within a Docker container.\r\n\r\nEssentially, we'd like to be able to run this command:\r\n```\r\ndocker run --rm -it --entrypoint= -v /var/run/docker.sock:/var/run/docker.sock localstack/localstack bin/localstack start -d\r\n```\r\n\r\n... which currently fails, because we're always using the `CmdDockerClient` (and `docker` is not available in the image):\r\n```\r\n  File \"/opt/code/localstack/localstack/utils/container_utils/docker_cmd_client.py\", line 492, in run_container\r\n    result = self._run_async_cmd(cmd, stdin, kwargs.get(\"name\") or \"\", image_name)\r\n  File \"/opt/code/localstack/localstack/utils/container_utils/docker_cmd_client.py\", line 559, in _run_async_cmd\r\n    process = run(cmd, **kwargs)\r\n  File \"/opt/code/localstack/localstack/utils/run.py\", line 87, in run\r\n    process = subprocess.Popen(\r\n  File \"/usr/local/lib/python3.10/subprocess.py\", line 969, in __init__\r\n    self._execute_child(args, executable, preexec_fn, close_fds,\r\n  File \"/usr/local/lib/python3.10/subprocess.py\", line 1845, in _execute_child\r\n    raise child_exception_type(errno_num, err_msg, err_filename)\r\nFileNotFoundError: [Errno 2] No such file or directory: 'docker'\r\n```\r\n\r\nThe main change in the PR is to make a switch in `bootstrap.py` to use `SdkDockerClient` in case the `docker` command is not available. Additionally, a small refactoring is introduced to allow passing in the `--privileged` flag for both, the `create_container(..)` and `run_container(..)` commands.\r\n\r\n~The `test_start_cli_within_container(..)` test is currently still marked as `skip` - it should pass once we've done a full roundtrip of building the Docker image (then we can remove the marker).~",
        "comments": 3
    },
    {
        "merged": false,
        "additions": 33,
        "deletions": 69,
        "changed_files": 1,
        "created_at": "2022-09-07T12:39:53Z",
        "closed_at": "2023-03-27T16:16:09Z",
        "merged_at": null,
        "body": "While working on the migration of the s3 provider, @alexrashed provided us with a new rule for routing s3 requests, now that we can use the s3 specs, even if the default provider is still the currently used one and not ASF.\r\nThe s3 legacy routing rules are commented out to compare, we can safely delete them if RestServiceOperationRouter does the same job but better.\r\nWe only keep the host matching rule for now to correctly dispatch request containing the bucket in the host, as the path matching would not work.\r\nThe s3 test suite runs with this change, this PR will test it against the whole test suite.\r\n\nNote: I will delete the commented part before merging",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 4,
        "changed_files": 2,
        "created_at": "2022-09-07T12:21:37Z",
        "closed_at": "2022-09-08T12:30:17Z",
        "merged_at": "2022-09-08T12:30:17Z",
        "body": "## Problem\r\nCurrently, we only use the \"context\" variable if the principal id is set, but we have to do this in all the cases  (otherwise we would turn over the complete authorizer payload to the lambda, not just the context variables)\r\n## Solution\r\nMake \"return context\" not dependent on the presence of some variable.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 9,
        "deletions": 5,
        "changed_files": 1,
        "created_at": "2022-09-07T11:08:40Z",
        "closed_at": "2022-09-09T11:16:56Z",
        "merged_at": "2022-09-09T11:16:56Z",
        "body": "This is a preparation for ASF S3 migration. The [old provider, filters `LocationConstraint`](https://github.com/localstack/localstack/blob/master/localstack/services/s3/s3_listener.py#L1465-L1471) for `create-bucket`:\r\n```\r\n # TODO: For some reason, moto doesn't allow us to put a location constraint on us-east-1\r\n        to_find1 = to_bytes(\"<LocationConstraint>us-east-1</LocationConstraint>\")\r\n        to_find2 = to_bytes(\"<CreateBucketConfiguration\")\r\n        if data and data.startswith(to_bytes(\"<\")) and to_find1 in data and to_find2 in data:\r\n            # Note: with the latest version, <CreateBucketConfiguration> must either\r\n            # contain a valid <LocationConstraint>, or not be present at all in the body.\r\n            modified_data = b\"\"\r\n```\r\n\r\nWith the new ASF S3 provider, we will have the same behavior as AWS:\r\n`LocationConstraint` for bucket creation should only be included if the location is not the default location (e.g. not us-east-1). Otherwise it will thrown an `IllegalLocationConstraintException`.\r\n\r\n[According to the API](https://docs.aws.amazon.com/AmazonS3/latest/API/API_CreateBucket.html#API_CreateBucket_RequestSyntax), `us-east-1` is not a valid identifier for `LocationConstraint`\r\n\r\nThere was previously a check, but it was removed with PR https://github.com/localstack/localstack/pull/6171.\r\n\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 16,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2022-09-07T09:11:30Z",
        "closed_at": "2022-09-07T10:37:25Z",
        "merged_at": "2022-09-07T10:37:25Z",
        "body": "Fix region in DynamoDB store lookup to enable access from NoSQL Workbench: https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/workbench.html\r\n\r\nFixes this error:\r\n```\r\n  File \".../localstack/services/dynamodb/provider.py\", line 288, in find_global_table_region\r\n    replicas = get_store().REPLICA_UPDATES.get(table_name)\r\n  File \".../localstack/services/dynamodb/provider.py\", line 278, in get_store\r\n    return dynamodb_stores[_account_id][_region]\r\n  File \".../localstack/services/stores.py\", line 166, in __getitem__\r\n    raise ValueError(\r\nValueError: 'localhost' is not a valid AWS region name for dynamodb\r\n```\r\n\r\n/cc @viren-nadkarni ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 4,
        "changed_files": 1,
        "created_at": "2022-09-07T07:13:13Z",
        "closed_at": "2022-09-07T08:35:09Z",
        "merged_at": "2022-09-07T08:35:09Z",
        "body": "This PR fixes the `coverage` config to:\r\n- Properly exclude the generated ASF APIs and the extensions API (see https://github.com/localstack/localstack/pull/6715 and https://github.com/localstack/localstack/pull/6829).\r\n- Remove the exclusion of `localstack/infra` and `localstack/node_modules`, since these directories are not used anymore (since https://github.com/localstack/localstack/pull/6302).\r\n\r\nI verified the settings with the following commands locally:\r\n```\r\nTEST_PATH=\"tests/integration/test_sqs.py\" make test-coverage\r\ncoverage combine\r\ncoverage html\r\n```\r\n\r\n**This PR will unfortunately lower the code coverage percentage quite a lot**, since the generated APIs had a high coverage:\r\n- They only contain the method and type signatures where loading them is a coverage hit.\r\n- They increase the total number of lines quite a lot (the generated code is quite big).\r\n\r\nHowever, we don't want to green-wash our results. Once this PR is merged we can substantially increase the code coverage by identifying currently uncovered code and either removing it (if it's dead code), or write tests for these uncovered sections.\r\n\r\n/cc @bentsku @thrau ",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1277,
        "deletions": 1092,
        "changed_files": 32,
        "created_at": "2022-09-07T05:34:21Z",
        "closed_at": "2022-09-30T15:17:16Z",
        "merged_at": "2022-09-30T15:17:16Z",
        "body": "### Summary\r\n\r\nRefactors these services from RegionBackend to Stores.\r\n\r\n- CloudFormation\r\n- API Gateway v1\r\n- OpenSearch\r\n- Kinesis\r\n- Route 53\r\n- SQS (Also reorganises the code into submodules (`.constants`, `.utils`, `.models`, `.exceptions`) cc: @thrau \r\n- DynamoDB (Previously two stores were defined. Now this is consolidated. Going forward we want to keep one store only as it is simpler and avoid patching) cc: @giograno \r\n- DynamoDB Streams\r\n- Firehose\r\n- EventBridge\r\n- SNS\r\n\r\nThis change will introduce full multi-accounts + persistence + cloud pods support to all community providers.",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-09-07T02:41:30Z",
        "closed_at": "2022-09-09T13:25:49Z",
        "merged_at": null,
        "body": "cryptography 38.0.0 was released 3h ago, this breaks any run of localstack on host due to a conflict with pyopenssl(not compatible with cryptography 38.0.0\r\n\r\nError trace:\r\n```\r\nTraceback (most recent call last):\r\n  File \"/home/runner/.local/bin/localstack\", line 23, in <module>\r\n    main()\r\n  File \"/home/runner/.local/bin/localstack\", line 19, in main\r\n    main.main()\r\n  File \"/home/runner/.local/lib/python3.8/site-packages/localstack/cli/main.py\", line 3, in main\r\n    from .localstack import create_with_plugins\r\n  File \"/home/runner/.local/lib/python3.8/site-packages/localstack/cli/localstack.py\", line 7, in <module>\r\n    from localstack import config\r\n  File \"/home/runner/.local/lib/python3.8/site-packages/localstack/config.py\", line 11, in <module>\r\n    from localstack.constants import (\r\n  File \"/home/runner/.local/lib/python3.8/site-packages/localstack/constants.py\", line 3, in <module>\r\n    import localstack_client.config\r\n  File \"/home/runner/.local/lib/python3.8/site-packages/localstack_client/config.py\", line 7, in <module>\r\n    from localstack_client.patch import patch_expand_host_prefix  # noqa\r\n  File \"/home/runner/.local/lib/python3.8/site-packages/localstack_client/patch.py\", line 3, in <module>\r\n    import boto3\r\n  File \"/home/runner/.local/lib/python3.8/site-packages/boto3/__init__.py\", line 17, in <module>\r\n    from boto3.session import Session\r\n  File \"/home/runner/.local/lib/python3.8/site-packages/boto3/session.py\", line 17, in <module>\r\n    import botocore.session\r\n  File \"/home/runner/.local/lib/python3.8/site-packages/botocore/session.py\", line 26, in <module>\r\n    import botocore.client\r\n  File \"/home/runner/.local/lib/python3.8/site-packages/botocore/client.py\", line 17, in <module>\r\n    from botocore import waiter, xform_name\r\n  File \"/home/runner/.local/lib/python3.8/site-packages/botocore/waiter.py\", line 18, in <module>\r\n    from botocore.docs.docstring import WaiterDocstring\r\n  File \"/home/runner/.local/lib/python3.8/site-packages/botocore/docs/__init__.py\", line 15, in <module>\r\n    from botocore.docs.service import ServiceDocumenter\r\n  File \"/home/runner/.local/lib/python3.8/site-packages/botocore/docs/service.py\", line 14, in <module>\r\n    from botocore.docs.client import ClientDocumenter, ClientExceptionsDocumenter\r\n  File \"/home/runner/.local/lib/python3.8/site-packages/botocore/docs/client.py\", line 14, in <module>\r\n    from botocore.docs.example import ResponseExampleDocumenter\r\n  File \"/home/runner/.local/lib/python3.8/site-packages/botocore/docs/example.py\", line 13, in <module>\r\n    from botocore.docs.shape import ShapeDocumenter\r\n  File \"/home/runner/.local/lib/python3.8/site-packages/botocore/docs/shape.py\", line 19, in <module>\r\n    from botocore.utils import is_json_value_header\r\n  File \"/home/runner/.local/lib/python3.8/site-packages/botocore/utils.py\", line 34, in <module>\r\n    import botocore.httpsession\r\n  File \"/home/runner/.local/lib/python3.8/site-packages/botocore/httpsession.py\", line 41, in <module>\r\n    from urllib3.contrib.pyopenssl import orig_util_SSLContext as SSLContext\r\n  File \"/usr/lib/python3/dist-packages/urllib3/contrib/pyopenssl.py\", line 46, in <module>\r\n    import OpenSSL.SSL\r\n  File \"/usr/lib/python3/dist-packages/OpenSSL/__init__.py\", line 8, in <module>\r\n    from OpenSSL import crypto, SSL\r\n  File \"/usr/lib/python3/dist-packages/OpenSSL/crypto.py\", line 1553, in <module>\r\n    class X509StoreFlags(object):\r\n  File \"/usr/lib/python3/dist-packages/OpenSSL/crypto.py\", line 1573, in X509StoreFlags\r\n    CB_ISSUER_CHECK = _lib.X509_V_FLAG_CB_ISSUER_CHECK\r\nAttributeError: module 'lib' has no attribute 'X509_V_FLAG_CB_ISSUER_CHECK'\r\n```",
        "comments": 5
    },
    {
        "merged": true,
        "additions": 10124,
        "deletions": 1,
        "changed_files": 3,
        "created_at": "2022-09-06T15:01:56Z",
        "closed_at": "2022-09-06T16:40:25Z",
        "merged_at": "2022-09-06T16:40:25Z",
        "body": "This PR is part of #6827 and is the basis for migrating s3 to ASF.\r\nIt creates the new s3 ASF provider marked as `asf` as well as the scaffolded `s3` API. It sets the current s3 provider as `default`.\r\n\r\nThis should make no changes to the current implementation, and can only be used with `PROVIDER_OVERRIDE_S3=asf` (not stable at all for now!)\r\n\r\nThis is @steffyP works and I'm just making the PR \ud83c\udf89 ",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 30,
        "deletions": 13,
        "changed_files": 5,
        "created_at": "2022-09-06T14:51:18Z",
        "closed_at": "2022-09-07T07:33:54Z",
        "merged_at": "2022-09-07T07:33:54Z",
        "body": "## Problem\r\nSadly, with the refactoring of lambda invokes in the different services, one important thing was missed: the region of the lambda client has to match the region of the lambda invoked. Currently, it will fallback to the default region, which is us-east-1, if it is not executed directly in the context of a request for a different region. Even in the latter case, some services support invoking lambdas in different regions (apigateway for example), which would still not be possible then.\r\n\r\n## Fix\r\nWe now extract the region of the lambda arn before creating the call, and calling the lambda in the appropriate region.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 86,
        "deletions": 329,
        "changed_files": 19,
        "created_at": "2022-09-06T12:11:34Z",
        "closed_at": "2023-03-23T11:34:53Z",
        "merged_at": "2023-03-23T11:34:53Z",
        "body": "## Summary\r\nThis PR should remain minimal in terms of code changes, and is mostly used for keeping track of the PRs regarding the new s3 provider going directly into master and for tracking test failure rates against the new provider.\r\n\r\n## PRs\r\nThe following PRs have been created to fully implement the new s3 provider:\r\n* #6552\r\n* #6629\r\n* #6836\r\n* #6829 \r\n* #6812 \r\n* #6839\r\n* #6859\r\n* #6868 \r\n* #6875 \r\n* #6846\r\n* #6903 \r\n* #6906\r\n* #6908\r\n* #6937 \r\n* #6959\r\n* #6980\r\n* #6987\r\n* #7001\r\n* #7027\r\n* #7065\r\n* #7070\r\n* #7081\r\n* #7152\r\n* #7173\r\n\r\n## Tasks\r\n- [x] Migrate all s3 tests to pytest and validates them against AWS\r\n- [X] Create the new ASF provider\r\n- [X] Allow patching of botocore specs to match actual AWS behaviour\r\n- [X] Reroute virtual host addressed requests as path addressed ones to take advantage of the builtin ASF routing\r\n- [x] Implement major S3 features:\r\n  - [X] S3 notifications\r\n  - [X] All major basic OPs (GetObject, GetBucket, etc)\r\n  - [X] Pre-signed URLs\r\n  - [X] Pre-signed POST\r\n  - [X] S3 Static Website Hosting\r\n  - [x] CORS\r\n\r\n- [x] Fix ongoing issues with current provider not tackled in above major features\r\n  - [X] VersionId and Expires always present\r\n  - [X] GetObjectAttributes not implemented\r\n  - [X] Empty tagging lists\r\n  - [X] Delete versioned objects\r\n  - [X] Fix Terraform tests (fixed in #7027 + full test run green [here](https://github.com/localstack/localstack/actions/runs/3322125332/jobs/5490831947))\r\n  - [x] remove legacy VirtualHostRewriter\r\n  - [x] Fix issues with presigned urls\r\n\r\n- [x] Implement the Pro provider\r\n\r\n- [x] Implement S3 ASF test job for CircleCI",
        "comments": 7
    },
    {
        "merged": false,
        "additions": 401,
        "deletions": 215,
        "changed_files": 16,
        "created_at": "2022-09-06T08:57:58Z",
        "closed_at": "2022-10-12T08:00:17Z",
        "merged_at": null,
        "body": "This PR enhances the CORS handling for edge routes.\r\nThis is still in an early stage, but I'm happy for any feedback! :)\r\n\r\nTODO:\r\n- [ ] Move the conditional service detection from the CORS handlers to the service router.\r\n- [ ] Verify that this approach is feasible for our current and upcoming use-cases (especially the S3 ASF migration).\r\n- [ ] Add some more tests concerning the CORS handling for services registering edge routes.\r\n- [ ] Try to avoid matching the routes multiple times in the CORS handler.\r\n- [ ] Maybe create some useful CORS decorators which can share CORS handling across different routes (if that would be useful - would be similar to `flask-cors`)? ",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 15,
        "deletions": 9,
        "changed_files": 1,
        "created_at": "2022-09-06T05:59:51Z",
        "closed_at": "2022-09-06T08:56:18Z",
        "merged_at": "2022-09-06T08:56:18Z",
        "body": "Unifies config overrides in the `_client` fixture that returns either a \"local\" or AWS-targeting boto client.\r\n\r\nConfigs are now properly merging when needed. \r\n\r\n\r\nExample usage:\r\n```python\r\ndef test_whatever(create_boto_client):\r\n    client = create_boto_client(\"lambda\", additional_config=Config(parameter_validation=False))\r\n```",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-09-06T05:47:01Z",
        "closed_at": "2022-09-09T04:55:20Z",
        "merged_at": "2022-09-09T04:55:20Z",
        "body": "Test is flaky and times out: https://github.com/localstack/localstack/pull/6822#issuecomment-1237387338\r\n\r\ncc: @ackdav, @dominikschubert ",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 62,
        "deletions": 5,
        "changed_files": 3,
        "created_at": "2022-09-05T17:49:00Z",
        "closed_at": "2022-09-06T13:47:18Z",
        "merged_at": "2022-09-06T13:47:18Z",
        "body": "Makes it easier to reliably compare lists via snapshots by sorting them via a transformer instead of having to manually sorting the object before calling `match`.\r\n\r\nUsage: \r\n```python\r\nsnapshot.add_transformer(SortingTransformer(\"Aliases\", lambda x: x[\"Name\"]))\r\n ```\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 18,
        "deletions": 98,
        "changed_files": 2,
        "created_at": "2022-09-05T15:22:30Z",
        "closed_at": "2022-09-06T13:30:23Z",
        "merged_at": "2022-09-06T13:30:23Z",
        "body": "Latest automated Doc PR added the new service `transcribe` but information about implemented status is missing, as the script `capture_not_implemented_responses` is not aware of the service yet.\r\n\r\nThe services are now retrieved dynamically from the health endpoint. For community, we will not test against pro only endpoints, but this should be fine.\r\n\r\nTested a run of `coverage_docs_utility` with the new output files successfully.\r\n",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 1864,
        "deletions": 646,
        "changed_files": 5,
        "created_at": "2022-09-05T08:52:09Z",
        "closed_at": "2022-09-14T15:08:43Z",
        "merged_at": null,
        "body": "**Summary**\r\n\r\n- Mark every test with either aws_validated or only_localstack\r\n- fixtures: refactor out \"dynamodb_create_table\" and generalize \"dynamodb_create_table_with_parameters\"\r\n- improve on aws_validated tests (went from 19 -> 37)\r\n- introduce snapshot testing (incl. transformer) in most tests\r\n- refactor out aws_stack (source of most non-aws_validated test problems) in most test cases and rely on fixtures\r\n\r\n- no functional changes - only a rework of tests",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1621,
        "deletions": 438,
        "changed_files": 8,
        "created_at": "2022-09-05T08:50:58Z",
        "closed_at": "2022-09-22T08:21:35Z",
        "merged_at": "2022-09-22T08:21:35Z",
        "body": "Moves all the KMS logic from moto to LocalStack. Performs some remodeling of the data while at it.\r\n\r\nIt is going to be pain to read through the change, as it is extensive. I would recommend forgetting the diff and just read through the code itself as if it was written from scratch. It kinda was.\r\n\r\nOut of 30 present tests, 27 pass (validated) against AWS.",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 0,
        "deletions": 1195,
        "changed_files": 1,
        "created_at": "2022-09-05T05:32:46Z",
        "closed_at": "2022-09-05T07:08:38Z",
        "merged_at": "2022-09-05T07:08:38Z",
        "body": "# \ud83d\ude80 ASF Update Report \ud83d\ude80\nThis PR has been automatically generated to update the generated API stubs for our ASF services.\nIt uses the latest code-generator from the _master_ branch ([scaffold.py](https://github.com/localstack/localstack/blob/master/localstack/aws/scaffold.py)) and the latest _published_ version of [botocore](https://github.com/boto/botocore) to re-generate all API stubs which are already present in the `localstack.aws.api` module of the _master_ branch.\n\n## \ud83d\udd04 Updated Services\nThis PR updates the following services:\n- transcribe\n\n## \ud83d\udc77\ud83c\udffd Handle this PR\nThe following options describe how to interact with this PR / the auto-update:\n\n\u2714\ufe0f **Accept Changes**\nIf the changes are satisfying, just squash-merge the PR and delete the source branch.\n\n\ud83d\udeab **Ignore Changes**\nIf you want to ignore the changes in this PR, just close the PR and *do not delete* the source branch. The PR will not be opened and a new PR will not be created for as long as the generated code does not change (or the branch is deleted). As soon as there are new changes, a new PR will be created.\n\n\u270f\ufe0f **Adapt Changes**\n*Don't do this.* The APIs are auto-generated. If you decide that the APIs should look different, you have to change the code-generation.\n\n\u23f8\ufe0f **Pause Updates**\nRemove the cron-schedule trigger of the GitHub Action workflow which creates these PRs. The action can then still be triggered manually, but it will not be executed automatically.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-09-04T00:14:08Z",
        "closed_at": "2022-09-05T11:33:19Z",
        "merged_at": "2022-09-05T11:33:19Z",
        "body": "This PR increases the number of concurrent requests that can be served when running the LocalStack gateway through hypercorn. There's no impact die normal usage, it's just the size of the thread pool used for spawning request handlers. Should fix #6792 but need to double check with the user.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 35,
        "deletions": 11,
        "changed_files": 3,
        "created_at": "2022-09-03T13:40:13Z",
        "closed_at": "2022-09-05T10:56:23Z",
        "merged_at": "2022-09-05T10:56:23Z",
        "body": "Add ability to set custom expiry for reserved ports in `PortRange` TTL cache. \r\n\r\nThis surfaced while working on a fix for #6798 - some services need a bit more time to start up, so it will come in handy if we have a way to reserve service ports for an extended period of time (beyond the default 6 seconds).\r\n\r\nSummary of changes:\r\n* introduce a `CustomExpiryTTLCache` class that provides a `set_expiry(..)` method to set the expiry for a single key\r\n* allow passing in an optional `duration` parameter to `reserve_port(..)`, to reserve a port for the given duration\r\n* add a small test to assert the custom port reservation duration",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 157,
        "deletions": 4,
        "changed_files": 5,
        "created_at": "2022-09-03T13:30:56Z",
        "closed_at": "2022-09-05T13:09:26Z",
        "merged_at": "2022-09-05T13:09:26Z",
        "body": "This PR adds a `PatchingLoader` to ASF, which allows dynamic patching of botocore specs using jsonpatch.\r\n\r\nThis is mainly needed for s3 exception and response types, where the status codes defined in the spec are often missing or differ from what AWS actually returns. Some exception types are also missing custom attributes.\r\n\r\nPatches are collected  into `spec-patches.json` which is just a dictionary of botocore spec path -> jsonpatch document for that spec.\r\nI also added an example patch to demonstrate how to use it.\r\n\r\n@alexrashed i hope you find this to be an acceptable compromise between the two extremes of patching botocore objects vs providing our own spec files. :slightly_smiling_face:  by adding patched services to `test_generated_code_compiles`, we make sure that the patches are actually compatible with the spec, so that, should the spec diverge, we immediately get notified. (Jsonpatch is pretty picky on JSON shapes being compatible with patches)\r\n\r\nif you want changes, please feel free to edit and merge the PR",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-09-02T19:07:45Z",
        "closed_at": "2022-09-02T21:41:32Z",
        "merged_at": "2022-09-02T21:41:32Z",
        "body": "this pr upgrades moto to get the latest moto-ext changes from @bentsku  into the image.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-09-02T15:33:01Z",
        "closed_at": "2022-09-06T14:02:09Z",
        "merged_at": "2022-09-06T14:02:09Z",
        "body": "\u2026it appears that some subscription statuses don't have a token property. Fixes #6808 \r\n\r\nI really don't know if this fix is correct or whether this is an indication of bad data occurring from a previous call.\r\n\r\n**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 9,
        "deletions": 4,
        "changed_files": 1,
        "created_at": "2022-09-02T12:59:41Z",
        "closed_at": "2022-09-12T08:02:05Z",
        "merged_at": null,
        "body": "When the type for the value comparison changes, the match would silently succeed. Only a warning is logged, but this is likely to be overseen.\r\n\r\nFor example the snapshot contains a string:\r\n`\"list-objects-next_marker\": \"test\"` and the actual response contains a dict, the following warning would be logged, but the comparison would not show any error:\r\n`Unsupported diff mismatch reason: type_changes. Please report this to the team so we can add support. expected='test' | actual={'Contents': [{'ETag': '\"469aa468e8b397232fe0754ba11ba9f3\"', 'Key': 'test-key-990',\u00a0\u2026\u2026\u2026\u2026\u2026.. }]}`\r\n\r\nFix in this PR:\r\n\r\n- As the `report_type` in this case is `type_changes` we can simply filter for it, and return a response similar to `values_changed`.\r\n- Also added a dummy-return value in case another unknown `report_type` is encountered. The report will simply return the message we already log as warning, but the snapshot matching will fail.\r\n\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 46,
        "deletions": 1,
        "changed_files": 3,
        "created_at": "2022-09-01T18:55:43Z",
        "closed_at": "2022-09-01T21:02:25Z",
        "merged_at": "2022-09-01T21:02:25Z",
        "body": "This PR fixes #6784 \r\nWe did not check when calling `publish_batch` if the topic was valid or existing. Added the check + AWS validated test",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 35,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2022-09-01T17:25:03Z",
        "closed_at": "2022-09-02T12:42:47Z",
        "merged_at": "2022-09-02T12:42:47Z",
        "body": "Add the possibility to have dot in fields in path marked as skipped for snapshot testing.\r\n\r\n### Example\r\n\r\nHaving a response looking like this:\r\n```json\r\n\"_AttributesDict\": {\r\n  \"access_logs.s3.bucket\": \"\",\r\n  \"access_logs.s3.enabled\": \"false\"\r\n}\r\n```\r\nIf you want to skip verification of the field `access_logs.s3.enabled`, you would have a path looking like: `\"$.._AttributesDict.'access_logs.s3.enabled'\"`, escaping the `.`. See jsonpath library (https://github.com/h2non/jsonpath-ng)\r\n\r\n### Fix\r\n\r\nI added a way to rebuild the full path nodes list using the jsonpath-ng library instead of splitting on `.`\r\nAlso added a test to validate the behaviour",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 9,
        "deletions": 5,
        "changed_files": 1,
        "created_at": "2022-09-01T16:18:13Z",
        "closed_at": "2022-09-02T11:06:18Z",
        "merged_at": "2022-09-02T11:06:18Z",
        "body": "Remove xfail flag for test to run container as non-root. Follow-up / cleanup for PR #6785\r\n\r\nNote: Had to add a `chmod` command to enable open permissions for the host directory that's mounted into `/var/lib/localstack/logs` - avoiding this error:\r\n```\r\n2022-09-01T17:45:57.270 ERROR --- [   Thread-12] localstack.utils.bootstrap : Error while starting LocalStack container: Docker process returned with errorcode 1\r\n/usr/local/bin/docker-entrypoint.sh: line 73: /var/lib/localstack/logs/localstack_infra.log: Permission denied\r\n```\r\n\r\nI think it's a fair assumption that the user needs to take care of giving the Docker container user write access to the LocalStack internal filesystem. Additionally, we could also make the log file creation more resilient - adding a fallback to swallow permission errors when creating the `localstack_infra.log` log file.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2022-08-31T14:58:03Z",
        "closed_at": "2022-09-01T11:05:36Z",
        "merged_at": "2022-09-01T11:05:36Z",
        "body": "Bump Node.js binary to version 18. This addresses a few security vulnerabilities (CVEs) that have been reported by scanners like Aquasec/[Trivy](https://github.com/aquasecurity/trivy), or the Docker built-in scanner by Snyk (incl     CVE-2022-32213, CVE-2022-32214, CVE-2022-32215). Current LTS version is v16, but versions 14/16/17 were unfortunately all exposing these CVEs in the scan results, hence the easiest is for us to go with the latest version, 18.\r\n\r\nThe main impact of this will be on the local Lambda executor mode (`LAMBDA_EXECUTOR=local`) - specifically, if users are depending on [Node.js APIs that have been deprecated](https://nodejs.org/api/deprecations.html) . Still planning to prepare a small docs PR to highlight this point to our customers - also, with the new Lambda provider, the local executor will likely become obsolete / get phased out over time. /cc @dominikschubert @dfangl \r\n\r\nWe can merge this post v1.1 (no urgency to get it out with the 1.1 release in particular) - we could then wait for the next patch version for customers who need to pin to a specific version tag. \ud83d\udc4d \r\n\r\nTODO:\r\n- [ ] Update Lambda docs for local executor with new Node.js version",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 14,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2022-08-31T14:10:12Z",
        "closed_at": "2022-08-31T16:14:02Z",
        "merged_at": "2022-08-31T16:14:02Z",
        "body": "## Problem\r\nCurrently, our service parser interprets internal routes, such as `/health` and `/_localstack/...` as s3 service, which leads to an exemption from cors processing. This leads to localstack not allowing cors requests to /health or internal localstack domains.\r\n```\r\ncurl https://localhost.localstack.cloud:4566/health -H \"Origin: https://app.localstack.cloud\" -v                                        <aws:AWS-daniel>\r\n*   Trying 127.0.0.1:4566...\r\n* Connected to localhost.localstack.cloud (127.0.0.1) port 4566 (#0)\r\n* ALPN: offers h2\r\n* ALPN: offers http/1.1\r\n*  CAfile: /etc/ssl/certs/ca-certificates.crt\r\n*  CApath: none\r\n* TLSv1.3 (OUT), TLS handshake, Client hello (1):\r\n* TLSv1.3 (IN), TLS handshake, Server hello (2):\r\n* TLSv1.3 (IN), TLS handshake, Encrypted Extensions (8):\r\n* TLSv1.3 (IN), TLS handshake, Certificate (11):\r\n* TLSv1.3 (IN), TLS handshake, CERT verify (15):\r\n* TLSv1.3 (IN), TLS handshake, Finished (20):\r\n* TLSv1.3 (OUT), TLS change cipher, Change cipher spec (1):\r\n* TLSv1.3 (OUT), TLS handshake, Finished (20):\r\n* SSL connection using TLSv1.3 / TLS_AES_256_GCM_SHA384\r\n* ALPN: server accepted h2\r\n* Server certificate:\r\n*  subject: CN=localhost.localstack.cloud\r\n*  start date: Jul  3 07:00:15 2022 GMT\r\n*  expire date: Oct  1 07:00:14 2022 GMT\r\n*  subjectAltName: host \"localhost.localstack.cloud\" matched cert's \"localhost.localstack.cloud\"\r\n*  issuer: C=US; O=Let's Encrypt; CN=R3\r\n*  SSL certificate verify ok.\r\n* Using HTTP2, server supports multiplexing\r\n* Copying HTTP/2 data in stream buffer to connection buffer after upgrade: len=0\r\n* h2h3 [:method: GET]\r\n* h2h3 [:path: /health]\r\n* h2h3 [:scheme: https]\r\n* h2h3 [:authority: localhost.localstack.cloud:4566]\r\n* h2h3 [user-agent: curl/7.84.0]\r\n* h2h3 [accept: */*]\r\n* h2h3 [origin: https://app.localstack.cloud]\r\n* Using Stream ID: 1 (easy handle 0x56344390fd30)\r\n> GET /health HTTP/2\r\n> Host: localhost.localstack.cloud:4566\r\n> user-agent: curl/7.84.0\r\n> accept: */*\r\n> origin: https://app.localstack.cloud\r\n>\r\n* TLSv1.3 (IN), TLS handshake, Newsession Ticket (4):\r\n* TLSv1.3 (IN), TLS handshake, Newsession Ticket (4):\r\n* old SSL session ID is stale, removing\r\n< HTTP/2 200\r\n< content-type: application/json\r\n< content-length: 849\r\n< date: Wed, 31 Aug 2022 14:07:33 GMT\r\n< server: hypercorn-h2\r\n<\r\n* Connection #0 to host localhost.localstack.cloud left intact\r\n{\"services\": {\"acm\": \"available\", \"apigateway\": \"available\", \"cloudformation\": \"available\", \"cloudwatch\": \"available\", \"config\": \"available\", \"dynamodb\": \"available\", \"dynamodbstreams\": \"available\", \"ec2\": \"available\", \"es\": \"available\", \"events\": \"available\", \"firehose\": \"available\", \"iam\": \"available\", \"kinesis\": \"available\", \"kms\": \"available\", \"lambda\": \"available\", \"logs\": \"available\", \"opensearch\": \"available\", \"redshift\": \"available\", \"resource-groups\": \"available\", \"resourcegroupstaggingapi\": \"available\", \"route53\": \"available\", \"route53resolver\": \"available\", \"s3\": \"available\", \"s3control\": \"available\", \"secretsmanager\": \"available\", \"ses\": \"available\", \"sns\": \"available\", \"sqs\": \"available\", \"ssm\": \"available\", \"stepfunctions\": \"available\", \"sts\": \"available\", \"support\": \"available\", \"swf\": \"available\"}, \"version\": \"1.1.0.dev\"}\r\n```\r\n\r\n## Proper fix\r\nThe fallback to the s3 service has to be removed, and cors handling should be done by the custom routes the services (like apigateway or s3) register.\r\n\r\n## Fix for now\r\nAdd a hardcoded rule to the service router to stop interpreting internal routes as s3 service, and therefore having proper cors responses:\r\n```\r\ncurl https://localhost.localstack.cloud:4566/health -H \"Origin: https://app.localstack.cloud\" -v                                        <aws:AWS-daniel>\r\n*   Trying 127.0.0.1:4566...\r\n* Connected to localhost.localstack.cloud (127.0.0.1) port 4566 (#0)\r\n* ALPN: offers h2\r\n* ALPN: offers http/1.1\r\n*  CAfile: /etc/ssl/certs/ca-certificates.crt\r\n*  CApath: none\r\n* TLSv1.3 (OUT), TLS handshake, Client hello (1):\r\n* TLSv1.3 (IN), TLS handshake, Server hello (2):\r\n* TLSv1.3 (IN), TLS handshake, Encrypted Extensions (8):\r\n* TLSv1.3 (IN), TLS handshake, Certificate (11):\r\n* TLSv1.3 (IN), TLS handshake, CERT verify (15):\r\n* TLSv1.3 (IN), TLS handshake, Finished (20):\r\n* TLSv1.3 (OUT), TLS change cipher, Change cipher spec (1):\r\n* TLSv1.3 (OUT), TLS handshake, Finished (20):\r\n* SSL connection using TLSv1.3 / TLS_AES_256_GCM_SHA384\r\n* ALPN: server accepted h2\r\n* Server certificate:\r\n*  subject: CN=localhost.localstack.cloud\r\n*  start date: Jul  3 07:00:15 2022 GMT\r\n*  expire date: Oct  1 07:00:14 2022 GMT\r\n*  subjectAltName: host \"localhost.localstack.cloud\" matched cert's \"localhost.localstack.cloud\"\r\n*  issuer: C=US; O=Let's Encrypt; CN=R3\r\n*  SSL certificate verify ok.\r\n* Using HTTP2, server supports multiplexing\r\n* Copying HTTP/2 data in stream buffer to connection buffer after upgrade: len=0\r\n* h2h3 [:method: GET]\r\n* h2h3 [:path: /health]\r\n* h2h3 [:scheme: https]\r\n* h2h3 [:authority: localhost.localstack.cloud:4566]\r\n* h2h3 [user-agent: curl/7.84.0]\r\n* h2h3 [accept: */*]\r\n* h2h3 [origin: https://app.localstack.cloud]\r\n* Using Stream ID: 1 (easy handle 0x55775a9b6d30)\r\n> GET /health HTTP/2\r\n> Host: localhost.localstack.cloud:4566\r\n> user-agent: curl/7.84.0\r\n> accept: */*\r\n> origin: https://app.localstack.cloud\r\n>\r\n* TLSv1.3 (IN), TLS handshake, Newsession Ticket (4):\r\n* TLSv1.3 (IN), TLS handshake, Newsession Ticket (4):\r\n* old SSL session ID is stale, removing\r\n< HTTP/2 200\r\n< content-type: application/json\r\n< content-length: 849\r\n< access-control-allow-origin: https://app.localstack.cloud\r\n< access-control-allow-methods: HEAD,GET,PUT,POST,DELETE,OPTIONS,PATCH\r\n< access-control-allow-headers: authorization,cache-control,content-length,content-md5,content-type,etag,location,x-amz-acl,x-amz-content-sha256,x-amz-date,x-amz-request-id,x-amz-security-token,x-amz-tagging,x-amz-target,x-amz-user-agent,x-amz-version-id,x-amzn-requestid,x-localstack-target,amz-sdk-invocation-id,amz-sdk-request\r\n< access-control-expose-headers: etag,x-amz-version-id\r\n< date: Wed, 31 Aug 2022 14:09:48 GMT\r\n< server: hypercorn-h2\r\n<\r\n* Connection #0 to host localhost.localstack.cloud left intact\r\n{\"services\": {\"acm\": \"available\", \"apigateway\": \"available\", \"cloudformation\": \"available\", \"cloudwatch\": \"available\", \"config\": \"available\", \"dynamodb\": \"available\", \"dynamodbstreams\": \"available\", \"ec2\": \"available\", \"es\": \"available\", \"events\": \"available\", \"firehose\": \"available\", \"iam\": \"available\", \"kinesis\": \"available\", \"kms\": \"available\", \"lambda\": \"available\", \"logs\": \"available\", \"opensearch\": \"available\", \"redshift\": \"available\", \"resource-groups\": \"available\", \"resourcegroupstaggingapi\": \"available\", \"route53\": \"available\", \"route53resolver\": \"available\", \"s3\": \"available\", \"s3control\": \"available\", \"secretsmanager\": \"available\", \"ses\": \"available\", \"sns\": \"available\", \"sqs\": \"available\", \"ssm\": \"available\", \"stepfunctions\": \"available\", \"sts\": \"available\", \"support\": \"available\", \"swf\": \"available\"}, \"version\": \"1.1.0.dev\"}\r\n```\r\n\r\nThanks @alexrashed for discussing where to best place the fix, and @lukqw for mentioning it does not work.",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 45,
        "deletions": 7,
        "changed_files": 4,
        "created_at": "2022-08-31T08:28:09Z",
        "closed_at": "2022-08-31T13:42:17Z",
        "merged_at": "2022-08-31T13:42:17Z",
        "body": "In comparison to the typical JSON datetime format for AWS services (`unixtimestamp`, i.e. the float representation of the current unix timestamp seconds), for CBOR the `unixtimestampmillis` (basically the int representation of `unixtimestamp * 1000`) format is used.\r\n\r\nThis PR contains the following changes:\r\n- bdd1af3a0b691fc36695b3b40da2bc54f3fc414d: Fixes the CBOR datetime encoding.\r\n- 4b16c7cbe8009f0f92a654baa3431b4cf7847ce8: Fixes an issue with the forwarding of invalid requests. It disables the validation in the botoclient when creating the request which will be forwarded (because the backend should take care of the request parameter validation).\r\n- 3c0d807443bb07e9bfb8190fdb6258154aa1cb1f: Changes the loglevel of the serializer `DEBUG` logs to `TRACE` (since these are a bit verbose, but useful).\r\n\r\nThis PR fixes #6787.\r\n\r\nThe following AWS Java SDK snippet has been used to reproduce the issue (based on the issue report of @nicoloboschi):\r\n```\r\nimport software.amazon.awssdk.core.SdkBytes;\r\nimport software.amazon.awssdk.services.kinesis.KinesisAsyncClient;\r\nimport software.amazon.awssdk.services.kinesis.model.*;\r\n\r\nimport java.net.URI;\r\nimport java.net.URISyntaxException;\r\nimport java.nio.charset.Charset;\r\nimport java.util.Random;\r\nimport java.util.concurrent.ExecutionException;\r\nimport java.util.concurrent.TimeUnit;\r\n\r\nclass KinesisCBOR {\r\n    public static void main(String[] args) throws ExecutionException, InterruptedException, URISyntaxException {\r\n        try (final KinesisAsyncClient client = KinesisAsyncClient.builder()\r\n                .endpointOverride(new URI(\"http://localhost.localstack.cloud:4566\")).build()) {\r\n            Random rand = new Random();\r\n            String streamName = \"Test-Stream-\" + rand.nextInt(10000);\r\n            client.createStream(CreateStreamRequest.builder().streamName(streamName).shardCount(1).build()).get();\r\n            TimeUnit.SECONDS.sleep(2);\r\n            client.putRecord(PutRecordRequest.builder()\r\n                    .streamName(streamName)\r\n                    .data(SdkBytes.fromString(\"DATA\", Charset.defaultCharset()))\r\n                    .partitionKey(\"partitionkey\")\r\n                    .build()).get();\r\n            final String shardId = client.listShards(ListShardsRequest.builder().streamName(streamName).build())\r\n                    .get().shards().get(0).shardId();\r\n\r\n            final String iterator = client.getShardIterator(GetShardIteratorRequest.builder()\r\n                            .streamName(streamName)\r\n                            .shardId(shardId)\r\n                            .shardIteratorType(ShardIteratorType.TRIM_HORIZON)\r\n                            .build()).get().shardIterator();\r\n            final GetRecordsResponse response = client.getRecords(GetRecordsRequest.builder().shardIterator(iterator)\r\n                                    .build()).get();\r\n            System.out.println(response);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nThe fix has been validated with the Java snippet as well as with the extended integration test.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 13110,
        "deletions": 8444,
        "changed_files": 43,
        "created_at": "2022-08-31T07:58:16Z",
        "closed_at": "2022-09-13T11:09:13Z",
        "merged_at": "2022-09-13T11:09:13Z",
        "body": "Contents of this PR\r\n\r\n* Restructuring of tests in `tests.integration.awslambda` (older tests have been moved to `test_lambda_legacy.py` and to some degree `test_lambda_whitebox.py`. All others should now be using the newest fixtures, be aws_validated, etc.\r\n* aws_valdidating and snapshotting tests in `tests.integration.awslambda` where appropriate.\r\n* Refactoring of tests in `tests.integration.awslambda\r\n* Additional verified API tests for function, version, alias CRUD\r\n* Some minor fixes for issues we've encountered when working with snapshots.\r\n* Disabled the circle CI test step for the new provider for now (always passes atm). The strategy here is to enable it in the new PR that will include the implementation of this current roadmap project (CRUD-ish operations).\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 48,
        "deletions": 16,
        "changed_files": 4,
        "created_at": "2022-08-30T14:57:35Z",
        "closed_at": "2022-09-01T13:14:51Z",
        "merged_at": "2022-09-01T13:14:51Z",
        "body": "Fix idempotence of DynamoDB/StepFunctions installer logic to ensure running as non-root. First step towards addressing #5396\r\n\r\nCurrently, there are a few issues (i.e., false positives) with the way how we're determining whether to replace the content of certain JAR manifest files. This results in issues when attempting to run the Docker container as a non-root user, as we're trying to overwrite the files owned by `root`.\r\n\r\n(This will also require a small change in the upstream repo in -ext.)\r\n\r\nTested the changes manually/locally so far - also added a test skeleton / `TODO` for a CLI test that we can add in a follow-up PR, once the `latest` Docker image has been built and published with the latest changes. \ud83d\udc4d \r\n\r\n---\r\nUpdate: After consulting with @alexrashed , we can add a test already now that `xfail`s for now. The test would essentially start up LS like this (will update the PR shortly..): \r\n```\r\nDOCKER_FLAGS='--user=localstack' localstack start\r\n```",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 1060,
        "deletions": 332,
        "changed_files": 22,
        "created_at": "2022-08-30T13:30:59Z",
        "closed_at": "2022-09-14T15:38:05Z",
        "merged_at": "2022-09-14T15:38:05Z",
        "body": "This pr introduces a new class hierarchy for the install routine: Packages and Installers\r\n- A Package represents the entirety of all (available) versions of a certain dependency. For example, postgres version 11, 12, and 13 all are part of the Postgres package. Packages make installers available for specific versions of  their dependency.\r\n- Installers encapsulate the installing routine for a certain dependency. Installers for the same package but different versions are different objects. They can be of different classes, or the same class. \r\n\r\nThis is the foundation on which certain features of the LocalStack Package Manager (lpm) will be made available, e.g. different versions of the same dependency, or being able to choose where to install a certain package.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 94,
        "deletions": 30,
        "changed_files": 25,
        "created_at": "2022-08-30T07:53:09Z",
        "closed_at": "2022-10-12T19:44:54Z",
        "merged_at": "2022-10-12T19:44:54Z",
        "body": "Changes\r\n\r\n* Thread utils now have optional name parameters that when set determine the resulting thread name to facilitate the identification of threads when debugging (e.g. when trying to find leaks)\r\n* Semantic names have been added where appropriate. Might still need some adjustment in the future though and not all might be covered atm.",
        "comments": 5
    },
    {
        "merged": true,
        "additions": 233,
        "deletions": 44,
        "changed_files": 8,
        "created_at": "2022-08-30T07:40:52Z",
        "closed_at": "2022-08-30T14:05:56Z",
        "merged_at": "2022-08-30T14:05:56Z",
        "body": "Add parity tests and add a number of smaller fixes in the logic for CloudFormation stack resource updates. Addresses #6155\r\n\r\nThe main issue with the sample shared by the user is that SAM deployment was hanging, as the stack/resource status was incorrectly reported as `CREATE_COMPLETE` instead of `UPDATE_COMPLETE`. This led to the discovery of a few more issues, which are now fixed, and covered by parity tests.\r\n\r\nSummary of changes:\r\n* properly set the status of stack resources as `CREATE_COMPLETE` or `UPDATE_COMPLETE`, depending on the operation and prior existence of resources within the stack\r\n* add a parity/snapshot test for the point above (which is essentially what caused SAM/`samlocal` to hang when deploying the sample in #6155)\r\n* ensure that `Parameter` instances are not being returned from the list of stack resources in `DescribeStackResources`\r\n* remove a few attributes in API response messages to avoid ASF response serializer warnings\r\n* minor simplifications, e.g., removing `stack_name` from `apply_changes(..)` method\r\n* add missing resource methods to CDK::Metadata model, returning synthetic data (surfaced as being required when testing the changes)\r\n* fix an assertion in `test_cfn_with_multiple_route_tables` and parity test it against AWS - previously we were creating/asserting 3 route tables instead of 4 (validated against AWS)\r\n\r\nNote: part of the changes in the PR is to avoid us changing the resource action (from `\"Modify\"` to `\"Add\"`), and instead introducing a `\"_deployed\"` attribute that allows us to determine whether the resource needs to be created or updated - see `TODO` in the code. This is only a workaround for now, and should be fixed as part of a larger refactoring after introducing model classes for the state of the resources in a stack (e.g., using a cached property). To be discussed in more detail @dominikschubert ... \ud83d\udc4d",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 73,
        "deletions": 17,
        "changed_files": 7,
        "created_at": "2022-08-29T22:56:16Z",
        "closed_at": "2022-09-11T16:55:14Z",
        "merged_at": "2022-09-11T16:55:14Z",
        "body": "This PR fixes an import error that occurred with a change in hypercorn https://github.com/pgjones/hypercorn/commit/c2608a0ab1133a11a2a8eeb659388c8dd13bc9b1.\r\n\r\nI renamed the affected imports and also added an explicit dependency to the latest hypercorn version.\r\n\r\nSide note: Hypercorn now supports serving WSGI apps. Looks like the ASGI/WSGI bridge isn't as mature as ours yet, but looks promising! Maybe we can get rid of some code soon.\r\n\r\n**Update**: Looks like hypercorn is now also lowercasing the raw headers. there seems to be no way to restore the original header casings, which, however, some cases rely on, such as #4532.\r\n\r\n**Update**: specifically, it seems h11 is no longer returning a `h11.Headers` object #6413, and it's now just a tuple of lower-case header name and value. https://github.com/localstack/localstack/blob/7c02200e449380b6d5198eb09f0da14968bb49b6/localstack/http/asgi.py#L78-L82\r\n\r\nthere seems to be no way to restore the original header casing, which means that, if AWS lambda expects headers to be cased a certain way, we'll have to first title-case and then run canonicalize_headers.\r\n\r\n**Update**: now with hypercorn 0.14.2, the headers are correctly preserved",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 489,
        "deletions": 162,
        "changed_files": 3,
        "created_at": "2022-08-29T17:04:35Z",
        "closed_at": "2023-01-12T19:13:11Z",
        "merged_at": "2023-01-12T19:13:11Z",
        "body": "Adds multiple lambda responses to check how AWS converts these when calling via URL",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 17,
        "deletions": 7,
        "changed_files": 2,
        "created_at": "2022-08-29T15:49:44Z",
        "closed_at": "2022-08-30T17:01:43Z",
        "merged_at": "2022-08-30T17:01:43Z",
        "body": null,
        "comments": 4
    },
    {
        "merged": true,
        "additions": 52,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2022-08-29T05:33:42Z",
        "closed_at": "2022-08-29T08:56:17Z",
        "merged_at": "2022-08-29T08:56:17Z",
        "body": "# \ud83d\ude80 ASF Update Report \ud83d\ude80\nThis PR has been automatically generated to update the generated API stubs for our ASF services.\nIt uses the latest code-generator from the _master_ branch ([scaffold.py](https://github.com/localstack/localstack/blob/master/localstack/aws/scaffold.py)) and the latest _published_ version of [botocore](https://github.com/boto/botocore) to re-generate all API stubs which are already present in the `localstack.aws.api` module of the _master_ branch.\n\n## \ud83d\udd04 Updated Services\nThis PR updates the following services:\n- config\n- ec2\n\n## \ud83d\udc77\ud83c\udffd Handle this PR\nThe following options describe how to interact with this PR / the auto-update:\n\n\u2714\ufe0f **Accept Changes**\nIf the changes are satisfying, just squash-merge the PR and delete the source branch.\n\n\ud83d\udeab **Ignore Changes**\nIf you want to ignore the changes in this PR, just close the PR and *do not delete* the source branch. The PR will not be opened and a new PR will not be created for as long as the generated code does not change (or the branch is deleted). As soon as there are new changes, a new PR will be created.\n\n\u270f\ufe0f **Adapt Changes**\n*Don't do this.* The APIs are auto-generated. If you decide that the APIs should look different, you have to change the code-generation.\n\n\u23f8\ufe0f **Pause Updates**\nRemove the cron-schedule trigger of the GitHub Action workflow which creates these PRs. The action can then still be triggered manually, but it will not be executed automatically.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2022-08-29T00:20:54Z",
        "closed_at": "2022-08-29T06:37:34Z",
        "merged_at": "2022-08-29T06:37:34Z",
        "body": "[![Mend Renovate](https://app.renovatebot.com/images/banner.svg)](https://renovatebot.com)\n\nThis PR contains the following updates:\n\n| Package | Type | Update | Change |\n|---|---|---|---|\n| python | final | digest | `4bb7026` -> `f17c949` |\n| python | stage | digest | `4bb7026` -> `f17c949` |\n\n---\n\n### Configuration\n\n\ud83d\udcc5 **Schedule**: Branch creation - \"before 3am on Monday\" (UTC), Automerge - At any time (no schedule defined).\n\n\ud83d\udea6 **Automerge**: Disabled by config. Please merge this manually once you are satisfied.\n\n\u267b **Rebasing**: Whenever PR becomes conflicted, or you tick the rebase/retry checkbox.\n\n\ud83d\udd15 **Ignore**: Close this PR and you won't be reminded about these updates again.\n\n---\n\n - [ ] <!-- rebase-check -->If you want to rebase/retry this PR, click this checkbox.\n\n---\n\nThis PR has been generated by [Mend Renovate](https://www.mend.io/free-developer-tools/renovate/). View repository job log [here](https://app.renovatebot.com/dashboard#github/localstack/localstack).\n<!--renovate-debug:eyJjcmVhdGVkSW5WZXIiOiIzMi4xNzYuMCIsInVwZGF0ZWRJblZlciI6IjMyLjE3Ni4wIn0=-->\n",
        "comments": 3
    },
    {
        "merged": false,
        "additions": 595,
        "deletions": 458,
        "changed_files": 16,
        "created_at": "2022-08-28T20:14:48Z",
        "closed_at": "2023-03-27T21:18:25Z",
        "merged_at": null,
        "body": "First stab refactoring to the new framework, transforming service responses to the new WerkzeugResponse\r\n\r\nWork done:\r\n\r\n* ApiInvocationContext now receives a `Request` and `url_params` as immutable values.\r\n* `escapeJavaScript`, fixes an issue found when an existing string is dump'ed `json.dumps(str)`, creating a invalid string not escaped `\"\"footer\"\"`\r\n* `test_apigw_test_invoke_method_api` is AWS validated, tests the `TestInvoke` API.\r\n* Fixes lambda event payload variables, `headers` and `query string` typing.\r\n* Removes code that's is not necessary anymore.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 266,
        "deletions": 269,
        "changed_files": 4,
        "created_at": "2022-08-28T11:05:29Z",
        "closed_at": "2022-08-29T06:25:55Z",
        "merged_at": "2022-08-29T06:25:55Z",
        "body": "This PR adds a fixture for the REST API gateway that cleans up after creation. This will enable more tests that do AWS parity checks without leaving traces.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 107,
        "deletions": 55,
        "changed_files": 5,
        "created_at": "2022-08-27T17:25:17Z",
        "closed_at": "2022-10-09T10:18:30Z",
        "merged_at": "2022-10-09T10:18:30Z",
        "body": "OpenAPI supports the \"parameters\" field that is applied to all methods of the path, however, we don't offer particular support for it.\r\n\r\nThis PR skips the \"parameters\" and others like, e.g \"servers\", \"description\", \"summary\", \"$ref\", from the OpenAPI spec to avoid errors. \r\n\r\nFix downstream to enable the construction of the Method model with request parameters.\r\nhttps://github.com/spulec/moto/pull/5425\r\n\r\nUnblocks https://github.com/localstack/localstack/issues/6747",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 9,
        "deletions": 7,
        "changed_files": 2,
        "created_at": "2022-08-27T11:48:11Z",
        "closed_at": "2022-08-27T13:46:30Z",
        "merged_at": "2022-08-27T13:46:30Z",
        "body": "This PR fixes an issue that was introduced by the SQS patches from ext related to merging of SQS queues.\r\n\r\nThe issue was that `self.visible` was overwritten by the patch, while the attribute getter of `ApproximateNumberOfMessages` was set to `self.visible._qsize` (the function reference) _before_ `self.visible` was overwritten, causing `ApproximateNumberOfMessages` to always be 0 since it was referencing the old queue. The fix was to make a lambda out of it so we always resolve the current `self.visible`, allowing a later overwrite.\r\n\r\nThe PR also adds a `timeout` argument to the `poll_condition` calls in the SQS tests to avoid the build pipeline to block until the timeout.",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 190,
        "deletions": 1,
        "changed_files": 4,
        "created_at": "2022-08-27T04:27:10Z",
        "closed_at": "2022-08-30T18:48:42Z",
        "merged_at": "2022-08-30T18:48:42Z",
        "body": "Modified localstack.services.sqs.provider to ensure maximum message size of 256 KiB is met.  This fixed for single messages and for the total message body size of batch messages.\r\n",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 334,
        "deletions": 53,
        "changed_files": 5,
        "created_at": "2022-08-26T15:37:46Z",
        "closed_at": "2022-08-29T15:49:04Z",
        "merged_at": "2022-08-29T15:49:04Z",
        "body": "Test is already validated but there's still an issue with lambda URL invokes returning dict/JSON objects.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 57,
        "deletions": 3,
        "changed_files": 3,
        "created_at": "2022-08-26T09:50:04Z",
        "closed_at": "2022-08-27T13:47:34Z",
        "merged_at": "2022-08-27T13:47:34Z",
        "body": "Adds a synchronised dictionary and serialises access per service instead of a \"global\" lock.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 66,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2022-08-25T19:23:12Z",
        "closed_at": "2022-09-05T05:41:53Z",
        "merged_at": "2022-09-05T05:41:53Z",
        "body": "## Fixed:\r\n- fixed response attributes in create and describe transit gateways\r\n- transit gateway deletion status updated\r\n  - deleting transit gateway doesn't delete transit gateway right away\r\n  - TODO: need to create a clone to cleanup resources after 'n' hours ::::: @thrau \r\n\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 199,
        "deletions": 75,
        "changed_files": 9,
        "created_at": "2022-08-25T18:09:40Z",
        "closed_at": "2022-09-06T19:34:55Z",
        "merged_at": "2022-09-06T19:34:55Z",
        "body": "This PR #6726. The changes have these objectives:\r\n\r\n- [X] Make the Cloudwatch::Alarm model return the correct attrbutes and reference.\r\n- [X] Validate that the Dynamo::Table returns the correct attributes and reference.\r\n- [X] avoid having the IAM service crashing with AWS::NoValue in the resources of a statement.\r\n\r\nNote the cleaning of the policy document could also be in the deploy_template of the Iam::ManagedPolicy, please comment on that.\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 8,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2022-08-25T15:42:53Z",
        "closed_at": "2022-08-26T07:00:50Z",
        "merged_at": "2022-08-26T07:00:50Z",
        "body": "Minor fix for a bug that occurs when there are multiple `@pytest.mark.skip_snapshot_verify(condition=...)` markers.\r\n\r\nIf there's one where `condition` evaluates to True and it doesn't include a `paths` key, the affected snapshots should be skipped entirely, no matter in what order the marks are evaluated. Previously the paths were still added to the list and thus, not everything was skipped.\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 48,
        "deletions": 32,
        "changed_files": 4,
        "created_at": "2022-08-25T13:13:18Z",
        "closed_at": "2022-08-29T11:32:55Z",
        "merged_at": "2022-08-29T11:32:55Z",
        "body": "This PR is the first step of the bigger installer refactoring. It changes the following\r\n\r\n- Get rid of make init on the host: This is a major pain point and blocker because it pulls and runs a container image via docker, and therefore needs to be removed for any work to be continued. \r\n\r\nThe make init command on the host is essentially a convenient but inefficient way to get to the necessary JAR files of a specific version we need for the stepfuntions implementation. They are necessary because we need a pinned version, which AWS does not provide.\r\nThis PR should not impact any actual customer facing localstack functionality. It only changes how the necessary JAR files are fetched: we now download the necessary stepfunctions jars from the specific **_layer_** from the wanted image without docker, but directly via http. This makes the make init call for stepfunctions obsolete.\r\nThe layer is addressed via its digest. This digest does not change as far as we can tell, and is therefore suitable.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 108,
        "deletions": 74,
        "changed_files": 6,
        "created_at": "2022-08-25T09:05:43Z",
        "closed_at": "2022-08-25T16:34:33Z",
        "merged_at": "2022-08-25T16:34:33Z",
        "body": "Addresses #6644\r\n\r\n* fix IAM policy validation - we were adding a `[\"*\"]` default value for `Resource` in the past (apparently to fix Serverless CFn deployments), which should be no longer required\r\n* fix role `MaxSessionDuration` (set to 3600 by default in moto), which is not how AWS is behaving (i.g., AWS is not returning `MaxSessionDuration` for a role if it hasn't been specified)\r\n* add snapshot test for `update_assume_role_policy`\r\n* remove obsolete patch for `get_user` to include tags, which is fixed upstream in the meantime\r\n* small fix for `test_cfn_statemachine_with_dependencies` with issues detected as part of parity-testing these changes",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 109,
        "deletions": 5,
        "changed_files": 5,
        "created_at": "2022-08-24T19:52:39Z",
        "closed_at": "2022-09-05T16:28:32Z",
        "merged_at": "2022-09-05T16:28:31Z",
        "body": "This PR adds addresses #6696. With these changes  outputs of a Stream model are correct.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 73,
        "deletions": 29,
        "changed_files": 2,
        "created_at": "2022-08-24T15:12:39Z",
        "closed_at": "2022-08-25T14:28:17Z",
        "merged_at": "2022-08-25T14:28:17Z",
        "body": "This PR updates the `CODEOWNERS` file:\r\n- Orders the service owners alphabetically.\r\n- Adds missing service sections which have an owner (ACM / @alexrashed, Api Gateway / @calvernaz, Logs / @steffyP, Route53 / @giograno).\r\n- Changed codeowner of IAM from @dominikschubert to @dfangl.\r\n- Changed codeowner of CloudWatch from @silv-io to @steffyP.\r\n- Adds the cloudformation models to some of the sections.\r\n- Adds the generated API code (`localstack.aws.api.<service>`) to each section (i.e. codeowners will be added to ASF Update PRs automatically if anything changes for their service).\r\n\r\nI changed this proactively once I realized that some parts are outdated. Please let me know if any of the sections should be set differently (as a comment or in a DM).\r\n\r\nIn addition, I added myself as a default reviewer for PRs created by the ASF Update Action.",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 17,
        "deletions": 7,
        "changed_files": 2,
        "created_at": "2022-08-24T15:00:05Z",
        "closed_at": "2022-08-29T15:30:42Z",
        "merged_at": null,
        "body": null,
        "comments": 0
    },
    {
        "merged": true,
        "additions": 47,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2022-08-24T14:25:30Z",
        "closed_at": "2022-08-25T11:59:13Z",
        "merged_at": "2022-08-25T11:59:13Z",
        "body": "Fix returning CIDR IP range for Redshift cluster security groups. Addresses #6718",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 169,
        "deletions": 29,
        "changed_files": 4,
        "created_at": "2022-08-24T13:18:10Z",
        "closed_at": "2022-08-31T14:40:13Z",
        "merged_at": "2022-08-31T14:40:13Z",
        "body": "This PR introduces initial support for DynamoDB global tables version 2019.\r\n\r\nWe simulate replicas as follows:\r\n- We store information about the replicas in a cross-region attribute; this step is done when the user updates a table. The region for this call is going to the \"original region\" where the table effectively lives. De-facto, we have created a global table with this step.\r\n- We can now call operations (only `PutItem` and `GetItem` at the moment) on the created global table from other regions. Before forwarding the call to DDB local, we inspect our cross-region attribute to see if this is a global table and if in the current regions there is a valid replica. If so, we change the context of the call and the credentials in the header to perform a call against the original region (where the table effectively lives) and not to the replica (DDB local won't find it).\r\n\r\nSuch an approach is still rudimental and probably it does not cover a lot of corner cases, but we are able to replicate the example in the [docs](https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/V2globaltables.tutorial.html#V2creategt_cli) in an integration test.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 536,
        "deletions": 536,
        "changed_files": 19,
        "created_at": "2022-08-23T21:32:38Z",
        "closed_at": "2022-09-01T14:35:16Z",
        "merged_at": "2022-09-01T14:35:16Z",
        "body": "## Goal\r\nWhen moving to the new lambda provider, we want to avoid all imports which rely on the logic of the old provider, to make seamless switching possible\r\n\r\n## Main changes\r\n* Introduced a new environment variable, `MAIN_DOCKER_NETWORK` in order to replace the usage of `LAMBDA_DOCKER_NETWORK` for other services as well (as it is a misnomer, and to avoid tight coupling of lambda with other services). For now, until a major/minor version release, this variable falls back to `LAMBDA_DOCKER_NETWORK` to simulate current behavior. /cc @thrau\r\n\r\n## Splitting other services from lambda modules\r\n* **SNS**: Move `process_sns_notification_to_lambda` to sns module (it belongs there thematically, since SNS is responsible for the payload) and invoke using boto client /cc @bentsku \r\n* **DynamoDB**: Use botocall to list event source mappings instead of accessing the data directly /cc @giograno \r\n* **ApiGateway**: Move invocation logic (payload etc.) to apigateway module, use boto client to invoke. Also some changes regarding base64 encoded data (which should be present in the json as string, otherwise `json.dumps` will not work), and removal of processing of everything not a boto response (flaskresponses, lambda invocation results etc). Also moved a test (for the apigw event payload) from lambda unit tests to apigatway unit tests (also belongs there thematically) /cc @calvernaz \r\n* **snapshots**: Move account_id fixture to fixtures.py, since it is universally applicable /cc @dominikschubert \r\n* **docker_utils**: Move get_host_path_for_path_in_docker into docker utils, since other services need this as well. Also change some comments insinuating strictly lambda usage /cc @thrau\r\n* **stepfunctions**: Remove direct module access to lambda api internals for asserting stepfunctions invoking lambdas. The existing assertions already assert the results, so the lambda invocation in the middle is asserted with it as well. /cc @dominikschubert ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 64,
        "deletions": 37,
        "changed_files": 6,
        "created_at": "2022-08-23T18:02:25Z",
        "closed_at": "2022-08-25T19:58:24Z",
        "merged_at": "2022-08-25T19:58:24Z",
        "body": "This PR\r\n* adds service-specific response handlers that allow services to modify responses *before* it is parsed. this is useful for cases when you want a catch-all modification of responses as they are returned by a backend\r\n* refactors the DynamoDBApiListener to make use of the new construct\r\n* removes the obsolete \"update table definitions\" code (already handled in `create_table`, and it's the only operation that the if condition matches, i double checked against the specs)\r\n\r\next should work, but needs to be refactored once this is merged to also remove the custom AwsApiListener\r\n\r\n- part of #6668 ",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-08-23T16:26:01Z",
        "closed_at": "2022-08-24T13:19:48Z",
        "merged_at": "2022-08-24T13:19:48Z",
        "body": "This PR updates the SFN patch URL to the newest commit of the local patch; see [#12](https://github.com/localstack/localstack-artifacts/pull/12).",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 3,
        "changed_files": 1,
        "created_at": "2022-08-23T15:22:41Z",
        "closed_at": "2022-08-23T19:20:08Z",
        "merged_at": "2022-08-23T19:20:08Z",
        "body": "This PR improves the performance of dynamodb put_item, update_item, and delete_item operations. By removing the service request parameter to forward_request, the proxy avoids creating a new request context, which is a relatively expensive operation (it has to create a completely new HTTP request from the service request). It does not look like the request dictionaries are modified in any way before passing them to the dynamodb backend. So this looks safe.\r\n\r\nrelated to #1205 ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 389,
        "deletions": 109,
        "changed_files": 4,
        "created_at": "2022-08-23T14:38:08Z",
        "closed_at": "2022-08-28T19:55:47Z",
        "merged_at": "2022-08-28T19:55:47Z",
        "body": "### Summary\r\n\r\nFixes an issue where a SubscribeToShard is cut too early - now set to 5min. \r\nAdditionally added aws validated test marks and a basic kinesis stream tags test.\r\n\r\n### Test\r\ntest_subscribe_to_shard_timeout\r\n\r\n### Related\r\nFixes: #5830 \r\n\r\n",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 61,
        "deletions": 86,
        "changed_files": 7,
        "created_at": "2022-08-23T14:32:34Z",
        "closed_at": "2022-08-23T22:03:18Z",
        "merged_at": "2022-08-23T22:03:18Z",
        "body": "Example usage: `@pytest.mark.skip_snapshot_verify(condition=lambda: 1 == 1)`\r\n\r\nThe condition always needs to be a callable that will be evaluated to determine if the verification should be skipped or not.\r\n\r\nThis PR also makes sure that verification of snapshots is never skipped when running with `TEST_TARGET=AWS_CLOUD`. ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 6,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2022-08-23T12:51:32Z",
        "closed_at": "2022-08-23T15:01:18Z",
        "merged_at": "2022-08-23T15:01:18Z",
        "body": "This PR changes the way that dynamodblocal `inMemory=true` is set.\r\n\r\n1. An env variable `DYNAMODB_IN_MEMORY` will always force `inMemory=true`\r\n2. If `PERSISTENCE` is not set, then we by default start `inMemory=true`, unless the DB path is set explicitly.\r\n\r\n@giograno i don't fully understand the impact on pods, you had this PR here #6109, but it would be great if you could tell me whether 2.) is OK for pods, or whether we always need to store things on disk in case someone wants to use pods.\r\n\r\n- Fixes #6506",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 309,
        "deletions": 310,
        "changed_files": 5,
        "created_at": "2022-08-23T11:07:31Z",
        "closed_at": "2022-08-23T20:02:34Z",
        "merged_at": "2022-08-23T20:02:34Z",
        "body": "## Problem\r\nCurrently, even if we delete the firehose delivery stream, we will not stop the kinesis listener (if kinesis is the source). This leads to a significant resource leak, while at the same time spamming our logs with `dynamodb.Scan` entries (see in [this circleci log](https://app.circleci.com/pipelines/github/localstack/localstack/8606/workflows/b1146cff-6a7d-48bc-b56b-da51547008ea/jobs/53885/parallel-runs/1?filterBy=ALL) for example):\r\n```\r\n2022-08-23T09:42:39.485  INFO --- [  asgi_gw_12] localstack.request.aws     : AWS dynamodb.Scan => 200\r\n2022-08-23T09:42:39.528  INFO --- [   asgi_gw_3] localstack.request.aws     : AWS dynamodb.Scan => 200\r\n2022-08-23T09:42:39.530  INFO --- [   asgi_gw_0] localstack.request.aws     : AWS dynamodb.Scan => 200\r\n2022-08-23T09:42:39.532  INFO --- [  asgi_gw_13] localstack.request.aws     : AWS dynamodb.Scan => 200\r\n```\r\nThis can lead to up to 28000 of these unnecessary log lines (and requests) over our integration suite.\r\n\r\n## Solution\r\n\r\nWe should stop the kinesis listener once the delivery stream is cleaned up (in our tests, but also for users).\r\nThis PR does this, while also refactoring some tests to use try / finally to make sure they delete the delivery stream or save the process and stop it later if using the kinesis connector directly.\r\nI also deleted 1 test which would never be executed (unless a specific env variable would be set) which would use a kinesis listener directly.",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 13,
        "deletions": 4,
        "changed_files": 2,
        "created_at": "2022-08-23T10:22:33Z",
        "closed_at": "2022-08-24T05:39:09Z",
        "merged_at": "2022-08-24T05:39:09Z",
        "body": "### Summary\r\n\r\nFixes an issue where raw emails were unfilterable from the retro endpoint. This was because the email source address was not being saved.\r\n\r\n### Tests\r\n\r\nPR updates integration tests\r\n\r\n### Related\r\n\r\nCloses: https://github.com/localstack/localstack/issues/6725",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 5,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-08-23T09:22:53Z",
        "closed_at": "2022-08-25T09:07:05Z",
        "merged_at": null,
        "body": "Fix for `stream_event_source_listener`: up until now, threads were not stopped, they were just removed from a dict which only caused losing the reference.\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 388,
        "deletions": 346,
        "changed_files": 39,
        "created_at": "2022-08-22T14:55:16Z",
        "closed_at": "2023-03-23T16:19:22Z",
        "merged_at": "2023-03-23T16:19:22Z",
        "body": "## Summary\r\nThis PR should remain minimal in terms of code changes, and is mostly used for keeping track of the PRs regarding the new lambda provider going directly into master and for tracking test failure rates against the new provider.\r\n\r\n## PRs\r\nThe following PRs have been created to fully implement the new Lambda provider:\r\n* #5306\r\n* #6737 \r\n* #6865\r\n* #7019\r\n* #7032\r\n* #7034\r\n* #7039\r\n* #7087\r\n* #7110\r\n* #7165\r\n* #7180\r\n* #7204\r\n* #7225 \r\n* #7231\r\n* #7234\r\n* #7259 \r\n* #7266\r\n* #7317\r\n* #7321\r\n* #7336 \r\n* #7345\r\n* #7379\r\n* #7482 \r\n* #7675 (ARM support)\r\n\r\n## Tasks\r\n- [x] Initial core runtime implementation of the new provider\r\n- [x] Refactor package imports\r\n- [x] replace run_lambda calls by botocore invocations / common interface\r\n- [x] extend integration tests for full API coverage\r\n- [x] Version & Alias CRUD\r\n- [x] Full API CRUD\r\n- [x] Alias routing\r\n- [x] Lambda URL port\r\n- [x] Hot reloading\r\n- [x] Permissions",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 31,
        "deletions": 29,
        "changed_files": 1,
        "created_at": "2022-08-22T10:12:45Z",
        "closed_at": "2022-08-22T11:59:05Z",
        "merged_at": "2022-08-22T11:59:05Z",
        "body": "This PR fixes a small issue in the CORS handling where service-handled CORS response headers are modified by the global `CorsResponseEnricher` (even though for these requests the CORS handling should be entirely managed by the service).\r\n\r\nIt changes the `CorsResponseEnricher` such that it only removes empty CORS response headers in case the request's CORS handling is service-managed.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 271,
        "deletions": 0,
        "changed_files": 4,
        "created_at": "2022-08-22T05:25:59Z",
        "closed_at": "2022-08-22T22:43:04Z",
        "merged_at": "2022-08-22T22:43:04Z",
        "body": "# \ud83d\ude80 ASF Update Report \ud83d\ude80\nThis PR has been automatically generated to update the generated API stubs for our ASF services.\nIt uses the latest code-generator from the _master_ branch ([scaffold.py](https://github.com/localstack/localstack/blob/master/localstack/aws/scaffold.py)) and the latest _published_ version of [botocore](https://github.com/boto/botocore) to re-generate all API stubs which are already present in the `localstack.aws.api` module of the _master_ branch.\n\n## \ud83d\udd04 Updated Services\nThis PR updates the following services:\n- cloudwatch\n- dynamodb\n- ec2\n- lambda-\n\n## \ud83d\udc77\ud83c\udffd Handle this PR\nThe following options describe how to interact with this PR / the auto-update:\n\n\u2714\ufe0f **Accept Changes**\nIf the changes are satisfying, just squash-merge the PR and delete the source branch.\n\n\ud83d\udeab **Ignore Changes**\nIf you want to ignore the changes in this PR, just close the PR and *do not delete* the source branch. The PR will not be opened and a new PR will not be created for as long as the generated code does not change (or the branch is deleted). As soon as there are new changes, a new PR will be created.\n\n\u270f\ufe0f **Adapt Changes**\n*Don't do this.* The APIs are auto-generated. If you decide that the APIs should look different, you have to change the code-generation.\n\n\u23f8\ufe0f **Pause Updates**\nRemove the cron-schedule trigger of the GitHub Action workflow which creates these PRs. The action can then still be triggered manually, but it will not be executed automatically.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 8,
        "deletions": 393,
        "changed_files": 12,
        "created_at": "2022-08-21T17:42:39Z",
        "closed_at": "2022-08-26T07:53:40Z",
        "merged_at": "2022-08-26T07:53:40Z",
        "body": "This PR removes dead utility code. I went through the coverage report and identified code that was not covered. I then searched for usage in localstack and localstack-ext. I also removed some code that was just covered by tests but was never used elsewhere.",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 524,
        "deletions": 4,
        "changed_files": 11,
        "created_at": "2022-08-21T15:25:08Z",
        "closed_at": "2022-08-28T12:36:01Z",
        "merged_at": "2022-08-28T12:36:01Z",
        "body": "This PR adds pluggable initialization hooks to customize localstack with both shell and python scripts that are mounted into `/etc/localstack/init/<phase>.d`. It replaces the current `/docker-entrypoint-initaws.d`.\r\n\r\n## Background\r\n\r\nCurrently the only way to run custom code to initialize localstack is `docker-entrypoint-initaws.d`. There are a surprising number of [issues mentioning it](https://github.com/localstack/localstack/issues?q=is%3Aissue+docker-entrypoint-initaws.d). To me this was conceptually disconnected from our lifecycle phases that we have in hooks, and this seemed to be an opportunity to improve the UX and to generalize the extensibility of localstack's lifecycle phases.\r\n\r\n## Concept\r\n\r\nThere are four lifecycle phases that one can hook into: `BOOT`, `START`, `READY`, `SHUTDOWN`. Each lifecycle phase has it's own directory in `/etc/localstack/init`\r\n\r\n```\r\n/etc\r\n\u2514\u2500\u2500 localstack\r\n    \u2514\u2500\u2500 init\r\n        \u251c\u2500\u2500 boot.d           <-- executed in the container before localstack starts\r\n        \u251c\u2500\u2500 ready.d          <-- executed when localstack becomes ready (currently equivalent to `/docker-entrypoint-initaws.d`)\r\n        \u251c\u2500\u2500 shutdown.d       <-- executed when localstack shuts down\r\n        \u2514\u2500\u2500 start.d          <-- executed when localstack starts up\r\n```\r\n\r\nIn these directories, you can put either executable shell scripts or python programs, which will be executed from within the python process. all except boot.d will be run in the same python interpreter as localstack, which gives additional ways of configuring/extending localstack.\r\n\r\nCurrently known script extensions are `.sh`, and `.py`, but could be extended in the future with anything that can run in the container.\r\n\r\nA script can have four states: `UNKNOWN`, `RUNNING`, `OK`, `ERROR`. Scripts are by default in the `UNKNOWN` state once they have been discovered. The remaining states should be self-explanatory.\r\n\r\n## Status endpoint\r\n\r\nThere is an additional endpoint in `localhost:4566/_localstack/init` which returns the state of the initialization. Boot scripts are currently always in the unknown state, since they are executed outside the localstack process and we don't know whether they have been successfully executed or not. This could be extended in the future by logging the script execution.\r\n\r\n```bash\r\ncurl -s localhost:4566/_localstack/init | jq .\r\n```\r\n```json\r\n{\r\n  \"completed\": {\r\n    \"BOOT\": false,\r\n    \"START\": true,\r\n    \"READY\": true,\r\n    \"SHUTDOWN\": false\r\n  },\r\n  \"scripts\": [\r\n    {\r\n      \"stage\": \"BOOT\",\r\n      \"name\": \"booting.sh\",\r\n      \"state\": \"UNKNOWN\"\r\n    },\r\n    {\r\n      \"stage\": \"READY\",\r\n      \"name\": \"pre_seed.py\",\r\n      \"state\": \"SUCCESSFUL\"\r\n    }\r\n  ]\r\n}\r\n```\r\n\r\nYou can also query a specific stage:\r\n```bash\r\ncurl -s localhost:4566/_localstack/init/ready | jq .\r\n```\r\n```json\r\n{\r\n  \"completed\": true,\r\n  \"scripts\": [\r\n    {\r\n      \"stage\": \"READY\",\r\n      \"name\": \"pre_seed.py\",\r\n      \"state\": \"OK\"\r\n    }\r\n  ]\r\n}\r\n```\r\n\r\nTo check whether a given stage has been completed (which is a [requirement for some](https://github.com/localstack/localstack/issues/4769)), you can now run, for example:\r\n\r\n```bash\r\ncurl -s localhost:4566/_localstack/init/ready | jq .completed\r\n```\r\nwhich returns either `true` or `false`.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-08-21T13:46:39Z",
        "closed_at": "2022-08-22T22:41:00Z",
        "merged_at": "2022-08-22T22:41:00Z",
        "body": "Remvoes localstack.extensions.api, which is just a set of import statements, from the coverage metrics. Extensions will be tested as part of pro",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 707,
        "changed_files": 7,
        "created_at": "2022-08-21T13:41:11Z",
        "closed_at": "2022-08-27T20:20:25Z",
        "merged_at": "2022-08-27T20:20:25Z",
        "body": "This PR removes the dashboard code. We haven't been displaying this in the UI for a quite a while, so I thought it may be time to remove it to clean up the codebase a bit.\r\nSince this is not advertised as an external API, I wouldn't consider it a breaking change.\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 185,
        "deletions": 31,
        "changed_files": 4,
        "created_at": "2022-08-20T23:36:44Z",
        "closed_at": "2022-08-22T19:16:50Z",
        "merged_at": "2022-08-22T19:16:50Z",
        "body": "This PR corrects the way the `SequenceNumber` is generated and passed through to API call results. We now generate the sequence number once, and keep it in the message. I had to change the internal API to make `put` actually return the `SqsMessage` object which holds the sequence number, since we return the sequence number both in `SendMessage` and `ReceiveMessage`.\r\n\r\nThe sequence numbers are 20 digit numbers that are non-consecutive, but monotonically increasing. Other than that there seem to be no guarantees associated with the sequence numbers. So I simply used the unix timestamp (which is 10 digits, at least for the next 264 years), shifted it to be 20 digits, and then use that number as a basis.\r\n\r\nI also refactored an unrelated test to use snapshot testing.\r\n\r\n- Fixes #6674",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 43,
        "deletions": 4,
        "changed_files": 2,
        "created_at": "2022-08-20T20:03:48Z",
        "closed_at": "2022-08-25T06:41:06Z",
        "merged_at": "2022-08-25T06:41:06Z",
        "body": "### Fixed:\r\n**Terraform Tests**\r\n    - TestAccVPCSubnet_availabilityZoneID\r\n    - TestAccVPCSubnet_disappears\r\n    - TestAccVPCSubnet_enableDNS64\r\n    - TestAccVPCSubnet_enableIPv6\r\n    - TestAccVPCSubnet_ipv6\r\n    - TestAccVPCSubnet_mapPublicIPOnLaunch\r\n    - TestAccVPCSubnet_privateDNSNameOptionsOnLaunch\r\n    - TestAccVPCSubnet_tags ",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 111,
        "deletions": 20,
        "changed_files": 4,
        "created_at": "2022-08-20T17:00:21Z",
        "closed_at": "2022-08-22T21:09:53Z",
        "merged_at": "2022-08-22T21:09:53Z",
        "body": "This PR fixes the SQS purge_queue operation.\r\n\r\n* correctly delete inflight and delayed messages (as AWS does)\r\n* I also added a feature flag `SQS_DELAY_PURGE_RETRY` to enable the behavior to raise `PurgeInProgress` errors within a 60 second internval, which is how AWS managed purge queue.\r\n\r\n- Related to #6695",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-08-19T10:05:25Z",
        "closed_at": "2022-08-19T11:32:38Z",
        "merged_at": "2022-08-19T11:32:38Z",
        "body": "Fixes a small issue where the function URL was returned as `http://<...>:{EDGE_PORT}` but since PRO by default sets the EDGE_PORT to 443, this lead to the tests misbehaving.\r\n\r\nStill need to add HTTPS support for this at a later point but this should at least unblock the PRO tests in CI.",
        "comments": 5
    },
    {
        "merged": true,
        "additions": 52,
        "deletions": 1,
        "changed_files": 3,
        "created_at": "2022-08-18T15:15:03Z",
        "closed_at": "2022-08-18T20:30:46Z",
        "merged_at": "2022-08-18T20:30:46Z",
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 154,
        "deletions": 32,
        "changed_files": 3,
        "created_at": "2022-08-18T08:59:28Z",
        "closed_at": "2022-08-24T08:01:24Z",
        "merged_at": "2022-08-24T08:01:24Z",
        "body": "Creates the artifacts required for the [Docs Update Bot](https://github.com/localstack/docs/pull/231)\r\n* adds new steps to the CircleCI and runs `capture_not_implemented_responses.py` for community and pro version\r\n* some fixes and adaptions in related scripts, cherry-picked commits from https://github.com/localstack/localstack/pull/6453 (/cc @dominikschubert)",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 34,
        "deletions": 19,
        "changed_files": 1,
        "created_at": "2022-08-17T12:05:06Z",
        "closed_at": "2022-08-20T19:49:17Z",
        "merged_at": "2022-08-20T19:49:17Z",
        "body": "### Summary\r\n\r\nAdds re-entrant lock for write operations to Stores to prevent races.\r\n\r\n### Related\r\n\r\nShould resolve https://github.com/localstack/localstack/issues/6682",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 3173,
        "deletions": 2,
        "changed_files": 11,
        "created_at": "2022-08-17T11:41:29Z",
        "closed_at": "2022-09-01T14:27:46Z",
        "merged_at": "2022-09-01T14:27:46Z",
        "body": "### Summary\r\n\r\nAdds support for [AWS Transcribe](https://docs.aws.amazon.com/transcribe/latest/dg/what-is.html), the speech to text service.\r\n\r\nThe new provider uses the [vosk toolkit](https://alphacephei.com/vosk/). There is support for a dozen languages to start with. The language models configured for use are relatively small (~50 MiB).\r\n\r\n### Related\r\n\r\n- Docs: https://github.com/localstack/docs/pull/242\r\n- awslocal CLI support: https://github.com/localstack/localstack-python-client/pull/39\r\n",
        "comments": 6
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2022-08-17T07:46:46Z",
        "closed_at": "2022-08-17T09:11:06Z",
        "merged_at": "2022-08-17T09:11:06Z",
        "body": "Fix for the failing `metric_aggregator` script in the `report` step of CircleCI.\r\nRunning the script as module seems to work fine and makes PR https://github.com/localstack/localstack/pull/6680 obsolete.\r\n",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 18,
        "deletions": 18,
        "changed_files": 2,
        "created_at": "2022-08-17T00:58:58Z",
        "closed_at": "2022-08-17T19:48:19Z",
        "merged_at": null,
        "body": "\ud83d\udea7 **work in progress - do not merge!**\r\n\r\nUpdate Dockerfile to skip installing node.js by default - attempting to resolve a remaining CVE related to our installed node version. This is only a temporary approach that is not supposed to be merged. If and when the build runs through, we can push it under a temporary tag, to make the image available to the users/customer for testing.",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 57,
        "deletions": 39,
        "changed_files": 2,
        "created_at": "2022-08-16T11:58:51Z",
        "closed_at": "2022-08-17T08:23:18Z",
        "merged_at": null,
        "body": "Fix for the `metric_aggregator.py` script that stopped working, as for some reason `SERVICE_PLUGINS.api_provider_specs` only returns services that are available in pro now.\r\n\r\n* removed pro/community details as it only returned pro\r\n* load any service that is \"unknown\" manually (concerns some services that are only available in community)",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 0,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2022-08-16T11:09:34Z",
        "closed_at": "2022-08-16T13:57:53Z",
        "merged_at": "2022-08-16T13:57:53Z",
        "body": "This PR disables two Terraform S3 tests which seem to be flaky in order to stabilize the pipeline.\r\nHere's an analysis of the last few runs:\r\n- `TestAccS3BucketLogging_disappears`\r\n  - https://github.com/localstack/localstack/runs/7854756690?check_suite_focus=true\r\n  - https://github.com/localstack/localstack/runs/7845176146?check_suite_focus=true\r\n  - https://github.com/localstack/localstack/runs/7841962855?check_suite_focus=true\r\n  - https://github.com/localstack/localstack/runs/7810519201?check_suite_focus=true\r\n- `TestAccS3BucketLogging_update`\r\n  - https://github.com/localstack/localstack/runs/7854756690?check_suite_focus=true\r\n  - https://github.com/localstack/localstack/runs/7851919499?check_suite_focus=true\r\n  - https://github.com/localstack/localstack/runs/7836059918?check_suite_focus=true\r\n  - https://github.com/localstack/localstack/runs/7794390893?check_suite_focus=true\r\n\r\n/cc @macnev2013 ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 9,
        "deletions": 3,
        "changed_files": 2,
        "created_at": "2022-08-16T00:17:40Z",
        "closed_at": "2022-08-18T15:19:11Z",
        "merged_at": "2022-08-18T15:19:11Z",
        "body": "Addresses https://github.com/localstack/localstack/issues/6605\r\n\r\nCurrently GetPublicKey succeeds for KeyUsage=SIGN_VERIFY keys, but not for ENCRYPT_DECRYPT asymmetric ones, as\r\n1) moto doesn't have GetPublicKey implemented;\r\n2) we allow moto to deal with ENCRYPT_DECRYPT keys, not storing them ourselves.\r\n\r\nThis PR makes LocalStack save all keys apart from KeyUsage=ENCRYPT_DECRYPT  + KeySpec=SYMMETRIC_DEFAULT, which makes it possible for GetPublicKey to fetch those keys. We do not store ENCRYPT_DECRYPT  + SYMMETRIC_DEFAULT symmetric keys, as I still have to look into how they are supposed to be handled. But GetPublicKey  in AWS doesn't work for such keys either way.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 529,
        "deletions": 136,
        "changed_files": 7,
        "created_at": "2022-08-15T17:37:52Z",
        "closed_at": "2022-08-21T16:27:30Z",
        "merged_at": "2022-08-21T16:27:30Z",
        "body": "API Added\r\n- createResolverQueryLogConfig\r\n- getResolverQueryLogConfig\r\n- deleteResolverQueryLogConfig\r\n- listResolverQueryLogConfigs\r\n- associateResolverQueryLogConfig\r\n- disassociateResolverQueryLogConfig\r\n- getResolverQueryLogConfigAssociation\r\n- listResolverQueryLogConfigAssociations\r\n- getFirewallConfig\r\n- listFirewallConfigs\r\n- updateFirewallConfig\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 156,
        "deletions": 18,
        "changed_files": 4,
        "created_at": "2022-08-15T15:50:01Z",
        "closed_at": "2022-08-16T10:08:00Z",
        "merged_at": "2022-08-16T10:08:00Z",
        "body": "This PR adds caching of the indexes created in the `ServiceCatalog`.\r\n\r\n## Problem\r\n\r\nThe `ServiceCatalog` is what powers the `ServiceNameParser` by providing indexes that allow fast lookup of service indicators to services (e.g., finding the service by its signing name or endpoint prefix). Creating the indexes involves loading all 300-something services, and iterating over all 11k-something operations. This takes around 1500 ms on my machine. This happens the first time an HTTP call is made that triggers the `ServiceNameParser`, making the first call take at least 1500ms.\r\n\r\n## Solution\r\n\r\n@alexrashed raised some concerns in the past about shipping an index pre-built with the distribution, which was a valid point since that would involve an error-prone build step. So instead I opportunistically create the cache and store it in the localstack volume directory cache. I restructured the service catalog a bit to separate concerns (providing access to the index, vs actually holding the data). I added both the localstack and botocore version identifier to the file name so we always re-load the cache on new versions.\r\n\r\n## Result\r\n\r\nLoading the cache takes 8ms vs. creating it lazily which takes about 1500ms. This has a dramatic effect on cold starts, specifically the first invocation of a service now only loads the service model, which is much faster (previously we would also load *all* service models to build the index).\r\n\r\nHere's me executing `awslocal opensearch list-domains`. \"process\" is the end-to-end server latency (timer around `Gateway.process`, and `by_signing_name` is what's being executed to look up the service):\r\n\r\nWithout caching:\r\n```\r\n# first invocation\r\nExecution of \"by_signing_name\" took 1458.67ms\r\nExecution of \"process\" took 1562.29ms\r\n# second invocation\r\nExecution of \"by_signing_name\" took 0.00ms\r\nExecution of \"process\" took 23.25ms\r\n```\r\n\r\nWith caching:\r\n```\r\n# first invocation\r\nExecution of \"by_signing_name\" took 0.01ms\r\nExecution of \"process\" took 127.29ms\r\n# second invocation\r\nExecution of \"by_signing_name\" took 0.00ms\r\nExecution of \"process\" took 22.81ms\r\n```\r\n\r\nI also tried cold-starting several different services in a row. There's only a measurable effect for the first one. \r\nBut a pretty dramatic one: 10x speedup for the first cold start.\r\n\r\n### Drawbacks/Limitations\r\n\r\nThe index obviously has to be computed at some point. Previously we would do that on the first invocation of any HTTP request for *every* localstack run. Now we do it *once* when localstack starts up for the very first time. Any subsequent localstack runs will have no startup delay. This means that this PR has no effect on ephemeral instances of localstack (e.g., in CI environments). For that we would have to ship the index with the distribution.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 3,
        "changed_files": 1,
        "created_at": "2022-08-15T05:22:13Z",
        "closed_at": "2022-08-15T16:33:12Z",
        "merged_at": "2022-08-15T16:33:12Z",
        "body": "# \ud83d\ude80 ASF Update Report \ud83d\ude80\nThis PR has been automatically generated to update the generated API stubs for our ASF services.\nIt uses the latest code-generator from the _master_ branch ([scaffold.py](https://github.com/localstack/localstack/blob/master/localstack/aws/scaffold.py)) and the latest _published_ version of [botocore](https://github.com/boto/botocore) to re-generate all API stubs which are already present in the `localstack.aws.api` module of the _master_ branch.\n\n## \ud83d\udd04 Updated Services\nThis PR updates the following services:\n- ec2\n\n## \ud83d\udc77\ud83c\udffd Handle this PR\nThe following options describe how to interact with this PR / the auto-update:\n\n\u2714\ufe0f **Accept Changes**\nIf the changes are satisfying, just squash-merge the PR and delete the source branch.\n\n\ud83d\udeab **Ignore Changes**\nIf you want to ignore the changes in this PR, just close the PR and *do not delete* the source branch. The PR will not be opened and a new PR will not be created for as long as the generated code does not change (or the branch is deleted). As soon as there are new changes, a new PR will be created.\n\n\u270f\ufe0f **Adapt Changes**\n*Don't do this.* The APIs are auto-generated. If you decide that the APIs should look different, you have to change the code-generation.\n\n\u23f8\ufe0f **Pause Updates**\nRemove the cron-schedule trigger of the GitHub Action workflow which creates these PRs. The action can then still be triggered manually, but it will not be executed automatically.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2022-08-15T02:29:29Z",
        "closed_at": "2022-08-15T19:58:58Z",
        "merged_at": "2022-08-15T19:58:58Z",
        "body": "[![Mend Renovate](https://app.renovatebot.com/images/banner.svg)](https://renovatebot.com)\n\nThis PR contains the following updates:\n\n| Package | Type | Update | Change |\n|---|---|---|---|\n| python | final | digest | `0173061` -> `4bb7026` |\n| python | stage | digest | `0173061` -> `4bb7026` |\n\n---\n\n### Configuration\n\n\ud83d\udcc5 **Schedule**: Branch creation - \"before 3am on Monday\" (UTC), Automerge - At any time (no schedule defined).\n\n\ud83d\udea6 **Automerge**: Disabled by config. Please merge this manually once you are satisfied.\n\n\u267b **Rebasing**: Whenever PR becomes conflicted, or you tick the rebase/retry checkbox.\n\n\ud83d\udd15 **Ignore**: Close this PR and you won't be reminded about these updates again.\n\n---\n\n - [ ] <!-- rebase-check -->If you want to rebase/retry this PR, click this checkbox.\n\n---\n\nThis PR has been generated by [Mend Renovate](https://www.mend.io/free-developer-tools/renovate/). View repository job log [here](https://app.renovatebot.com/dashboard#github/localstack/localstack).\n<!--renovate-debug:eyJjcmVhdGVkSW5WZXIiOiIzMi4xNTguMCIsInVwZGF0ZWRJblZlciI6IjMyLjE1OS4xIn0=-->\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 234,
        "deletions": 105,
        "changed_files": 9,
        "created_at": "2022-08-14T07:58:24Z",
        "closed_at": "2022-08-23T21:13:43Z",
        "merged_at": "2022-08-23T21:13:43Z",
        "body": "Adds more parity validations and fixes the AWS lambda integration invocation\r\n\r\n* Fixes API responses status codes\r\n* Separates AWS from AWS_TYPE lambda integration.\r\nFixes https://github.com/localstack/localstack/issues/6462\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-08-13T15:03:25Z",
        "closed_at": "2022-08-15T10:12:52Z",
        "merged_at": "2022-08-15T10:12:52Z",
        "body": "It seems [sometimes in CI](https://app.circleci.com/pipelines/github/localstack/localstack/8346/workflows/c7238f0e-0026-4870-8558-4046b08460b0/jobs/52075), not sure why, the region is not resolved correctly anymore, and the log is full of `You must specify a region` errors. Maybe some test side effects?\r\n\r\nFor the PR in question, I had originally added using a fallback region, but then removed it. [Here's the discussion](https://github.com/localstack/localstack/pull/6603#discussion_r940465391). So re-adding this fallback code now.\r\n\r\nSee an excerpt here:\r\n```\r\ntests/integration/awslambda/test_lambda_sqs_integration.py::test_redrive_policy_with_failing_lambda \r\n-------------------------------- live log call ---------------------------------\r\n2022-08-13T14:44:07.040  INFO --- [   asgi_gw_0] localstack.request.aws     : AWS sqs.CreateQueue => 200\r\n2022-08-13T14:44:07.049  INFO --- [   asgi_gw_2] localstack.request.aws     : AWS sqs.GetQueueUrl => 200\r\n2022-08-13T14:44:07.570  INFO --- [   asgi_gw_5] localstack.request.aws     : AWS lambda.CreateFunction => 200\r\n2022-08-13T14:44:07.585  INFO --- [   asgi_gw_6] localstack.request.aws     : AWS lambda.GetFunction => 200\r\n2022-08-13T14:44:07.595  INFO --- [   asgi_gw_3] localstack.request.aws     : AWS sqs.CreateQueue => 200\r\n2022-08-13T14:44:07.603  INFO --- [   asgi_gw_0] localstack.request.aws     : AWS sqs.GetQueueAttributes => 200\r\n2022-08-13T14:44:07.612  INFO --- [   asgi_gw_4] localstack.request.aws     : AWS sqs.CreateQueue => 200\r\n2022-08-13T14:44:07.621  INFO --- [   asgi_gw_2] localstack.request.aws     : AWS sqs.GetQueueAttributes => 200\r\n2022-08-13T14:44:07.635  INFO --- [   asgi_gw_1] localstack.request.aws     : AWS lambda.CreateEventSourceMapping => 200\r\n2022-08-13T14:44:08.068  INFO --- [   asgi_gw_0] localstack.request.aws     : AWS dynamodb.UpdateItem => 200\r\n2022-08-13T14:44:08.420  INFO --- [   asgi_gw_6] localstack.request.aws     : AWS kinesis.GetRecords => 200\r\n2022-08-13T14:44:09.650  INFO --- [   asgi_gw_4] localstack.request.aws     : AWS lambda.GetEventSourceMapping => 200\r\n2022-08-13T14:44:09.660  INFO --- [   asgi_gw_2] localstack.request.aws     : AWS sqs.SendMessage => 200\r\n2022-08-13T14:44:09.941  INFO --- [   asgi_gw_7] localstack.request.aws     : AWS kinesis.GetRecords => 200\r\n2022-08-13T14:44:10.144  INFO --- [Thread-12065] localstack.services.awslambda.lambda_executors : Error executing Lambda \"arn:aws:lambda:*********:000000000000:function:failing-lambda-268c594c\": You must specify a region.   File \"/opt/code/localstack/localstack/services/awslambda/lambda_executors.py\", line 1382, in _execute\r\n    process.run()\r\n  File \"/usr/local/lib/python3.10/multiprocessing/process.py\", line 108, in run\r\n    self._target(*self._args, **self._kwargs)\r\n  File \"/opt/code/localstack/localstack/services/awslambda/lambda_executors.py\", line 1369, in do_execute\r\n    result = lambda_function_callable(inv_context.event, context)\r\n  File \"/var/lib/localstack/tmp/lambda_script_l_8d7eedd6.py\", line 42, in handler\r\n    sqs = create_external_boto_client(\"sqs\")\r\n  File \"/var/lib/localstack/tmp/lambda_script_l_8d7eedd6.py\", line 52, in create_external_boto_client\r\n    return boto3.client(service, endpoint_url=endpoint_url)\r\n  File \"/opt/code/localstack/.venv/lib/python3.10/site-packages/boto3/__init__.py\", line 92, in client\r\n    return _get_default_session().client(*args, **kwargs)\r\n  File \"/opt/code/localstack/.venv/lib/python3.10/site-packages/boto3/session.py\", line 299, in client\r\n    return self._session.create_client(\r\n  File \"/opt/code/localstack/.venv/lib/python3.10/site-packages/botocore/session.py\", line 950, in create_client\r\n    client = client_creator.create_client(\r\n  File \"/opt/code/localstack/.venv/lib/python3.10/site-packages/botocore/client.py\", line 123, in create_client\r\n    client_args = self._get_client_args(\r\n  File \"/opt/code/localstack/.venv/lib/python3.10/site-packages/botocore/client.py\", line 466, in _get_client_args\r\n    return args_creator.get_client_args(\r\n  File \"/opt/code/localstack/.venv/lib/python3.10/site-packages/botocore/args.py\", line 87, in get_client_args\r\n    final_args = self.compute_client_args(\r\n  File \"/opt/code/localstack/.venv/lib/python3.10/site-packages/botocore/args.py\", line 183, in compute_client_args\r\n    endpoint_config = self._compute_endpoint_config(\r\n  File \"/opt/code/localstack/.venv/lib/python3.10/site-packages/botocore/args.py\", line 278, in _compute_endpoint_config\r\n    return self._resolve_endpoint(**resolve_endpoint_kwargs)\r\n  File \"/opt/code/localstack/.venv/lib/python3.10/site-packages/botocore/args.py\", line 381, in _resolve_endpoint\r\n    return endpoint_bridge.resolve(\r\n  File \"/opt/code/localstack/.venv/lib/python3.10/site-packages/botocore/client.py\", line 566, in resolve\r\n    resolved = self.endpoint_resolver.construct_endpoint(\r\n  File \"/opt/code/localstack/.venv/lib/python3.10/site-packages/botocore/regions.py\", line 205, in construct_endpoint\r\n    result = self._endpoint_for_partition(\r\n  File \"/opt/code/localstack/.venv/lib/python3.10/site-packages/botocore/regions.py\", line 253, in _endpoint_for_partition\r\n    raise NoRegionError()\r\n\r\n2022-08-13T14:44:10.177  INFO --- [Thread-12065] localstack.utils.threads   : Thread run method <function LambdaExecutor.execute.<locals>.do_execute at 0x7f3f0cb88ee0>(None) failed: {\"errorType\": \"NoRegionError\", \"errorMessage\": \"You must specify a region.\", \"stackTrace\": [\"  File \\\"/opt/code/localstack/localstack/services/awslambda/lambda_executors.py\\\", line 1382, in _execute\\n    process.run()\\n\", \"  File \\\"/usr/local/lib/python3.10/multiprocessing/process.py\\\", line 108, in run\\n    self._target(*self._args, **self._kwargs)\\n\", \"  File \\\"/opt/code/localstack/localstack/services/awslambda/lambda_executors.py\\\", line 1369, in do_execute\\n    result = lambda_function_callable(inv_context.event, context)\\n\", \"  File \\\"/var/lib/localstack/tmp/lambda_script_l_8d7eedd6.py\\\", line 42, in handler\\n    sqs = create_external_boto_client(\\\"sqs\\\")\\n\", \"  File \\\"/var/lib/localstack/tmp/lambda_script_l_8d7eedd6.py\\\", line 52, in create_external_boto_client\\n    return boto3.client(service, endpoint_url=endpoint_url)\\n\", \"  File \\\"/opt/code/localstack/.venv/lib/python3.10/site-packages/boto3/__init__.py\\\", line 92, in client\\n    return _get_default_session().client(*args, **kwargs)\\n\", \"  File \\\"/opt/code/localstack/.venv/lib/python3.10/site-packages/boto3/session.py\\\", line 299, in client\\n    return self._session.create_client(\\n\", \"  File \\\"/opt/code/localstack/.venv/lib/python3.10/site-packages/botocore/session.py\\\", line 950, in create_client\\n    client = client_creator.create_client(\\n\", \"  File \\\"/opt/code/localstack/.venv/lib/python3.10/site-packages/botocore/client.py\\\", line 123, in create_client\\n    client_args = self._get_client_args(\\n\", \"  File \\\"/opt/code/localstack/.venv/lib/python3.10/site-packages/botocore/client.py\\\", line 466, in _get_client_args\\n    return args_creator.get_client_args(\\n\", \"  File \\\"/opt/code/localstack/.venv/lib/python3.10/site-packages/botocore/args.py\\\", line 87, in get_client_args\\n    final_args = self.compute_client_args(\\n\", \"  File \\\"/opt/code/localstack/.venv/lib/python3.10/site-packages/botocore/args.py\\\", line 183, in compute_client_args\\n    endpoint_config = self._compute_endpoint_config(\\n\", \"  File \\\"/opt/code/localstack/.venv/lib/python3.10/site-packages/botocore/args.py\\\", line 278, in _compute_endpoint_config\\n    return self._resolve_endpoint(**resolve_endpoint_kwargs)\\n\", \"  File \\\"/opt/code/localstack/.venv/lib/python3.10/site-packages/botocore/args.py\\\", line 381, in _resolve_endpoint\\n    return endpoint_bridge.resolve(\\n\", \"  File \\\"/opt/code/localstack/.venv/lib/python3.10/site-packages/botocore/client.py\\\", line 566, in resolve\\n    resolved = self.endpoint_resolver.construct_endpoint(\\n\", \"  File \\\"/opt/code/localstack/.venv/lib/python3.10/site-packages/botocore/regions.py\\\", line 205, in construct_endpoint\\n    result = self._endpoint_for_partition(\\n\", \"  File \\\"/opt/code/localstack/.venv/lib/python3.10/site-packages/botocore/regions.py\\\", line 253, in _endpoint_for_partition\\n    raise NoRegionError()\\n\"]} Traceback (most recent call last):\r\n  File \"/opt/code/localstack/localstack/utils/threads.py\", line 39, in run\r\n    result = self.func(self.params, **kwargs)\r\n  File \"/opt/code/localstack/localstack/services/awslambda/lambda_executors.py\", line 443, in do_execute\r\n    return _run(func_arn=func_arn)\r\n  File \"/opt/code/localstack/localstack/utils/cloudwatch/cloudwatch_util.py\", line 153, in wrapped\r\n    raise e\r\n  File \"/opt/code/localstack/localstack/utils/cloudwatch/cloudwatch_util.py\", line 149, in wrapped\r\n    result = func(*args, **kwargs)\r\n  File \"/opt/code/localstack/localstack/services/awslambda/lambda_executors.py\", line 430, in _run\r\n    raise e\r\n  File \"/opt/code/localstack/localstack/services/awslambda/lambda_executors.py\", line 426, in _run\r\n    result = self._execute(lambda_function, inv_context)\r\n  File \"/opt/code/localstack/localstack/services/awslambda/lambda_executors.py\", line 1425, in _execute\r\n    raise InvocationException(result, log_output=log_output, result=result)\r\nlocalstack.services.awslambda.lambda_executors.InvocationException: {\"errorType\": \"NoRegionError\", \"errorMessage\": \"You must specify a region.\", \"stackTrace\": [\"  File \\\"/opt/code/localstack/localstack/services/awslambda/lambda_executors.py\\\", line 1382, in _execute\\n    process.run()\\n\", \"  File \\\"/usr/local/lib/python3.10/multiprocessing/process.py\\\", line 108, in run\\n    self._target(*self._args, **self._kwargs)\\n\", \"  File \\\"/opt/code/localstack/localstack/services/awslambda/lambda_executors.py\\\", line 1369, in do_execute\\n    result = lambda_function_callable(inv_context.event, context)\\n\", \"  File \\\"/var/lib/localstack/tmp/lambda_script_l_8d7eedd6.py\\\", line 42, in handler\\n    sqs = create_external_boto_client(\\\"sqs\\\")\\n\", \"  File \\\"/var/lib/localstack/tmp/lambda_script_l_8d7eedd6.py\\\", line 52, in create_external_boto_client\\n    return boto3.client(service, endpoint_url=endpoint_url)\\n\", \"  File \\\"/opt/code/localstack/.venv/lib/python3.10/site-packages/boto3/__init__.py\\\", line 92, in client\\n    return _get_default_session().client(*args, **kwargs)\\n\", \"  File \\\"/opt/code/localstack/.venv/lib/python3.10/site-packages/boto3/session.py\\\", line 299, in client\\n    return self._session.create_client(\\n\", \"  File \\\"/opt/code/localstack/.venv/lib/python3.10/site-packages/botocore/session.py\\\", line 950, in create_client\\n    client = client_creator.create_client(\\n\", \"  File \\\"/opt/code/localstack/.venv/lib/python3.10/site-packages/botocore/client.py\\\", line 123, in create_client\\n    client_args = self._get_client_args(\\n\", \"  File \\\"/opt/code/localstack/.venv/lib/python3.10/site-packages/botocore/client.py\\\", line 466, in _get_client_args\\n    return args_creator.get_client_args(\\n\", \"  File \\\"/opt/code/localstack/.venv/lib/python3.10/site-packages/botocore/args.py\\\", line 87, in get_client_args\\n    final_args = self.compute_client_args(\\n\", \"  File \\\"/opt/code/localstack/.venv/lib/python3.10/site-packages/botocore/args.py\\\", line 183, in compute_client_args\\n    endpoint_config = self._compute_endpoint_config(\\n\", \"  File \\\"/opt/code/localstack/.venv/lib/python3.10/site-packages/botocore/args.py\\\", line 278, in _compute_endpoint_config\\n    return self._resolve_endpoint(**resolve_endpoint_kwargs)\\n\", \"  File \\\"/opt/code/localstack/.venv/lib/python3.10/site-packages/botocore/args.py\\\", line 381, in _resolve_endpoint\\n    return endpoint_bridge.resolve(\\n\", \"  File \\\"/opt/code/localstack/.venv/lib/python3.10/site-packages/botocore/client.py\\\", line 566, in resolve\\n    resolved = self.endpoint_resolver.construct_endpoint(\\n\", \"  File \\\"/opt/code/localstack/.venv/lib/python3.10/site-packages/botocore/regions.py\\\", line 205, in construct_endpoint\\n    result = self._endpoint_for_partition(\\n\", \"  File \\\"/opt/code/localstack/.venv/lib/python3.10/site-packages/botocore/regions.py\\\", line 253, in _endpoint_for_partition\\n    raise NoRegionError()\\n\"]}\r\n```",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2022-08-13T08:02:07Z",
        "closed_at": "2022-08-16T06:15:14Z",
        "merged_at": "2022-08-16T06:15:14Z",
        "body": "Referencing this issue : https://github.com/localstack/localstack/issues/6287\r\n\r\nAdded a check to initialise `destinations = []` if destinations is None",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 6,
        "deletions": 6,
        "changed_files": 1,
        "created_at": "2022-08-12T17:57:30Z",
        "closed_at": "2022-08-16T10:40:25Z",
        "merged_at": "2022-08-16T10:40:25Z",
        "body": "Previously just printed `{value}` but now does `{value!r}` which is equivalent to `{repr(value)}`.\r\n\r\nThis means we'll now properly see newlines etc. in strings and we can easier differentiate if something is an integer or a string.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 135,
        "deletions": 12,
        "changed_files": 5,
        "created_at": "2022-08-12T14:40:28Z",
        "closed_at": "2022-08-16T18:17:18Z",
        "merged_at": "2022-08-16T18:17:18Z",
        "body": "Adds a more generalized way to cast parameter values (even nested now) when the first SDK call failed due to invalid parameter types.\r\n\r\nAlso found minor parity issues for FIFO queue default values along the way. /cc @baermat \r\n\r\n\r\nFixes #5671",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 364,
        "deletions": 30,
        "changed_files": 4,
        "created_at": "2022-08-12T13:48:53Z",
        "closed_at": "2022-10-06T10:28:38Z",
        "merged_at": "2022-10-06T10:28:37Z",
        "body": "This is a feature request here: #6360\r\nTaking example on the SES provider, I used the same utility to expose the messages.\r\nThis is a first draft, as I don't like the formatting of the messages that we store and would prefer to use the ASF message model instead. I can do a separate PR to remove traces of the old legacy provider first, but I would like feedback on the mechanism used to expose the data.\r\n\r\nThis will also be a good excuse to create an SNS page in the docs documenting the internal url that you can use to access the messages, and the limitations.\r\n\r\nRight now, we will expose the messages as received, and we do not have additional logic linked to the platform applications.\r\nThe end goal would be to expose the message as they would be sent from SNS to the different application platforms.\r\n\r\nWe should maybe also set the relaying of the messages to real application platform like GCM/FCM behind a feature flag, to not accidentally send a lot of unauthorised requests to those, and it would explicitly be set by the user to test against them. \r\n\r\nNote: not sure about the implication about multi-accounts, for now we can select the region but not sure how the user will be able to select the account id, or if we could retrieve all saved account ids and return them.\r\n\r\n\\cc @thrau @viren-nadkarni \r\n\r\nEdit: I've added a new test that is `xfail` for now, checking the behaviour of dispatching to different platform types subscribed to one topic, as stated per AWS docs. See: https://docs.aws.amazon.com/sns/latest/dg/sns-send-custom-platform-specific-payloads-mobile-devices.html\r\n\r\nRight now, a limitation from the point above will make that for retrospecting a specific endpoint, it will have the whole message containing other platforms as well. We will need to have additional logic in the provider to dispatch in a better way. This would be part of a consequent refactoring of the SNS provider, which would allow those kind of improvements. \r\n",
        "comments": 6
    },
    {
        "merged": true,
        "additions": 470,
        "deletions": 265,
        "changed_files": 3,
        "created_at": "2022-08-12T12:02:30Z",
        "closed_at": "2022-08-19T15:50:02Z",
        "merged_at": "2022-08-19T15:50:02Z",
        "body": "This PR fixes #6657\r\n\r\nWe only checked `ContentBasedDeduplication` settings in our tests for `publish_batch`.\r\nWe would not pass the `MessageDeduplicationId` to the SQS queue, thus launching this exception:\r\n```python\r\n2022-08-12T14:00:05.973  INFO --- [   asgi_gw_1] localstack.services.sns.provider : Unable to forward SNS message to SQS: An error occurred (InvalidParameterValue) when calling the SendMessage operation (reached max retries: 0): The Queue should either have ContentBasedDeduplication enabled or MessageDeduplicationId provided explicitly  Traceback (most recent call last):\r\n  File \"/Users/benjaminsimon/Projects/localstack/localstack/localstack/services/sns/provider.py\", line 984, in message_to_subscriber\r\n    sqs_client.send_message(\r\n  File \"/Users/benjaminsimon/Projects/localstack/localstack-ext/.venv/lib/python3.10/site-packages/botocore/client.py\", line 508, in _api_call\r\n    return self._make_api_call(operation_name, kwargs)\r\n  File \"/Users/benjaminsimon/Projects/localstack/localstack-ext/.venv/lib/python3.10/site-packages/botocore/client.py\", line 915, in _make_api_call\r\n    raise error_class(parsed_response, operation_name)\r\nbotocore.exceptions.ClientError: An error occurred (InvalidParameterValue) when calling the SendMessage operation (reached max retries: 0): The Queue should either have ContentBasedDeduplication enabled or MessageDeduplicationId provided explicitly \r\n```\r\nThis reinforces the need for a refactoring of the SNS provider. \r\nWe are not directly enforcing the deduplication in SNS, but instead piggy back on SQS.\r\nThe behaviour of SNS is a bit different, see: https://docs.aws.amazon.com/sns/latest/dg/fifo-message-dedup.html, with a time window of 5 minutes. This will need to be implemented in a follow up iteration.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 59,
        "deletions": 1,
        "changed_files": 3,
        "created_at": "2022-08-11T21:49:15Z",
        "closed_at": "2022-08-12T09:00:22Z",
        "merged_at": "2022-08-12T09:00:22Z",
        "body": "Fix resolving CloudFormation intrinsic functions passed as list rather than dict.\r\n\r\nThis has surfaced when resolving a user issue using a CFn template that used an `ImportValue` with a slightly different format (which looks a bit odd, but works against AWS):\r\n```\r\n      EventSourceArn: !ImportValue \r\n        'Fn::Sub': ${Environment}-${Product}-ExportTaskQueueArn\r\n```\r\n\r\nValidated the behavior against AWS, added a test using a stack import that references an exported value from another stack.",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 101,
        "deletions": 89,
        "changed_files": 2,
        "created_at": "2022-08-11T11:45:53Z",
        "closed_at": "2022-08-12T17:02:26Z",
        "merged_at": "2022-08-12T17:02:26Z",
        "body": "This PR:\r\n\r\n- embed the fixture used to wait for a table to be active into the fixtures we use to create DynamoDB tables; this unlocks the possibility of starting verifying DynamoDB tests against AWS;\r\n- started verifying a bunch of integration tests against AWS (the easiest ones, for the moment; a second bunch will come);\r\n\r\nGenerally, for DynamoDB we have three different ways to create resources, i.e., tables, that we might think of standardizing.\r\n- `dynamodb_create_table_with_parameters` fixture, where we simply pass a dictionary of parameters and create the table with the client's API;\r\n- `dynamodb_create_table` fixture, with similar behavior to the one above but it then actually calls the `create_dynamodb_table` in `aws_stack.py`;\r\n- via [`DynamoDBServiceResource`](https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/dynamodb.html#DynamoDB.ServiceResource) to abstract the creation of resources.",
        "comments": 3
    },
    {
        "merged": false,
        "additions": 62,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2022-08-10T22:12:05Z",
        "closed_at": "2022-08-26T09:41:22Z",
        "merged_at": null,
        "body": "This little function will give us the ability to write to files and make sure there are no partial writes in case of an exception.\r\n\r\nThe intent was to ensure our persistence files were not corrupted in case of failure, however, this doesn't work for \"append\" to file writes; therefore it can't be used inside `save_file`. \r\n\r\nI can leave the utility there for cases where we know it's a one-off write. There is a test example that should be clear enough explaining what it does and how it works\r\n\r\n/cc @giograno \r\n\r\n\r\n\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 739,
        "deletions": 5,
        "changed_files": 6,
        "created_at": "2022-08-10T20:15:20Z",
        "closed_at": "2022-09-08T11:29:11Z",
        "merged_at": "2022-09-08T11:29:11Z",
        "body": "## Problem\r\nOur lambda proxy integration payload differs hugely from the one of AWS. To get a feeling how much, I introduced this test running multiple invokes against an apigateway api with different paths.\r\n## Other changes\r\n\r\n* fixes #6532 by making sure trailing slashes are correctly preserved\r\n* add a test for header casing preservation\r\n\r\n/cc @calvernaz ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 17,
        "deletions": 4,
        "changed_files": 2,
        "created_at": "2022-08-10T16:56:14Z",
        "closed_at": "2022-08-19T08:52:49Z",
        "merged_at": "2022-08-19T08:52:49Z",
        "body": "## Problem\r\nUnder Chrome >= 104, the browser will send preflight requests for all requests going to private resources (see https://developer.chrome.com/blog/private-network-access-preflight/). This currently leads in an error message printed for internal endpoints (like /health and /_localstack/...), which is obviously unwanted:\r\n```\r\n2022-08-10T17:29:54.238 DEBUG --- [   asgi_gw_0] l.aws.serving.wsgi         : OPTIONS localhost:4566/health\r\n2022-08-10T17:29:55.389 ERROR --- [   asgi_gw_0] l.aws.handlers.logging     : exception during call chain\r\nTraceback (most recent call last):\r\n  File \"/home/daniel/localstack/localstack/localstack/aws/chain.py\", line 57, in handle\r\n    handler(self, self.context, response)\r\n  File \"/home/daniel/localstack/localstack/localstack/aws/handlers/internal.py\", line 31, in __call__\r\n    response.update_from(self.resources.dispatch(context.request))\r\n  File \"/home/daniel/localstack/localstack/localstack/http/router.py\", line 234, in dispatch\r\n    return self.dispatcher(request, handler, args)\r\n  File \"/home/daniel/localstack/localstack/localstack/http/dispatcher.py\", line 82, in _dispatch\r\n    raise MethodNotAllowed()\r\nwerkzeug.exceptions.MethodNotAllowed: 405 Method Not Allowed: The method is not allowed for the requested URL.\r\n```\r\nOptions requests are not handled by our router, which leads to this error.\r\n\r\nFor most services, the options request will just not be parsed as the correct service, and will currently return the default 200 request (since all service specific handlers will not process this request). There are some exceptions, like lambda where our service detection will detect the options request as a lambda request and where flask-cors will, per default, respond to the request (due to the current implementation of lambda).\r\nAlso, in the case of the Lambda ASF provider (which is a good example as the service can be determined from the path), ASF would just route the OPTIONS request as GET request to a service, which should not be responsible for it:\r\n```\r\ncurl 'http://localhost:4566/2015-03-31/functions/' \\\r\n  -X 'OPTIONS' \\\r\n  -H 'Accept: */*' \\\r\n  -H 'Accept-Language: en-US,en;q=0.9' \\\r\n  -H 'Access-Control-Request-Headers: authorization,x-amz-content-sha256,x-amz-date,x-amz-user-agent' \\\r\n  -H 'Access-Control-Request-Method: GET' \\\r\n  -H 'Access-Control-Request-Private-Network: true' \\\r\n  -H 'Connection: keep-alive' \\\r\n  -H 'Origin: https://app.localstack.cloud' \\\r\n  -H 'Sec-Fetch-Dest: empty' \\\r\n  -H 'Sec-Fetch-Mode: cors' \\\r\n  -H 'Sec-Fetch-Site: cross-site' \\\r\n  -H 'User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/104.0.0.0 Safari/537.36' \\\r\n  --compressed\r\n{\"Functions\": []}%   \r\n```\r\nHere, the service will respond to an OPTIONS request with the response of the GET request, which also should not be the case.\r\nThe case for s3 (which can manage its own cors) is more complex. For preflight requests regarding presigned urls, s3 will indeed take over the request. For other requests, like a simple bucket post, the preflight requests will never be routed to s3:\r\n```\r\n2022-08-10T17:39:49.405 DEBUG --- [   asgi_gw_1] l.aws.serving.wsgi         : OPTIONS localhost:4566/test\r\n2022-08-10T17:39:49.406 DEBUG --- [   asgi_gw_1] l.aws.handlers.service     : no service set in context, skipping request parsing\r\n```\r\nor for a PutObject operation:\r\n```\r\n2022-08-10T17:43:47.231 DEBUG --- [   asgi_gw_1] l.aws.serving.wsgi         : OPTIONS localhost:4566/test/localstack-0.14.4.tar.gz\r\n2022-08-10T17:43:47.233 DEBUG --- [   asgi_gw_1] l.aws.handlers.service     : no service set in context, skipping request parsing\r\n```\r\n\r\n## Preliminary patch\r\nThis PR consists of two things:\r\n* We now correctly respect the `Access-Control-Request-Private-Network` for preflight requests (see the [Chrome blog post about this](https://developer.chrome.com/blog/private-network-access-preflight/)), and set the appropriate response headers.\r\n* We will now, per default, return OPTIONS requests before passing through the entire handler chain, unless the request targets a service which should handle its own CORS.\r\nSince this could lead to problems down the line, which is why it is currently behind a feature flag, which should be deactivated on patch releases.\r\nThe impact, however, should be negligible, as for most services, the service detection will fail anyway, and the current default would be to return an empty response with status code 200 - this would change to 204.\r\nThe main advantage is, that resources that cannot handle preflight requests themselves, would have it handled properly before they are executed.\r\n\r\n/cc @alexrashed @calvernaz ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 220,
        "deletions": 6,
        "changed_files": 3,
        "created_at": "2022-08-10T15:35:22Z",
        "closed_at": "2022-08-11T12:03:59Z",
        "merged_at": "2022-08-11T12:03:59Z",
        "body": "This PR fixes the scenario where we would delete an SNS subscription (we would actually only delete the logic/publish part but not the resource in moto, which could be listed) when its SQS endpoint was deleted. It would send a message to the DLQ once if configured then delete the subscription.\r\nAWS does not do this, it keeps the subscription and you can even set a RedrivePolicy afterwards.\r\n\r\nI wrote a new AWS validated and snapshotted test to validate the behaviour.\r\n\r\nThere was an old PR fixing this #6160, which had a lot of merge conflicts from all the changes since.\r\n\r\n_fixes #5459_",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 37,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2022-08-10T14:19:41Z",
        "closed_at": "2022-08-12T15:06:42Z",
        "merged_at": "2022-08-12T15:06:41Z",
        "body": "This PR addresses #6290 and adds an integration test.\r\n\r\nSneak peek: in an upcoming PR I am embedding `dynamodb_wait_for_table_active` into the creation fixture (and validating many DynamoDB tests).",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 58,
        "deletions": 20,
        "changed_files": 4,
        "created_at": "2022-08-10T13:49:47Z",
        "closed_at": "2022-08-11T16:33:34Z",
        "merged_at": "2022-08-11T16:33:34Z",
        "body": "Fix #6639\r\nThis was discovered by accident while augmenting the snapshots, adding more attributes to the response before fixing another bug.\r\n\r\nThe format was wrong, we would add and even override `MessagesAttributes` with error coded one when AWS doesn't do it. The code to check if we send the attributes is a bit messy, there are check all over the place and the provider will need a good clean up/refactor.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 22,
        "deletions": 14,
        "changed_files": 4,
        "created_at": "2022-08-10T13:11:46Z",
        "closed_at": "2022-08-24T11:42:54Z",
        "merged_at": "2022-08-24T11:42:54Z",
        "body": "When running LocalStack (and therefore OpenSearch/Elasticsearch) in Docker, the search clusters were still bound to localhost in the container when using the port strategy. This caused them to be unreachable. This PR fixes that by addressing #6419 ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 0,
        "deletions": 9,
        "changed_files": 1,
        "created_at": "2022-08-10T11:02:45Z",
        "closed_at": "2022-08-10T12:43:07Z",
        "merged_at": "2022-08-10T12:43:07Z",
        "body": "Removed the databind patch for `databind-2.12.3.jar`:\r\n* it was replaced with `databind-2.13.3.jar` to fix a known CVE\r\n* latest `DynamoDBLocal` includes `jackson-databind-2.12.6.1.jar` \r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2022-08-10T10:51:31Z",
        "closed_at": "2022-08-18T20:32:00Z",
        "merged_at": "2022-08-18T20:32:00Z",
        "body": "this PR modifies the localstack CLI command to correctly set the `config.CONFIG_PROFILE` value to whatever is passed to `--profile`. previously we would only set the environment variable, but the config was already loaded before the env var was set.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 542,
        "deletions": 34,
        "changed_files": 13,
        "created_at": "2022-08-10T09:19:03Z",
        "closed_at": "2022-08-18T16:28:43Z",
        "merged_at": "2022-08-18T16:28:43Z",
        "body": "Previously  there was some weird behavior in CDK:\r\n\r\n1. Deploy Stack A (new) => success\r\n2. Deploy Stack A (no changes) => success (but still created a change set)\r\n3. Deploy Stack A (no changes) => fail (resource not found)\r\n4. go to 3\r\n\r\n\r\nWe didn't save the \"raw\" template string when creating a stack and therefore returned invalid data in `GetTemplate`. This is important because CDK uses it to compare the new template against and if they match, it won't even try to create a change set (by default, can be disabled with `deploy --force`)\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 20,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2022-08-10T05:41:00Z",
        "closed_at": "2022-08-10T20:06:13Z",
        "merged_at": "2022-08-10T20:06:13Z",
        "body": "Even though DelaySeconds is not valid for fifo queues in a send_message operation, sending it with the value 0 is allowed.\r\nfixes #6612 \r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 5,
        "deletions": 223,
        "changed_files": 19,
        "created_at": "2022-08-09T23:25:12Z",
        "closed_at": "2022-08-12T19:02:39Z",
        "merged_at": "2022-08-12T19:02:39Z",
        "body": "This PR removes the old event logging code that was replaced with a generalized version using ASF handlers.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 3815,
        "deletions": 614,
        "changed_files": 5,
        "created_at": "2022-08-09T16:07:13Z",
        "closed_at": "2022-09-28T11:57:40Z",
        "merged_at": "2022-09-28T11:57:40Z",
        "body": "Migrated test suite to use snapshots with the exception of secret rotation tests and duplicate http tests.\r\nApplied a number of fixes and enhancements.\r\n\r\nEnhancements/Fixes/Patches:\r\n- correct handling of given secret ids in the form of ARNs with trailing '-'\r\n- update of secret's LastAccessedDate field on GetSecretValue requests\r\n- added support for LastAccessedDate about secret versions\r\n- update of secret's version LastAccessedDate fields\r\n- fixed output format of ListSecretVersionIds request that now reports the exact CreatedDate instead of current time\r\n- fixed output format of ListSecretVersionIds request that now reports the version's LastAccessedDate if available\r\n- fixed output format of ListSecretVersionIds request that now returns results in the correct order\r\n- enhanced PutSecretValue requests to mimic AWS's behaviour in its insertion order where this was consistent (with AWS* tags, otherwise sporadic)\r\n- fixed UpdateSecret request handling that now creates a new secret version iff changes to relevant details are provided (SecretString, SecretBinary KmsKeyId), otherwise the current version is updated (eg. description)\r\n- enhanced UpdateSecretVersionStage request handling that now versions stages are added in front not appended, AWSCURRENT is always in front of all other AWS stages (as this was the most consistent behaviour displayed by AWS, otherwise inconsistent ordering)\r\n- fixed `SecretNotFoundException` sometimes returning an incorrect error code\r\n\r\nAdded relevant snapshot support, such as:\r\n- DropUnsupportedEntries: which drops all unsupported fields from the snapshot\r\n- NormaliseVersionStages which ensures validation about VersionStages field is performed against a constant sorting strategy (AWS displayed inconsistent sorting habits about this field)\r\n- Others such as version_uuid pattern matching",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 4241,
        "deletions": 2364,
        "changed_files": 8,
        "created_at": "2022-08-09T15:27:16Z",
        "closed_at": "2022-09-07T07:12:47Z",
        "merged_at": "2022-09-07T07:12:47Z",
        "body": "This is the initial PR for refactoring s3 tests, adding new ones corresponding to issues we could/would fix while migrating the service to ASF.\r\n\r\n- [x] Migrated tests from `integration/test_s3.py` to `integration/s3/test_s3.py` \r\n   - only a few left, where we still need to decide if migration makes sense - will takle during ASF s3 migration\r\n- [x] Validated against AWS and added markers; added snapshots for appropriate tests \r\n- [x] Added a few tests corresponding to opened issue, marked with xfail",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 64,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2022-08-09T14:33:11Z",
        "closed_at": "2022-08-11T15:09:31Z",
        "merged_at": "2022-08-11T15:09:31Z",
        "body": "Should address #6486. \r\nPassing an empty dictionary as `loggingConfiguration`, while being a valid AWS request, as shown in the ticker messes up with persistence. This PR adds the default configuration as the real AWS. ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2022-08-09T13:20:54Z",
        "closed_at": "2022-08-10T12:03:18Z",
        "merged_at": "2022-08-10T12:03:18Z",
        "body": "Addresses #6464\r\n\r\nWhen using only community code, but setting the package type to image (which should work until it comes to invocation), the \"Layer\" key is not available in the \"Configuration\" dict, when running get-function.\r\nThis leads to a 500 error when running get-function.\r\n\r\nThis PR fixes this by using `pop` instead of `del`, which will not error on missing Keys.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 129,
        "deletions": 40,
        "changed_files": 6,
        "created_at": "2022-08-09T11:56:59Z",
        "closed_at": "2022-08-11T19:31:31Z",
        "merged_at": "2022-08-11T19:31:31Z",
        "body": "This PR fixes #6613\r\nAdditionally, I've checked the format of message in an SQS queue coming from a lambda with snapshots, and normally got parity.\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 26,
        "deletions": 4,
        "changed_files": 2,
        "created_at": "2022-08-09T08:12:59Z",
        "closed_at": "2022-08-10T08:42:52Z",
        "merged_at": "2022-08-10T08:42:52Z",
        "body": "This PR fixes a problem with `KeyValueBasedTransformer`:\r\nIf `replace_reference` was set to False, it would replace the entire key.\r\n\r\nFix:\r\n* now it replaces the returned value only (which can be a subset of the value), with the `replacement` string\r\n* behaves similar to `replace_reference=True`\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 19,
        "deletions": 12,
        "changed_files": 2,
        "created_at": "2022-08-09T08:04:52Z",
        "closed_at": "2022-08-09T10:19:15Z",
        "merged_at": "2022-08-09T10:19:15Z",
        "body": "This small PR fixes queue attribute validation for fifo queues when they get \"created again\" (=create_queue with the same attributes, including FifoQueue=true)\r\nfixes #6620 \r\n",
        "comments": 3
    },
    {
        "merged": false,
        "additions": 82,
        "deletions": 5,
        "changed_files": 3,
        "created_at": "2022-08-09T06:24:19Z",
        "closed_at": "2022-10-13T08:36:46Z",
        "merged_at": null,
        "body": null,
        "comments": 1
    },
    {
        "merged": true,
        "additions": 132,
        "deletions": 12,
        "changed_files": 4,
        "created_at": "2022-08-08T20:49:13Z",
        "closed_at": "2022-08-09T17:49:30Z",
        "merged_at": "2022-08-09T17:49:30Z",
        "body": "This PR addresses issue #6008. Adds object validations through CRC32, CRC32C, SHA1 and SHA256 checksums.\r\n\r\nNote: Without the awscrt lib botocore won't allow the CRC32C checksum for the integration tests, but is not useful inside LocalStack(that one uses the crc32c lib), that's why it's in the libs for testing.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 319,
        "deletions": 4,
        "changed_files": 1,
        "created_at": "2022-08-08T19:11:14Z",
        "closed_at": "2022-08-09T17:47:33Z",
        "merged_at": "2022-08-09T17:47:33Z",
        "body": "TF:\r\n- Added passing tests for \r\n  - S3\r\n  - Route53\r\n  - Route53Resolver\r\n\r\nNote:\r\n- Generated passing tests cases using: https://github.com/macnev2013/goat\r\n- Logs can be found in releases of the repo",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 4,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2022-08-08T12:58:36Z",
        "closed_at": "2022-08-11T19:15:48Z",
        "merged_at": null,
        "body": "This allows the Commandeer App to talk to LocalStack.",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 45,
        "deletions": 6,
        "changed_files": 4,
        "created_at": "2022-08-08T05:08:46Z",
        "closed_at": "2022-08-08T20:05:41Z",
        "merged_at": "2022-08-08T20:05:41Z",
        "body": "# \ud83d\ude80 ASF Update Report \ud83d\ude80\nThis PR has been automatically generated to update the generated API stubs for our ASF services.\nIt uses the latest code-generator from the _master_ branch ([scaffold.py](https://github.com/localstack/localstack/blob/master/localstack/aws/scaffold.py)) and the latest _published_ version of [botocore](https://github.com/boto/botocore) to re-generate all API stubs which are already present in the `localstack.aws.api` module of the _master_ branch.\n\n## \ud83d\udd04 Updated Services\nThis PR updates the following services:\n- cloudwatch\n- config\n- ec2\n- kms\n\n## \ud83d\udc77\ud83c\udffd Handle this PR\nThe following options describe how to interact with this PR / the auto-update:\n\n\u2714\ufe0f **Accept Changes**\nIf the changes are satisfying, just squash-merge the PR and delete the source branch.\n\n\ud83d\udeab **Ignore Changes**\nIf you want to ignore the changes in this PR, just close the PR and *do not delete* the source branch. The PR will not be opened and a new PR will not be created for as long as the generated code does not change (or the branch is deleted). As soon as there are new changes, a new PR will be created.\n\n\u270f\ufe0f **Adapt Changes**\n*Don't do this.* The APIs are auto-generated. If you decide that the APIs should look different, you have to change the code-generation.\n\n\u23f8\ufe0f **Pause Updates**\nRemove the cron-schedule trigger of the GitHub Action workflow which creates these PRs. The action can then still be triggered manually, but it will not be executed automatically.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2022-08-08T00:07:51Z",
        "closed_at": "2022-08-08T21:55:04Z",
        "merged_at": "2022-08-08T21:55:04Z",
        "body": "[![Mend Renovate](https://app.renovatebot.com/images/banner.svg)](https://renovatebot.com)\n\nThis PR contains the following updates:\n\n| Package | Type | Update | Change |\n|---|---|---|---|\n| python | final | patch | `3.10.5-slim-buster` -> `3.10.6-slim-buster` |\n| python | stage | patch | `3.10.5-slim-buster` -> `3.10.6-slim-buster` |\n\n---\n\n### Configuration\n\n\ud83d\udcc5 **Schedule**: Branch creation - \"before 3am on Monday\" (UTC), Automerge - At any time (no schedule defined).\n\n\ud83d\udea6 **Automerge**: Disabled by config. Please merge this manually once you are satisfied.\n\n\u267b **Rebasing**: Whenever PR becomes conflicted, or you tick the rebase/retry checkbox.\n\n\ud83d\udd15 **Ignore**: Close this PR and you won't be reminded about these updates again.\n\n---\n\n - [ ] <!-- rebase-check -->If you want to rebase/retry this PR, click this checkbox.\n\n---\n\nThis PR has been generated by [Mend Renovate](https://www.mend.io/free-developer-tools/renovate/). View repository job log [here](https://app.renovatebot.com/dashboard#github/localstack/localstack).\n<!--renovate-debug:eyJjcmVhdGVkSW5WZXIiOiIzMi4xNTAuNCIsInVwZGF0ZWRJblZlciI6IjMyLjE1MC40In0=-->\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2022-08-08T00:07:47Z",
        "closed_at": "2022-08-08T20:09:41Z",
        "merged_at": "2022-08-08T20:09:41Z",
        "body": "[![Mend Renovate](https://app.renovatebot.com/images/banner.svg)](https://renovatebot.com)\n\nThis PR contains the following updates:\n\n| Package | Type | Update | Change |\n|---|---|---|---|\n| python | final | digest | `e7fce98` -> `e72f92b` |\n| python | stage | digest | `e7fce98` -> `e72f92b` |\n\n---\n\n### Configuration\n\n\ud83d\udcc5 **Schedule**: Branch creation - \"before 3am on Monday\" (UTC), Automerge - At any time (no schedule defined).\n\n\ud83d\udea6 **Automerge**: Disabled by config. Please merge this manually once you are satisfied.\n\n\u267b **Rebasing**: Whenever PR becomes conflicted, or you tick the rebase/retry checkbox.\n\n\ud83d\udd15 **Ignore**: Close this PR and you won't be reminded about these updates again.\n\n---\n\n - [ ] <!-- rebase-check -->If you want to rebase/retry this PR, click this checkbox.\n\n---\n\nThis PR has been generated by [Mend Renovate](https://www.mend.io/free-developer-tools/renovate/). View repository job log [here](https://app.renovatebot.com/dashboard#github/localstack/localstack).\n<!--renovate-debug:eyJjcmVhdGVkSW5WZXIiOiIzMi4xNTAuNCIsInVwZGF0ZWRJblZlciI6IjMyLjE1MC40In0=-->\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 1119,
        "deletions": 7,
        "changed_files": 5,
        "created_at": "2022-08-07T18:33:07Z",
        "closed_at": "2022-08-18T11:09:45Z",
        "merged_at": "2022-08-18T11:09:45Z",
        "body": "This PR adds support for [reporting batch item failures](https://docs.aws.amazon.com/lambda/latest/dg/with-sqs.html#services-sqs-batchfailurereporting) when using Lambda SQS event source mappings.\r\n\r\n* Lambda changes: just for the API to accept and store the `FunctionResponseTypes` attribute\r\n* `sqs_event_source_listener.py`: Just needed to add a control path for when `ReportBatchItemFailures` is set, in which the listener interprets the lambda `batchItemFailures` result according to the spec (see the \"Success and failure conditions\" in the docs I linked), and calls sqs delete batch with only the messages that should be deleted according to the result.\r\n* Tests: The most complicated part of this PR are i think the tests, which also introduce a new lambda that can be configured to return specific expected or unexpected results (see the TODO list below which test cases are covered). The tests are very similar to each other, but IMO not enough to generalize something out of them without becoming confusing. I'd rather keep the code duplicated.\r\n\r\n- Fixes #5301 \r\n\r\n## TODOs\r\n\r\n- [x] write proper PR description\r\n- [x] basic happy path test case\r\n- [x] test case: lambda fails -> entire batch fails\r\n- [x] test case: lambda returns faulty batchItemFailures json -> entire batch fails\r\n- [x] test case: lambda returns nothing -> entire batch succeeds\r\n- [x] rebase when merged #6603\r\n- [ ] add user docs",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 549,
        "deletions": 145,
        "changed_files": 10,
        "created_at": "2022-08-05T21:33:28Z",
        "closed_at": "2022-08-08T21:33:45Z",
        "merged_at": "2022-08-08T21:33:45Z",
        "body": "This PR fixes how the SQS event source listener deals with DLQs and retry intervals.\r\n\r\nThere was some very old code left from #1973 that implemented logic that would, for SQS triggered lambdas, put messages into a DLQ manually. This logic is not needed since SQS puts messages into a DLQ automatically when it's being polled (which the event source listener does). I removed all of that code, since it is all handled implicitly in our SQS provider.\r\n\r\nFor testing I created two new tests that test the basic behavior (which replace the defunct test i removed), and retry with a DLQ (which was the original goal for #5283). The SQS event source mapping does not support `DestinationConfig`, meaning you can't make async lambdas triggered by SQS messages also send lambda results to SQS queues :shrug:. But I needed that to write proper tests, so I wrote a simple new lambda for testing that takes as input a destination queue URL to which the lambda will echo the incoming event.\r\n\r\nThe `sqs_api()` transformer was causing issue because sometimes the `SenderId` is the same as the account ID, but not always, so I exposed `_resource_name_transformer` through the transformer util so i can build some custom transformations. happy to revise that.\r\n\r\nI'll raise a follow-up PR to move the other lambda/sqs integration tests scattered throughout different tests into the new `test_lambda_sqs_integration.py`.\r\n\r\n- Fixes #5283",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2080,
        "deletions": 389,
        "changed_files": 6,
        "created_at": "2022-08-05T15:49:21Z",
        "closed_at": "2022-08-09T11:48:00Z",
        "merged_at": "2022-08-09T11:48:00Z",
        "body": "This PR adds the use of snapshots for every `aws_validated` test in the SNS test suite, following #6586\r\nWe skip some paths for now to be fixed in a later iteration. It is mostly fields not added (or added when it should not be) by Moto.\r\nAlso, it seems AWS doesn't add message signature for Fifo topics, so we will need to remove those fields. \r\nI added some exception messages fixes as well.\r\n\r\nIt contains a hacky fix that will be added in #6598 and will be removed then in order to guarantee the order of the fields.",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 119,
        "deletions": 61,
        "changed_files": 5,
        "created_at": "2022-08-05T07:55:47Z",
        "closed_at": "2022-08-09T08:55:29Z",
        "merged_at": "2022-08-09T08:55:29Z",
        "body": "Fix problem with reference-replacement for snapshots: match-object needs to be sorted to guarantee same outcome/replacement order (as tested/suggested by @bentsku).\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 45,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2022-08-04T16:35:05Z",
        "closed_at": "2022-08-05T10:58:14Z",
        "merged_at": "2022-08-05T10:58:14Z",
        "body": "This PR tackles #6529.\r\nWhen a `ClientRequestToken` is passed, a request is rejected with `IdempotentParameterMismatchException` if the payload of the request is identical. DynamoDB local interprets the same payload, but with a different keys order, as not-identical. Therefore, it wrongly throws the error above.\r\nTo avoid the issue, we now sort the payload if a client token is provided in the request.\r\nWrote a test validated against AWS.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 51,
        "deletions": 56,
        "changed_files": 5,
        "created_at": "2022-08-04T15:02:12Z",
        "closed_at": "2022-08-09T13:30:45Z",
        "merged_at": "2022-08-09T13:30:45Z",
        "body": "## Problem\r\nOn docker desktop, bind mounts (which are shared to the host) are, depending on the host os, very slow. On MacOS, using the current default, gRPC-FUSE (for file sharing between the macos host and the docker vm), the performance penalty can be over 200x (for a lot of small files, as present in node_modules folders, for example).\r\n\r\nThis significantly impacts the performance of lambda creations and invocations, since we need to unzip the deployment packages to disk, before copying / mounting into the lambda container executing the function.\r\n\r\n## Partial solution\r\nFor the case `LAMBDA_REMOTE_DOCKER=1`, where we use `docker cp` to move code from LS to the lambda, the solution is unzipping to a private, not bind mounted folder (the zip files still live on the bind mount), and then copy the extracted code to the container. This reduces disk IO to the bind mount, and increases performance by a factor of 65x, while not impacting normal lambda operation\r\n\r\n## Implementation\r\nWith this PR, the file location of the zip file, and the current working directory (in essence the unzip destination, where the unzipped code lives) will be separated (before, the zip file parent folder was identical to the cwd). Using this split, we can now set the cwd to a not-bindmounted temporary folder, while keeping the zip file in the current location. This leads to improved unzipping times, and improved times for `docker cp` as well, due to faster IO.\r\nFor `LAMBDA_REMOTE_DOCKER=0`, the file locations will stay the same, as it needs to be present at the bind mount.\r\nThis will also significantly reduce complexity of code in pro.\r\n\r\n## Performance improvements\r\nWhen `LAMBDA_REMOTE_DOCKER=1`, the extraction / pending time of a lambda with two layers with a lot of files (node modules, more than 100k files) was reduced from 215.430s, invocation times from 54s:\r\n```\r\n2022-08-04T14:25:28.933 DEBUG --- [  Thread-125] l.s.awslambda.lambda_api   : Function code initialization for function 'test-lambda' complete. State => Active (in 215.430s)\r\n...\r\n2022-08-04T14:27:29.469 DEBUG --- [uest_thread)] l.s.awslambda.lambda_api   : Lambda invocation duration: 54116.22ms\r\n```\r\nto 3.3s for creation and 35s for invocation:\r\n```\r\n2022-08-04T14:34:21.131 DEBUG --- [  Thread-127] l.s.awslambda.lambda_api   : Function code initialization for function 'test-lambda' complete. State => Active (in 3.299s)\r\n...\r\n2022-08-04T14:34:57.966 DEBUG --- [uest_thread)] l.s.awslambda.lambda_api   : Lambda invocation duration: 35886.73ms\r\n```\r\nWhile this is, for the invocation time, still not too good, it will reduce code initialization time by 98.4%, and invocation duration is also reduced by 33.6%.\r\n\r\nAll values are for the same huge layers, and `LAMBDA_REMOTE_DOCKER=1`\r\n\r\n## Why cannot we do the same thing for `LAMBDA_REMOTE_DOCKER=0`?\r\nThen we would have to write all the extracted files to the bind mount again (since they have to be present on the host), which would take the performance improvement away again. Which is why, in the case of `LAMBDA_REMOTE_DOCKER=0`, everything will stay the same, the improved performance will only take effect with `LAMBDA_REMOTE_DOCKER=1` (the default in docker anyway).\r\n\r\nFor `LAMBDA_REMOTE_DOCKER=0` I would recommend using [virtiofs instead of gRPC-FUSE](https://www.docker.com/blog/speed-boost-achievement-unlocked-on-docker-desktop-4-6-for-mac/) for filesharing between the docker-desktop VM and the host.\r\n\r\n## Other changes\r\n* removes the GET operation which would correspond to GetFunctionCode from lambda, as it is not implemented in AWS (not listed in here: https://docs.aws.amazon.com/lambda/latest/dg/API_Operations.html). Before ASF, the url could be used to request the lambda code zip, but was never an actual correct API implementation. It is still returned by GetFunction, but ASF does not let this request through anyway, so there is no real point in keeping the code in.\r\nIn the new Lambda provider, this will be replaced by a presigned url.\r\n\r\nFixes #6567 .",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 5,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2022-08-04T08:49:23Z",
        "closed_at": "2022-08-04T12:23:17Z",
        "merged_at": "2022-08-04T12:23:17Z",
        "body": "Previously, resetting store bundles would leave empty store instances.\r\n\r\nBy using `clear()`, it leaves a cleaner states for persistence/cloudpods.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-08-04T08:14:01Z",
        "closed_at": "2022-08-04T09:35:01Z",
        "merged_at": "2022-08-04T09:35:01Z",
        "body": "Pin `flask` to 2.1.3 for compatibility with the `werkzeug` version pin we recently introduced. Addresses #6587",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 322,
        "deletions": 77,
        "changed_files": 3,
        "created_at": "2022-08-03T20:24:39Z",
        "closed_at": "2022-08-04T11:46:01Z",
        "merged_at": "2022-08-04T11:46:00Z",
        "body": "This PR re-works the way message delaying works in the provider, and enables the calculation of `ApproximateNumberOfMessagesDelayed`\r\n\r\nPreviously we were simply spawning a timer for the delayed message that would put the message in the queue after the delay. I've introduced a structure that works analogously to the `inflight` messages for a queue, and re-purposed the `InflightUpdateWorker` to also queue all the delayed messages. I used the `Scheduler` utility for that to create a fixed-rate schedule for updating queues, that way the schedule doesn't drift if there are many messages in the inflight or delayed set and it takes longer to queue them\r\n\r\n- [x] currently based on #6573 to avoid conflicts, and can be re-based once that is merged.\r\n- fixes #6416",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 397,
        "deletions": 236,
        "changed_files": 3,
        "created_at": "2022-08-03T13:43:10Z",
        "closed_at": "2022-08-04T09:10:55Z",
        "merged_at": "2022-08-04T09:10:55Z",
        "body": "This is a first PR to extend with complete snapshot validation of all AWS validated tests.\r\n31/43 tests are AWS validated (1 more coming with snapshots)\r\n10 are only Localstack (related to SMS and http endpoints)\r\n1 is skipped\r\n\r\nSome validation was added, especially concerning FIFO topics. The behaviour is not implemented (it differs a bit from SQS, and is managed at the topic level), there is no feature request for it yet. \r\n\r\nAdded a `call_moto` call to the `unsubscribe` operation, it would make Moto not synced concerning subscriptions with our own backend",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 72,
        "deletions": 9,
        "changed_files": 4,
        "created_at": "2022-08-03T12:32:24Z",
        "closed_at": "2022-08-03T22:18:00Z",
        "merged_at": "2022-08-03T22:18:00Z",
        "body": "Enhance parity for basic CloudFormation stack attributes. The starting point for this change was issue #3300 , which reported that the stack description is stored incorrectly (with invalid escaping of special characters). This has been fixed in the meantime and is no longer an issue with the ASF request parser. \ud83d\udc4d \r\n\r\nAdding a snapshot test for this functionality revealed a few more gaps in the basic attributes we're storing for CloudFormation stack attributes. These gaps are addressed in the PR, and matched against the snapshot result accordingly.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 176,
        "deletions": 85,
        "changed_files": 10,
        "created_at": "2022-08-03T12:31:52Z",
        "closed_at": "2022-08-03T14:49:01Z",
        "merged_at": "2022-08-03T14:49:01Z",
        "body": "This PR addresses an issue with the error serialization mentioned in #6571.\r\n\r\nAfter some digging, it turns out that there are several XML-services (`rest-xml`, `query`) which define default members in their error shapes (f.e. cloudfront, route53, cloudwatch, iam,...). These default members are _not_ added to the root node, while non-default members are.\r\n\r\nFor JSON-services (`json`, `rest-json`), there is no sub-element for the error metadata. All members are added to the root node. Here, defined default members in the spec can modify the casing (f.e. `Message` in DynamoDB's `TransactionCanceledException`).\r\n\r\n\r\nThe following changes are contained in this PR:\r\n- Enhance the error serialization for error shapes which define additional members which \"conflict\" with the default error fields (like \"message\" or \"code\").\r\n- Remove the member \"type\" from the special handling (this was a wrong assumption in the past, it doesn't correlate with the code, only `__type` for json protocols do). F.e. in Lambda, the \"Type\" field on exceptions is \"SOAP\"-like and contains the value \"User\" to indicate that it's a user-triggered error.\r\n- Fix the scaffold to also generate an additional \"Type\" field (f.e. for Lambda).\r\n- Regenerate the APIs (since the scaffold was modified).\r\n- Clean up some tests and added some more.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-08-03T11:03:22Z",
        "closed_at": "2022-08-03T14:59:16Z",
        "merged_at": "2022-08-03T14:59:16Z",
        "body": "This PR refactors the constructor of `LogsAwsApiListener` for easier subclassing (in pro). \r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 8,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2022-08-03T10:53:49Z",
        "closed_at": "2022-08-03T12:27:45Z",
        "merged_at": "2022-08-03T12:27:45Z",
        "body": "Add a small unit test for Velocity `map.put` function inside `$util.qr(..)` (quiet return). Addresses #5988",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 201,
        "deletions": 40,
        "changed_files": 9,
        "created_at": "2022-08-03T09:30:52Z",
        "closed_at": "2022-08-04T16:11:44Z",
        "merged_at": "2022-08-04T16:11:44Z",
        "body": "* return stream name for CFn Firehose stream Ref - addresses #6570\r\n* add snapshot test for Firehose CFn test, move test to separate module inside `cloudformation` test package\r\n* introduce `max_wait` parameter for stacks that take a long time to deploy in AWS (>60 secs)\r\n* small fix around logic for `SNAPSHOT_UPDATE` (currently snapshots were not recorded if this env variable is not set)",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 14,
        "deletions": 5,
        "changed_files": 4,
        "created_at": "2022-08-03T09:19:08Z",
        "closed_at": "2022-08-04T14:08:59Z",
        "merged_at": "2022-08-04T14:08:59Z",
        "body": "When trying out a PRO feature in community, the error message says that the feature is not yet implemented. This can lead to some confusion, as this feature is indeed implemented, but only in PRO. \r\n\r\nTo avoid confusion we can either:\r\n\r\n1. Implement something to check if a feature is implemented in PRO (which would introduce a dependency from community to PRO) and change the error message accordingly\r\n2. or just change the error message to \"API action 'foo' for service 'bar' not yet implemented or pro feature - check https://docs.localstack.cloud/aws/feature-coverage/ for more information.\"\r\n\r\nThis PR provides option 2. ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 0,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-08-02T21:55:16Z",
        "closed_at": "2022-08-03T13:23:38Z",
        "merged_at": "2022-08-03T13:23:38Z",
        "body": "This PR just marks a test that @baermat wrote for #4287 as working, which it should with the new provider.\r\n\r\n- Fixes #4287",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 3,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2022-08-02T13:56:17Z",
        "closed_at": "2022-08-03T07:38:29Z",
        "merged_at": null,
        "body": "This PR contains a small fix which allows the Athena CloudFormation models to access the `NamedQueryId` (which is contained in the create response).",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 249,
        "deletions": 24,
        "changed_files": 7,
        "created_at": "2022-08-02T11:17:12Z",
        "closed_at": "2022-08-03T12:36:46Z",
        "merged_at": "2022-08-03T12:36:46Z",
        "body": "## Problem\r\nOn some machines, lambda extraction might take significantly longer than 25s. Lambdas executed afterwards end up in an inconsistent state, where parts of the lambda code might be missing.\r\nNevertheless these functions have an \"Active\" state, which should not be the case.\r\n\r\n## Solution\r\nThe lambda states will - with this PR - correctly represent current internal state. During extraction, they will therefore be marked as \"Pending\", if the extraction fails for some reason, it will be set to \"Failed\", and once it completes, it will be set to \"Active\". A lambda not in \"Active\" state cannot be executed. This is on par with AWS behavior. For smaller lambdas, the \"Active\" state should be reached within a couple milliseconds. Problematic will be the \"bigger\" lambdas on macos bind mounts (see #6567), where the \"Pending\" state could be present for multiple minutes.\r\n\r\n## Changes in this PR\r\n* Function state will be now \"Pending\" as long as the function is being initialized, and \"Active\" afterwards. If the initialization fails, it will be \"Failed\"\r\n* invoke calls to functions not \"Active\" will fail. This is also identical to AWS behavior, might lead to confusion for some users though.\r\n* The function code is now deleted from memory after it is dumped on disk as zip, not after the invoke function returns\r\n* The check of lambda function archive sizes was implemented wrong, leading to a lot of retries. we now return the correct exceptions, which leads to immediate failure instead of retries (returned 500s before).\r\n\r\n## Other attempts\r\n* removing create_function waiting time is not practicable, as some validation of the zip file only takes place in the init code, so running it completely async will not report back the validation errors correctly (like check for unzip size, check if the package is indeed a zipfile etc.).\r\n\r\nFixes #6566",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 90,
        "deletions": 7,
        "changed_files": 2,
        "created_at": "2022-08-01T21:35:55Z",
        "closed_at": "2022-08-04T11:47:12Z",
        "merged_at": "2022-08-04T11:47:12Z",
        "body": "This PR corrects the behavior of `change_visibility_timeout`, which previously had not the correct effect on `message.is_visible`, which we are calculating like this:\r\n```python\r\nif time.time() >= (self.last_received + self.visibility_timeout):\r\n    return True\r\n```\r\n\r\nSo clearly updating only the `visibility_timeout` had no effect. We had to reset the entire visibility timer as defined by the AWS docs linked in the original issue.\r\n\r\n**update**: i refactored the logic to use a dedicated `visibility_deadline` value that is calculated differently depending on whether the visibility timeout is updated or the message is received.\r\n\r\n- Fixes #6454 \r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 223,
        "deletions": 83,
        "changed_files": 4,
        "created_at": "2022-08-01T19:22:01Z",
        "closed_at": "2022-08-02T09:36:36Z",
        "merged_at": "2022-08-02T09:36:36Z",
        "body": "This PR adds tests for updating queue attributes, and server-side encryption attributes. I also removed a test that was not working against AWS and redundant, since it is covered implicitly by the QueryAPI tests. I also ran the entire test suite against AWS and marked the ones that worked.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 102,
        "deletions": 28,
        "changed_files": 3,
        "created_at": "2022-08-01T15:36:55Z",
        "closed_at": "2022-08-02T08:49:07Z",
        "merged_at": "2022-08-02T08:49:07Z",
        "body": "Fix a small bug where we would allow duplicates when tagging a SNS resource.\r\nI stumbled onto another issue: when snapshot-matching the Exception raised by duplicated key, a `message` field would be added to the body of the response with Localstack, which is not present in AWS.\r\nExample: \r\n```diff\r\n      \"duplicate-key-error\": {\r\n        \"Error\": {\r\n          \"Type\": \"Sender\",\r\n          \"Code\": \"InvalidParameter\",\r\n          \"Message\": \"Invalid parameter: Duplicated keys are not allowed.\"\r\n        },\r\n+       \"message\": \"Invalid parameter: Duplicated keys are not allowed.\"\r\n        \"ResponseMetadata\": {\r\n          \"HTTPHeaders\": {},\r\n          \"HTTPStatusCode\": 400\r\n        }\r\n      }\r\n```\r\nThe `message` field is not present in the recorded message. \r\ncc\\ @alexrashed @thrau \r\n\r\nSneaked a small change in a test concerning a fake ARN which would raise the wrong Exception in AWS. Validated more tests against AWS as well. ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 55,
        "deletions": 15,
        "changed_files": 4,
        "created_at": "2022-08-01T14:47:30Z",
        "closed_at": "2022-08-02T07:50:56Z",
        "merged_at": "2022-08-02T07:50:56Z",
        "body": "* adds snapshot test (was discussed in detail during the workshop, including different approaches how to solve)\r\n* updated comments for `test_basic_invoke` (also discussed during the workshop)\r\n* removes `snapshot` fixture from a test that does not use it\r\n\r\n",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-08-01T08:11:05Z",
        "closed_at": "2022-08-01T09:13:24Z",
        "merged_at": null,
        "body": "With #6514, the werkzeug version was pinned to avoid an update to the newest release (since it caused issues with the routing).\r\nIt seems like these issues might have been fixed. A new version of Werkzeug (2.2.1) has been released already: https://github.com/pallets/werkzeug/releases/tag/2.2.1\r\n\r\nThis PR removes the pin again (and again just demands a minimum version).",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 153,
        "deletions": 91,
        "changed_files": 2,
        "created_at": "2022-08-01T05:38:02Z",
        "closed_at": "2022-08-02T08:54:02Z",
        "merged_at": "2022-08-02T08:54:02Z",
        "body": "This PR marks the tests in `test_ssm.py` as `aws_validated`, and adds minor refactorings to achieve parity with the logic in real AWS. Addresses https://github.com/localstack/localstack/issues/6551 ",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 57,
        "deletions": 0,
        "changed_files": 4,
        "created_at": "2022-08-01T05:28:22Z",
        "closed_at": "2022-08-01T08:05:53Z",
        "merged_at": null,
        "body": "# \ud83d\ude80 ASF Update Report \ud83d\ude80\nThis PR has been automatically generated to update the generated API stubs for our ASF services.\nIt uses the latest code-generator from the _master_ branch ([scaffold.py](https://github.com/localstack/localstack/blob/master/localstack/aws/scaffold.py)) and the latest _published_ version of [botocore](https://github.com/boto/botocore) to re-generate all API stubs which are already present in the `localstack.aws.api` module of the _master_ branch.\n\n## \ud83d\udd04 Updated Services\nThis PR updates the following services:\n- config\n- ec2\n- es\n- opensearch\n\n## \ud83d\udc77\ud83c\udffd Handle this PR\nThe following options describe how to interact with this PR / the auto-update:\n\n\u2714\ufe0f **Accept Changes**\nIf the changes are satisfying, just squash-merge the PR and delete the source branch.\n\n\ud83d\udeab **Ignore Changes**\nIf you want to ignore the changes in this PR, just close the PR and *do not delete* the source branch. The PR will not be opened and a new PR will not be created for as long as the generated code does not change (or the branch is deleted). As soon as there are new changes, a new PR will be created.\n\n\u270f\ufe0f **Adapt Changes**\n*Don't do this.* The APIs are auto-generated. If you decide that the APIs should look different, you have to change the code-generation.\n\n\u23f8\ufe0f **Pause Updates**\nRemove the cron-schedule trigger of the GitHub Action workflow which creates these PRs. The action can then still be triggered manually, but it will not be executed automatically.",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2022-08-01T00:20:49Z",
        "closed_at": "2022-08-01T06:32:07Z",
        "merged_at": "2022-08-01T06:32:07Z",
        "body": "[![Mend Renovate](https://app.renovatebot.com/images/banner.svg)](https://renovatebot.com)\n\nThis PR contains the following updates:\n\n| Package | Type | Update | Change |\n|---|---|---|---|\n| python | final | digest | `1839c4f` -> `e7fce98` |\n| python | stage | digest | `1839c4f` -> `e7fce98` |\n\n---\n\n### Configuration\n\n\ud83d\udcc5 **Schedule**: Branch creation - \"before 3am on Monday\" (UTC), Automerge - At any time (no schedule defined).\n\n\ud83d\udea6 **Automerge**: Disabled by config. Please merge this manually once you are satisfied.\n\n\u267b **Rebasing**: Whenever PR becomes conflicted, or you tick the rebase/retry checkbox.\n\n\ud83d\udd15 **Ignore**: Close this PR and you won't be reminded about these updates again.\n\n---\n\n - [ ] <!-- rebase-check -->If you want to rebase/retry this PR, click this checkbox.\n\n---\n\nThis PR has been generated by [Mend Renovate](https://www.mend.io/free-developer-tools/renovate/). View repository job log [here](https://app.renovatebot.com/dashboard#github/localstack/localstack).\n<!--renovate-debug:eyJjcmVhdGVkSW5WZXIiOiIzMi4xMjcuNCIsInVwZGF0ZWRJblZlciI6IjMyLjEyNy40In0=-->\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 4,
        "changed_files": 1,
        "created_at": "2022-07-31T22:51:32Z",
        "closed_at": "2022-08-01T00:05:57Z",
        "merged_at": "2022-08-01T00:05:57Z",
        "body": "Remove unnecessary region lookup",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 14,
        "deletions": 7,
        "changed_files": 1,
        "created_at": "2022-07-31T12:28:48Z",
        "closed_at": "2022-08-01T15:49:48Z",
        "merged_at": "2022-08-01T15:49:48Z",
        "body": "This PR parallelizes calls to `generate_code` when using the `upgrade` command of the scaffold script. This significantly speeds up the process of upgrading, which otherwise takes forever on your local machine. The default number of processes for `Pool` is `os.cpu_count()`.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 14,
        "deletions": 0,
        "changed_files": 3,
        "created_at": "2022-07-30T23:22:18Z",
        "closed_at": "2022-08-01T15:51:18Z",
        "merged_at": "2022-08-01T15:51:18Z",
        "body": "This PR adds a workaround as described in #6557 for the performance problem first reported in #6445 \r\n\r\nBasically we are turning off keep-alive by default, which is slowing down clients due to hypercorn/h11 and only doing it if clients explicitly ask for it. This is breaking a `SHOULD` statement in the RFC.\r\nI've created an [upstream issue report](https://gitlab.com/pgjones/hypercorn/-/issues/241), but not sure that will be fixed any time soon.\r\n\r\n- fixes #6445\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 296,
        "deletions": 28,
        "changed_files": 4,
        "created_at": "2022-07-29T19:47:57Z",
        "closed_at": "2022-08-27T14:48:55Z",
        "merged_at": "2022-08-27T14:48:55Z",
        "body": "This PR addresses issue #5994. With these changes, the S3 Notifications can be send to the EventBridgeService.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 62,
        "deletions": 49,
        "changed_files": 3,
        "created_at": "2022-07-29T16:51:23Z",
        "closed_at": "2022-08-04T15:48:25Z",
        "merged_at": "2022-08-04T15:48:25Z",
        "body": "It should depend from https://github.com/localstack/localstack-ext/pull/835 and goes on pair with https://github.com/localstack/localstack-ext/pull/892.\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 343,
        "deletions": 63,
        "changed_files": 16,
        "created_at": "2022-07-29T14:57:26Z",
        "closed_at": "2022-08-03T17:49:41Z",
        "merged_at": "2022-08-03T17:49:41Z",
        "body": "This PR updates ASF to correctly handle smithy [streaming](https://awslabs.github.io/smithy/1.0/spec/core/stream-traits.html) types. This is one of the last big changes to ASF, and will unblock the S3 migration.\r\n\r\nThe changes include:\r\n* updated scaffold to generate streaming types (see details)\r\n* re-generated community APIs\r\n* updated serializer and parser to deal with streaming types\r\n* added several tests on different layers\r\n* update lambda and API gateway providers /cc @dfangl @dominikschubert\r\n* changed the `MetricHandler` a bit (see details below) /cc @steffyP \r\n\r\n## some details on the API\r\n\r\nAfter several discussions with @alexrashed, we decided *not* to make the service-level shapes the streaming types, but to only type hint the members of request/response objects.\r\n\r\n* For _Requests_, which are set by the server, we specify `typing.IO[bytes]`, which will essentially be set to `werkzeug.Request.stream` by the parser. This will require the most changes, as we need to update all implementing services that expect `payload` to be `bytes`, to use `payload.read()` which will be a stream.\r\n* For _Responses_, which are set by the developer, we specify `Union[bytes, IO[bytes], Iterable[bytes]`, making it possible to deal with the three cases outlined in #6527. These three types are also supported by the `werkzeug.Response` object, so nothing needs to be done in the serializer, and no changes are necessary im services.\r\n\r\n\r\n## metric handler change\r\n\r\nwith the new streaming trait, `ServiceRequest` dictionaries can contain file-like or other IO objects that cannot be serialized. in `record_parsed_request` we were copying the entire request using deep copy, and that was now [raising errors](https://app.circleci.com/pipelines/github/localstack/localstack/7953/workflows/77c9cbb0-cef2-4ca6-aa1a-f36a8579077d/jobs/49159). on certain requests.\r\n\r\nit seems we weren't really using the entire request, but just collecting the names of the parameters that were in the request, so i simplified the logic to just collect the parameter names rather than the entire request, which is now a harmless call to `list(request.keys())`.\r\n\r\nif we at some point need the entire request in the metric collection, we'll need to revisit this change.\r\n\r\n## limitations\r\n\r\nhttp request IO is still a problem. when you consume an incoming request payload, e.g., in s3 `PutObject`, using `body.read()`, you are consuming the stream underlying the http request, which is shared with werkzeug's Request object. that means, if you at a later point want to call `request.data` on the request object, you'll get an empty byte buffer back. although this is expected and correct behavior, it's also very inconvenient and i can see a lot of hours going into debugging of weird \"why is my request empty\" issues.\r\n\r\nsince quite a bit of the code base still builds on the assumption of always having access to the raw http request data, we may need to make some compromises with respect to performance and memory usage. ideally, we never read from the stream until we need it, because there's always a chance that we are going to proxy large payloads to some backend (like invoking a lambda), in which case you don't want to load everything into memory, keep it there, and then flush it to the outgoing socket again. but if you want reliable access to `request.data`, even though we've previously run `body.read()`, then we're going to have to store the stream data somewhere, and make it seekable, e.g., through `TemporarySpooledFile`s, which would solve the problem of loading large payloads into memory (if they exceed a certain size the file is rolled to disk, otherwise it is kept in memory), but obviously still has the overhead when proxying. :shrug: \r\n\r\nfixes #6527 ",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 64,
        "deletions": 119,
        "changed_files": 4,
        "created_at": "2022-07-29T12:04:39Z",
        "closed_at": "2022-07-29T13:15:22Z",
        "merged_at": "2022-07-29T13:15:22Z",
        "body": "This PR contains the following changes:\r\n- 08f2ac0ddb9fe231d3e1f47fc1f0a5109e5b6c08 Removes unused methods in the parser (obsolete with #5827) and removes the \"experimental\" warning in the docs of the parser.\r\n- ab7bb394b1b67b40982313b6d53057cef2ffc571:\r\n  - Removes the \"experimental\" warning in the docs on the serializer.\r\n  - Extracts the S3-specific handling to a specific subclass (since we already have service specific serializers).\r\n  - Fixes the structure of the S3 error responses (addresses parts of #6544).\r\n  - Adds a TODO to implement a feature to serialize non-modeled error members (f.e. `NoSuchBucket#BucketName` is not specified but sent by AWS and parsed by botocore).",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 151,
        "deletions": 5,
        "changed_files": 4,
        "created_at": "2022-07-29T10:52:31Z",
        "closed_at": "2022-08-04T12:59:09Z",
        "merged_at": "2022-08-04T12:59:09Z",
        "body": "Related to: https://github.com/localstack/localstack/issues/6530\r\n\r\n- Updates the `SecretsManager`'s `CreateSecret` routine to raise an `InvalidRequestException` whenever a secret sharing its `SecretId` with another secret staged for deletion is received.\r\n- Updates the arn tagging strategy to ensure creation of new secrets with past secret ids leads to new generation of new arn parts\r\nAchieved by:\r\n- carried out parity checks against AWS about this scenario\r\n- added a patch to moto's SecretsManager backend, specifically to the `create_secret` function, now if condition is met this raises an `InvalidRequestException` with AWS message `AWS_INVALID_REQUEST_MESSAGE_CREATE_WITH_SCHEDULED_DELETION`\r\n- added snapshot integration tests for the following scenario `test_exp_raised_on_creation_of_secret_scheduled_for_deletion` and one for creation of secret after deletion (staging completed) `test_can_recreate_delete_secret`.\r\n\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 14,
        "deletions": 3,
        "changed_files": 3,
        "created_at": "2022-07-29T07:03:30Z",
        "closed_at": "2022-07-29T09:33:58Z",
        "merged_at": "2022-07-29T09:33:58Z",
        "body": "This PR fixes a small bug in Kinesis, where a request to `CreateStream` would fail if the `shardCount` is not set (which should be optional).\r\nIt actually only contains an update of kinesis-mock to the new release (containing https://github.com/etspaceman/kinesis-mock/pull/339) and an integration test.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 444,
        "deletions": 3,
        "changed_files": 4,
        "created_at": "2022-07-28T20:28:29Z",
        "closed_at": "2022-07-30T08:09:57Z",
        "merged_at": "2022-07-30T08:09:57Z",
        "body": "Migrate tests from Pro version to community.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 25,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2022-07-28T18:57:40Z",
        "closed_at": "2022-08-04T21:05:32Z",
        "merged_at": "2022-08-04T21:05:32Z",
        "body": "TF_Tests:\r\n- Added subnet test cases",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 46,
        "deletions": 7,
        "changed_files": 2,
        "created_at": "2022-07-28T16:39:13Z",
        "closed_at": "2023-01-25T08:17:24Z",
        "merged_at": null,
        "body": "We can use PaginatedList without explicit token_generator - by using indices in the list as tokens.\r\n\r\n- This should make things a bit faster, as we won't have to loop over items to find the one used as a token, instead would just directly jump to the needed index.\r\n- Would simplify code a bit, as we would be able to use the class without coming up with generators.\r\n- Should not be worse than what we have with generators - we do not preserve lists between calls for different pages, we do not even sort lists. So if contents of a list change between calls for different pages, we would not track that and just start with the item acting like a token. Thus either missing some elements or outputting same elements for the second time. Or encountering a failure if the token element vanishes.\r\n\r\nIf we decide that we want to, we can easily obfuscate this index-as-a-token approach. E.g., by generating some random string and inserting the index at a specific position in that string instead of using the index as it is.\r\n",
        "comments": 3
    },
    {
        "merged": false,
        "additions": 5162,
        "deletions": 1053,
        "changed_files": 96,
        "created_at": "2022-07-28T14:13:02Z",
        "closed_at": "2022-08-06T22:41:31Z",
        "merged_at": null,
        "body": "Commandeer makes calls to LocalStack with app://. as the CORS header. The workaround until now is to add this in the EXTRA_CORS_ALLOW_ORIGINS environment variable when starting up LocalStack as documented here https://docs.getcommandeer.com/docs/LocalStack/localstack-cors-issues/.\r\n\r\nBy adding this directly into LocalStack, users of Commandeer will not have to restart their already running LocalStack instance, or specify this when starting up a new instance.",
        "comments": 7
    },
    {
        "merged": false,
        "additions": 8,
        "deletions": 3,
        "changed_files": 1,
        "created_at": "2022-07-28T08:17:52Z",
        "closed_at": "2022-07-28T09:27:03Z",
        "merged_at": null,
        "body": "With #6496, a Jar upgrade mechanism for DynamoDB has been introduced to mitigate the usage of vulnerable dependencies.\r\nThis upgrade mechanism is executed on each start of LocalStack.\r\nThis PR changes the upgrade behavior a bit, such that the upgrade mechanism is suppressed if the current jar file already has the same name and version than the one which would be downloaded. This way, the upgrade (and therefore the Jar download) is not performed on every start, but only once.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 48,
        "deletions": 4,
        "changed_files": 4,
        "created_at": "2022-07-28T07:47:45Z",
        "closed_at": "2022-07-28T10:19:25Z",
        "merged_at": "2022-07-28T10:19:25Z",
        "body": "The EC2 protocol is quite similar to the query protocol, but one difference is that the root element of error responses is a `Response` node:\r\n```xml\r\n<Response>\r\n  <Errors>\r\n    <Error>\r\n      <Code>InvalidInstanceID.Malformed</Code>\r\n      <Message>Invalid id: \"1343124\"</Message>\r\n    </Error>\r\n  </Errors>\r\n  <RequestID>12345</RequestID>\r\n</Response>\r\n```\r\nThis PR fixes a small issue concerning the EC2 protocol error serialization, where the `Errors` node was the root node.\r\nIn addition, it fixes a small issue with our client where the `Error` member of a parsed botocore response would be added to an ASF `ServiceException`.\r\n\r\nFixes #6528.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 9,
        "deletions": 5,
        "changed_files": 1,
        "created_at": "2022-07-27T20:35:34Z",
        "closed_at": "2022-07-28T09:29:14Z",
        "merged_at": "2022-07-28T09:29:14Z",
        "body": "Skip upgrading JAR file if local version already matches.\r\n\r\nIn #6496 we introduced changes to upgrade some JAR files to the latest version (to fix security vulnerabilities). However, we're now re-downloading the JAR files on startup, even if the correct version already exists locally. With this PR, we check the local version, and then only selectively download libs if needed.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2022-07-27T13:39:06Z",
        "closed_at": "2022-07-28T12:10:26Z",
        "merged_at": "2022-07-28T12:10:26Z",
        "body": "A small change to log the time of SES message dispatch request.\r\n\r\nThis will be displayed on SES resource manager.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2022-07-27T08:47:25Z",
        "closed_at": "2022-07-29T09:35:49Z",
        "merged_at": "2022-07-29T09:35:48Z",
        "body": "fixes #6495",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-07-27T08:42:39Z",
        "closed_at": "2022-07-27T13:07:40Z",
        "merged_at": "2022-07-27T13:07:40Z",
        "body": "bump moto-ext version\r\n",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 7,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2022-07-27T07:55:13Z",
        "closed_at": "2022-07-28T15:08:33Z",
        "merged_at": null,
        "body": "With #6302, a new file system hierarchy has been implemented.\r\nUntil now, the new config did not take the following environment variables into account:\r\n- `CONTAINER_VAR_LIBS_FOLDER`\r\n- `CONTAINER_CACHE_FOLDER`\r\n\r\nThese variables are used for configurations where the `libs` and the `cache` folder are pre-populated in the Docker image (and should therefore not be overwritten by a volume mount).\r\nWhile it is planned to deprecate these variables and replace it with a fallback-mechanism and selective targets for LPM, we still need them for now.\r\nThis PR simply adds a few lines to `config.py#for_container` to take these config variables into account.",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 132,
        "deletions": 30,
        "changed_files": 11,
        "created_at": "2022-07-26T20:46:37Z",
        "closed_at": "2022-07-27T12:48:28Z",
        "merged_at": "2022-07-27T12:48:28Z",
        "body": "Fix OpenAPI spec imports of REST APIs with base paths.\r\n\r\nThis surfaced while debugging a user issue, using a SAM template - if `basePath: /base` is defined in the template, then we were previously incorrectly performing a lookup of the absolute path within `paths`, whereas we should perform lookup with the relative path (stripping off the `basePath` prefix).",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2022-07-26T16:31:47Z",
        "closed_at": "2022-07-26T22:36:06Z",
        "merged_at": "2022-07-26T22:36:06Z",
        "body": "Currently, due to the force deletion of all registered log handlers, we take the possibility of pytest to capture log entries. This behavior was introduced with #6424 .\r\n\r\nDue to the -s selector in most circleci tests, this does not affect the community tests as much as the pro tests.\r\n\r\nThis PR fixes this behavior and adjusts the test logs to (almost) match our usual log.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 50,
        "deletions": 28,
        "changed_files": 6,
        "created_at": "2022-07-26T16:08:23Z",
        "closed_at": "2022-07-28T14:56:37Z",
        "merged_at": "2022-07-28T14:56:37Z",
        "body": "This PR enables snapshot-verify by default:\r\n\r\n- tests that use the `snapshot` fixture will be verified\r\n- these features were already available:\r\n    - test cases can be skipped by using the marker `pytest.mark.skip_snapshot_verify`\r\n    - test cases can be marked to skip certain json-pathes only, by using the `paths` argument, e.g. `pytest.mark.skip_snapshot_verify(paths=[\"$..EncodingType\"])`\r\n- added option to skip snapshot verification entirely by setting parameter `--snapshot-skip-all`\r\n- fixed failing snapshot tests\r\n- added flag `SNAPSHOT_DEBUG` to enable debug logs for transformation steps",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 84,
        "deletions": 61,
        "changed_files": 9,
        "created_at": "2022-07-26T11:29:38Z",
        "closed_at": "2022-08-05T09:29:42Z",
        "merged_at": "2022-08-05T09:29:41Z",
        "body": "Attempt to bump moto-ext to latest upstream changes.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 28,
        "deletions": 2,
        "changed_files": 3,
        "created_at": "2022-07-25T08:03:15Z",
        "closed_at": "2022-07-25T09:39:21Z",
        "merged_at": "2022-07-25T09:39:21Z",
        "body": "This PR addresses an issue with Kinesis when performing `GetRecords` on empty streams.\r\nIt does so by checking if the content from `kinesis-mock` is empty, and if so, forward a string representation of an empty JSON.\r\n\r\nFixes https://github.com/localstack/localstack/issues/6504",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 33,
        "deletions": 6,
        "changed_files": 3,
        "created_at": "2022-07-25T05:14:05Z",
        "closed_at": "2022-07-25T09:36:26Z",
        "merged_at": "2022-07-25T09:36:26Z",
        "body": "# \ud83d\ude80 ASF Update Report \ud83d\ude80\nThis PR has been automatically generated to update the generated API stubs for our ASF services.\nIt uses the latest code-generator from the _master_ branch ([scaffold.py](https://github.com/localstack/localstack/blob/master/localstack/aws/scaffold.py)) and the latest _published_ version of [botocore](https://github.com/boto/botocore) to re-generate all API stubs which are already present in the `localstack.aws.api` module of the _master_ branch.\n\n## \ud83d\udd04 Updated Services\nThis PR updates the following services:\n- cloudwatch\n- ec2\n- kms\n\n## \ud83d\udc77\ud83c\udffd Handle this PR\nThe following options describe how to interact with this PR / the auto-update:\n\n\u2714\ufe0f **Accept Changes**\nIf the changes are satisfying, just squash-merge the PR and delete the source branch.\n\n\ud83d\udeab **Ignore Changes**\nIf you want to ignore the changes in this PR, just close the PR and *do not delete* the source branch. The PR will not be opened and a new PR will not be created for as long as the generated code does not change (or the branch is deleted). As soon as there are new changes, a new PR will be created.\n\n\u270f\ufe0f **Adapt Changes**\n*Don't do this.* The APIs are auto-generated. If you decide that the APIs should look different, you have to change the code-generation.\n\n\u23f8\ufe0f **Pause Updates**\nRemove the cron-schedule trigger of the GitHub Action workflow which creates these PRs. The action can then still be triggered manually, but it will not be executed automatically.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 5,
        "changed_files": 3,
        "created_at": "2022-07-24T15:20:31Z",
        "closed_at": "2022-07-24T20:24:08Z",
        "merged_at": "2022-07-24T20:24:08Z",
        "body": "Pin `quart` version to `0.17` to fix recent change in request context stack.\r\n\r\nThe `_*_ctx_stack` globals have been removed in `0.18` - see this commit for rationale/background: https://github.com/pallets/quart/commit/b2b614b336d99071a05a8525d4d0e18b9a1d66ec\r\n\r\nSeems easy enough to pin the version for now, but we should also keep an eye on developments in flask (looks like `_request_ctx_stack` will be [removed there soon](https://github.com/pallets/flask/blob/cbebdae698272eeea2739988ccce54b1f14a1a67/src/flask/__init__.py#L64-L68) as well).\r\n\r\n---\r\nUpdate: Also pinning werkzeug to version `2.1.2` for now, as the latest released version `2.2.0` seems to have changed the logic of URL Map routing - our routes with `strict_slashes=False` in the Lambda API are now failing when sending a request with a trailing slash in the path.\r\n\r\n---\r\n\r\nAlso sneaking in a small change to remove duplicate constant `MAVEN_BASE_URL`.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 326,
        "deletions": 292,
        "changed_files": 5,
        "created_at": "2022-07-24T14:14:15Z",
        "closed_at": "2022-08-24T21:20:27Z",
        "merged_at": "2022-08-24T21:20:27Z",
        "body": "The support for stepfunctions integration currently is only supported for REST APIs. This PR wraps the logic related to invoking stepfunctions into a class that can be re-used by HTTP and Websockets API.\r\n\r\nAWS` Services are also invoked using [integration subtypes](https://docs.aws.amazon.com/apigateway/latest/developerguide/http-api-develop-integrations-aws-services-reference.html). This PR enumerates those subtypes and will dispatch actions to the existing integrations.\r\n\r\n ",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-07-23T23:38:41Z",
        "closed_at": "2022-07-25T15:53:48Z",
        "merged_at": "2022-07-25T15:53:48Z",
        "body": "fixes #6503 ",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-07-23T21:18:59Z",
        "closed_at": "2022-07-24T20:42:46Z",
        "merged_at": "2022-07-24T20:42:46Z",
        "body": "Second subordinate clause was missing a comma delineating its trailing edge; this American localization is popular but not correct.\r\n\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-07-23T15:53:42Z",
        "closed_at": "2022-07-23T18:36:17Z",
        "merged_at": "2022-07-23T18:36:17Z",
        "body": "fixes #6428\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 182,
        "deletions": 393,
        "changed_files": 14,
        "created_at": "2022-07-22T14:08:33Z",
        "closed_at": "2022-07-23T10:56:46Z",
        "merged_at": "2022-07-23T10:56:46Z",
        "body": "Migrate to amazon_kclpy version 2, remove our obsolete custom patches. Related to the changes in https://github.com/localstack/localstack/pull/6496 , the main motivation for this change is to upgrade the JAR file dependencies in our Docker image, to avoid the surface area for CVE vulnerabilities.\r\n\r\nSummary of changes:\r\n* remove custom Java classes in `localstack/utils/kinesis/java/software/amazon/kinesis/common/...`\r\n* have `KinesisProcessor` inherit from the new v2 `processor.RecordProcessorBase` (instead of v1 `kcl.RecordProcessorBase`)\r\n* Use the default `software.amazon.kinesis.multilang.MultiLangDaemon` class to start up the kinesis client process, instead of the now obsolete `cloud.localstack.KinesisStarter`\r\n* minor refactorings - use `threading.Event` instead of `Queue` for synchronization, introduce a few `f-strings`, etc.\r\n* migrate `tests/integration/test_integration.py` from unittest to pytest",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 47,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2022-07-22T11:03:26Z",
        "closed_at": "2022-08-09T15:31:47Z",
        "merged_at": "2022-08-09T15:31:47Z",
        "body": "KMS tests change:\r\n- Adding a fixture for alias creation / cleanup.\r\n- Adding a test to check that encrypt accepts all key representations: key ID, key ARN, alias, alias ARN.\r\n\r\nAddresses https://github.com/localstack/localstack/issues/6471\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 156,
        "deletions": 46,
        "changed_files": 2,
        "created_at": "2022-07-21T20:38:47Z",
        "closed_at": "2022-08-17T23:21:42Z",
        "merged_at": "2022-08-17T23:21:42Z",
        "body": "This PR adds a test to validate issue #5554. Also it contains a re-factorization of the previous test and the AWS validation.",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 51,
        "deletions": 12,
        "changed_files": 4,
        "created_at": "2022-07-21T16:12:36Z",
        "closed_at": "2022-07-24T06:43:39Z",
        "merged_at": "2022-07-24T06:43:39Z",
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 79,
        "deletions": 30,
        "changed_files": 3,
        "created_at": "2022-07-21T15:36:11Z",
        "closed_at": "2022-07-23T10:17:20Z",
        "merged_at": "2022-07-23T10:17:20Z",
        "body": "Upgrade JAR file versions in the Docker image to resolve some recent security vulnerabilities. Security scan results are taken from aquascan.com, which was used to analyze the Docker image.\r\n\r\nSummary of changes:\r\n* Introduce `update_jar_manifest(..)` util function that can be used to update the content of a MANIFEST file within a JAR archive (re-using the existing code we already had, but making it a bit more reusable)\r\n* replace `jackson-databind-2.12.3.jar` -> `jackson-databind-2.13.3.jar`\r\n* remove `maven` as one of the build steps in the `Dockerfile` - one of the CVEs reported is related to `/usr/share/maven/lib/maven-shared-utils-3.2.1.jar` in the image, and after the installation via `make init` is completed, it should technically no longer be required. (additionally, it saves us ~11MB uncompressed in the image). This will require a small adjustment in the tests in -ext.\r\n* ~update version of `amazon-kclpy` and remove dependency to old/outdated `amazon_kclpy-ext`~ -> Handled in a [separate PR](https://github.com/localstack/localstack/pull/6502)",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 105,
        "deletions": 3,
        "changed_files": 3,
        "created_at": "2022-07-21T11:14:29Z",
        "closed_at": "2022-07-21T16:00:40Z",
        "merged_at": "2022-07-21T16:00:40Z",
        "body": "This PR addresses the handling of CBOR encoded messages.\r\nIt contains two fixes:\r\n- ASF's  `BaseJSONRequestParser`: Proper binary decoding for CBOR (since the binary data is not base64 encoded).\r\n- `botocore`: Adds support for basic CBOR decoding to `botocore` (which doesn't support CBOR at all).\r\n  - When using the botocore parser (in `client.py`) we configure the JSON parser to properly handle CBOR datetime and blobs.\r\n\r\nFixes #6492",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 988,
        "deletions": 35,
        "changed_files": 6,
        "created_at": "2022-07-20T16:01:31Z",
        "closed_at": "2022-07-28T10:24:39Z",
        "merged_at": "2022-07-28T10:24:39Z",
        "body": "* added `enable-alarm-actions` and `disable-alarm-actions` \r\n   *  fix for https://github.com/localstack/localstack/issues/5562\r\n* added snapshot test\r\n* fixed and improved some return values in cloudwatch to match AWS responses\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 21,
        "deletions": 21,
        "changed_files": 2,
        "created_at": "2022-07-20T13:03:55Z",
        "closed_at": "2022-07-20T19:01:14Z",
        "merged_at": "2022-07-20T19:01:14Z",
        "body": "This PR simply moves some zipping utilities into `localstack.utils.archives` (from `testutils`) for a two-fold reason: i) it is a better fitting module; ii) it avoids runtime imports from the CLI.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 40,
        "deletions": 0,
        "changed_files": 4,
        "created_at": "2022-07-20T08:33:57Z",
        "closed_at": "2022-07-27T10:18:33Z",
        "merged_at": "2022-07-27T10:18:33Z",
        "body": "### Summary\r\n\r\nAdds utility method to restart a Docker container.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 114,
        "deletions": 1,
        "changed_files": 4,
        "created_at": "2022-07-19T21:22:23Z",
        "closed_at": "2022-09-05T14:45:20Z",
        "merged_at": "2022-09-05T14:45:20Z",
        "body": "Thist PR addresses issue #6425.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 10,
        "deletions": 22,
        "changed_files": 4,
        "created_at": "2022-07-19T20:23:00Z",
        "closed_at": "2022-07-19T22:04:36Z",
        "merged_at": "2022-07-19T22:04:36Z",
        "body": "Remove `API_REGIONS` cache and replace it with in-memory lookup. As this cache dict has limited value and is the root cause for inconsistencies, it is time to get it removed (as discussed before).",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 22,
        "deletions": 1,
        "changed_files": 4,
        "created_at": "2022-07-19T18:45:36Z",
        "closed_at": "2022-07-20T10:47:43Z",
        "merged_at": "2022-07-20T10:47:43Z",
        "body": "Minor fixes for issues that surfaced while working on user sample (sample in https://github.com/nr-96/localstack-lambda-404): \r\n* Canonicalize Lambda policy name - previously, the CloudFormation deployment was creating policy ARNs in the form `arn:aws:iam::000000000000:policy/lambda_policy_arn:aws:lambda:eu-west-1:000000000000:function:ls-lambda-404-local-routes_latest` instead of `arn:aws:iam::000000000000:policy/lambda_policy_ls-lambda-404-local-routes_latest`\r\n* Ensure service provider is initialized in `run_lambda(..)`. This is required to ensure all lifecycle hooks (e.g., persistence) have been executed when this function gets called (otherwise the state is not present in the provider backend, and the request fails)",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 3,
        "changed_files": 2,
        "created_at": "2022-07-19T17:35:26Z",
        "closed_at": "2022-07-20T22:03:07Z",
        "merged_at": "2022-07-20T22:03:07Z",
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 10,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2022-07-19T10:56:11Z",
        "closed_at": "2023-03-14T11:16:29Z",
        "merged_at": null,
        "body": "Fixes #5946",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 24,
        "deletions": 3,
        "changed_files": 1,
        "created_at": "2022-07-19T09:48:01Z",
        "closed_at": "2022-07-20T21:38:53Z",
        "merged_at": "2022-07-20T21:38:53Z",
        "body": "Some AWS APIs only allow certificates from specific regions. See https://github.com/Miserlou/Zappa/issues/1945.\r\nThis change makes it possible to supply region name to the fixture to have a certificate created in that region.",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 20,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2022-07-18T16:51:33Z",
        "closed_at": "2022-07-18T22:19:05Z",
        "merged_at": "2022-07-18T22:19:05Z",
        "body": "Added working test cases for `VPC`",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 7,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2022-07-18T15:15:49Z",
        "closed_at": "2022-07-21T14:35:03Z",
        "merged_at": "2022-07-21T14:35:03Z",
        "body": "Fixes https://github.com/localstack/localstack/issues/5820",
        "comments": 3
    },
    {
        "merged": false,
        "additions": 9,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2022-07-18T13:17:40Z",
        "closed_at": "2022-07-19T01:36:48Z",
        "merged_at": null,
        "body": "# Summary\r\nThis PR is for added full aws region support (as of Today, 18/07/2022).\r\n\r\nThe region is important for local development and integration. eg: serverless lambda deployment bucket.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 81,
        "deletions": 9,
        "changed_files": 3,
        "created_at": "2022-07-18T11:47:11Z",
        "closed_at": "2022-07-18T16:36:13Z",
        "merged_at": "2022-07-18T16:36:13Z",
        "body": "## PR reasons\r\n1. Currently, since we use a regex replacement, the backslashes in Windows paths (as returned by docker for our mount detection - used for mounting the same paths into the lambda docker containers) will fail the method and therefore lambda execution.\r\n\r\n2. A quick fix for #6458 - we currently use docker sdk if available, no matter the version installed\r\n\r\n## Changes\r\n1. use regular string logic instead of regex to avoid escaping backslashes, added tests for path replacements for multiple formats / cases\r\n2.  do not use docker sdk even if it is installed on the host - version mismatch have bad consequences (due to AWS sam often an older version of the docker sdk is installed, which will start pulling all tags instead of latest)",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-07-18T07:28:20Z",
        "closed_at": "2022-07-18T09:49:57Z",
        "merged_at": "2022-07-18T09:49:57Z",
        "body": "It seems that due to a rebranding, it's not @renovate-bot anymore which creates our Docker image hash update PRs (like https://github.com/localstack/localstack/pull/6469).\r\nThis PR adds the user \"renovate\" to the allowlist of the CLA action to avoid CLA action run failures on automatically created PRs by Renovate.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 377,
        "deletions": 12,
        "changed_files": 3,
        "created_at": "2022-07-18T05:15:07Z",
        "closed_at": "2022-07-18T07:29:06Z",
        "merged_at": "2022-07-18T07:29:06Z",
        "body": "# \ud83d\ude80 ASF Update Report \ud83d\ude80\nThis PR has been automatically generated to update the generated API stubs for our ASF services.\nIt uses the latest code-generator from the _master_ branch ([scaffold.py](https://github.com/localstack/localstack/blob/master/localstack/aws/scaffold.py)) and the latest _published_ version of [botocore](https://github.com/boto/botocore) to re-generate all API stubs which are already present in the `localstack.aws.api` module of the _master_ branch.\n\n## \ud83d\udd04 Updated Services\nThis PR updates the following services:\n- config\n- ec2\n- redshift\n\n## \ud83d\udc77\ud83c\udffd Handle this PR\nThe following options describe how to interact with this PR / the auto-update:\n\n\u2714\ufe0f **Accept Changes**\nIf the changes are satisfying, just squash-merge the PR and delete the source branch.\n\n\ud83d\udeab **Ignore Changes**\nIf you want to ignore the changes in this PR, just close the PR and *do not delete* the source branch. The PR will not be opened and a new PR will not be created for as long as the generated code does not change (or the branch is deleted). As soon as there are new changes, a new PR will be created.\n\n\u270f\ufe0f **Adapt Changes**\n*Don't do this.* The APIs are auto-generated. If you decide that the APIs should look different, you have to change the code-generation.\n\n\u23f8\ufe0f **Pause Updates**\nRemove the cron-schedule trigger of the GitHub Action workflow which creates these PRs. The action can then still be triggered manually, but it will not be executed automatically.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2022-07-18T00:54:22Z",
        "closed_at": "2022-07-18T07:28:35Z",
        "merged_at": "2022-07-18T07:28:34Z",
        "body": "[![Mend Renovate](https://app.renovatebot.com/images/banner.svg)](https://renovatebot.com)\n\nThis PR contains the following updates:\n\n| Package | Type | Update | Change |\n|---|---|---|---|\n| python | final | digest | `a2e9d4e` -> `1839c4f` |\n| python | stage | digest | `a2e9d4e` -> `1839c4f` |\n\n---\n\n### Configuration\n\n\ud83d\udcc5 **Schedule**: Branch creation - \"before 3am on Monday\" (UTC), Automerge - At any time (no schedule defined).\n\n\ud83d\udea6 **Automerge**: Disabled by config. Please merge this manually once you are satisfied.\n\n\u267b **Rebasing**: Whenever PR becomes conflicted, or you tick the rebase/retry checkbox.\n\n\ud83d\udd15 **Ignore**: Close this PR and you won't be reminded about these updates again.\n\n---\n\n - [ ] <!-- rebase-check -->If you want to rebase/retry this PR, click this checkbox.\n\n---\n\nThis PR has been generated by [Mend Renovate](https://www.mend.io/free-developer-tools/renovate/). View repository job log [here](https://app.renovatebot.com/dashboard#github/localstack/localstack).\n<!--renovate-debug:eyJjcmVhdGVkSW5WZXIiOiIzMi4xMTcuNCIsInVwZGF0ZWRJblZlciI6IjMyLjExNy40In0=-->\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 8,
        "deletions": 5,
        "changed_files": 1,
        "created_at": "2022-07-15T09:32:36Z",
        "closed_at": "2022-07-15T13:49:11Z",
        "merged_at": "2022-07-15T13:49:11Z",
        "body": "This PR fixes the `integration-tests-against-pro` GitHub action.\r\nIt contains the following changes:\r\n- Fix a failing test which was caused by permission issues by cleaning up the `tmp` folder before each step:\r\n  - The workflow is executing LocalStack in host mode (basically development mode), which runs with normal user permissions.\r\n  - A lambda in a test executed in the `Run Lambda Tests for lambda executor docker` step compiled a lambda handler - which created a cpython bytecode compilation file - as root in its Docker container.\r\n  - This file was not cleaned up and can afterwards not be removed by the next LocalStack hostmode run.\r\n- Fix the caching (static libs are not in `./localstack/.filesystem/usr/lib/localstack` - relative to the workflow root path).\r\n- Remove the (now unused) environment variable `HOST_TMP_PATH`.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 29,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2022-07-15T00:34:28Z",
        "closed_at": "2022-07-15T11:29:47Z",
        "merged_at": "2022-07-15T11:29:47Z",
        "body": "This PR fixes #6327. There was an oopsie in the deduplication code, where we are not using the message dedup id that we calculated earlier. in the case described in the issue `message_deduplication_id` would be `None`, which is used as key.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 132,
        "deletions": 6,
        "changed_files": 3,
        "created_at": "2022-07-13T22:44:10Z",
        "closed_at": "2022-08-11T16:06:18Z",
        "merged_at": "2022-08-11T16:06:18Z",
        "body": "Produces diff results that are a bit more readable and (if used with a proper terminal) prettier due to custom coloring.\r\n\r\n/cc @steffyP",
        "comments": 3
    },
    {
        "merged": false,
        "additions": 56,
        "deletions": 9,
        "changed_files": 1,
        "created_at": "2022-07-13T16:49:00Z",
        "closed_at": "2022-08-18T16:39:25Z",
        "merged_at": null,
        "body": "Adds better logging and more heuristics. Still pretty raw though and could use some cleanup :sweat_smile: ",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 6,
        "changed_files": 2,
        "created_at": "2022-07-13T15:55:52Z",
        "closed_at": "2022-07-13T17:53:28Z",
        "merged_at": "2022-07-13T17:53:28Z",
        "body": "Just some minor readme and setup.cfg changes:\r\n* remove mention of python 3.6 as compatible (and remove dataclasses import) - python3.6 is EOL since Dec 2021.\r\n* update copyright year\r\n* update version in CLI example\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 57,
        "deletions": 48,
        "changed_files": 3,
        "created_at": "2022-07-13T13:04:58Z",
        "closed_at": "2022-07-13T22:57:18Z",
        "merged_at": "2022-07-13T22:57:18Z",
        "body": "This PR fixes an issue with the moto fallback dispatching of for operations which are not implemented.\r\nPreviously, the dispatcher raised Werkzeug's `NotFound` exception, which was interpreted as an internal error (resulting in a 500 error):\r\n```\r\nawslocal route53 update-traffic-policy-instance --id 123 --ttl 123 --traffic-policy-id 123 --traffic-policy-version 123\r\n\r\nAn error occurred (InternalError) when calling the UpdateTrafficPolicyInstance operation (reached max retries: 4): exception while calling route53.UpdateTrafficPolicyInstance: Traceback (most recent call last):\r\n  ...\r\n  File \".../localstack/services/moto.py\", line 142, in get_dispatcher\r\n    endpoint, _ = matcher.match(path_info=path)\r\n  File \".../.venv/lib/python3.10/site-packages/werkzeug/routing.py\", line 2047, in match\r\n    raise NotFound()\r\nwerkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.\r\n```\r\n\r\nWith this PR, `NotFound` errors are caught when performing the URL matching. A `NotImplementedException` is raised instead (which in turn will be forwarded to the client as a 501):\r\n```\r\nAn error occurred (InternalFailure) when calling the UpdateTrafficPolicyInstance operation: API action 'UpdateTrafficPolicyInstance' for service 'route53' not yet implemented\r\n```\r\n\r\n/cc @dominikschubert ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 343,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2022-07-13T10:31:32Z",
        "closed_at": "2022-07-22T08:20:04Z",
        "merged_at": "2022-07-22T08:20:03Z",
        "body": "### Summary\r\n\r\nThis PR introduces Stores, which supercede RegionBackends.\r\n\r\nStores provide in-memory storage for all provider data. They are analogous to the LocalStack's RegionBackend or Moto's BackendDict.\r\n\r\nThe terminology used, *Store*, is to avoid confusion with *Backend* which is used by Moto. The usage pattern is similar to Moto's where a singleton tracks all the stores for a service (see example below with `sqs_stores`)\r\n\r\nThis rework is influenced by Moto v4's approach of using nested dicts to delimit data by AWS account IDs and regions. The usage pattern is inspired by SQLAlchemy and its use of descriptor protocols.\r\n\r\n\r\n#### Problem with RegionBackend\r\n\r\nRegionBackend relies on [voodoo magic](https://github.com/localstack/localstack/blob/c58ae33/localstack/services/generic_proxy.py#L372) to support multi-accounts. It is complex and breaks serialisation, causing compatibiltiy issues with persistence and cloud pods.\r\n\r\n#### Usage pattern\r\n\r\n```py\r\n# localstack.services.sqs.models\r\nclass SqsStore(BaseStore):\r\n    queues = LocalAttribute(default=dict)  # Dict[str, str]\r\n    DELETED = CrossRegionAttribute(default=dict)  # type: Dict[str, float]\r\n\r\nsqs_stores = AccountRegionBundle('sqs', SqsStore)\r\n\r\n# Usage\r\nsqs_stores['111122223333']  # -> RegionStore\r\nsqs_stores['11112222aaaa']  # -> ValueError! invalid Account ID\r\nsqs_stores['111122223333']['ap-south-1']  # -> SqsStore\r\nsqs_stores['111122223333']['zz-north-1']  # -> ValueError! invalid region\r\n```\r\n\r\n#### Followup in separate PRs\r\n- RegionBackends for all providers will be migrated to Stores\r\n- Compatibility with persistence and cloudpods\r\n- Remove RegionBackend code\r\n- Remove feature flag and make multi-accounts default (depends on https://github.com/localstack/localstack/pull/6430)",
        "comments": 5
    },
    {
        "merged": true,
        "additions": 342,
        "deletions": 7,
        "changed_files": 5,
        "created_at": "2022-07-12T18:14:19Z",
        "closed_at": "2022-08-02T13:59:32Z",
        "merged_at": "2022-08-02T13:59:32Z",
        "body": "This PR enables the metric-collection for CircleCI run, and uploads the artifacts (including simple aggregated data).\r\n\r\nAlso adds the script `coverage_docs_utility` that can be used to generate a report in markdown, which can be used for the docs.\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 33,
        "deletions": 20,
        "changed_files": 2,
        "created_at": "2022-07-12T17:08:52Z",
        "closed_at": "2022-07-15T13:55:49Z",
        "merged_at": "2022-07-15T13:55:49Z",
        "body": "`fix_return_consumed_capacity` was added for issue #2049.\r\n\r\nThis seems to be the cause of issue #6437 and it doesn't solve the problem for issue #2049 from what I can tell.\r\nIf `ReturnValues` are not specified it always forces `ReturnConsumedCapacity` as `TOTAL`.\r\n\r\nSteps to try reproduce #2049 without success:\r\n```bash\r\n# Create table to repro the issue\r\nawslocal dynamodb create-table \\\r\n  --table-name \"put-item-response\" \\\r\n  --billing-mode \"PAY_PER_REQUEST\" \\\r\n  --attribute-definitions \\\r\n    AttributeName=pkey,AttributeType=S \\\r\n  --key-schema \\\r\n    AttributeName=pkey,KeyType=HASH \\\r\n  --region eu-west-1\r\n\r\n# This works as expected, no values are returned as there is no previous item\r\nawslocal dynamodb put-item \\\r\n  --table-name \"put-item-response\" \\\r\n  --item '{\"pkey\":{\"S\":\"test\"}}' \\\r\n  --return-values \"ALL_OLD\"\r\n\r\n# This works as expected, the values for the previous item is returned.\r\nawslocal dynamodb put-item \\\r\n  --table-name \"put-item-response\" \\\r\n  --item '{\"pkey\":{\"S\":\"test\"},\"val\":{\"S\":\"foo\"}}' \\\r\n  --return-values \"ALL_OLD\"\r\n\r\n# Cleanup resources\r\nawslocal dynamodb delete-table \\\r\n  --table-name \"put-item-response\"\r\n```",
        "comments": 5
    },
    {
        "merged": true,
        "additions": 50,
        "deletions": 60,
        "changed_files": 9,
        "created_at": "2022-07-12T16:23:30Z",
        "closed_at": "2022-07-12T19:39:45Z",
        "merged_at": "2022-07-12T19:39:45Z",
        "body": "## Current behavior\r\nCurrently, SERVICES will deactivate certain service plugins - which leads to all sorts of problems, a lot of `if is_api_enabled`s over the codebase, and the bad practice to define SERVICES variable - often without taking in mind the interconnection of a lot of services.\r\n\r\n## New behavior\r\nSERVICES will lose all functionality if EAGER_SERVICE_LOADING=0. This should be without impact for most costumers (due to lazy loading), except for the warning message printed at startup.\r\nSERVICES will now define a list of services preloaded with `EAGER_SERVICE_LOADING=1`. If this is enabled, all services specified will be started on startup, everything else will be loaded on demand. There is no more failing of requests due to a service not specified in `SERVICES`\r\nService plugins cannot be disabled now, and are all enabled (but not necessarily loaded) by default.\r\n\r\n## Impact\r\nImpact should be, in general, minimal, due to the default activation of lazy service loading. It should however reduce SERVICES-related support cases.\r\n\r\n## Future work\r\n- remove SERVICE_PORTS and dependencies on localstack-client",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 55,
        "deletions": 6,
        "changed_files": 3,
        "created_at": "2022-07-12T15:23:34Z",
        "closed_at": "2022-07-15T17:33:02Z",
        "merged_at": "2022-07-15T17:33:02Z",
        "body": "The authorizer event object is not prefixed with the authorizer type like it is for V2. This PR removes the integration prefix (authorizer-type) from the object.  ",
        "comments": 6
    },
    {
        "merged": true,
        "additions": 27,
        "deletions": 0,
        "changed_files": 3,
        "created_at": "2022-07-12T11:37:12Z",
        "closed_at": "2022-07-12T12:51:20Z",
        "merged_at": "2022-07-12T12:51:20Z",
        "body": "This PR fixes an issue with the ASF parser, where it didn't consider list-encoded types in header locations. See my comment in #6422, fix should be fairly self-explanatory.\r\n\r\nI also added an integration test, but the feature is not implemented in moto yet, so cannot fix the issue right away.\r\n\r\n## List header shapes\r\n\r\nWe previously made the assumption that shapes with the location \"header\" are only ever primitive types. However, \"ObjectAttributes\" in \"s3.GetObjectAttributes\" is a list shape which has the location \"header\".\r\n\r\nThe header arrives as, e.g., `x-amz-object-attributes: ObjectSize,StorageClass`.\r\n\r\nI briefly verified that it's the only one. Here's the list of all shape members with location \"header\" that are not strings:\r\n```\r\nappconfig CreateHostedConfigurationVersion LatestVersionNumber Integer integer\r\nebs CompleteSnapshot ChangedBlocksCount ChangedBlocksCount integer\r\nebs PutSnapshotBlock DataLength DataLength integer\r\nebs PutSnapshotBlock Progress Progress integer\r\ns3 CopyObject CopySourceIfModifiedSince CopySourceIfModifiedSince timestamp\r\ns3 CopyObject CopySourceIfUnmodifiedSince CopySourceIfUnmodifiedSince timestamp\r\ns3 CopyObject Expires Expires timestamp\r\ns3 CopyObject BucketKeyEnabled BucketKeyEnabled boolean\r\ns3 CopyObject ObjectLockRetainUntilDate ObjectLockRetainUntilDate timestamp\r\ns3 CreateBucket ObjectLockEnabledForBucket ObjectLockEnabledForBucket boolean\r\ns3 CreateMultipartUpload Expires Expires timestamp\r\ns3 CreateMultipartUpload BucketKeyEnabled BucketKeyEnabled boolean\r\ns3 CreateMultipartUpload ObjectLockRetainUntilDate ObjectLockRetainUntilDate timestamp\r\ns3 DeleteObject BypassGovernanceRetention BypassGovernanceRetention boolean\r\ns3 DeleteObjects BypassGovernanceRetention BypassGovernanceRetention boolean\r\ns3 GetObject IfModifiedSince IfModifiedSince timestamp\r\ns3 GetObject IfUnmodifiedSince IfUnmodifiedSince timestamp\r\ns3 GetObjectAttributes MaxParts MaxParts integer\r\ns3 GetObjectAttributes PartNumberMarker PartNumberMarker integer\r\ns3 GetObjectAttributes ObjectAttributes ObjectAttributesList list\r\ns3 HeadObject IfModifiedSince IfModifiedSince timestamp\r\ns3 HeadObject IfUnmodifiedSince IfUnmodifiedSince timestamp\r\ns3control CreateBucket ObjectLockEnabledForBucket ObjectLockEnabledForBucket boolean\r\ns3control PutBucketPolicy ConfirmRemoveSelfBucketAccess ConfirmRemoveSelfBucketAccess boolean\r\nsagemaker-runtime InvokeEndpointAsync RequestTTLSeconds RequestTTLSecondsHeader integer\r\n```",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2022-07-11T19:54:12Z",
        "closed_at": "2022-07-11T22:48:37Z",
        "merged_at": "2022-07-11T22:48:37Z",
        "body": "This PR fixes a python 3.7 compat issue with the CLI that would raise a syntax error:\r\n\r\n```\r\nthomas@om /tmp/test37 % python -m localstack.cli.main --debug start --host\r\nerror importing entrypoint EntryPoint(name='login', value='localstack_ext.cli.localstack:LoginCliPlugin', group='localstack.plugins.cli'): cannot import name 'Literal' from 'typing' (/home/thomas/.pyenv/versions/3.7.13/lib/python3.7/typing.py)\r\nerror importing entrypoint EntryPoint(name='pro', value='localstack_ext.cli.localstack:ProCliPlugin', group='localstack.plugins.cli'): cannot import name 'Literal' from 'typing' (/home/thomas/.pyenv/versions/3.7.13/lib/python3.7/typing.py)\r\nTraceback (most recent call last):\r\n  File \"/home/thomas/.pyenv/versions/3.7.13/lib/python3.7/runpy.py\", line 193, in _run_module_as_main\r\n    \"__main__\", mod_spec)\r\n  File \"/home/thomas/.pyenv/versions/3.7.13/lib/python3.7/runpy.py\", line 85, in _run_code\r\n    exec(code, run_globals)\r\n  File \"/home/thomas/workspace/localstack/localstack/localstack/cli/main.py\", line 10, in <module>\r\n    main()\r\n  File \"/home/thomas/workspace/localstack/localstack/localstack/cli/main.py\", line 6, in main\r\n    cli()\r\n  File \"/home/thomas/workspace/localstack/localstack/localstack/cli/plugin.py\", line 15, in __call__\r\n    self.group(*args, **kwargs)\r\n  File \"/tmp/test37/.venv/lib/python3.7/site-packages/click/core.py\", line 1130, in __call__\r\n    return self.main(*args, **kwargs)\r\n  File \"/tmp/test37/.venv/lib/python3.7/site-packages/click/core.py\", line 1055, in main\r\n    rv = self.invoke(ctx)\r\n  File \"/tmp/test37/.venv/lib/python3.7/site-packages/click/core.py\", line 1654, in invoke\r\n    super().invoke(ctx)\r\n  File \"/tmp/test37/.venv/lib/python3.7/site-packages/click/core.py\", line 1404, in invoke\r\n    return ctx.invoke(self.callback, **ctx.params)\r\n  File \"/tmp/test37/.venv/lib/python3.7/site-packages/click/core.py\", line 760, in invoke\r\n    return __callback(*args, **kwargs)\r\n  File \"/home/thomas/workspace/localstack/localstack/localstack/cli/localstack.py\", line 51, in localstack\r\n    _setup_cli_debug()\r\n  File \"/home/thomas/workspace/localstack/localstack/localstack/cli/localstack.py\", line 35, in _setup_cli_debug\r\n    from localstack.logging.setup import setup_logging_for_cli\r\n  File \"/home/thomas/workspace/localstack/localstack/localstack/logging/setup.py\", line 108\r\n    if logger := hypercorn_config.log.access_logger:\r\n               ^\r\nSyntaxError: invalid syntax\r\n```",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-07-11T15:26:18Z",
        "closed_at": "2022-07-11T17:09:48Z",
        "merged_at": "2022-07-11T17:09:48Z",
        "body": "this PR updates the analytics API to v1 which was deployed and tested today",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 271,
        "deletions": 169,
        "changed_files": 30,
        "created_at": "2022-07-11T13:40:33Z",
        "closed_at": "2022-08-31T12:38:23Z",
        "merged_at": "2022-08-31T12:38:23Z",
        "body": "### Summary\r\n\r\nThis PR adds full support for Moto v4 and multi-accounts for Moto-backed services.\r\n\r\n**Revert these commits before merge:** 1e1afb2 (@thrau: done!)",
        "comments": 3
    },
    {
        "merged": false,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-07-11T13:09:35Z",
        "closed_at": "2022-07-23T18:37:08Z",
        "merged_at": null,
        "body": "ref to PR #6428 \r\n",
        "comments": 5
    },
    {
        "merged": true,
        "additions": 159,
        "deletions": 1,
        "changed_files": 3,
        "created_at": "2022-07-10T22:51:46Z",
        "closed_at": "2022-08-19T13:20:47Z",
        "merged_at": "2022-08-19T13:20:47Z",
        "body": "This PR addresses issue #5602. Allows the SNS to deliver messages to Firehose subscriptions.\r\n\r\nMust be merged after spulec/moto#5303 has been integrated. If it takes too long I guess I'll merge it into the Moto-ext fork.",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 391,
        "deletions": 73,
        "changed_files": 14,
        "created_at": "2022-07-09T00:08:31Z",
        "closed_at": "2022-07-11T17:08:48Z",
        "merged_at": "2022-07-11T17:08:47Z",
        "body": "This PR overhauls log formatting and restructures the setup routine of the logs a bit\r\n\r\n* move logging related code into it's own module `localstack.logging`\r\n* change log output format to spring-inspired format\r\n* to that end i had to introduce a couple of new constructs (see `format.py`)\r\n\r\nNot super happy with the `LS_LOG=trace|trace-internal` solution. But I did my best to use what was already there and not introduce additional/different configuration.\r\n\r\n* there are two modes of logging: trace and normal log\r\n* internal calls are only logged if `LS_LOG=trace|trace-interal`\r\n* internal calls are only logged as trace when `LS_LOG=trace-internal`\r\n* in trace mode, AWS requests are logged visually similar like they are without tracing  (`AWS sqs.ListQueues => 200`), but we add in the same line the request dictionary and the headers (`ListQueueRequest({}, headers={..http-headers..}`), and the response also with the headers (`ListQueueResponse(...)`). this keeps everything neatly in one line\r\n* in trace mode, HTTP requests that cannot be parsed as AWS requests are logged entirely\r\n\r\n## Demo\r\n\r\nHere you can see trace logging in action:\r\n\r\n![Screenshot at 2022-07-09 02-01-19](https://user-images.githubusercontent.com/3996682/178083395-e0450475-a424-4f3a-8bb7-f0308cc6f941.png)\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 300,
        "deletions": 74,
        "changed_files": 5,
        "created_at": "2022-07-08T19:12:38Z",
        "closed_at": "2022-07-18T07:39:10Z",
        "merged_at": "2022-07-18T07:39:10Z",
        "body": "## APIs\r\n- associate_firewall_rule_group\r\n- disassociate_firewall_rule_group\r\n- get_firewall_rule_group_association\r\n- update_firewall_rule_group_association\r\n\r\n## Improvements\r\n- Isolated retrieval in models\r\n- Added utils file\r\n\r\n\r\n## Terraform Tests\r\n**TestAccRoute53ResolverFirewallRuleGroupAssociation**\r\n(this test will be included in - `TestAccRoute53ResolverFirewallRuleGroup` for tf Pipeline)\r\n- route53resolver:TestAccRoute53ResolverFirewallRuleGroupAssociation_basic\r\n- route53resolver:TestAccRoute53ResolverFirewallRuleGroupAssociation_name\r\n- route53resolver:TestAccRoute53ResolverFirewallRuleGroupAssociation_mutationProtection\r\n- route53resolver:TestAccRoute53ResolverFirewallRuleGroupAssociation_priority\r\n- route53resolver:TestAccRoute53ResolverFirewallRuleGroupAssociation_disappears\r\n- route53resolver:TestAccRoute53ResolverFirewallRuleGroupAssociation_tags",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 24,
        "deletions": 22,
        "changed_files": 7,
        "created_at": "2022-07-08T14:25:33Z",
        "closed_at": "2022-07-11T10:30:41Z",
        "merged_at": null,
        "body": "## Summary\r\n\r\n\r\n\r\nUse `typing` to soften migration to `3.10 `",
        "comments": 5
    },
    {
        "merged": true,
        "additions": 18,
        "deletions": 9,
        "changed_files": 4,
        "created_at": "2022-07-07T23:07:00Z",
        "closed_at": "2022-07-08T09:30:48Z",
        "merged_at": "2022-07-08T09:30:47Z",
        "body": "Install sqlite native libs for DynamoDB on OSX arm64. This is required to get up and running in local dev mode using M1 MacBooks.\r\n\r\n/cc @pandomic would be great if you could also take a quick look and see if that works on your M1.. \ud83d\udc4d \r\n\r\nAlso adds a few linter exclusions for `.filesystem` in anticipation of the `v1` merge. (Just ran into a few linter errors with Lambdas inside `.filesystem/var/lib/localstack/tmp/...`). Could also raise it against `v1` branch, but can't harm to have them in here already now..",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 84,
        "deletions": 4,
        "changed_files": 3,
        "created_at": "2022-07-07T19:11:49Z",
        "closed_at": "2022-07-08T11:58:04Z",
        "merged_at": "2022-07-08T11:58:04Z",
        "body": "This PR fixes an issue/limitation of the `parse_response` operation in our aws client module.\r\n\r\nThe problem was that we were not really implementing the parsing logic of botocore correctly, in particular when streaming binary responses are expected, like in `s3.GetObject`, which caused a problem here: https://github.com/boto/botocore/blob/ae44d1de241c13626d05a9301cf62e460833c950/botocore/parsers.py#L910-L914\r\n\r\nIn boto, when you call `s3_client.get_object(...)`, the `Body` attribute of the response (i.e., the payload), will not actually be bytes, but a readable `io` object. This PR introduces the same behavior for the `parse_response` method.\r\n\r\nI modeled the implementation after the version in boto core https://github.com/boto/botocore/blob/ae44d1de241c13626d05a9301cf62e460833c950/botocore/endpoint.py#L65-L74\r\n\r\nFuture work is `has_event_stream_output`, which I think covers things like the kinesis shard iterator.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 13,
        "deletions": 4,
        "changed_files": 2,
        "created_at": "2022-07-07T16:40:33Z",
        "closed_at": "2022-07-07T17:57:52Z",
        "merged_at": "2022-07-07T17:57:52Z",
        "body": "In #6354 we introduced a `.raw_items()` call to the headers object coming from the ASGI/WSGI bridge. We are serving through hypercorn, which uses the h2 protocol library for HTTP2, and h11 for HTTP 1.1. In the case of h11, the headers in the ASGI scope are a `h11._headers.Headers` object, which had the `raw_items` method. In the case of HTTP2, h2 was already passing a list of raw headers. I introduced a switch to check that.\r\n\r\nThanks for @whummer for the clear replication instructions:\r\n```bash\r\ncurl 'https://localhost.localstack.cloud:4566/' -X OPTIONS -H 'User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:102.0) Gecko/20100101 Firefox/102.0' -H 'Accept: */*' -H 'Accept-Language: en-US,en;q=0.5' -H 'Accept-Encoding: gzip, deflate, br' -H 'Access-Control-Request-Method: POST' -H 'Access-Control-Request-Headers: authorization,content-type,x-amz-content-sha256,x-amz-date,x-amz-target,x-amz-user-agent' -H 'Referer: https://app.localstack.cloud/' -H 'Origin: https://app.localstack.cloud/' -H 'Connection: keep-alive' -H 'Sec-Fetch-Dest: empty' -H 'Sec-Fetch-Mode: cors' -H 'Sec-Fetch-Site: same-site' -H 'Pragma: no-cache' -H 'Cache-Control: no-cache' -H 'TE: trailers'\r\n```",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 42,
        "deletions": 2,
        "changed_files": 6,
        "created_at": "2022-07-07T08:49:17Z",
        "closed_at": "2022-07-07T11:40:36Z",
        "merged_at": "2022-07-07T11:40:36Z",
        "body": "Since lambda is a keyword, it cannot easily be used in imports. This is why the lambda service module is called `awslambda` instead of `lambda` (as the real service name is).\r\nBut the scaffold's upgrade function only detects services which are named the same way as the service (with some escaping logic). This is why the generated services cannot just be renamed.\r\n\r\nThis PR fixes the scaffold to fix the automatic ASF API updates for lambda by:\r\n- Adding a keyword escaping logic for service names in the scaffold.\r\n- Renaming the ASF API package from `awslambda` to `lambda_` (which is the escaped service name).\r\n- Re-generating the API with the latest version of botocore.\r\n\r\nI have verified that there are no other generated APIs which have a different name than the service.\r\nHere's the bash snippet I created to verify that:\r\n```\r\n find . -type d | grep -v __pycache__\"\" | grep -v -e \"\\.\\$\" | cut -c 3- | tr _ - | sed 's/-$//' \\\r\n   | xargs -I '{}' \\\r\n   bash -c 'SERVICE={} && cd ~/Repos/localstack-ext/.venv/lib/python3.10/site-packages/botocore/data && test -d $SERVICE || (echo $SERVICE not found; exit 1)'\r\n```",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 2536,
        "deletions": 291,
        "changed_files": 31,
        "created_at": "2022-07-06T22:39:18Z",
        "closed_at": "2022-07-07T09:15:32Z",
        "merged_at": "2022-07-07T09:15:31Z",
        "body": "This PR extends the scaffold script as described in #6406 \r\n\r\nI also regenerated all APIs. For localstack-ext, the renovate but should do the work for us after we merge.\r\n\r\nThe newly generated exceptions look like this:\r\n```python\r\nclass EmptyBatchRequest(ServiceException):\r\n    code: str = \"AWS.SimpleQueueService.EmptyBatchRequest\"\r\n    sender_fault: bool = True\r\n    status_code: int = 400\r\n```",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 2,
        "changed_files": 3,
        "created_at": "2022-07-06T19:50:45Z",
        "closed_at": "2022-07-08T08:11:11Z",
        "merged_at": "2022-07-08T08:11:11Z",
        "body": "This PR should close #6134. The problem was that when I moved my code, adapting it for the rebase in #6170, I moved all the lines except for the one that sets the default content-type value. ",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 14,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-07-06T18:42:25Z",
        "closed_at": "2022-07-13T09:02:39Z",
        "merged_at": "2022-07-13T09:02:38Z",
        "body": "\r\n\r\n**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 6
    },
    {
        "merged": true,
        "additions": 233,
        "deletions": 34,
        "changed_files": 8,
        "created_at": "2022-07-06T15:26:36Z",
        "closed_at": "2022-07-07T09:55:04Z",
        "merged_at": "2022-07-07T09:55:04Z",
        "body": "This PR addresses an issue that is emerging because some advanced handlers require access to the AWS response dictionary, but since we don't always have access to that (e.g. when we forward to moto or other backends) we need to parse it.\r\n\r\n* Added a common interface of attributes to `ServiceException`. In the future we would set those values directly from the scaffold\r\n* Added two fields the the `RequestContext` that hold the parsed response and optionally the exception\r\n* If the response is already set when reaching the handler (e.g., because the skeleton set the value directly to what came out of the provider), then be happy and do nothing\r\n* When the exception is set, we check that the attributes are set (this is a workaround, see future work)\r\n* Otherwise try to parse the HTTP response\r\n* If the HTTP response is an error code, interpret the response as an error and instantiate an exception\r\n\r\nnow downstream response handlers can fairly safely access `context.service_response` if `context.operation` is set.\r\n\r\n\r\n## Future work:\r\nwe should update the scaffold to something like:\r\n```python\r\n    def _print_as_class(self, output, base: str, doc=True, quote_types=False):\r\n        output.write(f\"class {to_valid_python_name(self.shape.name)}({base}):\\n\")\r\n\r\n        q = '\"' if quote_types else \"\"\r\n\r\n        if doc:\r\n            self.print_shape_doc(output, self.shape)\r\n\r\n        if self.is_exception:\r\n            # extract from the shape the error metadata\r\n            error_spec = self.shape.metadata.get(\"error\", {})\r\n            output.write(f'    code: str = \"{error_spec.get(\"code\", self.shape.name)}\"\\n')\r\n            output.write(f'    sender_fault: bool = {error_spec.get(\"senderFault\", False)}\\n')\r\n            output.write(f'    status_code: int = {error_spec.get(\"httpStatusCode\", 400)}\\n')\r\n        elif not self.shape.members:\r\n            output.write(\"    pass\\n\")\r\n\r\n        for k, v in self.shape.members.items():\r\n            if k in self.shape.required_members:\r\n                if v.serialization.get(\"eventstream\"):\r\n                    output.write(f\"    {k}: Iterator[{q}{to_valid_python_name(v.name)}{q}]\\n\")\r\n                else:\r\n                    output.write(f\"    {k}: {q}{to_valid_python_name(v.name)}{q}\\n\")\r\n            else:\r\n                if v.serialization.get(\"eventstream\"):\r\n                    output.write(f\"    {k}: Iterator[{q}{to_valid_python_name(v.name)}{q}]\\n\")\r\n                else:\r\n                    output.write(f\"    {k}: Optional[{q}{to_valid_python_name(v.name)}{q}]\\n\")\r\n```\r\n\r\nwhich will generate code of the form:\r\n```python\r\nclass EmptyBatchRequest(ServiceException):\r\n    code: str = \"AWS.SimpleQueueService.EmptyBatchRequest\"\r\n    sender_fault: bool = True\r\n    status_code: int = 400\r\n```",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 14,
        "deletions": 8,
        "changed_files": 2,
        "created_at": "2022-07-06T12:59:44Z",
        "closed_at": "2022-07-07T10:46:53Z",
        "merged_at": "2022-07-07T10:46:53Z",
        "body": "This PR adds some log output, to capture the reason for startup failures reported in #4973 and cleanup errors reported in #6312.\r\n\r\nIt will now log when:\r\n* Containers should get cleaned up, this helps checking why the cleanup does not work\r\n* Lambda throws an exception while starting (they are currently silenced by the functhread flask runs in)",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 0,
        "deletions": 20,
        "changed_files": 3,
        "created_at": "2022-07-06T12:02:56Z",
        "closed_at": "2022-07-06T18:25:37Z",
        "merged_at": "2022-07-06T18:25:37Z",
        "body": "## Description\r\n\r\nAWS has dropped support for NodeJS 4.3, 6.10, 8.10 and 10.x & Ruby 2.5:\r\n\r\n- https://success.trendmicro.com/dcx/s/solution/1107747-unsupported-version-of-node-js-in-aws-lambda-of-deep-security\r\n- https://aws.amazon.com/blogs/developer/node-js-6-is-approaching-end-of-life-upgrade-your-aws-lambda-functions-to-the-node-js-10-lts/\r\n- https://www.datree.io/resources/aws-lambda-node-8-10-end-of-life\r\n- https://sinovi.uk/articles/aws-lambda-end-of-support-for-node-js-10-july-30-2021\r\n- https://www.danielaniszkiewicz.com/aws-lambda-end-of-support-ruby-2-5.html",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2022-07-05T17:21:18Z",
        "closed_at": "2022-07-05T19:51:26Z",
        "merged_at": "2022-07-05T19:51:26Z",
        "body": "With https://github.com/localstack/localstack/pull/6318, we had to pin the version of cryptography in order to fix our unit tests in Circle CI.\r\nA new version of cryptography (built on OpenSSL 3.0.5), which contains security updates as well as a fix for the issue which broke our CI, [has been released a few hours ago](https://pypi.org/project/cryptography/37.0.4/). This PR removes the pin and therefore updates cryptography to the newly released version.\r\n\r\nThanks to @dfangl for making me aware of the new release.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 3,
        "changed_files": 1,
        "created_at": "2022-07-05T07:21:33Z",
        "closed_at": "2022-07-05T09:38:12Z",
        "merged_at": "2022-07-05T09:38:12Z",
        "body": "Add test dependency to `deepdiff`. This library is being used in the `testing.snapshots` package, and we are currently depending on it transitively via -ext. This dependency is going to be removed upstream, hence adding it here directly.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 34,
        "deletions": 21,
        "changed_files": 5,
        "created_at": "2022-07-05T00:32:32Z",
        "closed_at": "2022-07-05T19:49:59Z",
        "merged_at": "2022-07-05T19:49:59Z",
        "body": "This PR adds a deprecation path for legacy directories (and resolves my biggest worry about v1 breaking people's setup).\r\n\r\nThe rationale is: we assume that, when a directory is mounted into `/tmp/localstack`, the user is still using legacy directories. Instead of just terminating or breaking the container, we set `LEGACY_DIRECTORIES=1` and print a big fat warning. Post v1, (maybe with 1.2) we can escalate and terminate the container in this case, and with, say 1.4, remove the deprecation path code.\r\n\r\nI also snuck in a change that fixes the CLI `LOCALSTACK_VOLUME_DIR` according to the documentation.\r\n\r\nThis is what it looks like in the CLI when starting with docker-compose:\r\n![Screenshot at 2022-07-05 02-38-02](https://user-images.githubusercontent.com/3996682/177228772-918a711f-49e7-47c0-988e-9b22711c777e.png)\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 13,
        "deletions": 10,
        "changed_files": 2,
        "created_at": "2022-07-05T00:02:40Z",
        "closed_at": "2022-07-05T08:48:51Z",
        "merged_at": "2022-07-05T08:48:51Z",
        "body": "This PR updates the `.dockerignore` file to match the current layout of the local build environment. I also clarified the documentation in the Dockerfile to better explain what's going on and that the `.dockerignore` file is relevant to the line.\r\n\r\nI also added glob patterns for `node_modules` and `.terraform` folders in the integration tests, and some other local artifacts, which can be useful when you build the docker image locally and previously executed the test suite.\r\n\r\nAlternatively we could include the entire .filesystem/usr/lib/localstack directory from the host",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 7,
        "deletions": 23,
        "changed_files": 2,
        "created_at": "2022-07-04T14:49:40Z",
        "closed_at": "2022-07-04T19:55:48Z",
        "merged_at": "2022-07-04T19:55:48Z",
        "body": "Currently, we have some legacy configuration in the docker-compose file, which are replaced (in v1 or before) by automatic detection.\r\nThis includes:\r\n* network_mode: bridge : This configuration is not necessary anymore, as we detect the docker network automatically using the get_main_container_network utility. Also it leads to problems when we use host aliases or want to use docker dns capabilities.\r\n* HOST_TMP_FOLDER: this is also automatically detected now, where necessary (lambda code mounting), by inspecting the LS docker container and finding the appropriate path.\r\n\r\nAs v1 is needing configuration changes anyway, we should sneak those in as well.",
        "comments": 3
    },
    {
        "merged": false,
        "additions": 292,
        "deletions": 51,
        "changed_files": 8,
        "created_at": "2022-07-04T13:30:00Z",
        "closed_at": "2023-01-12T08:32:37Z",
        "merged_at": null,
        "body": "Still not fully prod ready.\r\n\r\nThere are some drawbacks to using this approach but I think it's the least intrusive in regards of changes to the old Lambda provider since it reuses the locks \"register\" that was introduced previously for handling event source mapping concurrency.\r\n\r\nNot very happy with the test pattern here yet, since it leads to a fairly long test execution duration of about a minute. It does cover a few different scenarios though and I'd love to introduce a better \"parallel invocation\" counter soon to validate how async  (Event type) invokes are processed by the Lambda service.\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 48,
        "deletions": 2,
        "changed_files": 3,
        "created_at": "2022-07-04T07:44:10Z",
        "closed_at": "2022-07-04T08:51:22Z",
        "merged_at": "2022-07-04T08:51:22Z",
        "body": "This PR adds a plugin installer for OpenSearch and installs the `ingest-attachment` plugin by default.\r\nHowever, these plugins are only installed for OpenSearch versions >= 1.1.0 ([for earlier versions the plugin installation is not working](https://forum.opensearch.org/t/ingest-attachment-cannot-be-installed/6494/12)).\r\nFor now, only the `ingest-attachment` plugin is installed (in order to avoid longer installation times caused by unused plugins).",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 8,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2022-07-04T05:13:23Z",
        "closed_at": "2022-07-04T09:12:52Z",
        "merged_at": "2022-07-04T09:12:52Z",
        "body": "# \ud83d\ude80 ASF Update Report \ud83d\ude80\nThis PR has been automatically generated to update the generated API stubs for our ASF services.\nIt uses the latest code-generator from the _master_ branch ([scaffold.py](https://github.com/localstack/localstack/blob/master/localstack/aws/scaffold.py)) and the latest _published_ version of [botocore](https://github.com/boto/botocore) to re-generate all API stubs which are already present in the `localstack.aws.api` module of the _master_ branch.\n\n## \ud83d\udd04 Updated Services\nThis PR updates the following services:\n- ec2\n\n## \ud83d\udc77\ud83c\udffd Handle this PR\nThe following options describe how to interact with this PR / the auto-update:\n\n\u2714\ufe0f **Accept Changes**\nIf the changes are satisfying, just squash-merge the PR and delete the source branch.\n\n\ud83d\udeab **Ignore Changes**\nIf you want to ignore the changes in this PR, just close the PR and *do not delete* the source branch. The PR will not be opened and a new PR will not be created for as long as the generated code does not change (or the branch is deleted). As soon as there are new changes, a new PR will be created.\n\n\u270f\ufe0f **Adapt Changes**\n*Don't do this.* The APIs are auto-generated. If you decide that the APIs should look different, you have to change the code-generation.\n\n\u23f8\ufe0f **Pause Updates**\nRemove the cron-schedule trigger of the GitHub Action workflow which creates these PRs. The action can then still be triggered manually, but it will not be executed automatically.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 174,
        "deletions": 0,
        "changed_files": 5,
        "created_at": "2022-07-03T12:45:54Z",
        "closed_at": "2022-07-05T17:00:59Z",
        "merged_at": "2022-07-05T17:00:59Z",
        "body": "- Added support for terraform test execution in CI",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 22,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2022-07-01T16:02:08Z",
        "closed_at": "2022-07-05T09:38:52Z",
        "merged_at": "2022-07-05T09:38:52Z",
        "body": "Fixes #6361\r\n\r\nThis PR introduces a fallback logic to the currently configured default provider, if the configured provider of a service cannot be found.\r\nWhile quite straightforward, this approach has a significant caveat: If Pro services are activated, it will still fallback to the community service in case the configuration provided is wrong.\r\n\r\nWe could solve this (possibly in another PR), for example by providing some kind of ordering logic to the ProviderConfig class, to be able to register provider overrides with some kind of priority, and therefore iterate over them in case one provider is not actually available. Thoughts @thrau ?",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 30,
        "deletions": 26,
        "changed_files": 3,
        "created_at": "2022-07-01T13:09:15Z",
        "closed_at": "2022-07-01T17:14:15Z",
        "merged_at": "2022-07-01T17:14:15Z",
        "body": "Minor fixes to mark DynamoDB test with binary data as `aws_validated`. The starting point for this investigation was the PR https://github.com/localstack/localstack/pull/6371 .\r\n\r\nSummary of changes:\r\n* Remove deprecated `sleep_after=2` argument in the `create_dynamodb_table(..)` utility, instead add a `wait_for_active=True` parameter, which is required for parity testing against AWS (waiting for the table to become available)\r\n* Changed the default DynamoDB test table `BillingMode` from `PROVISIONED` to `PAY_PER_REQUEST` - this is to avoid situations where we accidentally create (and don't clean up) `PROVISIONED` tables in AWS - they can become **really** expensive.. :)\r\n* Remove obsolete/deprecated `env=..` parameter (this is totally outdated, and should get removed from the entire codebase over time)\r\n* Mark `test_empty_and_binary_values` as `aws_validated`, and change the binary data to non-printable characters (`b\"\\x90\"`)",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 2,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-07-01T11:02:58Z",
        "closed_at": "2022-07-01T14:52:01Z",
        "merged_at": null,
        "body": "Currently, our whole docker execution breaks if DATA_DIR is set but LS_TRACE, since the logger for the warning (for data_dir set) is not created if LS_TRACE is not set.\r\n\r\nThis PR moves the logger outside to be initialized unconditionally.",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-07-01T08:43:06Z",
        "closed_at": "2022-07-01T09:58:00Z",
        "merged_at": "2022-07-01T09:58:00Z",
        "body": "In our CI environment, we currently see issues with newly introduced dependencies in our extensions (f.e. builds for [#6376](https://app.circleci.com/pipelines/github/localstack/localstack/7209/workflows/d4fbaba1-4bb5-4bba-bfd1-5926ab610d68)).\r\nTherefore this PR ensures that also the runtime dependencies of `localstack-ext` are updated at the end.\r\n\r\nThe current issues (and the \"flaky\" looks of it) are caused by the Docker layer caching in combination with our dev releases:\r\n- `localstack` defines `localstack-ext[runtime]>=0.14.5.dev,<0.14.6`\r\n  - This includes the latest dev releases (due to the `.dev` suffix).\r\n- If there are no changes to the layers before `make install-runtime` is called in the `Dockerfile` but a new ext dev release (not contained in the cache yet) defines a new dependency, it will not be installed since the final update of `localstack-ext` at the end of the Docker image build only installs the `install` dependencies without the `runtime` extra.\r\n\r\nThis PR addresses this by adding the runtime extra to the final ext-update command.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 475,
        "deletions": 47,
        "changed_files": 23,
        "created_at": "2022-07-01T01:10:07Z",
        "closed_at": "2022-07-04T19:38:36Z",
        "merged_at": "2022-07-04T19:38:36Z",
        "body": "This PR introduces the extensions API and a simple mechanism to manage python dependencies through the container in a virtual environment stored on the host.\r\n\r\n## Basic changes\r\n* Circular venv from `/var/lib/localstack/lib/extensions/python_venv` <-> `/opt/code/localstack/.venv ` (paths don't have to exist, python site will ignore them.\r\n* three cli commands `localstack extensions` `init | install | uninstall` (which are basically just: create venv, pip install, pip uninstall)\r\n* internal cli to perform the operations when inside the container\r\n* expose parts of our internal API via `localstack.extensions.api`\r\n* added several [PEP 224](https://peps.python.org/pep-0224/)-style attribute docs for special variables exposed through the extensions API.\r\n\r\nExample use: https://github.com/localstack/localstack-stripe/blob/main/localstack_stripe/extension.py\r\n\r\n## Test\r\n\r\n* build `localstack/localstack` container image locally from this branch (including localstack-ext changes)\r\n* activate venv\r\n* run `python -m localstack.cli.main extensions init\r\n* run `python -m localstack.cli.main extensions install \"git+https://github.com/localstack/localstack-stripe.git#egg=localstack-stripe\"`\r\n* run `python -m localstack.cli.main start`\r\n* run `curl stripe.localhost.localstack.cloud:4566/v1/customers -u sk_test_12345:`\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 488,
        "deletions": 81,
        "changed_files": 8,
        "created_at": "2022-07-01T00:29:54Z",
        "closed_at": "2022-07-01T19:18:29Z",
        "merged_at": "2022-07-01T19:18:29Z",
        "body": "This PR extends our HTTP server framework with proxy components. This will need a second iteration, as some of the components still have a bit of a naive implementation, and also the problem around IO and `restore_payload` are still not resolved.\r\n\r\nThe central new APIs are `HttpClient` and `Proxy`.\r\n\r\n## HttpClient\r\n`HttpClient` is a client that can take Werkzeug's server-side `Request` object and actually perform the request as a client, and it returns a Werkzeug `Response`, which can be seamlessly handed down stream in the handler pipeline.\r\n\r\nCurrently there is only a very simple implementation using the [requests](https://github.com/psf/requests) library. The major limitation is that it relies on `restore_payload` to get the incoming request's data, which will always consume and reconstruct the HTTP request payload. Moving forward, it would be great if we could find a better implementation here somehow utilizing `request.stream` (which is difficult because there is currently no good way of determining whether the stream has been consumed or not).\r\n\r\n## Proxy\r\n`Proxy` takes a `forward_base_url` (the backend the requests are being sent to) and an `HttpClient`. The `forward` method takes the incoming Request and uses the http client to forward it to the `forward_base_url`, optionally allowing manipulation of the path and headers.\r\n\r\nAround this construct there are several layers of APIs to make the Proxy more user friendly:\r\n\r\n* `ProxyHandler` can be used as an endpoint in a `Router[Handler]` (e.g., the `edge.ROUTER`) to forward the `path` of a url matching argument \r\n\r\nThe core mechanism that makes this work is `_copy_request`, which is also a very naive implementation that uses werkzeug internals to make a copy of the WSGI environment underlying the Request object, modifying that, and then creating a new Request object from it. This is not ideal because a) we're using werkzeug test internals, b) again we rely on `restore_payload` to create a new stream of the request. So currently we need two calls to `restore_payload` to make a proxy call, which is not great and should be fixed soon(tm).\r\n\r\n## Example use\r\n\r\n```python\r\nROUTER.add(\"/myservice/<path:path>\", ProxyHandler(\"http://localhost:8081\"))\r\n```\r\n\r\nwhich is roughly equivalent to:\r\n\r\n```python\r\ndef handler(request: Request, path: str) -> Response:\r\n    proxy = Proxy(\"http://localhost:8081\", SimpleRequestsClient())\r\n    response = proxy.forward(request, forward_path=path)\r\n    return response\r\n\r\nROUTER.add(\"/myservice/<path:path>\", handler)\r\n```\r\n\r\nHere's a WSGI server that uses the convenience method `forward` to forward request to httpbin:\r\n```python\r\nfrom werkzeug import Request\r\nfrom werkzeug.exceptions import MethodNotAllowed\r\nfrom werkzeug.serving import run_simple\r\n\r\nfrom localstack.http.proxy import forward\r\n\r\n@Request.application\r\ndef handler(request):\r\n    verb = request.method.lower()\r\n    if verb not in [\"delete\", \"get\", \"patch\", \"post\", \"put\"]:\r\n        raise MethodNotAllowed()\r\n    return forward(request, forward_base_url=\"https://httpbin.org\", forward_path=f\"/{verb}\")\r\n\r\nif __name__ == '__main__':\r\n    run_simple(\"localhost\", 8080, handler)\r\n```\r\n\r\n## Other changes\r\n\r\n* Make sure `QUERY_STRING` is always in the WSGI environment (required by werkzeug's `EnvironBuilder`)\r\n* Slightly refactored `dispatcher.py` to make it work when plain werkzeug Responses are returned by a dispatcher\r\n* Slightly refactored the test fixtures to re-use the wsgi/asgi adapter serving",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-06-30T23:52:30Z",
        "closed_at": "2022-07-01T16:38:58Z",
        "merged_at": "2022-07-01T16:38:58Z",
        "body": "Fixes an issue where `access_key_id` could be None when parsing non-AWS requests.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 43,
        "deletions": 4,
        "changed_files": 3,
        "created_at": "2022-06-30T12:09:57Z",
        "closed_at": "2022-06-30T20:47:13Z",
        "merged_at": "2022-06-30T20:47:13Z",
        "body": "The method `get_host_path_for_path_in_docker` had a serious problem:\r\nIt would replace `/var/lib/localstack/tmp` instead of `/var/lib/localstack` in the path.\r\nTherefore, the LS container path `/var/lib/localstack/tmp/zipfile.aaaaaaaa` (where the lambda code is located in the container) got mapped to `/tmp/localstack/zipfile.aaaaaaaa` instead of `/tmp/localstack/tmp/zipfile.aaaaaaaaa` (which would be the actual location).\r\n\r\nThis also resulted in an immediate failure in pro, since it tried to replace `/var/lib/localstack/tmp/(.*)` on `/var/lib/localstack/tmp`, which cannot work (due to missing trailing slash).\r\n\r\nThis PR fixes the behavior, introduces a function docstring which documents the expected behavior of the function, and logs a warning if the replacement should be unsuccessful.\r\n\r\nAlso suppresses warnings for missing HOST_TMP_DIR unless `LEGACY_DIRECTORIES` is set",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 4,
        "changed_files": 3,
        "created_at": "2022-06-30T08:17:43Z",
        "closed_at": "2022-06-30T09:43:48Z",
        "merged_at": "2022-06-30T09:43:48Z",
        "body": "This PR changes the token for the following actions:\r\n- CLA Assistant\r\n- Triage Stale issues\r\n- Welcome First Time Contributors \u2728\r\n\r\nPreviously, the comments by this actions looked as follows:\r\n- CLA Assistant\r\n![image](https://user-images.githubusercontent.com/2796604/176628063-b8920d5f-72eb-4054-a306-69a6ffe09374.png)\r\n\r\n- Triage Stale issues\r\n![image](https://user-images.githubusercontent.com/2796604/176627888-5a92d449-495d-4e5c-bdd3-5800f08ed0e2.png)\r\n\r\n- Welcome First Time Contributors \u2728 \r\n![image](https://user-images.githubusercontent.com/2796604/176627718-48596c03-d0cc-45bc-a170-0a10d462c96d.png)\r\n\r\n\r\nInstead of the default token, they now use the `PRO_ACCESS_TOKEN`, a Personal Access Token of @localstack-bot.\r\nThis should change the appearance of the three actions in PRs and issues from @github-actions to @localstack-bot.",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-06-29T21:55:41Z",
        "closed_at": "2022-08-16T19:11:32Z",
        "merged_at": null,
        "body": "Minor fix to `Patch` when the attribute is not present in the receiver object\r\n\r\n\r\n```\r\nFile \".../localstack/services/edge.py\", line 163, in forward_request\r\n    self._require_service(api)\r\nFile \".../localstack/services/edge.py\", line 220, in _require_service\r\n    raise HTTPErrorResponse(\"failed to get service for %s: %s\" % (api, e), code=500)\r\nlocalstack.utils.server.http2_server.HTTPErrorResponse: failed to get service for iam: module 'localstack.services.iam.provider' has no attribute '_validate_resource_syntax'\r\n```\r\n\r\nReproducible with https://github.com/localstack/localstack-terraform-samples/tree/master/apigatewayv2-ws-sub-protocol",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 350,
        "deletions": 356,
        "changed_files": 5,
        "created_at": "2022-06-29T15:08:31Z",
        "closed_at": "2022-07-01T18:00:27Z",
        "merged_at": "2022-07-01T18:00:27Z",
        "body": "This PR fixes `MessageAttributes` for SNS, and add parity with AWS.\r\n\r\n### Problem\r\nA user encounter issue while trying to cast `MessageAttributes` with aws-sdk in Java I believe, inside a lambda.\r\nThe fields of our `MessageAttributes` were wrong: `\"DataType\"` and `\"{type}Value\"` where it should have been `\"Type\"` and `\"Value\"` for a message sent to a Lambda.\r\n\r\n### Solution\r\nI've done a round of check to fix `MessageAttributes` format where it was needed, and I checked those against AWS by rewriting some tests to be `aws_validated`.\r\nhttps://docs.aws.amazon.com/sns/latest/dg/sns-message-attributes.html\r\n\r\nSome behaviour has changed, as where `MessageAttributes` is located depends on `RawMessageDelivery` (SNS adds metadata or not to the message, and encapsulates the message inside a `\"Body\"` field).\r\nWhen `RawMessageDelivery` is `true`, SNS piggybacks on SQS MessageAttributes to add them to the message for SQS endpoints. For other type of endpoints, `MessageAttributes` are not sent. See:\r\nhttps://docs.aws.amazon.com/sns/latest/dg/sns-large-payload-raw-message-delivery.html\r\nBefore, we would only use SQS `MessageAttributes` for everything, but when `RawMessageDelivery` is set to `false`, those attributes are added to the `Body` of the message and not added to SQS.\r\n\r\nedit: Had to delete a unit test that still tested a deleted method that was used with the old provider. With ASF, it wasn't used anymore (getting attributes from url encoded data)\r\n\r\n_fixes #6245_",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 157,
        "deletions": 0,
        "changed_files": 3,
        "created_at": "2022-06-29T14:22:20Z",
        "closed_at": "2022-06-29T20:29:31Z",
        "merged_at": "2022-06-29T20:29:31Z",
        "body": null,
        "comments": 1
    },
    {
        "merged": true,
        "additions": 72,
        "deletions": 24,
        "changed_files": 5,
        "created_at": "2022-06-29T14:05:31Z",
        "closed_at": "2022-07-04T15:04:04Z",
        "merged_at": "2022-07-04T15:04:04Z",
        "body": "This PR addresses #6364 where the user reported error messages in the logs while trying to stream the DDB changes to Kinesis. This was due to errors in serializing bytes content. \r\nIntroduced a new encoder for binary content (less broad than the `CustomEncoder` we already have) and introduced/refactored some tests.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 53,
        "deletions": 8,
        "changed_files": 3,
        "created_at": "2022-06-29T12:18:46Z",
        "closed_at": "2022-07-01T18:03:48Z",
        "merged_at": "2022-07-01T18:03:48Z",
        "body": "This PR fixes a small issue in the ASF error serialization for (rest-)json protocols with (misbehaving) clients.\r\n\r\nThe specs ([json 1.0](https://awslabs.github.io/smithy/1.0/spec/aws/aws-json-1_0-protocol.html#operation-error-serialization), [json 1.1](https://awslabs.github.io/smithy/1.0/spec/aws/aws-json-1_1-protocol.html#operation-error-serialization), [rest-json](https://awslabs.github.io/smithy/1.0/spec/aws/aws-restjson1-protocol.html)) define that an error may either have a JSON member `__type` _or_ a JSON member `code` _or_ a header field `X-Amzn-Errortype` indicating the error code shape.\r\n\r\nThis PR adds the header field in addition to the `__type` member in order to avoid service-specific serializer configurations and in order to increase the support among different clients / services.\r\n\r\nThis fixes an issue (#6304) with the Terraform OpenSearch provider, which violates the client spec since it only checks for the header field while the spec for `rest-json` (the protocol of both - `es` and `opensearch` - services) explicitly states:\r\n\r\n> Clients MUST accept any one of the following: an additional header with the name X-Amzn-Errortype, a body field with the name __type, or a body field named code. The value of this component SHOULD contain only the [shape name](https://awslabs.github.io/smithy/1.0/spec/core/model.html#grammar-token-smithy-identifier) of the error's [Shape ID](https://awslabs.github.io/smithy/1.0/spec/core/model.html#shape-id).\r\n\r\nFixes #6304.\r\nI verified that the fix resolves the issues with the terraform script attached to the issue. Thanks a lot @Squallium for the _incredible_ issue report!",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 429,
        "deletions": 8,
        "changed_files": 8,
        "created_at": "2022-06-28T17:25:32Z",
        "closed_at": "2022-07-05T21:05:40Z",
        "merged_at": "2022-07-05T21:05:40Z",
        "body": "## Terraform Tests\r\n- TestAccRoute53ResolverFirewallRuleGroup\r\n  - TestAccRoute53ResolverFirewallRuleGroup_basic\r\n  - TestAccRoute53ResolverFirewallRuleGroup_disappears\r\n  - TestAccRoute53ResolverFirewallRuleGroup_tags\r\n- TestAccRoute53ResolverFirewallRule\r\n  - TestAccRoute53ResolverFirewallRule_basic\r\n  - TestAccRoute53ResolverFirewallRule_block\r\n  - TestAccRoute53ResolverFirewallRule_blockOverride\r\n  - TestAccRoute53ResolverFirewallRule_disappears\r\n- TestAccRoute53ResolverFirewallDomainList\r\n  - TestAccRoute53ResolverFirewallDomainList_basic\r\n  - TestAccRoute53ResolverFirewallDomainList_domains\r\n  - TestAccRoute53ResolverFirewallDomainList_disappears\r\n  - TestAccRoute53ResolverFirewallDomainList_tags\r\n\r\n## APIs\r\n**FirewallRuleGroup**\r\n- create_firewall_rule_group\r\n- delete_firewall_rule_group\r\n- get_firewall_rule_group\r\n- list_firewall_rule_groups\r\n\r\n**FirewallDomainList**\r\n- create_firewall_domain_list\r\n- delete_firewall_domain_list\r\n- get_firewall_domain_list\r\n- list_firewall_domain_lists\r\n\r\n**FirewallDomains**\r\n- update_firewall_domains\r\n- list_firewall_domains\r\n\r\n**FirewallRule**\r\n- create_firewall_rule\r\n- delete_firewall_rule\r\n- list_firewall_rules\r\n- update_firewall_rule\r\n\r\n## patch\r\n- _matched_arn\r\n\r\n## enhancement\r\n- support to generate random hex\r\n- isolated route53resolver from route53\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 3,
        "changed_files": 1,
        "created_at": "2022-06-28T15:22:27Z",
        "closed_at": "2022-06-28T16:29:06Z",
        "merged_at": "2022-06-28T16:29:06Z",
        "body": "Addresses #6364. \r\nIt simply extends the usage of `_get_size_bytes()` to all the instances where it's necessary to compute the `SizeBytes`. \r\nIn particular, LOC 553 is the responsible for the mentioned issue.",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 99,
        "deletions": 3,
        "changed_files": 3,
        "created_at": "2022-06-28T13:49:30Z",
        "closed_at": "2022-06-28T15:53:28Z",
        "merged_at": "2022-06-28T15:53:28Z",
        "body": "This PR adds convenience features to our GitHub workflows concerning the handling of our release branch PR (#6272) as well as  PRs targeting the release branch.\r\n\r\nIn order to keep the branches up to date, two workflows are added:\r\n- `rebase-release-prs.yml` / `Rebase release PRs`\r\n  - This workflow is triggered by every push into master and rebases our release branches.\r\n  - It tries to rebase the Release PRs (f.e. #6272) upon the latest commit.\r\n  - i.e. For every push to master the release branches for which PRs exist are tried to be rebased upon the latest commit.\r\n  - Currently, the list of branches to rebase is hard-coded. The used action currently cannot handle a more elaborate head branch pattern.\r\n- `rebase-release-targeting-prs.yml` / `Rebase PRs targeting release branches`\r\n  - This workflow is triggered by every push to a release branch (i.e. also by the rebases performed by the action above).\r\n  - It tries to rebase those PRs which target a release PR upon the latest commit in the target branch.\r\n  - i.e. for every push to a release branch, all PRs which target this branch are tried to be rebased upon the latest commit.\r\n\r\nAlso, we often work changes which are both in our open core as well as in our extensions (for example our release branches).\r\nIn order to get correct workflow executions, they need to test against the companion branches in the ext repo.\r\n- `pro-integration.yml` / integration-tests-against-pro`\r\n  - The workflow is now now only executed for PRs targeting the master branch, but also those targeting a release branch.\r\n  - The `targetRef` is optional, it does not default to master anymore.\r\n  - A new step has been introduced which determines the correct branch of the ext repo to test against:\r\n    - If the `targetRef` has been set manually (in a `workflow_dispatch` event), it always uses that.\r\n    - Otherwise, it checks the `ref` of the worflow execution:\r\n      - If it is the default branch (`refs/head/master`), it directly uses it (we assume it is also present in the ext repo).\r\n      - Otherwise check if the `ref` exists in the companion repo (i.e. `ext`, f.e. `fix-v1`).\r\n        - If it does, it uses it.\r\n        - Otherwise, if it's a PR, check if the base ref exists in the companion repo (f.e. `v1`).\r\n          - If it does, it uses it.\r\n          - Otherwise, there is no proper companion PR. We fallback to the default ref (`master`).\r\n\r\nHere's a flow chart visualizing the algorithm to determine the ref:\r\n```mermaid\r\ngraph TD;\r\n  targetRef{{\"Is targetRef set?\"}}-->|Yes|useTargetRef(\"Use targetRef\")\r\n  targetRef-->|No|isRefDefault{{\"Is workflow ref default ref?\"}}\r\n  isRefDefault-->|Yes|useDefaultRef(\"Use default ref (master)\")\r\n  isRefDefault-->|No|refExists{{\"Does the ref exist in companion repo?\"}}\r\n  refExists-->|Yes|useRef(\"Use companion ref\")\r\n  refExists-->|No|baseRefExists{{\"Does PR base ref exist in companion repo?\"}}\r\n  baseRefExists-->|Yes|useBaseRef(\"Use PR base companion ref\")\r\n  baseRefExists-->|No|useDefaultRef\r\n```\r\n\r\nThis is obviously quite complex, but it feels like it's the most intuitive for me. It basically boils down to:\r\n- If there's a branch with the same name in the companion repo, I want to test against that (instead of the master).\r\n- If not and there's a branch with the same name as my PR target, I want to test against that (instead of the master).\r\n- In every other case fall back to the master.\r\n\r\nI'm happy for any feedback. I'm also happy to close the PR if we decide that it's too complex, confusing, or unreliable.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 4,
        "changed_files": 1,
        "created_at": "2022-06-28T08:49:07Z",
        "closed_at": "2022-06-28T16:48:16Z",
        "merged_at": "2022-06-28T16:48:16Z",
        "body": "Add second pip install with `--no-deps` to ensure latest dev releases are properly installed and not overwritten in the Docker image.\r\n\r\nThis is an attempt to ensure we're installing the latest dev releases, which are currently being overwritten by the transitive dependency localstack-ext(`0.14.5.devX`)->localstack(`>=0.14.3.2` -> resolves to `0.14.4`). \r\n\r\nTheoretically, we could end up in a situation where some of the other transitive dependencies (any non plux/localstack/-ext libraries) no longer match with the shallow install of -ext, although arguably this would be an unlikely corner case. To be discussed..",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 5,
        "deletions": 5,
        "changed_files": 2,
        "created_at": "2022-06-27T09:43:26Z",
        "closed_at": "2022-06-27T11:23:47Z",
        "merged_at": "2022-06-27T11:23:47Z",
        "body": "This PR changes the handling of the headers when using the new HTTP gateway with API GW:\r\n- It uses the raw headers in the ASGI/WSGI bridge to preserve the casing of the HTTP headers in the WSGI environment.\r\n- It removes the title casing in the ASF API GW implementation (which was a workaround for the header casing).\r\n- It adds the `x-localstack-edge` header in the ASF API GW implementation (which is used to parse the domain).",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-06-27T09:10:41Z",
        "closed_at": "2022-06-27T12:06:04Z",
        "merged_at": "2022-06-27T12:06:04Z",
        "body": "The S3 event structure described in https://docs.aws.amazon.com/AmazonS3/latest/userguide/notification-content-structure.html states that Records.s3.configurationId is the `\"ID found in the bucket notification configuration\"`. \r\n\r\nThe notification configuration is available in the enclosing context, so it can be added (as requested by user in support channel)",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 5,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2022-06-27T05:15:14Z",
        "closed_at": "2022-06-27T06:27:20Z",
        "merged_at": "2022-06-27T06:27:20Z",
        "body": "# \ud83d\ude80 ASF Update Report \ud83d\ude80\nThis PR has been automatically generated to update the generated API stubs for our ASF services.\nIt uses the latest code-generator from the _master_ branch ([scaffold.py](https://github.com/localstack/localstack/blob/master/localstack/aws/scaffold.py)) and the latest _published_ version of [botocore](https://github.com/boto/botocore) to re-generate all API stubs which are already present in the `localstack.aws.api` module of the _master_ branch.\n\n## \ud83d\udd04 Updated Services\nThis PR updates the following services:\n- ec2\n\n## \ud83d\udc77\ud83c\udffd Handle this PR\nThe following options describe how to interact with this PR / the auto-update:\n\n\u2714\ufe0f **Accept Changes**\nIf the changes are satisfying, just squash-merge the PR and delete the source branch.\n\n\ud83d\udeab **Ignore Changes**\nIf you want to ignore the changes in this PR, just close the PR and *do not delete* the source branch. The PR will not be opened and a new PR will not be created for as long as the generated code does not change (or the branch is deleted). As soon as there are new changes, a new PR will be created.\n\n\u270f\ufe0f **Adapt Changes**\n*Don't do this.* The APIs are auto-generated. If you decide that the APIs should look different, you have to change the code-generation.\n\n\u23f8\ufe0f **Pause Updates**\nRemove the cron-schedule trigger of the GitHub Action workflow which creates these PRs. The action can then still be triggered manually, but it will not be executed automatically.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2022-06-27T00:30:10Z",
        "closed_at": "2022-06-27T06:21:07Z",
        "merged_at": "2022-06-27T06:21:07Z",
        "body": "[![Mend Renovate](https://app.renovatebot.com/images/banner.svg)](https://renovatebot.com)\n\nThis PR contains the following updates:\n\n| Package | Type | Update | Change |\n|---|---|---|---|\n| python | final | digest | `807f16d` -> `a2e9d4e` |\n| python | stage | digest | `807f16d` -> `a2e9d4e` |\n\n---\n\n### Configuration\n\n\ud83d\udcc5 **Schedule**: Branch creation - \"before 3am on Monday\" (UTC), Automerge - At any time (no schedule defined).\n\n\ud83d\udea6 **Automerge**: Disabled by config. Please merge this manually once you are satisfied.\n\n\u267b **Rebasing**: Whenever PR becomes conflicted, or you tick the rebase/retry checkbox.\n\n\ud83d\udd15 **Ignore**: Close this PR and you won't be reminded about these updates again.\n\n---\n\n - [ ] <!-- rebase-check -->If you want to rebase/retry this PR, click this checkbox.\n\n---\n\nThis PR has been generated by [Mend Renovate](https://www.mend.io/free-developer-tools/renovate/). View repository job log [here](https://app.renovatebot.com/dashboard#github/localstack/localstack).",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 14,
        "deletions": 8,
        "changed_files": 1,
        "created_at": "2022-06-26T18:20:37Z",
        "closed_at": "2022-06-26T21:12:56Z",
        "merged_at": "2022-06-26T21:12:56Z",
        "body": "This PR fixes a compatibility issue with the ASF API Gateway implementation, where async responses would render to `\"{}\"` rather than `\"\"`.\r\n\r\nThe `LambdaResponse` content field would be an empty dictionary, and with the old edge proxy we're setting that to `\"\"` in a very generalized way: https://github.com/localstack/localstack/blob/0ae805df648e1a8c5824cddf5abbd1200acd2532/localstack/utils/server/http2_server.py#L207\r\n\r\nwe don't manipulate response bodies in the same way without knowing anything about their content types in the ASF gateway, so this PR makes sure the LambdaResponse content is set to `\"\"` before it even leaves the apigateway provider.",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 41,
        "deletions": 36,
        "changed_files": 3,
        "created_at": "2022-06-26T14:09:50Z",
        "closed_at": "2022-06-26T21:12:27Z",
        "merged_at": "2022-06-26T21:12:27Z",
        "body": "This PR follows up on #6344 which i didn't test completely against v1. There's a patch that changes moto to call an `s3_listener` method, which can raise a `NoSuchBucket` error, which moto doesn't know how to handle, so we have to translate back to a moto `MissingBucket` exception.\r\n\r\nI also migrated the affected test and refactored them to correctly be under `TestS3` class.\r\n\r\nIt fixes the [failing s3 tests](https://app.circleci.com/pipelines/github/localstack/localstack/7096/workflows/642ef431-5b37-4d04-b0b8-515945ca9f6c/jobs/42907/tests#failed-test) in the v1 integration",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 153,
        "deletions": 148,
        "changed_files": 1,
        "created_at": "2022-06-25T07:08:20Z",
        "closed_at": "2022-06-29T13:28:24Z",
        "merged_at": "2022-06-29T13:28:24Z",
        "body": null,
        "comments": 2
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-06-25T03:18:09Z",
        "closed_at": "2022-06-28T09:27:16Z",
        "merged_at": "2022-06-28T09:27:16Z",
        "body": "This PR fixes an issue where `copy.deepcopy` would fail on a backend that looks like this:\r\n```python\r\n\r\nclass MyProviderState(RegionBackend):\r\n    distributions: Dict[str, Distribution]\r\n    # ...\r\n\r\n    def __init__(self):\r\n        self.distributions = {}\r\n        # ...\r\n\r\n    @classmethod\r\n    def get_current_request_region(cls):\r\n        # Note: no regions required - distributions are global\r\n        return \"global\"\r\n```\r\n\r\ncalling `copy.deepcopy(MyProviderState.__dict__)` would fail here, because the dict of the class will contain the classmethod `get_current_request_region` as a method descriptor, which cannot be pickled by `deepcopy`, resulting in exceptions.\r\n\r\n```\r\n{\r\n    '__module__': '__main__',\r\n    '__annotations__': {\r\n        'distributions': typing.Dict[str, ...]\r\n    },\r\n    '__init__': <function MyProviderState.__init__ at 0x7f7483ce9ea0>,\r\n    'get_current_request_region': <classmethod(<function MyProviderState.get_current_request_region at 0x7f7483ce9fc0>)>,\r\n    '__doc__': None\r\n}\r\n```\r\n\r\nthis simple fix just filters out method descriptors",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2022-06-25T02:14:38Z",
        "closed_at": "2022-06-25T12:01:38Z",
        "merged_at": "2022-06-25T12:01:38Z",
        "body": "This PR fixes an issue that would prevent the ASF gateway from starting with SSL mode enabled.\r\n\r\nIn the edge proxy we were completely ignoring the `use_ssl` attribute, doing some really strange things:\r\n\r\n* first we were ignoring it and setting it to false by default: https://github.com/localstack/localstack/blob/d37917610da1dc95156f84aba5a353dda0104eac/localstack/services/edge.py#L437-L440\r\n* then we were ignoring it again, and setting it to true by default: https://github.com/localstack/localstack/blob/d37917610da1dc95156f84aba5a353dda0104eac/localstack/services/edge.py#L366-L369\r\n* but we're never actually setting it in the first place, because here it's set to true by default and never set explicitly when calling `start_component` https://github.com/localstack/localstack/blob/d37917610da1dc95156f84aba5a353dda0104eac/localstack/services/edge.py#L394\r\n\r\nwhat a ride\r\n\r\n/cc @alexrashed ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 26,
        "deletions": 16,
        "changed_files": 2,
        "created_at": "2022-06-25T01:28:16Z",
        "closed_at": "2022-06-25T14:13:12Z",
        "merged_at": "2022-06-25T14:13:11Z",
        "body": "This PR fixes ASF compatibility with the recently introduced changes in #6325. The exception wasn't actually raised, should have seen that in the review.\r\nI also moved the new test into `TestS3` which is the class grouping the basic API calls.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 14,
        "deletions": 7,
        "changed_files": 3,
        "created_at": "2022-06-25T00:59:48Z",
        "closed_at": "2022-06-25T10:56:23Z",
        "merged_at": "2022-06-25T10:56:23Z",
        "body": "This PR fixes a recently introduced test #6289 when running with the `asf` apigateway provider.\r\n\r\nThe error originated from not converting lambda responses correctly into werkzeug Response objects (which was expecting strings but receiving dicts to convert to JSON).\r\n\r\nFYI: there's at least one instance where content-length is set to '1' because a a dictionary is passed to `update_content_length`, although it expects a string/bytes value here: https://github.com/localstack/localstack/blob/d37917610da1dc95156f84aba5a353dda0104eac/localstack/services/apigateway/invocations.py#L388-L392\r\n\r\nsetting content-length manually leads to all sorts of problems and isn't necessary anymore as we move to werkzeug, which handles content-length itself. @calvernaz we should touch base to make sure we're using the new features from ASF, which will simplify a lot! :-)",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 733,
        "deletions": 35,
        "changed_files": 11,
        "created_at": "2022-06-24T22:49:43Z",
        "closed_at": "2022-08-18T16:34:54Z",
        "merged_at": "2022-08-18T16:34:54Z",
        "body": "This PR addresses issue #5914. The Patch adds support to the AWS Lambda URL feature.\r\n\r\nChanges:\r\n- CRUD for Lambda Url configurations.\r\n- Lambda URL invocation through an endpoint.\r\n- Test to validate the support of the feature.\r\n",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 4104,
        "deletions": 2,
        "changed_files": 3,
        "created_at": "2022-06-24T19:31:28Z",
        "closed_at": "2022-06-30T08:25:03Z",
        "merged_at": null,
        "body": ":construction: checking how many tests fail when using default moto",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 32,
        "deletions": 5,
        "changed_files": 2,
        "created_at": "2022-06-24T13:02:11Z",
        "closed_at": "2022-06-28T09:25:10Z",
        "merged_at": "2022-06-28T09:25:09Z",
        "body": "### Summary\r\n\r\nSES has a backdoor endpoint `/_localstack/ses` to get all sent emails.\r\n\r\nThis PR adds a URL param `email` to filter by source email\r\n\r\nThis filters is used by localstack web's SES resource manager.\r\n\r\n### Related\r\n\r\nPart of https://github.com/localstack/localstack/issues/6317",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 65,
        "deletions": 32,
        "changed_files": 3,
        "created_at": "2022-06-24T12:22:24Z",
        "closed_at": "2022-06-24T14:21:50Z",
        "merged_at": "2022-06-24T14:21:50Z",
        "body": "## PR Reason\r\nWe are seeing, especially since the switch to python 3.10 for runtime components, more and more reports about us breaking the CLI for older python versions with our usage of python3.10 features in code which gets imported by using the CLI.\r\nThis PR adds a build matrix testing basic CLI features (starting LS etc) with python versions 3.7 - 3.10.\r\n\r\n## Changes\r\n* Add github workflow with job matrix for CLI tests\r\n* switch CLI tests over to usage of the CmdDockerClient (as is the default for CLI anyway).\r\n\r\n## Impact\r\n* Since I only install dependencies of the base package + pytest, imports to runtime dependencies from CLI code should also be caught\r\n* Usage of python functionality of higher versions should be caught\r\n* Fixtures from the localstack/testing package are explicitly deactivated, to avoid installing runtime/test dependencies (other than pytest) for the tests, since they are not present when using the CLI regularly either.\r\n\r\n## Future work\r\n* We should also, at some point, test pro cli functionality against different python versions (there have been issues there as well)\r\n* Add more CLI tests",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-06-24T07:56:09Z",
        "closed_at": "2022-06-27T07:46:09Z",
        "merged_at": "2022-06-27T07:46:09Z",
        "body": "With https://github.com/localstack/localstack/pull/6297, a Docker-native `HEALTHCHECK` has been introduced.\r\nDocker shows the log output of the command when inspecting the container (this is also contained in our diagnose endpoint data).\r\nFor the health check, the CLI's `status services` command is used, which by default prints a nicely formatted table.\r\nThis table obviously is quite unreadable in the logs (because it's basically just a bunch of unicode characters):\r\n```\r\n{\r\n  \"Status\": \"healthy\",\r\n  \"FailingStreak\": 0,\r\n  \"Log\": [\r\n    {\r\n      \"Start\": \"2022-06-24T09:55:41.209356566+02:00\",\r\n      \"End\": \"2022-06-24T09:55:41.915356053+02:00\",\r\n      \"ExitCode\": 0,\r\n      \"Output\": \"\u250f\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\\n\u2503 Service                  \u2503 Status      \u2503\\n\u2521\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2529\\n\u2502 acm                      \u2502 \u2714 available \u2502\\n\u2502 apigateway               \u2502 \u2714 available \u2502\\n\u2502 cloudformation           \u2502 \u2714 available \u2502\\n\u2502 cloudwatch               \u2502 \u2714 available \u2502\\n\u2502 config                   \u2502 \u2714 available \u2502\\n\u2502 dynamodb                 \u2502 \u2714 available \u2502\\n\u2502 dynamodbstreams          \u2502 \u2714 available \u2502\\n\u2502 ec2                      \u2502 \u2714 available \u2502\\n\u2502 es                       \u2502 \u2714 available \u2502\\n\u2502 events                   \u2502 \u2714 available \u2502\\n\u2502 firehose                 \u2502 \u2714 available \u2502\\n\u2502 iam                      \u2502 \u2714 available \u2502\\n\u2502 kinesis                  \u2502 \u2714 available \u2502\\n\u2502 kms                      \u2502 \u2714 available \u2502\\n\u2502 lambda                   \u2502 \u2714 available \u2502\\n\u2502 logs                     \u2502 \u2714 available \u2502\\n\u2502 opensearch               \u2502 \u2714 available \u2502\\n\u2502 redshift                 \u2502 \u2714 available \u2502\\n\u2502 resource-groups          \u2502 \u2714 available \u2502\\n\u2502 resourcegroupstaggingapi \u2502 \u2714 available \u2502\\n\u2502 route53                  \u2502 \u2714 available \u2502\\n\u2502 route53resolver          \u2502 \u2714 available \u2502\\n\u2502 s3                       \u2502 \u2714 available \u2502\\n\u2502 s3control                \u2502 \u2714 available \u2502\\n\u2502 secretsmanager           \u2502 \u2714 available \u2502\\n\u2502 ses                      \u2502 \u2714 available \u2502\\n\u2502 sns                      \u2502 \u2714 available \u2502\\n\u2502 sqs                      \u2502 \u2714 available \u2502\\n\u2502 ssm                      \u2502 \u2714 available \u2502\\n\u2502 stepfunctions            \u2502 \u2714 available \u2502\\n\u2502 sts                      \u2502 \u2714 available \u2502\\n\u2502 support                  \u2502 \u2714 available \u2502\\n\u2502 swf                      \u2502 \u2714 available \u2502\\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\\n\"\r\n    }\r\n  ]\r\n}\r\n```\r\n\r\nThis PR changes the formatting of the health check command output to JSON, which makes the health (machine) logs readable when running `docker inspect` or looking at the diagnose endoint result:\r\n```\r\n$ docker inspect localstack_main | jq -r .[0].State.Health\r\n{\r\n  \"Status\": \"healthy\",\r\n  \"FailingStreak\": 0,\r\n  \"Log\": [\r\n    {\r\n      \"Start\": \"2022-06-24T09:53:41.115539305+02:00\",\r\n      \"End\": \"2022-06-24T09:53:41.802036479+02:00\",\r\n      \"ExitCode\": 0,\r\n      \"Output\": \"{\\\"acm\\\": \\\"available\\\", \\\"apigateway\\\": \\\"available\\\", \\\"cloudformation\\\": \\\"available\\\", \\n\\\"cloudwatch\\\": \\\"available\\\", \\\"config\\\": \\\"available\\\", \\\"dynamodb\\\": \\\"available\\\", \\n\\\"dynamodbstreams\\\": \\\"available\\\", \\\"ec2\\\": \\\"available\\\", \\\"es\\\": \\\"available\\\", \\\"events\\\":\\n\\\"available\\\", \\\"firehose\\\": \\\"available\\\", \\\"iam\\\": \\\"available\\\", \\\"kinesis\\\": \\n\\\"available\\\", \\\"kms\\\": \\\"available\\\", \\\"lambda\\\": \\\"available\\\", \\\"logs\\\": \\\"available\\\", \\n\\\"opensearch\\\": \\\"available\\\", \\\"redshift\\\": \\\"available\\\", \\\"resource-groups\\\": \\n\\\"available\\\", \\\"resourcegroupstaggingapi\\\": \\\"available\\\", \\\"route53\\\": \\\"available\\\", \\n\\\"route53resolver\\\": \\\"available\\\", \\\"s3\\\": \\\"available\\\", \\\"s3control\\\": \\\"available\\\", \\n\\\"secretsmanager\\\": \\\"available\\\", \\\"ses\\\": \\\"available\\\", \\\"sns\\\": \\\"available\\\", \\\"sqs\\\": \\n\\\"available\\\", \\\"ssm\\\": \\\"available\\\", \\\"stepfunctions\\\": \\\"available\\\", \\\"sts\\\": \\n\\\"available\\\", \\\"support\\\": \\\"available\\\", \\\"swf\\\": \\\"available\\\"}\\n\"\r\n    }\r\n  ]\r\n}\r\n```",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 35,
        "deletions": 29,
        "changed_files": 2,
        "created_at": "2022-06-23T15:35:06Z",
        "closed_at": "2022-07-08T13:18:45Z",
        "merged_at": "2022-07-08T13:18:45Z",
        "body": "Validating KMS tests against AWS:\r\n\r\n- [x] `test_create_key`\r\n- [x] `test_create_grant_with_invalid_key`\r\n- [x] `test_list_grants_with_invalid_key`\r\n- [x] `test_create_grant_with_valid_key`\r\n- [x] `test_revoke_grant`\r\n- [x] `test_retire_grant`\r\n- [ ] `test_asymmetric_keys`\r\n- [ ] `test_sign`\r\n- [x] `test_get_and_list_sign_key`\r\n- [ ] `test_import_key`\r\n- [x] `test_list_aliases_of_key`\r\n\r\n\r\nThe remaining tests have some implementation issues regarding the usage of correct ciphers with algorithms etc. /cc @whummer ",
        "comments": 3
    },
    {
        "merged": false,
        "additions": 372,
        "deletions": 0,
        "changed_files": 3,
        "created_at": "2022-06-23T13:06:16Z",
        "closed_at": "2023-07-18T09:49:10Z",
        "merged_at": null,
        "body": "POC of a testing setup using pulumi to create required resources\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 21,
        "deletions": 3,
        "changed_files": 3,
        "created_at": "2022-06-23T09:29:12Z",
        "closed_at": "2022-06-27T11:30:07Z",
        "merged_at": "2022-06-27T11:30:07Z",
        "body": "### Summary\r\n\r\nThis puts multi-accounts behind a feature flag `MULTI_ACCOUNTS` which is disabled by default.",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 6,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2022-06-23T07:32:35Z",
        "closed_at": "2022-06-23T11:29:29Z",
        "merged_at": "2022-06-23T11:29:29Z",
        "body": "This PR only contains a small change in the ASF API Gateway router (which is not enabled yet in master) introduced with https://github.com/localstack/localstack/pull/6267.\r\nIt ensures that a single instance of the router only registers its dynamic routes once.\r\nThis allows a router instance to be shared among multiple providers or be called by a single provider multiple times while ensuring that the HTTP router isn't spammed with duplicate routes.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 195,
        "deletions": 103,
        "changed_files": 4,
        "created_at": "2022-06-22T20:47:53Z",
        "closed_at": "2022-06-23T09:19:59Z",
        "merged_at": "2022-06-23T09:19:59Z",
        "body": "Attach additional attributes to S3 bucket objects instead of using global dicts.\r\n\r\nThis fixes an issue that has surfaced while investigating a user issue related to persistence state that gets lost after restarting the instance. The root cause is that we're currently only persisting the FakeBucket objects themselves, but _not_ any additional attributes attached to the `s3_backend` moto object.\r\n\r\nSummary of changes:\r\n* Remove the existing global state dicts like `S3_NOTIFICATIONS`, `BUCKET_CORS`, etc.\r\n* Introduce a `BackendState` util class that performs lookup and initialization of additional attributes. The attributes are attached to the `FakeBucket` moto backend objects directly\r\n* Minor fix that strips query params from `extract_bucket_name(..)` function - this was discovered during testing when messages like `specified bucket test-bucket-4e8e77a1?encoding-type=url does not exist` popped up in the logs\r\n\r\nThis is a quick fix that primarily aims at fixing the broken persistence configuration. Overall, we should double-check if some of the custom additional bucket attributes can be removed, in case the logic has already been added upstream. \ud83e\uddf9 ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 488,
        "deletions": 46,
        "changed_files": 11,
        "created_at": "2022-06-22T20:30:12Z",
        "closed_at": "2022-07-08T09:02:22Z",
        "merged_at": "2022-07-08T09:02:22Z",
        "body": "## PR reason\r\nThis changes are needed to support advanced policy evaluation as part of our efforts to improve IAM policy enforcement.\r\nIt contains several breaking changes, which is the reason for the PR target being v1.\r\n\r\n## Major changes\r\n* The default principal you are assumed to be when using localstack with invalid (not registered with IAM/sts) credentials is the root principal, not the (invalid) principal `arn:aws:sts::000000000000:user/localstack`. This might change client code for some users, which is why this PR targets v1.\r\n* Deprecate feature to customize the before-mentioned invalid user using TEST_IAM_USER_NAME/ID. Since it was never part of the documentation, the impacted user base should be minimal, still a breaking change. Reason for removal is little benefit, while introducing a inconsistency (you \"are\" a user which does not exist) in our model.\r\n## Feature additions\r\n* Allow for permission boundaries to be set for users\r\n* IAM getuser will now return correct response, depending on the principal calling this operation\r\n## Side effects\r\n* Moved a lot of fixtures / test helpers from pro to community to help with iam entity management during tests.",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 34,
        "deletions": 105,
        "changed_files": 5,
        "created_at": "2022-06-22T14:44:58Z",
        "closed_at": "2022-06-22T20:42:18Z",
        "merged_at": "2022-06-22T20:42:18Z",
        "body": "Bump moto-ext to 3.1.12 . This mini release contains a few cherry-picked commits that were contributed upstream by our team, and are required for some follow-up changes (e.g., https://github.com/localstack/localstack/pull/6277).\r\n\r\nWe're currently _not_ yet upgrading to latest upstream moto `master`, as there are still some conflicting changes with the recent multi-account rework.\r\n\r\nWas able to get a bunch of logic removed that is now available upstream (Route53 VPC<>hosted zone associations). Some tests had to be slightly adjusted to fit the new logic.\r\n\r\nAlso, had to make a minor patch that seems to be related to URL-encoding of `\"/\"` characters in S3 object paths (see [this change](https://github.com/spulec/moto/pull/5184/files#diff-fb7f4f6a01e8126a8e6c97e616844e2413bdaa6219c5a25f88c05127a3c885d2R157-R160)): https://github.com/localstack/localstack/pull/6323/files#diff-f07cb774dec66f57695121f29d8f95be3c644e02e26907d6258eee043380b551R366-R371 To be investigated with @pinzon \ud83d\udc4d ",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-06-22T14:20:32Z",
        "closed_at": "2022-06-23T09:44:18Z",
        "merged_at": "2022-06-23T09:44:17Z",
        "body": "Handles situations where the access key is not set in the request.\r\n\r\n```\r\n2022-06-22T13:57:36.536:ERROR:localstack.aws.handlers.logging: exception during call chain\r\nTraceback (most recent call last):\r\n  File \"/opt/code/localstack/localstack/aws/chain.py\", line 57, in handle\r\n    handler(self, self.context, response)\r\n  File \"/opt/code/localstack/localstack/aws/handlers/service.py\", line 120, in __call__\r\n    handler(chain, context, response)\r\n  File \"/opt/code/localstack/localstack/aws/handlers/legacy.py\", line 69, in __call__\r\n    result = self.forward_request(\r\n  File \"/opt/code/localstack/localstack/aws/handlers/legacy.py\", line 129, in forward_request\r\n    return do_forward_request(\r\n  File \"/opt/code/localstack/localstack/utils/patch.py\", line 38, in proxy\r\n    return new(target, *args, **kwargs)\r\n  File \"/opt/code/localstack/.venv/lib/python3.10/site-packages/localstack_ext/services/edge.py\", line 156, in do_forward_request\r\n    return fn(api, method, path, data, headers, *args, **kwargs)\r\n  File \"/opt/code/localstack/localstack/services/edge.py\", line 225, in do_forward_request\r\n    result = do_forward_request_inmem(api, method, path, data, headers, port=port)\r\n  File \"/opt/code/localstack/localstack/services/edge.py\", line 249, in do_forward_request_inmem\r\n    response = modify_and_forward(\r\n  File \"/opt/code/localstack/localstack/services/generic_proxy.py\", line 589, in wrapper\r\n    value = func(*args, **kwargs)\r\n  File \"/opt/code/localstack/localstack/services/generic_proxy.py\", line 669, in modify_and_forward\r\n    listener_result = listener.forward_request(\r\n  File \"/opt/code/localstack/localstack/http/adapters.py\", line 51, in forward_request\r\n    response = self.request(request)\r\n  File \"/opt/code/localstack/localstack/services/sts/provider.py\", line 37, in request\r\n    response = super().request(request)\r\n  File \"/opt/code/localstack/localstack/aws/proxy.py\", line 37, in request\r\n    context = self.create_request_context(request)\r\n  File \"/opt/code/localstack/localstack/aws/proxy.py\", line 45, in create_request_context\r\n    context.account_id = self.get_account_id_from_request(request)\r\n  File \"/opt/code/localstack/localstack/aws/proxy.py\", line 51, in get_account_id_from_request\r\n    return get_account_id_from_access_key_id(access_key_id)\r\n  File \"/opt/code/localstack/localstack/aws/accounts.py\", line 30, in get_account_id_from_access_key_id\r\n    if re.match(r\"\\d{12}\", access_key_id):\r\n  File \"/usr/local/lib/python3.10/re.py\", line 190, in match\r\n    return _compile(pattern, flags).match(string)\r\nTypeError: expected string or bytes-like object\r\n```",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 24,
        "deletions": 7,
        "changed_files": 2,
        "created_at": "2022-06-22T11:04:25Z",
        "closed_at": "2022-06-22T14:38:18Z",
        "merged_at": "2022-06-22T14:38:18Z",
        "body": "This PR fixes an error in the service router that has not surfaced yet because we don't use the feature. it relates to matching services based on the endpointPrefix described in the spec, which is part of the host, and not the path how it was implemented.\r\n\r\nI added a small test that we can extend in a future iteration when the feature is used.\r\n\r\nThis actually gives us a way to disambiguate services like chime, where we can tell the user to set `awslocal --endpoint-url http://identity-chime.localhost.localstack.cloud` if they want to use the service.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 6,
        "deletions": 4,
        "changed_files": 2,
        "created_at": "2022-06-22T10:59:20Z",
        "closed_at": "2022-06-22T13:32:17Z",
        "merged_at": "2022-06-22T13:32:17Z",
        "body": "This PR adds RDS routing to the community version of the service name parser using the same mechanism introduced in #6311 \r\n\r\nI also added a small optimization to avoid checking custom endpoint path rules if the path is `/` (for which there aren't any custom path rules). while doing that, i saw that the code in block 3. is actually nonsense, specifically the `if path.startswith(endpointPrefix)`, since the endpointPrefix pertains to the host, not the path. i'll do that in a follow-up PR.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 7,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2022-06-22T09:22:19Z",
        "closed_at": "2022-06-22T11:45:40Z",
        "merged_at": "2022-06-22T11:45:40Z",
        "body": "The latest version of cryptography ([37.0.3](https://pypi.org/project/cryptography/37.0.3/)) causes issues in our CircleCI environment.\r\n\r\nThis PR is an attempt to fix these issues pinning the version of cryptography to the previous version (`37.0.2`).\r\nIn addition it also limits the log output of the service router unit tests introduced in https://github.com/localstack/localstack/pull/6311.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 14,
        "deletions": 11,
        "changed_files": 3,
        "created_at": "2022-06-21T21:01:20Z",
        "closed_at": "2022-06-24T18:01:28Z",
        "merged_at": "2022-06-24T18:01:28Z",
        "body": "This small PR:\r\n- adds the possibility to pass a custom persistence directory for stepfunctions (needed by Cloud Pods when `DATA_DIR` is not set);\r\n- slightly check for killing the pid.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 170,
        "deletions": 57,
        "changed_files": 4,
        "created_at": "2022-06-21T14:36:55Z",
        "closed_at": "2022-06-22T14:02:22Z",
        "merged_at": "2022-06-22T14:02:22Z",
        "body": "Make hashable list/dict utility classes immutable. This is a great point raised by @dfangl - we should ensure that the hashable collections represent a frozen/immutable copy and cannot be modified under the covers, to avoid unexpected side effects further down the line. \ud83d\udc4d \r\n\r\nThis is currently using a very simple, stripped down version of an `ImmutableDict` class (we could over time decide to pull in external libraries like `frozendict`). `ImmutableList` is simply a wrapper for `tuple` for now - if needed, it can also be extended over time.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 12,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2022-06-21T14:27:18Z",
        "closed_at": "2022-06-22T14:56:43Z",
        "merged_at": "2022-06-22T14:56:43Z",
        "body": "## Problem\r\n\r\nFollowing command can set queue attributes successfully, but the lambda won't be triggered from the dead letter queue.\r\n\r\n```\r\nawslocal sqs create-queue --queue-name MyQueue --attributes '{\"RedrivePolicy\": \"{\\\"deadLetterTargetArn\\\":\\\"arn:aws:sqs:us-east-1:000000000000:DeadLetterQueue\\\",\\\"maxReceiveCount\\\": \\\"5\\\" }\"}'\r\n```\r\n\r\n`maxReceiveCount` must be integer, but it should accept string as well.\r\n\r\n## Solution\r\n\r\nAccording to [the official AWS doc](https://docs.aws.amazon.com/cli/latest/reference/sqs/set-queue-attributes.html#examples), SQS attributes should accept the string value for `maxReceiveCount`.\r\nTo solve this, use `int` to cast the provided `maxReceiveCount` to integer.\r\n\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 190,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2022-06-21T12:03:19Z",
        "closed_at": "2022-06-21T20:35:31Z",
        "merged_at": "2022-06-21T20:35:31Z",
        "body": "This PR contains the following changes:\r\n- Fixes an issue with the service detection for services which have conflicts with other services, specifically for `timestream-write` and `timestream-query`.\r\n- Creates a dynamic, parameterized test - based on a prototype of @thrau - which checks every single service and operation.\r\n  - Some tests are skipped because there are conflicts in the service specs which force us to handle these differently (f.e. `rds`, `neptune`, and `docdb`). These special cases cannot be covered by such a generalized test.\r\n  - Unsupported services which cause problems are currently marked as `xfail`. This is quite debatable because this introduces 936 tests where their failure is ignored.\r\n  - The whole test run takes about 20 seconds (which is quite a lot for the unit tests), but it executes 11452 tests. We could also just test a subset, or only services which are currently supported (since currently we test _all_ services / operations).\r\n\r\nI'm looking forward to you feedback, especially concerning the dynamic test and its implications.",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 6,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2022-06-21T08:00:45Z",
        "closed_at": "2022-06-30T07:19:46Z",
        "merged_at": null,
        "body": "We're testing here how disabling parameter validation in boto affects the current test suite",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1242,
        "deletions": 21,
        "changed_files": 13,
        "created_at": "2022-06-20T12:07:38Z",
        "closed_at": "2022-07-11T17:15:53Z",
        "merged_at": "2022-07-11T17:15:53Z",
        "body": "**Introduce collection of parity metrics**\r\n\r\nThis PR contains preparation for collecting metrics. Metric collection can be enabled for an integration test run, and will then collect all requests and store the relevant information as raw data into a CSV.\r\nArtifact collection in CircleCI/Github action is currently disabled.\r\n\r\n- To run tests locally and output a metric-report, set env `LOCALSTACK_INTERNAL_TEST_COLLECT_METRIC=1`\r\n- Output of collected raw-data be found in folder `target/metric-reports/`\r\n- Added script to aggregate data (json, markdown for internal usage)\r\n- Added script to generate a report on implementation status for each service\r\n\r\n**Future Work:**\r\n- Create a CI action to collect metric data of _all_ integration tests, ideally for every release\r\n- Add a script to generate a report with simplified output, that could be used for docs",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 431,
        "deletions": 108,
        "changed_files": 23,
        "created_at": "2022-06-19T23:28:40Z",
        "closed_at": "2022-06-28T16:38:20Z",
        "merged_at": "2022-06-28T16:38:20Z",
        "body": "This PR finalizes the changes to the filesystem hierarchy we started in #5011 and introduces a semantically well-defined filesystem hierarchy for the localstack system. It cleanly separates directories created on the host (for CLI users or docker users mounting directories into the container), from the filesystem hierarchy in localstack. For host mode, we now use `./.filesystem` as filesystem root. The changes can be disabled by setting `LEGACY_DIRECTORIES=1`.\r\n\r\n# LocalStack filesystem hierarchy\r\n\r\nThe hierarchy inside the container will be as follows:\r\n\r\n* `/var/lib/localstack`:  the main localstack volume that stores data across localstack runs, this is what user's are interested in\r\n  * `/var/lib/localstack/lib`: variable packages (like lazy-loaded third-party dependencies, also referred to as `var_libs`)\r\n  * `/var/lib/localstack/logs`: logs of the recent localstack run\r\n  * `/var/lib/localstack/state`: persistent state of third-party services (or what we sometimes call \"data\" or \"assets\", e.g., opensearch cluster data)\r\n  * `/var/lib/localstack/tmp`: temporary data that does not survive localstack runs (is cleared when localstack starts)\r\n  * `/var/lib/localstack/cache`: temporary data that survives localstack runs (is _not_ cleared when localstack starts)\r\n\r\n* `/usr/lib/localstack`: static third-party packages installed into the container images. this was previously \"localstack/infra\", and is also referred to as `static_libs`\r\n\r\n* `/etc/localstack`: :construction: localstack configuration dir (for future use, currently not in use)\r\n  * `/etc/localstack/conf.d`: localstack configuration overwrites\r\n  * `/etc/localstack/init/`: localstack initialization hooks\r\n\r\n## User experience\r\n\r\nFrom a user perspective, it should be similar to the [mariadb and other database containers](https://hub.docker.com/_/mariadb), where you mount a local directory into `/var/lib/localstack`, which persist all the data required across localstack runs.\r\nCurrently this is achieved by this line: https://github.com/localstack/localstack/blob/6d5671a7b38c3bc83b8ff0563d4a956b60b0523f/docker-compose.yml#L21-L22\r\n\r\nUsers only need to change that to `/my/local/localstack/volume:/var/lib/localstack`, where the host path could still be `/tmp/localstack`.\r\n\r\n`DATA_DIR` and `HOST_TMP_FOLDER` are no longer used:\r\n* `DATA_DIR` points implicitly to `/my/local/localstack/volume/state`. if you want to use persistence, set `PERSISTENCE=1`. if you set `DATA_DIR`, then we have a deprecation path that we log a warning that `DATA_DIR` is ignored, but `PERSISTENCE` is set to 1\r\n* `HOST_TMP_FOLDER` is determined by inspecting the volume mounts and using the source of the bind mount to `/var/lib/localstack`.\r\n\r\nwhat they will see is something like this:\r\n\r\n```\r\nthomas@ninox /tmp/localstack % tree -L 3\r\n.\r\n\u251c\u2500\u2500 cache\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 machine.json\r\n\u2502   \u2514\u2500\u2500 localstack.opensearch-1.1.0-linux-x64.tar.gz\r\n\u251c\u2500\u2500 lib\r\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 opensearch\r\n\u2502\u00a0\u00a0     \u2514\u2500\u2500 1.1.0\r\n\u251c\u2500\u2500 logs\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 localstack_infra.err\r\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 localstack_infra.log\r\n\u251c\u2500\u2500 state\r\n\u2514\u2500\u2500 tmp\r\n    \u2514\u2500\u2500 zipfile.4986fb95 # <- lambda code\r\n```\r\n\r\n### CLI users\r\n\r\nPreviously, each path was individually configurable (like `DATA_DIR`, `VAR_LIBS`, `STATIC_LIBS`, etc..). this is no longer supported or needed. the only variable that needs to be set is `LOCALSTACK_VOLUME_DIR`, which is essentially turns into the docker flag `-v ${LOCALSTACK_VOLUME_DIR}:/var/lib/localstack`. by default, `LOCALSTACK_VOLUME_DIR=/tmp/localstack`, but that could change to `~/.cache/localstack/volume` (`~/.cache/localstack is also associated with the CLI`)\r\n\r\n## Developer experience (host mode)\r\n\r\nwhen running in host mode, we don't want to use `/usr/lib/localstack` or `/var/lib/localstack`, etc on the host, since those are associated with the system and root permissions. instead, we simply move the filesystem hierarchy root to the environment variable `FILESYSTEM_ROOT`, which is by default `./.filesystem` (from the localstack project root).\r\nthe hierarchy will look something like this (from the localstack project root):\r\n\r\n```\r\nthomas@ninox ~/workspace/localstack/localstack\r\n % tree .filesystem -L 4\r\n.filesystem\r\n\u251c\u2500\u2500 etc\r\n\u2502   \u2514\u2500\u2500 localstack\r\n\u2502       \u251c\u2500\u2500 conf.d\r\n\u2502       \u2514\u2500\u2500 init\r\n\u251c\u2500\u2500 usr\r\n\u2502   \u2514\u2500\u2500 lib\r\n\u2502       \u2514\u2500\u2500 localstack\r\n\u2502           \u251c\u2500\u2500 amazon-kinesis-client\r\n\u2502           \u251c\u2500\u2500 aws-lambda-rie\r\n\u2502           \u251c\u2500\u2500 dynamodb\r\n\u2502           \u251c\u2500\u2500 kinesis-mock\r\n\u2502           \u251c\u2500\u2500 kms\r\n\u2502           \u251c\u2500\u2500 lambda.cfn-response.js\r\n\u2502           \u251c\u2500\u2500 localstack-utils-fat.jar\r\n\u2502           \u2514\u2500\u2500 stepfunctions\r\n\u2514\u2500\u2500 var\r\n    \u2514\u2500\u2500 lib\r\n        \u2514\u2500\u2500 localstack\r\n            \u251c\u2500\u2500 cache\r\n            \u251c\u2500\u2500 state\r\n            \u251c\u2500\u2500 lib\r\n            \u251c\u2500\u2500 logs\r\n            \u2514\u2500\u2500 tmp\r\n```\r\n\r\n## Developer experience (building)\r\n\r\nWhen building the docker image, we need to do some installation prep of third-party libraries on the host before invoking `docker build`.\r\nWe piggy-back on the host-mode `.filesystem` directory, and simply `ADD .filesystem/usr/lib/localstack /usr/lib/localstack`.\r\nThis is not great IMO because it mixes concerns (host mode runtime with build time dependency management), but this is also they way it works right now.\r\n\r\n# PR Changes\r\n\r\nRundown of major changes:\r\n* the main volume target user is no longer `/tmp/localstack` but `/var/lib/localstack`, so `/tmp/localstack:/tmp/localstack` volume mounts need to change to `/tmp/localstack:/var/lib/localstack`\r\n* `config.dirs.tmp` is now cleared on every startup and shutdown\r\n* static libs are now `/usr/lib/localstack` (`./.filesystem/usr/lib/localstack` in host mode or when running `make init`)\r\n* var libs are now `/var/lib/localstack/libs`\r\n* the `config.dirs.function` dir is no longer needed. it was conceived at the time as a directory in the container where lambda code goes (instead of `tmp`), but was later used as config variable to hold the `HOST_TMP_PATH`, which is not needed (since we are inspecting the container now to find the value)\r\n* introduce config variable `LEGACY_DIRECTORIES` that can be activated as feature flag to enable to old mode\r\n* using the CLI to start localstack no longer creates the directories on the host. directories are only created when actually *running* localstack, or when we're in the container.\r\n* changed download destination to `config.dirs.cache` so downloaded archives are kept in case installation was incomplete\r\n\r\nRundown of other changes\r\n* remove explicit elasticmq download from Dockerfile into static_libs, and move it into var_libs (as part of phase-out)\r\n* create soft link from `/opt/code/localstack/localstack/infra` -> `/usr/lib/localstack` for backwards compatibility\r\n* move supervisord logs from `/tmp/localstack_infra.log` to `/var/lib/localstack/logs`, but create symlinks to not break peoples code\r\n\r\n# Limitations and future work\r\n\r\n* The separation of CLI and runtime configuration is still not clear enough for me. No directory configuration should be shared between the CLI and the runtime IMO.\r\n* There are lots of instances of the form (conceptually) `data_store = config.dirs.data or config.dirs.tmp`, these should slowly be migrated to simply use `config.dirs.data` (which will point to a temporary directory if `PERSISTENCE=0`), or use the `config.PERSISTENCE` flag if they want to set `data_store` (or whatever they are using) to `None`.\r\n* The package directory `var_libs` and `static_libs` still have no structure to them, I think we should introduce some well defined package index (like `site-packages`, `node_modules`, or maven's `.m2`)",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 14,
        "deletions": 27,
        "changed_files": 9,
        "created_at": "2022-06-19T16:32:24Z",
        "closed_at": "2022-06-20T12:37:33Z",
        "merged_at": "2022-06-20T12:37:33Z",
        "body": "This PR removes the `package.json` file, and moves the `node_modules` directory into `static_libs` (which is currently just `localstack/infra`).\r\n\r\nThis is a small step to unifying the directory hierarchy and package management.\r\n\r\nNode dependencies should now be installed individually by the installers. This is easy with the `npm install --prefix` flag that allows you to specify a directory (e.g., `dirs.static_libs` or `dirs.var_libs` in the future)\r\n\r\nThere is a companion PR in ext to resolve the serverless-iot-engine",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 4,
        "changed_files": 1,
        "created_at": "2022-06-19T12:25:53Z",
        "closed_at": "2022-06-20T10:40:41Z",
        "merged_at": "2022-06-20T10:40:41Z",
        "body": "As discussed with @bentsku, we are making him the SNS service owner",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2022-06-18T15:54:52Z",
        "closed_at": "2022-06-22T13:54:50Z",
        "merged_at": "2022-06-22T13:54:50Z",
        "body": "Hi!\r\n\r\nThanks for the useful software! After using localstack in a docker-compose project I thought it might be beneficial for a container health-check to be supported directly by the [localstack/localstack](https://hub.docker.com/r/localstack/localstack/#!) container. As it would be hard to provide tests for something like this I provided a screenshot of `docker ps` with these changes in my local environment.\r\n\r\n![image](https://user-images.githubusercontent.com/771345/174446367-e169e48e-853a-46c0-86b0-1a13e70a9b60.png)\r\n\r\n> Note: To get this branch working in your own local environment you'll need to either build and run the Docker container directly or update the `docker-compose.yml` file to build from the local Dockerfile and not pull an image from Dockerhub.\r\n\r\nI'm assuming there's some build process in the localstack CI/CD that will generate the appropriate container image and push it to Dockerhub. If there are additional changes necessary for this I'll be more than happy to implement them with some guidance.\r\n\r\nThanks for considering my PR!\r\n\r\n_Commit message below_\r\n\r\n---\r\n\r\nAdds a healthcheck to Dockerfile and Dockerfile.rh. Using curl it will\r\nping the /health endpoint every 10s, starting 15s after the container\r\nhas started running. If the /health endpoint returns any failure\r\nresponse the container will be marked unhealthy.\r\n\r\nThere are 2 primary motivations for adding this directly to the Dockerfile:\r\n\r\n1. Potentially less boilerplate in docker-compose.yml files that make use of\r\n   localstack.\r\n2. Docker container health status is no longer reliant on docker-compose\r\n   to determine. If you're running just the localstack container\r\n   you'll still be able to get access to the health.\r\n\r\n**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 7
    },
    {
        "merged": true,
        "additions": 65,
        "deletions": 16,
        "changed_files": 3,
        "created_at": "2022-06-17T21:11:36Z",
        "closed_at": "2022-06-18T23:19:11Z",
        "merged_at": "2022-06-18T23:19:11Z",
        "body": "Improve parity of `EncodingType`, `Delimiter` and `Marker` elements in S3 list_objects responses. This issue surfaced when running some tests with Athena queries that are querying data from S3 - tested against AWS (with `TEST_TARGET=AWS_CLOUD`). Currently still patching the `response` directly - applying this patch should get a bit nicer once we've migrated S3 to ASF. \ud83d\udc4d ",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 340,
        "deletions": 46,
        "changed_files": 7,
        "created_at": "2022-06-17T10:51:34Z",
        "closed_at": "2022-06-24T17:29:39Z",
        "merged_at": "2022-06-24T17:29:39Z",
        "body": "This PR separates lambda backend integrations on their different invocation types, AWS and AWS_PROXY:\r\n\r\n- AWS_PROXY integration type, has a specific `event` format and requires a specific response format. \r\n- AWS integration type the input `event` and the response output is custom, do not follow any particular structure. The input can be the body of the incoming request, or the query parameters.\r\n\r\nIt also wraps Lambda `AWS_PROXY` invocation type in a `LambdaProxyIntegration` class. The next iteration will wrap the `AWS` lambda invocation type in his own class.\r\n\r\nRelates with https://github.com/localstack/localstack/issues/5850",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 26,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2022-06-16T12:11:47Z",
        "closed_at": "2022-06-19T11:09:50Z",
        "merged_at": "2022-06-19T11:09:50Z",
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 267,
        "deletions": 30,
        "changed_files": 5,
        "created_at": "2022-06-16T08:34:05Z",
        "closed_at": "2022-06-22T18:27:49Z",
        "merged_at": "2022-06-22T18:27:49Z",
        "body": "This PR makes sure the import API includes the response templates and extracts the MOCK Integration into his own class.\r\n\r\n\r\nFixes the use case described [here](https://github.com/nulib/localstack-api-gateway) for the MOCK backend integration.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 26,
        "deletions": 24,
        "changed_files": 1,
        "created_at": "2022-06-15T21:55:03Z",
        "closed_at": "2022-06-23T11:35:09Z",
        "merged_at": "2022-06-23T11:35:09Z",
        "body": "Small fix against OpenAPI 2.0 authorizers definitions that are not AWS extensions.\r\n\r\nThis PR requires a fix done in moto [upstream](https://github.com/spulec/moto/pull/5224) \r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 21,
        "deletions": 3,
        "changed_files": 1,
        "created_at": "2022-06-15T21:23:36Z",
        "closed_at": "2022-06-16T13:23:57Z",
        "merged_at": "2022-06-16T13:23:57Z",
        "body": "This PR adds overwrite/restore logic to the `VirtualHostRewriter` for the `RAW_URI` attribute to the request environment. we need to modify this value because we are accessing it directly from the environment via `get_raw_path`.\r\n\r\nThis fixes two of the failing tests that surfaced with the ASF gateway.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 5014,
        "deletions": 1183,
        "changed_files": 147,
        "created_at": "2022-06-15T12:13:43Z",
        "closed_at": "2022-07-11T19:42:19Z",
        "merged_at": "2022-07-11T19:42:19Z",
        "body": "PR for the v1 release to trigger automated builds, see #6398 for details regarding the release.",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-06-14T23:16:13Z",
        "closed_at": "2022-09-07T06:26:39Z",
        "merged_at": null,
        "body": "The Openshift documentation [1] states that \"[...] directories and files that are written to by processes in the image must be owned by the root group and be read/writable by that group. Files to be executed must also have group execute permissions.\"\r\n\r\nThe official localstack image does not satisfy these requirements. The following  permission error prevents running localstack in Openshift:\r\n```\r\nError starting infrastructure: [Errno 13] Permission denied: '/opt/code/localstack/localstack/infra/dynamodb/log4j2.xml' Traceback (most recent call last):\r\n  File \"/opt/code/localstack/localstack/services/infra.py\", line 366, in start_infra\r\n    do_start_infra(asynchronous, apis, is_in_docker)\r\n  File \"/opt/code/localstack/localstack/services/infra.py\", line 427, in do_start_infra\r\n    prepare_installation()\r\n  File \"/opt/code/localstack/localstack/utils/analytics/profiler.py\", line 156, in wrapped\r\n    return f(*args, **kwargs)\r\n  File \"/opt/code/localstack/localstack/services/infra.py\", line 403, in prepare_installation\r\n    install.install_components(apis)\r\n  File \"/opt/code/localstack/localstack/services/install.py\", line 246, in install_components\r\n    parallelize(install_component, names)\r\n  File \"/opt/code/localstack/localstack/utils/common.py\", line 1261, in parallelize\r\n    result = pool.map(func, list)\r\n  File \"/usr/lib/python3.8/multiprocessing/pool.py\", line 364, in map\r\n    return self._map_async(func, iterable, mapstar, chunksize).get()\r\n  File \"/usr/lib/python3.8/multiprocessing/pool.py\", line 768, in get\r\n    raise self._value\r\n  File \"/usr/lib/python3.8/multiprocessing/pool.py\", line 125, in worker\r\n    result = (True, func(*args, **kwds))\r\n  File \"/usr/lib/python3.8/multiprocessing/pool.py\", line 48, in mapstar\r\n    return list(map(*args))\r\n  File \"/opt/code/localstack/localstack/services/install.py\", line 242, in install_component\r\n    installer()\r\n  File \"/opt/code/localstack/localstack/services/install.py\", line 203, in install_dynamodb_local\r\n    save_file(log4j2_file, log4j2_config)\r\n  File \"/opt/code/localstack/localstack/utils/common.py\", line 804, in save_file\r\n    with open(file, mode) as f:\r\nPermissionError: [Errno 13] Permission denied: '/opt/code/localstack/localstack/infra/dynamodb/log4j2.xml'\r\n\r\n```\r\n\r\nNote the permissions on the files in the k8s pod, and the Openshift user ID:\r\n```\r\n/opt/code/localstack $ id\r\nuid=1005450000(1005450000) gid=0(root) groups=1005450000\r\n/opt/code/localstack $ id localstack\r\nuid=1001(localstack) gid=1001(localstack) groups=1001(localstack)\r\n/opt/code/localstack $ ls -l /opt/code/localstack/localstack/infra/dynamodb/\r\ntotal 3728\r\n-rw-r--r--    1 root     root       3787565 Nov  6  2020 DynamoDBLocal.jar\r\ndrwxr-xr-x    2 localsta localsta      4096 May 28  2020 DynamoDBLocal_lib\r\n-rw-r--r--    1 localsta localsta      8644 May 28  2020 LICENSE.txt\r\n-rw-r--r--    1 localsta localsta      1856 May 28  2020 README.txt\r\n-rw-r--r--    1 localsta localsta\t344 Nov  6  2020 log4j2.xml\r\ndrwxr-xr-x    2 localsta localsta      4096 May 28  2020 third_party_licenses\r\n```\r\n\r\nTo avoid the file permission error mentioned above, it is necessary for Openshift users to \r\nmaintain a separate localstack image with modified file permissions.  \r\n\r\nFor example, I can successfully deploy localstack to my Openshift namespace using the following Dockerfile:\r\n```\r\nFROM docker.io/localstack/localstack:latest\r\n\r\nRUN chgrp -R 0 /opt/code/localstack/localstack && \\\r\n    chmod -R g=u /opt/code/localstack/localstack\r\n\r\nENTRYPOINT [\"docker-entrypoint.sh\"]\r\n```\r\nI'm requesting to make the same file permissions modifications (those which allow me to run localstack in Openshift) in the official localstack image.\r\n\r\n[1] https://docs.openshift.com/container-platform/4.10/openshift_images/create-images.html",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 13,
        "deletions": 3,
        "changed_files": 2,
        "created_at": "2022-06-14T22:52:00Z",
        "closed_at": "2022-06-15T11:41:29Z",
        "merged_at": "2022-06-15T11:41:29Z",
        "body": "### Problem\r\nThe Lambda endpoint subscription to a SNS topic is not auto confirmed for now even for same AWS account for the endpoint and topic.\r\nThe issue encountered by the user is that Terraform then timeout because the subscription attributes contain `\"PendingConfirmation\"=\"true\"` indefinitely.\r\n\r\n### Solution\r\nAdd a small change to auto confirm Lambda subscriptions to a SNS topic like for SQS (they have the same behaviour). This will need to be revisited for multi-account, as stated on AWS documentation for the `Subscribe` action.\r\n\r\nhttps://docs.aws.amazon.com/sns/latest/api/API_Subscribe.html",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 527,
        "deletions": 104,
        "changed_files": 16,
        "created_at": "2022-06-14T21:55:14Z",
        "closed_at": "2022-07-06T12:02:57Z",
        "merged_at": "2022-07-06T12:02:57Z",
        "body": "adds a response handler that aggregates HTTP response data (service, operation, and status code) and periodically emits relevant analytics events.\r\n\r\nThis handler is currently only active when `LEGACY_EDGE_PROXY=0`.\r\n\r\nI tested this end-to-end using a locally running version of the analytics backend. I did not add any automated tests because I was unable to locate any other handler tests and wasn't sure of the best way to go about it - I'd be happy to add one though and am open to strategic suggestions.",
        "comments": 9
    },
    {
        "merged": true,
        "additions": 352,
        "deletions": 124,
        "changed_files": 5,
        "created_at": "2022-06-14T21:49:40Z",
        "closed_at": "2022-06-20T14:42:54Z",
        "merged_at": "2022-06-20T14:42:53Z",
        "body": "This PR started as a fix to #6227. It was the occasion to check the behaviour of AWS against a HTTP endpoint.\r\nIt fixes the original issue, as well as small issues of headers, DLQ and message fields.\r\nIt overrides #6234 as the assumptions were wrong, and the PR scope is a bit wider. \r\n\r\n### Original problem\r\n\r\nAs stated in the issue, it wasn't possible to confirm a subscription from a http endpoint, as the URL contained in the message was missing a `Version` field which was required by the service router.\r\nWe checked with @alexrashed the best way to fix it, which required being less strict. A second problem arose, as we could have similar action names and not knowing which service was called.\r\nSpecifically the `Unsubscribe` action from `sns`(query protocol) and `codestar-notifications` (json-rest protocol).\r\n\r\n### Solutions\r\nThe `operation_index` in `localstack/aws/spec.py` got a level added with the `protocol` of the request. The original issue is now fixed.\r\nA bug in the test cleanup of the SNS http endpoint dragged me into trying to fix it, and checking AWS behaviour as well, as we needed to also know if AWS could route requests with `query` protocol without the `Version` parameter (it can and it does, the URL was properly constructed in our SNS implementation). \r\nDoing so, I then fixed some parity errors in message fields and headers, and matched AWS on DLQ delivery for UnsubscribeConfirmation messages. \r\nI saw a small minor issue with payload size reported in Slack, so I quickly fixed it and added a test. If it needs it own PR, I will move it.\r\n\r\n### Tests\r\nAdded two tests testing against http endpoints, that I tested manually against AWS, as it needs a setup to expose an external http endpoint to AWS.\r\nPlus a small test for the minor issue.\r\nI'm not fond of the fixture `sns_create_http_endpoint` that return 4 arbitrary values, and I'm open to any idea to make it better: TypedDict, or a whole change? \r\n\r\n_fixes #6227_",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 135,
        "deletions": 146,
        "changed_files": 3,
        "created_at": "2022-06-14T14:05:25Z",
        "closed_at": "2022-06-14T15:11:57Z",
        "merged_at": "2022-06-14T15:11:57Z",
        "body": "With #6040, a new provider for API Gateway has been introduced, which uses native ASF features for the routing instead of the legacy proxy listener. It registered a route for each created API in API Gateway.\r\nThis PR refactors the new routing approach a bit such that it only registers a handful of parameterized routes.\r\nThis has the following benefits:\r\n- The `ApigatewayRouter` now correctly returns an HTTP 404 if a request targets a non-existing API.\r\n- The `ApigatewayRouter` now already parses all the path and host parameters (`stage`, `api_id`, `path`).\r\n  - These aren't used yet, but these should essentially replace all the regex parsing in `helpers.py#set_api_id_stage_invocation_path`.\r\n  - These should be introduced with a bigger refactoring of the API Gateway infrastructure.\r\n- The `ApigatewayRouter` completely handles the routing, the creation of the invocation context, and finally the invocation of the API.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 24,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2022-06-13T18:13:53Z",
        "closed_at": "2022-06-15T11:46:53Z",
        "merged_at": "2022-06-15T11:46:53Z",
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 0,
        "deletions": 72,
        "changed_files": 1,
        "created_at": "2022-06-13T17:42:51Z",
        "closed_at": "2022-06-30T10:10:54Z",
        "merged_at": null,
        "body": "- removed vpc association methods as this was added in moto.\r\n\r\nNote:\r\n- We should merge it after [moto#5223](https://github.com/spulec/moto/pull/5223) is merged.",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 14,
        "deletions": 125,
        "changed_files": 5,
        "created_at": "2022-06-13T15:55:37Z",
        "closed_at": "2022-06-14T07:26:17Z",
        "merged_at": "2022-06-14T07:26:17Z",
        "body": "This PR changes the label names where present in GitHub workflows. Before merging this PR the labels need to be updated in GitHub.\r\n\r\nThe affected labels are:\r\n* `bug` --> `type: bug`\r\n* `feature-request` --> `type: feature`\r\n* `needs-triaging` --> `status: needs triage`\r\n* `closing-soon` --> `status: stale`\r\n* `feature-request-approved` --> `status: accepted`\r\n* `bug-confirmed` --> `status: confirmed`\r\n* `awaiting-response` --> `status: awaiting response`\r\n* `closed-due-to-staleness` --> `status: resolved/stale`\r\n* `asf` --> `area: asf`\r\n\r\n\r\nAlso, this removes `labeler.yml` as it seems that this isn't used anymore.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 89,
        "deletions": 10,
        "changed_files": 4,
        "created_at": "2022-06-13T13:45:47Z",
        "closed_at": "2022-06-23T13:04:07Z",
        "merged_at": "2022-06-23T13:04:07Z",
        "body": "When using the moto-backed handler, listing aliases does not consider the key-id. This PR adds that functionality.\r\n\r\nAddresses #6193 ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 96,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2022-06-13T12:35:50Z",
        "closed_at": "2022-06-13T15:46:35Z",
        "merged_at": "2022-06-13T15:46:35Z",
        "body": "## Problem\r\nGetApiKeys currently has no mechanism for filtering the response by name, as not implemented in moto\r\n\r\n## Fix\r\nThis PR fixes the behavior, and introduces the use of a paginated list for the response as well.\r\nAs verified against AWS (see AWS validated test), name_query now serves as a filter by prefix.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 23,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2022-06-13T05:08:48Z",
        "closed_at": "2022-06-13T08:20:51Z",
        "merged_at": "2022-06-13T08:20:51Z",
        "body": "# \ud83d\ude80 ASF Update Report \ud83d\ude80\nThis PR has been automatically generated to update the generated API stubs for our ASF services.\nIt uses the latest code-generator from the _master_ branch ([scaffold.py](https://github.com/localstack/localstack/blob/master/localstack/aws/scaffold.py)) and the latest _published_ version of [botocore](https://github.com/boto/botocore) to re-generate all API stubs which are already present in the `localstack.aws.api` module of the _master_ branch.\n\n## \ud83d\udd04 Updated Services\nThis PR updates the following services:\n- redshift\n\n## \ud83d\udc77\ud83c\udffd Handle this PR\nThe following options describe how to interact with this PR / the auto-update:\n\n\u2714\ufe0f **Accept Changes**\nIf the changes are satisfying, just squash-merge the PR and delete the source branch.\n\n\ud83d\udeab **Ignore Changes**\nIf you want to ignore the changes in this PR, just close the PR and *do not delete* the source branch. The PR will not be opened and a new PR will not be created for as long as the generated code does not change (or the branch is deleted). As soon as there are new changes, a new PR will be created.\n\n\u270f\ufe0f **Adapt Changes**\n*Don't do this.* The APIs are auto-generated. If you decide that the APIs should look different, you have to change the code-generation.\n\n\u23f8\ufe0f **Pause Updates**\nRemove the cron-schedule trigger of the GitHub Action workflow which creates these PRs. The action can then still be triggered manually, but it will not be executed automatically.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2022-06-13T01:35:22Z",
        "closed_at": "2022-06-13T07:15:43Z",
        "merged_at": "2022-06-13T07:15:43Z",
        "body": "[![Mend Renovate](https://app.renovatebot.com/images/banner.svg)](https://renovatebot.com)\n\nThis PR contains the following updates:\n\n| Package | Type | Update | Change |\n|---|---|---|---|\n| python | final | patch | `3.10.4-slim-buster` -> `3.10.5-slim-buster` |\n| python | stage | patch | `3.10.4-slim-buster` -> `3.10.5-slim-buster` |\n\n---\n\n### Configuration\n\n\ud83d\udcc5 **Schedule**: Branch creation - \"before 3am on Monday\" (UTC), Automerge - At any time (no schedule defined).\n\n\ud83d\udea6 **Automerge**: Disabled by config. Please merge this manually once you are satisfied.\n\n\u267b **Rebasing**: Whenever PR becomes conflicted, or you tick the rebase/retry checkbox.\n\n\ud83d\udd15 **Ignore**: Close this PR and you won't be reminded about these updates again.\n\n---\n\n - [ ] <!-- rebase-check -->If you want to rebase/retry this PR, click this checkbox.\n\n---\n\nThis PR has been generated by [Mend Renovate](https://www.mend.io/free-developer-tools/renovate/). View repository job log [here](https://app.renovatebot.com/dashboard#github/localstack/localstack).",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 160,
        "deletions": 70,
        "changed_files": 7,
        "created_at": "2022-06-12T20:56:42Z",
        "closed_at": "2022-06-24T06:53:20Z",
        "merged_at": "2022-06-24T06:53:19Z",
        "body": "Currently, in Localstack, an API Gateway setup with a backend Lambda integration had no option to invoke the lambda [asynchronously](https://docs.aws.amazon.com/apigateway/latest/developerguide/set-up-lambda-integration-async.html). To invoke a lambda asynchronously through API Gateway we need to set up the integration to pass the header `X-Amz-Invocation-Type` with `\"'Event'\"` value to the lambda runtime.\r\n\r\nThe integration configuration setup looks like the following,\r\n```\r\n  request_parameters = {\r\n    \"integration.request.header.X-Amz-Invocation-Type\" = \"'Event'\"\r\n  }\r\n```\r\n\r\nBefore we invoke the lambda executor we parse the request parameters and add the headers included in the configuration.\r\n\r\nThe next iteration will improve upon this feature by sourcing method request parameters and pass them to integration request parameters.\r\n\r\nRelates with https://github.com/localstack/localstack/issues/5850",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-06-12T20:26:32Z",
        "closed_at": "2022-06-14T18:57:36Z",
        "merged_at": "2022-06-14T18:57:35Z",
        "body": "This PR fixes a wrong HTTP status on the InvalidObjectState error implementation.\r\n\r\nI reported a wrong status code for the InvalidObjectState error on #6242.\r\nThe reported error comes from the [moto](https://github.com/spulec/moto) library. However, there is an implementation in the localstack code that needs to be also fixed.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 154,
        "deletions": 9,
        "changed_files": 2,
        "created_at": "2022-06-12T19:06:28Z",
        "closed_at": "2022-06-22T08:58:06Z",
        "merged_at": "2022-06-22T08:58:06Z",
        "body": "This PR addresses issue #6238. With these changes if a message is published to an Endpoint for a GCM Platform Application, LocalStack will use the [GCM Http protocol](https://firebase.google.com/docs/cloud-messaging/http-server-ref?hl=en) to send the message.\r\n\r\nChanges:\r\n- Integration of GCM protocol.\r\n- Test that validates that LocalStack is trying to use the protocol.\r\n\r\nNote:\r\n- For the test to expect a response with `status_code == 200` it will need a real service key and a token. \r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 8,
        "deletions": 2,
        "changed_files": 3,
        "created_at": "2022-06-12T17:51:15Z",
        "closed_at": "2022-06-12T20:54:47Z",
        "merged_at": "2022-06-12T20:54:47Z",
        "body": "This PR will make sure `requestParameters` included in the openapi document, are included in the method resource model.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 47,
        "deletions": 16,
        "changed_files": 1,
        "created_at": "2022-06-11T13:12:44Z",
        "closed_at": "2022-06-11T18:45:26Z",
        "merged_at": "2022-06-11T18:45:26Z",
        "body": "## Reason\r\nCurrently, if we set client certs (or the fix_encoding variable), our ssl proxy (which should be a normal tcp proxy) uses an http server for its forwarding.\r\nThis can lead to problems, if the requests routed through this are not only http (protocol switch to a websocket for example, for `kubectl exec`).\r\n\r\n## Changes\r\nAs long as \"fix_encoding\" is not set, we will now use a straightforward tcp proxy, terminating the ssl connection at the proxy, and starting a new one with the target, even if client certs are specified.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 73,
        "deletions": 3,
        "changed_files": 4,
        "created_at": "2022-06-11T00:26:12Z",
        "closed_at": "2022-06-11T13:07:43Z",
        "merged_at": "2022-06-11T13:07:43Z",
        "body": "Building on #6240, this PR adds a similar mechanism for response handlers (also a compromise until we have a well-defined nested handler chain mechanism).\r\n\r\nIt is used in localstack-ext to plug in response handlers (like the state serializers) into the response handler chain.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-06-10T16:59:22Z",
        "closed_at": "2022-06-10T23:47:18Z",
        "merged_at": "2022-06-10T23:47:18Z",
        "body": "Changes the StateSerializer API to use the werkzeug request object.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 11,
        "deletions": 31,
        "changed_files": 3,
        "created_at": "2022-06-10T13:09:20Z",
        "closed_at": "2022-06-11T13:10:52Z",
        "merged_at": "2022-06-11T13:10:52Z",
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 225,
        "deletions": 1,
        "changed_files": 11,
        "created_at": "2022-06-10T12:45:14Z",
        "closed_at": "2022-06-20T12:05:09Z",
        "merged_at": null,
        "body": "WIP\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 386,
        "deletions": 723,
        "changed_files": 37,
        "created_at": "2022-06-10T07:51:30Z",
        "closed_at": "2022-07-20T10:56:03Z",
        "merged_at": "2022-07-20T10:56:03Z",
        "body": "This PR implements the error serialization for error shapes which contain additional members (f.e. `TransactionCancelledException` of dynamodb).\r\n\r\nThis PR has been separated into three commits:\r\n- 3187413108675a86f45ee60f2743a0b9596020c1 contains the necessary changes in the serializer and the scaffold to support the serialization of additional members in exceptions (i.e. other than \"code\", \"message\", and \"type\").\r\n- 3c3a237c745914770f495e56894efbd7d9cdb7c1 updates all generated APIs (after the scaffold has been changed in the first commit).\r\n- 8b4872d8b1455f4d4ae0bf6bdfae00dd323b7d23 finally adjusts the proxy mechanisms (mainly `forwarder.py` and `proxy.py` to correctly handle additional members in errors). This commit also contains some cleanup (the forwarder uses the proxy now).\r\n\r\nFixes #5860",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 39,
        "deletions": 23,
        "changed_files": 4,
        "created_at": "2022-06-10T04:36:58Z",
        "closed_at": "2022-06-10T10:11:14Z",
        "merged_at": "2022-06-10T10:11:14Z",
        "body": "I feel it's generally bad design that pytest allows multiple fixture definitons with the same name to exist. In our case this is never used intentionally and only lead to hard to debug issues in the past, so I've blocked this by default now. \r\n\r\nThe default behavior can be reverted to by specifying `--ignore-fixture-conflicts`.\r\n\r\n\r\ncc @baermat ",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 108,
        "deletions": 1293,
        "changed_files": 4,
        "created_at": "2022-06-09T14:54:04Z",
        "closed_at": "2022-06-10T14:28:30Z",
        "merged_at": "2022-06-10T14:28:30Z",
        "body": "Working on pods ([#695](https://github.com/localstack/localstack-ext/pull/695)), we noticed two SNSBackend. This PR gets rid of one and also adjusts a bit the unit test accordingly.\r\n`evaluate_filter_policy_conditions` slightly changed its behavior after the migration. Had to tiny modify it to let the `test_filter_policy` unit test to pass with the following input:\r\n\r\n```\r\n(\r\n    \"does not exists without existing attribute\",\r\n    {\"field\": [{\"exists\": False}]},\r\n    {\"other_field\": {\"Type\": \"String\", \"Value\": \"anything\"}},\r\n    True,\r\n)\r\n```\r\nDouble check from a more expert SNS pair of \ud83d\udc40  needed (cc @baermat)",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2022-06-08T22:37:22Z",
        "closed_at": "2022-06-09T06:29:18Z",
        "merged_at": "2022-06-09T06:29:18Z",
        "body": "Initialises invocation context websocket route.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 108,
        "deletions": 0,
        "changed_files": 4,
        "created_at": "2022-06-08T22:22:00Z",
        "closed_at": "2022-06-09T09:53:48Z",
        "merged_at": "2022-06-09T09:53:48Z",
        "body": "This PR adds a new type of handler that can contain multiple handlers. It's a simple nested handler chain. One specific instance, the `serve_custom_service_request_handlers`, will be used to hook things like the IAM policy enforcer into the chain without modifying the gateway request handlers directly.\r\n\r\n\r\nThe implementation is a compromise. Building a full nested handler chain is not as straight forward because it's not always clear how the control flow behavior (terminated, stopped, exception handlers, ...) should propagate to the outer handler chain. So i decided to keep it simple for now.\r\n\r\nI added some unit tests using mocks that verify that the control flow behavior is executed correctly.\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 142,
        "deletions": 120,
        "changed_files": 1,
        "created_at": "2022-06-08T21:26:31Z",
        "closed_at": "2022-07-05T10:10:37Z",
        "merged_at": "2022-07-05T10:10:37Z",
        "body": "This small PR addresses the last comment made on #5878. \r\n\r\nChanges:\r\n- Test refactor for more clarity and more validations",
        "comments": 3
    },
    {
        "merged": false,
        "additions": 6,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-06-08T16:05:00Z",
        "closed_at": "2022-06-11T23:42:42Z",
        "merged_at": null,
        "body": "We introduce a method meant to return the backend(s) of a service. This is meant to remove the central dependency from `get_backend_state`.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 0,
        "deletions": 31,
        "changed_files": 1,
        "created_at": "2022-06-08T13:54:17Z",
        "closed_at": "2022-06-08T16:33:30Z",
        "merged_at": "2022-06-08T16:33:30Z",
        "body": "We deprecated the elasticmq SQS provider in the v0.14.3 release, so we can also stop testing it to start phasing it out.\r\n\r\nit was also causing problems in a recent build on master.",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 21,
        "deletions": 22,
        "changed_files": 2,
        "created_at": "2022-06-08T13:20:37Z",
        "closed_at": "2022-06-14T21:49:48Z",
        "merged_at": null,
        "body": "`\"Version\"` was missing from the URL to ConfirmSubscription and Unsubscribe operations. This would in turn fail to get recognized through the service name parser for query-protocol, as the `\"Version\"` needs to be there.\r\nhttps://github.com/localstack/localstack/blob/d7b10447c6a57d477867a314ea4b2310b7433430/localstack/aws/protocol/service_router.py#L301-L304\r\n\r\nhttps://docs.aws.amazon.com/sns/latest/api/API_ConfirmSubscription.html\r\nhttps://docs.aws.amazon.com/sns/latest/api/API_Unsubscribe.html\r\n\r\n_fixes #6227_",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2022-06-08T12:15:21Z",
        "closed_at": "2022-06-10T07:49:00Z",
        "merged_at": "2022-06-10T07:49:00Z",
        "body": "This PR adds .env to .gitignore.\r\n\r\nAllows to use .env file for easily configuring test environments (local vs aws) without credentials leaking into the repo.\r\n ",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2022-06-08T06:16:55Z",
        "closed_at": "2022-06-08T07:55:18Z",
        "merged_at": "2022-06-08T07:55:18Z",
        "body": "Add websocket route property to API context for better control over matching routes",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 13,
        "deletions": 3,
        "changed_files": 2,
        "created_at": "2022-06-07T12:16:01Z",
        "closed_at": "2022-06-07T15:11:34Z",
        "merged_at": "2022-06-07T15:11:34Z",
        "body": "This PR fixes an issue in the operation router when using the new ASF gateway (https://github.com/localstack/localstack/pull/5243).\r\nIn contrast to the `generic_proxy`, the `request.path` received by the new HTTP gateway is already URL decoded.\r\nThis can cause an issue for path parameters which can contain slashes (since these slashes need to be URL encoded for the route matching).\r\nThis PR contains the following changes:\r\n- Adjusts the unit tests such that the `path` of the request is url-decoded.\r\n- Fixes the issue in the op router (always use the raw path for matching).\r\n- Adds a test for the operation `ListRecoveryPointsByResource` of the `backup` API with the following request URI: `/resources/{resourceArn}/recovery-points/`",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 895,
        "deletions": 32,
        "changed_files": 13,
        "created_at": "2022-06-07T10:30:54Z",
        "closed_at": "2022-06-10T16:30:23Z",
        "merged_at": "2022-06-10T16:30:23Z",
        "body": "Use snapshot verification for more s3 and cloudformation tests, that have already been marked as `aws_validated`\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 203,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2022-06-07T06:31:38Z",
        "closed_at": "2022-06-07T07:47:11Z",
        "merged_at": "2022-06-07T07:47:10Z",
        "body": "# \ud83d\ude80 ASF Update Report \ud83d\ude80\nThis PR has been automatically generated to update the generated API stubs for our ASF services.\nIt uses the latest code-generator from the _master_ branch ([scaffold.py](https://github.com/localstack/localstack/blob/master/localstack/aws/scaffold.py)) and the latest _published_ version of [botocore](https://github.com/boto/botocore) to re-generate all API stubs which are already present in the `localstack.aws.api` module of the _master_ branch.\n\n## \ud83d\udd04 Updated Services\nThis PR updates the following services:\n- route53\n\n## \ud83d\udc77\ud83c\udffd Handle this PR\nThe following options describe how to interact with this PR / the auto-update:\n\n\u2714\ufe0f **Accept Changes**\nIf the changes are satisfying, just squash-merge the PR and delete the source branch.\n\n\ud83d\udeab **Ignore Changes**\nIf you want to ignore the changes in this PR, just close the PR and *do not delete* the source branch. The PR will not be opened and a new PR will not be created for as long as the generated code does not change (or the branch is deleted). As soon as there are new changes, a new PR will be created.\n\n\u270f\ufe0f **Adapt Changes**\n*Don't do this.* The APIs are auto-generated. If you decide that the APIs should look different, you have to change the code-generation.\n\n\u23f8\ufe0f **Pause Updates**\nRemove the cron-schedule trigger of the GitHub Action workflow which creates these PRs. The action can then still be triggered manually, but it will not be executed automatically.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 12,
        "deletions": 5,
        "changed_files": 1,
        "created_at": "2022-06-06T18:07:39Z",
        "closed_at": "2022-06-06T22:48:40Z",
        "merged_at": "2022-06-06T22:48:39Z",
        "body": "This PR fixes the sns test `test_redrive_policy_http_subscription` which was still flaky. after digging a bit deeper, as indicated by the failed test logs, sometimes a \"SubscriptionNotification\" event would arrive at the DLQ. This is because sometimes the subscription notification would be posted to the HTTP endpoint successfully, and sometimes the HTTP endpoint would be closed before SNS could subscribe, which then caused the notification to be forwarded to the DLQ.\r\n\r\nThis PR creates a guard s.t. the subscription notification is always consumed from the HTTP endpoint before continuing.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 26,
        "deletions": 11,
        "changed_files": 3,
        "created_at": "2022-06-06T15:31:51Z",
        "closed_at": "2022-06-06T22:57:00Z",
        "merged_at": "2022-06-06T22:57:00Z",
        "body": "This PR adds concurrency control around the get and increment operation of the ddbstreams sequence number. \r\nThe test `test_dynamodb_stream_records_with_update_item` was flaking frequently with sequence numbers not being correct. My suspicion is that it is caused by a race condition in the critical section of incrementing the sequence number, but not 100% sure, but hope this fixes it :crossed_fingers: ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 50,
        "deletions": 21,
        "changed_files": 2,
        "created_at": "2022-06-06T14:18:13Z",
        "closed_at": "2022-06-06T22:52:02Z",
        "merged_at": "2022-06-06T22:52:01Z",
        "body": "This PR fixes a couple of cfn tests, one of them that has been notoriously flaky (`test_nested_stack`).\r\n\r\nI also cleaned up `test_create_cfn_lambda_without_function_name` which had a bunch of TODOs (also learning how to use CFN)",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 693,
        "deletions": 13,
        "changed_files": 9,
        "created_at": "2022-06-06T13:41:37Z",
        "closed_at": "2022-08-23T13:37:57Z",
        "merged_at": "2022-08-23T13:37:57Z",
        "body": "## Description\r\nThis PR enables filtering of Event Filtering for Lambda functions for **DynamoDB Streams and SQS**.\r\nThe filtering implements following filtering syntax: https://docs.aws.amazon.com/lambda/latest/dg/invocation-eventfiltering.html#filtering-syntax\r\n\r\n\r\nComparison operator | Example | Rule syntax\r\n-- | -- | --\r\nNull | UserID is null | \"UserID\": [ null ]\r\nEmpty | LastName is empty | \"LastName\": [\"\"]\r\nEquals | Name is \"Alice\" | \"Name\": [ \"Alice\" ]\r\nAnd | Location is \"New York\" and Day is \"Monday\" | \"Location\": [ \"New York\" ], \"Day\": [\"Monday\"]\r\nOr | PaymentType is \"Credit\" or \"Debit\" | \"PaymentType\": [ \"Credit\", \"Debit\"]\r\nNot | Weather is anything but \"Raining\" | \"Weather\": [\u00a0{\u00a0\"anything-but\": [ \"Raining\" ] } ]\r\nNumeric (equals) | Price is 100 | \"Price\": [\u00a0{\u00a0\"numeric\": [ \"=\", 100 ] } ]\r\nNumeric (range) | Price is more than 10, and less than or equal to 20 | \"Price\": [\u00a0{\u00a0\"numeric\": [ \">\", 10, \"<=\", 20 ] } ]\r\nExists | ProductName exists | \"ProductName\": [\u00a0{\u00a0\"exists\": true } ]\r\nDoes not exist | ProductName does not exist | \"ProductName\": [\u00a0{\u00a0\"exists\": false } ]\r\nBegins with | Region is in the US | \"Region\": [\u00a0{\"prefix\": \"us-\" } ]\r\n\r\n### Open Questions\r\n- Batch Sizing while filtering: I didn't make any investigation how the batch size behaves in AWS when using event filters\r\n\r\n### Related PR\r\nfixes https://github.com/localstack/localstack/issues/6096\r\nfixes https://github.com/localstack/localstack/issues/5942",
        "comments": 12
    },
    {
        "merged": false,
        "additions": 203,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2022-06-06T05:08:01Z",
        "closed_at": "2022-06-07T06:29:49Z",
        "merged_at": null,
        "body": "# \ud83d\ude80 ASF Update Report \ud83d\ude80\nThis PR has been automatically generated to update the generated API stubs for our ASF services.\nIt uses the latest code-generator from the _master_ branch ([scaffold.py](https://github.com/localstack/localstack/blob/master/localstack/aws/scaffold.py)) and the latest _published_ version of [botocore](https://github.com/boto/botocore) to re-generate all API stubs which are already present in the `localstack.aws.api` module of the _master_ branch.\n\n## \ud83d\udd04 Updated Services\nThis PR updates the following services:\n- route53\n\n## \ud83d\udc77\ud83c\udffd Handle this PR\nThe following options describe how to interact with this PR / the auto-update:\n\n\u2714\ufe0f **Accept Changes**\nIf the changes are satisfying, just squash-merge the PR and delete the source branch.\n\n\ud83d\udeab **Ignore Changes**\nIf you want to ignore the changes in this PR, just close the PR and *do not delete* the source branch. The PR will not be opened and a new PR will not be created for as long as the generated code does not change (or the branch is deleted). As soon as there are new changes, a new PR will be created.\n\n\u270f\ufe0f **Adapt Changes**\n*Don't do this.* The APIs are auto-generated. If you decide that the APIs should look different, you have to change the code-generation.\n\n\u23f8\ufe0f **Pause Updates**\nRemove the cron-schedule trigger of the GitHub Action workflow which creates these PRs. The action can then still be triggered manually, but it will not be executed automatically.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2022-06-06T00:03:48Z",
        "closed_at": "2022-06-07T07:33:13Z",
        "merged_at": "2022-06-07T07:33:13Z",
        "body": "[![Mend Renovate](https://app.renovatebot.com/images/banner.svg)](https://renovatebot.com)\n\nThis PR contains the following updates:\n\n| Package | Type | Update | Change |\n|---|---|---|---|\n| python | stage | digest | `7e650ce` -> `b59fd1a` |\n\n---\n\n### Configuration\n\n\ud83d\udcc5 **Schedule**: Branch creation - \"before 3am on Monday\" (UTC), Automerge - At any time (no schedule defined).\n\n\ud83d\udea6 **Automerge**: Disabled by config. Please merge this manually once you are satisfied.\n\n\u267b **Rebasing**: Whenever PR becomes conflicted, or you tick the rebase/retry checkbox.\n\n\ud83d\udd15 **Ignore**: Close this PR and you won't be reminded about this update again.\n\n---\n\n - [ ] <!-- rebase-check -->If you want to rebase/retry this PR, click this checkbox.\n\n---\n\nThis PR has been generated by [Mend Renovate](https://www.mend.io/free-developer-tools/renovate/). View repository job log [here](https://app.renovatebot.com/dashboard#github/localstack/localstack).",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 29,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2022-06-05T19:38:23Z",
        "closed_at": "2022-06-07T10:38:37Z",
        "merged_at": "2022-06-07T10:38:37Z",
        "body": "This PR adds a server-side check to avoid creating domains with invalid names. \r\n\r\nFrom the spec:\r\n```json\r\n    \"DomainName\":{\r\n      \"type\":\"string\",\r\n      \"documentation\":\"<p>The name of an domain. Domain names are unique across the domains owned by an account within an AWS region. Domain names start with a letter or number and can contain the following characters: a-z (lowercase), 0-9, and - (hyphen). </p>\",\r\n      \"max\":28,\r\n      \"min\":3,\r\n      \"pattern\":\"[a-z][a-z0-9\\\\-]+\"\r\n    },\r\n```\r\n\r\nI did not replicate the AWS message, since it is generated by a server-side validation framework (which we should introduce at some point using #6088)\r\n\r\nThe real AWS message is (left as future work ;-))\r\n```\r\nAn error occurred (ValidationException) when calling the CreateDomain operation: 1 validation error detected: Value '1234' at 'domainName' failed to satisfy constraint: Member must satisfy regular expression pattern: [a-z][a-z0-9\\-]+\r\n```",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-06-05T15:10:19Z",
        "closed_at": "2022-06-05T18:59:36Z",
        "merged_at": "2022-06-05T18:59:36Z",
        "body": "Disables the edge proxy by default in favor of #5243 ",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 17,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-06-05T13:39:52Z",
        "closed_at": "2022-06-06T21:01:24Z",
        "merged_at": "2022-06-06T21:01:24Z",
        "body": "# Issue\r\n- Terraform was showing empty response when using `get-health-check` api\r\n# Fixed\r\n- Fixed response of `get-health-check`",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 165,
        "deletions": 55,
        "changed_files": 6,
        "created_at": "2022-06-03T18:42:56Z",
        "closed_at": "2022-06-07T12:43:45Z",
        "merged_at": "2022-06-07T12:43:45Z",
        "body": "Fix for issue https://github.com/localstack/localstack/issues/5091\r\n\r\nThe 'id' was returned as integer, but it should be a string.\r\n\r\n- Improved `test_put_subscription_filter_lambda` test, added snapshot fixture\r\n- Improved cleanup of `create_lambda_function` fixture",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 168,
        "deletions": 29,
        "changed_files": 7,
        "created_at": "2022-06-03T15:57:59Z",
        "closed_at": "2022-06-29T13:46:02Z",
        "merged_at": "2022-06-29T13:46:01Z",
        "body": "This PR fixes #6111 and fixes #6021.\n\nThis PR is built around the same logic as 3b52abf39e093cb503add318c205264a7c6c67ff to temporarily support more runtime's using @mlupine fork of lambci/lambda. It also removes some custom logic added in #3688 for nodejs14.x.\n\nNeed to wait until https://github.com/mLupine/docker-lambda/issues/10 is merged and released.\n",
        "comments": 9
    },
    {
        "merged": true,
        "additions": 103,
        "deletions": 0,
        "changed_files": 5,
        "created_at": "2022-06-03T13:04:55Z",
        "closed_at": "2022-06-07T10:39:48Z",
        "merged_at": "2022-06-07T10:39:47Z",
        "body": "This PR adds the `Domain` resource for OpenSearch in CloudFormation. It functions the same as the Elasticsearch Domain (except some differences in parameters). \r\n\r\nI chose the code duplication because the OpenSearch Resource might diverge in the future.\r\n\r\nFixes #6163",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 11,
        "deletions": 7,
        "changed_files": 4,
        "created_at": "2022-06-03T12:40:10Z",
        "closed_at": "2022-06-03T14:06:56Z",
        "merged_at": "2022-06-03T14:06:56Z",
        "body": "This PR changes the way we handle dev releases in LocalStack.\r\nWhile we previously created \"micro\" releases (f.e. `0.14.3.1`), we are now switching to using a development release segment in the version (according to [PEP-440](https://peps.python.org/pep-0440/)).\r\nIt contains the following changes:\r\n- Change the version of LocalStack to the next dev version: `0.14.4.dev`\r\n- Change the `Makefile` as well as the `Dockerfile` such that dev releases of our extensions are included if a dev-release is built (i.e. `latest` image builds).\r\n\r\nWhen this PR is merged, the release process has to be adapted. A new release then has to be done in three steps:\r\n1. Create a release commit which sets the release version:\r\n    - Change the version from the dev-version to the release version (f.e. changing `0.14.4.dev` to `0.14.4`).\r\n    - Change the dependency to our extensions from the version range to the exact release version (f.e. changing `localstack-ext>=0.14.4.dev<0.15` to `localstack-ext==0.14.4`).\r\n      - This has to be done for both, the runtime and the cli dependency.\r\n2. Pushing the commit will trigger the release build and the push to DockerHub.\r\n3. Create a new commit starting the next development iteration:\r\n    - Change the version from the release version to the next dev version (f.e. changing `0.14.4` to `0.14.5-dev`).\r\n    - Change the dependency to our extensions back to the version range (f.e. changing `localstack-ext==0.14.4` to `localstack-ext>=0.14.5.dev<0.15`).",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 0,
        "deletions": 39,
        "changed_files": 1,
        "created_at": "2022-06-03T07:36:19Z",
        "closed_at": "2022-06-03T09:51:56Z",
        "merged_at": "2022-06-03T09:51:56Z",
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 52,
        "deletions": 0,
        "changed_files": 4,
        "created_at": "2022-06-02T23:06:04Z",
        "closed_at": "2022-06-24T07:13:57Z",
        "merged_at": "2022-06-24T07:13:57Z",
        "body": "This PR  addresses issue #6038. Due to some difficulties with Commandeer while triaging, I couldn't exactly find out why it still displays a stack with the state \"DELETE_COMPLETE\", my best guess is that it uses the timestamp attributes `[\"CreationTime\", \"DeletionTime\", \"LastUpdatedTime\"]` to determine if the stack should be shown but Localstack does not return the \"DeletionTime\" or the \"LastUpdatedTime\".\r\n\r\nChanges:\r\n- Set the DeletionTime and LastUpdatedTime attributes accordingly.\r\n- Test to validate the return of the attributes when calling the cfn describe stack function.\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 155,
        "deletions": 106,
        "changed_files": 6,
        "created_at": "2022-06-02T18:29:05Z",
        "closed_at": "2022-06-02T20:19:45Z",
        "merged_at": "2022-06-02T20:19:45Z",
        "body": "This PR adds several fixes from the #5243 branch that either fix or adapt S3 behavior for it.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 158,
        "deletions": 26,
        "changed_files": 4,
        "created_at": "2022-06-02T18:15:08Z",
        "closed_at": "2022-06-02T20:20:58Z",
        "merged_at": "2022-06-02T20:20:58Z",
        "body": "This PR fixes the HypercornServer to allow multiple instances of the server. It's mostly a documentation change, and i also adapted the tests to show it it has to be used together with the ASGI adapter.\r\n\r\nI also added a few tests to increase the coverage of the handler dispatcher of the router API. ",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 188,
        "deletions": 142,
        "changed_files": 4,
        "created_at": "2022-06-02T08:47:54Z",
        "closed_at": "2022-06-03T18:57:25Z",
        "merged_at": "2022-06-03T18:57:25Z",
        "body": "This PR implements (or start using) the ExclusiveStartShardId parameter for DynamoDB streams `describe_stream` operation. \r\n\r\n### Issue\r\n\r\n#6158 very well described and gave a detailed explanation of ExclusiveStartShardId not being used.\r\nAWS docs for DescribeStream operation:\r\nhttps://docs.aws.amazon.com/amazondynamodb/latest/APIReference/API_streams_DescribeStream.html\r\nhttps://docs.aws.amazon.com/amazondynamodb/latest/APIReference/API_streams_StreamDescription.html\r\n\r\n### Solution\r\n\r\nThe `shardId`s coming from Kinesis were formatted to look like DynamoDB streams, auto generated with a timestamp every time the function was called. We had to implement a way to store those DynamoDB `shardId`s to be able to filter them if the function was called a second time. (Otherwise the shardId always looked \"recent\").\r\nKinesis returns the shards in stream description in ascending order, so we ignore everything before/including the `shardId` passed as parameter. \r\n_Note: this could be implement as a filter instead, I am not sure which solution is best._\r\n\r\n_fix #6158_",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 17,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2022-06-01T19:48:57Z",
        "closed_at": "2022-06-02T08:45:00Z",
        "merged_at": "2022-06-02T08:45:00Z",
        "body": "This PR fixes the `delete_rest_api` method, which would previously raise internal errors (propagating moto `KeyError` from here: https://github.com/spulec/moto/blob/34a98d2c205ed311a867083b3ee17c18fb8ebb48/moto/apigateway/models.py#L1368-L1370).\r\n\r\nI noticed these errors when running the CloudFormation tests which were trying to retry apparently already deleted rest apis. Should maybe investigate this more.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 20,
        "deletions": 5,
        "changed_files": 2,
        "created_at": "2022-06-01T11:23:30Z",
        "closed_at": "2022-06-13T09:25:04Z",
        "merged_at": "2022-06-13T09:25:04Z",
        "body": "This PR is related to issue #5249\r\n\r\nIn Short: LocalStack creates the wrong role name for service linked roles. \r\nExample role name for service `ecs.amazonaws.com`: `r-895fbd67`\r\nExpected: `AWSServiceRoleForECS`\r\n\r\nTherefore this PR implements a test which is `aws_validated`, but does fail against LocalStack.\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 60,
        "deletions": 72,
        "changed_files": 4,
        "created_at": "2022-05-31T23:08:36Z",
        "closed_at": "2022-06-01T17:46:04Z",
        "merged_at": "2022-06-01T17:46:04Z",
        "body": "Similar to https://github.com/localstack/localstack/pull/6135, added ax explicit argument to set the persistence path for Kinesis. In addition, added a new config variable to set the persistence interval (mostly to speed up testing).",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 46,
        "deletions": 37,
        "changed_files": 2,
        "created_at": "2022-05-31T14:38:44Z",
        "closed_at": "2022-05-31T16:02:38Z",
        "merged_at": "2022-05-31T16:02:38Z",
        "body": "## Background\r\nCurrently, if something unexpected goes wrong with the docker run command when starting localstack, we get no feedback to the user what exactly went wrong, the CLI will just terminate.\r\n\r\n## Fix\r\nUnexpected failures will now return the error message as returned from the docker daemon, instead of silently exiting.\r\nAlso, I added explicit exception chaining for the CmdDockerClient.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2022-05-31T14:01:55Z",
        "closed_at": "2022-06-05T15:05:41Z",
        "merged_at": "2022-06-05T15:05:41Z",
        "body": "This PR makes the provider introduced in #6040 the default.\r\n\r\nThis PR also serves as a demo of how we can do graceful migration paths for minor releases.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 29,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2022-05-31T09:13:14Z",
        "closed_at": "2022-05-31T11:06:02Z",
        "merged_at": "2022-05-31T11:06:02Z",
        "body": "Example usage: `pytest --filter-fixtures \"snapshot,aws_validated\" will select all tests that have *either* fixture",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 5,
        "changed_files": 2,
        "created_at": "2022-05-31T08:07:15Z",
        "closed_at": "2022-05-31T14:31:58Z",
        "merged_at": "2022-05-31T14:31:57Z",
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 37,
        "deletions": 19,
        "changed_files": 2,
        "created_at": "2022-05-30T22:29:55Z",
        "closed_at": "2022-06-01T16:24:03Z",
        "merged_at": "2022-06-01T16:24:03Z",
        "body": "Issue coming from support. \r\nThe problem came from the fact that we consider a resource as not created if it does not have notification configs attached. \r\nThis causes a `BucketAlreadyOwnedByYou` error outside `us-east-1`. \r\nI changed the deploy template with a function that explicitly checks if the bucket exists and, if not, proceeds to create it.\r\nFeedback are welcome, quite a newbie here on CloudFormation.",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 97,
        "deletions": 2,
        "changed_files": 9,
        "created_at": "2022-05-30T20:56:47Z",
        "closed_at": "2022-07-05T10:02:37Z",
        "merged_at": "2022-07-05T10:02:37Z",
        "body": "This PR addresses issue #6134, where an user mentions that the ApiGW-Lambda integration returns `content-type: text/html` regardless of what the Lambda returns, which is not the case, but another user mentioned that the integration by default should return `content-type: application/json`. While triaging this, I also discovered that AWS does a validation on the lambda response and returns a 502 if it doesn't follow a [format](https://aws.amazon.com/premiumsupport/knowledge-center/malformed-502-api-gateway).\r\n\r\nChanges:\r\n- Add a test to make sure that APIGW-Lambda integration returns the headers correctly.\r\n- The validation for the Lambda response and return a 502 error if it doesn't pass.\r\n- Test of the integration 502 error.\r\n- The integration by default returns a `content-type: application/json`",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 17,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-05-30T13:31:42Z",
        "closed_at": "2022-05-30T14:41:35Z",
        "merged_at": "2022-05-30T14:41:35Z",
        "body": "## Background\r\nWith the code moving fast to python3.10, the build pipeline for redhat fails under python3.8.\r\n\r\n## Changes\r\nInstall python3.10 from source to enable python3.10 features in the redhat image. To be removed after redhat publishes an official python3.10 package.\r\n\r\n## Decisions\r\nAfter trying pyenv, it became clear that it is slightly easier to just install the sourcecode itself. Pyenv would not have taken less work to setup, but would need more stages regarding environment variables etc (since we cannot assume .bashrc is sourced, we would need to setup everything manually in the image).\r\nIn the end it seemed easier (and smaller regarding image size) to install python directly than use pyenv.",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 227,
        "deletions": 88,
        "changed_files": 6,
        "created_at": "2022-05-30T11:35:16Z",
        "closed_at": "2022-05-31T15:03:08Z",
        "merged_at": "2022-05-31T15:03:07Z",
        "body": "There was an issue when delivering to a SQS DLQ after failing to deliver an SNS notification. The format wasn't properly handled, and we passed the event directly down to the SQS client.\r\n\r\n### Problem\r\nAs notified in #5604, the format of the message received from the DLQ after failing to deliver a message with SNS wasn't the same than AWS.\r\nThe issue was tracked down to the message formatting of an event to a SNS notification being done in a `try...except` block. When an Exception would rise, we would pass down the raw data to the SQS client, which would then `json.dumps` it directly as a `MessageBody`. \r\n\r\n### Solution\r\nWe need to move the creation of the message body outside the `try...except` block, and pass that message down to the SQS client delivering to the DLQ.\r\nA minor issue arising from this fix is a change to the localstack/utils/aws/dead_letter_queue.py file. The utility function `_send_to_dead_letter_queue` expects an event of type `dict`. But in the case of a SNS delivery to a DLQ, the event being passed down is always a `str` (the message body). The event is never used in itself, but passed down all the way to the end to be sent. So I took the liberty to add the type signature to the method, warning that it can be a `str` or a `dict`. (In the past, in case of `RawDelivery` being set, the event passed down was already a `str`).\r\n\r\nA small fix I've done is adding a header when `RawDelivery` is `true` in the case of a http endpoint being set for a SNS subscription. While reading the doc, I realised it was missing.\r\nhttps://docs.aws.amazon.com/sns/latest/dg/sns-large-payload-raw-message-delivery.html\r\n\r\nThanks to the snapshot utility testing, I realised a field of SNS notifications was missing: `UnsubscribeURL`. It has been added as well.\r\n\r\nI changed some tests (the one failing because of the right message format) to use the `WaitTimeSeconds` keyword in `sqs_client.receive_message` instead of retrying, it allows better error messages, often in `retry`, assert errors would give the first `assert` when the second one would be the culprit. It also feels better to use the functionality given by the `receive_messages` function, and it seems better suited to test against AWS.\r\n\r\n### Tests\r\nI've pushed a bit further and used the new `snapshot` utility. I added the usage in another commit, as I realise it could complicate navigating my tests as I tried to cover well the format of the received messages. \r\n\r\n_Fixes #5604_",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 590,
        "deletions": 0,
        "changed_files": 6,
        "created_at": "2022-05-30T09:07:58Z",
        "closed_at": "2022-06-17T10:42:57Z",
        "merged_at": "2022-06-17T10:42:57Z",
        "body": "This PR adds a test which replicates the scenario of issue #6009.\r\n\r\nEssentially, deploying a stack with an unsupported resource (in this case CodeArtifact) is possible and yields no errors.\r\nHowever, trying to deploy an Update ChangeSet, which removes the previously \"created\" CodeArtifact fails, as it is not supported.\r\n\r\nUsers probably either expect a scenario in which both deployments fail or succeed.\r\n\r\nThis PR accomplishes this change, and only tries to remove resources that are supported.\r\n\r\nCloses & fixes #6009",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1722,
        "deletions": 273,
        "changed_files": 23,
        "created_at": "2022-05-30T08:35:17Z",
        "closed_at": "2022-08-30T14:16:27Z",
        "merged_at": "2022-08-30T14:16:27Z",
        "body": "This PR migrates Kinesis to ASF. It uses the new streaming support in ASF introduced with https://github.com/localstack/localstack/pull/6086 for `SubscribeToShard`.\r\n\r\nIn addition, the ASF infrastructure needed to be enhanced with a limited support for HTTP Content-Negotiation in some serializers. For example, the JSON protocols can switch their content to CBOR if requested in the client's request.\r\nSince we now implement _more_ features than botocore's or moto's marshalling, this PR also needed to change the proxy handling to moto and other HTTP backends.\r\nNow, all responses which have been forwarded to moto or any other backend using the fallback mechanism (i.e. the backend implements a specific ASF operation / API) are parsed (using botocore's parsers) and re-serialized (using our - enhanced - serializer).\r\n\r\nAn obvious downside of this approach is the performance: We have an additional marshalling roundtrip for the responses coming from a fallback backend.\r\nHowever, in order to properly implement the Content-Negotiation, there isn't really an alternative because we need to support additional features compared to our backends (like moto) as well as boto (which is used to serialize the requests to the fallback backend).\r\n\r\nThis PR also removes three `AwsApiListener` extensions (addresses #6668):\r\n- `KinesisApiListener` (primary goal of the migration / refactoring)\r\n- `StsAwsApiListener` (was also implementing a Content-Negotiation, but for the query protocol)\r\n- `LogsAwsApiListener` (useless, the serializer already added the correct content type header)\r\n- `StepFunctionsApiListener` (only glue between provider and fallback dispatcher)\r\n\r\nTODO:\r\n- [x] Cleanup code\r\n- [x] Add tests for new serializer features\r\n- [x] ~~Flip feature flag before merging into master~~ (the ASF provider is directly becoming the default with the next minor version)\r\n- [x] Migrate the fix from https://github.com/localstack/localstack/pull/6732 to the ASF provider\r\n- [x] Remove the hypercorn pin / rebase on a fix on master.",
        "comments": 5
    },
    {
        "merged": true,
        "additions": 22,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2022-05-30T05:13:25Z",
        "closed_at": "2022-05-30T07:01:32Z",
        "merged_at": "2022-05-30T07:01:32Z",
        "body": "# \ud83d\ude80 ASF Update Report \ud83d\ude80\nThis PR has been automatically generated to update the generated API stubs for our ASF services.\nIt uses the latest code-generator from the _master_ branch ([scaffold.py](https://github.com/localstack/localstack/blob/master/localstack/aws/scaffold.py)) and the latest _published_ version of [botocore](https://github.com/boto/botocore) to re-generate all API stubs which are already present in the `localstack.aws.api` module of the _master_ branch.\n\n## \ud83d\udd04 Updated Services\nThis PR updates the following services:\n- cloudformation\n- ec2\n\n## \ud83d\udc77\ud83c\udffd Handle this PR\nThe following options describe how to interact with this PR / the auto-update:\n\n\u2714\ufe0f **Accept Changes**\nIf the changes are satisfying, just squash-merge the PR and delete the source branch.\n\n\ud83d\udeab **Ignore Changes**\nIf you want to ignore the changes in this PR, just close the PR and *do not delete* the source branch. The PR will not be opened and a new PR will not be created for as long as the generated code does not change (or the branch is deleted). As soon as there are new changes, a new PR will be created.\n\n\u270f\ufe0f **Adapt Changes**\n*Don't do this.* The APIs are auto-generated. If you decide that the APIs should look different, you have to change the code-generation.\n\n\u23f8\ufe0f **Pause Updates**\nRemove the cron-schedule trigger of the GitHub Action workflow which creates these PRs. The action can then still be triggered manually, but it will not be executed automatically.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2022-05-30T01:28:51Z",
        "closed_at": "2022-05-30T07:01:06Z",
        "merged_at": "2022-05-30T07:01:06Z",
        "body": "[![Mend Renovate](https://app.renovatebot.com/images/banner.svg)](https://renovatebot.com)\n\nThis PR contains the following updates:\n\n| Package | Type | Update | Change |\n|---|---|---|---|\n| python | stage | digest | `152f6ea` -> `7e650ce` |\n\n---\n\n### Configuration\n\n\ud83d\udcc5 **Schedule**: \"before 3am on Monday\" (UTC).\n\n\ud83d\udea6 **Automerge**: Disabled by config. Please merge this manually once you are satisfied.\n\n\u267b **Rebasing**: Whenever PR becomes conflicted, or you tick the rebase/retry checkbox.\n\n\ud83d\udd15 **Ignore**: Close this PR and you won't be reminded about this update again.\n\n---\n\n - [ ] <!-- rebase-check -->If you want to rebase/retry this PR, click this checkbox.\n\n---\n\nThis PR has been generated by [Mend Renovate](https://www.mend.io/free-developer-tools/renovate/). View repository job log [here](https://app.renovatebot.com/dashboard#github/localstack/localstack).",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 156,
        "deletions": 40,
        "changed_files": 4,
        "created_at": "2022-05-29T12:42:09Z",
        "closed_at": "2022-06-01T14:43:41Z",
        "merged_at": "2022-06-01T14:43:41Z",
        "body": "Add CloudFormation support for remaining (currently unsupported) properties for `EC2::Subnet` resources (`AssignIpv6AddressOnCreation`, `EnableDns64`, `MapPublicIpOnLaunch`, `PrivateDnsNameOptionsOnLaunch`). Addresses https://github.com/localstack/aws-cdk-local/issues/69\r\n\r\n* extend the deploy templates for the `EC2Subnet` resource model class\r\n* add missing logic in `modify_subnet_attribute(..)` and `describe_subnets(..)` in EC2 provider, to enable setting the new attributes\r\n* refactor logic around `TagSpecifications` and use common `get_tags_param(..)` utility to add tags for different EC2 resource types\r\n* slight refactoring in some model classes - replacing dict-format with list-format for properties with identical mapped names\r\n* add additional test assertions to cover the new properties",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 84,
        "deletions": 5,
        "changed_files": 3,
        "created_at": "2022-05-29T08:12:54Z",
        "closed_at": "2022-08-10T15:37:04Z",
        "merged_at": null,
        "body": "Fix #5459\r\n\r\nTest reference from: https://github.com/kiwikern/localstack-sns-dlq-error/blob/main/index.ts",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 51,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2022-05-29T03:47:22Z",
        "closed_at": "2022-06-05T07:04:12Z",
        "merged_at": "2022-06-05T07:04:12Z",
        "body": "#5395 is no longer valid. Thanks @dominikschubert \r\n",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 15,
        "deletions": 17,
        "changed_files": 5,
        "created_at": "2022-05-26T20:14:12Z",
        "closed_at": "2022-05-27T18:45:06Z",
        "merged_at": "2022-05-27T18:45:05Z",
        "body": "Bump `moto-ext` to version 3.1.10.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 35,
        "deletions": 3,
        "changed_files": 2,
        "created_at": "2022-05-26T17:11:24Z",
        "closed_at": "2022-05-28T21:36:11Z",
        "merged_at": "2022-05-28T21:36:10Z",
        "body": "This should fix #6141. We had a similar issue in #6027",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 65,
        "deletions": 31,
        "changed_files": 4,
        "created_at": "2022-05-25T20:51:07Z",
        "closed_at": "2022-05-25T22:12:46Z",
        "merged_at": "2022-05-25T22:12:46Z",
        "body": "Fixes the initial problem encountered in #6143 which turned out to be a bit of a rabbit hole.\r\n\r\nThe SAM translator now properly loads a map of all managed policies (Name => ARN) since cloudformation expects full policy ARNs while SAM allows specifying only the policy name. I've introduced a SAM template & a corresponding test to validate this.\r\n\r\n@whummer Note this also reverts the changes introduced in cedc908e7cd1d13037c8d09c098ee09d0f348c5c since they were breaking parity with AWS (e.g. in `iam_client.list_policies` calls that would always return `aws-us-gov` ARNs besides regular ones which broke loading policies via the samtranslator). There were no tests introduced in the linked commit so I'm not sure if this is breaking something. Technically the partition rewriter should take care of this for users in `aws-us-gov` anyway.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 22,
        "deletions": 3,
        "changed_files": 3,
        "created_at": "2022-05-25T20:48:33Z",
        "closed_at": "2022-05-26T11:06:14Z",
        "merged_at": "2022-05-26T11:06:14Z",
        "body": "Fixes #6146 (simply does a rounding the timestamp before adding it as string to the attributes that are returned)\r\n\r\nalso sneakily added a change to `localstack.aws.forwarder` to avoid nested (and unnecessary) exceptions stack traces. /cc @whummer ",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 73,
        "deletions": 5,
        "changed_files": 3,
        "created_at": "2022-05-25T17:08:59Z",
        "closed_at": "2022-05-25T18:25:48Z",
        "merged_at": "2022-05-25T18:25:48Z",
        "body": "This PR fixes three issues in the query API\r\n\r\n* for endpoint strategy `path`, the queue URLs were not generated correctly, they did not have the `http://` prefix\r\n* for endpoint strategy `domain`, the routing did not work because the host matching regex was matching a different scheme i had tried (`sqs.<region>.localhost...`), not the one we then implemented (`(<region>.)queue.localhost....`)\r\n*  i reverted my decision from here https://github.com/localstack/localstack/issues/6102#issuecomment-1133909611 and added the old behavior which was breaking other people's code.\r\n\r\nShould fix:\r\n- #6132 ",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 223,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2022-05-25T16:55:00Z",
        "closed_at": "2022-05-26T21:56:43Z",
        "merged_at": "2022-05-26T21:56:43Z",
        "body": "The stack used in this test is based on the information provided in #6132",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 93,
        "deletions": 10,
        "changed_files": 3,
        "created_at": "2022-05-25T00:19:15Z",
        "closed_at": "2022-05-28T00:30:34Z",
        "merged_at": "2022-05-28T00:30:34Z",
        "body": "This PR adds a feature flag for enabling the behavior requested in\r\n-  #5801\r\n\r\nAWS does not allow creating a queue with the same name for 60 seconds after it was deleted. See the [`DeleteQueue` API Reference](https://docs.aws.amazon.com/AWSSimpleQueueService/latest/APIReference/API_DeleteQueue.html). By starting localstack with `SQS_DELAY_RECENTLY_DELETED=1`, localstack will behave in the same way, but it is turned off by default.\r\n\r\nThe reason for adding the feature flag was that, localstack is often used in testing scenarios where test suites may depend on having a queue with the same name be deleted and created frequently.",
        "comments": 3
    },
    {
        "merged": false,
        "additions": 11,
        "deletions": 24,
        "changed_files": 1,
        "created_at": "2022-05-24T20:58:43Z",
        "closed_at": "2022-05-26T16:23:30Z",
        "merged_at": null,
        "body": null,
        "comments": 2
    },
    {
        "merged": true,
        "additions": 6,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2022-05-24T12:29:19Z",
        "closed_at": "2022-05-24T14:30:37Z",
        "merged_at": "2022-05-24T14:30:37Z",
        "body": "## Background\r\nWe changed to a debian based image from alpine with 0.13. In contrast to alpine, debian based images do not include an /etc/hosts.\r\nThis is normally not relevant, since docker will mount its own version of /etc/hosts into the container anyway.\r\nHowever, this does not happen when executing linux containers in \"Windows container mode\" of Docker Desktop in Windows.\r\n\r\n## Problem\r\nDue to the missing /etc/hosts file, in combination with the Windows container mode, performance massively degrades, noticable in SQS (see #5178). This does only happen in the specific case of windows container mode.\r\n\r\n## Solution\r\nAdding a hosts file to the image. This should have no impact on any platforms correctly mounting an /etc/hosts file managed by docker into the container, but should fix the issues in windows container mode, which does not show this behavior.\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 4792,
        "deletions": 2680,
        "changed_files": 26,
        "created_at": "2022-05-23T16:05:58Z",
        "closed_at": "2022-06-02T09:01:09Z",
        "merged_at": "2022-06-02T09:01:08Z",
        "body": "* Adds higher level transformer utilities/API for easier usage in tests.\r\n\r\n```python\r\n\r\ndef test_some_snapshot(snapshot, lambda_client):\r\n    snapshot.add_transformer(snapshot.transform.lambda_api())\r\n    lambda_client ....\r\n    snapshot.match(....)\r\n\r\n\r\n```\r\n\r\n* Adds new Transformation abstraction (dict in + context => dict out)\r\n\r\n* Introduces a new marker `@pytest.mark.skip_snapshot_verify` which will later be used to skip snapshot diff verification, i.e. tests in CI won't fail even though the snapshots don't match.\r\n  * Takes as input `paths`: array of strings that contains json-paths which will be excluded from the verification:\r\n  ```python\r\n  @pytest.mark.skip_snapshot_verify(\r\n          paths=[\"$..LogResult\", \"$..Payload.context.memory_limit_in_mb\"]\r\n      )\r\n      def test_something_that_does_not_work_completly_yet(self, lambda_client, snapshot):\r\n          snapshot.add_transformer(snapshot.transform.lambda_api())\r\n          result = lambda_client....\r\n          snapshot.match(\"invoke-result\", result)\r\n  ```\r\n  * Using the marker without `paths` indicates that there will no verification at all.\r\n\r\n* Updates snapshots of all snapshot tests since the format of snapshot files has changed. The previous level was moved one level down under `recorded-content` and a new `recorded-date` field was added which is updated on every `--snapshot-update` run.\r\n\r\n* The previous API is still available and supported for the meantime (`skip_key`, `register_replacement` and `replace_value`). These are deprecated from now on and the methods in `snapshot.transform.xxxx` should be used instead.\r\n\r\n\r\n",
        "comments": 23
    },
    {
        "merged": true,
        "additions": 85,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2022-05-23T10:19:04Z",
        "closed_at": "2022-06-07T12:50:59Z",
        "merged_at": "2022-06-07T12:50:58Z",
        "body": "This PR adds three tests which verify correct behavior of EventBridge rules:\r\n* Verify that EventBridge `create rule` constraints align with those of aws \r\n* Verify event message content (related to Issue #5387)",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-05-23T09:57:20Z",
        "closed_at": "2022-05-23T18:30:05Z",
        "merged_at": "2022-05-23T18:30:04Z",
        "body": "This PR aims to fix blocking of the whole event loop for the lookahead for the SSL duplex socket.\r\nCurrently, the method is_ssl_socket will block until the first 5 bytes can be read - if the client does not provide these bytes, the eventloop will block and refuse any connections for the time being.\r\n\r\nThis PR fixes this by executing the method in an executor, and waiting for the result in the eventloop, therefore keeping it responsive.\r\n\r\nThanks @thrau for the tip!\r\nShould fix #5499 .",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 47,
        "deletions": 0,
        "changed_files": 4,
        "created_at": "2022-05-23T07:46:37Z",
        "closed_at": "2022-05-23T10:51:28Z",
        "merged_at": "2022-05-23T10:51:28Z",
        "body": "Adds default name for `AWS::IAM::User` resources\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2022-05-23T02:35:14Z",
        "closed_at": "2022-05-23T06:37:01Z",
        "merged_at": "2022-05-23T06:37:01Z",
        "body": "[![WhiteSource Renovate](https://app.renovatebot.com/images/banner.svg)](https://renovatebot.com)\n\nThis PR contains the following updates:\n\n| Package | Type | Update | Change |\n|---|---|---|---|\n| python | stage | digest | `1678c20` -> `152f6ea` |\n\n---\n\n### Configuration\n\n\ud83d\udcc5 **Schedule**: \"before 3am on Monday\" (UTC).\n\n\ud83d\udea6 **Automerge**: Disabled by config. Please merge this manually once you are satisfied.\n\n\u267b **Rebasing**: Whenever PR becomes conflicted, or you tick the rebase/retry checkbox.\n\n\ud83d\udd15 **Ignore**: Close this PR and you won't be reminded about this update again.\n\n---\n\n - [ ] <!-- rebase-check -->If you want to rebase/retry this PR, click this checkbox.\n\n---\n\nThis PR has been generated by [WhiteSource Renovate](https://renovate.whitesourcesoftware.com). View repository job log [here](https://app.renovatebot.com/dashboard#github/localstack/localstack).",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 89,
        "deletions": 1,
        "changed_files": 3,
        "created_at": "2022-05-22T19:42:39Z",
        "closed_at": "2022-05-22T21:15:14Z",
        "merged_at": "2022-05-22T21:15:14Z",
        "body": "This PR fixes an issue in the ReceiveMessage long-polling behavior. Previously we would potentially wait several cycles of `WaitTimeSeconds` when it was specified together with `MaxNumberOfMessages`, and `MaxNumberOfMessages > qsize`. This lead to pretty severe slowdowns of message receiving when these values were set together.\r\n\r\nWe now only wait (correctly) at most one get-cycle, and then turn the blocking behavior off.\r\nMoreover, we now respect the queue's default `ReceiveMessageWaitTimeSeconds` attribute value.\r\n\r\nIssues that are potentially fixed:\r\n* #5824\r\n* #6093 \r\n* #5178",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 210,
        "deletions": 14,
        "changed_files": 3,
        "created_at": "2022-05-22T18:01:57Z",
        "closed_at": "2022-08-04T18:26:22Z",
        "merged_at": "2022-08-04T18:26:22Z",
        "body": "This PR corrects the behavior of `CreateQueue` to correctly raise `QueueAlreadyExists` exceptions when an attempt is made to create the queue with different attributes.\r\n\r\n[According to the spec](https://github.com/boto/botocore/blob/f960a8d73c12d16b53e4d9eacdf515224acb08f6/botocore/data/sqs/2012-11-05/service-2.json#L1138), \"Amazon SQS returns this error only if the request includes attributes whose values differ from those of the existing queue.\"\r\n\r\n- fixes #5938",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 62,
        "deletions": 4,
        "changed_files": 2,
        "created_at": "2022-05-21T15:46:03Z",
        "closed_at": "2022-05-21T16:50:22Z",
        "merged_at": "2022-05-21T16:50:21Z",
        "body": "This PR fixes #6107\r\n\r\nWe did not correctly pass the message parameters relevant for fifo queues down to the dead letter queue (which also has to be a FIFO queue when the original queue is a FIFO queue) \r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 33,
        "deletions": 30,
        "changed_files": 2,
        "created_at": "2022-05-21T11:15:27Z",
        "closed_at": "2022-05-27T18:45:48Z",
        "merged_at": "2022-05-27T18:45:48Z",
        "body": "Minor changes to the abstraction used to retrieve the state of a service.\r\nMainly renaming and variable keyword arguments to give us some rooms to support different level-of-depth of persistence.\r\nThis abstract class will be implemented by `BackendStateLifecycleBase` that handles services that use `BackendDict` and `RegionBackend`. `BackendStateExternalLifecycle` will be a specialization for services with external assets.\r\n\r\n```mermaid\r\nclassDiagram\r\n      BackendStateLifecycle <|-- BackendStateLifecycleBase\r\n      BackendStateLifecycleBase <|-- BackendStateExternalLifecycle\r\n```\r\n\r\nNote: `StateLifecycle` can be removed after ext changes are merged.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-05-21T01:09:52Z",
        "closed_at": "2022-05-22T21:16:56Z",
        "merged_at": "2022-05-22T21:16:56Z",
        "body": "Fixes a bug I've been facing when trying to deploy API Gateways with Schema validation in Localstack with Serverless-Localstack\r\n\r\nServerles used with:\r\n\r\nplugins:\r\n  - serverless-offline\r\n  - serverless-localstack\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-05-20T22:10:59Z",
        "closed_at": "2022-05-21T16:16:11Z",
        "merged_at": "2022-05-21T16:16:11Z",
        "body": "Bumps [gson](https://github.com/google/gson) from 2.8.6 to 2.8.9.\n<details>\n<summary>Release notes</summary>\n<p><em>Sourced from <a href=\"https://github.com/google/gson/releases\">gson's releases</a>.</em></p>\n<blockquote>\n<h2>Gson 2.8.9</h2>\n<ul>\n<li>Make OSGi bundle's dependency on <code>sun.misc</code> optional (<a href=\"https://github-redirect.dependabot.com/google/gson/issues/1993\">#1993</a>).</li>\n<li>Deprecate <code>Gson.excluder()</code> exposing internal <code>Excluder</code> class (<a href=\"https://github-redirect.dependabot.com/google/gson/issues/1986\">#1986</a>).</li>\n<li>Prevent Java deserialization of internal classes (<a href=\"https://github-redirect.dependabot.com/google/gson/issues/1991\">#1991</a>).</li>\n<li>Improve number strategy implementation (<a href=\"https://github-redirect.dependabot.com/google/gson/issues/1987\">#1987</a>).</li>\n<li>Fix LongSerializationPolicy null handling being inconsistent with Gson (<a href=\"https://github-redirect.dependabot.com/google/gson/issues/1990\">#1990</a>).</li>\n<li>Support arbitrary Number implementation for Object and Number deserialization (<a href=\"https://github-redirect.dependabot.com/google/gson/issues/1290\">#1290</a>).</li>\n<li>Bump proguard-maven-plugin from 2.4.0 to 2.5.1 (<a href=\"https://github-redirect.dependabot.com/google/gson/issues/1980\">#1980</a>).</li>\n<li>Don't exclude static local classes (<a href=\"https://github-redirect.dependabot.com/google/gson/issues/1969\">#1969</a>).</li>\n<li>Fix <code>RuntimeTypeAdapterFactory</code> depending on internal <code>Streams</code> class (<a href=\"https://github-redirect.dependabot.com/google/gson/issues/1959\">#1959</a>).</li>\n<li>Improve Maven build (<a href=\"https://github-redirect.dependabot.com/google/gson/issues/1964\">#1964</a>).</li>\n<li>Make dependency on <code>java.sql</code> optional (<a href=\"https://github-redirect.dependabot.com/google/gson/issues/1707\">#1707</a>).</li>\n</ul>\n<h2>Gson 2.8.8</h2>\n<ul>\n<li>Fixed issue with recursive types (<a href=\"https://github-redirect.dependabot.com/google/gson/issues/1390\">#1390</a>).</li>\n<li>Better behaviour with Java 9+ and <code>Unsafe</code> if there is a security manager (<a href=\"https://github-redirect.dependabot.com/google/gson/issues/1712\">#1712</a>).</li>\n<li><code>EnumTypeAdapter</code> now works better when ProGuard has obfuscated enum fields (<a href=\"https://github-redirect.dependabot.com/google/gson/issues/1495\">#1495</a>).</li>\n</ul>\n</blockquote>\n</details>\n<details>\n<summary>Changelog</summary>\n<p><em>Sourced from <a href=\"https://github.com/google/gson/blob/master/CHANGELOG.md\">gson's changelog</a>.</em></p>\n<blockquote>\n<h2>Version 2.8.9</h2>\n<ul>\n<li>Make OSGi bundle's dependency on <code>sun.misc</code> optional (<a href=\"https://github-redirect.dependabot.com/google/gson/issues/1993\">#1993</a>).</li>\n<li>Deprecate <code>Gson.excluder()</code> exposing internal <code>Excluder</code> class (<a href=\"https://github-redirect.dependabot.com/google/gson/issues/1986\">#1986</a>).</li>\n<li>Prevent Java deserialization of internal classes (<a href=\"https://github-redirect.dependabot.com/google/gson/issues/1991\">#1991</a>).</li>\n<li>Improve number strategy implementation (<a href=\"https://github-redirect.dependabot.com/google/gson/issues/1987\">#1987</a>).</li>\n<li>Fix LongSerializationPolicy null handling being inconsistent with Gson (<a href=\"https://github-redirect.dependabot.com/google/gson/issues/1990\">#1990</a>).</li>\n<li>Support arbitrary Number implementation for Object and Number deserialization (<a href=\"https://github-redirect.dependabot.com/google/gson/issues/1290\">#1290</a>).</li>\n<li>Bump proguard-maven-plugin from 2.4.0 to 2.5.1 (<a href=\"https://github-redirect.dependabot.com/google/gson/issues/1980\">#1980</a>).</li>\n<li>Don't exclude static local classes (<a href=\"https://github-redirect.dependabot.com/google/gson/issues/1969\">#1969</a>).</li>\n<li>Fix <code>RuntimeTypeAdapterFactory</code> depending on internal <code>Streams</code> class (<a href=\"https://github-redirect.dependabot.com/google/gson/issues/1959\">#1959</a>).</li>\n<li>Improve Maven build (<a href=\"https://github-redirect.dependabot.com/google/gson/issues/1964\">#1964</a>).</li>\n<li>Make dependency on <code>java.sql</code> optional (<a href=\"https://github-redirect.dependabot.com/google/gson/issues/1707\">#1707</a>).</li>\n</ul>\n<h2>Version 2.8.8</h2>\n<ul>\n<li>Fixed issue with recursive types (<a href=\"https://github-redirect.dependabot.com/google/gson/issues/1390\">#1390</a>).</li>\n<li>Better behaviour with Java 9+ and <code>Unsafe</code> if there is a security manager (<a href=\"https://github-redirect.dependabot.com/google/gson/issues/1712\">#1712</a>).</li>\n<li><code>EnumTypeAdapter</code> now works better when ProGuard has obfuscated enum fields (<a href=\"https://github-redirect.dependabot.com/google/gson/issues/1495\">#1495</a>).</li>\n</ul>\n<h2>Version 2.8.7</h2>\n<ul>\n<li>Fixed <code>ISO8601UtilsTest</code> failing on systems with UTC+X.</li>\n<li>Improved javadoc for <code>JsonStreamParser</code>.</li>\n<li>Updated proguard.cfg (<a href=\"https://github-redirect.dependabot.com/google/gson/issues/1693\">#1693</a>).</li>\n<li>Fixed <code>IllegalStateException</code> in <code>JsonTreeWriter</code> (<a href=\"https://github-redirect.dependabot.com/google/gson/issues/1592\">#1592</a>).</li>\n<li>Added <code>JsonArray.isEmpty()</code> (<a href=\"https://github-redirect.dependabot.com/google/gson/issues/1640\">#1640</a>).</li>\n<li>Added new test cases (<a href=\"https://github-redirect.dependabot.com/google/gson/issues/1638\">#1638</a>).</li>\n<li>Fixed OSGi metadata generation to work on JavaSE &lt; 9 (<a href=\"https://github-redirect.dependabot.com/google/gson/issues/1603\">#1603</a>).</li>\n</ul>\n</blockquote>\n</details>\n<details>\n<summary>Commits</summary>\n<ul>\n<li><a href=\"https://github.com/google/gson/commit/6a368d89da37917be7714c3072b8378f4120110a\"><code>6a368d8</code></a> [maven-release-plugin] prepare release gson-parent-2.8.9</li>\n<li><a href=\"https://github.com/google/gson/commit/ba96d53bad35f7466073f14cb3d89d09383e1a2d\"><code>ba96d53</code></a> Fix missing bounds checks for JsonTreeReader.getPath() (<a href=\"https://github-redirect.dependabot.com/google/gson/issues/2001\">#2001</a>)</li>\n<li><a href=\"https://github.com/google/gson/commit/ca1df7f7e09f6b1a763882029dd7057f475b31de\"><code>ca1df7f</code></a> <a href=\"https://github-redirect.dependabot.com/google/gson/issues/1981\">#1981</a>: Optional OSGi bundle's dependency on sun.misc package (<a href=\"https://github-redirect.dependabot.com/google/gson/issues/1993\">#1993</a>)</li>\n<li><a href=\"https://github.com/google/gson/commit/c54caf308c3f7d4a6088cf3085c2caa9617e0458\"><code>c54caf3</code></a> Deprecate <code>Gson.excluder()</code> exposing internal <code>Excluder</code> class (<a href=\"https://github-redirect.dependabot.com/google/gson/issues/1986\">#1986</a>)</li>\n<li><a href=\"https://github.com/google/gson/commit/e6fae590cf2a758c47cd5a17f9bf3780ce62c986\"><code>e6fae59</code></a> Prevent Java deserialization of internal classes (<a href=\"https://github-redirect.dependabot.com/google/gson/issues/1991\">#1991</a>)</li>\n<li><a href=\"https://github.com/google/gson/commit/bda2e3d16af776e0f607d56bbab6eac22f8f2d58\"><code>bda2e3d</code></a> Improve number strategy implementation (<a href=\"https://github-redirect.dependabot.com/google/gson/issues/1987\">#1987</a>)</li>\n<li><a href=\"https://github.com/google/gson/commit/cd748df7122ea4260d35dfe90cfab0c079a1504d\"><code>cd748df</code></a> Fix LongSerializationPolicy null handling being inconsistent with Gson (<a href=\"https://github-redirect.dependabot.com/google/gson/issues/1990\">#1990</a>)</li>\n<li><a href=\"https://github.com/google/gson/commit/fe30b85224316cabf19f5dd3223843437c297802\"><code>fe30b85</code></a> Support arbitrary Number implementation for Object and Number deserialization...</li>\n<li><a href=\"https://github.com/google/gson/commit/1cc16274235f89650349884dd04760bf15a95d96\"><code>1cc1627</code></a> Fix incorrect feature request template label (<a href=\"https://github-redirect.dependabot.com/google/gson/issues/1982\">#1982</a>)</li>\n<li><a href=\"https://github.com/google/gson/commit/7b9a283a7a5d66878c9be01227b15e631afe2a5a\"><code>7b9a283</code></a> Bump bnd-maven-plugin from 5.3.0 to 6.0.0 (<a href=\"https://github-redirect.dependabot.com/google/gson/issues/1985\">#1985</a>)</li>\n<li>Additional commits viewable in <a href=\"https://github.com/google/gson/compare/gson-parent-2.8.6...gson-parent-2.8.9\">compare view</a></li>\n</ul>\n</details>\n<br />\n\n\n[![Dependabot compatibility score](https://dependabot-badges.githubapp.com/badges/compatibility_score?dependency-name=com.google.code.gson:gson&package-manager=maven&previous-version=2.8.6&new-version=2.8.9)](https://docs.github.com/en/github/managing-security-vulnerabilities/about-dependabot-security-updates#about-compatibility-scores)\n\nDependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.\n\n[//]: # (dependabot-automerge-start)\n[//]: # (dependabot-automerge-end)\n\n---\n\n<details>\n<summary>Dependabot commands and options</summary>\n<br />\n\nYou can trigger Dependabot actions by commenting on this PR:\n- `@dependabot rebase` will rebase this PR\n- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it\n- `@dependabot merge` will merge this PR after your CI passes on it\n- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it\n- `@dependabot cancel merge` will cancel a previously requested merge and block automerging\n- `@dependabot reopen` will reopen this PR if it is closed\n- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually\n- `@dependabot ignore this major version` will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot ignore this minor version` will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot ignore this dependency` will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot use these labels` will set the current labels as the default for future PRs for this repo and language\n- `@dependabot use these reviewers` will set the current reviewers as the default for future PRs for this repo and language\n- `@dependabot use these assignees` will set the current assignees as the default for future PRs for this repo and language\n- `@dependabot use this milestone` will set the current milestone as the default for future PRs for this repo and language\n\nYou can disable automated security fix PRs for this repo from the [Security Alerts page](https://github.com/localstack/localstack/network/alerts).\n\n</details>",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 45,
        "deletions": 4,
        "changed_files": 3,
        "created_at": "2022-05-20T19:10:18Z",
        "closed_at": "2022-05-26T20:40:30Z",
        "merged_at": "2022-05-26T20:40:30Z",
        "body": "This PR addresses issue #5926. Where is shown that when deploying a CFN template with a APIGW.DomainName that uses Tags, Localstack Crashes.\r\n\r\nChanges: \r\n- CFN APIGW.DomainName model correction.\r\n- Test refactorization.\r\n- The template file now uses parameters and uses tags. \r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 5,
        "deletions": 3,
        "changed_files": 1,
        "created_at": "2022-05-20T16:00:59Z",
        "closed_at": "2022-05-21T15:29:05Z",
        "merged_at": "2022-05-21T15:29:05Z",
        "body": "DynamoDBLocal can start in [two different modes](https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/DynamoDBLocal.UsageNotes.html). If a `dbPath` is set, DynamoDB writes its database files in that directory.\r\nIf not, it runs in `inMemory`mode with a transient state (which is what we currently do if persistence is not enabled).\r\n\r\nBefore, we were interested in having files on disk only when `DATA_DIR` was set. However, now that Pods are independent from persistence, we have a similar need. Therefore, we would just set a temporary directory to dump the database files.\r\nAs a future optimization we can investigate whether is possible to run start DynamoDBLocal `inMemory` and only ask for its content on the fly.\r\n\r\n@whummer this is basically what we briefly discussed before. Could there be any implications that I do not see?",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 101,
        "deletions": 19,
        "changed_files": 4,
        "created_at": "2022-05-20T14:50:13Z",
        "closed_at": "2023-03-19T19:50:23Z",
        "merged_at": null,
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\nTBD",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 474,
        "deletions": 269,
        "changed_files": 56,
        "created_at": "2022-05-20T09:21:05Z",
        "closed_at": "2022-06-17T13:18:48Z",
        "merged_at": "2022-06-17T13:18:48Z",
        "body": "### Summary\r\n\r\n- Replace all references to Account ID with Moto resolver introduced in https://github.com/spulec/moto/pull/5098\r\n- Use subscripting to retrieve Moto backend from BackendDict so that a new backend is created for the given region if it doesn't exist\r\n- Change internal call detection logic to make use of a newly introduced header. Previously we relied on a special value for AWS_ACCESS_KEY_ID. With the multi-accounts revamp, AWS_ACCESS_KEY_ID must always be set to the Account ID\r\n\r\n### Tests\r\n\r\nCI pipeline against the ext branch: https://github.com/localstack/localstack/actions/runs/2429784539",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 93,
        "deletions": 12,
        "changed_files": 2,
        "created_at": "2022-05-20T07:53:21Z",
        "closed_at": "2022-05-20T17:59:14Z",
        "merged_at": "2022-05-20T17:59:13Z",
        "body": "This PR fixes #5293 by raising the correct error messages when using an SQS receipt handle to either delete a message, or change the visibility of a message.\r\nAWS raises `InvalidParameterValue` if a receipt handle is used that was previously issued but is no longer valid for the given queue. Previously we were raising `ReceiptHandleIsInvalid` which seems to happen only when receipt handles have a value that is not a real receipt handle. This seems to indicate some kind of internal format that receipt handles have. Since they seem to be base64 encoded values of some sort.\r\n\r\nWe now encode the queue ARN into the receipt handle (as well as some randomness to make it look like a random base64 encoded string), and base64 encode that. That allows us to later check whether a) the receipt handle is a real receipt handle (to raise `ReceiptHandleIsInvalid`), or b) the receipt handle is not valid for this queue because it is not currently associated with any message of the queue (to raise `InvalidParameterValue`).",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 127,
        "deletions": 36,
        "changed_files": 3,
        "created_at": "2022-05-19T18:02:50Z",
        "closed_at": "2022-05-22T21:18:07Z",
        "merged_at": "2022-05-22T21:18:07Z",
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n\r\nAdds support for s3 object tagging notifications as reported/requested in https://github.com/localstack/localstack/issues/6089",
        "comments": 9
    },
    {
        "merged": true,
        "additions": 402,
        "deletions": 20,
        "changed_files": 4,
        "created_at": "2022-05-19T15:58:29Z",
        "closed_at": "2022-05-19T17:34:53Z",
        "merged_at": "2022-05-19T17:34:53Z",
        "body": "This PR properly implements the `MessageAttributeNames` and `MessageAttributes` filter for the `ReceiveMessage` operation. The behavior is described here: https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/sqs.html#SQS.Client.receive_message\r\n\r\n* moved the filtering of both user message attributes and system message attributes into their own functions\r\n* added snapshot tests for both for different cases\r\n* extended the serializer test (i initially thought it was a serializer error, but our implementation just wasn't correct)\r\n\r\nshould potentially fix #5248",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 90,
        "deletions": 54,
        "changed_files": 12,
        "created_at": "2022-05-19T13:57:45Z",
        "closed_at": "2022-05-20T11:41:29Z",
        "merged_at": "2022-05-20T11:41:29Z",
        "body": "This PR contains the following changes (each encapsulated in a different commit):\r\n- https://github.com/localstack/localstack/commit/c5ae9212613f849713588ca0d80befdbecc3955d Removes the warning in the ASF service router in case no service could be detected (the warning caused lots of false-positives)\r\n- https://github.com/localstack/localstack/commit/75ecc7d7c934bf269b28a8b0b6caa829d7a3fde8 Moves the service-router import to the top-level imports (as discussed in https://github.com/localstack/localstack/pull/5734#discussion_r859524921 /cc @whummer)\r\n- https://github.com/localstack/localstack/commit/f430c5314bf2e4e5b1dde2831bf87bffa96f0564 Adjusts the parser and serializer to use the features of Werkzeug's request class.\r\n- https://github.com/localstack/localstack/commit/ccff61db809bbfa3458bc93d83c629bda920f9e5 Adjusts the error handling in the parser and serializer that certain exceptions caused by invalid input raises a protocol-error instead of an \"unknown\" error.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 27,
        "deletions": 23,
        "changed_files": 1,
        "created_at": "2022-05-19T09:01:14Z",
        "closed_at": "2022-05-19T10:11:54Z",
        "merged_at": "2022-05-19T10:11:54Z",
        "body": "This PR performs a small change to `test_lambda_integration#test_deletion_event_source_mapping_with_dynamodb`.\r\nThe test previously did not cleanup the created event source mapping.\r\nThis results in the `StreamEventSourceListener` continuing to monitor the resource.\r\nIf the resource cannot be accessed, it continues to do so and logs exceptions every second, ultimately polluting the logs and running out of urllib3 connections.\r\nThis is just a fix for the test, such that it properly removes the event source mapping after the test is done.\r\nHowever, we might think about a more sophisticated error handling in the `StreamEventSourceListener` (maybe introducing a backoff-strategy, or stopping the monitoring if the resource cannot be found / 404). /cc @steffyP @SwatsonCodes ",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 175,
        "deletions": 187,
        "changed_files": 1,
        "created_at": "2022-05-18T22:30:22Z",
        "closed_at": "2022-05-19T06:36:00Z",
        "merged_at": "2022-05-19T06:35:59Z",
        "body": "Pure pytest migration",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 92,
        "deletions": 11,
        "changed_files": 2,
        "created_at": "2022-05-18T21:38:56Z",
        "closed_at": "2022-05-19T08:42:51Z",
        "merged_at": "2022-05-19T08:42:51Z",
        "body": "**WIP**\r\n\r\nI've added a test for #4391",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 25,
        "deletions": 9,
        "changed_files": 2,
        "created_at": "2022-05-18T21:03:47Z",
        "closed_at": "2022-05-19T09:53:23Z",
        "merged_at": "2022-05-19T09:53:23Z",
        "body": "Fixes #6044\r\n\r\nAlso removed a duplicate test",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 474,
        "deletions": 7,
        "changed_files": 10,
        "created_at": "2022-05-18T19:00:55Z",
        "closed_at": "2022-05-19T09:58:36Z",
        "merged_at": "2022-05-19T09:58:36Z",
        "body": "This PR adds a first version of a server-side request validation framework for ASF based on `botocore.validate`. I think this should be seen as a prototype more than a final implementation. We should maybe discuss whether it would be better to have this as part of the `ProtocolParserError` hierarchy, and whether to do the validation inside the parsing, or if not, how we properly separate concerns (first parsing, then validating).\r\n\r\n### Summary of changes:\r\n\r\n* Added several extensions to `botocore.validate` to make the API a bit more high-level (it can now raise exceptions).\r\n* Added several different test suites to demonstrate the behavior\r\n* Added some examples for how to test on server-side parameter validation in general (`tests/integration/test_validate.py`) that are validated against AWS.\r\n* Changed the `SigningHttpClient` to allow injection of endpoint urls which is useful for running the same tests against both AWS and localstack.\r\n* Extended the test fixtures accordingly\r\n* Added two tests and a simple fix for the SQS Query API to demonstrate how to use the API on a lower level (to validate the request and re-raise parameter)\r\n* Added an xfail test to `test_parser.py` that demonstrate that certain parameter validation could be handled implicitly but isn't (str->int conversion value errors)\r\n\r\n### Sample usage\r\n\r\nHere's a simple test demonstrating the use of the API:\r\n```python\r\n    def test_missing_required_field_restjson(self):\r\n        parser = create_parser(load_service(\"opensearch\"))\r\n\r\n        op, params = parser.parse(\r\n            HttpRequest(\r\n                \"POST\",\r\n                \"/2021-01-01/tags\",\r\n                body='{\"ARN\":\"somearn\"}',\r\n            )\r\n        )\r\n\r\n        with pytest.raises(MissingRequiredField) as e:\r\n            validate_request(op, params).raise_first()\r\n\r\n        assert e.value.error.reason == \"missing required field\"\r\n        assert e.value.required_name == \"TagList\"\r\n```\r\n\r\nYou can also access all the errors collected via `validate_request(op, params).list_errors()` (slightly extended from botocore)",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 18,
        "deletions": 17,
        "changed_files": 3,
        "created_at": "2022-05-18T16:58:04Z",
        "closed_at": "2022-05-18T18:07:56Z",
        "merged_at": "2022-05-18T18:07:55Z",
        "body": "Types not available in python3.7 without typing_extensions: TypedDict, Protocol\r\n\r\nThese types will now be imported depending on the current runtime version, either from typing or typing extensions (as done in other places in the code).\r\n\r\nAlso, lru_cache takes a userfunction as argument since 3.8, so for 3.7 compatibility we need to call it as function for the default parameters to work.\r\n\r\nFixes #6083",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 326,
        "deletions": 12,
        "changed_files": 6,
        "created_at": "2022-05-18T16:58:01Z",
        "closed_at": "2022-05-19T09:24:55Z",
        "merged_at": "2022-05-19T09:24:55Z",
        "body": "This PR adds initial support for event streaming to the ASF scaffold (for the generated APIs) as well as the serializer based on the HTTP1.1 feature of chunked `Transfer-Encoding`.\r\nThe scaffold generates `TypedDicts` with the event member of type `Iterator[<MemberShape>]`.\r\nThe serializer in turn serializes these events such that a generator is returned in the serialized `Response`.\r\n\r\nThis allows fully-typed service implementations for the streaming responses where all the encoding is done transparently in the serializer. Here's a dummy implementation of Kinesis' SubscribeToShard operation using the features introduced in this PR:\r\n```\r\nclass KinesisProvider(KinesisApi):\r\n    def subscribe_to_shard(\r\n        self,\r\n        context: RequestContext,\r\n        consumer_arn: ConsumerARN,\r\n        shard_id: ShardId,\r\n        starting_position: StartingPosition,\r\n    ) -> SubscribeToShardOutput:\r\n        def event_generator() -> Iterator[SubscribeToShardEventStream]:\r\n            event = SubscribeToShardEvent(\r\n                Records=[\r\n                    Record(\r\n                        SequenceNumber=\"1\",\r\n                        Data=b\"record 1 binary data\",\r\n                        PartitionKey=\"record_1_partition_key\",\r\n                    ),\r\n                ],\r\n                ContinuationSequenceNumber=\"1\",\r\n                MillisBehindLatest=1338,\r\n            )\r\n            yield SubscribeToShardEventStream(SubscribeToShardEvent=event)\r\n            event = SubscribeToShardEvent(\r\n                Records=[\r\n                    Record(\r\n                        SequenceNumber=\"2\",\r\n                        Data=b\"record 2 binary data\",\r\n                        PartitionKey=\"record_2_partition_key\",\r\n                    )\r\n                ],\r\n                ContinuationSequenceNumber=\"1\",\r\n                MillisBehindLatest=1338,\r\n            )\r\n            yield SubscribeToShardEventStream(SubscribeToShardEvent=event)\r\n\r\n        return SubscribeToShardOutput(EventStream=event_generator())\r\n```\r\n\r\n\r\nThe support is a bit rudimentary for now, since in current implementations we only use the very basic \"happy path\" for the event streams. Therefore the error serialization is not yet fully implemented.\r\n\r\nThis PR is a prerequisite for the upcoming ASF migration of Kinesis (/cc @baermat) as well as of S3.",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 32,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-05-18T14:53:34Z",
        "closed_at": "2023-02-06T20:15:33Z",
        "merged_at": null,
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 85,
        "deletions": 15,
        "changed_files": 4,
        "created_at": "2022-05-18T11:56:25Z",
        "closed_at": "2022-05-18T20:19:49Z",
        "merged_at": "2022-05-18T20:19:49Z",
        "body": "Currently, cloudformation does not respect already created resources when creating new changesets.\r\nIt will however fail on executing these changesets when there are no updates necessary.\r\n\r\n## Changes\r\nLike AWS, the correct way to handle this is setting the correct status after creating a changeset, setting it to FAILED when there are no updates available.\r\nAlso, execution of these failed changesets should be prevented if the changeset is in a failed state.\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 49,
        "deletions": 29,
        "changed_files": 4,
        "created_at": "2022-05-17T13:03:27Z",
        "closed_at": "2022-05-17T14:41:15Z",
        "merged_at": "2022-05-17T14:41:15Z",
        "body": "This PR contains the following changes:\r\n- Adjusts the `ArnPartitionRewriteListener` such that it updates potential `Content-Length` and CRC checksum headers.\r\n- Slightly adjusts the DynamoDB ARN rewriting such that it is partition-agnostic.\r\n- Hardens the `ArnPartitionRewriteListener` unit test such that it explicitly sets the default region to `None` (which otherwise could cause issues if the test is executed in an environment where the default region is set).",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 15,
        "deletions": 25,
        "changed_files": 3,
        "created_at": "2022-05-17T11:38:33Z",
        "closed_at": "2022-05-18T20:41:56Z",
        "merged_at": "2022-05-18T20:41:56Z",
        "body": "This PR removes the patch for the delete integration operation.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 74,
        "deletions": 59,
        "changed_files": 3,
        "created_at": "2022-05-17T09:48:47Z",
        "closed_at": "2022-05-18T07:36:39Z",
        "merged_at": "2022-05-18T07:36:39Z",
        "body": "Add `DISABLE_CORS_HEADERS` option to disable the CORS headers returned from API calls by default. Currently, we're offering several `*_CORS_*` [settings](https://docs.localstack.cloud/localstack/configuration/#security) which are all useful to expand the CORS rules, i.e., make the security _less_ restrictive. However, there have been some requests from users who would like to tighten up the security, i.e., make the CORS settings _more_ restrictive (i.e., disable access from browsers to the local APIs).\r\n\r\nCurrently, this only affects the default CORS headers we're returning, but **not** the service-specific CORS headers that can be defined on a resource level (e.g., for S3 buckets, or API GW resources). This should be a reasonable assumption for now, but needs to be highlighted in the docs.\r\n\r\nTODOs:\r\n- [ ] Add corresponding PR in the docs repo to describe this config value",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 25,
        "deletions": 16,
        "changed_files": 1,
        "created_at": "2022-05-17T08:47:44Z",
        "closed_at": "2022-05-17T11:13:52Z",
        "merged_at": "2022-05-17T11:13:52Z",
        "body": "Minor fix for CFn deletion of `IAM::Role` resources.\r\n\r\nShould fix the following issue that can happen on stack teardown:\r\n```\r\n   File \"/opt/code/localstack/localstack/utils/cloudformation/template_deployer.py\", line 880, in execute_resource_action\r\n     result = func[\"function\"](resource_id, resources, resource_type, func, stack_name)\r\n   File \"/opt/code/localstack/localstack/services/cloudformation/models/iam.py\", line 279, in _pre_delete\r\n     for policy in iam_client.list_attached_role_policies(RoleName=role_name).get(\r\n   File \"/opt/code/localstack/.venv/lib/python3.10/site-packages/botocore/client.py\", line 508, in _api_call\r\n     return self._make_api_call(operation_name, kwargs)\r\n   File \"/opt/code/localstack/.venv/lib/python3.10/site-packages/botocore/client.py\", line 911, in _make_api_call\r\n     raise error_class(parsed_response, operation_name)\r\n botocore.errorfactory.NoSuchEntityException: An error occurred (NoSuchEntity) when calling the ListAttachedRolePolicies operation: Role stack-a216383c-DynamoDBRole-b678a24f not found\r\n```\r\n\r\nShould be safe to wrap the three calls with try/except, as if one of them fails with `NoSuchEntity`, this would indicate that the role no longer exists and likely the other calls would fail with the same error as well.\r\n\r\nFixes the symptom we're seeing - lmk if you have some ideas on how to add a test for this @dominikschubert . Overall, some of this logic may be revisited/removed once we have proper stack deletion order in place (as indicated in the existing comment).",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 0,
        "changed_files": 7,
        "created_at": "2022-05-17T08:41:13Z",
        "closed_at": "2022-05-17T11:46:12Z",
        "merged_at": "2022-05-17T11:46:12Z",
        "body": "This PR renames the module `unit.http` to `unit.http_`.\r\nIt fixes a developer experience issue where unit tests in the \"root\" folder of the unit tests could not be executed in debug mode in PyCharm.\r\nYou can easily reproduce this by trying to execute any test in the `unit` folder in debug mode using PyCharm's pytest integration (f.e. `test_generic_proxy`).\r\nPyCharm tries to load the `http` module (which contains unit tests for the `localstack.http` module) instead of the builtin `http` module.\r\nPyCharm YouTrack Issue: https://youtrack.jetbrains.com/issue/PY-54265",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 56,
        "deletions": 20,
        "changed_files": 6,
        "created_at": "2022-05-16T15:31:52Z",
        "closed_at": "2022-05-16T17:46:36Z",
        "merged_at": "2022-05-16T17:46:36Z",
        "body": "This PR fixes an issue initially addressed with https://github.com/localstack/localstack/pull/6059 (which was later closed in favor of https://github.com/localstack/localstack/pull/6065).\r\nUnfortunately, https://github.com/localstack/localstack/pull/6065 does not fix the issue described in https://github.com/localstack/localstack/pull/6059.\r\nThis PR contains the following changes:\r\n- It changes the path and query parameter handling for the handler chain such that the generic proxy uses the url-encoded path and query parameters within its proxy handler chain.\r\n- It partly reverts https://github.com/localstack/localstack/pull/6065, since the proxy listener gets the encoded path and query parts now. /cc @whummer \r\n- Fixes a small issue with the pytest plugin config (moves pytest plugins to the root conftest, since it's not allowed anywhere else anymore).\r\n\r\nThe special handling with `get_full_raw_path` was necessary due to a specific peculiarity in Werkzeug's url property handling.\r\nHere's a short scratch to illustrate the issue:\r\n```\r\nfrom werkzeug.sansio.utils import get_current_url\r\n\r\n# Werkzeug (and with that the Quart request wrapper) internally uses get_current_url on request.url:\r\n# > werkzeug.sansio.Request#L212:\r\n# @cached_property\r\n# def url(self) -> str:\r\n#     \"\"\"The full request URL with the scheme, host, root path, path,\r\n#     and query string.\"\"\"\r\n#     return get_current_url(\r\n#         self.scheme, self.host, self.root_path, self.path, self.query_string\r\n#     )\r\n\r\n# get_current_url is weird, because it _encodes_ the path segment, while it _decodes_ (some) characters in the query segment\r\nurl = get_current_url(scheme=\"https\", root_path=\"root\", path=\"pa#th\", host=\"host\", query_string=b\"query-string%2Basdf\")\r\nprint(url)\r\nassert url == \"https://hostroot/pa%23th?query-string+asdf\" # <- mind the encoded # (%23) and the decoded %2B (+)!\r\n```",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 137,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2022-05-16T07:10:01Z",
        "closed_at": "2022-05-17T12:42:04Z",
        "merged_at": "2022-05-17T12:42:03Z",
        "body": "This PR:\r\n\r\n- Adds PR size labeler action\r\n- Adds service-specific & area-specific labels action for PRs\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 85,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2022-05-16T05:11:14Z",
        "closed_at": "2022-05-16T09:28:30Z",
        "merged_at": "2022-05-16T09:28:30Z",
        "body": "# \ud83d\ude80 ASF Update Report \ud83d\ude80\nThis PR has been automatically generated to update the generated API stubs for our ASF services.\nIt uses the latest code-generator from the _master_ branch ([scaffold.py](https://github.com/localstack/localstack/blob/master/localstack/aws/scaffold.py)) and the latest _published_ version of [botocore](https://github.com/boto/botocore) to re-generate all API stubs which are already present in the `localstack.aws.api` module of the _master_ branch.\n\n## \ud83d\udd04 Updated Services\nThis PR updates the following services:\n- ec2\n\n## \ud83d\udc77\ud83c\udffd Handle this PR\nThe following options describe how to interact with this PR / the auto-update:\n\n\u2714\ufe0f **Accept Changes**\nIf the changes are satisfying, just squash-merge the PR and delete the source branch.\n\n\ud83d\udeab **Ignore Changes**\nIf you want to ignore the changes in this PR, just close the PR and *do not delete* the source branch. The PR will not be opened and a new PR will not be created for as long as the generated code does not change (or the branch is deleted). As soon as there are new changes, a new PR will be created.\n\n\u270f\ufe0f **Adapt Changes**\n*Don't do this.* The APIs are auto-generated. If you decide that the APIs should look different, you have to change the code-generation.\n\n\u23f8\ufe0f **Pause Updates**\nRemove the cron-schedule trigger of the GitHub Action workflow which creates these PRs. The action can then still be triggered manually, but it will not be executed automatically.",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 16,
        "deletions": 9,
        "changed_files": 2,
        "created_at": "2022-05-16T02:53:16Z",
        "closed_at": "2022-06-30T06:37:53Z",
        "merged_at": null,
        "body": "Potential fix for #5396.",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 77,
        "deletions": 26,
        "changed_files": 7,
        "created_at": "2022-05-15T15:16:01Z",
        "closed_at": "2022-05-16T09:15:38Z",
        "merged_at": "2022-05-16T09:15:38Z",
        "body": "Minor fixes for issues that surfaced during testing in local dev/host mode:\r\n* When using the HTTPS forwarding server on port 443 (using `EDGE_FORWARD_URL`), we need to forward the requests using the raw path of the HTTP request (otherwise request parsing fails downstream, e.g., for URL-encoded ARNs passed in request paths). Issue can be replicated, e.g., with this command (after starting LS in Pro host mode): `awslocal kafka --endpoint-url https://localhost.localstack.cloud get-bootstrap-brokers --cluster-arn arn:aws:kafka:us-east-1:000000000000:cluster/test`. The existing `get_raw_path(..)` http utility comes in handy here. Added a small test for it as well. \r\n\r\n* Prefer using the native `unzip` command (if available) over the built-in Python ` zipfile` utils. Some versions of Node.js / Serverless are generating zip files with invalid/incorrect CRC codes (e.g., [here](https://github.com/archiverjs/node-archiver/issues/491)) - the files extract fine with `unzip` (potentially generating some warnings), but the unzipping fails with Python utils (empty files being created on disk). In future, we could think about introducing a `strict` mode for the `unzip` utils to enforce CRC codes, if needed.\r\n\r\nThe changes above should not impact the current logic inside the Docker container (only relevant for host mode).\r\n\r\nAdditionally, the PR contains a few minor cleanups:\r\n* Remove the obsolete/unused `params` argument for the `start_proxy(..)` utility - resolves a `TODO: not being used` comment\r\n* Remove a few instances of unnecessary `time.sleep(..)` calls in the tests",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 98,
        "deletions": 104,
        "changed_files": 4,
        "created_at": "2022-05-14T12:37:15Z",
        "closed_at": "2022-05-14T14:57:12Z",
        "merged_at": "2022-05-14T14:57:12Z",
        "body": "* Fix DynamoDB error injection - return proper `ProvisionedThroughputExceededException` error message to the client, instead of a 500 error. This was an oversight in the DynamoDB ASF migration. Addresses #6056\r\nThis change also enables us to remove the custom `forward_request(..)` logic in the DynamoDB listener.\r\n\r\n* Refactor and re-enable the error injection tests - they are now executed by default as part of the integration test suite. (disabling botocore retries ensures that the tests are executing fast)\r\n\r\n* The PR also contains a tiny fix to avoid `AttributeError` in `describe_kinesis_streaming_destination(..)` - addresses #6031",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 40,
        "deletions": 9,
        "changed_files": 3,
        "created_at": "2022-05-13T20:34:04Z",
        "closed_at": "2022-05-31T11:15:36Z",
        "merged_at": "2022-05-31T11:15:36Z",
        "body": "This PR addresses issue #6033, where is shown that LocalStack CFN throws an error when trying to create a Rule that was defined without Targets. When testing against AWS, shows that it should work without problems. \r\n\r\nChanges:\r\n- CFN Events Rule put_targets function is optional now.\r\n- Test to validate changes.\r\n- Template of a Rule without Targets.\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 5,
        "deletions": 5,
        "changed_files": 2,
        "created_at": "2022-05-13T12:33:35Z",
        "closed_at": "2022-05-16T21:54:12Z",
        "merged_at": "2022-05-16T21:54:12Z",
        "body": "Localstack has a feature which saves all SES email to memory and filesystem for later inspection. This PR unifies the format for these email and makes it consistent with LocalStack Pro.",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 35,
        "deletions": 1,
        "changed_files": 3,
        "created_at": "2022-05-13T11:24:59Z",
        "closed_at": "2022-05-16T07:45:09Z",
        "merged_at": null,
        "body": "This PR fixes another encoding issue which has been introduced with https://github.com/localstack/localstack/pull/5734.\r\nInstead of using the request's `full_path` (which is already url-decoded) it reverts to the \"old\" variant of extracting the path and query params from the URL.\r\n\r\nIt is necessary to use the encoded path, because the encoding is non-reversible (f.e. `/foo/bar%2Fbaz` cannot be decoded and encoded again) and the edge proxy forwarding (when the edge proxy is spawned on port 443 to forward requests to 4566) needs to use the encoded URL for the forwarding (see the comment in the changed `edge.py`).\r\n\r\nA lot of the encoding and decoding has changed recently with the new HTTP request object and ongoing refactorings, therefore I'm happy for any input (if this violates current assumptions somewhere else).",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 162,
        "deletions": 72,
        "changed_files": 9,
        "created_at": "2022-05-12T12:59:24Z",
        "closed_at": "2022-05-14T12:12:05Z",
        "merged_at": "2022-05-14T12:12:05Z",
        "body": "Initial CFn support for `UsePreviousValue` in stack parameters.\r\n\r\nThe starting point for this change was a `cdklocal` issue, where multiple subsequent `bootstrap`s were not working: https://github.com/localstack/aws-cdk-local/issues/36 In particular, in the CDK example the second `cdklocal bootstrap` call creates/executes a change set that uses a `UsePreviousValue` value for the parameter named `\"Qualifier\"`. Since this is a pretty central parameter referenced in various other strings/IDs, its value being `None` resulted in stack deployment errors.\r\n\r\nThis led to a couple of rabbit holes down the line, but also some good insights into how we can improve things in CFn. \ud83d\udc4d So, this is more of a first starting point towards potentially some more fundamental enhancements/optimizations in the template deployer - to be discussed in more detail @dominikschubert .\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 136,
        "deletions": 93,
        "changed_files": 9,
        "created_at": "2022-05-12T12:17:38Z",
        "closed_at": "2022-05-12T16:04:11Z",
        "merged_at": "2022-05-12T16:04:11Z",
        "body": "## Goal\r\nCurrently, the detection of networks and endpoints is very targeted of lambda.\r\nThis PR refactors this, to be more generic, and use the generic methods in the lambda methods as well\r\nWe need this to reuse the functionality for other services as well (currently f.e. bigdata).\r\n\r\n## Changes\r\n* Move all methods regarding inspection of the networking of the localstack container itself to utils/container_networking.py \r\n* use lru_cache instead of a global variable cache\r\n* use the new methods in lambda methods as well\r\n* update the pull section of circleci to include actually tested images, and remove ancient unused images\r\n\r\nWhile it should continue to work, best to merge it after accompanying pro PR.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1043,
        "deletions": 1855,
        "changed_files": 43,
        "created_at": "2022-05-12T09:53:36Z",
        "closed_at": "2022-05-13T18:26:16Z",
        "merged_at": "2022-05-13T18:26:16Z",
        "body": "Some cleanup, restructuring of our pytest setup.\r\n\r\nMostly extracting/moving things around.\r\n\r\nThis PR intentionally tries to avoid touching any logic and doesn't move actual test files. (some tests had to be fixed/removed/skipped though)",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 55,
        "deletions": 18,
        "changed_files": 3,
        "created_at": "2022-05-11T21:55:12Z",
        "closed_at": "2022-05-12T17:36:49Z",
        "merged_at": "2022-05-12T17:36:49Z",
        "body": "This PR assures that the same authoriser used in the API is not created multiple times.\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 51,
        "deletions": 24,
        "changed_files": 4,
        "created_at": "2022-05-11T20:41:40Z",
        "closed_at": "2022-05-16T21:07:12Z",
        "merged_at": "2022-05-16T21:07:12Z",
        "body": "Small PR to move the `import_rest_api` operation to the ASF handler. Doing that, we can remove our internal monkey patching.\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 21,
        "deletions": 15,
        "changed_files": 1,
        "created_at": "2022-05-11T08:36:14Z",
        "closed_at": "2022-05-11T14:21:09Z",
        "merged_at": "2022-05-11T14:21:09Z",
        "body": "This PR fixes some issues with the docs generation of ASF's scaffold:\r\n- Sanitizes the results of the ASF Scaffold's doc creation by replacing invalid escape sequences.\r\n- Changes the execution order of autoflake and black (format with black after manipulating the code with autoflake).",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 197,
        "deletions": 1,
        "changed_files": 3,
        "created_at": "2022-05-11T02:18:58Z",
        "closed_at": "2022-05-17T22:17:26Z",
        "merged_at": "2022-05-17T22:17:26Z",
        "body": "This PR adds analytics to the CLI. Whenever a client issues a CLI command we fire an event on a background thread that sends the base command (e.g. `status` or `start`) to the analytics backend. This behavior can be suppressed with the `DISABLE_EVENTS` env var.\r\n\r\nI was unable to find a good way to include which options/flags have been set. Click conceals these parameters until the point that they reach the command function that actually uses them. So the only way that I found to capture these aspects would be to add logic for emitting an analytics event to every single `click.command` function, which IMO is too annoying and brittle. I actually spent a significant amount of time diving into the Click docs and codebase because I thought there _had_ to be some central way to intercept the raw command/args/options but I was unable to find a solution.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 4,
        "changed_files": 1,
        "created_at": "2022-05-10T21:27:13Z",
        "closed_at": "2022-05-11T06:17:26Z",
        "merged_at": "2022-05-11T06:17:26Z",
        "body": "Fixes https://github.com/localstack/localstack/issues/6022\r\n\r\nThe lambda failed to source `stageVariables` from the event because it was being suppressed by the event construction. \r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 10,
        "deletions": 334,
        "changed_files": 7,
        "created_at": "2022-05-10T16:17:08Z",
        "closed_at": "2022-07-01T14:27:19Z",
        "merged_at": "2022-07-01T14:27:19Z",
        "body": "This PR removes the code related to the record/replay-based persistence feature. It impacts [this](https://github.com/localstack/localstack-ext/pull/601).",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 213,
        "deletions": 8,
        "changed_files": 4,
        "created_at": "2022-05-10T15:58:59Z",
        "closed_at": "2022-05-31T14:00:21Z",
        "merged_at": "2022-05-31T14:00:21Z",
        "body": "This PR implements apigateway's execute-api functionality through the edge router mechanism, which makes the custom proxy listener obsolete and unblocks the complete migration to the ASF gateway.\r\n\r\nNote that this is only a first version for the community version. We will need to do some unification for our pro extensions and add routing for custom domains. Maybe it would be useful to consolidate some of the `UrlParts` code into the `ApigatewayRouter`. In any case this is a second step.\r\n\r\nThe major change are:\r\n* introducing the `ApigatewayRouter`, which registers, for each newly added rest API, routing rules into the underlying `Router` (which currently is the `edge.ROUTER` singleton, but can now easily be exchanged). Beyond that it uses the familiar `invoke_rest_api_from_request` abstraction.\r\n* The TestInvokeMethod logic was moved to it's respective API method.\r\n* removed the `/documentation/versions` hack in the response handler, since we seem to have no tests for it. There are API methods that should be parity-tested and then implemented (`create_documentation_version`, ...).\r\n* moved caching the rest API regions\r\n\r\nCurrently the provider is the default provider, but we should consider switching it back before merging and flipping the switch when merging the ASF gateway for v1.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 6,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2022-05-10T15:33:28Z",
        "closed_at": "2022-05-10T16:45:39Z",
        "merged_at": "2022-05-10T16:45:39Z",
        "body": "## Background\r\nCurrently, in test runs, after pytest exits an error message will show, namely `RuntimeError: cannot schedule new futures after interpreter shutdown`. This is due to the main thread of pytest exiting without waiting for LocalStack to finish, and LocalStack needing new futures for shutdown.\r\n## Fix\r\nWe now wait (for 10 seconds) for LocalStack to terminate correctly. If it does, no error will be shown. If it takes longer, we will print an error message (regarding LocalStack not yet shut down), and exit nevertheless. The tests will still be a success and exit code of pytest will still be 0 in this case (to minimize flaky test runs due to this change).\r\n## Other changes\r\nI introduced timestamps for logging in tests, to debug performance issues, hung threads etc better.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-05-10T10:53:25Z",
        "closed_at": "2022-05-11T20:02:35Z",
        "merged_at": "2022-05-11T20:02:35Z",
        "body": "Bump moto-ext dependency to version 3.1.9",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 90,
        "deletions": 15,
        "changed_files": 4,
        "created_at": "2022-05-09T14:52:53Z",
        "closed_at": "2022-05-10T19:45:58Z",
        "merged_at": "2022-05-10T19:45:58Z",
        "body": "Small enhancements for Velocity rendering, continuation of fixes for #5988 :\r\n* add proper support for map functions `put`/`putAll`\r\n* add `quiet`/`qr` util function to suppress output from function results\r\n* minor refactoring, pulling out `VelocityUtil` base functionality into common base class",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 6,
        "deletions": 37,
        "changed_files": 3,
        "created_at": "2022-05-09T12:56:28Z",
        "closed_at": "2022-05-09T14:34:03Z",
        "merged_at": "2022-05-09T14:34:03Z",
        "body": "This reverts commit 67298f40f776b9f6c7de9b03cfa22a29fb3acf79.\r\n\r\nThis PR currently breaks a lot of -ext services (amplify, apigateway, serverlessrepo...)\r\nThis is due to the replacement of get_raw_path with direct access to .path.\r\nAccording to @thrau , the rest of the PR does not really make sense without this change, so this is an immediate fix by reverting. Proper fix incoming once ready.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-05-09T06:27:08Z",
        "closed_at": "2022-05-09T08:19:18Z",
        "merged_at": "2022-05-09T08:19:18Z",
        "body": "The new CLA assistant's allowlist does not work for the RenovateBot PRs (as you can see in https://github.com/localstack/localstack/pull/6029).\r\nThis PR changes the allowlist entry from \"renovate\" to \"renovate-bot\" (which is the GitHub username used for the commit - https://github.com/localstack/localstack/pull/6029/commits/ec615f88106c3628f5881715aa1ee5f041480d7d).",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 36,
        "deletions": 3,
        "changed_files": 3,
        "created_at": "2022-05-09T05:10:39Z",
        "closed_at": "2022-05-09T06:40:27Z",
        "merged_at": "2022-05-09T06:40:27Z",
        "body": "# \ud83d\ude80 ASF Update Report \ud83d\ude80\nThis PR has been automatically generated to update the generated API stubs for our ASF services.\nIt uses the latest code-generator from the _master_ branch ([scaffold.py](https://github.com/localstack/localstack/blob/master/localstack/aws/scaffold.py)) and the latest _published_ version of [botocore](https://github.com/boto/botocore) to re-generate all API stubs which are already present in the `localstack.aws.api` module of the _master_ branch.\n\n## \ud83d\udd04 Updated Services\nThis PR updates the following services:\n- ec2\n- redshift\n- ssm\n\n## \ud83d\udc77\ud83c\udffd Handle this PR\nThe following options describe how to interact with this PR / the auto-update:\n\n\u2714\ufe0f **Accept Changes**\nIf the changes are satisfying, just squash-merge the PR and delete the source branch.\n\n\ud83d\udeab **Ignore Changes**\nIf you want to ignore the changes in this PR, just close the PR and *do not delete* the source branch. The PR will not be opened and a new PR will not be created for as long as the generated code does not change (or the branch is deleted). As soon as there are new changes, a new PR will be created.\n\n\u270f\ufe0f **Adapt Changes**\n*Don't do this.* The APIs are auto-generated. If you decide that the APIs should look different, you have to change the code-generation.\n\n\u23f8\ufe0f **Pause Updates**\nRemove the cron-schedule trigger of the GitHub Action workflow which creates these PRs. The action can then still be triggered manually, but it will not be executed automatically.",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2022-05-09T01:57:53Z",
        "closed_at": "2022-05-09T07:50:29Z",
        "merged_at": "2022-05-09T07:50:29Z",
        "body": "[![WhiteSource Renovate](https://app.renovatebot.com/images/banner.svg)](https://renovatebot.com)\n\nThis PR contains the following updates:\n\n| Package | Type | Update | Change |\n|---|---|---|---|\n| python | stage | digest | `48c4a79` -> `1678c20` |\n\n---\n\n### Configuration\n\n\ud83d\udcc5 **Schedule**: \"before 3am on Monday\" (UTC).\n\n\ud83d\udea6 **Automerge**: Disabled by config. Please merge this manually once you are satisfied.\n\n\u267b **Rebasing**: Whenever PR becomes conflicted, or you tick the rebase/retry checkbox.\n\n\ud83d\udd15 **Ignore**: Close this PR and you won't be reminded about this update again.\n\n---\n\n - [ ] <!-- rebase-check -->If you want to rebase/retry this PR, click this checkbox.\n\n---\n\nThis PR has been generated by [WhiteSource Renovate](https://renovate.whitesourcesoftware.com). View repository job log [here](https://app.renovatebot.com/dashboard#github/localstack/localstack).",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 48,
        "deletions": 3,
        "changed_files": 2,
        "created_at": "2022-05-07T18:43:03Z",
        "closed_at": "2022-05-09T15:42:07Z",
        "merged_at": "2022-05-09T15:42:06Z",
        "body": "We were facing an error while dumping a dictionary with binary data. It should fix #6011. Added a test with the reported usage.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 37,
        "deletions": 6,
        "changed_files": 3,
        "created_at": "2022-05-07T13:23:36Z",
        "closed_at": "2022-05-09T09:15:01Z",
        "merged_at": "2022-05-09T09:15:01Z",
        "body": "This PR fixes an issue where S3 virtual host addressing would not work correctly, because werkzeug caches properties (like various variants of the URL and path) based on the `path` attribute. Simply setting it doesn't work reliably, we also have to delete the related cached properties. This is an unfortunate limitation of #5876.\r\n\r\nFor now I see this a workaround. Moving forward we need to answer the question whether we really want incoming requests to be mutable.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 84,
        "deletions": 4,
        "changed_files": 3,
        "created_at": "2022-05-07T13:12:59Z",
        "closed_at": "2022-05-09T09:15:25Z",
        "merged_at": "2022-05-09T09:15:25Z",
        "body": "This PR fixes an issue where the parser would raise ProtocolErrors when receiving GET requests with a body. This was uncovered while running S3 tests that send GET bodies that are by default ignored by AWS (I verified it against AWS).\r\nBasically we try body parsing, but if fails and it is a `GET` or `HEAD` request, we ignore the error. I also introduced a flag to control it so we can disable it for rest-json and enable it for rest-xml (which seems to be the behavior in AWS), or specific service protocols should we come across different behavior.\r\n\r\n## HTTP Spec \r\nWhether sending a body with a GET request is allowed in HTTP is debated here: https://stackoverflow.com/a/983458/804840. TL;DR, the spec says\r\n> the message-body SHOULD be ignored when handling the request.\r\n\r\nAWS does things differently of course.\r\n\r\n## Behavior in AWS\r\n\r\nAWS has as of now three operations that ignore the spec (these are all `rest-json`), and where our parsers should parse the body regardless.\r\n\r\n* quicksight GET ListIAMPolicyAssignments (member: AssignmentStatus)\r\n* sesv2 GET ListContacts (member: Filter)\r\n* sesv2 GET ListImportJobs (member: ImportDestinationType)\r\n\r\nAt the same time, some services, like S3, ignore GET request bodies completely, which means you can send GET requests to rest-xml services that are ignored, even if they are invalid.\r\n\r\n## Limitations\r\n\r\nrest-json services behave a bit differently, and i think the behavior is partly service-specific. the opensearch GET may send you something like `400, '{\"Message\": null}'` if you send \"foobar\", but pass normally when you pass `{}`. A POST request with \"foobar\" as body will also yield `400, '{\"Message\": null}'`, but with a valid JSON but illegal request it will return something like: `400, {\"message\":\"1 validation error detected: Value null at 'domainName' failed to satisfy constraint: Member must not be null\"}`\r\n\r\nImplementing that particular behavior seems out of scope of this fix, but it's also not clear to me how to distinguish the different `ProtocolParserErrors` :shrug: .\r\n\r\nHere's a script demonstrating the behavior:\r\n\r\n```python\r\nimport boto3\r\nimport requests\r\nfrom botocore.auth import SigV4Auth\r\nfrom botocore.awsrequest import AWSRequest\r\n\r\n\r\ndef main():\r\n    session = boto3.Session(profile_name=\"sandbox\")\r\n    credentials = session.get_credentials()\r\n    creds = credentials.get_frozen_credentials()\r\n\r\n    def signed_request(method, url, data=None, params=None, headers=None):\r\n        request = AWSRequest(method=method, url=url, data=data, params=params, headers=headers)\r\n        # \"service_name\" is generally \"execute-api\" for signing API Gateway requests\r\n        SigV4Auth(creds, \"es\", \"us-east-1\").add_auth(request)\r\n        return requests.request(method=method, url=url, headers=dict(request.headers), data=data)\r\n\r\n    response = signed_request(\r\n        method='GET',\r\n        url=\"https://es.us-east-1.amazonaws.com/2021-01-01/domain\",\r\n        data=b\"fooobar\",\r\n        headers={}\r\n    )\r\n    print(response.status_code, response.text)  # prints 400, '{\"Message\": null}'\r\n\r\n    response = signed_request(\r\n        method='GET',\r\n        url=\"https://es.us-east-1.amazonaws.com/2021-01-01/domain\",\r\n        data=b\"{}\",\r\n        headers={}\r\n    )\r\n    print(response.status_code, response.text)  # 200 {\"DomainNames\":[]}\r\n\r\n    response = signed_request(\r\n        method='POST',\r\n        url=\"https://es.us-east-1.amazonaws.com/2021-01-01/opensearch/domain\",\r\n        data=b\"{}\",\r\n        headers={}\r\n    )\r\n    print(response.status_code, response.text)  # prints 400, {\"message\":\"1 validation error detected: Value null at 'domainName' failed to satisfy constraint: Member must not be null\"}\r\n\r\n    response = signed_request(\r\n        method='POST',\r\n        url=\"https://es.us-east-1.amazonaws.com/2021-01-01/opensearch/domain\",\r\n        data=b\"foo\",\r\n        headers={}\r\n    )\r\n    print(response.status_code, response.text)  # prints 400, '{\"Message\": null}'\r\n\r\n\r\nif __name__ == '__main__':\r\n    main()\r\n```\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1143,
        "deletions": 11,
        "changed_files": 6,
        "created_at": "2022-05-06T18:27:54Z",
        "closed_at": "2022-05-06T19:56:09Z",
        "merged_at": "2022-05-06T19:56:09Z",
        "body": "Hotfix for an issue blocking our internal pipeline.\r\n\r\nAlso adds integration tests for CDK bootstrap templates v11 and v12 as well as an AWS validated test for more complicated CloudFormation behavior regarding conditional Resources/Outputs when updating stacks. This will mostly be useful later on when reworking parts of CloudFormation.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 10,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2022-05-06T13:11:30Z",
        "closed_at": "2022-05-09T16:12:49Z",
        "merged_at": "2022-05-09T16:12:49Z",
        "body": "This comes in handy when trying to access the `PersistenceLifeCycle` while iterating over the active provider for Cloud Pods.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 38,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2022-05-05T17:19:21Z",
        "closed_at": "2022-05-05T21:17:15Z",
        "merged_at": "2022-05-05T21:17:15Z",
        "body": "Added a small utility to filter dictionary based on the keys declared in a given `TypedDict`. \r\nThis could come in handy for many providers when we explicitly lists the needed attribute and was asked by @MEPalma to facilitate the writing of some tests.",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 406,
        "deletions": 253,
        "changed_files": 16,
        "created_at": "2022-05-05T13:51:56Z",
        "closed_at": "2022-05-17T19:29:13Z",
        "merged_at": "2022-05-17T19:29:13Z",
        "body": "### Summary\r\n\r\nThis PR replaces the aggregate `QueueKey` design for uniquely identifying queues with standard `RegionBackend`.\r\nThus enabling persistence support for SQS.\r\n\r\nThe legacy provider is removed and all integration tests updated.\r\n\r\n### Related\r\n\r\nDepends on https://github.com/localstack/localstack/pull/5928\r\n",
        "comments": 8
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 9,
        "changed_files": 3,
        "created_at": "2022-05-05T12:59:52Z",
        "closed_at": "2022-05-05T20:43:34Z",
        "merged_at": "2022-05-05T20:43:34Z",
        "body": "This PR sets the default loglevel of pytest to debug, meaning that logs will automatically be output to the CLI. The consequence is that, when running `DEBUG=1 make test`, you will automatically get logs in your terminal.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 8,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2022-05-05T01:03:44Z",
        "closed_at": "2022-05-07T12:46:00Z",
        "merged_at": "2022-05-07T12:46:00Z",
        "body": " Restrict the GitHub token permissions only to the required ones; this way, even if the attackers will succeed in compromising your workflow, they won\u2019t be able to do much.\n\n- Included permissions for the action. https://github.com/ossf/scorecard/blob/main/docs/checks.md#token-permissions\n\nhttps://docs.github.com/en/actions/using-workflows/workflow-syntax-for-github-actions#permissions\n\nhttps://docs.github.com/en/actions/using-jobs/assigning-permissions-to-jobs\n\n[Keeping your GitHub Actions and workflows secure Part 1: Preventing pwn requests](https://securitylab.github.com/research/github-actions-preventing-pwn-requests/)\n\nSigned-off-by: naveen <172697+naveensrinivasan@users.noreply.github.com>\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 90,
        "deletions": 13,
        "changed_files": 6,
        "created_at": "2022-05-04T23:41:06Z",
        "closed_at": "2022-05-10T20:40:04Z",
        "merged_at": "2022-05-10T20:40:04Z",
        "body": "This PR adds support for authorisers included in the OpenAPI specification. The method needs to be refactored further into a class that handles different versions of the spec and makes it easy to add new functionality not supported in the current implementation.\r\n\r\n\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 25,
        "deletions": 3,
        "changed_files": 3,
        "created_at": "2022-05-04T23:08:53Z",
        "closed_at": "2022-05-05T11:23:33Z",
        "merged_at": "2022-05-05T11:23:33Z",
        "body": "This PR fixes an encoding issue that arises from ASGI using normal utf-8 encoding for paths, whereas werkzeug expects latin-1 encoded paths.\r\nThis was already implemented for the `dummy_wsgi_environment`, but not for the wsgi/asgi bridge. Added tests for both cases.\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 189,
        "deletions": 233,
        "changed_files": 3,
        "created_at": "2022-05-04T14:46:00Z",
        "closed_at": "2022-05-04T20:52:16Z",
        "merged_at": "2022-05-04T20:52:16Z",
        "body": "* Add support for `#return` macros in VTL templates - addresses #5988 . This requires a patch in `airspeed`, which over time we should contribute upstream.\r\n* Clean up and unify templating code. A large portion of of the PR is actually just moving things around, cleaning up duplicate code, etc. The key change is to separate a (somewhat) generic `VtlTemplate` (which can also be used by AppSync and other services), and a derived `ApiGatewayVtlTemplate` which adds extensions that are relevant in an API GW context. Was taking care of backwards compatibility, and should be reasonably well covered by tests.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 908,
        "deletions": 648,
        "changed_files": 7,
        "created_at": "2022-05-03T20:27:27Z",
        "closed_at": "2022-05-04T22:34:02Z",
        "merged_at": "2022-05-04T22:34:02Z",
        "body": "This PR is an initial effort to refactor the s3 tests.\r\n\r\nRough rundown of changes:\r\n* move s3 tests into separate package (`tests/integration/s3`)\r\n* separate tests that have integrations with other services (in this PR: s3 notifications), may be interesting for the case @viren-nadkarni ran in to related to s3->eventbridge notifications\r\n* completely revamped the notification tests using polling mechanisms (to make them work against AWS)\r\n* use pytest and factory fixture pattern correctly\r\n* -> allowed me to run all refactored tests against AWS (except the lambda notification test, i was too lazy to create the policies ;-))\r\n* removed a few redundant tests\r\n\r\nI did not refactor all of them, it was just too much work for one pass. But I hope this can give a template for how to proceed.",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 1098,
        "deletions": 8,
        "changed_files": 11,
        "created_at": "2022-05-03T18:04:55Z",
        "closed_at": "2022-05-05T12:22:18Z",
        "merged_at": "2022-05-05T12:22:18Z",
        "body": "This PR adds a hacky filter, to the cognito_identity field of the lambda context. This will only allow correct values to be passed into it.\r\n\r\nOnce a real fix is available (by rethinking and redoing the `localstack.services.apigateway.apigateway_listener.invoke_rest_api_integration_backend` and `localstack.services.apigateway.helpers.get_event_request_context` methods @whummer @calvernaz ) so that this part:\r\n```python\r\n        \"identity\": {\r\n            \"accountId\": account_id,\r\n            \"sourceIp\": source_ip,\r\n            \"userAgent\": headers.get(\"User-Agent\"),\r\n        },\r\n```\r\ndoes not show up in the cognito_identity part of the lambda context, this PR should be reverted.\r\n\r\nUntil then, it will only allow `\"cognitoIdentityId\"` and `\"cognitoIdentityPoolId\"` as directory keys for cognito_identity.\r\n\r\nThis should help fixing #5783 .\r\n\r\nTest for apigateway - rust lambda integration added to prevent further regressions.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 7,
        "deletions": 117,
        "changed_files": 6,
        "created_at": "2022-05-03T17:57:01Z",
        "closed_at": "2022-05-03T21:58:37Z",
        "merged_at": "2022-05-03T21:58:37Z",
        "body": "This PR removes \"reactive mode\" from the EventSourceListener class as it appears to be unused. More info here:\r\nhttps://github.com/localstack/localstack/issues/5986",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 73,
        "deletions": 46,
        "changed_files": 4,
        "created_at": "2022-05-03T14:04:12Z",
        "closed_at": "2022-05-03T19:06:23Z",
        "merged_at": "2022-05-03T19:06:23Z",
        "body": "This is necessary for a fix for #5468 , since `dockerSecurityOptions` are still not supported by ECS.\r\n\r\nUsing this container client extension, we enable this support.\r\n\r\nAlso, as discussed in the context of #5955 with @thrau , I added explicit exception chaining for the docker sdk client.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 3,
        "changed_files": 2,
        "created_at": "2022-05-03T13:45:33Z",
        "closed_at": "2022-05-03T17:10:24Z",
        "merged_at": "2022-05-03T17:10:23Z",
        "body": "Currently, passing signals from the LS docker container init process (= docker-entrypoint.sh) to supervisord (which will in turn pass it to the LocalStack process itself), is disabled per default, unless you set `SET_TERM_HANDLER=1`.\r\nThis results in long shutdown times for docker-compose, as well as leftover containers started by LS (like lambda containers etc.), since docker-compose will kill containers after 10s if they do not end themselves in that timeframe.\r\nThis behavior is not seen in LS CLI, since we set the term handler variable explicitely there.\r\n\r\nThis PR inverts this behavior, signal handling is enabled per default, unless `DISABLE_TERM_HANDLER=1` is set, for users who, for any reason, would like to use the \"old\" behavior.\r\n\r\nThe `SET_TERM_HANDLER` variable setting in CLI is still in there for now, in order to prevent bricking instances where a new CLI meets an older docker image (should be removed after a considerate amount of time).\r\n\r\nThis PR results in way faster stop times in docker-compose (<2s instead of >10s), as well as a possible cleanup of resources, and possibilities for persistence.",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 22,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2022-05-03T12:37:58Z",
        "closed_at": "2022-05-03T15:04:15Z",
        "merged_at": "2022-05-03T15:04:15Z",
        "body": "Fixed a bug, where the data points would contain the value `0`, which get filtered by the expression `if not value`.\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 11,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2022-05-03T11:46:38Z",
        "closed_at": "2022-05-03T14:45:41Z",
        "merged_at": "2022-05-03T14:45:41Z",
        "body": null,
        "comments": 1
    },
    {
        "merged": false,
        "additions": 0,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2022-05-03T11:45:46Z",
        "closed_at": "2022-05-03T13:16:58Z",
        "merged_at": null,
        "body": "Test commit to trigger CLA signing. Do not merge!",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 30,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2022-05-03T10:19:50Z",
        "closed_at": "2022-05-03T11:42:40Z",
        "merged_at": "2022-05-03T11:42:40Z",
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 43,
        "deletions": 6,
        "changed_files": 3,
        "created_at": "2022-05-03T07:27:06Z",
        "closed_at": "2022-05-03T09:29:08Z",
        "merged_at": "2022-05-03T09:29:08Z",
        "body": "This PR fixes the HTTP HEAD method detection in the ASF operation router for service with a `rest-*` protocol.\r\n\r\nA new inheritance layer has been introduced (`_StrictMethodRule`) which reverts assumptions made by Werkzeug's rule, specifically the automatic adding of `HEAD` to the list of methods if the `methods` param contains `GET` ([werkzeug/routing.py#L723-L724](https://github.com/pallets/werkzeug/blob/bb21bf90b0b121e3ed45b9950b823e4b43a81fd8/src/werkzeug/routing.py#L723-L724)).\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2022-05-02T18:56:33Z",
        "closed_at": "2022-05-03T11:21:16Z",
        "merged_at": "2022-05-03T11:21:16Z",
        "body": "This fixes a regression that I introduced (sorry!) with the patch utility. The `Patch.function` expects the method signatures by default to take as first argument the method that is patched. The method signature of `mock_metric_alarm_details`, etc, were not updated correctly. The `alarm_scheduler.calculate_alarm_state(\"helloworld\")` call would then raise a TypeError, which i was only able to uncover by wrapping a try/except block:\r\n![image](https://user-images.githubusercontent.com/3996682/166307887-35989f00-5931-4c85-a787-41aa5c5af10e.png)\r\n\r\nNo idea where the exception is lost, but potentially worth looking into at some point.\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 26,
        "deletions": 3,
        "changed_files": 2,
        "created_at": "2022-05-02T18:40:20Z",
        "closed_at": "2022-05-03T09:49:24Z",
        "merged_at": "2022-05-03T09:49:24Z",
        "body": "This PR disables strict slash matching (ignore trailing slashes) for the operation router.\r\nI'm 96% confident this change is safe ;-)\r\n\r\nI also added the host to the matcher since it helps with debugging when getting redirect errors.\r\nIt then prints: `werkzeug.routing.RequestRedirect: 308 Permanent Redirect: http://127.0.0.1/2015-03-31/functions/`\r\n\r\n## Background\r\n\r\nI ran into the problem when debugging this test: https://github.com/localstack/localstack/blob/abbb7a8866ca3cafb0b3ca2f60ca26acebad3b44/tests/integration/test_edge.py#L290-L301\r\n\r\nThe test is calling `GET /2015-03-31/functions`, which would not match the `ListFunctions` rule in botocore, whose requestUri is [`/2015-03-31/functions/`](https://github.com/boto/botocore/blob/801faeec62d325a337bd5b39cce8d2c189774e12/botocore/data/lambda/2015-03-31/service-2.json#L704-L709)\r\n\r\n### AWS Behavior\r\n\r\nI ran a test against AWS, and it seems like indeed AWS is not strict about trailing slashes.\r\nHere's what I executed. (`sandox` is my local profile to test against AWS).\r\nIt does not appear to do any 308 redirects.\r\n\r\n```python\r\n\r\ndef main():\r\n    session = boto3.Session(profile_name=\"sandbox\")\r\n    credentials = session.get_credentials()\r\n    creds = credentials.get_frozen_credentials()\r\n\r\n    def signed_request(method, url, data=None, params=None, headers=None):\r\n        request = AWSRequest(method=method, url=url, data=data, params=params, headers=headers)\r\n        # \"service_name\" is generally \"execute-api\" for signing API Gateway requests\r\n        SigV4Auth(creds, \"lambda\", \"us-east-1\").add_auth(request)\r\n        return requests.request(method=method, url=url, headers=dict(request.headers), data=data)\r\n\r\n    response = signed_request(\r\n        method='GET',\r\n        url=\"https://lambda.us-east-1.amazonaws.com/2015-03-31/functions\",\r\n        data=b\"\",\r\n        headers={}\r\n    )\r\n    assert response.status_code == 200\r\n\r\n\r\nif __name__ == '__main__':\r\n    main()\r\n```\r\n\r\n### Werkzeug strict slashes\r\n\r\nHere's a code snippet demonstrating the werkzeug behavior:\r\n```python\r\nfrom werkzeug.routing import Map, Rule\r\n\r\n\r\ndef main():\r\n    router = Map([\r\n        Rule(\"/2015-03-31/functions/\", methods=[\"GET\"], endpoint=\"get_functions\"),\r\n        Rule(\"/2015-03-31/functions\", methods=[\"POST\"], endpoint=\"create_function\"),\r\n    ], strict_slashes=False)\r\n\r\n    matcher = router.bind(\"\")\r\n\r\n    # with strict-slashes = True, this tries to redirect to http:///2015-03-31/functions/\r\n    print(matcher.match(\"/2015-03-31/functions\", method=\"GET\"))\r\n\r\n\r\nif __name__ == '__main__':\r\n    main()\r\n```\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 102,
        "changed_files": 2,
        "created_at": "2022-05-02T16:22:57Z",
        "closed_at": "2022-05-02T18:08:38Z",
        "merged_at": "2022-05-02T18:08:38Z",
        "body": "Likely leftovers from ASF migration",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 25,
        "deletions": 18,
        "changed_files": 3,
        "created_at": "2022-05-02T14:43:35Z",
        "closed_at": "2022-05-02T20:58:04Z",
        "merged_at": "2022-05-02T20:58:04Z",
        "body": "Bump version of moto-ext to 3.1.8.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-05-02T14:14:01Z",
        "closed_at": "2022-05-02T18:11:45Z",
        "merged_at": "2022-05-02T18:11:45Z",
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2022-05-02T13:20:27Z",
        "closed_at": "2022-05-02T14:34:14Z",
        "merged_at": "2022-05-02T14:34:13Z",
        "body": "Hotfix for a regression that prevented AWS CDK from bootstrapping since the DescribeStacks response couldn't be parsed successfully.\r\n\r\nFixes https://github.com/localstack/aws-cdk-local/issues/68",
        "comments": 5
    },
    {
        "merged": false,
        "additions": 32,
        "deletions": 14,
        "changed_files": 3,
        "created_at": "2022-05-02T12:06:29Z",
        "closed_at": "2022-05-05T14:10:49Z",
        "merged_at": null,
        "body": "### Summary\r\n\r\nNaiveBackend is a provider backend for services that do no have the concept of regions or handle region resolution themselves.\r\nIt uses the existing persistence/pickling mechanism, storing the serialised dumps in the `global` subdirectory:\r\n```\r\n.\r\n.\r\n\u251c\u2500\u2500 api_states\r\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 00000069\r\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 ec2\r\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2514\u2500\u2500 us-east-1\r\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0     \u2514\u2500\u2500 backend_state\r\n\u2502\u00a0\u00a0     \u2514\u2500\u2500 sqs\r\n\u2502\u00a0\u00a0         \u251c\u2500\u2500 global\r\n\u2502\u00a0\u00a0         \u2502\u00a0\u00a0 \u2514\u2500\u2500 region_state\r\n\u2502\u00a0\u00a0         \u2514\u2500\u2500 static\r\n\u2502\u00a0\u00a0             \u2514\u2500\u2500 shared_state\r\n\u251c\u2500\u2500 recorded_api_calls.json\r\n\u2514\u2500\u2500 startup_info.json\r\n\r\n```\r\nFor now, this backend will be used by SQS pro provider.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 14,
        "deletions": 4,
        "changed_files": 2,
        "created_at": "2022-05-02T10:45:07Z",
        "closed_at": "2022-05-02T14:53:53Z",
        "merged_at": "2022-05-02T14:53:53Z",
        "body": "This PR fixes an issue where the ASF gateway would not serialize boto exceptions correctly, because it doesn't know about moto exceptions. Because the tests were using the custom `sm_client` fixture, and i was too lazy to refactor the tests, i simply wrapped the fixture with our `secretsmanager_client` to run the affected test against AWS.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2022-05-02T07:54:09Z",
        "closed_at": "2022-05-02T09:24:11Z",
        "merged_at": "2022-05-02T09:24:11Z",
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 48,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2022-05-02T07:12:33Z",
        "closed_at": "2022-05-03T06:17:36Z",
        "merged_at": "2022-05-03T06:17:36Z",
        "body": "## Description\r\n\r\nThis PR:\r\n\r\n- Adds a stale bot to manage issues\r\n\r\n## Note\r\n\r\nPlease make sure to install this [GitHub App](https://github.com/marketplace/stale) to the organization before merging this PR.",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 15,
        "deletions": 3,
        "changed_files": 2,
        "created_at": "2022-05-02T05:16:43Z",
        "closed_at": "2022-05-02T19:23:13Z",
        "merged_at": "2022-05-02T19:23:13Z",
        "body": "# \ud83d\ude80 ASF Update Report \ud83d\ude80\nThis PR has been automatically generated to update the generated API stubs for our ASF services.\nIt uses the latest code-generator from the _master_ branch ([scaffold.py](https://github.com/localstack/localstack/blob/master/localstack/aws/scaffold.py)) and the latest _published_ version of [botocore](https://github.com/boto/botocore) to re-generate all API stubs which are already present in the `localstack.aws.api` module of the _master_ branch.\n\n## \ud83d\udd04 Updated Services\nThis PR updates the following services:\n- ec2\n- ssm\n\n## \ud83d\udc77\ud83c\udffd Handle this PR\nThe following options describe how to interact with this PR / the auto-update:\n\n\u2714\ufe0f **Accept Changes**\nIf the changes are satisfying, just squash-merge the PR and delete the source branch.\n\n\ud83d\udeab **Ignore Changes**\nIf you want to ignore the changes in this PR, just close the PR and *do not delete* the source branch. The PR will not be opened and a new PR will not be created for as long as the generated code does not change (or the branch is deleted). As soon as there are new changes, a new PR will be created.\n\n\u270f\ufe0f **Adapt Changes**\n*Don't do this.* The APIs are auto-generated. If you decide that the APIs should look different, you have to change the code-generation.\n\n\u23f8\ufe0f **Pause Updates**\nRemove the cron-schedule trigger of the GitHub Action workflow which creates these PRs. The action can then still be triggered manually, but it will not be executed automatically.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 76,
        "deletions": 4,
        "changed_files": 5,
        "created_at": "2022-05-02T00:59:19Z",
        "closed_at": "2022-05-02T09:06:33Z",
        "merged_at": "2022-05-02T09:06:33Z",
        "body": "This PR changes the way path rules of requestUri patterns, e.g., `{Key+}`, are matched. It adds tests for the behavior at multiple levels.\r\n\r\nBackground: S3 keys can contain slashes, which are encoded in the path, and the slashes should be matched by the path rule.\r\n\r\n    /test-bucket-5a51ca7e//foo/bar\r\n     -------------------^ -------^\r\n     bucket                key\r\n\r\nThe default `path` rule regex is `[^/].*?`, I changed that to `.*?`, so it matches slashes as well.\r\n\r\nThis will work even when matching paths where there is a static suffix. For example, these rules exist and will work:\r\n\r\n* workspaces-web GetTrustStoreCertificate: `/trustStores/{trustStoreArn+}/certificate`\r\n\r\nMoreover, when the routing Map has `merge_slashes=True` set, werkzeug detects multiple consecutive slashes and then attempts to redirect. So we disable that too.\r\n\r\n... didn't let me sleep this one ;-)",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2022-05-02T00:18:53Z",
        "closed_at": "2022-05-02T06:07:07Z",
        "merged_at": "2022-05-02T06:07:07Z",
        "body": "[![WhiteSource Renovate](https://app.renovatebot.com/images/banner.svg)](https://renovatebot.com)\n\nThis PR contains the following updates:\n\n| Package | Type | Update | Change |\n|---|---|---|---|\n| python | stage | digest | `36a1e0b` -> `8b65f13` |\n\n---\n\n### Configuration\n\n\ud83d\udcc5 **Schedule**: \"before 3am on Monday\" (UTC).\n\n\ud83d\udea6 **Automerge**: Disabled by config. Please merge this manually once you are satisfied.\n\n\u267b **Rebasing**: Whenever PR becomes conflicted, or you tick the rebase/retry checkbox.\n\n\ud83d\udd15 **Ignore**: Close this PR and you won't be reminded about this update again.\n\n---\n\n - [ ] <!-- rebase-check -->If you want to rebase/retry this PR, click this checkbox.\n\n---\n\nThis PR has been generated by [WhiteSource Renovate](https://renovate.whitesourcesoftware.com). View repository job log [here](https://app.renovatebot.com/dashboard#github/localstack/localstack).",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 716,
        "deletions": 2,
        "changed_files": 6,
        "created_at": "2022-05-01T18:17:24Z",
        "closed_at": "2022-05-03T10:05:33Z",
        "merged_at": "2022-05-03T10:05:33Z",
        "body": "This PR adds an ASGI to WSGI bridge to serve WSGI applications through ASGI servers like Hypercorn. This serves as a basis for #5243 that is built around werkzeug's `Request` object which wraps and underlying `WSGIEnvironment`. This gives us all the benefits of the ASGI HTTP/2 server, while also maximally re-using Werkzeug's synchronous server code.\r\n\r\n## Example usage\r\n\r\nHere's an example server highlighting the integration:\r\n```python\r\nimport werkzeug\r\nimport hypercorn\r\n\r\nfrom localstack.http.asgi import ASGIAdapter\r\nfrom localstack.http.hypercorn import HypercornServer\r\n\r\n\r\n@werkzeug.Request.application\r\ndef wsgi_app(request: werkzeug.Request) -> werkzeug.Response:\r\n    return werkzeug.Response(\"ok\", 200)\r\n\r\n\r\ndef main():\r\n    config = hypercorn.Config()\r\n    config.bind = \"localhost:4566\"\r\n\r\n    asgi_app = ASGIAdapter(wsgi_app)\r\n    server = HypercornServer(asgi_app, config)\r\n\r\n    server.start()\r\n    server.wait_is_up(10)\r\n\r\n    try:\r\n        server.join()\r\n    except KeyboardInterrupt:\r\n        pass\r\n    finally:\r\n        server.shutdown()\r\n\r\nif __name__ == '__main__':\r\n    main()\r\n```\r\n\r\n## Details\r\n\r\nThe main difference to [Django's asgiref wsgi wrapper](https://github.com/django/asgiref/blob/main/asgiref/wsgi.py) is that it does not [read the entire request into a SpooledTemporaryFile](https://github.com/django/asgiref/blob/12f6355d50c271aab821a37dbf2cde5863cc2643/asgiref/wsgi.py#L38-L39), but instead wraps the async ASGI event `receive` callable and exposes it as a WSGI `InputStream` protocol conform class (the `HTTPRequestEventStreamAdapter`). This allows, in principle, streaming requests to the server.\r\n\r\nAlso, [in contrast to asgiref](https://github.com/django/asgiref/blob/12f6355d50c271aab821a37dbf2cde5863cc2643/asgiref/wsgi.py#L130-L131), our implementation allows direct passing of a `ThreadPoolExecutor` to the `ASGIAdapter`, making it much easier to multi-thread the server (otherwise blocking IO in a request would also block the server).",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 34,
        "deletions": 7,
        "changed_files": 2,
        "created_at": "2022-05-01T15:33:27Z",
        "closed_at": "2022-05-01T18:36:40Z",
        "merged_at": "2022-05-01T18:36:40Z",
        "body": "This PR changes the way `localstack.http.Request` builds the headers. It now restores the originally passed headers instead of those from werkzeug's `EnvironHeaders`, which does header encoding according to the WSGI spec. \r\n\r\nsee these issues for a discussion on the topic:\r\n* https://github.com/pallets/werkzeug/issues/940\r\n* https://github.com/localstack/localstack/issues/459",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 5,
        "deletions": 17,
        "changed_files": 1,
        "created_at": "2022-05-01T14:49:10Z",
        "closed_at": "2022-05-01T16:42:53Z",
        "merged_at": "2022-05-01T16:42:53Z",
        "body": "This PR moves the xml->json conversion from the `return_response` ProxyListener method into the generic `request` method. This removes the need to modify the `requests` library `Response` object, which could lead to faulty content-length headers in the new ASF gateway (which assumes headers are already correctly set).",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 39,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2022-04-30T18:50:32Z",
        "closed_at": "2022-04-30T20:52:38Z",
        "merged_at": "2022-04-30T20:52:38Z",
        "body": "This PR addresses #5936 where is shown that Localstack crashes when trying to store a record in a Firehose stream that is using ExtendedS3DestinationConfiguration.\r\n\r\nChanges:\r\n - Small change to avoid the crashing.\r\n - Test added.\r\n\r\nNote: The test added is exactly the same as the one for the standard S3 configuration, but it could be used in test the other advance parameters when Localstack supports them. \r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 3923,
        "deletions": 1136,
        "changed_files": 9,
        "created_at": "2022-04-30T13:11:50Z",
        "closed_at": "2022-04-30T22:49:47Z",
        "merged_at": "2022-04-30T22:49:47Z",
        "body": "This PR migrates our CloudFormation flask app to ASF. Simple migration, very few changes made.\r\n\r\n* replace with f-strings where possible\r\n* removed parameter parsing and response generation code (obsolete through ASF)\r\n\r\n@dominikschubert sorry for not consulting first. i was just playing around last night with some fixes to get cfn running in the ASF gateway and then just ended up migrating the whole thing since it wasn't that much work (around 3 hours)",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 58,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2022-04-30T04:08:28Z",
        "closed_at": "2022-05-20T18:00:40Z",
        "merged_at": "2022-05-20T18:00:40Z",
        "body": "This PR addresses issue #5943 where is shown that Localstack doesn't validate the name parameter when creating a new Connection for the Events service, which could lead to several problems. \r\n\r\nChanges:\r\n-  Validation for the Name parameter and the AuthorizationType.\r\n- Test addition.\r\n",
        "comments": 3
    },
    {
        "merged": false,
        "additions": 5,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2022-04-29T21:53:04Z",
        "closed_at": "2022-05-25T22:20:42Z",
        "merged_at": null,
        "body": "Load all policies from moto to avoid this kind of errors in policies/roles not listed in sam transalator.\r\n\r\nhttps://docs.aws.amazon.com/es_es/lambda/latest/dg/lambda-intro-execution-role.html#permissions-executionrole-features\r\n\r\n```\r\niam_backend.attach_role_policy(policy_arn, role_name)\r\nFile \"/opt/code/localstack/.venv/lib/python3.8/site-packages/moto/iam/models.py\", line 1534, in attach_role_policy\r\npolicy = arns[policy_arn]\r\nKeyError: 'AWSLambdaSQSQueueExecutionRole'\r\n```\r\n\r\n**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 6,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2022-04-29T17:49:25Z",
        "closed_at": "2022-04-30T20:57:16Z",
        "merged_at": "2022-04-30T20:57:16Z",
        "body": "This PR addresses issue #5888 where the user asks for a Warning log when creating a FIFO Queue without sending the correct attribute.   \r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2022-04-29T16:23:10Z",
        "closed_at": "2022-04-30T20:31:23Z",
        "merged_at": "2022-04-30T20:31:23Z",
        "body": "Ensure that `eventID` is contained in DynamoDB stream records - addresses #5957 , fixes a regression that was likely introduced in the DynamoDB ASF migration in #5796",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 64,
        "deletions": 33,
        "changed_files": 2,
        "created_at": "2022-04-29T16:10:19Z",
        "closed_at": "2022-05-26T20:47:34Z",
        "merged_at": "2022-05-26T20:47:34Z",
        "body": "This PR addresses issue #5878, where is shown that the Connection query parameters and header parameters have a higher priority than the Target query and header parameters.\r\n\r\nChanges:\r\n- Fixing of error.\r\n- Test extended and refactored.\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 18,
        "deletions": 6,
        "changed_files": 2,
        "created_at": "2022-04-29T12:22:55Z",
        "closed_at": "2022-04-29T14:18:13Z",
        "merged_at": "2022-04-29T14:18:13Z",
        "body": "This PR fixes two issues:\r\n\r\n* `get_raw_path` would return different results depending on whether it is a WSGI or an ASGI request. This would lead to inconsistent behavior and rules not matching when using the asgi->wsgi bridge here:\r\nhttps://github.com/localstack/localstack/blob/01cb58478ee3a2329b86b0d88fbb12695ce1c3a6/localstack/aws/protocol/op_router.py#L252-L253\r\n\r\n* the dummy WSGI environment now correctly adds the query string to the `RAW_URI` environment (which seems redundant since we're removing it in `get_raw_path` now, but this is to conform to the spec.\r\n\r\n## Validation of spec\r\n\r\nHere's what the relevant parts of the underlying environ/scope look like for \"GET /foo/b r?bar=ze 69\"\r\n\r\nwsgi environ (via werkzeug)\r\n```python\r\n{\r\n  'PATH_INFO': '/foo/b r'\r\n  'QUERY_STRING': 'bar=ze%2069'\r\n  'REQUEST_URI': '/foo/b%20r?bar=ze%2069'\r\n  'RAW_URI': '/foo/b%20r?bar=ze%2069'\r\n}\r\n```\r\n\r\nasgi scope (via hypercorn)\r\n```python\r\n{\r\n  'path': '/foo/b r',\r\n  'raw_path': b'/foo/b%20r',\r\n  'query_string': b'bar=ze%2069'\r\n}\r\n```",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 97,
        "deletions": 4,
        "changed_files": 4,
        "created_at": "2022-04-29T10:37:38Z",
        "closed_at": "2022-05-02T09:21:16Z",
        "merged_at": "2022-05-02T09:21:16Z",
        "body": "## Summary\r\nThis PR adds a `localstack update` command, which provides a convenient way to update LocalStack components.\r\n\r\n## Implemented commands\r\n`localstack update all`: Updates all components, in essence execute all the commands below\r\n`localstack update localstack-cli`: Update the LocalStack cli packages, in essence `localstack` and `localstack-ext`.\r\n`localstack update docker-images`: Update all LocalStack-used container images (main image, lambda images, bigdata)\r\n\r\n## Implementation specifics\r\nWe look at the images by prefix. So basically, all images currently available to the daemon will be listed, then filtered by prefix (currently `localstack/`, `lambci/lambda:`, `mlupin/docker-lambda:`), and afterwards we will try pulling each image, and checking if it has updated to be displayed on the UI side.\r\nThis means, no image will be pulled if it is not present already. The responsibility for the necessary images to be pulled in the first place, is on the side of LocalStack itself. Specifically, if localstack was never installed on the machine, or all images are deleted, the docker-images CLI part will do nothing.\r\n\r\n## Current UI state\r\nDuring run:\r\n![image](https://user-images.githubusercontent.com/16599060/165930651-cf5e15df-d885-4799-af05-19c47a37eb63.png)\r\nFinished:\r\n![image](https://user-images.githubusercontent.com/16599060/165930784-ddb695fc-f8ac-414a-985b-1c0f62d69f1d.png)\r\n\r\n## Discussion\r\nShort call for discussion: How should the commands be separated in the end? We can leave it like this, but it also would be nearly no work to split the docker-images part into one for bigdata images, one for the \"core\" localstack images, and one for lambda images, for example. Or maybe a completely different split?\r\nAre there any parts missing? Should we display a warning for updates, regarding persistence supports etc",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2022-04-29T07:47:22Z",
        "closed_at": "2022-04-29T09:18:38Z",
        "merged_at": "2022-04-29T09:18:38Z",
        "body": "A new bugfix release of Werkzeug has just been released: https://github.com/pallets/werkzeug/releases/tag/2.1.2\r\nIt fixes the issue with the Transfer-Encoding ([pallets/werkzeug#2375](https://github.com/pallets/werkzeug/issues/2375)) introduced with 2.1.0, which led us to set an upper version boundary to the Werkzeug dependency (#5773).\r\n\r\nThe new release contains a fix for the issue, which allows us to remove the upper version boundary.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2022-04-29T02:46:44Z",
        "closed_at": "2022-04-30T20:21:03Z",
        "merged_at": "2022-04-30T20:21:03Z",
        "body": "This PR addresses the changes suggested by @calvernaz in #5871.\r\n\r\nChanges:\r\n- Test extension.",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 23,
        "deletions": 6,
        "changed_files": 2,
        "created_at": "2022-04-28T23:46:59Z",
        "closed_at": "2022-04-29T14:16:24Z",
        "merged_at": "2022-04-29T14:16:24Z",
        "body": "This fixes an issue where invoking `awslocal s3 ls` would incorrectly create an s3 `ListObjects` command with the bucket name `localhost:4566` (instead of `ListBuckets`) and subsequently setting the `path` of the request object to `/localhost:4566`.\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2022-04-28T21:45:27Z",
        "closed_at": "2022-04-29T00:23:28Z",
        "merged_at": "2022-04-29T00:23:28Z",
        "body": "Minor fix: Return `text/html` Content-Type for local CloudFormation UI (http://localhost:4566/_localstack/cloudformation/deploy), to ensure it gets properly rendered by browsers.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 93,
        "deletions": 21,
        "changed_files": 3,
        "created_at": "2022-04-28T14:19:21Z",
        "closed_at": "2022-04-28T15:52:37Z",
        "merged_at": "2022-04-28T15:52:36Z",
        "body": "This PR fixes the `RestServiceOperationRouter` for operations which contain request URI path params with dashes (`-`).\r\nThe issue has been described in #5944.\r\nI cherry-picked the tests from #5945 (in order to have @thrau as a reviewer - which wouldn't be possible when continuing on the existing PR).\r\n\r\nThis fix introduces a temporary replacement of forbidden characters with a substitution, as well as the reverse operation after the matching has been done. This is necessary since - after a match has been found - the parser assumes the arg keys to be equal to the path params in the request URI of the specs.\r\n\r\nI did not introduce a state machine as suggested in https://github.com/localstack/localstack/issues/5944#issuecomment-1111450334, since the regex replacement function seems quite elegant. It nicely encapsulates the transformation of a single request URI path parameter to a Werkzeug rule variable. But I'm open to any suggestions / discussions / feedback (not only on that specific topic \ud83d\ude09).\r\n\r\nCloses #5945\r\nFixes #5944",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 46,
        "deletions": 5,
        "changed_files": 2,
        "created_at": "2022-04-27T20:31:47Z",
        "closed_at": "2022-04-28T15:52:37Z",
        "merged_at": null,
        "body": "This demonstrates the behavior of #5944. It also adds a test that identifies the affected services.\r\n\r\n@alexrashed feel free to close this one and pull the tests into your own PR :-)",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 766,
        "deletions": 35,
        "changed_files": 6,
        "created_at": "2022-04-27T08:34:19Z",
        "closed_at": "2022-05-04T22:19:25Z",
        "merged_at": "2022-05-04T22:19:25Z",
        "body": "This PR improves OpenAPI import by adding support for `responseParameters`, `responseModels`, `models` resources and other minor fixes.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 27,
        "deletions": 13,
        "changed_files": 6,
        "created_at": "2022-04-26T12:12:37Z",
        "closed_at": "2022-04-26T17:56:38Z",
        "merged_at": "2022-04-26T17:56:38Z",
        "body": "As seen here (https://pgjones.gitlab.io/hypercorn/how_to_guides/binds.html#multiple-binds), hypercorn supports multiple binds for a single server.\r\nOur current tooling, however, does not allow passing multiple bind_addresses.\r\nThis PR introduces the possibility to allow multiple addresses in start_proxy_server and in run_server, to be passed to hypercorn.\r\nTo minimize the impact, a single string will still be accepted in start_proxy_server (run_server does not seem to be called from anything but tests and this method), however we should move towards using lists to specify them.\r\n\r\nThis should help with different problems regarding ipv6 support in host mode (for starting in docker we need to modify the default values in docker-compose and localstack cli as well - separate PR).\r\nIt is necessary to provide support for binding to ipv4 and ipv6, since some systems begin to resolve \"localhost\" to \"[::1]\" already, which can lead to problems otherwise.",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 735,
        "deletions": 36,
        "changed_files": 6,
        "created_at": "2022-04-26T08:15:16Z",
        "closed_at": "2022-05-26T20:52:46Z",
        "merged_at": "2022-05-26T20:52:46Z",
        "body": "This PR adds basic support to export OpenAPI, swagger and oas3, features for REST APIs.\r\n\r\n/cc @whummer confirm dependency is declared correctly.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 30,
        "deletions": 30,
        "changed_files": 21,
        "created_at": "2022-04-25T20:20:42Z",
        "closed_at": "2022-04-26T05:28:21Z",
        "merged_at": "2022-04-26T05:28:21Z",
        "body": "Cleaning up a bit.\r\nThis PR removes explicit object inheritance. Not needed since we dropped Python 2 support quite a long time ago now.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 10,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2022-04-25T07:01:57Z",
        "closed_at": "2022-04-26T09:52:33Z",
        "merged_at": "2022-04-26T09:52:33Z",
        "body": "Minor patches to fix lambda responses when creating an image with PackageType Image",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 102,
        "deletions": 4,
        "changed_files": 4,
        "created_at": "2022-04-25T05:07:44Z",
        "closed_at": "2022-04-26T07:48:33Z",
        "merged_at": "2022-04-26T07:48:33Z",
        "body": "# \ud83d\ude80 ASF Update Report \ud83d\ude80\nThis PR has been automatically generated to update the generated API stubs for our ASF services.\nIt uses the latest code-generator from the _master_ branch ([scaffold.py](https://github.com/localstack/localstack/blob/master/localstack/aws/scaffold.py)) and the latest _published_ version of [botocore](https://github.com/boto/botocore) to re-generate all API stubs which are already present in the `localstack.aws.api` module of the _master_ branch.\n\n## \ud83d\udd04 Updated Services\nThis PR updates the following services:\n- ec2\n- kms\n- redshift\n- ssm\n\n## \ud83d\udc77\ud83c\udffd Handle this PR\nThe following options describe how to interact with this PR / the auto-update:\n\n\u2714\ufe0f **Accept Changes**\nIf the changes are satisfying, just squash-merge the PR and delete the source branch.\n\n\ud83d\udeab **Ignore Changes**\nIf you want to ignore the changes in this PR, just close the PR and *do not delete* the source branch. The PR will not be opened and a new PR will not be created for as long as the generated code does not change (or the branch is deleted). As soon as there are new changes, a new PR will be created.\n\n\u270f\ufe0f **Adapt Changes**\n*Don't do this.* The APIs are auto-generated. If you decide that the APIs should look different, you have to change the code-generation.\n\n\u23f8\ufe0f **Pause Updates**\nRemove the cron-schedule trigger of the GitHub Action workflow which creates these PRs. The action can then still be triggered manually, but it will not be executed automatically.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 686,
        "deletions": 61,
        "changed_files": 7,
        "created_at": "2022-04-24T23:48:27Z",
        "closed_at": "2022-05-16T17:40:02Z",
        "merged_at": "2022-05-16T17:40:01Z",
        "body": "# Summary\r\n\r\nThis PR adds the [SQS Query API](https://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/sqs-making-api-requests.html), which treats SQS Queue URLs as endpoints to make AWS SQS requests to. This is a prerequisite to make the `asf` SQS provider the default provider.\r\n\r\nThere are two correcting, but breaking changes related to making requests to the SQS Queue URLs. \r\n\r\n* `ListQueues` and `CreateQueue` are invalid actions to call on a queue url endpoint.\r\n* Making an empty request to the queue url endpoint does not return a valid response, it always returns `<UnknownOperationException/>` with a 404.\r\n\r\n# Changes\r\n\r\n* SQS endpoint strategy for generating queue URLs like \"http://us-east-2.queue.localhost.localstack.cloud/000000000000/my-queue\"\r\n* SQS Query API that uses the edge router\r\n* A test suite for the query API\r\n* Some utilities for being able to write those tests\r\n* Some minor parity fixes\r\n\r\n## Endpoint strategy (how SQS Queue URLs are formatted)\r\n\r\nA new feature that is necessary to make the query API work for multi-region is the `SQS_ENDPOINT_STRATEGY`, similar to what we do in [opensearch](https://docs.localstack.cloud/aws/opensearch/#endpoints).\r\nThe endpoint strategies and their corresponding queue URLs are:\r\n* `off`: `http://localhost:4566/000000000000/MyQueue` (currently the default, note how we cannot infer a region other than the default region. needed for backwards compatibility)\r\n* `path`: `http://localhost:4566/queue/eu-central-1/000000000000/MyQueue` (needed for when `localhost.localstack.cloud` does not resolve\r\n* `domain`: `http://us-east-2.queue.localhost.localstack.cloud:4566/000000000000/MyQueue` (the default, mimics [Amazon SQS legacy endpoints](https://docs.aws.amazon.com/general/latest/gr/sqs-service.html)\r\n\r\nThis would need documentation @HarshCasper \r\n\r\n## SQS Query API\r\n\r\nThe query API is an HTTP request handler that acts as a wrapper around the active SQS provider.\r\nIt works as follows:\r\n\r\n* Expose queue URLs as HTTP routes on the edge proxy\r\n* Translate those into AWS requests based on the Queue URL\r\n* Perform the request via boto\r\n\r\nTo that end we inject for each endpoint strategy a handler into the `edge.ROUTER` that takes precedence over the service routes.\r\n\r\n## Test suite for the query API\r\n\r\nI added a comprehensive test suite for the query API that is validated against AWS and demonstrates how some of the previous behavior was diverging from AWS (see summary).\r\n\r\nTo implement the test suite, I added utilities that make it easier to sign of AWS HTTP requests using botocore's `BaseSigner` abstraction. `SigningHttpClient` the `aws_http_client_factory` creates instances of these clients for a particular service using the credentials from a botocore session (this allows us to use it together with `TEST_TARGET = AWS_CLOUD`.\r\nPlease take a look at this @dominikschubert\r\n\r\n## Other changes\r\n\r\nAlong the way I fixed a few related issues\r\n\r\n* Parity for `InvalidAttributeName` messages\r\n* Parity for `QueueDoesNotExist` messages\r\n* Cleaned up `test_get_list_queues_with_auth_in_presigned_url` to use the query-style authparams that the new `SigningHttpClient` provides\r\n\r\n# Background\r\n\r\nCurrently, we _can_ perform AWS requests directly on the SQS URLs (although it does not behave like AWS). With the `ProxyListener` model, implementing this type of behavior is fairly straight forward:\r\n\r\n* First, we associate requests to the URL with the SQS service: https://github.com/localstack/localstack/blob/81f8f56fc88acdda93e8b47b574d189776cb571e/localstack/services/edge.py#L435-L437\r\n* Then we modify the HTTP request to look like an AWS request: https://github.com/localstack/localstack/blob/81f8f56fc88acdda93e8b47b574d189776cb571e/localstack/services/sqs/sqs_listener.py#L294-L299\r\n\r\n## Parity problems\r\n\r\nThere was behavior introduced in #2622 that translates an empty GET request to the queue URL into `GetQueueUrl` request, which is not how AWS behaves.\r\n\r\n### Empty GET request on queue URLs\r\n\r\n* AWS Response:\r\n  ```\r\n  % curl \"https://queue.amazonaws.com/878966065785/MyQueue\"                   \r\n  <UnknownOperationException/>\r\n  ```\r\n* Current LocalStack Response:\r\n  ```\r\n  % curl \"http://localhost:4566/000000000000/MyQueue\"\r\n  <GetQueueUrlResponse><GetQueueUrlResult><QueueUrl>http://localhost:4566/000000000000/MyQueue</QueueUrl></GetQueueUrlResult><ResponseMetadata><RequestId>S86VYS8ILUZE7BEIJL87E9S4R09YR52YUKHWJINFZTOPAY7AFEGB</RequestId></ResponseMetadata></GetQueueUrlResponse>\r\n  ```\r\n\r\n### Sending invalid requests\r\n\r\nTrying to send an (invalid) `SendMessage` request:\r\n```\r\n % curl \"http://localhost:4566/000000000000/MyQueue?Action=SendMessage\"                       \r\n<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 3.2 Final//EN\">\r\n<title>500 Internal Server Error</title>\r\n<h1>Internal Server Error</h1>\r\n<p>The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.</p>\r\n```\r\n\r\n### Using `application/json` accept type\r\n\r\nUsing JSON (should return a json dict, which should include the attributes)\r\n```\r\n % curl -H \"Accept: application/json\" \"http://localhost:4566/000000000000/MyQueue?Action=GetQueueAttributes&AttributeName.1=All\"\r\n<GetQueueAttributesResponse>...\r\n```\r\n\r\n# TODO\r\n\r\n- [x] basic implementation\r\n- [x] rebase after merging #5927\r\n- [x] write parity tests against AWS (involves creating [AUTHPARAMS](https://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/sqs-making-api-requests.html) for each request)\r\n- [x] improve current implementation to cover at least what we were able to do so far in the current provider\r\n- [x] decide on whether to fix parity (empty request => returns UnknownOperationException) and introduce a breaking localstack change\r\n- [x] ~consider implementing JSON serializing (nice to have)~",
        "comments": 6
    },
    {
        "merged": true,
        "additions": 171,
        "deletions": 7,
        "changed_files": 3,
        "created_at": "2022-04-24T21:54:22Z",
        "closed_at": "2022-04-25T13:42:52Z",
        "merged_at": "2022-04-25T13:42:52Z",
        "body": "This PR adds a decorator for the `Router` to add rules more easily and build cohesion between handlers and their routes. This can be used to simplify adding routes to the edge router, or other routers, which will appear more and more in service providers. Specifically, I'll use this to build the SQS Query API.\r\n\r\nHow to use it:\r\n\r\n## Bind functions directly to a Router\r\nThis is essentially like flask's `@app.route` decorator. It will add the endpoint directly to the `router` instance. The function signature needs to match the expected input of the dispatcher configured for the Router (in this case it needs to match the `Handler` protocol)\r\n\r\n```python\r\nrouter: Router[Handler] = Router(dispatcher=handler_dispatcher())\r\n\r\n@router.route(\"/user/<user_id>\")\r\ndef my_route(request, user_id):\r\n    return {}\r\n```\r\n\r\n## Define unbound routes and then bind them to a router\r\n\r\nThis is required when you want do add bound methods to a router. This is similar to flask's blueprints.\r\n\r\n```python\r\nclass MyService:\r\n    @route(\"/user/<user_id>\")\r\n    def my_route(request, user_id):\r\n        return {}\r\n\r\nmy_service = MyService()\r\n\r\nrouter = Router(dispatcher=handler_dispatcher())\r\nrouter.add_route_endpoint(my_service.my_route)\r\n```\r\n\r\n## Batch bind routes of a class to a router\r\n\r\n```python\r\nclass MyService:\r\n    @route(\"/user/<user_id>\")\r\n    def get_user(request, user_id):\r\n        return {}\r\n\r\n    @route(\"/user\")\r\n    def list_user(request):\r\n        return []\r\n\r\nrouter = Router(dispatcher=handler_dispatcher())\r\nrouter.add_route_endpoints(MyService())\r\n```",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 187,
        "deletions": 194,
        "changed_files": 3,
        "created_at": "2022-04-24T17:23:36Z",
        "closed_at": "2022-04-24T21:58:17Z",
        "merged_at": "2022-04-24T21:58:17Z",
        "body": "Move helper functions to the `helpers` module",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 31,
        "deletions": 9,
        "changed_files": 4,
        "created_at": "2022-04-23T16:15:35Z",
        "closed_at": "2022-04-25T10:17:54Z",
        "merged_at": "2022-04-25T10:17:54Z",
        "body": "When creating a werkzeug `Request` object from the WSGI environment, werkzeug does the \"WSGI decoding dance\" [here](https://github.com/pallets/werkzeug/blob/c7ae2fea4fb229ffd71187c2b665874c91b96277/src/werkzeug/wrappers/request.py#L109-L114):\r\n```python\r\n  root_path=_wsgi_decoding_dance(\r\n      environ.get(\"PATH_INFO\") or \"\", self.charset, self.encoding_errors\r\n  ),\r\n```\r\nwhere the `_wsgi_decoding_dance` method does this: `return s.encode(\"latin1\").decode('utf-8', errors)`\r\n\r\nmeaning werkzeug expects the WSGI environment to contain `latin-1` encoded path. so \r\n* `'/my-testbucket/\u0100_'` (quoted as `'/my-testbucket/%C4%80_'`) is expected to be `/my-testbucket/\u00c4\\x80_`  in `environ['PATH_INFO']` so the path can be restored as such from the request. previously we would pass the utf-8 encoded path directly into `PATH_INFO`. which would lead to encoding errors (#5921). now we encode the path according to the WSGI spec.\r\n\r\nFixes #5921",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 53,
        "deletions": 6,
        "changed_files": 2,
        "created_at": "2022-04-23T09:17:36Z",
        "closed_at": "2022-04-25T08:58:17Z",
        "merged_at": "2022-04-25T08:58:17Z",
        "body": "`TableClass` was not managed for the CRUD operations in DynamoDB. This PR should fix #5916 ",
        "comments": 5
    },
    {
        "merged": true,
        "additions": 6,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2022-04-22T15:12:31Z",
        "closed_at": "2022-04-25T08:23:37Z",
        "merged_at": "2022-04-25T08:23:37Z",
        "body": "Presently Localstack only records the body of `Text` emails, and does not support `Html` emails.\r\n\r\nIn the [AWS SES v2 API spec](https://docs.aws.amazon.com/ses/latest/APIReference-V2/API_SendEmail.html) HTML formatted emails are sent using this part of the message:\r\n```json\r\n{\r\n   \"Content\": { \r\n      \"Simple\": { \r\n         \"Body\": { \r\n            \"Html\": { \r\n               \"Charset\": \"string\",\r\n               \"Data\": \"string\"\r\n            },\r\n            \r\n            ... rest removed for brevity ....\r\n```\r\n\r\nThis PR stores anything send in the `Html` part of the body into the JSON files stored in `/ses` in a field called `HtmlBody`.\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 41,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2022-04-22T11:14:34Z",
        "closed_at": "2022-04-22T19:22:50Z",
        "merged_at": "2022-04-22T19:22:50Z",
        "body": "Once more, as discussed in https://github.com/localstack/localstack/pull/5909",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 29,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2022-04-22T11:11:32Z",
        "closed_at": "2022-04-22T15:04:55Z",
        "merged_at": "2022-04-22T15:04:54Z",
        "body": "As discussed in https://github.com/localstack/localstack/pull/5909",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 67,
        "deletions": 60,
        "changed_files": 3,
        "created_at": "2022-04-22T10:14:32Z",
        "closed_at": "2022-04-22T15:09:36Z",
        "merged_at": "2022-04-22T15:09:36Z",
        "body": "Minor fix to ensure that `/static/...` paths are properly served by the proxy. \r\n\r\nTurns out that the Quart HTTP server by default attempts to serve `/static` paths from the local filesystem (see `static_folder=\"static\"` in the [Quart initializer](https://github.com/pgjones/quart/blob/638a8e02493441f6c15cf19266d1ae80a2d984d1/src/quart/app.py#L215)). This was causing 404 errors whenever we were requesting `/static/...` paths through the edge proxy (and other proxy listeners). In this PR we explicitly set `static_folder=None` to disable this behavior.\r\n\r\nThe PR also contains some minor changes to reduce log verbosity (removing `print` statements) which surfaced during testing.\r\n\r\nPart of this may become obsolete with the new Gateway, still good to have it covered by a test for now. /cc @thrau ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 42,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2022-04-22T03:53:18Z",
        "closed_at": "2022-06-13T11:04:45Z",
        "merged_at": "2022-06-13T11:04:45Z",
        "body": "Add list_dead_letter_source_queues method for sqs. This is the last missing API method for sqs.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-04-21T20:51:22Z",
        "closed_at": "2022-04-22T08:59:17Z",
        "merged_at": "2022-04-22T08:59:17Z",
        "body": "Minor: Bump version of awscli for compabilibity with poetry - should fix https://github.com/localstack/localstack/issues/5520\r\n\r\nWas able to replicate locally. With the following `pyproject.toml` config:\r\n```\r\n[tool.poetry]\r\nname = \"test\"\r\nversion = \"0.1\"\r\ndescription = \"test\"\r\nauthors = []\r\n\r\n[tool.poetry.dependencies]\r\npython=\">=3.7,<4.0\"\r\n```\r\n... the following command installs the runtime dependencies successfully:\r\n```\r\npoetry add \"localstack[runtime]\"\r\n```",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 27,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2022-04-21T15:30:26Z",
        "closed_at": "2022-04-21T17:06:30Z",
        "merged_at": "2022-04-21T17:06:30Z",
        "body": "Should resolve #5908",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 19,
        "deletions": 9,
        "changed_files": 4,
        "created_at": "2022-04-21T12:34:51Z",
        "closed_at": "2022-04-21T16:50:06Z",
        "merged_at": "2022-04-21T16:50:05Z",
        "body": "fixes #5906 \r\n\r\nCurrently, backdoor API to restart the process provided on `/health` endpoint does not work.\r\nThis patch fixes some errors to work correctly.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2022-04-21T10:33:46Z",
        "closed_at": "2022-04-22T15:04:23Z",
        "merged_at": "2022-04-22T15:04:22Z",
        "body": "fixes https://github.com/localstack/localstack/issues/5901\r\n\r\n`/health` endpoint handler retrieve request data for PUT request from `request.data`.\r\nhttps://github.com/localstack/localstack/blob/v0.14.2/localstack/services/internal.py#L63\r\n\r\nTo using `request.data`, the user must specify a content type correctly but the curl command that is executed in `docker-entrypoint.sh` to store feature states does not specify content type header so that `request.data` always becomes empty.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 49,
        "deletions": 28,
        "changed_files": 3,
        "created_at": "2022-04-21T10:20:32Z",
        "closed_at": "2022-04-21T16:48:52Z",
        "merged_at": "2022-04-21T16:48:52Z",
        "body": "This adds the commits that sprung from the reviews of #5876 that didn't make it into the PR because I force pushed from my old history on my laptop :clown_face: ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2022-04-20T19:11:53Z",
        "closed_at": "2022-04-21T11:08:17Z",
        "merged_at": "2022-04-21T11:08:17Z",
        "body": "Bump moto-ext to 3.1.6.1",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 24,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2022-04-20T17:28:22Z",
        "closed_at": "2022-04-20T19:32:48Z",
        "merged_at": "2022-04-20T19:32:48Z",
        "body": "Adds a test to verify issue #5736. It tests the PartiQL integration for the MISSING function in DynamoDB.\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 32,
        "deletions": 5,
        "changed_files": 2,
        "created_at": "2022-04-20T17:23:36Z",
        "closed_at": "2022-04-20T18:49:21Z",
        "merged_at": "2022-04-20T18:49:21Z",
        "body": "Minor refactoring in utils to create S3 buckets with location constraints. Buckets now need to be created with the correct region / location constraint (for parity with AWS). \r\n\r\nWe can use the `create_s3_bucket(..)` util function to simplify this task and streamline creation of buckets across the codebase. Intended to be used in places where we need to create temporary buckets for other services, e.g., in the case of CloudFormation, to avoid these exceptions:\r\n\r\n```\r\nlocalstack_main |     s3_client.create_bucket(Bucket=CUSTOM_RESOURCES_RESULTS_BUCKET)                                                                                                                                                                          \r\nlocalstack_main |   File \"/opt/code/localstack/.venv/lib/python3.8/site-packages/botocore/client.py\", line 415, in _api_call                                                                                                                                  \r\nlocalstack_main |     return self._make_api_call(operation_name, kwargs)                                                                                                                                                                                      \r\nlocalstack_main |   File \"/opt/code/localstack/.venv/lib/python3.8/site-packages/botocore/client.py\", line 745, in _make_api_call                                                                                                                              \r\nlocalstack_main |     raise error_class(parsed_response, operation_name)\r\nlocalstack_main | botocore.exceptions.ClientError: An error occurred (IllegalLocationConstraintException) when calling the CreateBucket operation: The unspecified location constraint is incompatible for the region specific endpoint this request was sent t\r\n```",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 748,
        "deletions": 10,
        "changed_files": 6,
        "created_at": "2022-04-20T16:59:55Z",
        "closed_at": "2022-04-27T15:18:13Z",
        "merged_at": "2022-04-27T15:18:13Z",
        "body": "This PR refers to https://github.com/localstack/localstack/issues/5446 and implements basic cloudwatch metric-alarm evaluation:\r\n\r\nsupports metric-alarm with the following characteristics:\r\n- \"Statistic\": Maximum, SampleCount, Sum, Minimum, Average\r\n- \"ComparisonOperator\": GreaterThanOrEqualToThreshold, GreaterThanThreshold, LessThanThreshold, LessThanOrEqualToThreshold\r\n- \"[Alarm|OK|InsufficentData]Actions\": SNS Topic\r\n\r\nNote: in order to correctly filter for Dimensions, [this PR in Moto](https://github.com/spulec/moto/pull/5041) is required.",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 92,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2022-04-20T00:50:37Z",
        "closed_at": "2022-04-21T12:47:57Z",
        "merged_at": "2022-04-21T12:47:57Z",
        "body": "On Lambda proxy integration enabled environment, if there are no GET parameters in a request path, `queryStringParameters` should be `None` instead of `{}`.",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 18,
        "deletions": 4,
        "changed_files": 2,
        "created_at": "2022-04-19T16:53:47Z",
        "closed_at": "2022-04-20T11:42:33Z",
        "merged_at": "2022-04-20T11:42:32Z",
        "body": "* fixes #5890 ",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-04-18T18:23:05Z",
        "closed_at": "2022-04-18T23:05:14Z",
        "merged_at": null,
        "body": "https://github.com/etspaceman/kinesis-mock/releases/tag/0.2.4\r\n\r\nhttps://github.com/etspaceman/kinesis-mock/releases/tag/0.2.3\r\n\r\nPrimary updates between 0.2.2 and 0.2.4 are the following changes:\r\n\r\nhttps://github.com/etspaceman/kinesis-mock/pull/287\r\nhttps://github.com/etspaceman/kinesis-mock/pull/307",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 133,
        "deletions": 38,
        "changed_files": 6,
        "created_at": "2022-04-18T17:41:26Z",
        "closed_at": "2022-04-19T17:03:00Z",
        "merged_at": "2022-04-19T17:03:00Z",
        "body": "This PR changes the `localstack wait` and `localstack logs` command to use the docker logs stream instead of the logfile created by `localstack start`. This allows `wait` and `logs` to be used when localstack was started with docker or docker-compose manually. it also allows invocations like `MAIN_CONTAINER_NAME=my_localstack_container localstack wait` which were previously not possible.\r\n\r\nTo that end, we needed a way to stream docker logs (`docker logs --follow`). The `CancellableStream` is inspired by what the docker SDK client returns.\r\n\r\nExample code: listen and print the log stream for 5 seconds then close the stream. This would look pretty much the same with the docker python SDK, just had to make it work for the `CmdDockerClient` (wrapping `Popen`)\r\n\r\n```python\r\ndocker = SdkDockerClient()\r\nstream = docker.stream_container_logs(\"localstack_main\")\r\n\r\nthreading.Timer(5, stream.close).start()\r\n\r\nfor line in stream: # blocks until stream.close is called, or EOF is reached\r\n    print(\">\", line)\r\n\r\nprint(\"bye!\")\r\n```\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-04-18T16:59:45Z",
        "closed_at": "2022-04-18T23:03:34Z",
        "merged_at": "2022-04-18T23:03:34Z",
        "body": "Upgrade kinesis-mock to [0.2.4](https://github.com/etspaceman/kinesis-mock/releases/tag/0.2.4) to fix tag validation excluding characters\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 64,
        "deletions": 22,
        "changed_files": 2,
        "created_at": "2022-04-18T13:29:45Z",
        "closed_at": "2022-04-19T13:42:36Z",
        "merged_at": "2022-04-19T13:42:36Z",
        "body": "Apply DynamoDB patch to enable more than 20 Global Secondary Indexes (GSIs) on table creation - addresses #5672 . The patched class is maintained in the [localstack-artifacts repo](https://github.com/localstack/localstack-artifacts/tree/master/dynamodb-local-patch/com/amazonaws/services/dynamodbv2/local/shared/access/api/cp).",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 5,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2022-04-18T12:34:54Z",
        "closed_at": "2022-04-19T15:03:02Z",
        "merged_at": "2022-04-19T15:03:02Z",
        "body": "Upgrade moto-ext to version 3.1.6",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 86,
        "deletions": 2276,
        "changed_files": 3,
        "created_at": "2022-04-18T05:04:11Z",
        "closed_at": "2022-04-18T13:14:11Z",
        "merged_at": "2022-04-18T13:14:10Z",
        "body": "# \ud83d\ude80 ASF Update Report \ud83d\ude80\nThis PR has been automatically generated to update the generated API stubs for our ASF services.\nIt uses the latest code-generator from the _master_ branch ([scaffold.py](https://github.com/localstack/localstack/blob/master/localstack/aws/scaffold.py)) and the latest _published_ version of [botocore](https://github.com/boto/botocore) to re-generate all API stubs which are already present in the `localstack.aws.api` module of the _master_ branch.\n\n## \ud83d\udd04 Updated Services\nThis PR updates the following services:\n- cloudwatch\n- ec2\n- ses\n\n## \ud83d\udc77\ud83c\udffd Handle this PR\nThe following options describe how to interact with this PR / the auto-update:\n\n\u2714\ufe0f **Accept Changes**\nIf the changes are satisfying, just squash-merge the PR and delete the source branch.\n\n\ud83d\udeab **Ignore Changes**\nIf you want to ignore the changes in this PR, just close the PR and *do not delete* the source branch. The PR will not be opened and a new PR will not be created for as long as the generated code does not change (or the branch is deleted). As soon as there are new changes, a new PR will be created.\n\n\u270f\ufe0f **Adapt Changes**\n*Don't do this.* The APIs are auto-generated. If you decide that the APIs should look different, you have to change the code-generation.\n\n\u23f8\ufe0f **Pause Updates**\nRemove the cron-schedule trigger of the GitHub Action workflow which creates these PRs. The action can then still be triggered manually, but it will not be executed automatically.",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2022-04-18T01:28:15Z",
        "closed_at": "2022-04-18T13:54:54Z",
        "merged_at": "2022-04-18T13:54:54Z",
        "body": "[![WhiteSource Renovate](https://app.renovatebot.com/images/banner.svg)](https://renovatebot.com)\n\nThis PR contains the following updates:\n\n| Package | Type | Update | Change |\n|---|---|---|---|\n| python | stage | digest | `be6b811` -> `36a1e0b` |\n\n---\n\n### Configuration\n\n\ud83d\udcc5 **Schedule**: \"before 3am on Monday\" (UTC).\n\n\ud83d\udea6 **Automerge**: Disabled by config. Please merge this manually once you are satisfied.\n\n\u267b **Rebasing**: Whenever PR becomes conflicted, or you tick the rebase/retry checkbox.\n\n\ud83d\udd15 **Ignore**: Close this PR and you won't be reminded about this update again.\n\n---\n\n - [ ] <!-- rebase-check -->If you want to rebase/retry this PR, click this checkbox.\n\n---\n\nThis PR has been generated by [WhiteSource Renovate](https://renovate.whitesourcesoftware.com). View repository job log [here](https://app.renovatebot.com/dashboard#github/localstack/localstack).",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 419,
        "deletions": 380,
        "changed_files": 5,
        "created_at": "2022-04-17T12:53:04Z",
        "closed_at": "2022-04-19T22:08:07Z",
        "merged_at": "2022-04-19T22:08:07Z",
        "body": "* support nested EventBridge patterns - addresses https://github.com/localstack/localstack/issues/5701\r\n* start refactoring the integration tests, to reduce duplication - note: there is still an opportunity to do more unification, currently there are very similar tests duplicated for the different target types (SQS, SNS, Kinesis, EventBridge, ..)\r\n* improve parity with AWS - two of the integration tests have already been executed and verified with `TEST_TARGET=AWS_CLOUD` - marked with `@pytest.mark.aws_validated`\r\n* migrate tests to `pytest`\r\n* Note: the change in the `events_starter.py`, in particular in `filter_event_based_on_event_format(..)` will affect the ASF migration in https://github.com/localstack/localstack/pull/5844 (will need to be migrated to that PR once merged). /cc @MEPalma ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 34,
        "deletions": 6,
        "changed_files": 3,
        "created_at": "2022-04-16T18:13:49Z",
        "closed_at": "2022-04-17T18:33:39Z",
        "merged_at": "2022-04-17T18:33:39Z",
        "body": "As reported in #4982, when a table is created with `PAY_PER_REQUEST` billing mode and a provisioned throughput is specified as well, we should return a `ValidationException`. \r\n\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 191,
        "deletions": 104,
        "changed_files": 4,
        "created_at": "2022-04-16T16:32:31Z",
        "closed_at": "2022-04-20T11:43:31Z",
        "merged_at": "2022-04-20T11:43:31Z",
        "body": "This PR reworks our HTTP Request object to better re-use werkzeug's Request object. Instead of replicating the methods and mocking out IO, we now create a fake `WSGIEnvironment`, which is what underlies a werkzeug Request. This way we can re-use all of werkzeug's request parsing methods (e.g., parsing form data).\r\nWhat needs to be in the `WSGIEnvironment` dictionary was determined partly from [the wsgi docs](https://wsgi.readthedocs.io/en/latest/definitions.html#standard-environ-keys), partly from the [werkzeug code](https://github.com/pallets/werkzeug/blob/main/src/werkzeug/wrappers/request.py), and partly from inspecting a flask request.\r\n\r\n* Supersedes #5875",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 14,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-04-16T08:40:13Z",
        "closed_at": "2022-04-19T07:22:44Z",
        "merged_at": null,
        "body": "Moto ELB [uses](https://github.com/spulec/moto/blob/master/moto/elb/urls.py#L18) the `values` property to determine the ELB API version.\r\n\r\nThis PR implements it and allows the use of ASF requests to be forwarded to Moto ELB",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 53,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2022-04-15T22:40:15Z",
        "closed_at": "2022-04-16T11:31:39Z",
        "merged_at": "2022-04-16T11:31:39Z",
        "body": "This PR addresses issue #5846. Where it is stated that SNS should send a confirmation message when unsubscribing an HTTP subscription. \r\n\r\nChanges:\r\n- The sns sends the confirmation if detects that the un-subscription is HTTP/HTTPS\r\n- Test extension to validate messge.\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 12,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2022-04-15T21:40:38Z",
        "closed_at": "2022-04-17T15:49:05Z",
        "merged_at": "2022-04-17T15:49:05Z",
        "body": "This resolves bug https://github.com/localstack/localstack/issues/5872\r\n\r\nThe issue was caused by localstack patching the constructor of motos FakeSecret class, but not passing along the positional arguments. The call to delete_secret then fails here:\r\nhttps://github.com/spulec/moto/blob/master/moto/secretsmanager/models.py#L701\r\n(See the stack-trace posted on the bug ticket for details)",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 80,
        "deletions": 5,
        "changed_files": 4,
        "created_at": "2022-04-15T20:10:44Z",
        "closed_at": "2022-04-26T12:37:11Z",
        "merged_at": "2022-04-26T12:37:11Z",
        "body": "This PR addresses #5852. \r\n\r\nChanges: \r\n- ApiGW now accepts yaml files for api definitions.\r\n- Test extension to validate change.",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 1055,
        "deletions": 52,
        "changed_files": 5,
        "created_at": "2022-04-15T15:08:24Z",
        "closed_at": "2022-04-19T15:10:13Z",
        "merged_at": "2022-04-19T15:10:13Z",
        "body": "Migrate StepFunctions to ASF. Simple lift-and-shift migration in this initial step, essentially following the same patterns as with the DynamoDB ASF provider.\r\n\r\nOne remaining TODO is to introduce a `Server` abstraction for the StepFunctions process, and make the server part of the provider itself. (we can tackle this in a future PR)",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 8,
        "deletions": 5,
        "changed_files": 1,
        "created_at": "2022-04-14T14:39:17Z",
        "closed_at": "2022-04-14T16:04:16Z",
        "merged_at": "2022-04-14T16:04:16Z",
        "body": "This very small PR just adds type hints to the `PaginatedList`.\r\nThe previous implementation lost the type of the list elements and did not specify the filter and token generator lambda signature.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 36,
        "deletions": 8,
        "changed_files": 2,
        "created_at": "2022-04-14T03:42:46Z",
        "closed_at": "2022-04-15T12:08:16Z",
        "merged_at": "2022-04-15T12:08:16Z",
        "body": "This PR addresses #5729. Where the user reports an error on the extraction of the oauth credentials parameters for an API destination.\r\n\r\nChanges:\r\n- Fixing of the OauthHttpParameters values.\r\n- Test extension to validate changes.\r\n\r\nNote: The test extension change probably overlaps with the test correction of #5738 so one of the PR should be rebased after the other one is merged.",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 1702,
        "deletions": 806,
        "changed_files": 13,
        "created_at": "2022-04-13T17:11:16Z",
        "closed_at": "2023-07-04T23:41:15Z",
        "merged_at": null,
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 384,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2022-04-13T15:33:42Z",
        "closed_at": "2022-04-20T17:33:20Z",
        "merged_at": "2022-04-20T17:33:20Z",
        "body": "This PR adds a scheduler utility that can be used to schedule tasks in an event-loop based manner, potentially without threads, which can be helpful to implement things like alarm evaluations in cloudwatch.",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2022-04-13T13:30:49Z",
        "closed_at": "2022-04-13T14:37:14Z",
        "merged_at": "2022-04-13T14:37:14Z",
        "body": "## PR reason\r\nCurrently, using curl with cipher `AEAD-CHACHA20-POLY1305-SHA256` (only available in LibreSSL versions on Mac at this time) to connect to an endpoint on LocalStack, like this:\r\n```\r\ncurl --ciphers AEAD-CHACHA20-POLY1305-SHA256 https://localhost.localstack.cloud:4566/health\r\n```\r\nwill cause LocalStack to segfault and restart.\r\nThis seems to be fixed in the latest python docker image.\r\n\r\n## Fix\r\nUpdate to python 3.8.13. You can see, in the changelogs (https://www.python.org/downloads/release/python-3813/) that openssl is updated (only mention for installers, but it seems to be the case in the docker images as well).\r\nOutput of `openssl version` in the 3.8.13 container:\r\n```\r\nOpenSSL 1.1.1n  15 Mar 2022\r\n```\r\nvs 3.8.12:\r\n```\r\nOpenSSL 1.1.1n  15 Mar 2022 (Library: OpenSSL 1.1.1d  10 Sep 2019)\r\n```\r\nThis update (while done for security reasons) seems to also have fixed the segfault when using the cipher.\r\n\r\nUnlike #5632 , this should not have any ill effects regarding the circleCI pipeline, so should be a quick fix for #5749 .",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 67,
        "deletions": 13,
        "changed_files": 3,
        "created_at": "2022-04-12T16:26:52Z",
        "closed_at": "2022-04-19T19:28:42Z",
        "merged_at": "2022-04-19T19:28:41Z",
        "body": "Fixes for get_handler_file_from_name, fixing incorrectly returning '.js' from '.build/handler.execute' (Typescript).\r\n\r\nRevisiting #1774 / #1775\r\nAlso appears related to both #5485 and #3969 with '.webpack/service/first.hello'\r\nThis appears to have either regressed or not been fixed, due to `handler_name.split(delimiter)[0]` will return '.js' from '.build/handler.execute' instead of '.build/handler.js'\r\n\r\nHave added in a few tests to with my assumptions on how it's currently working.\r\nPlease do let me know if any of these assumptions are incorrect, or anything else for that matter and I'll update the PR.\r\n\r\nThanks,\r\nMatt",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 28,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2022-04-12T16:22:39Z",
        "closed_at": "2022-04-12T18:29:22Z",
        "merged_at": "2022-04-12T18:29:22Z",
        "body": "The error was probably due to different access keys used across different requests.\r\nShould fix #5843 ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 60,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2022-04-12T10:33:07Z",
        "closed_at": "2022-04-13T07:34:07Z",
        "merged_at": "2022-04-13T07:34:07Z",
        "body": "This is a fix for https://github.com/localstack/localstack/issues/5831:\r\n\r\nRecently, we added a fix for Global Secondary Index usage https://github.com/localstack/localstack/pull/5799, which would raise an Exception if the index is not found in the `GlobalSecondaryIndexes`.\r\n\r\nHowever, the index might be in `LocalSecondaryIndexes`. For this we should not require an additional check for the projection type, as [it states in the docs](https://docs.aws.amazon.com/amazondynamodb/latest/APIReference/API_Query.html#API_Query_RequestSyntax):\r\n\r\n> If you query or scan a local secondary index and request only attributes that are projected into that index, the operation will read only the index and not the table. If any of the requested attributes are not projected into the local secondary index, DynamoDB fetches each of these attributes from the parent table. This extra fetching incurs additional throughput cost and latency.\r\n\r\nWhich is different from the global index:\r\n> If you query or scan a global secondary index, you can only request attributes that are projected into the index. Global secondary index queries cannot fetch attributes from the parent table.\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2271,
        "deletions": 390,
        "changed_files": 6,
        "created_at": "2022-04-11T18:26:57Z",
        "closed_at": "2022-05-06T14:47:03Z",
        "merged_at": "2022-05-06T14:47:03Z",
        "body": "~Integration tests: https://github.com/localstack/localstack/actions/runs/2245667960~\r\nIntegration tests: https://github.com/localstack/localstack/actions/runs/2281252904",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2022-04-11T15:50:52Z",
        "closed_at": "2022-04-11T17:14:14Z",
        "merged_at": "2022-04-11T17:14:14Z",
        "body": "Should resolve #5784 ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 40,
        "deletions": 0,
        "changed_files": 3,
        "created_at": "2022-04-11T09:09:16Z",
        "closed_at": "2022-04-11T10:37:42Z",
        "merged_at": "2022-04-11T10:37:42Z",
        "body": "Adds support for bucket versioning to the AWS::S3::Bucket CloudFormation model.\r\n\r\ne.g.\r\n\r\n```yaml\r\nResources:\r\n  Bucket83908E77:\r\n    Type: AWS::S3::Bucket\r\n    Properties:\r\n      VersioningConfiguration:\r\n        Status: Enabled\r\n```",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 112,
        "deletions": 57,
        "changed_files": 2,
        "created_at": "2022-04-11T07:30:05Z",
        "closed_at": "2022-04-11T10:31:13Z",
        "merged_at": "2022-04-11T10:31:13Z",
        "body": "With the introduction of the `RestServiceOperationRouter` in ASF (https://github.com/localstack/localstack/pull/5827), we introduced a small regression.\r\nThe operation detection did not work correctly anymore for mandatory query parameters - defined in the requestUri of the operation specification - without a value.\r\n\r\nFor example, the operation detection did not work for CloudFront's `CreateDistributionWithTags` (where it mistakenly detects `CreateDistribution`):\r\n- CreateDistributionWithTags: `/2020-05-31/distribution?WithTags`\r\n- CreateDistribution: `/2014-05-31/distribution`\r\n\r\nThis PR contains a fix which ensures that an empty query arg in the requestUri is still considered for the operation detection.",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 11,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2022-04-11T07:23:47Z",
        "closed_at": "2022-04-14T16:25:09Z",
        "merged_at": "2022-04-14T16:25:08Z",
        "body": "This PR improves the API detection for host-based URLs and consequently makes CORS behaviour consistent. \r\n\r\nFixes https://github.com/localstack/localstack/issues/5835",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2022-04-11T05:03:28Z",
        "closed_at": "2022-04-12T20:13:23Z",
        "merged_at": "2022-04-12T20:13:23Z",
        "body": "# \ud83d\ude80 ASF Update Report \ud83d\ude80\nThis PR has been automatically generated to update the generated API stubs for our ASF services.\nIt uses the latest code-generator from the _master_ branch ([scaffold.py](https://github.com/localstack/localstack/blob/master/localstack/aws/scaffold.py)) and the latest _published_ version of [botocore](https://github.com/boto/botocore) to re-generate all API stubs which are already present in the `localstack.aws.api` module of the _master_ branch.\n\n## \ud83d\udd04 Updated Services\nThis PR updates the following services:\n- config\n\n## \ud83d\udc77\ud83c\udffd Handle this PR\nThe following options describe how to interact with this PR / the auto-update:\n\n\u2714\ufe0f **Accept Changes**\nIf the changes are satisfying, just squash-merge the PR and delete the source branch.\n\n\ud83d\udeab **Ignore Changes**\nIf you want to ignore the changes in this PR, just close the PR and *do not delete* the source branch. The PR will not be opened and a new PR will not be created for as long as the generated code does not change (or the branch is deleted). As soon as there are new changes, a new PR will be created.\n\n\u270f\ufe0f **Adapt Changes**\n*Don't do this.* The APIs are auto-generated. If you decide that the APIs should look different, you have to change the code-generation.\n\n\u23f8\ufe0f **Pause Updates**\nRemove the cron-schedule trigger of the GitHub Action workflow which creates these PRs. The action can then still be triggered manually, but it will not be executed automatically.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 11,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2022-04-10T18:18:55Z",
        "closed_at": "2022-04-11T12:42:04Z",
        "merged_at": "2022-04-11T12:42:04Z",
        "body": "This PR adds the authorizer object to the lambda event and encapsulates a new property into the invocation context to represent the authorization type (lambda, iam, jwt)\r\n\r\nFixes #5130 \r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 20,
        "deletions": 20,
        "changed_files": 3,
        "created_at": "2022-04-10T13:07:57Z",
        "closed_at": "2022-04-11T18:37:35Z",
        "merged_at": "2022-04-11T18:37:35Z",
        "body": "Minor fix: add !Ref support for `KMS::Alias` CloudFormation resources",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-04-09T13:42:59Z",
        "closed_at": "2022-04-10T12:20:07Z",
        "merged_at": "2022-04-10T12:20:07Z",
        "body": "Fixed an issue with running localstack on Windows when the primary user name has a space in it.\r\n\r\nI ran into this issue myself, and decided to fix it.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 393,
        "deletions": 274,
        "changed_files": 7,
        "created_at": "2022-04-07T12:04:32Z",
        "closed_at": "2022-04-07T14:28:12Z",
        "merged_at": "2022-04-07T14:28:12Z",
        "body": "This PR addresses an issue which arose in https://github.com/localstack/localstack/pull/5731, where dynamically created API Gateway resources were (falsely) matching a service operation:\r\nRequests against `/restapis/cmqinv79uh/local/_user_request_/` were wrongly matched as requests for the the API Gateway operation `GetRestApi`.\r\n\r\nIt fixes the issue by heavily refactoring / extracting the detection of the ASF service operations for REST protocols.\r\n- The new `RestServiceOperationRouter` heavily uses the request matching logic of [Werkzeug](https://github.com/pallets/werkzeug).\r\n- It clearly separates the path, method, query, and header matching and now strictly enforces path boundaries (i.e. requests to subpaths are not falsely matched anymore).\r\n- It changed the handling of greedy parameters which builds on the assumption that:\r\n  - A greedy path parameter is explicitly marked as such in the specification by using the `+` notation ([as described here in the Smithy HTTP binding specs](https://awslabs.github.io/smithy/1.0/spec/core/http-traits.html#greedy-labels)). These parameters can contain slashes in the value.\r\n    - f.e. `/foo/bar/baz.txt` matches `/{Bucket}/{Key+}` where `Bucket=foo` and `Key=bar/baz.txt`.\r\n  - A path parameter which is _not_ marked as greedy and contains slashes is properly url encoded.\r\n    - f.e. `/tags/arn%3Aaws%3Aqldb%3Aeu-central-1%3A000000000000%3Aledger%2Fc-c67c827a` matches `/tags/{resourceArn}`.\r\n    - This is how `botocore` also encodes the path parameter when sending the requests: [botocore/serialize.py#L469-L484](https://github.com/boto/botocore/blob/3c4bd9bb7c12869be49847adeb949babd1fa5a86/botocore/serialize.py#L469-L484)\r\n\r\nProps go to @thrau for the initial implementation of this new operation router! \ud83e\udd47 ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 32,
        "deletions": 22,
        "changed_files": 2,
        "created_at": "2022-04-07T09:15:00Z",
        "closed_at": "2022-04-07T11:55:23Z",
        "merged_at": "2022-04-07T11:55:23Z",
        "body": "This PR fixes two flaky tests:\r\n* `test_rotate_secret_with_lambda_2` sporadically failed on a feature branch with message `Error executing Lambda function {\"errorType\": \"NoRegionError\", \"errorMessage\": \"You must specify a region.\"`\r\n\r\n* `test_dynamodb_stream_records_with_update_item`flaky on several branches: added a retry, as it seems like the second record might not be ready\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 3554,
        "deletions": 157,
        "changed_files": 17,
        "created_at": "2022-04-07T08:58:21Z",
        "closed_at": "2022-05-05T13:27:55Z",
        "merged_at": "2022-05-05T13:27:55Z",
        "body": "Introduces first version and application (for lambda integration tests) of the snapshot test utility. \r\n\r\n# Usage \r\n\r\nThis initial version has a very simple API:\r\n\r\n```python\r\ndef test_something(snapshot):\r\n    obj_to_test = {\"msg\": \"hello\", \"id\": f\"1234567asdf-short_uid()}\"}\r\n    snapshot.skip_key(re.compile(\"id\")) # this API is not very stable right now but will have a compatible upgrade path in the future for the more generalized version\r\n    snapshot.match(\"some unique id for the match\", obj_to_test)\r\n```\r\n\r\nThe current procedure is as follows:\r\n\r\n1. Execute the test with the pytest flag `--snapshot-update`\r\n2. Execute the test again with the pytest flag `--snapshot-verify`\r\n\r\nFor a test against AWS the extended variant is something like:\r\n1. `TEST_TARGET=AWS_CLOUD` +  `--snapshot-update`\r\n2. `TEST_TARGET=AWS_CLOUD` +  `--snapshot-verify`\r\n3. iterate between 1. and 2. until 2. is green\r\n4.  `--snapshot-verify` (i.e. against LocalStack) ... At this point you can start using the test as a spec to do TDD against.\r\n\r\nIt's intentionally this explicit atm since the verification is still purely optional (i.e. verify is false by default).\r\n\r\n# Background\r\n\r\nPytest hooks are used to initialize the snapshot fixture and perform an aggregated diff/assertion after the call. This is currently a bit hacky and will soon make better/cleaner use of appropriate pytest lifecycle hooks.\r\n\r\n\r\nSome notes:\r\n* This PR doesn't yet include the changes to `test_lambda_integration.py` due to major merge conflicts. It will be added later in a separate PR.\r\n* The actual implementation (pytest hooks/plugin, registration of transformators/comparators) will still heavily evolve but the core concept for the usage in a pytest test is expected to be stable.\r\n",
        "comments": 4
    },
    {
        "merged": false,
        "additions": 8,
        "deletions": 3,
        "changed_files": 2,
        "created_at": "2022-04-06T21:12:23Z",
        "closed_at": "2022-04-20T20:19:18Z",
        "merged_at": null,
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-04-06T19:45:27Z",
        "closed_at": "2022-04-13T10:16:18Z",
        "merged_at": "2022-04-13T10:16:18Z",
        "body": "Pretty self-explanatory, see bug #5821",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 582,
        "deletions": 224,
        "changed_files": 12,
        "created_at": "2022-04-06T12:48:10Z",
        "closed_at": "2022-04-06T16:35:25Z",
        "merged_at": "2022-04-06T16:35:25Z",
        "body": "Tests against Lambda should be able to run against AWS too, to prevent many false assertions.\r\nThis refactoring will do that, by fixing wrong assertions and adding permissions as well as retries.\r\n\r\nThis is a preparation work for better and more complete lambda tests.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 4132,
        "deletions": 589,
        "changed_files": 8,
        "created_at": "2022-04-06T10:38:05Z",
        "closed_at": "2022-05-06T14:46:36Z",
        "merged_at": "2022-05-06T14:46:35Z",
        "body": "In tandem integration test https://github.com/localstack/localstack/actions/runs/2281395295",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 115,
        "deletions": 2,
        "changed_files": 9,
        "created_at": "2022-04-05T23:12:57Z",
        "closed_at": "2022-04-11T12:28:53Z",
        "merged_at": "2022-04-11T12:28:53Z",
        "body": "Aws Lambda supports dotnet 6 runtime.\r\nAdding same support for localstack",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 24,
        "deletions": 15,
        "changed_files": 4,
        "created_at": "2022-04-05T13:23:10Z",
        "closed_at": "2022-04-07T07:27:19Z",
        "merged_at": "2022-04-07T07:27:19Z",
        "body": "This PR makes use of a custom authorization header to hold the user request authorization header and pass it to backend integrations. Without this, the internal value for the authorization header was used and was being passed to backend integrations. Now we replace it with the user request value header.\r\n\r\nResolves https://github.com/localstack/localstack/issues/5780",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1559,
        "deletions": 975,
        "changed_files": 22,
        "created_at": "2022-04-05T11:40:18Z",
        "closed_at": "2022-05-02T19:18:57Z",
        "merged_at": "2022-05-02T19:18:57Z",
        "body": "Context: This PR was originally drafted by @steffyP . I (@SwatsonCodes) realized we were working on closely related features (on-failure destination and TRIM_HORIZON starting position for lambda event source mappings), but since my work involved a significant refactor of the existing kinesis event source code whoever merged their code first would force the other person to entirely re-work their implementation. Therefore at @thrau 's advice I decided to start pushing my work to Steffy's branch, resulting in this very large PR.\r\n\r\n\r\nThis PR does the following:\r\n* Refactor the base `EventSourceListener` abstract class into its own file\r\n* Move the `SQSEventSourceListener` class into its own file (and rename it slightly)\r\n* Refactor the DynamoDB Stream and Kinesis event source logic to use the EventSourceListener class\r\n* Leverage this refactored logic to implement the TRIM_HORIZON starting position for Kinesis and DynamoDB event sources\r\n* Add \"on failure destination\" implementation for DynamoDB and Kinesis event source mappings.\r\n* Refactor `lambda_integration.py` for general code organization and readability\r\n\r\n\r\n\r\n\r\nOriginal PR message from @steffyP :\r\n\r\n```\r\nAdded functionality for `create-event-source-mapping` with `DestinationConfig`:\r\n* AWS only supports `DestinationConfig` for streams, and only  `OnFailure`\r\n* This `DestinationConfig` is independent from the configuration in `put_function_event_invoke_config`\r\n\r\n### In this PR:\r\n- Implemented `OnFailure` invocation when using Kinesis Stream + Dynamodb Streams in `create-event-source-mapping`\r\n- For Dynamodb Streams that forwards to Kinesis Stream: let Kinesis invoke the lambda, as it has relevant information required for the `OnFailure` callback\r\n- Added test cases (that work against AWS + LocalStack)\r\n\r\n### Some observations (not part of this PR):\r\n* AWS validates the input of DestinationConfig extensively:\r\n  * throws an error if `OnSuccess` is used -> LocalStack will allow the creation, but will only act for `OnFailure`\r\n  * throws an error if the event source is not a stream, and `DestinationConfig` is set -> LS will allow creation (but only act for streams e.g. kinesis, dynamodb)\r\n  * only allows SQS/SNS as a destination for `OnFailure` -> LS does not validate, and will allow any destination\r\n* `put_function_event_invoke_config` seems only to invoke `DestinationConfig` on AWS if it was started asynchronously, and only if it is not triggered by event source mapping. LocalStack currently invokes it for every run, but changing this might be a risk.\r\n```",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 77,
        "deletions": 16,
        "changed_files": 3,
        "created_at": "2022-04-04T22:17:14Z",
        "closed_at": "2022-04-19T18:50:55Z",
        "merged_at": null,
        "body": "Add initial config for `EMULATION_MODE=mock` - to be used for light-weight emulation where users are depending on mocked responses only (i.e., don't need access to the real compute resources created underneath). \r\n\r\nApplying this for OpenSearch here as a starting point, although it will be relevant for other APIs as well (e.g., RDS, EKS, EC2, etc).\r\n\r\nMore of a WIP/proposal for now - details to be discussed!",
        "comments": 5
    },
    {
        "merged": true,
        "additions": 26,
        "deletions": 5,
        "changed_files": 3,
        "created_at": "2022-04-04T20:06:16Z",
        "closed_at": "2022-04-04T22:20:33Z",
        "merged_at": "2022-04-04T22:20:33Z",
        "body": "Fix S3 download of XML documents with preamble - fixes a regression introduced in https://github.com/localstack/localstack/pull/5795",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 31,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2022-04-04T05:21:43Z",
        "closed_at": "2022-04-04T06:56:53Z",
        "merged_at": "2022-04-04T06:56:53Z",
        "body": "Tracked from https://github.com/localstack/localstack/pull/5753\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 102,
        "deletions": 7,
        "changed_files": 2,
        "created_at": "2022-04-04T05:11:29Z",
        "closed_at": "2022-04-07T08:06:42Z",
        "merged_at": "2022-04-07T08:06:42Z",
        "body": "Fixes an issue where the following exception was being thrown for a valid query:\r\n```\r\nOne or more parameter values were invalid: Select type ALL_ATTRIBUTES is not supported for \r\nglobal secondary index id-index because its projection type is not ALL\r\n```\r\n\r\nThe exception is thrown if the table has additional global secondary indexes (besides the one being queried) that do not have a projection type of ALL.\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 52,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2022-04-04T05:06:34Z",
        "closed_at": "2022-04-04T13:27:25Z",
        "merged_at": "2022-04-04T13:27:25Z",
        "body": "# \ud83d\ude80 ASF Update Report \ud83d\ude80\nThis PR has been automatically generated to update the generated API stubs for our ASF services.\nIt uses the latest code-generator from the _master_ branch ([scaffold.py](https://github.com/localstack/localstack/blob/master/localstack/aws/scaffold.py)) and the latest _published_ version of [botocore](https://github.com/boto/botocore) to re-generate all API stubs which are already present in the `localstack.aws.api` module of the _master_ branch.\n\n## \ud83d\udd04 Updated Services\nThis PR updates the following services:\n- ec2\n\n## \ud83d\udc77\ud83c\udffd Handle this PR\nThe following options describe how to interact with this PR / the auto-update:\n\n\u2714\ufe0f **Accept Changes**\nIf the changes are satisfying, just squash-merge the PR and delete the source branch.\n\n\ud83d\udeab **Ignore Changes**\nIf you want to ignore the changes in this PR, just close the PR and *do not delete* the source branch. The PR will not be opened and a new PR will not be created for as long as the generated code does not change (or the branch is deleted). As soon as there are new changes, a new PR will be created.\n\n\u270f\ufe0f **Adapt Changes**\n*Don't do this.* The APIs are auto-generated. If you decide that the APIs should look different, you have to change the code-generation.\n\n\u23f8\ufe0f **Pause Updates**\nRemove the cron-schedule trigger of the GitHub Action workflow which creates these PRs. The action can then still be triggered manually, but it will not be executed automatically.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 4106,
        "deletions": 1491,
        "changed_files": 17,
        "created_at": "2022-04-03T19:22:40Z",
        "closed_at": "2022-04-09T10:09:37Z",
        "merged_at": "2022-04-09T10:09:37Z",
        "body": "Migrate DynamoDB to ASF - lift-and-shift migration, leaving the current logic mostly as-is. \r\n\r\nThis is the first migration that forwards calls to an external process (DynamoDBLocal in this case) - was able to re-use quite a bit of the existing utility logic in `moto.py`. \ud83d\udc4d \r\n\r\n* Extracted some of the common pieces of request forwarding into `forwarder.py` and unified with the existing moto utils\r\n* Some custom logic (like request throttling/rate limiting and serving the `/shell`) has been migrated to the `forward_request` of `AwsApiListener`. The throttling/rate limiting will likely be refactored over time - should become a shared utility that can also be plugged into other services (e.g., Kinesis, etc)",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 33,
        "deletions": 14,
        "changed_files": 2,
        "created_at": "2022-04-02T21:05:12Z",
        "closed_at": "2022-04-02T22:07:03Z",
        "merged_at": "2022-04-02T22:07:03Z",
        "body": "Add newline after XML preamble in S3 responses for Serverless compatibility. \r\n\r\nInstead of this:\r\n```\r\n<?xml version=\"1.0\" encoding=\"UTF-8\"?><LocationConstraint ...\r\n```\r\nWe need to return:\r\n```\r\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<LocationConstraint ...\r\n```\r\n\r\nTested against real AWS.\r\n\r\nThis is required because moto is generally collapsing all S3 XML responses: https://github.com/spulec/moto/blob/3718cde444b3e0117072c29b087237e1787c3a66/moto/core/responses.py#L102-L104 . Without this change, newer versions of Serverless are failing with:\r\n```\r\nServerless: [AWS cloudformation 400 1.645s 0 retries] describeStacks({ StackName: 'sls-test-local' })\r\nServerless: Ensuring that deployment bucket exists\r\nServerless: [AWS s3 200 0.022s 0 retries] getBucketLocation({ Bucket: 'localstack-websockets-serverless' })\r\n\r\n Serverless Error ----------------------------------------\r\n\r\n  ServerlessError: Deployment bucket is not in the same region as the lambda function\r\n```\r\n\r\nDebugging the Serverless logic a bit more, it turns out that the location constraint gets extracted as the (literal) string `<LocationConstraint xmlns=\"http://s3.amazonaws.com/doc/2006-03-01/\">` instead of the location value like `us-east-1` (seems like a bug in their XML parser).",
        "comments": 5
    },
    {
        "merged": true,
        "additions": 37,
        "deletions": 10,
        "changed_files": 6,
        "created_at": "2022-04-01T18:50:55Z",
        "closed_at": "2022-04-01T20:06:13Z",
        "merged_at": "2022-04-01T20:06:13Z",
        "body": "Minor fixes for data types handling in CloudFormation deployer - surfaced when working on changes for #5674\r\n\r\n* fix request types for ApiGateway::UsagePlan parameters\r\n* fix logic for using `!Sub` with numeric substitution values (ensure we return `str` for the regex replacer)",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 6,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2022-04-01T09:20:50Z",
        "closed_at": "2022-04-01T10:50:30Z",
        "merged_at": "2022-04-01T10:50:30Z",
        "body": "Skip installing -ext `runtime` dependencies in CI tests - attempt to fix broken build on `master`. \r\n\r\nWe're currently running `make install-test` in the CI builds, and the `pip install -e \".[cli,runtime,test]\"` command transitively pulls in the `runtime` extras from dependent packages, which we want to avoid. \r\n\r\nThe particular reason why the builds are failing right now is because an upstream dependency has been added to the `runtime` extra which depends on `thriftpy2`, which in turn requires `gcc` to build the native extensions.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 78,
        "deletions": 3,
        "changed_files": 2,
        "created_at": "2022-04-01T04:22:30Z",
        "closed_at": "2022-04-04T20:19:34Z",
        "merged_at": "2022-04-04T20:19:34Z",
        "body": "This PR addresses issue #5762. It shows that Localstack completely deletes a function policy when the user tries to delete only one of its statements. \r\n\r\nChanges:\r\n- Extension of the method **remove_permision** to fix issue.\r\n- Test added.\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 10,
        "deletions": 7,
        "changed_files": 4,
        "created_at": "2022-03-31T08:49:19Z",
        "closed_at": "2022-04-01T07:34:58Z",
        "merged_at": "2022-04-01T07:34:58Z",
        "body": "Upgrade black to fix issue with click addressed here: https://github.com/psf/black/issues/2964 \r\n",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 11,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2022-03-31T08:28:45Z",
        "closed_at": "2022-06-07T07:55:20Z",
        "merged_at": null,
        "body": "Adds state fetching for QueuePolicies since those can be depended on. \r\n\r\nPlease give input if I need to add more to the state fetching. QueuePolicies not being their own resource in the API makes the CF implementation a bit non-trivial.\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-03-31T07:12:11Z",
        "closed_at": "2022-04-01T09:08:43Z",
        "merged_at": "2022-04-01T09:08:43Z",
        "body": "This PR fixes a regression which happened with #5391 \r\n\r\nremoving the line which converts log outputs to string causes an error when concatenating in L662",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 9,
        "changed_files": 2,
        "created_at": "2022-03-30T12:41:13Z",
        "closed_at": "2022-03-31T11:01:35Z",
        "merged_at": "2022-03-31T11:01:34Z",
        "body": "Avoid returning `Transfer-Encoding` headers for HTTP 204 responses. Should fix the currently failing build on `master`.\r\n\r\nCurrently seeing connection/protocol errors like below:\r\n```\r\n            except (HTTPException, SocketError) as e:\r\n                # This includes IncompleteRead.\r\n>               raise ProtocolError(\"Connection broken: %r\" % e, e)\r\nE               urllib3.exceptions.ProtocolError: (\"Connection broken: InvalidChunkLength(got length b'', 0 bytes read)\", InvalidChunkLength(got length b'', 0 bytes read))\r\n\r\n.venv/lib/python3.8/site-packages/urllib3/response.py:458: ProtocolError\r\n```\r\n\r\nThe issue is that `Transfer-Encoding` is being returned from some of the Flask APIs (Lambda DELETE operations that return a 204 status), which newer versions of `urllib3` cannot handle.\r\n\r\nWas doing a quick search across recent changes in `urllib3`/`flask`/`hypercorn` to find out where this new behavior got introduced, but couldn't pinpoint the change so far.\r\n \r\nThe change to remove `Transfer-Encoding` seems safe in the general case, as 204 HTTP responses expect no content to be sent along with the response.",
        "comments": 5
    },
    {
        "merged": true,
        "additions": 4382,
        "deletions": 269,
        "changed_files": 7,
        "created_at": "2022-03-30T10:20:46Z",
        "closed_at": "2022-04-14T16:19:38Z",
        "merged_at": "2022-04-14T16:19:38Z",
        "body": "### Summary\r\nThis PR migrates the community provider for Simple Email Service to ASF.\r\n\r\nAdditionally a new service endpoint `/_localstack/ses` is introduced.\r\nThis system is used by SES community, SES pro, SESv2 pro\r\nThis was previously implemented within the legacy SES listener as `/_messages_`.\r\n\r\n### Tests\r\nCI run against Pro branch: https://github.com/localstack/localstack/runs/5882112689?check_suite_focus=true",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 34,
        "deletions": 15,
        "changed_files": 4,
        "created_at": "2022-03-29T04:24:16Z",
        "closed_at": "2022-04-01T18:04:45Z",
        "merged_at": "2022-04-01T18:04:45Z",
        "body": "This PR addresses issue #5748. Even thought I didn't found any official documentation, it's common knowledge that `LocationConstraint` should be `None` when is set to us-east-1. And the fix put in place to avoid return None, returns the requests region, instead of Null or the correct one.\r\n\r\nChanges:\r\n- Removing of **get-bucket-location** response fixing.\r\n- Test to validate the correct responses in both cases: default and non-default\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-03-28T09:20:42Z",
        "closed_at": "2022-03-28T10:24:26Z",
        "merged_at": "2022-03-28T10:24:26Z",
        "body": "Example: len(list) = 2, pagesize = 1\r\nFirst run: start_index = 0, nextToken = token_generator( list[ start_index + pagesize = 0 + 1])\r\nSecond run: start_index = 1, nextToken = token_generator( list[ start_index + pagesize = 1 + 1]) -> list[2], -> out of bounds",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 192,
        "deletions": 10977,
        "changed_files": 4,
        "created_at": "2022-03-28T05:05:57Z",
        "closed_at": "2022-03-31T09:38:46Z",
        "merged_at": "2022-03-31T09:38:46Z",
        "body": "# \ud83d\ude80 ASF Update Report \ud83d\ude80\nThis PR has been automatically generated to update the generated API stubs for our ASF services.\nIt uses the latest code-generator from the _master_ branch ([scaffold.py](https://github.com/localstack/localstack/blob/master/localstack/aws/scaffold.py)) and the latest _published_ version of [botocore](https://github.com/boto/botocore) to re-generate all API stubs which are already present in the `localstack.aws.api` module of the _master_ branch.\n\n## \ud83d\udd04 Updated Services\nThis PR updates the following services:\n- config\n- ec2\n- redshift\n- ssm\n\n## \ud83d\udc77\ud83c\udffd Handle this PR\nThe following options describe how to interact with this PR / the auto-update:\n\n\u2714\ufe0f **Accept Changes**\nIf the changes are satisfying, just squash-merge the PR and delete the source branch.\n\n\ud83d\udeab **Ignore Changes**\nIf you want to ignore the changes in this PR, just close the PR and *do not delete* the source branch. The PR will not be opened and a new PR will not be created for as long as the generated code does not change (or the branch is deleted). As soon as there are new changes, a new PR will be created.\n\n\u270f\ufe0f **Adapt Changes**\n*Don't do this.* The APIs are auto-generated. If you decide that the APIs should look different, you have to change the code-generation.\n\n\u23f8\ufe0f **Pause Updates**\nRemove the cron-schedule trigger of the GitHub Action workflow which creates these PRs. The action can then still be triggered manually, but it will not be executed automatically.",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 31,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2022-03-26T06:36:04Z",
        "closed_at": "2022-04-04T06:55:58Z",
        "merged_at": null,
        "body": "Fixes issue [#4715](https://github.com/localstack/localstack/issues/4715). Now, `--zone-name` filters `AvailabilityZones` data in `ec2 describe-availability-zones` response.",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 14,
        "deletions": 8,
        "changed_files": 2,
        "created_at": "2022-03-25T20:33:59Z",
        "closed_at": "2022-03-26T14:17:01Z",
        "merged_at": "2022-03-26T14:17:01Z",
        "body": "This PR addresses issue #5746. Seems to be that depending on the type of message publication, the SNS client sends the MessageGroupId as a string or a List of strings. \r\n\r\nChanges:\r\n- Code addition that considers the different format.\r\n- Test extension.\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 3,
        "changed_files": 1,
        "created_at": "2022-03-25T13:56:01Z",
        "closed_at": "2022-03-25T17:07:55Z",
        "merged_at": "2022-03-25T17:07:55Z",
        "body": "This pull request fixes the EC curves used for the NIST key specs to be in line with what you get from AWS.\r\n\r\nFor reference: [AWS docs on EC key specs](https://docs.aws.amazon.com/kms/latest/developerguide/symm-asymm-choose.html#key-spec-ecc)\r\n\r\nThe `ECC_SECG_P256K1` key spec uses the correct curve.",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 48,
        "deletions": 24,
        "changed_files": 1,
        "created_at": "2022-03-24T15:17:23Z",
        "closed_at": "2022-03-25T13:09:43Z",
        "merged_at": "2022-03-25T13:09:43Z",
        "body": "FilterPattern for log subscription were not applied, when using e.g.\r\n```\r\nlogs_client.put_subscription_filter(\r\n                    logGroupName=logs_log_group,\r\n                    filterName=subscription_filter_name,\r\n                    filterPattern=\"{ ($.first = \\\"*\\\") && ($.second = \\\"*\\\") }\",\r\n                    destinationArn=kinesis_arn,\r\n                    roleArn=role_arn,\r\n                )\r\n```\r\nThis PR applies the defined `filterPattern`, so only relevant logs are forwarded. \r\n\r\n**Limitations:** \r\n- only supported when using LocalStack Pro\r\n- currently only json-pattern-matcher are supported\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 28,
        "deletions": 8,
        "changed_files": 8,
        "created_at": "2022-03-24T14:35:03Z",
        "closed_at": "2022-03-25T12:04:00Z",
        "merged_at": "2022-03-25T12:04:00Z",
        "body": "This PR adds the mark \"skip_offline\" to a set of tests which do need internet access when being executed.\r\nIn addition it fixes the check for the `CmdDockerClient` (which raises a `FileNotFoundError` if the binary is not available).",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 60,
        "deletions": 15,
        "changed_files": 5,
        "created_at": "2022-03-24T06:00:07Z",
        "closed_at": "2022-04-14T06:37:54Z",
        "merged_at": "2022-04-14T06:37:54Z",
        "body": "Continuation of issue #5229, where apparently I missed the integration of the HttpParameters of the Put Target request.\r\n\r\nChanges:\r\n- Fixing of Basic mode Auth header, now it is base64 encoded. \r\n- Correction of the Basic mode auth test, now the test only expects the correct way.\r\n- The HttpParametes of the PutTarget request are now integrated\r\n- The event to send is replaced for Input parameter if it is defined in the Put target request. As this doc [indicates](https://docs.aws.amazon.com/eventbridge/latest/APIReference/API_PutTargets.html).\r\n- The test for api-destinations now considers the new changes.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 214,
        "deletions": 22,
        "changed_files": 6,
        "created_at": "2022-03-23T19:09:33Z",
        "closed_at": "2022-03-23T22:30:51Z",
        "merged_at": "2022-03-23T22:30:51Z",
        "body": "Add ability to import keys into KMS. Addresses #5702",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 450,
        "deletions": 303,
        "changed_files": 13,
        "created_at": "2022-03-23T19:05:20Z",
        "closed_at": "2022-04-27T13:25:08Z",
        "merged_at": "2022-04-27T13:25:08Z",
        "body": "This PR adds a generalized version of the service name parser that was the outcome of the asf-mocking branch. It adds challenger code similar to #5411 to verify that the service name parser produces the same result as the current implementation. This will fail for now because we don't have custom rules implemented.",
        "comments": 3
    },
    {
        "merged": false,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-03-23T17:51:40Z",
        "closed_at": "2022-03-24T09:42:17Z",
        "merged_at": null,
        "body": "update moto-ext to pull in new updates + bugfixes",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 4312,
        "deletions": 816,
        "changed_files": 13,
        "created_at": "2022-03-23T09:02:34Z",
        "closed_at": "2022-05-04T09:50:51Z",
        "merged_at": "2022-05-04T09:50:51Z",
        "body": "Migrate the API Gateway (v1) service to ASF.",
        "comments": 6
    },
    {
        "merged": true,
        "additions": 398,
        "deletions": 92,
        "changed_files": 7,
        "created_at": "2022-03-22T20:34:06Z",
        "closed_at": "2022-03-24T14:08:47Z",
        "merged_at": "2022-03-24T14:08:47Z",
        "body": "Hey @whummer, I've been migrating this service and I noticed your [recent commit](https://github.com/localstack/localstack/commit/59e574213a435cd39ae8ce4de4499bbe062a1536) that supports the switch of the response format. \r\nDo you have any tips on how keep supporting the switch with the migration to ASF? \r\n`test_expiration_date_format` is the only broken test since it expects back a json response. ",
        "comments": 5
    },
    {
        "merged": true,
        "additions": 108,
        "deletions": 59,
        "changed_files": 3,
        "created_at": "2022-03-22T16:33:53Z",
        "closed_at": "2022-03-22T21:45:42Z",
        "merged_at": "2022-03-22T21:45:42Z",
        "body": "Fix Terraform creation of EC2 Security Groups with default egress.\r\n\r\nPrior to this change, the following TF script:\r\n```\r\n\r\nresource \"aws_security_group\" \"tls_allow\" {\r\n  name        = \"tls_allow\"\r\n  vpc_id      = \"vpc-...\"\r\n\r\n  ingress {\r\n    description      = \"TLS traffic\"\r\n    from_port        = 443\r\n    to_port          = 443\r\n    protocol         = \"tcp\"\r\n    cidr_blocks      = [\"8.0.0.0/24\"]\r\n  }\r\n\r\n  egress {\r\n    from_port        = 0\r\n    to_port          = 0\r\n    protocol         = \"-1\"\r\n    cidr_blocks      = [\"0.0.0.0/0\"]\r\n  }\r\n\r\n  tags = {\r\n    Name = \"allow_tls\"\r\n  }\r\n}\r\n```\r\n\r\n... would fail with the following error:\r\n```\r\n2022-03-22T16:46:54.176+0100 [INFO]  provider.terraform-provider-aws_v3.75.0_x5: 2022/03/22 16:46:54 [DEBUG] [aws-sdk-go] DEBUG: Validate Response ec2/RevokeSecurityGroupEgress failed, attempt 0/25, error InvalidPermission.NotFound: The specified rule does not exist in this security group\r\n\tstatus code: 400, request id: 7a62c49f-347e-4fc4-9331-6e8eEXAMPLE: timestamp=2022-03-22T16:46:54.176+0100\r\n\u2577\r\n\u2502 Error: Error revoking default egress rule for Security Group (sg-de2b193fa7e897815): InvalidPermission.NotFound: The specified rule does not exist in this security group\r\n\u2502 \tstatus code: 400, request id: 7a62c49f-347e-4fc4-9331-6e8eEXAMPLE\r\n\u2502\r\n\u2502   with aws_security_group.tls_allow,\r\n\u2502   on main.tf line 50, in resource \"aws_security_group\" \"tls_allow\":\r\n\u2502   50: resource \"aws_security_group\" \"tls_allow\" {\r\n```",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1814,
        "deletions": 504,
        "changed_files": 9,
        "created_at": "2022-03-22T13:37:26Z",
        "closed_at": "2022-03-22T21:58:50Z",
        "merged_at": "2022-03-22T21:58:50Z",
        "body": "* migrate KMS to ASF - minimally invasive lift&shift migration\r\n* contains a likely fix for a key lookup issue in #5716",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 11,
        "deletions": 6,
        "changed_files": 3,
        "created_at": "2022-03-22T12:21:22Z",
        "closed_at": "2022-03-24T14:08:01Z",
        "merged_at": "2022-03-24T14:08:01Z",
        "body": "### Summary\r\nDue to the introduction of the EC2 Docker backend, there are stricter checks on parameters given for EC2 operations.\r\n\r\nThis PR fixes the CloudFormation tests that were affected.\r\n\r\nCI run against the dependent -ext branch: https://github.com/localstack/localstack/runs/5661257694?check_suite_focus=true#step:16:35\r\n\r\n### Related\r\n\r\nRequires: https://github.com/localstack/localstack-ext/pull/468",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-03-22T08:30:53Z",
        "closed_at": "2022-03-22T16:24:25Z",
        "merged_at": "2022-03-22T16:24:25Z",
        "body": "This PR fixes a scenario where the lambda response has a `404` as a status code (check https://github.com/localstack/localstack/issues/5689 for details) and it was entering this unrelated code path. Moving the deserialization code under the respective code path avoids decoding a binary response\r\n\r\nTest example https://github.com/localstack/troubleshooting-issues/tree/main/issue_5689\r\nAddresses https://github.com/localstack/localstack/issues/5689",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 32,
        "deletions": 4,
        "changed_files": 2,
        "created_at": "2022-03-22T07:37:53Z",
        "closed_at": "2022-04-12T05:22:33Z",
        "merged_at": null,
        "body": "When using a `CognitoUserPool` with a `CustomEmailSender` and/or `CustomSMSSender` the triggered Lambda functions are not in string form, but are passed in a Dict in the following form: \r\n```\r\n{\r\n  \"LambdaArn\" : String,\r\n  \"LambdaVersion\" : String\r\n}\r\n```\r\nReference from AWS docs: \r\n* https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-cognito-userpool-lambdaconfig.html\r\n* https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-cognito-userpool-customemailsender.html\r\n* https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-cognito-userpool-customsmssender.html\r\n\r\nfixes #5540 ",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 0,
        "deletions": 19,
        "changed_files": 1,
        "created_at": "2022-03-22T07:21:51Z",
        "closed_at": "2022-03-22T10:25:16Z",
        "merged_at": "2022-03-22T10:25:16Z",
        "body": "An EC2 test for terminate instance fails with: \r\n\r\n```\r\n         if http.status_code >= 300:\r\n            error_code = parsed_response.get(\"Error\", {}).get(\"Code\")\r\n            error_class = self.exceptions.from_code(error_code)\r\n>           raise error_class(parsed_response, operation_name)\r\nE           botocore.exceptions.ClientError: An error occurred (InvalidAMIID.NotFound) when calling the RunInstances operation: The image id 'ami-d3adb33f' does not exist\r\n\r\n/home/runner/work/localstack/localstack/localstack-ext/.venv/lib/python3.8/site-packages/botocore/client.py:725: ClientError\r\n```\r\nReason for failure: The CI runs this test against the pro edition. The Docker EC2 provider expects a valid AMI ID corresponding to a Docker image.\r\n\r\nThis test is removed as redundant because:\r\n- The functionality is tested in -ext https://github.com/localstack/localstack-ext/blob/master/tests/integration/test_ec2.py#L83\r\n- And in moto https://github.com/spulec/moto/blob/29d01c3/tests/test_ec2/test_instances.py#L39\r\n- There is no custom functionality for terminate instances in community provider",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 59,
        "deletions": 36,
        "changed_files": 3,
        "created_at": "2022-03-21T15:56:35Z",
        "closed_at": "2022-03-22T07:59:36Z",
        "merged_at": "2022-03-22T07:59:36Z",
        "body": "Fixes the `DomainValidationOptions` for ACM's `DescribeCertificate` operation.\r\nThe previous implementation did not use the existing array of the cert in the CertBundle, but tried to resolve a non-existing attribute, which in the end wasn't set (since the `addenda` would only be used for non-existing keys in the result).\r\n\r\nThis fix is necessary to fix the ACM waiter on `certificate-validation`, which can be executed with awscli / awscli-local:\r\n```\r\n$ awslocal awslocal acm request-certificate --domain-name test-domain.localhost.localstack.cloud\r\n{\r\n    \"CertificateArn\": \"arn:aws:acm:us-east-1:000000000000:certificate/1547a44e-8ff9-4ee3-92f3-7e0f2bcf9b74\"\r\n}\r\n$ awslocal acm wait certificate-validated --certificate-arn \"arn:aws:acm:us-east-1:000000000000:certificate/1547a44e-8ff9-4ee3-92f3-7e0f2bcf9b74\"\r\n```\r\nWithout this fix, the latter call would not be successful (because the `DomainValidationOptions` of `DescribeCertificate` would never state that the `ValidationStatus` is `SUCCESSFUL`). \r\nThe same mechanism is used when creating a `DnsValidatedCertificate` with CDK.",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 19,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2022-03-21T13:38:36Z",
        "closed_at": "2022-03-23T14:09:57Z",
        "merged_at": null,
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 93,
        "deletions": 52,
        "changed_files": 4,
        "created_at": "2022-03-21T11:21:43Z",
        "closed_at": "2022-03-21T14:36:40Z",
        "merged_at": "2022-03-21T14:36:40Z",
        "body": "Add CloudFormation support for `AWS::IAM::ServiceLinkedRole`",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 24,
        "deletions": 60,
        "changed_files": 2,
        "created_at": "2022-03-21T05:05:33Z",
        "closed_at": "2022-03-21T10:25:16Z",
        "merged_at": "2022-03-21T10:25:16Z",
        "body": "# \ud83d\ude80 ASF Update Report \ud83d\ude80\nThis PR has been automatically generated to update the generated API stubs for our ASF services.\nIt uses the latest code-generator from the _master_ branch ([scaffold.py](https://github.com/localstack/localstack/blob/master/localstack/aws/scaffold.py)) and the latest _published_ version of [botocore](https://github.com/boto/botocore) to re-generate all API stubs which are already present in the `localstack.aws.api` module of the _master_ branch.\n\n## \ud83d\udd04 Updated Services\nThis PR updates the following services:\n- config\n- s3control\n\n## \ud83d\udc77\ud83c\udffd Handle this PR\nThe following options describe how to interact with this PR / the auto-update:\n\n\u2714\ufe0f **Accept Changes**\nIf the changes are satisfying, just squash-merge the PR and delete the source branch.\n\n\ud83d\udeab **Ignore Changes**\nIf you want to ignore the changes in this PR, just close the PR and *do not delete* the source branch. The PR will not be opened and a new PR will not be created for as long as the generated code does not change (or the branch is deleted). As soon as there are new changes, a new PR will be created.\n\n\u270f\ufe0f **Adapt Changes**\n*Don't do this.* The APIs are auto-generated. If you decide that the APIs should look different, you have to change the code-generation.\n\n\u23f8\ufe0f **Pause Updates**\nRemove the cron-schedule trigger of the GitHub Action workflow which creates these PRs. The action can then still be triggered manually, but it will not be executed automatically.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 16,
        "deletions": 3,
        "changed_files": 2,
        "created_at": "2022-03-20T17:05:21Z",
        "closed_at": "2022-03-20T18:13:33Z",
        "merged_at": "2022-03-20T18:13:33Z",
        "body": "Sources the `domainName` and `domainPrefix` from invocation context setup downstream.\r\n\r\nAddresses https://github.com/localstack/localstack/issues/5603",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-03-20T10:22:02Z",
        "closed_at": "2022-03-20T14:31:27Z",
        "merged_at": "2022-03-20T14:31:27Z",
        "body": "Changes introduced in https://github.com/spulec/moto/pull/4929 and https://github.com/localstack/moto/commit/eed32a5f72fbdc0d33c4876d1b5439dfd1efd5d8 break the S3 provider.\r\n\r\n```\r\n...\r\n File \"/opt/code/localstack/localstack/utils/patch.py\", line 38, in proxy\r\n   return new(target, *args, **kwargs)\r\n File \"/opt/code/localstack/localstack/utils/aws/request_context.py\", line 163, in convert_to_flask_response_call\r\n   return fn(*args, **kwargs)\r\n File \"/opt/code/localstack/.venv/lib/python3.8/site-packages/moto/core/utils.py\", line 127, in __call__\r\n   result = self.callback(request, request.url, dict(request.headers))\r\n File \"/opt/code/localstack/.venv/lib/python3.8/site-packages/moto/core/utils.py\", line 261, in _wrapper\r\n   response = f(*args, **kwargs)\r\n File \"/opt/code/localstack/.venv/lib/python3.8/site-packages/moto/s3/responses.py\", line 261, in bucket_response\r\n   response = self._bucket_response(request, full_url)\r\n File \"/opt/code/localstack/.venv/lib/python3.8/site-packages/moto/s3/responses.py\", line 313, in _bucket_response\r\n   return self._bucket_response_post(request, body, bucket_name)\r\n File \"/opt/code/localstack/.venv/lib/python3.8/site-packages/moto/s3/responses.py\", line 937, in _bucket_response_post\r\nif self.is_delete_keys(request, path, bucket_name):\r\n File \"/opt/code/localstack/localstack/services/s3/s3_starter.py\", line 311, in s3_response_is_delete_keys\r\n   return is_delete_keys_v3 or is_delete_keys(request, path, bucket_name)\r\nTypeError: is_delete_keys() takes 2 positional arguments but 3 were given\r\n```\r\n\r\nSupport ticket: u0325dr4l8m",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 34,
        "deletions": 36,
        "changed_files": 3,
        "created_at": "2022-03-18T07:21:05Z",
        "closed_at": "2022-03-19T09:14:55Z",
        "merged_at": "2022-03-19T09:14:54Z",
        "body": "A recent fix in moto lead to issues for customers using FIFO queues because we didn't account for the required FIFO queue suffix `.fifo` when auto-creating the names with CloudFormation.\r\n\r\nFixes #5692",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 133,
        "deletions": 27,
        "changed_files": 6,
        "created_at": "2022-03-17T22:09:00Z",
        "closed_at": "2022-03-19T12:09:06Z",
        "merged_at": "2022-03-19T12:09:06Z",
        "body": "Just a small dummy Cloudformation resource for the AWS::CDK::Metadata resource type that is by default added to every stack deployed via CDK. ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 104,
        "deletions": 8,
        "changed_files": 6,
        "created_at": "2022-03-17T20:00:30Z",
        "closed_at": "2022-03-21T17:49:19Z",
        "merged_at": "2022-03-21T17:49:19Z",
        "body": "Minor fixes for issues that were discovered during testing the integration with [Mulesoft AnyConnect](https://www.mulesoft.com/platform/cloud-connectors) and when testing against AWS:\r\n\r\n1. Support \"Accept\" header to switch response format. Currently supports only XML->JSON conversion - this will be more nicely generalized once we have the new Gateway in place. /cc @thrau @alexrashed \r\n2. Fix Flask app routes in Lambda API, to avoid returning 308 redirects for trailing slashes. This can ultimately cause invalid redirects and connection errors in our [edge proxy forwarding](https://github.com/localstack/localstack/blob/ae986b92e74e9d00f13c5a8162867dd94e42c5b2/localstack/services/generic_proxy.py#L661-L668). (as flask is internally using `werkzeug` to [construct the redirect URL](https://github.com/pallets/werkzeug/blob/560dd5f320bff318175f209595d42f5a80045417/src/werkzeug/routing.py#L2149-L2151), which [uses the HTTP `Host` header](https://github.com/pallets/werkzeug/blob/560dd5f320bff318175f209595d42f5a80045417/src/werkzeug/routing.py#L1630) passed in the request). This will become largely obsolete once we have moved off flask, but is still something we may want to be mindful about for the external service providers (DynamoDB, StepFunctions, etc).\r\n3. Fix date format of STS session token `Expiration` for JSON responses. This is only a quick fix for this particular case for now - we'll need a more generic approach to convert timestamp strings to int/double for JSON responses (to be verified with different AWS API calls..).\r\n\r\nPoint 1 can be replicated via a script like this:\r\n```\r\nimport boto3\r\n\r\ndef add_accept_header(request, **kwargs):\r\n    request.headers.add_header('Accept', 'application/json')\r\n\r\nclient = boto3.client('sts')\r\nclient.meta.events.register_first('before-sign.sts', add_accept_header)\r\nresult = client.get_session_token()\r\nprint(result)\r\n```\r\n\r\nThis is an interesting case - the result is returned as JSON, but then the botocore parser is unable to parse the shape (as it is expecting an XML response):\r\n```\r\nbotocore.parsers.ResponseParserError: Unable to parse response (not well-formed (invalid token): line 1, column 0), invalid XML received. Further retries may succeed:\r\nb'{\"GetSessionTokenResponse\":{\"GetSessionTokenResult\":{\"Credentials\":{\"AccessKeyId\":\"ASIARCSPW2WN5VEJAONP\",\"Expiration\":1.647589601E9,\"SecretAccessKey\":\"vz6xCiLX2vFaioY9hl0gZD2t+TViN5XL1F3Xk4Ed\",\"SessionToken\":\"FwoGZXIvYXdzEEUaDCJEiCkdpc1hiO9VSiKCAfO0huwDtqmUuQUfxHEau4OVCv98mc2J2pEVE9K5QorMoJf27inhZwFof4TpYtbV/gfUQLyYNH8PcZebY963xY3h30KtA7y8d9heGbgo/GFv4sAxLutQBpMhgz+A8re7cDoN4/0yu7bnv3SXzCA56wg0Ca2pqAZFScBPvIj4L3npkVoooaDOkQYyKIlQuo+SW9D9Ux9/7TsitEXxNWerxyksgkpflIqdqvGqd/rgAv00HrE=\"}},\"ResponseMetadata\":{\"RequestId\":\"cf015640-4a1d-489a-9ca2-57901616deaa\"}}}'\r\n```",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 83,
        "deletions": 2,
        "changed_files": 5,
        "created_at": "2022-03-17T18:02:15Z",
        "closed_at": "2022-03-19T08:12:00Z",
        "merged_at": "2022-03-19T08:12:00Z",
        "body": "fix discrepancy between the cf route53 model and the called operation\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 8,
        "deletions": 27,
        "changed_files": 3,
        "created_at": "2022-03-17T13:11:47Z",
        "closed_at": "2022-03-17T18:29:27Z",
        "merged_at": "2022-03-17T18:29:27Z",
        "body": "Bump `moto-ext` to 3.0.6, adjust code patches accordingly.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 0,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-03-16T13:58:15Z",
        "closed_at": "2022-03-16T16:37:25Z",
        "merged_at": "2022-03-16T16:37:24Z",
        "body": "This hasn't been necessary for quite some time now and I think this leads to a lot of unnecessary issues.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 13,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2022-03-15T15:31:27Z",
        "closed_at": "2022-03-15T19:21:19Z",
        "merged_at": "2022-03-15T19:21:19Z",
        "body": "This PR fixes a small issue in ASF's `QueryRequestParser` for operations without a specified input shape.\r\n- `RequestParser#_parse_shape` now returns `None` if the input shape is not given.\r\n- The `QueryRequestParser` then returns an empty dictionary (i.e. no args for the operation).\r\n\r\n/cc @giograno (thanks for the report)",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 245,
        "deletions": 0,
        "changed_files": 4,
        "created_at": "2022-03-15T13:24:24Z",
        "closed_at": "2022-03-18T06:47:28Z",
        "merged_at": "2022-03-18T06:47:27Z",
        "body": "This PR adds support for `Cognito::IdentityPoolRoleAttachment.RoleMappings`.\r\n\r\nIn CloudFormation the `RoleMappings` field can contain a field `IdentityProvider`, which is not support by the boto client. Instead it's used as a key.\r\n\r\nFurther Information here: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-cognito-identitypoolroleattachment-rolemapping.html\r\n\r\nrelated bug: #5669 ",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 22,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2022-03-15T10:16:25Z",
        "closed_at": "2022-03-15T13:46:59Z",
        "merged_at": "2022-03-15T13:46:59Z",
        "body": "## Description\r\n\r\nThis PR:\r\n\r\n- Adds an event banner to publicize about LocalStack events\r\n- Add the SVG over the `README.md` for a public outreach\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2022-03-15T01:06:52Z",
        "closed_at": "2022-03-16T13:50:14Z",
        "merged_at": "2022-03-16T13:50:13Z",
        "body": "[related bug](https://github.com/localstack/localstack/issues/5656)\r\n\r\nsince time.time() returns a float where the left side is in seconds and the right side is the number of microseconds, down casting to an int removes the microseconds and maintains the seconds.\r\n\r\nconversion from epoch to datetime is still working and tests show that the microseconds are now 0",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 9,
        "deletions": 32,
        "changed_files": 1,
        "created_at": "2022-03-14T05:15:49Z",
        "closed_at": "2022-03-14T07:49:16Z",
        "merged_at": "2022-03-14T07:49:16Z",
        "body": "# \ud83d\ude80 ASF Update Report \ud83d\ude80\nThis PR has been automatically generated to update the generated API stubs for our ASF services.\nIt uses the latest code-generator from the _master_ branch ([scaffold.py](https://github.com/localstack/localstack/blob/master/localstack/aws/scaffold.py)) and the latest _published_ version of [botocore](https://github.com/boto/botocore) to re-generate all API stubs which are already present in the `localstack.aws.api` module of the _master_ branch.\n\n## \ud83d\udd04 Updated Services\nThis PR updates the following services:\n- logs\n\n## \ud83d\udc77\ud83c\udffd Handle this PR\nThe following options describe how to interact with this PR / the auto-update:\n\n\u2714\ufe0f **Accept Changes**\nIf the changes are satisfying, just squash-merge the PR and delete the source branch.\n\n\ud83d\udeab **Ignore Changes**\nIf you want to ignore the changes in this PR, just close the PR and *do not delete* the source branch. The PR will not be opened and a new PR will not be created for as long as the generated code does not change (or the branch is deleted). As soon as there are new changes, a new PR will be created.\n\n\u270f\ufe0f **Adapt Changes**\n*Don't do this.* The APIs are auto-generated. If you decide that the APIs should look different, you have to change the code-generation.\n\n\u23f8\ufe0f **Pause Updates**\nRemove the cron-schedule trigger of the GitHub Action workflow which creates these PRs. The action can then still be triggered manually, but it will not be executed automatically.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2022-03-14T01:12:46Z",
        "closed_at": "2022-03-14T07:27:23Z",
        "merged_at": "2022-03-14T07:27:23Z",
        "body": "[![WhiteSource Renovate](https://app.renovatebot.com/images/banner.svg)](https://renovatebot.com)\n\nThis PR contains the following updates:\n\n| Package | Type | Update | Change |\n|---|---|---|---|\n| python | stage | digest | `269c3ac` -> `26ab58f` |\n\n---\n\n### Configuration\n\n\ud83d\udcc5 **Schedule**: \"before 3am on Monday\" (UTC).\n\n\ud83d\udea6 **Automerge**: Disabled by config. Please merge this manually once you are satisfied.\n\n\u267b **Rebasing**: Whenever PR becomes conflicted, or you tick the rebase/retry checkbox.\n\n\ud83d\udd15 **Ignore**: Close this PR and you won't be reminded about this update again.\n\n---\n\n - [ ] <!-- rebase-check -->If you want to rebase/retry this PR, click this checkbox.\n\n---\n\nThis PR has been generated by [WhiteSource Renovate](https://renovate.whitesourcesoftware.com). View repository job log [here](https://app.renovatebot.com/dashboard#github/localstack/localstack).",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 52,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2022-03-14T00:45:37Z",
        "closed_at": "2022-03-14T12:31:06Z",
        "merged_at": "2022-03-14T12:31:06Z",
        "body": "Minor update in patch decorator to allow multiple/composite patches of methods. This covers a case that has come up recently, as we're now patching certain service methods twice (from community, and pro code base).",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-03-13T18:47:14Z",
        "closed_at": "2022-03-13T20:08:41Z",
        "merged_at": "2022-03-13T20:08:41Z",
        "body": "trying to fix the master CI build",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 325,
        "deletions": 39,
        "changed_files": 7,
        "created_at": "2022-03-13T11:17:14Z",
        "closed_at": "2022-03-14T16:39:24Z",
        "merged_at": "2022-03-14T16:39:24Z",
        "body": "VPCs come with a default security group and a default network ACL. \r\nThis PR adds the corresponding support for using CloudFormation GetAtt/Ref.",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 97,
        "deletions": 185,
        "changed_files": 6,
        "created_at": "2022-03-12T21:27:35Z",
        "closed_at": "2022-03-19T19:39:48Z",
        "merged_at": "2022-03-19T19:39:48Z",
        "body": "Pins airspeed version that contains the `define` directive implemented \r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2022-03-12T14:55:15Z",
        "closed_at": "2022-03-12T20:30:31Z",
        "merged_at": "2022-03-12T20:30:31Z",
        "body": "This PR adds to the regex support for the stage \"$default\" in the path.\r\n\r\nAddress https://github.com/localstack/localstack/issues/5657\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 101,
        "deletions": 6,
        "changed_files": 6,
        "created_at": "2022-03-12T13:44:54Z",
        "closed_at": "2022-03-14T09:10:27Z",
        "merged_at": "2022-03-14T09:10:27Z",
        "body": "Fixes an issue in CloudFormation nested stacks where it couldn't resolve outputs from nested stacks in the parent stack. \r\nOutputs from nested stacks were also merged into the parent stack for some reason which has been removed again to be in parity with AWS.\r\n\r\n\r\n\r\n/cc @alexrashed ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 26,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2022-03-11T18:41:15Z",
        "closed_at": "2022-03-11T22:38:01Z",
        "merged_at": "2022-03-11T22:38:01Z",
        "body": "This PR addresses issue #5579. \r\n\r\nChanges:\r\n- Removed leading slash from S3 key.\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2841,
        "deletions": 559,
        "changed_files": 11,
        "created_at": "2022-03-10T23:15:47Z",
        "closed_at": "2022-05-06T14:46:16Z",
        "merged_at": "2022-05-06T14:46:16Z",
        "body": "Migrating sns to ASF",
        "comments": 5
    },
    {
        "merged": false,
        "additions": 39,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2022-03-10T22:41:29Z",
        "closed_at": "2022-06-07T08:19:07Z",
        "merged_at": null,
        "body": "Adds test for the `localstack status` command",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 44,
        "deletions": 0,
        "changed_files": 3,
        "created_at": "2022-03-10T22:12:59Z",
        "closed_at": "2022-03-17T06:38:32Z",
        "merged_at": "2022-03-17T06:38:32Z",
        "body": "This PR addresses issue #5500. The user reported a problem when deploying an aws-labs solution for a stack. After a lot triaging the real problem was that CDK allows the creation of a Kinesis Stream without setting the `StreamName` parameter and expects AWS to set a default name.\r\n\r\nChanges:\r\n- Addition of the method `add_defaults(resource, stack_name: str)` to the Kinesis CFN Model.\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 36,
        "deletions": 5,
        "changed_files": 2,
        "created_at": "2022-03-10T21:02:12Z",
        "closed_at": "2022-03-10T23:26:42Z",
        "merged_at": "2022-03-10T23:26:42Z",
        "body": "This PR fixes two issues with `call_moto` identified in #5644 blocking the migration of route53 #5639\r\n\r\n* when boto tries to parse responses where [the location of shape member is in the header](https://github.com/boto/botocore/blob/a32e002555af61ef40f9d8622ecba75d9d99c742/botocore/data/route53/2013-04-01/service-2.json#L1611-L1615), `call_moto` would previously fail, because it [passes werkzeug `Header` objects down to boto](https://github.com/localstack/localstack/blob/1f0c03e4a14843fe4133f04c425d504e6be06bde/localstack/services/moto.py#L49-L50), which would then cause exceptions because they don't behave the same way as dictionaries ([as expected by boto](https://github.com/boto/botocore/blob/a32e002555af61ef40f9d8622ecba75d9d99c742/botocore/utils.py#L752-L757))\r\n* getting the moto dispatcher for the `ChangeResourceRecordSetsRequest` route would fail because of trailing slashes. the pattern defined [here](https://github.com/spulec/moto/blob/29d01c35bc06d5a8462487d614e33b9e8416ba96/moto/route53/urls.py#L18) `{0}/(?P<api_version>[\\d_-]+)/hostedzone/(?P<zone_id>[^/]+)/rrset/?$` would fail to match `http://localhost:4566/2013-04-01/hostedzone/BOR36Z3H458JKS9/rrset/`, even though it should. instead i had to disable matching strict slashes in the werkzeug URL map, [just like moto does](https://github.com/spulec/moto/blob/29d01c35bc06d5a8462487d614e33b9e8416ba96/moto/moto_server/werkzeug_app.py#L291).\r\n\r\ni removed the test of #5644 in favor of two more specific tests (i would like to avoid replicating integration tests)\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 439,
        "deletions": 213,
        "changed_files": 6,
        "created_at": "2022-03-10T19:40:52Z",
        "closed_at": "2022-03-16T16:42:31Z",
        "merged_at": "2022-03-16T16:42:31Z",
        "body": "This PR should address issue https://github.com/localstack/localstack/issues/5627, which resulted in double base64 encoded output for kinesis records that have been received by cloudwatch subscription filter.\r\n\r\nSame behavior has been witnessed for firehose and s3 uploads when using cloudwatch subscription filter.\r\n\r\nPR includes:\r\n- fix for double encoding when using logs subscription filter in combination with firehose s3; and kinesis\r\n- refactored and adapted integration tests in `test_logs`: tests run against AWS (except `test_delivery_logs_for_sns` which involves sending SMS, and require additional config in AWS console)\r\n  - verified that all log subscription scenarios (lambda, kinesis, firehose) have the same result in AWS\r\n- migrated and refactored integration tests `tests_kinesis` to pytest. Tests run against AWS (except `test_get_records` which involves a request mock for CBOR encoding)\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2022-03-10T15:37:03Z",
        "closed_at": "2022-03-11T13:50:24Z",
        "merged_at": "2022-03-11T13:50:24Z",
        "body": "Release version 0.14.1 - creating a new tagged version that users can pin to.",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 7,
        "deletions": 3,
        "changed_files": 2,
        "created_at": "2022-03-10T15:28:22Z",
        "closed_at": "2022-03-14T07:33:16Z",
        "merged_at": null,
        "body": "This PR fixes the URL matching for OpenSearch when the `OPENSEARCH_ENDPOINT_STRATEGY` is set to `path` (i.e. we route the incoming requests through localstack using a path matching).\r\nIt explicitly disables the match check based on the HTTP `host` header, since clients might resolve to LocalStack using different hostnames (f.e. when using Docker network name resolution).",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2292,
        "deletions": 872,
        "changed_files": 7,
        "created_at": "2022-03-10T12:00:25Z",
        "closed_at": "2022-03-30T09:12:30Z",
        "merged_at": "2022-03-30T09:12:29Z",
        "body": "Addresses the following bug reports:\r\n- It is possible to create secrets with invalid names which fail when you try to retrieve secrets for them with the message Secrets Manager can't find the specified secret value for staging label: AWSCURRENT\r\n- Last accessed is not being updated when fetching secrets (getSecretValue)\r\n- Last updated is not being updated when changing secrets (updateSecret)\r\n- Description is being completely ignored, both when creating and updating secrets (it's always returned as an empty string)\r\nIt also fixes some date formats, mainly: CreatedDate, CreateDate, and LastChangedDate (last of which is related to bug above).\r\n\r\nIn addition, it fixes:\r\n- many version stages update scenarios in leading to corruptions \r\n- secret rotation logic not cleaning up after rotation and not staging the version correctly before rotation\r\n- prevents rotation fields to be updated if the provided lambda rotation arn is invalid\r\n- the return type of update_secret_version_stage requests\r\n- prevent return values of secretsmanager backend to include unset fields as done by aws in a number of scenarios\r\n\r\n\r\nThis adds a number of tests adhering to aws's behaviour, in scenarios this pr offers fixes; in short:\r\nModified:\r\n- `test_create_and_update_secret`: added invalid secret id creation, added partial arn extraction for ids containing a dash at the end\r\n\r\nAdded:\r\n- `test_rotate_secret_with_lambda_2`: tests rotating a secret twice using aws's base rotation logic and checks correct exceptions are thrown on creation\r\n- `test_rotate_secret_lambda_invalid_arn`: tests rotation flags are not turned on if rotation starts with invalid lambda rotation arn\r\n- `test_invalid_secret_name`: tests the creation/retrieval/update of secrets with invalid SecretIds\r\n- `test_last_accessed_date`: tests the LastDateAccessed field is updated as expected in between retrievals of the secret\r\n- `test_last_updated_date`: tests the LastDateUpdated field is updated as expected in between updates of the secret\r\n- `test_update_secret_description`: tests the description is updated when instructed to do so\r\n- `test_update_secret_version_stages_return_type`: tests the return type of update_secret_version_stages requests is correct (following the patch)\r\n- `test_update_secret_version_stages_current_previous`: tests a scenario in which previously updating the secret with `AWSCURRENT` corrupted the secret's version stages\r\n- `test_update_secret_version_stages_current_pending`: tests a scenario in which previously updating the secret with `AWSPENDING` corrupted the secret's version stages\r\n- `test_update_secret_version_stages_current_pending_cycle`: tests a scenario in which previously updating the secret with `AWSPENDING` in a cycle from and to `AWSCURRENT` corrupted the secret's version stages\r\n- `test_update_secret_version_stages_current_pending_cycle_custom_stages_1`: tests a scenario in which previously updating the secret with `AWSPENDING` with versions carrying custom version stages corrupted the secret's version stages\r\n- `test_update_secret_version_stages_current_pending_cycle_custom_stages_2`: tests another cyclic scenario in which previously updating the secret with `AWSPENDING` and custom version stages corrupted the secret's version stages\r\n- `test_non_versioning_version_stages_replacement`: tests the updating of the secret's version stages with custom version stages in a fashion leading to complete replacement of the versions stages of some previous version (previously not supported)\r\n- `test_non_versioning_version_stages_no_replacement`: tests the updating of the secret's version stages with custom version stages in a fashion leading to a partial replacement of the versions stages of some previous version (previously not supported)\r\n- `test_http_update_secret_with_missing_client_request_token`: tests secret update requests programmatically not specifying a client_request_token (this wasn't tested before)  \r\n",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 69,
        "deletions": 3,
        "changed_files": 2,
        "created_at": "2022-03-10T11:12:19Z",
        "closed_at": "2022-03-10T23:25:13Z",
        "merged_at": null,
        "body": "Add test for Route53 moto dispatching. Trying to replicate an issue in local testing.",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-03-09T23:05:47Z",
        "closed_at": "2022-03-10T08:51:12Z",
        "merged_at": "2022-03-10T08:51:12Z",
        "body": "Minor fix in extracting error details from Lambda responses. Addresses:\r\n```\r\n...\r\n  File \"/opt/code/localstack/localstack/services/awslambda/lambda_api.py\", line 1831, in invoke_function\r\n    result = run_lambda(\r\n  File \"/opt/code/localstack/localstack/services/awslambda/lambda_api.py\", line 817, in run_lambda\r\n    response = json.loads(e.result)\r\n  File \"/usr/local/lib/python3.8/json/__init__.py\", line 341, in loads\r\n    raise TypeError(f'the JSON object must be str, bytes or bytearray, '\r\nTypeError: the JSON object must be str, bytes or bytearray, not NoneType\r\n```",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 97,
        "deletions": 2,
        "changed_files": 4,
        "created_at": "2022-03-09T18:16:25Z",
        "closed_at": "2022-04-04T20:21:11Z",
        "merged_at": "2022-04-04T20:21:11Z",
        "body": "# Issue\r\n\r\nAs pointed out by [ltarquinio](https://github.com/ltarquinio) on the issue [#4596](https://github.com/localstack/localstack/issues/4596) the lambda API is not currently returning errors when a zip file that has an uncompressed file size greater than 256mb is used as the code source.\r\n\r\n# Tests\r\nThis behavior can be reproduced using [this test](https://github.com/RodrigoATorres/localstack/blob/feature/lambda_unzip_max_size/tests/integration/awslambda/test_lambda_size_lims.py). When running against localstack, the test with the over-sized zip file does not pass. But it passes when running with TEST_TARGET=\"AWS_CLOUD\".\r\n\r\nWhat this test does is generate a python file with a size greater than the limit, compress it, save to s3, and try to create a lambda function using it. The lambda api should not allow the function to be created.\r\n\r\n# Fix\r\n\r\nTo fix the issue, a check on the unzipped code size was added to the \"do_set_function_code\" function. If size is greater than the limit, a exception is raised\r\n",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 4007,
        "deletions": 319,
        "changed_files": 8,
        "created_at": "2022-03-09T15:25:54Z",
        "closed_at": "2022-03-28T08:11:30Z",
        "merged_at": "2022-03-28T08:11:30Z",
        "body": null,
        "comments": 4
    },
    {
        "merged": true,
        "additions": 531,
        "deletions": 63,
        "changed_files": 6,
        "created_at": "2022-03-08T16:32:45Z",
        "closed_at": "2022-03-08T19:26:19Z",
        "merged_at": "2022-03-08T19:26:19Z",
        "body": null,
        "comments": 2
    },
    {
        "merged": true,
        "additions": 33,
        "deletions": 50,
        "changed_files": 4,
        "created_at": "2022-03-08T09:58:12Z",
        "closed_at": "2022-05-03T09:38:18Z",
        "merged_at": "2022-05-03T09:38:17Z",
        "body": "# Update LocalStack images & runtime to python 3.10\r\n\r\nThis PR makes couple of significant changes to the build pipeline in order to fully support python3.10 features over the build pipeline:\r\n* Usage of machine executors throughout the pipeline: In contrast to the current state, we now use machine executors for all steps of the pipeline, instead of just the steps needing docker. This is necessary due to the passing of the virtual environment from the install steps to later steps, and the difference in pathing between machine (using pyenv) and docker (installing in /usr/bin) images. Alternative would have been rebuilding the venv every time or trying to fix the venv paths for every job, which just begs for errors to occur.\r\n* Update of machine images: In order to use python 3.10.3 throughout the pipeline (and 3.10.4 in the docker image), I updated the machine images to ubuntu-2004:2022.04.1, which is available for both arm64 and amd64 machine executors (https://discuss.circleci.com/t/ubuntu-linux-vm-machine-images-2022-april-q2-update/43749).\r\n* In order to make future updating of machine images simpler, they are now defined as pipeline parameter on top of the config.yml file (split between amd64 and arm64, if different image versions should be necessary at some point, as was in the past), as well as the amd64 machine executor.\r\n* Updating docker is not necessary anymore, due to the updated images.\r\n* Adds python 3.10 as classifier in setup.cfg.\r\n\r\nOther changes:\r\n* Update dockerfile for python 3.10.4 (to include fixes also made by #5856 )\r\n* Update tests against pro for python 3.10 ",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 11,
        "deletions": 3,
        "changed_files": 3,
        "created_at": "2022-03-07T16:53:15Z",
        "closed_at": "2022-03-09T10:00:59Z",
        "merged_at": "2022-03-09T10:00:59Z",
        "body": "Fixes #4651\r\n\r\n\r\nShould now correctly return a json response when an uncaught exception is thrown during the handler execution.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 61,
        "deletions": 14,
        "changed_files": 1,
        "created_at": "2022-03-07T12:25:08Z",
        "closed_at": "2022-03-09T15:23:42Z",
        "merged_at": "2022-03-09T15:23:42Z",
        "body": "Some extensions for CODEOWNERS file.\r\n\r\nTrying out if the reviewers work",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 5,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2022-03-07T12:01:29Z",
        "closed_at": "2022-03-07T15:21:40Z",
        "merged_at": "2022-03-07T15:21:40Z",
        "body": "Extract cookies from headers.\r\n\r\nRelates with https://github.com/localstack/localstack-ext/pull/419\r\n\r\nAddresses https://github.com/localstack/localstack/issues/5621",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2022-03-07T11:14:48Z",
        "closed_at": "2022-03-07T12:41:06Z",
        "merged_at": "2022-03-07T12:41:06Z",
        "body": "Bump moto-ext to latest version 3.0.5 (should hopefully fix builds on `master`).",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 627,
        "deletions": 418,
        "changed_files": 6,
        "created_at": "2022-03-07T10:18:17Z",
        "closed_at": "2022-03-07T19:16:14Z",
        "merged_at": "2022-03-07T19:16:14Z",
        "body": "Add DynamoDB Streams integration for PartiQL query updates. Addresses #5445\r\n\r\n* Add a handler/interceptor for `ExecuteStatement` API calls - these are [PartiQL queries](https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/ql-reference.statements.html) that potentially update the items in a table (via INSERT/UDPATE/DELETE queries). \r\n* The approach takes a snapshot of all table items prior to a PartiQL update operation, and compares them with the table items after the update. This will obviously have quite a performance impact for large tables, but seems to be the only viable option at this stage (as we're using the DynamoDB Local backend as a black box). Added a note to the code that this should be potentially be improved by hooking an update listener mechanism into the DynamoDB Local backend. However, given that this new code path is only executed if users are using DynamoDB Streams in combination with PartiQL update queries, the performance/simplicity tradeoff is probably acceptable for now (i.e., will only affect a very small subset of users). \r\n* Add a few smaller refactorings, start grouping util functions into logical groups/classes. This is only a first step - DynamoDB needs a _significant_ overhaul, which we'll tackle as part of the ASF migration (following soon).\r\n* Migrate tests to `pytest`\r\n\r\n\r\nNote: highlighted the 3 part with the main changes, for easier review.",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 152,
        "deletions": 3724,
        "changed_files": 11,
        "created_at": "2022-03-07T05:05:58Z",
        "closed_at": "2022-03-07T14:36:12Z",
        "merged_at": "2022-03-07T14:36:11Z",
        "body": "# \ud83d\ude80 ASF Update Report \ud83d\ude80\nThis PR has been automatically generated to update the generated API stubs for our ASF services.\nIt uses the latest code-generator from the _master_ branch ([scaffold.py](https://github.com/localstack/localstack/blob/master/localstack/aws/scaffold.py)) and the latest _published_ version of [botocore](https://github.com/boto/botocore) to re-generate all API stubs which are already present in the `localstack.aws.api` module of the _master_ branch.\n\n## \ud83d\udd04 Updated Services\nThis PR updates the following services:\n- cloudwatch\n- config\n- es\n- firehose\n- opensearch\n- redshift\n- resourcegroupstaggingapi\n- sqs\n- ssm\n- support\n- swf\n\n## \ud83d\udc77\ud83c\udffd Handle this PR\nThe following options describe how to interact with this PR / the auto-update:\n\n\u2714\ufe0f **Accept Changes**\nIf the changes are satisfying, just squash-merge the PR and delete the source branch.\n\n\ud83d\udeab **Ignore Changes**\nIf you want to ignore the changes in this PR, just close the PR and *do not delete* the source branch. The PR will not be opened and a new PR will not be created for as long as the generated code does not change (or the branch is deleted). As soon as there are new changes, a new PR will be created.\n\n\u270f\ufe0f **Adapt Changes**\n*Don't do this.* The APIs are auto-generated. If you decide that the APIs should look different, you have to change the code-generation.\n\n\u23f8\ufe0f **Pause Updates**\nRemove the cron-schedule trigger of the GitHub Action workflow which creates these PRs. The action can then still be triggered manually, but it will not be executed automatically.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2022-03-07T00:24:39Z",
        "closed_at": "2022-03-07T08:31:57Z",
        "merged_at": "2022-03-07T08:31:57Z",
        "body": "[![WhiteSource Renovate](https://app.renovatebot.com/images/banner.svg)](https://renovatebot.com)\n\nThis PR contains the following updates:\n\n| Package | Type | Update | Change |\n|---|---|---|---|\n| python | stage | digest | `0ac2a12` -> `269c3ac` |\n\n---\n\n### Configuration\n\n\ud83d\udcc5 **Schedule**: \"before 3am on Monday\" (UTC).\n\n\ud83d\udea6 **Automerge**: Disabled by config. Please merge this manually once you are satisfied.\n\n\u267b **Rebasing**: Whenever PR becomes conflicted, or you tick the rebase/retry checkbox.\n\n\ud83d\udd15 **Ignore**: Close this PR and you won't be reminded about this update again.\n\n---\n\n - [ ] <!-- rebase-check -->If you want to rebase/retry this PR, click this checkbox.\n\n---\n\nThis PR has been generated by [WhiteSource Renovate](https://renovate.whitesourcesoftware.com). View repository job log [here](https://app.renovatebot.com/dashboard#github/localstack/localstack).",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 677,
        "deletions": 359,
        "changed_files": 10,
        "created_at": "2022-03-06T08:11:15Z",
        "closed_at": "2022-03-10T10:35:34Z",
        "merged_at": "2022-03-10T10:35:34Z",
        "body": "This PR is mostly an effort to normalise request templates and response templates:\r\n\r\n* Adds two new classes to handle templating, `RequestTemplates` and `ResponseTemplates`. Adds some logging similar to AWS transformations and creates the namespace only with `variables`.\r\n* Adds a new class `VtlTemplate` and nests two existing classes `VelocityUtil` and `VelocityInput`. Fixes the namespace creation that will make it possible to handle AWS template mapping features. \r\n\r\nYet to finish on another PR:\r\n- Migrate all integrations (SNS, etc..) to the new request/response templates. Lacking testing on those integrations made me think that we should increase coverage before making these changes.\r\n\r\nFixes https://github.com/localstack/localstack/issues/5587\r\n\r\nRelates with https://github.com/localstack/localstack-ext/pull/417\r\n\r\nTested with apigateway v1 examples from https://github.com/localstack/localstack-terraform-samples",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 73,
        "deletions": 16,
        "changed_files": 3,
        "created_at": "2022-03-05T21:51:14Z",
        "closed_at": "2022-03-05T23:13:39Z",
        "merged_at": "2022-03-05T23:13:39Z",
        "body": "Add ability to specify request timeout and max content length for HTTP server. Preparation for a fix for #5598",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 78,
        "deletions": 54,
        "changed_files": 8,
        "created_at": "2022-03-05T18:47:01Z",
        "closed_at": "2022-03-05T22:15:07Z",
        "merged_at": "2022-03-05T22:15:06Z",
        "body": "This PR is a follow up to #5615 that targets the CLI startup performance. Particularly it addresses two things in config and constants (two modules that are *always* imported):\r\n\r\n* `config.py`: checking whether docker is available was done via a `docker ps` subprocess call. that takes about ~250ms on my machine. replacing that with `shutil.which('docker')` reduces that to only 10ms.\r\n* `constants.py`: the patching of `MOTO_ACCOUNT_ID` requires importing moto. however the CLI doesn't really need moto unless we start the infra in host mode. that takes another ~300ms, which we can skip in certain circumstances. so i added a simple env var switch for now.R",
        "comments": 5
    },
    {
        "merged": true,
        "additions": 59,
        "deletions": 51,
        "changed_files": 15,
        "created_at": "2022-03-05T15:18:23Z",
        "closed_at": "2022-03-05T18:45:10Z",
        "merged_at": "2022-03-05T18:45:10Z",
        "body": "This PR removes the boto3 dependency of config.py, and removes the dependency to `common.INFRA_READY`, as well as a dependency from various packages to `utils.testutil`.\r\n\r\nThis is in preparation for the standalone cli package, to remove the runtime dependency to boto",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 6583,
        "deletions": 376,
        "changed_files": 8,
        "created_at": "2022-03-05T14:57:15Z",
        "closed_at": "2022-06-30T08:27:35Z",
        "merged_at": null,
        "body": null,
        "comments": 2
    },
    {
        "merged": true,
        "additions": 187,
        "deletions": 213,
        "changed_files": 45,
        "created_at": "2022-03-05T13:15:28Z",
        "closed_at": "2022-03-05T14:58:25Z",
        "merged_at": "2022-03-05T14:58:25Z",
        "body": "Simply removes `localstack.utils.common` where possible in `utils` and `services` packages\r\n\r\nI think you can see the drawback of splitting up the `common` monolith here, as it creates a lot more lines of import statements. one think to maybe think about is to do imports differently on utils code. so instead of writing\r\n```python\r\nfrom localstack.utils.files import rm_rf, cp_r, ...\r\nrm_rf(...)\r\n```\r\nwrite\r\n```python\r\nfrom localstack.utils import files\r\nfiles.rm_rf(...)\r\n...\r\n```\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 5,
        "deletions": 7,
        "changed_files": 2,
        "created_at": "2022-03-04T21:27:19Z",
        "closed_at": "2022-03-04T23:50:49Z",
        "merged_at": "2022-03-04T23:50:49Z",
        "body": "This PR is a fix for the recently introduce persistence changes in ext. The `data_root` would be empty, despite the fact that `PERSIST_ALL` is set to `True`. The `if data_root not None` check would not capture that, so we introduce a falsyness check instead of a `not None`.\r\n\r\nThe apigateway change is just a minor fix that removes a warning when generating the plugins.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 11,
        "deletions": 10,
        "changed_files": 3,
        "created_at": "2022-03-04T20:19:01Z",
        "closed_at": "2022-03-04T21:54:23Z",
        "merged_at": "2022-03-04T21:54:23Z",
        "body": "* minor change to allow extracting `.tgz` archives via `download_and_extract` utility.\r\n* add a few more commands to Pro smoke tests",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 31903,
        "deletions": 390,
        "changed_files": 6,
        "created_at": "2022-03-04T14:24:59Z",
        "closed_at": "2022-03-21T20:46:13Z",
        "merged_at": "2022-03-21T20:46:13Z",
        "body": "### Summary\r\n\r\nThis PR ports community EC2 provider to ASF",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 114,
        "deletions": 156,
        "changed_files": 9,
        "created_at": "2022-03-04T11:56:28Z",
        "closed_at": "2022-03-04T16:41:11Z",
        "merged_at": "2022-03-04T16:41:11Z",
        "body": "This PR contains the migration from our `requirements.txt` and `setup.py` (which performed some parsing logic of the requirements file) to use a `setup.cfg` (and a minimal `setup.py`).\r\n- All requirements have been migrated to the `setup.cfg`. Extras and all the semantics stay the same.\r\n- The pipelines which use the requirements file to calculate the hash key have been refactored.\r\n- The entrypoints are now not being explicitly defined. They are already correctly generated and set by `plux`. The entrypoint make target has been adapted to use the new `plugin` command.\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 280,
        "deletions": 61,
        "changed_files": 7,
        "created_at": "2022-03-04T10:06:32Z",
        "closed_at": "2022-03-04T18:59:08Z",
        "merged_at": "2022-03-04T18:59:08Z",
        "body": "After https://github.com/localstack/localstack/pull/5488, https://github.com/localstack/localstack/pull/5470, https://github.com/localstack/localstack/pull/5512, and https://github.com/localstack/localstack/pull/5567, this is the fifth round of fixes for the scaffold, parsers, and serializers of ASF.\r\nThis PR contains the following changes:\r\n- fix error handling in parser and serializer\r\n  - Introduces a clear exception handling for the parsers and the serializers. They either raise an exception which clearly states that the input data is invalid (a protocol error) or that an unknown error occurred.\r\n- fix formatting of generated code in scaffold\r\n  - Fixes the code which is generated by the scaffold such that it passes our linting.\r\n  - Adds \"Optional\" to the list of keywords to fix generated APIs which define a shape called \"Optional\".\r\n  - This will fix https://github.com/localstack/localstack/pull/5600.\r\n- fix scaffolding for types names which are not valid python names\r\n  - Fixes the code generation for shape names which are not valid python types (f.e. Kafka with shapes that have a double-underscore prefix).",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 351,
        "deletions": 3689,
        "changed_files": 13,
        "created_at": "2022-03-03T12:31:59Z",
        "closed_at": "2022-03-04T18:59:08Z",
        "merged_at": null,
        "body": "# \ud83d\ude80 ASF Update Report \ud83d\ude80\nThis PR has been automatically generated to update the generated API stubs for our ASF services.\nIt uses the latest code-generator from the _master_ branch ([scaffold.py](https://github.com/localstack/localstack/blob/master/localstack/aws/scaffold.py)) and the latest _published_ version of [botocore](https://github.com/boto/botocore) to re-generate all API stubs which are already present in the `localstack.aws.api` module of the _master_ branch.\n\n## \ud83d\udd04 Updated Services\nThis PR updates the following services:\n- acm\n- cloudwatch\n- config\n- dynamodbstreams\n- es\n- firehose\n- opensearch\n- redshift\n- resourcegroupstaggingapi\n- sqs\n- ssm\n- support\n- swf\n\n## \ud83d\udc77\ud83c\udffd Handle this PR\nThe following options describe how to interact with this PR / the auto-update:\n\n\u2714\ufe0f **Accept Changes**\nIf the changes are satisfying, just squash-merge the PR and delete the source branch.\n\n\ud83d\udeab **Ignore Changes**\nIf you want to ignore the changes in this PR, just close the PR and *do not delete* the source branch. The PR will not be opened and a new PR will not be created for as long as the generated code does not change (or the branch is deleted). As soon as there are new changes, a new PR will be created.\n\n\u270f\ufe0f **Adapt Changes**\n*Don't do this.* The APIs are auto-generated. If you decide that the APIs should look different, you have to change the code-generation.\n\n\u23f8\ufe0f **Pause Updates**\nRemove the cron-schedule trigger of the GitHub Action workflow which creates these PRs. The action can then still be triggered manually, but it will not be executed automatically.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 173,
        "deletions": 24,
        "changed_files": 3,
        "created_at": "2022-03-02T08:50:21Z",
        "closed_at": "2022-03-03T11:38:16Z",
        "merged_at": "2022-03-03T11:38:16Z",
        "body": "This PR adds a GitHub action to repeatedly check for changes in the botocore specification of AWS services and re-generate all API stubs which are already present in `localstack.aws.api`. Should changes be detected, a PR with the contents of `.github/bot_templates/ASF_UPGRADE_PR.md` is created, which can be acted upon in the following ways:\r\n\r\n- The changes can be *accepted* by just squash-merging the PR and deleting the source branch.\r\n- The changes can be *ignored* by closing the PR and *not deleting* the source branch. This is necessary, so that the action doesn't constantly create the same PR of changes that are ignored. The next PR will then happen when new, unseen changes are present.\r\n\r\nChanges directly to the PR are not recommended as they'd soon be followed by a new PR from the bot which undos them. ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 4,
        "changed_files": 4,
        "created_at": "2022-03-01T19:03:44Z",
        "closed_at": "2022-03-01T22:38:01Z",
        "merged_at": "2022-03-01T22:38:01Z",
        "body": "This is in preparation for using the new plugin discovery mechanism introduced with plux 1.3.0, and also to phase out localstack-plugin-loader in favor of plux",
        "comments": 6
    },
    {
        "merged": true,
        "additions": 127,
        "deletions": 16,
        "changed_files": 3,
        "created_at": "2022-03-01T12:02:20Z",
        "closed_at": "2022-03-01T13:56:51Z",
        "merged_at": "2022-03-01T13:56:51Z",
        "body": "* add support for `#define` function in API Gateway velocity templates. Addresses https://github.com/localstack/localstack/issues/5587\r\n* migrate tests to `pytest`\r\n\r\nNote: some of the logic can be removed once this PR is merged/released: https://github.com/purcell/airspeed/pull/56",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 15,
        "deletions": 0,
        "changed_files": 4,
        "created_at": "2022-03-01T07:34:19Z",
        "closed_at": "2022-03-02T20:21:46Z",
        "merged_at": "2022-03-02T20:21:46Z",
        "body": "### Summary\r\n\r\nUpdates the `exec_in_container` helper for Docker client to accept working directory.",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 81,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2022-02-28T18:16:41Z",
        "closed_at": "2022-03-01T08:59:24Z",
        "merged_at": "2022-03-01T08:59:24Z",
        "body": "## Description\r\n\r\nThis PR:\r\n\r\n- Adds a GHA workflow to track first-time pull requests and issue creators\r\n- Directs issue creators towards Slack workspace and Pro support bot \r\n- Directs issue creators and pull request creators to community guidelines, code of conduct and develop guide",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 10,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2022-02-28T10:27:33Z",
        "closed_at": "2022-02-28T13:20:35Z",
        "merged_at": "2022-02-28T13:20:35Z",
        "body": "Currently the ASF scaffold only formats the file with black. Often there still is the problem that the imports are unsorted or contain packages which are unused (notably datetime). By adding autoflake and isort to the formatting section of scaffold these problems and future problems adding new imports are resolved.\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2022-02-28T01:19:51Z",
        "closed_at": "2022-02-28T07:42:01Z",
        "merged_at": "2022-02-28T07:42:01Z",
        "body": "[![WhiteSource Renovate](https://app.renovatebot.com/images/banner.svg)](https://renovatebot.com)\n\nThis PR contains the following updates:\n\n| Package | Type | Update | Change |\n|---|---|---|---|\n| python | stage | digest | `0ac2a12` -> `ec68434` |\n\n---\n\n### Configuration\n\n\ud83d\udcc5 **Schedule**: \"before 3am on Monday\" (UTC).\n\n\ud83d\udea6 **Automerge**: Disabled by config. Please merge this manually once you are satisfied.\n\n\u267b **Rebasing**: Whenever PR becomes conflicted, or you tick the rebase/retry checkbox.\n\n\ud83d\udd15 **Ignore**: Close this PR and you won't be reminded about this update again.\n\n---\n\n - [ ] <!-- rebase-check -->If you want to rebase/retry this PR, click this checkbox.\n\n---\n\nThis PR has been generated by [WhiteSource Renovate](https://renovate.whitesourcesoftware.com). View repository job log [here](https://app.renovatebot.com/dashboard#github/localstack/localstack).",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 670,
        "deletions": 3,
        "changed_files": 6,
        "created_at": "2022-02-27T20:59:25Z",
        "closed_at": "2022-06-30T08:35:44Z",
        "merged_at": null,
        "body": "This is an experimental PR that enables mocked responses for any AWS service. The framework can generate random instances of AWS shapes, including requests and responses. This can be used for generating random but valid responses for services that have not been implemented.\r\nAdditionally, it can be used to generate test cases for both parser and serializer. Using randomly generated requests, I was able to somewhat generalize the logic that determines the AWS service from the request.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 75,
        "deletions": 19,
        "changed_files": 5,
        "created_at": "2022-02-26T12:00:39Z",
        "closed_at": "2022-02-28T21:16:08Z",
        "merged_at": "2022-02-28T21:16:08Z",
        "body": "This allow us to define multiple capabilities to drop/add when creating a container.\r\n\r\nAlso, the capability behavior is now tested, and docker intermediate containers will automatically be removed when building with the SDK client.\r\n\r\nThis PR paves the way for solution of #5468 .",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 8,
        "deletions": 5,
        "changed_files": 1,
        "created_at": "2022-02-25T18:13:13Z",
        "closed_at": "2022-02-26T09:22:09Z",
        "merged_at": "2022-02-26T09:22:09Z",
        "body": "Wrap output file writer with a try-catch and encode stderr to bytes.\r\n\r\nResolves https://github.com/localstack/localstack/issues/5456",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 25,
        "deletions": 4,
        "changed_files": 3,
        "created_at": "2022-02-25T18:06:11Z",
        "closed_at": "2022-02-25T19:55:48Z",
        "merged_at": "2022-02-25T19:55:48Z",
        "body": "* addresses what we are seeing in #5456 \r\n```\r\nlocalstack  | 2022-02-25T17:20:57.061:ERROR:localstack.aws.protocol.serializer: Response object contains a member which is not specified: ResponseMetadata\r\nlocalstack  | Traceback (most recent call last):\r\nlocalstack  |   File \"/opt/code/localstack/localstack/aws/protocol/serializer.py\", line 903, in _serialize_type_structure\r\nlocalstack  |     member_shape = members[member_key]\r\nlocalstack  | KeyError: 'ResponseMetadata'\r\nlocalstack  | {\r\nlocalstack  |     \"Version\": 1\r\nlocalstack  | }\r\n```\r\n\r\nsince `response` contained the `ResponseMetadata` object as expected, from the botocore response parser, the subsequent ASF serialization process of `call_moto` calls would raise this error if you didn't explicitly remove the attribute. the regular way was to do th efollowing in ASF handlers which arguably is a bit silly.\r\n```python\r\ndef do_a_thing(context: RequestContext, ...):\r\n\tresponse = moto.call_moto(context)\r\n\r\n\tdel response['ResponseMetadata']\r\n\r\n\treturn response\r\n```\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 45,
        "deletions": 5,
        "changed_files": 3,
        "created_at": "2022-02-25T15:35:28Z",
        "closed_at": "2022-03-02T16:00:33Z",
        "merged_at": "2022-03-02T16:00:33Z",
        "body": "I've been trying to introduce a new `BaseConverter` to match an arbitrary regex for custom endpoints. Need some direction from @thrau \ud83d\ude07 ",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 25,
        "deletions": 32,
        "changed_files": 2,
        "created_at": "2022-02-24T19:00:09Z",
        "closed_at": "2022-03-04T21:56:37Z",
        "merged_at": "2022-03-04T21:56:36Z",
        "body": "This PR addresses the changes suggested in #5503. \r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 2050,
        "deletions": 0,
        "changed_files": 7,
        "created_at": "2022-02-24T18:21:43Z",
        "closed_at": "2022-03-20T14:43:00Z",
        "merged_at": "2022-03-20T14:43:00Z",
        "body": "This PR addresses #5168, where the user tries to create a resource using Terraform but the service it needs isn't available. Thankfully Moto already provides partially the service, at least enough so the user can create the resource he wants.\r\n\r\nChanges:\r\n- Edge now detects if an S3 request is in reality for the S3control service.\r\n- Starting of the S3control service.\r\n- Addition of tests for the PublicAccessBlock lifecycle and some validations.\r\n\r\nFor this PR to work correctly it should be merged after spulec/moto#4885 has been integrated.",
        "comments": 6
    },
    {
        "merged": true,
        "additions": 56,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2022-02-24T17:42:25Z",
        "closed_at": "2022-02-28T11:49:48Z",
        "merged_at": "2022-02-28T11:49:48Z",
        "body": "Add support to MOCK response templates to apigateway. We need to apply the same mechanics to all integrations, however this PR only handles for MOCK integrations.\r\n\r\nFixes https://github.com/localstack/localstack/issues/5546",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 228,
        "deletions": 75,
        "changed_files": 5,
        "created_at": "2022-02-24T16:01:29Z",
        "closed_at": "2022-02-25T16:20:15Z",
        "merged_at": "2022-02-25T16:20:15Z",
        "body": "After https://github.com/localstack/localstack/pull/5488, https://github.com/localstack/localstack/pull/5470, and https://github.com/localstack/localstack/pull/5512, this is the fourth round of fixes for the parsers and serializers of ASF.\r\nThis PR contains the following changes:\r\n- fix EC2 serialization when root node is empty\r\n  - Fixes the serialization of empty EC2 responses.\r\n- fix json protocol datetime serialization\r\n  - Fixes the datetime serialization for JSON body parameters (by avoiding an unnecessary rounding).\r\n- fix rest-xml protocol header datetime serialization\r\n  - The datetime serialization of header fields according to RFC822.\r\n- fix query protocol parsing of non-flattened list of maps\r\n  - Non-flattened list prefixes are defined by their member's name. Only as a fallback \"member.\" should be used as a prefix.\r\n- fix copying params in serializer\r\n  - Avoids the expensive deep-copy of the response params dict by implementing a partitioning to circumvent the method parameter manipulation.\r\n- fix serialize header params for HEAD responses in rest protocols\r\n  - HEAD responses should not contain a body (and setting a body could manipulate header fields).\r\n- fix xml error serialization with \"Sender\" fault\r\n  - Fixes the XML member name of the \"fault\" property of errors.\r\n- fix error shape lookup within the serializer\r\n  - Some operation specs do not define all the exceptions which can be raised. This fix - as a fallback - widens the lookup to all error shapes within the service.\r\n- fix rest statuscode location serialization\r\n  - Location \"statuscode\" is now handled again for rest-* protocols\r\n- fix None exception message serialization for rest protocols\r\n  - Some exceptions might not contain a message (even though they should). This fix now makes sure that if there is no message, it also doesn't serialize the field.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1291,
        "deletions": 169,
        "changed_files": 7,
        "created_at": "2022-02-24T06:39:46Z",
        "closed_at": "2022-03-10T10:36:18Z",
        "merged_at": "2022-03-10T10:36:18Z",
        "body": null,
        "comments": 1
    },
    {
        "merged": false,
        "additions": 20,
        "deletions": 7,
        "changed_files": 5,
        "created_at": "2022-02-23T23:59:31Z",
        "closed_at": "2022-06-30T07:56:39Z",
        "merged_at": null,
        "body": "We're currently only checking if the message attribute names contains the keyword \"All\". But the documentation for ReceiveMessage says, \"When using ReceiveMessage, you can send a list of attribute names to receive, or you can return all of the attributes by specifying All or .* in your request.\" https://docs.aws.amazon.com/AWSSimpleQueueService/latest/APIReference/API_ReceiveMessage.html",
        "comments": 7
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 31,
        "changed_files": 2,
        "created_at": "2022-02-23T19:00:35Z",
        "closed_at": "2022-02-23T21:38:26Z",
        "merged_at": "2022-02-23T21:38:26Z",
        "body": "This PR upgrades `airspeed` to the latest version and removes previous custom patches.\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 77,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2022-02-23T13:00:02Z",
        "closed_at": "2022-02-23T19:26:13Z",
        "merged_at": "2022-02-23T19:26:12Z",
        "body": "This PR fixes an encoding issue for the `AlarmDescription` set with the `put-metric-alarm` for cloudwatch.\r\n\r\nhttps://github.com/localstack/localstack/issues/5489\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 327,
        "deletions": 45,
        "changed_files": 5,
        "created_at": "2022-02-23T07:04:15Z",
        "closed_at": "2022-03-02T05:34:12Z",
        "merged_at": "2022-03-02T05:34:12Z",
        "body": null,
        "comments": 2
    },
    {
        "merged": true,
        "additions": 5,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2022-02-22T23:11:18Z",
        "closed_at": "2022-02-23T00:52:43Z",
        "merged_at": "2022-02-23T00:52:43Z",
        "body": "Simply pulls out the environment variable into a config var. This will then be used in localstack-ext as well to skip the SSL cert downloading. This is a prerequisite for #5502 \r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 36,
        "deletions": 1,
        "changed_files": 4,
        "created_at": "2022-02-22T16:08:36Z",
        "closed_at": "2022-02-23T09:59:04Z",
        "merged_at": "2022-02-23T09:59:04Z",
        "body": "### Summary\r\n\r\nAdds helpers for:\r\n- Unpausing a previously paused container\r\n- ~~Creating a tag for an image~~\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 119,
        "deletions": 5,
        "changed_files": 4,
        "created_at": "2022-02-22T15:30:46Z",
        "closed_at": "2022-04-01T07:50:12Z",
        "merged_at": "2022-04-01T07:50:12Z",
        "body": "Fixes #5497\r\n",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 144,
        "deletions": 3,
        "changed_files": 4,
        "created_at": "2022-02-22T13:14:22Z",
        "closed_at": "2022-02-22T17:52:11Z",
        "merged_at": "2022-02-22T17:52:11Z",
        "body": "Add ability to tag and push images using our Docker clients (helps in removing the dependency to `docker` binary in our tests).\r\n\r\nThe test contains a few examples of invalid pushes (access denied, connection refused), however no actual successful pushes are added, to avoid spamming the registry with data. (We could consider spinning up a local registry at some point, but seemed too much overhead at this stage.)",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 28,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2022-02-22T12:30:03Z",
        "closed_at": "2022-02-22T17:41:15Z",
        "merged_at": "2022-02-22T17:41:15Z",
        "body": "In instances where the result of API calls needs to split up into body and header fields, the result given by the handlers is edited in place. This can lead to unwanted mutations which affect the service state. By using a deep copy of the result for serialization this can easily be avoided.",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 77,
        "deletions": 2,
        "changed_files": 4,
        "created_at": "2022-02-22T08:55:34Z",
        "closed_at": "2022-02-22T10:21:00Z",
        "merged_at": "2022-02-22T10:21:00Z",
        "body": "Add ability to build images using Docker client (both Cmd and Sdk client).",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 709,
        "deletions": 70,
        "changed_files": 1,
        "created_at": "2022-02-22T08:37:14Z",
        "closed_at": "2022-02-28T19:03:14Z",
        "merged_at": "2022-02-28T19:03:14Z",
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 6694,
        "deletions": 172,
        "changed_files": 5,
        "created_at": "2022-02-22T08:11:42Z",
        "closed_at": "2022-02-22T17:54:52Z",
        "merged_at": "2022-02-22T17:54:52Z",
        "body": null,
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-02-21T21:38:36Z",
        "closed_at": "2022-02-21T22:50:58Z",
        "merged_at": "2022-02-21T22:50:58Z",
        "body": "Bump version of moto-ext to 3.0.4",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 219,
        "deletions": 5,
        "changed_files": 5,
        "created_at": "2022-02-21T19:09:05Z",
        "closed_at": "2022-02-22T19:22:15Z",
        "merged_at": "2022-02-22T19:22:15Z",
        "body": "This PR adds an enpoint `/_localstack/daignose` that prints various diagnostic data about localstack that will help with user support. Here is some example output: [diagnostics.txt](https://github.com/localstack/localstack/files/8111599/diagnostics.txt)\r\n\r\nTo test, first check out the branch, and run `bin/docker-run.sh make infra` in localstack-ext.  Then call `curl localhost:4566/_localstack/diagnose`\r\n\r\n\r\n\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-02-21T13:50:10Z",
        "closed_at": "2022-02-21T16:36:47Z",
        "merged_at": "2022-02-21T16:36:47Z",
        "body": "This PR adds the `Dockerfile.rh` to the `ignoredPaths` in the config of RenovateBot.\r\nAfter this PR is merged, Renovate should close the PR it created to pin the sha on the base image automatically (https://github.com/localstack/localstack/pull/5533).",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 43,
        "deletions": 0,
        "changed_files": 4,
        "created_at": "2022-02-21T09:13:12Z",
        "closed_at": "2022-02-21T11:43:52Z",
        "merged_at": "2022-02-21T11:43:52Z",
        "body": "### Summary\r\n\r\nAdds a helper to pause containers to the Docker client.\r\n\r\n### Tests\r\n\r\nIncludes integration tests.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 518,
        "deletions": 7,
        "changed_files": 4,
        "created_at": "2022-02-21T07:42:43Z",
        "closed_at": "2022-02-21T17:40:49Z",
        "merged_at": "2022-02-21T17:40:49Z",
        "body": null,
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1798,
        "deletions": 20,
        "changed_files": 4,
        "created_at": "2022-02-21T07:33:01Z",
        "closed_at": "2022-02-28T13:40:39Z",
        "merged_at": "2022-02-28T13:40:39Z",
        "body": null,
        "comments": 2
    },
    {
        "merged": false,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-02-21T00:33:11Z",
        "closed_at": "2022-02-21T16:37:06Z",
        "merged_at": null,
        "body": "[![WhiteSource Renovate](https://app.renovatebot.com/images/banner.svg)](https://renovatebot.com)\n\nThis PR contains the following updates:\n\n| Package | Type | Update | Change |\n|---|---|---|---|\n| redhat/ubi8 | final | pin | `` -> `` |\n\n\ud83d\udccc **Important**: Renovate will wait until you have merged this Pin PR before creating any *upgrade* PRs for the affected packages. Add the preset `:preserveSemverRanges` to your config if you instead don't wish to pin dependencies.\n\n---\n\n### Configuration\n\n\ud83d\udcc5 **Schedule**: \"before 3am on Monday\" (UTC).\n\n\ud83d\udea6 **Automerge**: Disabled by config. Please merge this manually once you are satisfied.\n\n\u267b **Rebasing**: Whenever PR is behind base branch, or you tick the rebase/retry checkbox.\n\n\ud83d\udd15 **Ignore**: Close this PR and you won't be reminded about this update again.\n\n---\n\n - [ ] <!-- rebase-check -->If you want to rebase/retry this PR, click this checkbox.\n\n---\n\nThis PR has been generated by [WhiteSource Renovate](https://renovate.whitesourcesoftware.com). View repository job log [here](https://app.renovatebot.com/dashboard#github/localstack/localstack).",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2982,
        "deletions": 2778,
        "changed_files": 42,
        "created_at": "2022-02-20T15:54:28Z",
        "closed_at": "2022-02-23T09:54:15Z",
        "merged_at": "2022-02-23T09:54:14Z",
        "body": "This PR unifies the various locations of utility modules and methods into `localstack.utils.<topic>.py`\r\n* fixes #5518\r\n* leaves deprecations in old locations (update in follow up)\r\n* the only notable change beyond moving/removing unused stuff i made was 0b2e6d17767a9eaac13f321539fe5532bb4f90d4\r\n\r\nAfter this is merged, there are two more steps to finalize the refactoring:\r\n* organize unit tests according to the new structure\r\n* refactor all import statements so we can safely remove the imports of common.py and the other generic util files.\r\n\r\n## TODO:\r\n`localstack.utils`\r\n- [x] `.archives` uiltities to deal with zip, tar, and other archive files\r\n- [x] `.asyncio` async-based concurrency tools (like async bridges)\r\n- [x] `.collections` operations on collection data structures (dicts, list, ...)\r\n- [x] `.crypto` cryptography utilities, e.g,, to create SSL certs\r\n- [X] `.files` file system operations\r\n- [x] `.functions` higher-order functional tools\r\n- [x] `.json` additional json uiltities\r\n- [x] `.net` lower-level network utilities\r\n- [x] `.numbers` operations on number types\r\n- [x] `.objects` uiltities to inspect and manipulate python objects\r\n- [x] `.platform` tools to inspect the platform (extends pythons `platform` with additional utils)\r\n- [x] `.run` tools for running system/shell commands\r\n- [x] `.strings` functions to manipulate and analyze strings\r\n- [x] `.sync` synchronization tools (wait, poll, locking, ...)\r\n- [x] `.threads` thread-based concurrency tools\r\n- [x] `.time`date and time manipulation/formatting tools\r\n- [x] `.urls` various utilities for URL manipulation\r\n- [x] `.xml` xml uiltities\r\n- [x] cleanup",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 0,
        "deletions": 8,
        "changed_files": 1,
        "created_at": "2022-02-20T15:15:27Z",
        "closed_at": "2022-02-21T12:26:05Z",
        "merged_at": "2022-02-21T12:26:05Z",
        "body": "Remove obsolete `docker` client binary from the image - no longer required, as we're now using `SdkDockerClient` by default. Should save another ~58MB (uncompressed) size in the final image.\r\n\r\nFor users depending on having the `docker` command available for their startup/init scripts (which should rarely be the case), you can install the apt package as part of a startup script in `/docker-entrypoint-initaws.d/...`:\r\n```\r\napt install -y docker\r\n```",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 0,
        "deletions": 17,
        "changed_files": 1,
        "created_at": "2022-02-20T14:51:05Z",
        "closed_at": "2022-02-20T18:07:38Z",
        "merged_at": "2022-02-20T18:07:38Z",
        "body": "removes the old and obsolete CLI file",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-02-20T12:19:04Z",
        "closed_at": "2022-02-21T13:39:32Z",
        "merged_at": "2022-02-21T13:39:32Z",
        "body": null,
        "comments": 2
    },
    {
        "merged": true,
        "additions": 19,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2022-02-20T12:12:28Z",
        "closed_at": "2022-02-22T13:37:00Z",
        "merged_at": "2022-02-22T13:37:00Z",
        "body": "Small PR that checks a fifo queue creation. AWS requires both the name of the queue ending with `.fifo` and the attribute `{FifoQueue: true}` to be present. \r\nAn error should be raised if the attribute is not present and the name ends with `.fifo` (normal queues do not allow the `.` char). The ASF provider already implements this check.",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-02-19T17:49:37Z",
        "closed_at": "2022-02-20T14:02:43Z",
        "merged_at": null,
        "body": "testing the effect of tweaking retry parameters on test runtime",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 6,
        "deletions": 5,
        "changed_files": 2,
        "created_at": "2022-02-19T16:52:34Z",
        "closed_at": "2022-02-19T17:56:57Z",
        "merged_at": "2022-02-19T17:56:57Z",
        "body": "Add region name parameter to helper functions to be able to test multi-region scenarios",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-02-19T13:47:45Z",
        "closed_at": "2022-02-19T18:28:36Z",
        "merged_at": "2022-02-19T18:28:36Z",
        "body": "This PR passes the region name parameter to the method `helpers.get_rest_api_paths` after the region lookup being removed from the patching phase.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 43,
        "deletions": 3,
        "changed_files": 2,
        "created_at": "2022-02-18T20:09:46Z",
        "closed_at": "2022-02-19T19:56:50Z",
        "merged_at": "2022-02-19T19:56:50Z",
        "body": "This adds a new moto migration utility that allows us to modify the request before it's serialized and sent to moto.\r\n\r\n/cc @alexrashed @steffyP ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 22,
        "deletions": 9,
        "changed_files": 2,
        "created_at": "2022-02-18T18:12:38Z",
        "closed_at": "2022-02-19T22:06:31Z",
        "merged_at": "2022-02-19T22:06:31Z",
        "body": "This PR adds s3 integration using the action name. We already support `arn:aws:apigateway:us-west-2:s3:path/{bucket}/{key}` scheme and this PR adds support to `arn:aws:apigateway:us-west-2:s3:action/GetObject&Bucket={bucket}&Key={key}`\r\nResolve https://github.com/localstack/localstack/issues/5508\r\n\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 4088,
        "deletions": 37,
        "changed_files": 6,
        "created_at": "2022-02-18T14:11:25Z",
        "closed_at": "2022-02-18T17:58:06Z",
        "merged_at": "2022-02-18T17:58:06Z",
        "body": "Migrate Redshift API to ASF, using moto fallback dispatcher.",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 3078,
        "deletions": 7,
        "changed_files": 4,
        "created_at": "2022-02-18T13:27:51Z",
        "closed_at": "2022-02-18T15:01:07Z",
        "merged_at": "2022-02-18T15:01:07Z",
        "body": "This is a very simple migration that simply wraps an existing moto service using the `MotoFallbackDispatcher`",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 657,
        "deletions": 92,
        "changed_files": 4,
        "created_at": "2022-02-18T13:26:32Z",
        "closed_at": "2022-02-28T17:09:08Z",
        "merged_at": "2022-02-28T17:09:08Z",
        "body": "This PR migrates the ACM service to ASF.\r\n\r\n* one moto patch was pulled out to top-level using the `@patch` utility\r\n* the other one (a patch to a moto backend, which is more difficult now with lazy-init of backends) was restructured into the provider with the help of `call_moto`\r\n* the `MotoFallbackDispatcher` handles the other methods",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 408,
        "deletions": 86,
        "changed_files": 5,
        "created_at": "2022-02-18T12:27:21Z",
        "closed_at": "2022-02-18T15:55:18Z",
        "merged_at": "2022-02-18T15:55:18Z",
        "body": "After https://github.com/localstack/localstack/pull/5488 and https://github.com/localstack/localstack/pull/5470, this is the third round of fixes for the parsers and serializers of ASF.\r\nThis PR contains the following changes:\r\n- fix KeyError on serialization of unknown members\r\n  - If the serializer cannot serialize a member, a warning will be logged instead of raising an exception.\r\n- fix operation detection for colliding request URIs\r\n  - Fixes an issue where the operation detection for colliding request URIs based on our match score algorithm wasn't working (longer patterns weren't preferred).\r\n- fix operation detection for overloaded S3 request URIs\r\n  - For S3, the operation detection is even more complex because there are equal request URIs and methods for different operations. This fix adds a more complex detection based on a more sophisticated match scoring algorithm.\r\n- fix location trait \"headers\" for werkzeug requests\r\n  - Fixes the \"headers\" parsing such that it can handle dicts and werkzeug's HttpHeaders objects\r\n- fix shape parsing error for location trait \"headers\"\r\n  - Fixes the parsing of \"headers\" (directly return extracted HTTP headers instead of processing based on shapes).\r\n- fix package name for generated services with a dash in the name\r\n  - Some generated service packages contained dashes (\"-\"), which can cause issues when importing the modules in python. Dashes are now replaced by underscores (\"_\").\r\n- fix query parsing where content is not in the request body\r\n  - The query protocol allows sending the request parameters in the body as well as in the URL. This is now supported (body has precedence).\r\n- fix virtual host addressing for S3 in parser\r\n  - Adds support for virtual host bucket addressing in the S3 parser.\r\n- fix header datetime parsing\r\n  - Fixes issues with parsing header members of type \"timestamp\".\r\n- fix cbor decoding for Kinesis\r\n  - Kinesis sends some requests CBOR formatted instead of JSON formatted. This fix adds CBOR decoding to the parser.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1036,
        "deletions": 226,
        "changed_files": 7,
        "created_at": "2022-02-18T11:13:27Z",
        "closed_at": "2022-03-10T10:36:57Z",
        "merged_at": "2022-03-10T10:36:56Z",
        "body": null,
        "comments": 2
    },
    {
        "merged": true,
        "additions": 285,
        "deletions": 223,
        "changed_files": 7,
        "created_at": "2022-02-18T09:57:30Z",
        "closed_at": "2022-02-18T18:19:01Z",
        "merged_at": "2022-02-18T18:19:01Z",
        "body": "Add `resolve_hostname(..)` util function, refactor some utils into sub-modules.\r\n\r\nCurrently still leaving the imports in `common.py` to keep them accessible from other places - left a `TODO` to refactor the imports in the remaining codebase, so we can later remove the imports from `common.py`",
        "comments": 4
    },
    {
        "merged": false,
        "additions": 6,
        "deletions": 6,
        "changed_files": 1,
        "created_at": "2022-02-17T15:56:51Z",
        "closed_at": "2022-02-20T14:03:08Z",
        "merged_at": null,
        "body": "Testing whether this code is actually still necessary.\r\n\r\n/cc @steffyP @whummer ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 248,
        "deletions": 193,
        "changed_files": 4,
        "created_at": "2022-02-17T12:43:04Z",
        "closed_at": "2022-02-19T22:08:25Z",
        "merged_at": "2022-02-19T22:08:24Z",
        "body": "This PR adds support for ApiGateway SNS integration and refactor some common domain classes into different modules.\r\n\r\nFix https://github.com/localstack/localstack/issues/5498",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 81,
        "deletions": 14,
        "changed_files": 3,
        "created_at": "2022-02-16T22:54:45Z",
        "closed_at": "2022-02-21T21:51:55Z",
        "merged_at": "2022-02-21T21:51:55Z",
        "body": "This PR addresses issue #5279. That shows the SecretManager service from Moto crashing due to trying to invoke a Lambda function that doesn't exist inside Moto.AWSLambda.\r\n\r\nChanges:\r\n - Patch Moto.awslambda.models.LambdaBackend.get_function, to search lambdas from Localstack. \r\n - Patch Moto.awslambda.models.LambdaFunction.Invoke to allow the execution of a Localstack Lambda function.\r\n - Test of the secret_rotate method with a LambdaFunction\r\n - Deletion of a similar patch that the Logs Service used to apply.\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 37,
        "deletions": 21,
        "changed_files": 3,
        "created_at": "2022-02-15T18:42:19Z",
        "closed_at": "2022-02-15T22:17:24Z",
        "merged_at": "2022-02-15T22:17:24Z",
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1926,
        "deletions": 1850,
        "changed_files": 14,
        "created_at": "2022-02-15T17:39:08Z",
        "closed_at": "2022-02-17T18:11:06Z",
        "merged_at": "2022-02-17T18:11:06Z",
        "body": "### Target of this PR\r\nThe target is splitting the modules of docker client in a way, so we can use the docker client without the python \"docker\" dependency, to move \"docker\" from the CLI requirements to the runtime requirements.\r\nThis is due to a version conflict with aws-sam, which requires a lower docker version than us (and that version has different semantics about image pulls).\r\n\r\n### PR implications\r\nThis PR will split up container clients into separate modules, to circumvent issues with importing SdkDockerClient or its dependency \"docker\".\r\n\r\nThere where different options we could have taken, like making the imports conditional in the current module, using some form of try-/except or some other magic, but I decided the probably easiest course of action would be splitting the modules up a bit, and creating a module which will make the decision which docker client to use for us, without importing anything unconditionally, while leaving the docker-py imports at the module for the SdkDockerClient.\r\nHowever, this can lead to problems when we import the SdkDockerClient directly in some path the CLI will reach (which we should not).\r\n\r\nThe logic for deciding which client to use is: Always use SDKDockerClient, unless explicitly overwritten or the docker-py dependency is not available.\r\n\r\nThis is quite a big refactoring, but the implications should be negligable.\r\n\r\nThe import graph for the splitup is heavily dependent on no circular imports, which is why it looks like this:\r\n```mermaid\r\ngraph BT;\r\n    docker_utils-->container_client;\r\n    docker_utils-->|conditional|docker_sdk_client;\r\n    docker_utils-->|conditional|docker_cmd_client;\r\n    docker_sdk_client-->container_client;\r\n    docker_cmd_client-->container_client;\r\n```\r\n\r\nDeployment against pro currently fails due to changes needed in Pro as well (which is the great disadvantage of this approach).",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 330,
        "deletions": 169,
        "changed_files": 4,
        "created_at": "2022-02-15T11:38:08Z",
        "closed_at": "2022-02-16T09:57:09Z",
        "merged_at": "2022-02-16T09:57:08Z",
        "body": "This PR contains fixes for the following issues detected in the current ASF protocol implementation:\r\n- fix parsing lists from the query string\r\n- fix the operation detection for specifications which a query parameter in the request URI pattern\r\n- fix rest-xml serialization for operation specs which do not define an output shape\r\n  - fixes https://github.com/localstack/localstack/pull/5477\r\n- fix the location and payload handling for rest-xml\r\n\r\nThe fixes turned out to cause quite a restructuring of the serializer, but the new structure is more aligned with botocore's implementation and the features of the different protocols.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 21,
        "deletions": 13,
        "changed_files": 1,
        "created_at": "2022-02-15T08:51:02Z",
        "closed_at": "2022-02-15T10:41:05Z",
        "merged_at": "2022-02-15T10:41:05Z",
        "body": "Simply adds an optional boolean flag to check if the cw store logs utils should create the log group if it doesn't exist, since auto-creating this isn't always desired. (e.g. when `awslogs-create-group` is set to false in a task definition)",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 38,
        "deletions": 76,
        "changed_files": 12,
        "created_at": "2022-02-14T16:00:42Z",
        "closed_at": "2022-02-15T16:55:50Z",
        "merged_at": "2022-02-15T16:55:50Z",
        "body": "* remove `six` from dependencies \ud83e\uddf9 \r\n* ( make `docker` a runtime (non-CLI) dependency (fixing dependency conflict with aws-sam-cli-local) /cc @dfangl ) - **update:** removed, to be done in a follow-up PR",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 120,
        "deletions": 1,
        "changed_files": 3,
        "created_at": "2022-02-14T14:26:33Z",
        "closed_at": "2022-02-15T11:12:23Z",
        "merged_at": "2022-02-15T11:12:23Z",
        "body": "### Summary\r\n\r\nUpdates the Docker wrapper to allow:\r\n- Creating images from containers\r\n- Removing images\r\n\r\n### Tests\r\n\r\nIncludes integration tests.",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-02-14T00:02:13Z",
        "closed_at": "2022-02-14T09:32:05Z",
        "merged_at": null,
        "body": "[![WhiteSource Renovate](https://app.renovatebot.com/images/banner.svg)](https://renovatebot.com)\n\nThis PR contains the following updates:\n\n| Package | Type | Update | Change |\n|---|---|---|---|\n| redhat/ubi8 | final | pin | `` -> `` |\n\n\ud83d\udccc **Important**: Renovate will wait until you have merged this Pin PR before creating any *upgrade* PRs for the affected packages. Add the preset `:preserveSemverRanges` to your config if you instead don't wish to pin dependencies.\n\n---\n\n### Configuration\n\n\ud83d\udcc5 **Schedule**: \"before 3am on Monday\" (UTC).\n\n\ud83d\udea6 **Automerge**: Disabled by config. Please merge this manually once you are satisfied.\n\n\u267b **Rebasing**: Whenever PR is behind base branch, or you tick the rebase/retry checkbox.\n\n\ud83d\udd15 **Ignore**: Close this PR and you won't be reminded about this update again.\n\n---\n\n - [ ] <!-- rebase-check -->If you want to rebase/retry this PR, click this checkbox.\n\n---\n\nThis PR has been generated by [WhiteSource Renovate](https://renovate.whitesourcesoftware.com). View repository job log [here](https://app.renovatebot.com/dashboard#github/localstack/localstack).",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1068,
        "deletions": 671,
        "changed_files": 24,
        "created_at": "2022-02-13T19:21:41Z",
        "closed_at": "2022-02-17T19:47:06Z",
        "merged_at": "2022-02-17T19:47:06Z",
        "body": "This PR introduces an HTTP routing and dispatching framework built on werkzeug. This can be used in a very flexible way throughout the codebase to implement custom routing, e.g., for custom routes in the edge proxy, or service-internal routing to external components (e.g., in APIGW, or others). It complements #5243 in that it adds routing logic to the control flow logic that #5243 provides.\r\n\r\n* [X] adds the `localstack.http` module, in preparation for #5243\r\n* [X] implements a generic HTTP dispatching framework using werkzeug\r\n* [X] restructures existing routing mechanisms using the new framework (and removes old code/tests)\r\n* [x] adds a mechanism to add custom routes to the edge proxy (for migrating custom ProxyListener rules like \r\n* [x] demonstrate based on the cloudwatch backdoor api how it works\r\n* [x] rebase once #5473 is merged",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 6,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2022-02-13T14:44:28Z",
        "closed_at": "2022-02-16T09:57:08Z",
        "merged_at": null,
        "body": "While migrating CloudFront to ASF, I noticed the following error while trying to delete a distribution:\r\n```\r\nError in proxy handler for request DELETE http://localhost:4566/2020-05-31/distribution/e774cc30: cannot convert 'NoneType' object to bytes\r\n```\r\nThis seems to happen when trying to serialize a `None` shape (i.e., no output shape) for the `rest-xml` protocol. \r\nTo reproduced it, you could simply create a distribution and try to delete it (from the current state of the `asf-cloudfront` branch).\r\nThis fix quickly solves it. Maybe there could be a better way to fix it. ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 5,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-02-12T21:49:15Z",
        "closed_at": "2022-02-13T08:21:56Z",
        "merged_at": "2022-02-13T08:21:56Z",
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 7,
        "deletions": 6,
        "changed_files": 2,
        "created_at": "2022-02-12T12:25:40Z",
        "closed_at": "2022-02-12T14:32:03Z",
        "merged_at": "2022-02-12T14:32:03Z",
        "body": "minor change to remove the deprecated use of `loclastack_ext.constants.VERSION`",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 490,
        "deletions": 36,
        "changed_files": 8,
        "created_at": "2022-02-12T01:29:08Z",
        "closed_at": "2022-02-14T09:50:32Z",
        "merged_at": "2022-02-14T09:50:32Z",
        "body": "This PR adds a simple API and the underlying machinery to dispatch ASF requests to moto without an HTTP roundtrip. IThe API facilitates migration of services to ASF that rely heavily on moto by providing three basic request patterns. The PR also demonstrates a simple migration of CloudWatch. \r\n\r\nThe three patterns are:\r\n* Proxy an HTTP request to moto\r\n* Call moto to receive an AWS response dictionary\r\n* Wrap an ASF provider to route all non-implemented methods to moto \r\n\r\n## Proxy an HTTP request to moto\r\n\r\nForwards a request to moto and forego parsing of the response, and instead just returns the HttpResponse\r\n\r\n```python\r\ndef proxy_moto(context: RequestContext) -> HttpResponse:\r\n```\r\n\r\nIn an ASF provider, this method can be useful if you want do something on the low-level http response rather than the higher-level AWS response dict. To enable this, the PR adapts the Skeleton to allow providers to return `HttpResponse` instances directly.\r\n```python\r\nclass SqsProvider:\r\n    @handler(\"ListQueues\", expand=False)\r\n    def list_queues(self, context, request) -> HttpResponse:\r\n        http_response = moto.proxy_moto(context)\r\n        print(http_response.get_data(as_text=True)) # will print the XML response\r\n        return http_response\r\n```\r\n\r\n## Calling moto and receiving an AWS response dictionary\r\n\r\nThis dispatches the request to moto, and parses moto's HTTP response using the botocore parser.\r\n\r\n```python\r\ndef call_moto(context: RequestContext) -> ServiceResponse:\r\n```\r\nThis can be used in ASF providers that want the convenience of operating directly on the typed botocore response (that is completely compatible with ASF)\r\n\r\n```python\r\nclass Ec2Provider:\r\n    @handler(\"RunInstances\", expand=False)\r\n    def run_instances(self, context: Requestcontext, request: RunInstancesRequest) -> Reservation:\r\n        reservation = moto.call_moto(context)\r\n        # do something with the AWS response, knowing that moto has accepted the\r\n        # request (service exceptions are also deserialized and raised)\r\n        reservation[\"AvailabilityZoneId\"] = \"...\"\r\n        return reservation\r\n```\r\n\r\n\r\n## Wrap an ASF provider to route all non-implemented methods to moto \r\n\r\nBefore passing the ASF provider to the proxy listener, wrap the provider with a `MotoFallbackDispatcher`, this will make all non-implemented handler methods fall through to call `proxy_moto(context)`\r\nhttps://github.com/localstack/localstack/blob/68c225b9714e0bd025a42c327f8d9ca61db720af/localstack/services/providers.py#L43-L47",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 13,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2022-02-10T19:29:44Z",
        "closed_at": "2022-02-11T13:05:05Z",
        "merged_at": "2022-02-11T13:05:05Z",
        "body": "Add support for `DefinitionS3Location` in StepFunctions CloudFormation model. Resolves a user issue - logic tested locally, running `samlocal deploy` with this template:\r\n```\r\nTransform: \"AWS::Serverless-2016-10-31\"\r\nResources:\r\n  StateMachine:\r\n    Type: AWS::Serverless::StateMachine\r\n    Properties:\r\n      Name: MyStateMachine\r\n      DefinitionUri: template.json\r\n      Role: testrole\r\n      DefinitionSubstitutions:\r\n        MyLambdaArn: test\r\n```",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 154,
        "deletions": 31,
        "changed_files": 6,
        "created_at": "2022-02-10T16:25:37Z",
        "closed_at": "2022-02-10T23:18:59Z",
        "merged_at": "2022-02-10T23:18:59Z",
        "body": "This PR contains a set of fixes for the ASF parser, serializer, and scaffold:\r\n- (misc) remove an unexpected CLI dependency on ASF/werkzeug due to a module import in `install.py`.\r\n- (scaffold) fix issues with minifying generated APIs when parameters or types are called `type`.\r\n- (parser) fix invalid blob payload decoding\r\n- (parser) fix greedy URI path param handling\r\n- (parser) fix uri location decoding\r\n- (parser) fix empty payload handling\r\n- (serializer) fix None list/structure/map serializations\r\n\r\nThe fixes have been verified by newly written or adapted unit tests, as well as with the ASF parser challenger executed in the pipeline of PR #5411.\r\nSince each commit contains explicitly one fix, it might make sense to avoid squashing these commits (for the sake of traceability).",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 6,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2022-02-10T14:15:04Z",
        "closed_at": "2022-02-10T23:14:29Z",
        "merged_at": "2022-02-10T23:14:29Z",
        "body": "very small change added while comparing sqs to backup to find the cause of backup's problems\r\n\r\nIt feels kind of overkill to open a PR for this, but I wasn't quite sure how to go about it. It didn't fit the branch where I was at all and I didn't want to \"sneak it in\"\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 386,
        "deletions": 2,
        "changed_files": 3,
        "created_at": "2022-02-10T14:03:45Z",
        "closed_at": "2022-02-18T09:42:35Z",
        "merged_at": "2022-02-18T09:42:35Z",
        "body": null,
        "comments": 2
    },
    {
        "merged": true,
        "additions": 16,
        "deletions": 55,
        "changed_files": 3,
        "created_at": "2022-02-09T22:10:11Z",
        "closed_at": "2022-02-10T13:04:52Z",
        "merged_at": "2022-02-10T13:04:52Z",
        "body": "This PR removes a bit of code that appears to have no effect anymore since the original issues were fixed in moto.\r\n\r\nI verified manually in the HTTP response that moto returns timestamps correctly both in DescribeAlarms and GetMetricData, so there should be no regression to the two issues that caused the change:\r\n* #3110\r\n* #3497\r\n  output from the user sample after the code removal\r\n  ```json\r\n  {\r\n      \"MetricDataResults\": [\r\n          {\r\n              \"Id\": \"localstackRequest\",\r\n              \"Label\": \"CPUUtilization Average\",\r\n              \"Timestamps\": [\r\n                  \"2022-02-09T22:00:00Z\"  <- correct \r\n              ],\r\n              \"Values\": [\r\n                  28.0\r\n              ],\r\n              \"StatusCode\": \"Complete\"\r\n          }\r\n      ]\r\n  }\r\n  ```\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 54,
        "deletions": 5,
        "changed_files": 2,
        "created_at": "2022-02-09T20:01:39Z",
        "closed_at": "2022-02-09T22:40:08Z",
        "merged_at": "2022-02-09T22:40:08Z",
        "body": "Embarrassingly, the current implementation uses lstrip, which is the completely wrong method for the purpose. (shame on me)\r\n\r\nThis PR changes the stripping of the provider override to a substring operation (removeprefix is sadly only available in python3.9 and upward), instead of the currently completely wrong lstrip.\r\n\r\nAlso, some unit tests are added to test the behavior of the ProviderConfig class in general.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 5,
        "deletions": 5,
        "changed_files": 2,
        "created_at": "2022-02-09T17:20:31Z",
        "closed_at": "2022-02-09T18:47:27Z",
        "merged_at": "2022-02-09T18:47:27Z",
        "body": "Currently, the create_lambda_function fixture depends on the kwargs[\"func_name\"] being set, but that is not set by sqs tests.\r\n\r\nTherefore, we have 240s waiting times which are not necessary at all, which can fail the tests due to job execution timeouts.\r\n\r\nThis should shave off 6-9 min off our test times.\r\n\r\nAlso the function signature has changed, to prevent this in the future.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1378,
        "deletions": 18,
        "changed_files": 4,
        "created_at": "2022-02-09T14:15:17Z",
        "closed_at": "2022-02-09T18:16:10Z",
        "merged_at": "2022-02-09T18:16:09Z",
        "body": "This PR migrates Cloudwatch to ASF",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 131,
        "deletions": 28,
        "changed_files": 5,
        "created_at": "2022-02-09T11:50:35Z",
        "closed_at": "2022-02-16T22:28:14Z",
        "merged_at": "2022-02-16T22:28:14Z",
        "body": "This PR:\r\n\r\n- adds a new environment variable to the image (`LOCALSTACK_BUILD_VERSION`), which contains the version of the built localstack version\r\n- uses the introduced environment variable for the docker status command instead of starting a new container\r\n- adds formatting options to the docker and service status commands\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 19,
        "deletions": 12,
        "changed_files": 2,
        "created_at": "2022-02-08T18:55:21Z",
        "closed_at": "2022-02-09T13:25:25Z",
        "merged_at": "2022-02-09T13:25:25Z",
        "body": "Minor refactoring - add default entries in CFN template dict to avoid `KeyError` - addresses #5447\r\n\r\n/cc @dominikschubert ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 26,
        "deletions": 44,
        "changed_files": 2,
        "created_at": "2022-02-08T18:27:29Z",
        "closed_at": "2022-02-09T10:29:37Z",
        "merged_at": "2022-02-09T10:29:36Z",
        "body": "## Description\r\n\r\nThis PR:\r\n\r\n- [Remove announcements from README.md](https://github.com/localstack/localstack/commit/bf2a2aa77c9c713d172186dc2ee412d073960637)\r\n- [Add third party software tools doc](https://github.com/localstack/localstack/commit/e70aedd612118f4f701c289ee4ad85c0e4dcbc28)",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 21,
        "deletions": 12,
        "changed_files": 3,
        "created_at": "2022-02-08T11:47:35Z",
        "closed_at": "2022-02-08T14:24:32Z",
        "merged_at": "2022-02-08T14:24:32Z",
        "body": "Bump version of moto-ext to 3.0.1. Pinning the version for now, to avoid instabilities with upgrades in the future.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 77,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2022-02-08T10:52:52Z",
        "closed_at": "2022-02-09T15:03:29Z",
        "merged_at": "2022-02-09T15:03:29Z",
        "body": "This PR adds a helper class for handling paging and filtering in AWS services in a unified way. This is useful for avoiding boilerplate code in ASF implementations of services.\r\n\r\nAn example usage would be: \r\n\r\n```python\r\n[...]\r\n\r\npaginated_list = PaginatedList(EntityRegion.get().entity.values())\r\n\r\npage, next_token = paginated_list.get_page(\r\n     next_page_token,\r\n     lambda entity: entity[Id],\r\n     page_size=max_results,\r\n     filter_function= lambda entity: entity[\"Name\"] != \"BAD\"\r\n)\r\n\r\n[...]\r\n```",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 315,
        "deletions": 67,
        "changed_files": 2,
        "created_at": "2022-02-08T10:43:04Z",
        "closed_at": "2022-02-09T13:24:02Z",
        "merged_at": "2022-02-09T13:24:02Z",
        "body": "This PR enables the triggering of actions that are set on alarms, when calling `set_alarm_state`.\r\nLimitations: \r\n - Currently only SNS is supported as action. \r\n - Metrics are not yet evaluated, only the `set_alarm_state` will change the state of an alarm and therefore trigger actions. ",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 6,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-02-08T02:36:41Z",
        "closed_at": "2022-02-08T11:06:07Z",
        "merged_at": "2022-02-08T11:06:07Z",
        "body": "I accidentally closed [Added change_set_id check for CDK #5398](https://github.com/localstack/localstack/pull/5398).\r\n\r\nSubmitting this PR in its place - apologies for the chaos.\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2022-02-07T21:29:04Z",
        "closed_at": "2022-02-09T13:26:10Z",
        "merged_at": "2022-02-09T13:26:10Z",
        "body": "This should fix an issue (`Unable to find forwarding rule for host`) where the forwarding rule is not found when using the AWS SDK v2 in java to call STS assumeRole.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 35,
        "deletions": 10,
        "changed_files": 2,
        "created_at": "2022-02-07T20:15:06Z",
        "closed_at": "2022-02-08T11:45:20Z",
        "merged_at": "2022-02-08T11:45:20Z",
        "body": "When migrating CloudFront to ASF, I noticed that the provider always gets `None` arguments.\r\nThis seems related to some problem in the parser.\r\nWhen a payload is specified in the output shape, the payload itself is actually parsed correctly (line 592-593) but then the entire dictionary is set to `None` while parsing the rest of the shape.\r\nTo get along with the migration, I simply added a `return` after line 594 to temporary fix the problem.\r\nThis do not fix the issue when there is no payload (see `test_parse_cloudfront_with_botocore`).\r\n\r\nhttps://github.com/localstack/localstack/blob/75f7e3034bd27e1c9a46a70ededcc06bbe2bd5c5/localstack/aws/protocol/parser.py#L591-L598",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 89,
        "deletions": 10,
        "changed_files": 7,
        "created_at": "2022-02-07T14:56:37Z",
        "closed_at": "2022-02-09T11:49:46Z",
        "merged_at": "2022-02-09T11:49:46Z",
        "body": "This PR contains changes to smoke-test LocalStack against RedHat / rpm based operating systems:\r\n- Add a `Dockerfile.rh` which is based on  `redhat/ubi8` in order to build LocalStack on a RedHat / rpm based system.\r\n  - This Dockerfile - in contrast to the default Dockerfile - does _not_ add the latest source code to the image, but installs the latest packages from PyPi. This means that the image may _not_ contain the latest changes in the repo.\r\n- Add a new GitHub action (`smoke-tests-against-redhat`) to build the image and perform the CI smoke tests.\r\n- Removes the deprecated `infra` make target (since there is no code in the RedHat Docker image).\r\n\r\nWhat's left to do:\r\n- [x] Add changes to our extensions (installing libs is currently not working).\r\n- [x] Make sure the GitHub action works correctly.\r\n- [x] Change the GitHub action trigger to a fixed schedule (as it's not coupled to the source code directly).",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2022-02-07T00:24:31Z",
        "closed_at": "2022-02-07T07:56:19Z",
        "merged_at": "2022-02-07T07:56:19Z",
        "body": "[![WhiteSource Renovate](https://app.renovatebot.com/images/banner.svg)](https://renovatebot.com)\n\nThis PR contains the following updates:\n\n| Package | Type | Update | Change |\n|---|---|---|---|\n| python | stage | digest | `3544d06` -> `0ac2a12` |\n\n---\n\n### Configuration\n\n\ud83d\udcc5 **Schedule**: \"before 3am on Monday\" (UTC).\n\n\ud83d\udea6 **Automerge**: Disabled by config. Please merge this manually once you are satisfied.\n\n\u267b **Rebasing**: Whenever PR becomes conflicted, or you tick the rebase/retry checkbox.\n\n\ud83d\udd15 **Ignore**: Close this PR and you won't be reminded about this update again.\n\n---\n\n - [ ] <!-- rebase-check -->If you want to rebase/retry this PR, click this checkbox.\n\n---\n\nThis PR has been generated by [WhiteSource Renovate](https://renovate.whitesourcesoftware.com). View repository job log [here](https://app.renovatebot.com/dashboard#github/localstack/localstack).",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 225,
        "deletions": 48,
        "changed_files": 8,
        "created_at": "2022-02-05T16:14:58Z",
        "closed_at": "2022-02-08T14:33:38Z",
        "merged_at": "2022-02-08T14:33:37Z",
        "body": "Fixes https://github.com/localstack/localstack/issues/5407\r\n\r\n- request template and regional requests\r\n- request models and validators\r\n\r\nSteps to verify:\r\n\r\n1. Apply cloudformation template https://github.com/localstack/support-samples/tree/main/localstack_issue_5406. Execute the `run.sh` script:\r\n```\r\n./run.sh\r\n```\r\n\r\n2. Run the following `curl`. The request will be validated against a **request model**, transformed according to the **request templates** that will be forward to kineses.\r\n\r\n```\r\ncurl -X POST \"http://localhost:4566/restapis/<rest-api-id>/local/_user_request_/sites/1/ingest\"  -H 'Content-Type: application/json' -d '{\r\n      \"HID\": \"ad\",\r\n      \"SID\": \"consequat ex velit sed\",\r\n      \"Data\": {\r\n        \"ipsum_e_\": 50662226\r\n      }\r\n    }'\r\n```\r\n\r\nWe should get a response like this:\r\n```\r\n{\"EncryptionType\":\"NONE\",\"SequenceNumber\":\"49626505666304979114921050508059067715207455747575119874\",\"ShardId\":\"shardId-000000000000\"}\r\n```",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 241,
        "deletions": 27,
        "changed_files": 2,
        "created_at": "2022-02-04T17:22:51Z",
        "closed_at": "2022-02-07T17:03:36Z",
        "merged_at": "2022-02-07T17:03:36Z",
        "body": "implements `header`, `headers`, `statusCode` and `payload` serialization and  for `json-rest` protocol in the ASF serializer.\r\n\r\n* i renamed `_serialize_payload`, which was the abstract entry point for serialization, into `_serialize_response`, to indicate that it can handle traits outside the payload\r\n* the method is kinda generic, but can't be re-used yet because it relies on the special `_serialize` method of the `JSONResponseSerializer`, which parses shapes into a dict that can later be used as basis to serialize the request.\r\n* i added two small features to the `_botocore_serializer_integration_test`:\r\n  1. it now returns the parsed response so we can assert header fields\r\n  2. i added a `_skip_assert` sentinel object to skip the internal assert for cases where the response dict may contain unexpected additional attributes (e.g., when the `headers` location trait is used, then all other HTTP headers are also serialized into that field)\r\n* removed base64 encoding for rest-json payloads, since AWS does not seem to base64-encode payload blobs in json-rest. unfortunately the implementation for that is not great (first encoding and then decoding again), but it was the easiest way for now without having to restructure everything.\r\n\r\ni also created this gist to validate some assumptions that are made in the method: https://gist.github.com/thrau/eb93d0def52d2c4a23abba4efea5e126\r\n\r\nTODO: \r\n- [x] basic implementations for `header` and `statusCode` (easy)\r\n- [x] implementation of `headers` location\r\n- [x] implementation of payload serialization\r\n- [x] write tests (current test framework needs to be slightly extended)",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 113,
        "deletions": 131,
        "changed_files": 2,
        "created_at": "2022-02-04T15:05:44Z",
        "closed_at": "2022-02-07T15:37:24Z",
        "merged_at": "2022-02-07T15:37:24Z",
        "body": "Simple EC2 test refactoring for pytest that came up during other test related work.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 8,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2022-02-04T14:42:05Z",
        "closed_at": "2022-02-08T07:30:00Z",
        "merged_at": "2022-02-08T07:30:00Z",
        "body": "Currently, the integration test which tests the SingletonClusterManager (which is managing the cluster if the `OPENSEARCH_ENDPOINT_STRATEGY=port` and `OPENSEARCH_MULTI_CLUSTER=false`) does not wait for the cluster to be up or tests if the cluster can be reached.\r\nSince the cluster is not yet started, it cannot be properly shut down (Server#do_shutdown raises an exception which is swallowed by #call_safe).\r\nThis PR fixes the cleanup by extending the test to wait for the cluster to be up and testing if the cluster really is reachable.\r\n\r\n/cc @dfangl \r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 33,
        "deletions": 27,
        "changed_files": 6,
        "created_at": "2022-02-04T14:27:15Z",
        "closed_at": "2022-02-11T14:02:50Z",
        "merged_at": "2022-02-11T14:02:50Z",
        "body": "I guess when a service is in a STOPPED state it should also try to start it again (and wait in case it is currently stopping). \r\n\r\nAlso prevents the kinesis restart error spam during test execution.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 5,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-02-03T10:48:50Z",
        "closed_at": "2022-02-03T12:25:10Z",
        "merged_at": "2022-02-03T12:25:10Z",
        "body": "This PR fixes an uncapped recursion bug which occurs when parsing API parameters which are delivered via HTTP Headers",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 124,
        "deletions": 81,
        "changed_files": 12,
        "created_at": "2022-02-03T09:48:00Z",
        "closed_at": "2022-02-09T17:39:10Z",
        "merged_at": "2022-02-09T17:39:10Z",
        "body": "Test PR for pipeline parallelization, split directly from #5415 .\r\n\r\nThis PR splits the docker-tests into multiple runners, while NOT executing the modules in a predictive manner (modules can be shuffled, however the order within them should stay the same).\r\n\r\nDue to this possible shuffling, many tests were changed to use unique names for the created services, to prevent state from previous tests influencing the currently running test.\r\n\r\n\r\nTODOs:\r\n\r\n- [x] rebase to master",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2022-02-02T21:32:03Z",
        "closed_at": "2022-02-03T17:51:08Z",
        "merged_at": "2022-02-03T17:51:08Z",
        "body": "This PR addresses #5392.\r\n\r\nChanges:\r\n- Fix typo in CFN model for StateMachine type.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 8,
        "deletions": 12,
        "changed_files": 2,
        "created_at": "2022-02-02T15:34:32Z",
        "closed_at": "2022-02-03T07:50:07Z",
        "merged_at": "2022-02-03T07:50:07Z",
        "body": "This PR contains the following changes:\r\n- Removes the explicit download of the LetsEncrypt CA (LetsEncrypt R3 is already contained in the python base image).\r\n- Removes the elasticsearch port from docker-compose and the exposed port list in the Dockerfile (ElasticSearch and OpenSearch are now using the external service port range).\r\n- Exposes the external service port range in the Dockerfile / the resulting docker image.\r\n- Describes the different bound ports in the example `docker-compose.yml`.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 97,
        "deletions": 36,
        "changed_files": 6,
        "created_at": "2022-02-02T15:22:23Z",
        "closed_at": "2022-02-03T15:03:06Z",
        "merged_at": "2022-02-03T15:03:06Z",
        "body": "This PR will separate the jobs for building the container and testing the container, allowing for future test parallelism and reduced per-job runtime.\r\n\r\nAlso, the ARM tests now run without any emulation of AMD64, ElasticSearch uses again the statically bundled version in the -full image, some test cleanups in ES/opensearch tests and installing the correct architecture of ES if installed dynamically. ",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 170,
        "deletions": 134,
        "changed_files": 7,
        "created_at": "2022-02-02T09:39:55Z",
        "closed_at": "2022-02-02T17:11:09Z",
        "merged_at": "2022-02-02T17:11:09Z",
        "body": "* Fix passing `Conditions` on stack updates - TODO should be covered by a test\r\n* Refactor CFN function arguments - removing the redundant `stack_name` and `resources`, using single `stack` parameter instead. This is only a first iteration, which should hopefully make future refactorings a bit easier..\r\n\r\nRequires a change in -ext to be released in tandem.",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 158797,
        "deletions": 0,
        "changed_files": 84,
        "created_at": "2022-02-01T14:18:14Z",
        "closed_at": "2022-03-18T12:26:35Z",
        "merged_at": null,
        "body": "This PR is a TDD environment for the ASF parser.\r\n\r\nI added a bit of code that sends every AWS API request through the ASF parser, tries to invoke the API stub, and falls through to the regular service listener if the call raises a `NotImplementedError` (indicating a successful dispatch). Otherwise it returns an error to the client, which should make the test fail.\r\n\r\nhttps://github.com/localstack/localstack/blob/d26dc1bcf5bbd984f533fc887902b6279b43a01f/localstack/services/edge.py#L174-L178\r\n\r\nThis is the true battle-test for the parser, and a green build will indicate that we have a rock-solid implementation!\r\n\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2022-02-01T13:38:53Z",
        "closed_at": "2022-02-01T15:31:17Z",
        "merged_at": "2022-02-01T15:31:17Z",
        "body": "Needed in localstack pro",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 21,
        "deletions": 3,
        "changed_files": 5,
        "created_at": "2022-02-01T09:50:22Z",
        "closed_at": "2022-02-02T12:03:25Z",
        "merged_at": "2022-02-02T12:03:24Z",
        "body": "PR #5389 introduced a regression by disabling the automatic setting of LOCALSTACK_HOSTNAME, which the local lambda executor relied on.\r\nThis PR will, as a first step to get builds green again, inject the endpoint again into the environment variables of the process.",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 41,
        "deletions": 23,
        "changed_files": 2,
        "created_at": "2022-01-31T12:18:51Z",
        "closed_at": "2022-01-31T15:51:51Z",
        "merged_at": "2022-01-31T15:51:50Z",
        "body": "Current Docker Client implementation does not respect some shortcomings of docker on Windows\r\n\r\nFixes #5347\r\nFixes #5348",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 17,
        "deletions": 7,
        "changed_files": 2,
        "created_at": "2022-01-31T11:19:25Z",
        "closed_at": "2022-01-31T14:44:41Z",
        "merged_at": "2022-01-31T14:44:40Z",
        "body": "* Minor fix for Kinesis installation via LPM. Installation currently fails with:\r\n```\r\n$ python -m localstack.cli.lpm install kinesis-mock\r\nresolving packages: ('kinesis-mock',)\r\ninstalling... kinesis-mock\r\nerror installing kinesis-mock: install_kinesis_mock() missing 1 required\r\npositional argument: 'bin_file_path'\r\n```\r\n\r\n* add Docker check for StepFunctions installation (currently breaks building LS with self-contained Dockerfile - not having StepFunctions available is acceptable for now, but should be fixed in a follow-up step.)",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2022-01-31T00:34:21Z",
        "closed_at": "2022-02-01T09:26:22Z",
        "merged_at": "2022-02-01T09:26:22Z",
        "body": "[![WhiteSource Renovate](https://app.renovatebot.com/images/banner.svg)](https://renovatebot.com)\n\nThis PR contains the following updates:\n\n| Package | Type | Update | Change |\n|---|---|---|---|\n| python | stage | digest | `dae221b` -> `3544d06` |\n\n---\n\n### Configuration\n\n\ud83d\udcc5 **Schedule**: \"before 3am on Monday\" (UTC).\n\n\ud83d\udea6 **Automerge**: Disabled by config. Please merge this manually once you are satisfied.\n\n\u267b **Rebasing**: Whenever PR becomes conflicted, or you tick the rebase/retry checkbox.\n\n\ud83d\udd15 **Ignore**: Close this PR and you won't be reminded about this update again.\n\n---\n\n - [ ] <!-- rebase-check -->If you want to rebase/retry this PR, click this checkbox.\n\n---\n\nThis PR has been generated by [WhiteSource Renovate](https://renovate.whitesourcesoftware.com). View repository job log [here](https://app.renovatebot.com/dashboard#github/localstack/localstack).",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 9051,
        "deletions": 5042,
        "changed_files": 141,
        "created_at": "2022-01-30T17:16:45Z",
        "closed_at": "2022-02-08T02:20:59Z",
        "merged_at": null,
        "body": "As of Jan 30, 2022 CDK 2.10.0 `diff` command does not seem to pass ChangeSetName as part of its request. This results in CDK displaying inaccurate change details in the console.\r\n\r\n###### Example of `cdklocal diff` behaviour before and after the change.\r\n![image](https://user-images.githubusercontent.com/1309341/151712844-a5d64a9a-e943-4309-b63e-28728c1218f2.png)\r\n\r\n\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-01-29T17:45:44Z",
        "closed_at": "2022-01-30T13:24:23Z",
        "merged_at": "2022-01-30T13:24:23Z",
        "body": "The `find_change_set` function call within the `get_template` function had its parameters mistakenly inverted. This caused a GetTemplate request which had both a **stack-name** and **change-set-name** to fail.\r\n\r\nI changed the positional parameters to named parameters because I'm unsure if there are other areas of localstack which also call `find_change_set` and didn't want to risk breaking them with this change.\r\n\r\n![image](https://user-images.githubusercontent.com/1309341/151671218-881e5bd3-8c5b-4274-bac0-c6587e8f6801.png)\r\n\r\n## To  Test:\r\n**Note**: I'm quite new to localstack and CDK so I'm not sure how to build automated tests yet. Hopefully my textual description and screenshot are sufficient to evaluate this PR?\r\n\r\n1. Before fix\r\n    1. Install CDK 2.9.0 && cdklocal\r\n    2. `mkdir my-first-cdk && cd my-first-cdk`\r\n    3. `cdklocal init sample-app --language python`\r\n    4. Bootstrap CDK\r\n    5. `cdklocal deploy`\r\n    6. Comment out `topic.add_subscription(subs.SqsSubscription(queue))` in _my_first_cdk_stack.py_.\r\n    7. `cdklocal deploy`\r\n    8. Try to get combined template: `awslocal cloudformation get-template --stack-name my-first-cdk --change-set-name cdk-deploy-change-set`. This will return an error: `An error occurred (ValidationError) when calling the GetTemplate operation: Stack with id my-first-cdk does not exist.`\r\n\r\n2. After the fix:\r\n    1.   Running command: `awslocal cloudformation get-template --stack-name my-first-cdk --change-set-name cdk-deploy-change-set` will return a populated template.\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 70,
        "deletions": 145,
        "changed_files": 5,
        "created_at": "2022-01-29T15:13:24Z",
        "closed_at": "2022-01-29T17:36:00Z",
        "merged_at": "2022-01-29T17:36:00Z",
        "body": "Bump `moto-ext` to latest version 3.0.0.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 80,
        "deletions": 21,
        "changed_files": 4,
        "created_at": "2022-01-29T13:32:57Z",
        "closed_at": "2022-02-03T14:18:08Z",
        "merged_at": "2022-02-03T14:18:08Z",
        "body": "This PR makes the output truncation configurable, providing a default that keeps backwards compatibility.\r\n\r\nThe new introduced variable is called `LAMBDA_TRUNCATE_STDOUT`",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 180,
        "deletions": 247,
        "changed_files": 50,
        "created_at": "2022-01-28T18:23:26Z",
        "closed_at": "2022-01-29T14:51:00Z",
        "merged_at": "2022-01-29T14:51:00Z",
        "body": "* refactor config and rip out global `TEST_*_PORT`/`TEST_*_URL` variables - long overdue! \ud83e\uddf9 \r\n* remove some more `six.moves` imports\r\n\r\nNote: Also requires a change in -ext to be merged in tandem.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 21,
        "deletions": 12,
        "changed_files": 4,
        "created_at": "2022-01-28T16:24:15Z",
        "closed_at": "2022-01-28T22:17:37Z",
        "merged_at": "2022-01-28T22:17:37Z",
        "body": "Fix accessing external SQS port for intra-service communication. The port should only be reported in the queue URL to the outside world, but should not be used for internal service-to-service communication. Addresses #5337",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 923,
        "deletions": 3,
        "changed_files": 6,
        "created_at": "2022-01-28T13:40:21Z",
        "closed_at": "2022-01-31T13:12:13Z",
        "merged_at": "2022-01-31T13:12:13Z",
        "body": "Corresponds to this PR: https://github.com/localstack/localstack-artifacts/pull/8\r\n\r\nThis PR simply enables this behavior and adds some tests for both URL schemes we support for local APIs.\r\n\r\n\r\nRelated issue/comment: https://github.com/localstack/localstack/issues/3815#issuecomment-993304614",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 2,
        "changed_files": 3,
        "created_at": "2022-01-28T11:52:10Z",
        "closed_at": "2022-01-31T17:49:19Z",
        "merged_at": "2022-01-31T17:49:19Z",
        "body": "This PR broadens the default range for external services to (4510, 4560] - exactly 50 ports instead of 30 - and adjusts the example `docker-compose.yml` (which previously only mapped parts of the range).\r\n\r\nResolves https://github.com/localstack/localstack/issues/5375",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 66,
        "deletions": 2,
        "changed_files": 3,
        "created_at": "2022-01-28T01:06:07Z",
        "closed_at": "2022-01-28T12:09:46Z",
        "merged_at": "2022-01-28T12:09:45Z",
        "body": "Fixes https://github.com/localstack/localstack/issues/4719\r\n\r\n@whummer  It took a turner after our conversation yesterday, but after reading back the customer issue, went through the AWS and terraform documentation I think this is the proper fix and I have a better understanding on some differences between what the documentation states and the actual implementation in AWS.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 214,
        "deletions": 76,
        "changed_files": 6,
        "created_at": "2022-01-27T22:05:20Z",
        "closed_at": "2022-02-04T15:59:25Z",
        "merged_at": "2022-02-04T15:59:24Z",
        "body": "Just like the title says.\r\n\r\nResolves https://github.com/localstack/localstack/issues/5357",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 195,
        "deletions": 37,
        "changed_files": 2,
        "created_at": "2022-01-27T21:11:56Z",
        "closed_at": "2022-01-30T19:04:25Z",
        "merged_at": "2022-01-30T19:04:25Z",
        "body": "This PR addresses issue #5229. where the user describes that the EventBridge service discards the requests parameters set up in the `connection` resource for the `api destinations`.\r\n\r\nChanges:\r\n - Before the service sends a request to the `api destination,` it integrates the parameters described in the connection resource (query, body, header and auth parameters).\r\n - If the connection resource describes  OAuth credentials, the service will try to obtain the token.\r\n - The test that validates the delivery of the events also validates the 3 different types of auth parameters that could be set in a `connection` resource. \r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 184,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2022-01-27T17:46:00Z",
        "closed_at": "2022-01-27T21:15:58Z",
        "merged_at": "2022-01-27T21:15:58Z",
        "body": "When connecting a container to a non-default network with an alias, it will be reachable by that alias in that network (additionally to its name). This behavior is helpful when integrating LocalStack into third party services.\r\nThis functionality will be needed for integrations between EKS/ECR, and might come in handy in the future as well.\r\n\r\nThis PR introduces two new methods in the ContainerClient:\r\n* connect_container_to_network\r\n* disconnect_container_from_network\r\n\r\nAlso, the usage of this methods is tested by querying the docker client, and using the aliases for inter-container communication in simple test cases.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-01-26T20:03:04Z",
        "closed_at": "2022-01-27T09:56:25Z",
        "merged_at": "2022-01-27T09:56:25Z",
        "body": "Currently, we set this value to '{}' even if not applicable.\r\nWith this fix, we prevent this from being set, as many runtimes have problems with it (ruby RIC, rust...).\r\n\r\n\r\n/cc @calvernaz ",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 317,
        "deletions": 207,
        "changed_files": 4,
        "created_at": "2022-01-26T18:01:14Z",
        "closed_at": "2022-01-27T19:13:53Z",
        "merged_at": "2022-01-27T19:13:52Z",
        "body": "This PR refactors the `kinesis mock` and `kinesalite` starters to make use of the `Server` class abstraction as per https://github.com/localstack/localstack/issues/5265.",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 2668,
        "deletions": 572,
        "changed_files": 9,
        "created_at": "2022-01-26T17:02:34Z",
        "closed_at": "2022-01-27T09:02:45Z",
        "merged_at": "2022-01-27T09:02:45Z",
        "body": "This PR migrates the existing Flask based Firehose API to our new AWS Service Framework.\r\nBesides adding tagging support, this PR does not introduce any new features.\r\nHowever, it removes a lot of the boilerplate request/response handling code, cleans up a lot of the dict handling with the generated ASF types, and builds the foundation for further enhancing this API in the future (f.e. with the upcoming OpenSearch integration - https://github.com/localstack/localstack/issues/5357).",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 40,
        "deletions": 12,
        "changed_files": 3,
        "created_at": "2022-01-26T13:55:17Z",
        "closed_at": "2022-01-28T01:12:42Z",
        "merged_at": "2022-01-28T01:12:42Z",
        "body": "~ASF apparently is generated against cli v1, how to deal with this discrepancy?\r\nFor now, add v2 attributes similar to v1 ones so LocalStack accepts them.~\r\nTurns out that the api simply needed re-generating\r\nresolves #5322 \r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 68,
        "deletions": 108,
        "changed_files": 3,
        "created_at": "2022-01-25T19:36:59Z",
        "closed_at": "2022-01-25T21:18:28Z",
        "merged_at": "2022-01-25T21:18:28Z",
        "body": "Follow-up PR to #5355  adding the mentioned features to the fixture and applying it to the s3 cloudformation tests.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 14,
        "deletions": 39,
        "changed_files": 1,
        "created_at": "2022-01-25T11:04:03Z",
        "closed_at": "2022-01-25T12:25:32Z",
        "merged_at": "2022-01-25T12:25:32Z",
        "body": "Clean up `aws_stack` utils, remove obsolete/unused global boto3 resources (`CUSTOM_BOTO3_SESSION`), avoid unnecessary (and unsynchronized!) modifification of `os.environ`.\r\n\r\nShould fix the CI preflight test issues we've been seeing recently, e.g.: https://app.circleci.com/pipelines/github/localstack/localstack/3785/workflows/36f12a57-0e97-49aa-8e23-0b8b755586c8/jobs/16536/tests#failed-test-0",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 108,
        "deletions": 8,
        "changed_files": 4,
        "created_at": "2022-01-25T10:20:37Z",
        "closed_at": "2022-01-25T12:57:49Z",
        "merged_at": "2022-01-25T12:57:49Z",
        "body": "* Fix DomainValidationOptions property in ACM Certificate CFN deployment\r\n* Introduce `deploy_cfn_template` fixture that simplifies creating CFN tests and helps reduce the boilerplate a bit",
        "comments": 3
    },
    {
        "merged": false,
        "additions": 23,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2022-01-25T09:38:05Z",
        "closed_at": "2022-06-07T19:35:39Z",
        "merged_at": null,
        "body": "Fixes: #3585\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-01-25T00:36:24Z",
        "closed_at": "2022-01-25T12:28:37Z",
        "merged_at": "2022-01-25T12:28:37Z",
        "body": "While using SNS Http Subscription, even though the request has been sent to correct destination, inside localstack`s log we`re receiving error while getting responses body through `requests` lib.",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 4,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2022-01-24T22:30:04Z",
        "closed_at": "2022-06-30T08:30:08Z",
        "merged_at": null,
        "body": "This fixes #5350. \r\nI'm not familar enough with the codebase to fix this somewhere higher up the chain without potentially breaking other things since it does not appear this functionality is currently being unit tested. I looked at some existing tests but couldn't figure out the best way to test this sort of thing, i.e. a kinesis stream with .net lambda event source mapping. Didn't seem appropriate to just add it to the existing test_kinesis.py",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 110,
        "deletions": 60,
        "changed_files": 2,
        "created_at": "2022-01-24T21:38:59Z",
        "closed_at": "2022-01-25T01:02:00Z",
        "merged_at": "2022-01-25T01:02:00Z",
        "body": "This PR refactors the queue URL resolving as discussed here: https://github.com/localstack/localstack/pull/5317#discussion_r788940482 and also potentially fixes an issue where the host_url would have a trailing slash, creating invalid queue URLs ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2605,
        "deletions": 2347,
        "changed_files": 76,
        "created_at": "2022-01-24T15:36:02Z",
        "closed_at": "2022-02-07T16:17:22Z",
        "merged_at": "2022-02-07T16:17:22Z",
        "body": "This PR refactors the tests into 3 classes:\r\n\r\n* Regular Lambda Tests (that actually test the API/executors in a blackbox way)\r\n* Whitebox tests (tests that access some internals, will not work against AWS)\r\n* Integration tests (tests where other services trigger lambdas)\r\n\r\nThe regular Lambda tests will be refactored to pytest and be made runnable against AWS.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 4205,
        "deletions": 2020,
        "changed_files": 25,
        "created_at": "2022-01-24T12:19:26Z",
        "closed_at": "2022-02-01T16:10:16Z",
        "merged_at": "2022-02-01T16:10:16Z",
        "body": "This PR:\r\n\r\n- adds Elasticsearch functionality to OpenSearch\r\n- migrates the Elasticsearch service to ASF\r\n- changes the Elasticsearch implementation to relay to OpenSearch instead of handling the requests itself",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 65,
        "deletions": 20,
        "changed_files": 2,
        "created_at": "2022-01-24T10:23:25Z",
        "closed_at": "2022-01-25T08:04:37Z",
        "merged_at": "2022-01-25T08:04:37Z",
        "body": "The REST protocols in ASF (`rest-xml` and `rest-json`) determine the operation a request is targeting based on the incoming request's URI and HTTP method.\r\nWith https://github.com/localstack/localstack/pull/5314, we broadened the regular expression used to find the requested operation such that parameters can contain slashes.\r\nThis introduced a small regression where \"overlapping\" request URIs could cause issues with the operation lookup.\r\nFor example in OpenSearch's specification, the following two operations have overlapping request URIs:\r\n```\r\n\"DescribeDomain\":{\r\n      \"name\":\"DescribeDomain\",\r\n      \"http\":{\r\n        \"method\":\"GET\",\r\n        \"requestUri\":\"/2021-01-01/opensearch/domain/{DomainName}\"\r\n      },\r\n      ...\"\r\n    },\r\n\"DescribeDomainConfig\":{\r\n      \"name\":\"DescribeDomainConfig\",\r\n      \"http\":{\r\n        \"method\":\"GET\",\r\n        \"requestUri\":\"/2021-01-01/opensearch/domain/{DomainName}/config\"\r\n      },\r\n      ...\r\n    }\r\n```\r\nHowever, this issue did not affect all \"overlapping\" request URIs, because the precedence depended on the position in the specification (where the first occurrence would be preferred).\r\nIn the example above, requests to `/2021-01-01/opensearch/domain/test-domain/config` have incorrectly been dispatched to `DescribeDomain` (with the `domain_name` parameter `test-domain/config`) instead of `DescribeDomainConfig`(with the `domain_name` parameter `test-domain`).\r\n\r\nThis PR fixes this issue by _sorting the `operation_lookup` dict for each HTTP method descending based on the normalized request URI_ (where \"normalized\" means that parameter names are replaced with a static value starting with a space character - which is the lowest non-control character in ASCII - to ensure it's comparability).\r\n\r\nThe normalized request URIs for the given example would therefore look as follows:\r\n- `DescribeDomain`: \"/2021-01-01/opensearch/domain/ param\"\r\n- `DescribeDomainConfig`: \"/2021-01-01/opensearch/domain/ param/config\"\r\n\r\nDue to the _descending_ sorting based on the normalized request URI, the latter (more specific) request URI has precedence over the first (less specific) one.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 601,
        "deletions": 0,
        "changed_files": 5,
        "created_at": "2022-01-24T09:38:42Z",
        "closed_at": "2022-02-28T10:04:36Z",
        "merged_at": "2022-02-28T10:04:36Z",
        "body": "Adds the CDK modern bootstrap template as an integration test because LocalStack should also be able to bootstrap successfully in Community Edition.\r\n\r\nA mock ECR repository is added here to make this work. \r\n\r\n\r\n**!!! DO NOT MERGE !!!** before the corresponding PRO PR is merged",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 345,
        "deletions": 323,
        "changed_files": 4,
        "created_at": "2022-01-23T11:14:23Z",
        "closed_at": "2022-01-23T14:58:38Z",
        "merged_at": "2022-01-23T14:58:38Z",
        "body": "Small fix in CloudFormation to recursively resolve string placeholders. \r\n\r\nFixes the following error which occurs when bootstrapping CDK stacks that contain a placeholder like `arn:aws:...:parameter${CdkBootstrapVersion}` where the name of the SSM parameter itself refers to another stack parameter, e.g., `/cdk-bootstrap/${Qualifier}/version`: \r\n```\r\n  File \"/Users/whummer/code/localstack-ext/.venv/lib/python3.8/site-packages/localstack/utils/cloudformation/template_deployer.py\", line 740, in resolve_placeholders_in_string\r\n    result = re.sub(regex, _replace, result)\r\n  File \"/Users/whummer/.pyenv/versions/3.8.2/lib/python3.8/re.py\", line 208, in sub\r\n    return _compile(pattern, flags).sub(repl, string, count)\r\nTypeError: sequence item 1: expected str instance, dict found\r\n```\r\n\r\nPotential regression after the recent changes in b34f4c6eb4c895198b472c451cae89cd4acd05ce \r\n\r\nAlso includes some refactoring, migrating CloudFormation integration tests from `unittest`->`pytest`",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 4468,
        "deletions": 122,
        "changed_files": 14,
        "created_at": "2022-01-23T09:39:04Z",
        "closed_at": "2022-02-26T08:03:16Z",
        "merged_at": null,
        "body": "## Verification steps\r\n\r\n```\r\n awslocal apigateway create-rest-api --name \"demo-api\"\r\n```\r\n\r\nthen\r\n\r\n```\r\nawslocal apigateway get-rest-api --rest-api-id=<rest-api-id>\r\n```",
        "comments": 7
    },
    {
        "merged": false,
        "additions": 42,
        "deletions": 6,
        "changed_files": 3,
        "created_at": "2022-01-23T09:36:46Z",
        "closed_at": "2022-02-26T08:03:08Z",
        "merged_at": null,
        "body": "This is just enough to review the mechanics, this isn't a working example. You can find a working example [here](asf-migration-apigateway)",
        "comments": 5
    },
    {
        "merged": true,
        "additions": 21,
        "deletions": 21,
        "changed_files": 4,
        "created_at": "2022-01-22T07:31:48Z",
        "closed_at": "2022-01-30T21:24:21Z",
        "merged_at": "2022-01-30T21:24:21Z",
        "body": "## Description\r\n\r\nIt is unnecessary to use a comprehension just to loop over the `iterable` and create a `list/set/dict` out of it. Python has a specialized set of tools for this task: the `list/set/dict` constructors, which are faster and more readable.\r\n\r\nRelated: #5155 #5185\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 61,
        "deletions": 36,
        "changed_files": 2,
        "created_at": "2022-01-21T21:14:08Z",
        "closed_at": "2022-01-22T13:08:10Z",
        "merged_at": "2022-01-22T13:08:10Z",
        "body": "This refactor was included in the APIGateway ASF migration, just moved into his own PR.\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 12,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2022-01-21T13:47:46Z",
        "closed_at": "2022-01-21T16:57:17Z",
        "merged_at": "2022-01-21T16:57:17Z",
        "body": "Minor fix for request parser to enable `X-Amz-Target` strings that contain multiple dots. (surfaced during migration of CloudTrail API)",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 102,
        "changed_files": 1,
        "created_at": "2022-01-21T12:21:03Z",
        "closed_at": "2022-01-21T14:26:47Z",
        "merged_at": "2022-01-21T14:26:47Z",
        "body": "Clean up old/unused CloudFormation logic. ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 529,
        "deletions": 12,
        "changed_files": 3,
        "created_at": "2022-01-20T21:36:12Z",
        "closed_at": "2022-01-21T09:23:29Z",
        "merged_at": "2022-01-21T09:23:29Z",
        "body": "Small follow-up adding a test for https://github.com/localstack/localstack-artifacts/pull/6",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 90,
        "deletions": 104,
        "changed_files": 2,
        "created_at": "2022-01-20T09:51:57Z",
        "closed_at": "2022-01-21T15:14:35Z",
        "merged_at": "2022-01-21T15:14:35Z",
        "body": "- always create SQS queue-urls dynamically based on host information\r\n- unify queue indexing",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 13,
        "deletions": 13,
        "changed_files": 1,
        "created_at": "2022-01-19T23:38:42Z",
        "closed_at": "2022-01-20T16:25:11Z",
        "merged_at": "2022-01-20T16:25:11Z",
        "body": "This change makes sure the QueueURL does not contain a potential query parameter. Fix for this comment here: https://github.com/localstack/localstack/pull/5315#issuecomment-1016966136\r\n\r\nwas too hasty merging the PR ;-)",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 39,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2022-01-19T22:20:42Z",
        "closed_at": "2022-01-19T23:21:02Z",
        "merged_at": "2022-01-19T23:21:02Z",
        "body": "This PR enables http calls directly against the queue URL. Some SDKs (like the dotnet AWS SDK) may create `POST` request to the Queue URL (i.e., call `http://localhost:4566/000000000000/test-queue/`). In that case, the `QueueURL` attribute of the request body will be empty, instead it will be encoded as the URL. This is not picked up by the ASF parser, because it is a special feature of SQS.",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 26,
        "deletions": 5,
        "changed_files": 2,
        "created_at": "2022-01-19T21:44:14Z",
        "closed_at": "2022-01-20T13:26:29Z",
        "merged_at": "2022-01-20T13:26:29Z",
        "body": "Minor fix in request parsing to match path parameters with slashes. This surfaced during migration of the QLDB service to ASF, where boto3 is making the following request:\r\n\r\n```\r\nGET /tags/arn:aws:qldb:eu-central-1:000000000000:ledger/c-c67c827a\r\n```\r\n... for the following botocore `requestUri`:\r\n```\r\n/tags/{resourceArn}\r\n```\r\n\r\nIn this change, the assumption is currently that only trailing path parameters may contain slashes (e.g., `/my/path/{param}`). however this is not yet fully tested against AWS - i.e., haven't yet discovered a case where a parameter in the middle of a path (e.g., `/my/path/{param}/test`) may contain slashes as well. To be discussed/verified @thrau @alexrashed \r\n\r\nThe PR also contains a minor change to raise an explicit `RequestParserError` and avoid `TypeError: StopIteration` (surfaced during testing the above issue as well).",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 18,
        "deletions": 4,
        "changed_files": 2,
        "created_at": "2022-01-19T19:55:35Z",
        "closed_at": "2022-01-20T10:20:41Z",
        "merged_at": "2022-01-20T10:20:41Z",
        "body": "Minor fix in DynamoDB region for NoSQL Workbench. \r\n\r\nReport from a customer: Interestingly, the request `Authorization` headers seem to be coming through with two different \"region\" specifiers - \"localhost\" and \"local\":\r\n```\r\n20220119/localhost/dynamodb\r\n...\r\n20220119/local/dynamodb\r\n...\r\n```\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 6,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2022-01-19T19:28:13Z",
        "closed_at": "2022-01-30T21:25:54Z",
        "merged_at": "2022-01-30T21:25:54Z",
        "body": "Fixes #5305 \r\n\r\nChanges\r\n1.  More defensive approach when accessing the optional `subject` attribute value.\r\n2. Extended the existing test to verify the behaviour.\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 4174,
        "deletions": 136,
        "changed_files": 34,
        "created_at": "2022-01-19T14:16:08Z",
        "closed_at": "2022-04-01T20:30:51Z",
        "merged_at": "2022-04-01T20:30:51Z",
        "body": "In this PR, we will create a re-implementation of the Lambda executors, to properly support multiple architectures as well as new runtimes, with the use of the Lambda Runtime API (https://docs.aws.amazon.com/lambda/latest/dg/runtimes-api.html).\r\n\r\nThis is a draft PR for the progress.\r\n\r\nTo activate the new provider add `PROVIDER_OVERRIDE_LAMBDA=asf` (note that it is currently not feature complete).\r\n\r\nThis PR will automatically download the specified release of https://github.com/localstack/lambda-runtime-init as \"Runtime Init\".\r\n\r\nConfiguration options:\r\n\r\n- `LAMBDA_PREBUILD_IMAGES=1` (defaults to `0`) toggles the building of a lambda version specific container image that includes the code and init before any invoke happens instead of copying them into the container before each invoke. This is actually fairly simillar to the AWS behavior since they also have some initial \"optimization\" of Lambdas when creating a function. Unfortunately it involves a significant overhead in initial total execution time (from create to an invoke result), so for many single-use lambdas this heavily reduces performance.\r\n\r\n```mermaid\r\nsequenceDiagram\r\n    participant LS as LocalStack Endpoint\r\n    participant RAPID as Runtime Init\r\n    participant RIC as Runtime Interface Client\r\n    LS-)RAPID: Start Container\r\n    RAPID-)RIC: Start RIC\r\n    alt Init success\r\n        RIC->>RAPID: next()\r\n        RAPID->>LS: Done\r\n    else\r\n        RIC->>RAPID: InitError\r\n        RAPID->>LS: DoneError\r\n    end\r\n    loop per invocation\r\n        LS-)RAPID: Invoke(id)\r\n\r\n        RAPID-->>+RIC: next: Invocation(id)\r\n        alt Invocation Success\r\n            RIC->>RAPID: InvocationResult(id)\r\n        else\r\n            RIC->>RAPID: InvocationError(id)\r\n        end\r\n        par Rapid to LocalStack\r\n            alt Invocation Success\r\n                RAPID->>LS: Response(id)\r\n            else\r\n                RAPID->>LS: ErrorResponse(id)\r\n            end\r\n        and RIC to Rapid\r\n            RIC->>-RAPID: next()\r\n        end\r\n    end\r\n```\r\n\r\n```mermaid\r\nflowchart TD\r\n    API[Lambda API]\r\n    SERVICE[Lambda Service]\r\n    REPO[Repository]\r\n    VM[Version Manager]\r\n    ENV[Environment]\r\n    EXEC[Executor]\r\n    EXEC-CONN[Executor Connection]\r\n    subgraph CONTAINER\r\n        RAPID\r\n    end\r\n    API --> SERVICE\r\n    SERVICE --> REPO\r\n    SERVICE --> VM\r\n    VM --> ENV\r\n    ENV --> EXEC\r\n    EXEC <--> EXEC-CONN\r\n    EXEC-CONN -- invokes --> RAPID\r\n    RAPID -- result/status --> EXEC-CONN\r\n    EXEC -- starts/stops --> CONTAINER\r\n```",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 17,
        "deletions": 4,
        "changed_files": 2,
        "created_at": "2022-01-19T10:07:40Z",
        "closed_at": "2022-01-19T11:31:38Z",
        "merged_at": "2022-01-19T11:31:38Z",
        "body": "This PR fixes problems with the ASF parser, in particular regarding rest-json protocols.\r\n\r\n1. If a Header field is set, but the header is not present, the payload attribute was not defined. This is fixed now.\r\n2. If the service definition specifies a payload, but part of the necessary data is also present in other shapes (like an uri shape), they were not parsed. This is also fixed now.\r\n\r\nAlso added a little test that checks the behavior we experienced.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 117,
        "deletions": 1,
        "changed_files": 4,
        "created_at": "2022-01-19T08:43:32Z",
        "closed_at": "2022-01-20T08:00:44Z",
        "merged_at": "2022-01-20T08:00:44Z",
        "body": "This PR provides a utility (`common#external_service_ports`) to reserve ports for external services (like elasticsearch clusters, external databases,...) for a short period of time.\r\nIt can check for a specific port (within a configured range) or otherwise tries to find the first free non-reserved port within the configured range.\r\nIt is important to check that a given specific port is within the configured range, since localstack is by default started within its Docker container (where the configured port range needs to be published).\r\n\r\nThis change itself does not break anything, however as soon as the external ports are used, the docker-compose files (or other means of creating the docker container other than using the CLI) of non-pro users might need to be adjusted (such that they also publish the external service port range). Therefore, this PR also adjusts the example `docker-compose.yaml`.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 134,
        "deletions": 24,
        "changed_files": 3,
        "created_at": "2022-01-18T23:50:23Z",
        "closed_at": "2022-01-20T16:43:32Z",
        "merged_at": "2022-01-20T16:43:32Z",
        "body": "attempts a fix for #5297 by\r\n\r\n* escaping strings using HTML encoding\r\n* adding XML declarations (not complete yet, just for errors)\r\n* adds Content-Encoding: text/xml headers",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 7,
        "deletions": 58,
        "changed_files": 3,
        "created_at": "2022-01-18T19:03:16Z",
        "closed_at": "2022-01-19T08:16:40Z",
        "merged_at": "2022-01-19T08:16:39Z",
        "body": "Cleanup CloudFormation logic and remove old/obsolete code and references to `moto`.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 40,
        "deletions": 17,
        "changed_files": 2,
        "created_at": "2022-01-18T17:50:59Z",
        "closed_at": "2022-01-18T19:38:05Z",
        "merged_at": "2022-01-18T19:38:05Z",
        "body": "Since the PR spulec/moto#4732 is merged in upstream, the patch we are using now can be removed .\r\nThe `TODO` in the patch were addressed (while fixing the issue #5000)  in the merged PR in the upstream. \r\n\r\nAdded Integration test to verify, only the unique metrics(unique combinations of name, namespace and dimensions)  are returned.\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 12,
        "deletions": 7,
        "changed_files": 1,
        "created_at": "2022-01-18T17:21:48Z",
        "closed_at": "2022-01-20T18:25:04Z",
        "merged_at": "2022-01-20T18:25:04Z",
        "body": "**Description**\r\nWhen using `elasticmq` as `SQS_PROVIDER` messages created from an SNS subscription to an SQS fifo queue fail due to missing required `MessageGroupId` and `MessageDeduplicationId` params. \r\n\r\n**Reproduce**\r\n```sh\r\nawslocal sqs create-queue --queue-name test.fifo --attributes \"FifoQueue=true,ContentBasedDeduplication=false\"\r\nawslocal sns create-topic --name test.fifo --attributes \"FifoTopic=true,ContentBasedDeduplication=false\"\r\nawslocal sns subscribe --protocol sqs --notification-endpoint \"http://localhost:4566/000000000000/test.fifo\" --topic-arn \"arn:aws:sns:eu-central-1:000000000000:test.fifo\"\r\n```\r\n\r\n```sh\r\nawslocal sns publish --topic-arn \"arn:aws:sns:eu-central-1:000000000000:test.fifo\" --message \"test\" --message-group-id \"1234\" --message-deduplication-id \"1234\"\r\n```\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 7,
        "changed_files": 1,
        "created_at": "2022-01-18T14:39:57Z",
        "closed_at": "2022-01-18T19:02:38Z",
        "merged_at": "2022-01-18T19:02:38Z",
        "body": "Tiny change that should fix an issue we're currently seeing in our CI builds (if node.js Lambda handlers are returning `undefined` instead of a Thenable):\r\n\r\n```\r\nTypeError: Cannot read property 'then' of undefined\r\n    at [eval]:1:1082\r\n    at Script.runInThisContext (vm.js:134:12)\r\n    at Object.runInThisContext (vm.js:310:38)\r\n    at internal/process/execution.js:81:19\r\n    at [eval]-wrapper:6:22\r\n    at evalScript (internal/process/execution.js:80:60)\r\n    at internal/main/eval_string.js:27:3   File \"/opt/code/localstack/localstack/services/awslambda/lambda_executors.py\", line 1370, in _execute\r\n```\r\n\r\n(On a side note, the way we're passing the args to the node process could be problematic from a security PoV. This entire logic may become obsolete once we move to the new Lambda executor - yet worthwhile fixing for now)",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 146,
        "deletions": 6,
        "changed_files": 4,
        "created_at": "2022-01-18T07:39:50Z",
        "closed_at": "2022-01-20T21:26:24Z",
        "merged_at": "2022-01-20T21:26:24Z",
        "body": "Lazily creates a utility lambda when encountering a lambda invoke call to the `localstack-internal-awssdk` function.\r\n\r\nThis is used in tandem with https://github.com/localstack/localstack-artifacts/pull/5 to patch in `aws-sdk` support for the stepfunctions api as a temporary workaround until the image at https://hub.docker.com/r/amazon/aws-stepfunctions-local is updated with the corresponding features.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 21,
        "deletions": 19,
        "changed_files": 4,
        "created_at": "2022-01-16T15:32:57Z",
        "closed_at": "2022-01-16T17:22:18Z",
        "merged_at": "2022-01-16T17:22:18Z",
        "body": "Minor fixes:\r\n* Remove obsolete moto imports in CloudFormation resource classes /cc @dominikschubert \r\n* Fix/refactor some patches with the new decorator",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 31,
        "deletions": 13,
        "changed_files": 2,
        "created_at": "2022-01-13T19:37:33Z",
        "closed_at": "2022-01-22T13:37:38Z",
        "merged_at": "2022-01-22T13:37:38Z",
        "body": "This PR should fix https://github.com/localstack/localstack/issues/4095. It took me a little while to figure out what was causing boto to throw a base64 decode error when retrieving records from Kinesis, but ultimately I identified two problems:\r\n\r\n* The Kinesis tests make faulty assumptions about how kinesis/boto handle record encoding/decoding\r\n* The `subscribe_to_shard` function has a special case for re-encoding records when talking to a Java client, but in fact this should happen always.\r\n\r\nAccording to the [Kinesis docs](https://docs.aws.amazon.com/kinesis/latest/APIReference/API_PutRecordsRequestEntry.html), Kinesis expects records to consist of base64 encoded data when you `PUT` them to the API. However, boto takes care of this for you behind the scenes: it automatically base64 encodes your data before it sends it to the API, and automatically decodes it when you retrieve the records. To sanity check this, I wrote this simple script for creating a stream, putting a record, and retrieving it.\r\n```\r\nimport boto3\r\nfrom time import sleep\r\nboto3.set_stream_logger(name='botocore')\r\n\r\nclient = boto3.client('kinesis')\r\nclient.create_stream(StreamName='test', ShardCount=1)\r\nsleep(10)\r\nclient.put_record(StreamName='test', Data='this is raw data', PartitionKey='foo')\r\n\r\niterator = client.get_shard_iterator( StreamName=\"test\", ShardId='shardId-000000000000', ShardIteratorType='TRIM_HORIZON')[\"ShardIterator\"]\r\n\r\nresult = client.get_records(ShardIterator=iterator)\r\nprint(result)\r\n```\r\nI made boto do verbose logging so that we can see the request and response bodies. I won't include the full output here because it includes sensitive data, but here are some snippets that illustrate that the record data is automatically encoded before it is sent and after it is retrieved:\r\n```\r\n[...]\r\n# sending record, note that the data is automatically encoded\r\n2022-01-13 12:33:21,902 botocore.hooks [DEBUG] Event before-call.kinesis.PutRecord: calling handler <function inject_api_version_header_if_needed at 0x11003cb80>\r\n2022-01-13 12:33:21,902 botocore.endpoint [DEBUG] Making request for OperationModel(name=PutRecord) with params: {'url_path': '/', 'query_string': '', 'method': 'POST', 'headers': {...}, 'body': b'{\"StreamName\": \"test\", \"Data\": \"dGhpcyBpcyByYXcgZGF0YQ==\", \"PartitionKey\": \"foo\"}', 'url': 'https://kinesis.us-east-1.amazonaws.com/', 'context': {...}}\r\n\r\n[...]\r\n\r\n# API response for getting record\r\n2022-01-13 12:33:23,011 botocore.parsers [DEBUG] Response body:\r\nb'{\"MillisBehindLatest\":0,\"NextShardIterator\":\"...\",\"Records\":[{\"ApproximateArrivalTimestamp\":1.642102402844E9,\"Data\":\"dGhpcyBpcyByYXcgZGF0YQ==\",\"PartitionKey\":\"foo\",\"SequenceNumber\":\"...\"}]}'\r\n\r\n# finally printing the resulting records at the end of the script. Note how boto automatically decoded the record data.\r\n{'Records': [{'SequenceNumber': '...', 'ApproximateArrivalTimestamp': '...', 'Data': b'this is raw data', 'PartitionKey': 'foo'}], 'NextShardIterator': ...}\r\n```\r\n\r\nJudging by the way the tests were written, it seems like we assumed that boto would automatically decode record data blobs, but not automatically encode them. I fixed this and added a more comprehensive test to ensure that unicode can be properly encoded/decoded as well.\r\n\r\nFinally, it seems like this bug sort of surfaced in the past because of [this](https://github.com/localstack/localstack/blob/master/localstack/services/kinesis/kinesis_listener.py#L338) special case for re-encoding records for Java clients. In fact, we should always re-encode here because the prior call to `get_records()` gives us automatically decoded records, so we must re-encode them before returning them to the client.",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 50,
        "deletions": 3,
        "changed_files": 3,
        "created_at": "2022-01-13T15:54:26Z",
        "closed_at": "2022-01-14T18:06:44Z",
        "merged_at": "2022-01-14T18:06:44Z",
        "body": "This PR mappes the ExpiredIteratorException from the boto3 kinesis getrecords call to the identically named exception for DynamoDBstreams.\r\n\r\nThis results in clients like the [DynamoDB Streams Kinesis Adapter](https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/Streams.KCLAdapter.html) to correctly map the exception back to kinesis and request a new shard iterator if needed.\r\n\r\nThis is a first hotfix for the issues with expiring shard iterators for dynamodbstreams.\r\n\r\nFuture iterations should contain a 15 minutes shard expiration time instead of the current 5 minutes forced by the kinesis-mock backend.\r\n\r\nAlso, this PR bumps kinesis-mock to version 0.2.2, to fix issue https://github.com/etspaceman/kinesis-mock/issues/260 and achieve more parity with AWS, and reducing the occurrence of ExpiredShardIterator exceptions if no records are recieved for 5 minutes.\r\n\r\nAddresses #5182 \r\n\r\n@SwatsonCodes Slight changes in kinesis/kinesis tests, FYI",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 32,
        "deletions": 47,
        "changed_files": 6,
        "created_at": "2022-01-12T23:08:56Z",
        "closed_at": "2022-01-14T08:39:11Z",
        "merged_at": "2022-01-14T08:39:10Z",
        "body": "Apply fixes for recent upstream moto changes. In particular, the creation of model backends has changed, as well as the logic around default/main associations in route tables [here](https://github.com/spulec/moto/pull/4726). \r\n\r\nChanges were not yet fully verified against AWS, but parity of the EC2 changes has been verified against AWS as  per [this PR comment]([here](https://github.com/spulec/moto/pull/4726)).",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 9,
        "deletions": 3,
        "changed_files": 2,
        "created_at": "2022-01-11T23:43:57Z",
        "closed_at": "2022-01-12T11:45:37Z",
        "merged_at": "2022-01-12T11:45:37Z",
        "body": "Fixes https://github.com/localstack/localstack/issues/5226\r\n\r\nThis PR splits the pattern matching into two loops to force precedence. Another issue found was the call to get the stage, for some reason, the API deployment with terraform doesn't set up a \"local\" stage. For those cases, we ignore the stage variables.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 153,
        "deletions": 2,
        "changed_files": 6,
        "created_at": "2022-01-11T22:00:21Z",
        "closed_at": "2022-01-25T20:32:46Z",
        "merged_at": "2022-01-25T20:32:46Z",
        "body": "Addresses #5143. After a stack has been set up. Calling the command put-record to the Firehose service crashes.\r\n\r\nChanges:\r\n- Condition added to avoid calling an attribute on a None.\r\n",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 22,
        "deletions": 4,
        "changed_files": 2,
        "created_at": "2022-01-11T18:53:05Z",
        "closed_at": "2022-01-12T19:50:13Z",
        "merged_at": "2022-01-12T19:50:13Z",
        "body": "This PR addresses issue #5111. Even thought the user found out the solution to the problem, this [documentation](https://docs.aws.amazon.com/sdk-for-php/v3/developer-guide/guide_credentials_anonymous.html) shows that it should be possible to access an S3 bucket or an S3 key with anonymous credentials (only if the policy allows it but i don't think that's necessary) \r\n\r\nChanges:\r\n- Redirect the GET or HEAD requests to S3 if there is an URI.\r\n- Test to assert access to key with anonymous credentials.\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 8,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2022-01-11T17:07:28Z",
        "closed_at": "2022-01-14T13:20:19Z",
        "merged_at": "2022-01-14T13:20:19Z",
        "body": "Currently, when using the localstack CLI, it will mount the tmp folder both on host and in the container in the same path, due to the usage of the TMP_FOLDER variable here (same for DATA_DIR).\r\n\r\nWhile this most likely works on most systems, it leads to a major problem when using the CLI on windows hosts, since the paths will not match (see #5173).\r\n\r\nThis PR changes the container side of the directories to the default directories before this change happened, with an option to override by environment variable.\r\n\r\nFor DATA_DIR, note that this variable will be set by the CLI into the container, so we can respect this variable if we are in docker.\r\nThe functions folder is not changed, since it is currently used as path on the host only.\r\n\r\nThings left to do:\r\n\r\n- [x] Test if this fix will allow execution on Windows\r\n- [ ] Release new version of LocalStack",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 16,
        "deletions": 4,
        "changed_files": 5,
        "created_at": "2022-01-11T12:11:38Z",
        "closed_at": "2022-01-14T12:45:31Z",
        "merged_at": "2022-01-14T12:45:31Z",
        "body": "Minor fixes in patch for bound methods of class instances. This resolves an issue where patches cannot be re-applied to bound methods as they are reloaded from persistence. \r\n\r\nThe change slightly modifies the interface of patched methods (adding `self` as a required parameter), but that is actually a fair assumption for bound methods, which are always executing in the context of a `self` instance. (Still need to verify in which places we need to update the patch targets - so far only spotted `iam_backend_detach_role_policy` and `put_subscription_filter` in this codebase.)",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 188,
        "deletions": 126,
        "changed_files": 6,
        "created_at": "2022-01-11T10:40:38Z",
        "closed_at": "2022-01-12T20:59:02Z",
        "merged_at": "2022-01-12T20:59:02Z",
        "body": "This change allows us to hook into the Lambda execution and perform modifications to the container configuration before execution.\r\nAt various points of the code base, it is now possible to hook into the execution if needed, and modify its parameters.\r\n\r\nIn addition to introducing a ContainerConfiguration and LambdaContainerConfiguration class used for this purpose, there was also some cleanup of leftover logic:\r\n\r\n* If LAMBDA_REMOTE_DOCKER was true, multiple copies into the container could take place, potentially slowing down the first invocation unnecessarily.\r\n* Removed leftovers of `six` in lambda code\r\n* Remove logic for using `run` instead of `create` and `start` if `LAMBDA_REMOTE_DOCKER=false`, since this code adds complexity and is basically identical anyway.\r\n* Especially if `LAMBDA_REMOTE_DOCKER=True`, the removing of the container can take a little bit more time than with volume mounts. This leads to the `test_destroy_idle_containers` test to become flaky, which is now fixed using a retry.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 10,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2022-01-10T07:32:28Z",
        "closed_at": "2022-01-10T18:04:02Z",
        "merged_at": "2022-01-10T18:04:02Z",
        "body": "Resolves #4484.",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 33,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2022-01-10T07:20:38Z",
        "closed_at": "2022-01-10T11:24:33Z",
        "merged_at": "2022-01-10T11:24:33Z",
        "body": "Added a check for supported protocols when subscribing to a sns topic.\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 1561,
        "deletions": 61,
        "changed_files": 36,
        "created_at": "2022-01-08T19:48:02Z",
        "closed_at": "2022-06-05T13:49:41Z",
        "merged_at": "2022-06-05T13:49:41Z",
        "body": "## Summary\r\n\r\nThis PR adds an HTTP request handling framework based on the chain of responsibility pattern, where requests are processed by Handlers that are part of a Handler Chain. This framework replaces the edge proxy, generic proxy, and http2_server.  It provides a clean interface for serving a Gateway (a request -response interface) through ASGI or WSGI.\r\n\r\nThe behavior of LocalStack is implemented in the `LocalstackGateway`, and can be served directly through hypercorn (try `python -m localstack.aws.app` for serving it directly without bootstrapping)\r\n\r\nIt can be enabled by setting `LEGACY_EDGE_PROXY=0`.\r\n\r\nThe current version only works for community. Pro integration will be done in a second iteration (pro test failures are expected). A proper developer documentation will be provided then.\r\n\r\n## PRs\r\n\r\nThe following PRs were the result of the changes developed in this PR.\r\n* #5478 \r\n* #5734\r\n* #5876\r\n* #5970 \r\n* #6040 \r\n* #6006\r\n* #6012\r\n* #6190 \r\n* #6191\r\n* #6192 \r\n* ... and many other fixes and extensions in the asf code, many of which @alexrashed has contributed\r\n\r\n## Tasks\r\n- [x] Implement new HTTP request handling (while not breaking the previous functionality).\r\n- [x] Migrate current features of the edge proxy (service detection,...) into separate handlers.\r\n- [x] Fix all community integration tests with the new request handling enabled.\r\n- [x] Hide the new functionality behind a feature flag (opt-in).\r\n- [x] Make the PR smaller by pulling out sub-PRs for dependent changes in master\r\n- [x] Add documentation for the handler chain framework\r\n- [x] Final polishing iteration\r\n- [x] PR review\r\n- [x] change default value of `LEGACY_EDGE_PROXY` back to 1 and run one last test",
        "comments": 43
    },
    {
        "merged": true,
        "additions": 180,
        "deletions": 5,
        "changed_files": 2,
        "created_at": "2022-01-08T17:34:46Z",
        "closed_at": "2022-01-22T11:52:13Z",
        "merged_at": "2022-01-22T11:52:13Z",
        "body": "Addresses #5057 \r\nFollow up to #5215\r\n\r\nExtended  SNS `PublishBatch` API to support FIFO Topics and common API specific exceptions.\r\n\r\n\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 7,
        "deletions": 8,
        "changed_files": 5,
        "created_at": "2022-01-07T20:27:46Z",
        "closed_at": "2022-01-07T22:31:01Z",
        "merged_at": "2022-01-07T22:31:01Z",
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\nUpdate Terraform version, AWS provider version, and API Gateway module version in integration tests.\r\n\r\nI started looking into this as part of my investigation into https://github.com/localstack/localstack/issues/5197. The root of the issue seems to have been with AWS provider `3.70.0`. Our tests failed to detect this compatibility issue because they are using outdated dependencies.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 10,
        "deletions": 4,
        "changed_files": 3,
        "created_at": "2022-01-07T17:16:38Z",
        "closed_at": "2022-01-08T02:14:23Z",
        "merged_at": "2022-01-08T02:14:23Z",
        "body": "Add config for host path to fix mounting of libs_dir - resolves the `TODO` that's currently in the code. This resolves the current behavior where libs (e.g., Azure specs) are re-downloaded on every `localstack start` (as the `var_libs` volume mount gets removed from the dict and is not being added to `docker run ...` in certain situations).\r\n\r\nPR also contains a minor increase in the timeout for the Lambda API (from 5 to 10 secs), to help debug a customer issue.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 32,
        "deletions": 3,
        "changed_files": 3,
        "created_at": "2022-01-07T11:21:16Z",
        "closed_at": "2022-01-07T16:18:08Z",
        "merged_at": "2022-01-07T16:18:08Z",
        "body": "Branch to make External Hostnames available for the new asf SQS provider available\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 16,
        "deletions": 33,
        "changed_files": 1,
        "created_at": "2022-01-06T23:24:14Z",
        "closed_at": "2022-01-07T18:44:53Z",
        "merged_at": "2022-01-07T18:44:53Z",
        "body": "Follow up to #5215\r\n\r\nRefactored  SNS `get_message_attributes()` to use [parse_urlencoded_data(..)]((https://github.com/localstack/localstack/blob/10a51f8a09146125970ba49122704d6f1faf1985/localstack/utils/aws/aws_responses.py#L365-L377)) to extract the message attributes and added helper method `prepare_messae_attrtibutes()`  to prepare the attributes as per our needs.\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 6,
        "deletions": 6,
        "changed_files": 3,
        "created_at": "2022-01-06T14:03:02Z",
        "closed_at": "2022-01-17T08:22:58Z",
        "merged_at": "2022-01-17T08:22:57Z",
        "body": "Fixes #5233",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 55,
        "deletions": 4,
        "changed_files": 1,
        "created_at": "2022-01-06T11:12:05Z",
        "closed_at": "2022-01-07T09:50:16Z",
        "merged_at": "2022-01-07T09:50:16Z",
        "body": "Add test case for SQS DLQ chaining - addresses #5225\r\n\r\nThis currently fails against the default SQS provider (moto), but works against the SQS ASF provider (setting `PROVIDER_OVERRIDE_SQS=asf`). This is great! \ud83c\udf89  - and yet another reason to make ASF the default provider soon-ish \ud83d\udc4d :) ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2022-01-06T09:30:18Z",
        "closed_at": "2022-01-07T10:06:57Z",
        "merged_at": "2022-01-07T10:06:56Z",
        "body": "This PR addresses the issue https://github.com/localstack/localstack/issues/4224 and provides a fix for the edge case of the s3 prefix being empty on s3 upload by the firehose service.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 80,
        "deletions": 23,
        "changed_files": 7,
        "created_at": "2022-01-05T20:58:14Z",
        "closed_at": "2022-01-06T10:44:21Z",
        "merged_at": "2022-01-06T10:44:20Z",
        "body": "Minor changes to fix CloudFormation deployment of SNS::TopicPolicy (`fetch_state(..)` method currently still missing, which can lead to failed deployments). /cc @dominikschubert ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 158,
        "deletions": 26,
        "changed_files": 3,
        "created_at": "2022-01-04T19:32:06Z",
        "closed_at": "2022-01-08T18:32:35Z",
        "merged_at": "2022-01-08T18:32:35Z",
        "body": "This PR adds code utilities and mechanisms to migrate services to the new ASF as described in #5222 \r\n\r\n* adds the `AsfWithFallbackListener` and `AsfWithPersistingFallbackListener` as described in #5222 \r\n* SNS example can be found in the [asf-migration-sns](https://github.com/localstack/localstack/tree/asf-migration-sns) branch in da433bdd8b571e43e67ca214438d4a32f41e85ac. however, this would currently break the pro SNS provider that needs to be updated.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 48,
        "deletions": 35,
        "changed_files": 2,
        "created_at": "2022-01-04T17:10:57Z",
        "closed_at": "2022-03-03T16:38:34Z",
        "merged_at": "2022-03-03T16:38:34Z",
        "body": "Push Docker images to public ECR registry on CI build - addresses #5159\r\n\r\nAWS has recently released pull-through caches for ECR, but unfortunately Docker Hub repos are not supported yet: https://github.com/aws/containers-roadmap/issues/1581\r\n\r\n**WIP - please do not merge yet!**\r\n\r\nThis is only a first PoC - @alexrashed would be great if you could help out with some testing & polishing, especially around the multi-arch manifests \ud83d\udc4d (not super time critical, though). ",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 83,
        "deletions": 37,
        "changed_files": 4,
        "created_at": "2022-01-04T13:35:38Z",
        "closed_at": "2022-01-04T16:50:52Z",
        "merged_at": "2022-01-04T16:50:52Z",
        "body": "* Add support for gzipped responses in SSL proxy via Accept-Encoding headers\r\n* Minor refactorings: \r\n   * add/restructure type hints in SNSBackend\r\n   * remove obsolete `six` imports ",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 4,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2022-01-03T22:21:07Z",
        "closed_at": "2022-01-04T09:42:41Z",
        "merged_at": null,
        "body": "This PR fixes the order of precedence of fallbacks to obtain the region.\r\n\r\nI reproduced the issue where a region couldn't be determined or wrongly determined with the following scenario:\r\n\r\n[openapi.json](https://gist.github.com/calvernaz/737625957a947b1e1fb460f4015a8059)\r\n```\r\nawslocal  apigateway import-rest-api --fail-on-warnings --body 'file://openapi.json'\r\n```\r\n\r\n* awslocal is configured to use the `eu-west-1` region.\r\n\r\nThe following request will fail with an error saying the API can't be found - in fact the API exists but not in the region where is being searched (fallback is using the default region `us-east-1`).\r\n\r\n```\r\ncurl \"http://localhost:4566/restapis/<rest-api-id>/local/_user_request_/pets\"\r\n```\r\n\r\nThis PR fixes the issue above giving precedence to boto which gets the region from the local configuration, however, it should have never gotten this low in the chain of fallbacks.\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 44,
        "deletions": 13,
        "changed_files": 2,
        "created_at": "2022-01-03T14:53:54Z",
        "closed_at": "2022-01-03T21:56:06Z",
        "merged_at": "2022-01-03T21:56:05Z",
        "body": "Fix #5122.\r\n\r\nThis PR extends the current route matching implementation for cases where there is more than one match for `{proxy+}` resources. \r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 164,
        "deletions": 34,
        "changed_files": 4,
        "created_at": "2022-01-02T20:00:43Z",
        "closed_at": "2022-01-17T21:07:59Z",
        "merged_at": "2022-01-17T21:07:59Z",
        "body": "This PR addresses small fixes and tests in regards to the currently open aws:sqs labeled issues. Especially:\r\n#5225 addresses port extraction from headers\r\n#3671 this was not recreatable\r\n#4287 confirmed to be fixed in new provider",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 146,
        "deletions": 9,
        "changed_files": 3,
        "created_at": "2022-01-02T17:16:30Z",
        "closed_at": "2022-01-06T12:52:47Z",
        "merged_at": "2022-01-06T12:52:47Z",
        "body": "Addresses #5057 \r\n\r\n- This PR adds the basic usage of `PublishBatch API` for the normal topic .\r\n- Added the integration test to publish messages from `SNS` to `SQS` using `PublishBatch`\r\n- In the follow-up PR, will address the usage and test for `FIFO` topics and API specific exceptions like `TooManyEntriesInBatchRequest`",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 33,
        "deletions": 4,
        "changed_files": 3,
        "created_at": "2022-01-02T00:37:07Z",
        "closed_at": "2022-01-02T21:21:45Z",
        "merged_at": "2022-01-02T21:21:44Z",
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n\r\nThis PR fixes https://github.com/localstack/localstack/issues/4532\r\n\r\nAWS documentation is not super clear regarding the header casing. For the lambda integration, only some headers are lowercased, for example the headers starting with 'accept'.\r\n\r\nThis PR leaves headers untouched unless they are \"accept\" headers.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 117,
        "deletions": 20,
        "changed_files": 5,
        "created_at": "2022-01-01T21:56:17Z",
        "closed_at": "2022-01-02T22:21:27Z",
        "merged_at": "2022-01-02T22:21:27Z",
        "body": "Fixes https://github.com/localstack/localstack/issues/5125\r\n\r\nUsing HTTP_PROXY integration using proxy resources should include all sub-resources and query parameters. This PR adds the query parameters to the resolved uri. ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 316,
        "deletions": 0,
        "changed_files": 7,
        "created_at": "2021-12-30T22:43:29Z",
        "closed_at": "2021-12-31T12:57:33Z",
        "merged_at": "2021-12-31T12:57:33Z",
        "body": "Adds support for dynamic references in CloudFormation such as:\r\n\r\n```yaml\r\nProperties:\r\n      TopicName: \"{{resolve:secretsmanager:mytopicname}}\"\r\n\r\n```\r\n\r\nSee: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/dynamic-references.html\r\n\r\nAddresses #5195",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 447,
        "deletions": 378,
        "changed_files": 6,
        "created_at": "2021-12-30T12:01:10Z",
        "closed_at": "2021-12-30T17:18:21Z",
        "merged_at": "2021-12-30T17:18:21Z",
        "body": "* add ability to customize default IAM/STS user - similar to `TEST_AWS_ACCOUNT_ID`, this now allows to specify `TEST_IAM_USER_ID` and `TEST_IAM_USER_NAME` to customize the default user id/name\r\n* small fix for IAM issue reported in #5196\r\n* refactor config values - trying to group configs by service and into logical units (this is just a first step toward config refactoring, more will follow..)\r\n* migrate to using `@patch` decorator for IAM patches\r\n* convert STS tests from `unittest`->`pytest`\r\n\r\nFollow-up items:\r\n- [x] add new config options to docs /cc @HarshCasper could you help out with that please? \ud83d\ude4f ",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2021-12-30T10:48:07Z",
        "closed_at": "2021-12-30T16:34:34Z",
        "merged_at": "2021-12-30T16:34:34Z",
        "body": "Asserting `\"isBase64Encoded\":True` when binary data is sent \r\nIt's follow-up PR to #4272\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 154,
        "deletions": 136,
        "changed_files": 1,
        "created_at": "2021-12-29T19:52:01Z",
        "closed_at": "2022-01-02T13:09:37Z",
        "merged_at": "2022-01-02T13:09:37Z",
        "body": "This PR is an extension of #5175.\r\n\r\nChanges: \r\n- Addition of a negative test that validates the correct parameters for a Fifo SNS message publication and the FIFO queue subscription.\r\n- Migration of all the tests from the file `/tests/integration/test_sns.py` to the pytest format of assertions.\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 204,
        "deletions": 76,
        "changed_files": 7,
        "created_at": "2021-12-29T15:39:42Z",
        "closed_at": "2022-01-03T15:16:46Z",
        "merged_at": "2022-01-03T15:16:46Z",
        "body": "This PR will work towards a automatic docker network detection for lambdas, so `LAMBDA_DOCKER_NETWORK` should only need to be set on very specific edge cases, and not in the normal docker-compose case.\r\n\r\nThis PR introduces a new behavior:\r\n\r\n- per default, Lambda containers will be spawned connected to the same network as LocalStack itself. If there are multiple applicable, it will take the first in the list of `docker container inspect`.\r\n- In host mode, the endpoint detection will fallback to `172.17.0.1`, which is accepted since host mode is not supported. In host mode, lambdas will be spawned as well in host mode with all the disadvantages that brings. Use `LAMBDA_DOCKER_NETWORK=bridge` to force the \"old\" behavior in host mode (still not officially supported)\r\n- If LocalStack is connected to multiple networks, you can still use `LAMBDA_DOCKER_NETWORK` to force the use of a specific one (instead of the first defined for the container).\r\n- The LocalStack endpoint for lambdas will be automatically set to the endpoint matching the lambda docker network. If you have two networks connected to LocalStack, and force the use of one with `LAMBDA_DOCKER_NETWORK`, the endpoint for the lambda will be the interface address of LocalStack matching that network.\r\n\r\nThere are also changes to the Container client, which will now return a list of networks (since multiple are possible) instead of the primary network for a container. Also, if at runtime connected/disconnected from networks, this should now be reflected correctly.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 202,
        "deletions": 37,
        "changed_files": 6,
        "created_at": "2021-12-29T10:50:24Z",
        "closed_at": "2021-12-29T17:43:38Z",
        "merged_at": "2021-12-29T17:43:38Z",
        "body": "After the rework in #4866 , it seems like the elasticsearch connector for firehose was not adapted correctly. (it always used the localhost:4571 endpoint instead of the newly introduced ones).\r\n\r\nThis PR fixes this behavior and introduces a integration test to test kinesis-firehose-elasticsearch integration to prevent future regression.\r\n\r\nAlso this PR introduces the AllDocuments S3 backup strategy for ElasticSearch destinations, basic functionality tested with the same test. This backup strategy uses the unprocessed (no lambdas etc) records to backup them into S3. This feature should be seen as incomplete, as it might differ from AWS in terms of buffering multiple records into one file etc.\r\n\r\nThere is also a small change in the UrlMatchingForwarder, since in host mode, the edge proxy can drop the :443 port when using https and forwarding, so the rules will not match anymore. Mismatches against port 80 and 443 will now no longer prevent a successful match.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2021-12-29T10:36:09Z",
        "closed_at": "2021-12-29T19:27:20Z",
        "merged_at": "2021-12-29T19:27:20Z",
        "body": "For versions of TimescaleDB > 2.4 a newer version of PostgreSQL is required. To avoid a chained change that would require testing in all the services that use PostgreSQL, I pushed to the latest version of TImescaleDB that is supported in PostgreSQL 11 (our current version).\r\n\r\nThis PR updates TimescaleDB to version **2.3.1**\r\n\r\n## Verification Steps\r\n\r\n1. Pull this branch and run,\r\n\r\n```\r\nmake docker-build\r\n```\r\n\r\n2. Then run the built container with your API key.\r\n```\r\ndocker run --rm --name localstack_main -v /tmp/localstack:/tmp/localstack -e SERVICES=timestream -e LOCALSTACK_API_KEY=$LOCALSTACK_API_KEY -p 4566:4566 -e DEBUG=1 localstack/localstack-full\r\n```\r\n\r\n3. Run the following commands against timestream, the last command should return the inserted values.\r\n```\r\nawslocal timestream-write create-database --database-name timeStreamDB\r\nawslocal timestream-write create-table --database-name timeStreamDB --table-name timeStreamTable\r\n\r\nawslocal timestream-write write-records --database-name timeStreamDB --table-name timeStreamTable --records '[{\"MeasureName\":\"cpu\",\"MeasureValue\":\"60\",\"TimeUnit\":\"SECONDS\",\"Time\":\"1636986409\"}]'\r\n\r\nawslocal timestream-write write-records --database-name timeStreamDB --table-name timeStreamTable --records '[{\"MeasureName\":\"cpu\",\"MeasureValue\":\"80\",\"TimeUnit\":\"SECONDS\",\"Time\":\"1636986412\"}]'\r\n\r\nawslocal timestream-write write-records --database-name timeStreamDB --table-name timeStreamTable --records '[{\"MeasureName\":\"cpu\",\"MeasureValue\":\"70\",\"TimeUnit\":\"SECONDS\",\"Time\":\"1636986414\"}]'\r\n\r\nawslocal timestream-query query --query-string \"SELECT CREATE_TIME_SERIES(time, measure_value::double) as cpu FROM timeStreamDB.timeStreamTable WHERE measure_name='cpu'\"\r\n```\r\n\r\n4. Login into the container with\r\n```\r\ndocker exec -ti localstack_main bash\r\n```\r\n\r\nThen, connect to the postgresql server with, \r\n```\r\npsql -p 52169 -h 127.0.0.1 -U test\r\n\r\n```\r\nThen, run the following SQL query to determine TimescaleDB version,\r\n```\r\nSELECT default_version, installed_version FROM pg_available_extensions where name = 'timescaledb';\r\n```\r\nand it should output something like,\r\n```\r\n default_version | installed_version \r\n-----------------+-------------------\r\n 2.3.1           | \r\n(1 row)\r\n```\r\n\r\nTthe integration tests are passing,\r\n\r\n```\r\ntests/integration/test_timestream.py::TestTimestream::test_timestream_query PASSED\r\ntests/integration/test_timestream.py::TestTimestream::test_query_pagination PASSED\r\ntests/integration/test_timestream.py::TestTimestream::test_query_special_functions PASSED\r\n```",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2021-12-27T15:57:33Z",
        "closed_at": "2021-12-27T18:39:13Z",
        "merged_at": "2021-12-27T18:39:12Z",
        "body": "Fixes #5193 .\r\n\r\nAllows the PROVIDER_OVERRIDE variable to be passed to the CLI-started docker container. Also, service names are lowercase and contain dashes, so a mapping is introduced to transform e.g. `PROVIDER_OVERRIDE_RESOURCE_GROUPS` to `resource-groups`.",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 8,
        "changed_files": 2,
        "created_at": "2021-12-27T14:10:50Z",
        "closed_at": "2021-12-27T16:04:12Z",
        "merged_at": "2021-12-27T16:04:12Z",
        "body": "Currently, the condition on line plugins.py:516 does not match the adding-service in line plugins.py:273. Once, as key, the name is added, in the other case, at the assertion if the service is already present, the whole class is the key.\r\n\r\nThis leads to a possible race condition where two ServiceContainers exist, for the same Service, with different states and different locks, and can lead to multiple starts of a service (as in #5160 with SQS).\r\nThis, until now, did not surface since most services can be created multiple time without too-serious issues, but the patch utility decorator introduced in #5024 does not allow this anymore and will fail the whole service (the second service fails, but already replaced the first at this point).\r\n\r\nTo make startup of sqs clearer, I removed one of the startup messages, since it is otherwise printed twice, and since it uses the logger of infra, makes things harder to debug.\r\n\r\nThe race condition was quite hard to reproduce in the case of sqs, since line sqs_starter.py:59-60 has another condition in there, which can prevent the initialization of the second service.\r\n\r\nShould address #5160",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2021-12-27T01:57:20Z",
        "closed_at": "2021-12-28T12:19:15Z",
        "merged_at": "2021-12-28T12:19:15Z",
        "body": "[![WhiteSource Renovate](https://app.renovatebot.com/images/banner.svg)](https://renovatebot.com)\n\nThis PR contains the following updates:\n\n| Package | Type | Update | Change |\n|---|---|---|---|\n| python | stage | digest | `95db858` -> `dae221b` |\n\n---\n\n### Configuration\n\n\ud83d\udcc5 **Schedule**: \"before 3am on Monday\" (UTC).\n\n\ud83d\udea6 **Automerge**: Disabled by config. Please merge this manually once you are satisfied.\n\n\u267b **Rebasing**: Whenever PR becomes conflicted, or you tick the rebase/retry checkbox.\n\n\ud83d\udd15 **Ignore**: Close this PR and you won't be reminded about this update again.\n\n---\n\n - [ ] <!-- rebase-check -->If you want to rebase/retry this PR, click this checkbox.\n\n---\n\nThis PR has been generated by [WhiteSource Renovate](https://renovate.whitesourcesoftware.com). View repository job log [here](https://app.renovatebot.com/dashboard#github/localstack/localstack).",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 288,
        "deletions": 256,
        "changed_files": 44,
        "created_at": "2021-12-26T12:26:41Z",
        "closed_at": "2021-12-26T17:45:28Z",
        "merged_at": "2021-12-26T17:45:28Z",
        "body": "## Description\r\n\r\nThe logging statement has the call of the form `logging.(format_string % (format_args...))`. For such calls, it is recommended to leave string interpolation to the logging method itself and be written as `logging.(format_string, format_args...)`.\r\n\r\nReferences:\r\n\r\n[https://docs.python.org/3/library/logging.html](https://docs.python.org/3/library/logging.html)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 14,
        "deletions": 25,
        "changed_files": 3,
        "created_at": "2021-12-26T09:20:37Z",
        "closed_at": "2021-12-27T13:48:40Z",
        "merged_at": "2021-12-27T13:48:40Z",
        "body": "Addresses #5018 \r\n\r\nExtended existing integration tests `test_dynamodb_stream_to_lambda`  and `test_dynamodb_stream_stream_view_type`\r\nto make sure `SequenceNumber` key is present in the records forwarded to both `Lambda` and `DynamoDBStreams`.",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 26,
        "deletions": 34,
        "changed_files": 13,
        "created_at": "2021-12-25T22:24:05Z",
        "closed_at": "2021-12-26T00:09:25Z",
        "merged_at": "2021-12-26T00:09:25Z",
        "body": "## Description\r\n\r\nThe built-in function being used does not require comprehension and can work directly with a generator expression.\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 158,
        "deletions": 52,
        "changed_files": 19,
        "created_at": "2021-12-24T19:28:13Z",
        "closed_at": "2021-12-25T17:22:03Z",
        "merged_at": "2021-12-25T17:22:03Z",
        "body": "## Description\r\n\r\nThis is dangerous because a mutable default value retains its mutated state on subsequent calls.\r\n\r\n## References\r\n\r\n[http://pylint-messages.wikidot.com/messages:w0102](http://pylint-messages.wikidot.com/messages:w0102)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 105,
        "deletions": 67,
        "changed_files": 4,
        "created_at": "2021-12-24T00:22:28Z",
        "closed_at": "2021-12-29T15:16:43Z",
        "merged_at": "2021-12-29T15:16:43Z",
        "body": "- adds an integration test for multiple regions and nested state machine execution (currently needs the new patch in the artifacts repo and only works with PRO enabled until the aspectj support is moved here)\r\n- removes the region patching from the stepfunctions listener since this is now done in the stepfunctions backend\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 45,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2021-12-22T21:57:58Z",
        "closed_at": "2021-12-28T20:46:15Z",
        "merged_at": "2021-12-28T20:46:15Z",
        "body": "Addresses #5132 \r\n\r\nChanges:\r\n- SNS Listener avoids subscribing a FIFO Queue to a standard SNS Topic.\r\n- SNS Listener validates that MessageGroupId is set for messages to a FIFO SNS Topic.\r\n- Added a test to confirm the delivery of a message to a FIFO Queue from a FIFO topic.\r\n",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2021-12-22T17:49:23Z",
        "closed_at": "2021-12-22T20:30:33Z",
        "merged_at": null,
        "body": "Moto SQS requires the MessageGroupId as show in #5132\r\n\r\nChanges:\r\n- Pass parameter even if empty when Moto is the SQS provider.\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 4851,
        "deletions": 153,
        "changed_files": 25,
        "created_at": "2021-12-22T11:24:32Z",
        "closed_at": "2022-01-14T10:55:35Z",
        "merged_at": "2022-01-14T10:55:35Z",
        "body": "Adds OpenSearch support to LocalStack based on ASF generated code and the existing ElasticSearch implementation",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 5,
        "deletions": 5,
        "changed_files": 1,
        "created_at": "2021-12-22T10:25:33Z",
        "closed_at": "2021-12-22T13:59:48Z",
        "merged_at": "2021-12-22T13:59:48Z",
        "body": "The example `docker-compose.yml` in the root dir of this repo uses the [env variable default syntax of Docker Compose](https://docs.docker.com/compose/environment-variables/#configure-compose-using-environment-variables).\r\nHowever, a space is added before the closing bracket:\r\n```\r\nSERVICES=${SERVICES- }\r\n```\r\nThis means that the default is not an empty string, but a string with a single white-space character.\r\nThis can cause issues in certain cases (`os.environ.get(\"<var>\")` returns `True` for a single-whitespace string instead of `False` for an empty string).\r\n\r\nThis PR changes the default variables in the `docker-compose.yml` such that they are actually empty.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 764,
        "changed_files": 3,
        "created_at": "2021-12-22T06:30:36Z",
        "closed_at": "2021-12-22T09:47:14Z",
        "merged_at": "2021-12-22T09:47:14Z",
        "body": "## Description\r\n\r\nThis PR:\r\n\r\n- Removes the roadmap docs\r\n- Removes the feature coverage docs\r\n- Adds PyPi downloads badge\r\n\r\nThis PR is in continuation of https://github.com/localstack/localstack/pull/5100 to remove outdated docs and references.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2021-12-21T12:22:15Z",
        "closed_at": "2021-12-21T18:24:36Z",
        "merged_at": "2021-12-21T18:24:36Z",
        "body": "Just adds the version of the running localstack instance to its /health endpoint\r\n\r\nResponse for `http://localhost:4566/health`\r\n\r\n```json\r\n{\r\n    \"services\": {\r\n        \"acm\": \"available\",\r\n        \"apigateway\": \"available\",\r\n        \"cloudformation\": \"available\",\r\n        \"cloudwatch\": \"available\",\r\n        \"config\": \"available\",\r\n        \"dynamodb\": \"available\",\r\n        \"dynamodbstreams\": \"available\",\r\n        \"ec2\": \"available\",\r\n        \"es\": \"available\",\r\n        \"events\": \"available\",\r\n        \"firehose\": \"available\",\r\n        \"iam\": \"available\",\r\n        \"kinesis\": \"available\",\r\n        \"kms\": \"available\",\r\n        \"lambda\": \"available\",\r\n        \"logs\": \"available\",\r\n        \"redshift\": \"available\",\r\n        \"resource-groups\": \"available\",\r\n        \"resourcegroupstaggingapi\": \"available\",\r\n        \"route53\": \"available\",\r\n        \"route53resolver\": \"available\",\r\n        \"s3\": \"available\",\r\n        \"secretsmanager\": \"available\",\r\n        \"ses\": \"available\",\r\n        \"sns\": \"available\",\r\n        \"sqs\": \"available\",\r\n        \"ssm\": \"available\",\r\n        \"stepfunctions\": \"available\",\r\n        \"sts\": \"available\",\r\n        \"support\": \"available\",\r\n        \"swf\": \"available\"\r\n    },\r\n    \"version\": \"0.13.2\"\r\n}\r\n\r\n\r\n```",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 6,
        "deletions": 11,
        "changed_files": 1,
        "created_at": "2021-12-21T10:33:20Z",
        "closed_at": "2021-12-21T12:20:16Z",
        "merged_at": "2021-12-21T12:20:16Z",
        "body": "Unfortunately, the (previously working) configuration which limits the python docker base image (digest) updates to patch versions does not seem to work anymore.\r\nThis fix disables minor and major updates globally and removes the python-package specific configuration.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 52,
        "deletions": 52,
        "changed_files": 26,
        "created_at": "2021-12-20T21:22:16Z",
        "closed_at": "2021-12-22T09:03:01Z",
        "merged_at": "2021-12-22T09:03:01Z",
        "body": "Fixes: #5145\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 5,
        "changed_files": 4,
        "created_at": "2021-12-20T17:23:29Z",
        "closed_at": "2021-12-20T21:55:42Z",
        "merged_at": "2021-12-20T21:55:42Z",
        "body": "* bump log4j to version `2.17.0` in dependencies (included in `localstack-java-utils` version `0.2.19`)\r\n* release version 0.13.2\r\n\r\nAddresses https://github.com/localstack/localstack/issues/5146 - to have a tagged version with the recent security fixes that users can pin to.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 6,
        "deletions": 8,
        "changed_files": 2,
        "created_at": "2021-12-20T15:58:09Z",
        "closed_at": "2021-12-21T21:33:27Z",
        "merged_at": "2021-12-21T21:33:27Z",
        "body": "This PR removes the subprocess call to `uname` to find out the platform (which is unnecessary, since we have python `platform.system()`)\r\ni also moved the `is_windows` logic to the run package with the others so it's consistent.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 3098,
        "deletions": 1131,
        "changed_files": 10,
        "created_at": "2021-12-19T21:40:33Z",
        "closed_at": "2021-12-23T14:52:48Z",
        "merged_at": "2021-12-23T14:52:48Z",
        "body": "Cleaned up version of #4983 (rebased to current master to remove all the unmerged ASF handler code unrelated to the SQS implementation)\r\n\r\n@thrau's contributions;\r\n- initial implementation of the provider\r\n\r\n@baermat's contributions:\r\n\r\n- implement dead letter queue behaviour via maxReceiveCount\r\n- enable both StandardQueue and FifoQueue behaviour\r\n- implement behaviour according to the tests against the old listener, such as .fifo for fifo queue names, no illegal unicode chars, etc\r\n- add and enhance tests\r\n- add md5 generation for attributes\r\n\r\n## TODO:\r\n- [x] remove custom provider override from `test-coverage` make target\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 10,
        "deletions": 10,
        "changed_files": 6,
        "created_at": "2021-12-18T08:39:18Z",
        "closed_at": "2021-12-18T13:44:09Z",
        "merged_at": "2021-12-18T13:44:09Z",
        "body": "## Description\r\n\r\nThis PR improves code readability by replacing `dict` call with comprehension. Although there is nothing syntactically wrong with the current code but can be simplified more. Dictionary comprehension is more performant because we do not need to create another transient list.\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 57,
        "deletions": 21,
        "changed_files": 2,
        "created_at": "2021-12-17T13:19:23Z",
        "closed_at": "2021-12-18T20:06:19Z",
        "merged_at": "2021-12-18T20:06:19Z",
        "body": "When inspecting a not-pulled image (like a lambda image on first execution), we currently do not pull the image before inspecting it (for getting current entrypoint, etc.).\r\n\r\nThis PR adds a flag for this behavior. If `pull` is true, it will automatically pull before if necessary (default), otherwise it will not.\r\nThe image will only be pulled if not already existent.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 10,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2021-12-17T08:35:34Z",
        "closed_at": "2021-12-17T10:15:56Z",
        "merged_at": "2021-12-17T10:15:56Z",
        "body": "ignore me\r\n\r\njust triggering CI build",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 53,
        "deletions": 27,
        "changed_files": 4,
        "created_at": "2021-12-16T12:18:04Z",
        "closed_at": "2021-12-16T14:00:08Z",
        "merged_at": "2021-12-16T14:00:08Z",
        "body": "Refactor Lambda logic to remove local executor Callable from model entities (mostly minor refactoring - no functional changes). \r\n\r\nPrior to this change, we were storing the `Callable` function object (for `local` Lambda executors) directly on the `LambdaFunction` model entity, which can lead to issues further downstream. The executor details and the model entities should be separated - this PR is a step towards that direction. /cc @dfangl ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 8,
        "deletions": 8,
        "changed_files": 2,
        "created_at": "2021-12-16T04:22:47Z",
        "closed_at": "2021-12-16T09:55:50Z",
        "merged_at": "2021-12-16T09:55:50Z",
        "body": "## Description\r\n\r\nThere\u2019s no need to calculate the length of an iterable to fetch the last element of the iterable. We can provide a negative index `-1` to it directly to get the last element. In this way, we don't have to iterate over the sequence using `len` to get the last index when our purpose is only to get the last element.\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 48,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2021-12-15T12:24:21Z",
        "closed_at": "2021-12-26T12:20:54Z",
        "merged_at": "2021-12-26T12:20:54Z",
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 23,
        "deletions": 15,
        "changed_files": 3,
        "created_at": "2021-12-15T10:20:55Z",
        "closed_at": "2021-12-17T12:17:05Z",
        "merged_at": "2021-12-17T12:17:05Z",
        "body": "Followup for my `podman` exploration: #5116\r\n\r\nSet of possible fixes required for running `localstack` inside `podman`.\r\n\r\n~Still need to find a proper fix for working `LAMBDA_EXECUTOR=docker`, see this conversation: https://github.com/localstack/localstack/pull/5116#discussion_r769509702~\r\n\r\n`LAMBDA_EXECUTOR=docker` should work with `podman` as well with the fix for `get_main_endpoint_from_container`",
        "comments": 5
    },
    {
        "merged": true,
        "additions": 63,
        "deletions": 9,
        "changed_files": 2,
        "created_at": "2021-12-14T16:11:19Z",
        "closed_at": "2021-12-14T17:57:05Z",
        "merged_at": "2021-12-14T17:57:05Z",
        "body": "Fix association of VPCs in Route53 HostedZone responses. Addresses #4312",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 76,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2021-12-14T11:26:21Z",
        "closed_at": "2021-12-16T12:54:37Z",
        "merged_at": null,
        "body": "*This PR is probably will be closed anyway, this is just for historical purposes.*\r\n\r\nI will use these changes for HackDays demo. \r\n\r\nWith this set of dirty fixes, I was able to run `localstack` with `podman`, so it works almost out of the box :D with the simplest option (running `podman` as root with `podman-docker`).\r\n\r\nThere are many ways to run `podman` including **rootless** and **rootfull** modes\r\n\r\nWith rootless `podman`, you have two options:\r\n* [Set subuid and subgid](https://wiki.archlinux.org/title/Podman#Set_subuid_and_subgid)\r\n* use `podman --storage-opt overlay.ignore_chown_errors=true`\r\n\r\nThe main questions would be:\r\n- which option do we want to support from CLI?\r\n- should we just create a doc page for all possible options?\r\n\r\nP.S. I added `podman.md` file mainly for my notes\r\n",
        "comments": 3
    },
    {
        "merged": false,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2021-12-13T01:23:22Z",
        "closed_at": "2021-12-13T08:46:25Z",
        "merged_at": null,
        "body": "[![WhiteSource Renovate](https://app.renovatebot.com/images/banner.svg)](https://renovatebot.com)\n\nThis PR contains the following updates:\n\n| Package | Type | Update | Change |\n|---|---|---|---|\n| python | stage | minor | `3.8.12-slim-buster` -> `3.10.1-slim-buster` |\n\n---\n\n### Configuration\n\n\ud83d\udcc5 **Schedule**: \"before 3am on Monday\" (UTC).\n\n\ud83d\udea6 **Automerge**: Disabled by config. Please merge this manually once you are satisfied.\n\n\u267b **Rebasing**: Whenever PR becomes conflicted, or you tick the rebase/retry checkbox.\n\n\ud83d\udd15 **Ignore**: Close this PR and you won't be reminded about this update again.\n\n---\n\n - [ ] <!-- rebase-check -->If you want to rebase/retry this PR, click this checkbox.\n\n---\n\nThis PR has been generated by [WhiteSource Renovate](https://renovate.whitesourcesoftware.com). View repository job log [here](https://app.renovatebot.com/dashboard#github/localstack/localstack).",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 80,
        "deletions": 13,
        "changed_files": 2,
        "created_at": "2021-12-10T21:10:33Z",
        "closed_at": "2021-12-12T14:47:12Z",
        "merged_at": "2021-12-12T14:47:12Z",
        "body": "This PR addresses #5046 where is described that Terraform gets stuck while creating a KMS Key with KeyUsage=SIGN_VERIFY.\r\nMoto returns a status code 400 when trying to describe this type of key due to Localstack directly handling them.\r\n\r\nChanges:\r\n- The creation of this type of key returns a more complete response.\r\n- Before returning a 400 response for the \"describeKey\" action, the Proxy searches for the keyId in the key_pairs dictionary.\r\n- Add the key_pairs objects to the response when listing the keys. \r\n- The kms proxy allows local-kms to handle SIGN_VERIFY keys.\r\n- Added tests for listing and describing SIGN_VERIFY keys .\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 47,
        "deletions": 7,
        "changed_files": 3,
        "created_at": "2021-12-10T10:53:31Z",
        "closed_at": "2021-12-10T20:33:32Z",
        "merged_at": "2021-12-10T20:33:32Z",
        "body": "Currently, empty SNS messages are permitted, this diverges from AWS behavior.\r\n\r\nThis PR introduces a check if the message is empty, and adds a test to check if an empty message is successfully rejected.\r\nAlso a TODO was acted upon to add a sns_create_topic fixture to create multiple topics if necessary.\r\n\r\nTest also passes against AWS.\r\n\r\nFixes #5096 ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 881,
        "deletions": 420,
        "changed_files": 45,
        "created_at": "2021-12-09T16:09:25Z",
        "closed_at": "2021-12-17T15:42:32Z",
        "merged_at": "2021-12-17T15:42:32Z",
        "body": "This PR adds initial support for in-place rewriting of ARN partitions.\r\nCurrently, we cannot really support other regions due to the assumption of the default partition (\"aws\") in LocalStack as well as in moto.\r\nIn order to support other partitions without rewriting all this code, this PR introduces the `PartitionAdjustingProxyListener`.\r\nThis listener replaces the partition in ARNs in requests as well as in responses based on:\r\n- The region in the ARN.\r\n- If the region is not specific for a partition (f.e. `*`) it defaults to the partition of the `DEFAULT_REGION`.\r\n\r\nThis PR is still a work in progress.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 359,
        "deletions": 805,
        "changed_files": 7,
        "created_at": "2021-12-09T11:15:35Z",
        "closed_at": "2021-12-15T12:20:16Z",
        "merged_at": "2021-12-15T12:20:15Z",
        "body": "## Description\r\n\r\nThis PR:\r\n\r\n- Refactors development docs to development guide\r\n- Adds a usage section that hosts the interaction, integrations and more\r\n- Adds a contribution section to host relevant information about contributing strategy\r\n",
        "comments": 5
    },
    {
        "merged": true,
        "additions": 33,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2021-12-08T00:39:13Z",
        "closed_at": "2021-12-08T14:37:50Z",
        "merged_at": "2021-12-08T14:37:50Z",
        "body": "This PR introduces a patch for moto's `LogStream.filter_log_events` which currently does not support filter patterns: see https://github.com/localstack/moto/blob/eb93f8347e44f89ff8b4de036fe28ea6df4e1fac/moto/logs/models.py#L247-L259\r\n\r\nWith this patch, localstack-ext should automatically inject our filter pattern matching engine through `logs_listener.get_pattern_matcher`\r\n\r\nneeds testing once the localstack-ext PR is merged /cc @silv-io ",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 40,
        "deletions": 26,
        "changed_files": 6,
        "created_at": "2021-12-07T18:33:41Z",
        "closed_at": "2021-12-07T23:23:04Z",
        "merged_at": "2021-12-07T23:23:04Z",
        "body": "Minor fixes in SNS and API Gateway to accommodate recent upstream changes in moto",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 89,
        "deletions": 10,
        "changed_files": 7,
        "created_at": "2021-12-07T17:34:30Z",
        "closed_at": "2021-12-10T10:46:30Z",
        "merged_at": "2021-12-10T10:46:30Z",
        "body": "## Tackled issues\r\n\r\n* The waiting mechanism which waits for port 9001 to open at the lambda running with stay-open set is never actually called, due to the return value of _should_use_stay_open mode. This is fixed by returning the value of should_use instead of False (so it actually waits if the port is not open). This is important if the lambda takes a tad longer to start up (due to initialization of other scripts), since it otherwise falls back to exec mode and ultimately fails.\r\n* Current CmdDockerClient did not allow for environment variables to be overwritten with \"None\" (and therefore deleted) on docker exec. (Setting the value to None should remove the environment variable in the execution environment of docker exec) This is now fixed, due to the need for this behavior by the next point. There is also a Test introduced to test specifically this behavior.\r\n* If the connection to port 9001 actually fails even though it started correctly (which is relatively unlikely), it will now correctly fallback to exec instead of spawning another mockserver listening on port 9001 inside the container (since the environment variable `DOCKER_LAMBDA_STAY_OPEN` is present in exec as well, unless overwritten/removed).\r\n* Adds a test running a simple test lambda against every docker lambda runtime. Especially useful for testing existence and function of images in pro, testing stay-open mode against various images, as well as special cases (like currently for python 3.9).\r\n\r\n## Limitations of stay open mode\r\n\r\nStay open mode for lambda currently has the following failing tests (both for pro and community, only test_lambda.py):\r\n```\r\nFAILED tests/integration/test_lambda.py::TestLambdaBaseFeatures::test_dead_letter_queue\r\nFAILED tests/integration/test_lambda.py::TestLambdaBaseFeatures::test_event_source_mapping_with_sqs\r\nFAILED tests/integration/test_lambda.py::TestLambdaBaseFeatures::test_large_payloads\r\nFAILED tests/integration/test_lambda.py::TestLambdaBaseFeatures::test_success_destination\r\nFAILED tests/integration/test_lambda.py::TestPythonRuntimes::test_invocation_type_not_set\r\nFAILED tests/integration/test_lambda.py::TestPythonRuntimes::test_lambda_subscribe_sns_topic\r\nFAILED tests/integration/test_lambda.py::TestJavaRuntimes::test_trigger_java_lambda_through_sns\r\nFAILED tests/integration/test_lambda.py::test_kinesis_lambda_parallelism\r\n```\r\nThese are currently accepted as limitation for this user mode, since the issue for those is likely to find in the mock_server of the lambci images.\r\nE.g. this server closes the connection if the lambda result is too large (like in the 5MB test_large_payloads) test, and does not propagate some errors correctly.\r\n\r\n## Introduced configuration options\r\n* `LAMBDA_STAY_OPEN_MODE`: is per default assumed `true`. If set to a falsy value, the `docker-exec` mode is used for docker-reuse executors.\r\n\r\n## TODOs\r\n\r\n- [x] add documentation for new configuration options and limitations of docker-reuse mode (https://github.com/localstack/docs/pull/84)",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 122,
        "deletions": 10,
        "changed_files": 14,
        "created_at": "2021-12-07T15:54:58Z",
        "closed_at": "2021-12-09T15:00:56Z",
        "merged_at": "2021-12-09T15:00:56Z",
        "body": "This PR adds a new pytest flag `--offline` ([according to the official pytest docs](https://docs.pytest.org/en/latest/example/simple.html#control-skipping-of-tests-according-to-command-line-option)). This flag indicates that the tests are executed in a network-restricted environment.\r\nSince some of the tests explicitly download additional infrastructure, or communicate to external services via the host network, some tests have been marked with `@pytest.mark.skip_offline`. These tests are skipped in case the `--offline` option is set when executing the tests with pytest.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 262,
        "deletions": 126,
        "changed_files": 11,
        "created_at": "2021-12-07T14:45:24Z",
        "closed_at": "2021-12-08T11:01:57Z",
        "merged_at": "2021-12-08T11:01:57Z",
        "body": "Refactor handler chain and introduce `MessageModifyingProxyListener` base class to enable updates of requests/responses.\r\n\r\nThe main use case is to allow us to apply patches to forwarded requests and returned responses (e.g., ARN region replacements). Currently (prior to this change), `ProxyListener.forward_request` only allows us to return `requests.Request` or `requests.Response` objects, which result in a `break` in the processing loops and do not allow for cumulative handler updates in the handler chain. \r\n\r\nSummary of changes:\r\n* introduce `MessageModifyingProxyListener` base class to enable updates of requests/responses\r\n* update the order in which DEFAULT_LISTENERS are applied - running _before_ main proxy listener for inbound requests, and _after_ main proxy listener for outbound responses.\r\n* instead of applying only the last post-invocation handler (`listeners[-1]`), iterate through the list of handlers (`listeners`) and call each of them - allowing `MessageModifyingProxyListener` to patch the returned responses\r\n* add a small test `test_message_modifying_handler` that asserts that path, status code, and message content can be properly patched by the handler.\r\n* minor: refactor some tests from unittest->pytest\r\n\r\nNote: This is an intermediate solution for now - more refactoring will follow once we are integrating the handler chain in ASF Gateway. Also, currently we're still improperly using and mixing the terminology of \"listeners\" vs \"handlers\" -> should be renamed to \"handlers\" consistently.\r\n\r\n/cc @alexrashed  @thrau \r\n\r\nPart of this change is also to remove the deprecated/unused `request_handler` parameter for `return_response(..)` (will require small changes in -ext).",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 80,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2021-12-07T14:28:22Z",
        "closed_at": "2021-12-09T11:58:11Z",
        "merged_at": "2021-12-09T11:58:10Z",
        "body": "The first run should be `red` and then I will update `moto-ext` with a related fix https://github.com/spulec/moto/pull/4666\r\n\r\nRelated issue: https://github.com/localstack/localstack/issues/5068",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 12,
        "deletions": 3,
        "changed_files": 1,
        "created_at": "2021-12-06T11:31:10Z",
        "closed_at": "2021-12-06T13:09:04Z",
        "merged_at": "2021-12-06T13:09:04Z",
        "body": "This PR adjusts the config of RenovateBot such that the PR titles are more aligned with our usual structure.\r\nA PR title (and also the commit) would afterwards look like this:\r\n\"update Docker base image (python:3.8.12-slim-buster) digest to 95db858\"\r\n\r\nThis change was tested in a personal repo: https://github.com/alexrashed/renovate-tests/pull/2\r\nAfter this PR is merged, the changes can be applied to the first PR created by RenovateBot (https://github.com/localstack/localstack/pull/5080) by checking the \"retry\" checkbox.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2021-12-06T01:03:10Z",
        "closed_at": "2021-12-13T10:59:16Z",
        "merged_at": "2021-12-13T10:59:16Z",
        "body": "[![WhiteSource Renovate](https://app.renovatebot.com/images/banner.svg)](https://renovatebot.com)\n\nThis PR contains the following updates:\n\n| Package | Type | Update | Change |\n|---|---|---|---|\n| python | stage | digest | `7f35e17` -> `95db858` |\n\n---\n\n### Configuration\n\n\ud83d\udcc5 **Schedule**: \"before 3am on Monday\" (UTC).\n\n\ud83d\udea6 **Automerge**: Disabled by config. Please merge this manually once you are satisfied.\n\n\u267b **Rebasing**: Whenever PR becomes conflicted, or you tick the rebase/retry checkbox.\n\n\ud83d\udd15 **Ignore**: Close this PR and you won't be reminded about this update again.\n\n---\n\n - [ ] <!-- rebase-check -->If you want to rebase/retry this PR, click this checkbox.\n\n---\n\nThis PR has been generated by [WhiteSource Renovate](https://renovate.whitesourcesoftware.com). View repository job log [here](https://app.renovatebot.com/dashboard#github/localstack/localstack).",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 23,
        "deletions": 4,
        "changed_files": 2,
        "created_at": "2021-12-05T22:01:53Z",
        "closed_at": "2021-12-06T10:48:21Z",
        "merged_at": "2021-12-06T10:48:21Z",
        "body": "Add SIGINT signal handler to enable clean shutdown across MacOS/Linux. (See details in the code comment.)\r\n\r\nAddresses #5069\r\n\r\nTested under MacOS using:\r\n* `localstack start` -> `kill -INT <pid>`\r\n* `localstack start` -> CTRL-C\r\n* `npm run localstack` -> `kill -INT <pid>`\r\n* `npm run localstack` -> CTRL-C",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 6,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2021-12-05T20:52:11Z",
        "closed_at": "2021-12-06T13:38:06Z",
        "merged_at": "2021-12-06T13:38:06Z",
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\nFix for #4898",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 83,
        "deletions": 33,
        "changed_files": 7,
        "created_at": "2021-12-05T18:17:28Z",
        "closed_at": "2021-12-05T20:53:27Z",
        "merged_at": "2021-12-05T20:53:27Z",
        "body": "* add initial integration of Route53Resolver API and simple smoke test. Partially addresses #5048 . More features will follow soon. /cc @macnev2013 \r\n* add minor fix and error handling in `_dump_events_to_files()` util function\r\n* cleanup obsolete/unused MANIFEST entries\r\n* migrate Route53 tests from `unittest`->`pytest`",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 83,
        "deletions": 118,
        "changed_files": 6,
        "created_at": "2021-12-04T15:33:09Z",
        "closed_at": "2021-12-05T13:45:00Z",
        "merged_at": "2021-12-05T13:45:00Z",
        "body": "this PR adds the custom elasticsearch backend functionality that was previously handled by `ELASTICSEARCH_BACKEND` which addresses #5052 \r\n\r\n* introduces a new config variable `ES_CUSTOM_BACKEND` that, when set, makes the cluster manager behave like `ES_MULTI_CLUSTER=False` but does not create a cluster, but only fake endpoint proxies.\r\n* moves docs to https://docs.localstack.cloud/aws/elasticsearch/#custom-elasticsearch-backends",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 33,
        "deletions": 6,
        "changed_files": 1,
        "created_at": "2021-12-04T01:00:59Z",
        "closed_at": "2021-12-06T19:06:40Z",
        "merged_at": "2021-12-06T19:06:40Z",
        "body": "This PR is aim to fix the #5032 issue.",
        "comments": 6
    },
    {
        "merged": true,
        "additions": 365,
        "deletions": 31,
        "changed_files": 15,
        "created_at": "2021-12-03T17:07:55Z",
        "closed_at": "2021-12-20T10:36:04Z",
        "merged_at": "2021-12-20T10:36:03Z",
        "body": "just an initial test run\r\n\r\n/cc @dominikschubert ",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 13,
        "deletions": 32,
        "changed_files": 4,
        "created_at": "2021-12-03T16:21:54Z",
        "closed_at": "2021-12-03T17:58:44Z",
        "merged_at": "2021-12-03T17:58:44Z",
        "body": "just a little cleanup in tests",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 47,
        "deletions": 15,
        "changed_files": 3,
        "created_at": "2021-12-03T15:50:46Z",
        "closed_at": "2021-12-03T16:53:32Z",
        "merged_at": "2021-12-03T16:53:32Z",
        "body": "* Add timeout parameter to `download(..)` util function. Preparation to make the startup more resilient to timeouts (e.g., SSL cert).\r\n* Also contains some minor refactoring/fixes for old tests",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 24,
        "deletions": 5,
        "changed_files": 2,
        "created_at": "2021-12-03T13:26:06Z",
        "closed_at": "2021-12-03T16:30:21Z",
        "merged_at": "2021-12-03T16:30:21Z",
        "body": "Reported here: https://github.com/localstack/localstack/issues/5041\r\n\r\nBy intention, updating the existing test without refactoring it to `pytest`, I think refactoring to `pytest` could be done in separate PR.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 18,
        "deletions": 9,
        "changed_files": 1,
        "created_at": "2021-12-02T14:51:40Z",
        "closed_at": "2021-12-03T00:44:25Z",
        "merged_at": "2021-12-03T00:44:25Z",
        "body": "For sufficiently large cloud formation stacks (those with > 100 SNS topics) the default pagination of 100 was causing any  additional topics to not be created resulting in an index out of range error on line 15 of `models/sns.py` due to the topic not being found in the array. This PR ensures all topics are gathered prior to performing a lookup by topic name.",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 16,
        "deletions": 16,
        "changed_files": 1,
        "created_at": "2021-12-02T12:04:56Z",
        "closed_at": "2021-12-02T13:12:27Z",
        "merged_at": "2021-12-02T13:12:27Z",
        "body": "Update preload_services() startup hook to properly initialize and restore persistence",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 11,
        "deletions": 4,
        "changed_files": 3,
        "created_at": "2021-12-02T10:58:03Z",
        "closed_at": "2021-12-02T13:51:59Z",
        "merged_at": "2021-12-02T13:51:59Z",
        "body": "This allows us to redirect the var libs folder to static libs if we want to prevent an override by a host mount.\r\n\r\nTherefore, this variable should ONLY be set inside the container and only be referenced in this context.",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 21,
        "deletions": 20,
        "changed_files": 3,
        "created_at": "2021-12-02T08:16:00Z",
        "closed_at": "2021-12-02T10:27:26Z",
        "merged_at": "2021-12-02T10:27:26Z",
        "body": "Currently, the Java Lambda integration tests download an external jar file which is then used to run tests within the Java lambda runtime. Previously, the jar file was downloaded on demand in the setup class of the test. This causes problems when you want to run the tests in a network restricted environment.\r\nThis PR moves the installation of the test-jar to the `install.py` where it is installed with the `make init-testlibs` call (just like the kinesis client).",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2021-12-01T16:07:18Z",
        "closed_at": "2021-12-02T09:48:53Z",
        "merged_at": "2021-12-02T09:48:53Z",
        "body": "Due to the bug fixed by this PR http://git.savannah.gnu.org/gitweb/?p=coreutils.git;a=commitdiff;h=v8.24-111-g1118f32\r\n\r\nthis log message can appear if tail is executed in the context of lambda execution.\r\n\r\nThis PR filters that message, until we can update the tail command in the lambda docker images.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 30,
        "deletions": 13,
        "changed_files": 2,
        "created_at": "2021-11-30T12:26:49Z",
        "closed_at": "2021-11-30T13:45:05Z",
        "merged_at": "2021-11-30T13:45:04Z",
        "body": "With this PR, the newly introduced LocalStack Package Manager now returns a non-zero exit code in case any of the package installations failed. This allows a robust usage of the `lpm` in scripts (since it now correctly indicates failures).",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 30,
        "deletions": 15,
        "changed_files": 6,
        "created_at": "2021-11-30T10:51:43Z",
        "closed_at": "2021-12-01T10:28:51Z",
        "merged_at": "2021-12-01T10:28:51Z",
        "body": "Lambdas failed to update in CloudFormation because we've added Architectures key support in the CloudFormation model but not in the lambda API itself. This adds basic \"CRUD\" support this new key to fix this regression and make function updates work again.\r\n\r\nThe actual logic would need to be handled by the executors at some point. cc @dfangl",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2021-11-30T03:03:49Z",
        "closed_at": "2021-11-30T10:51:21Z",
        "merged_at": "2021-11-30T10:51:20Z",
        "body": "When setting the `LAMBDA_CONTAINER_REGISTRY` environment variable in order to use [arm64 compatible lambda images](https://github.com/mLupine/docker-lambda) if using node 14.x as your lambda runtime it is not possible to use the custom endpoint as it is overridden by the temporary fix to use `localstack/lambda-js`.\r\n\r\nThis change ensures that the temporary fix images are only used when a custom registry is not provided.\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2021-11-29T16:23:10Z",
        "closed_at": "2021-11-30T20:58:37Z",
        "merged_at": "2021-11-30T20:58:37Z",
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\nThis PR replaces the lookup of /etc/hostname with the `socket.gethostname()` method.\r\nAlso, a check is introduced if a hostname is detected (in case it might be empty).\r\n\r\nOne could argue for `platform.node()` instead of `socket.gethostname()` since it caches its value, but the safer option in my opinion is `socker.gethostname()` if, for some reason, the hostname would change (also it is not called that often so performance is critical).\r\n\r\nFixes #5028",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 30,
        "deletions": 16,
        "changed_files": 2,
        "created_at": "2021-11-29T07:42:57Z",
        "closed_at": "2021-11-29T11:14:41Z",
        "merged_at": "2021-11-29T11:14:41Z",
        "body": "With adjustments for the test from https://github.com/localstack/localstack/pull/4207\r\n\r\nAlso made rebase on master.",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 269,
        "deletions": 18,
        "changed_files": 3,
        "created_at": "2021-11-28T22:52:47Z",
        "closed_at": "2021-11-29T15:42:24Z",
        "merged_at": "2021-11-29T15:42:24Z",
        "body": "This PR adds a patch utility module that could potentially clean up some code that does monkey patching.\r\n\r\nThe typical pattern is:\r\n\r\n```python\r\ndef patch_dothings():\r\n    # do things\r\n    return orig()\r\n\r\norig = mymodule.dothings\r\nmymodule.dothings = patch_dothings\r\n```\r\n\r\nthis can now be replaced with\r\n```python\r\n@patch(mymodule.dothings)\r\ndef patch_dothings(orig):\r\n    # do things\r\n    return orig()\r\n```\r\n\r\nor \r\n```python\r\ndef patch_dothings(orig):\r\n    # do things\r\n    return orig()\r\n\r\nPatch.function(mymodule.dothings, patch_dothings).apply()\r\n```\r\n\r\nclass functions/methods can also be patched!\r\n\r\ni also changed the `sqs_starter.py` to use the patch utility to try it out.",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 61,
        "deletions": 81,
        "changed_files": 5,
        "created_at": "2021-11-28T13:12:14Z",
        "closed_at": "2021-11-29T13:11:41Z",
        "merged_at": "2021-11-29T13:11:41Z",
        "body": "This PR adds the `~/.localstack` config directory and introduces configuration profiles. A profile is a set of environment variables stored in an `.env` file in the localstack config directory.\r\n\r\n```\r\n % tree ~/.localstack \r\n/home/thomas/.localstack\r\n\u251c\u2500\u2500 default.env\r\n\u251c\u2500\u2500 dev.env\r\n\u2514\u2500\u2500 pro.env\r\n```\r\n\r\nfor example:\r\n```\r\n % cat ~/.localstack/dev.env\r\nDEBUG=1\r\nDEVELOP=1\r\n```\r\n\r\nyou can load a profile by either setting the env variable `CONFIG_PROFILE=<profile>` or the `--profile=<profile>` CLI flag when using the CLI.\r\nFor example `python -m localstack.cli.main --profile=dev start --host` will load the `dev.env` profile file if it exist.\r\n\r\nbehavior:\r\n* if no profile is specified, the `default.env` is loaded (if it exists)\r\n* explicitly defined environment variables will always overwrite the profile. \r\n\r\nyou can use `python -m localstack.cli.main --profile=dev config show` to display the config environment variables\r\n\r\n### Caveat:\r\n\r\nonce we release this, people who have the old `~/.localstack` file in their home directory may experience odd behavior.",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 169,
        "deletions": 64,
        "changed_files": 2,
        "created_at": "2021-11-28T11:25:44Z",
        "closed_at": "2021-11-29T11:21:05Z",
        "merged_at": "2021-11-29T11:21:05Z",
        "body": "Add support for signatures in KMS API - addresses #4992",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 155,
        "deletions": 41,
        "changed_files": 4,
        "created_at": "2021-11-26T17:24:58Z",
        "closed_at": "2021-11-26T20:15:28Z",
        "merged_at": "2021-11-26T20:15:28Z",
        "body": "part of the effort to remove the `~/.localstack` file\r\n* #5014",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 278,
        "deletions": 136,
        "changed_files": 26,
        "created_at": "2021-11-25T17:18:13Z",
        "closed_at": "2021-11-26T13:22:08Z",
        "merged_at": "2021-11-26T13:22:08Z",
        "body": "this PR introduces a `Directories` object within the config that holds the localstack directories that we defined as follows:\r\n\r\n* `infra`:  static infra (pre-seeded packages)\r\n* `var`: variable data (shared between host and container that should persist between reboots, e.g., lazy-loaded packages, ssl cert, decryption key, ...) -> changes semantic to \"static\" in offline image\r\n* `shared_tmp`: shared temp folder (shared between host and container, for things like temp lambda code files. needs to be available to e.g., lambda containers)\r\n* `tmp`: temp folder (ephemeral data, can be mounted from the host, but doesn't have to be)\r\n* `data`: data dir (has to be persistent on the host, shared with the container)\r\n* `config`: ~/.localstack/ (host configuration directory with, for, e.g., pre-configured environment variables or credentials)\r\n* `init`: user-defined container provisioning scripts\r\n* `logs`: log files\r\n\r\ncurrently, most of these directories map to TMP_DIR, but that should change in the future. I was thinking to have most directories in the container under /var/lib/localstack, that way we can stick to one additional mount from the host (in addition to tmp), which simplifies docker compose configs that would otherwise need very fine grained mount binds to enable all the different directories.\r\n\r\nThe semantic of the tmp/shared tmp folder is currently not the way I described it in the doc strings, but I think it should be. We can discuss and iterate :)\r\n\r\nThe PR also changes the references throughout the code from the config constants to the global `dirs` object \r\n\r\n## Update November 26\r\n\r\nThe revised layout is:\r\n\r\n```\r\nstatic_libs: container only; binaries and libraries statically packaged with the image\r\nvar_libs:    shared; binaries and libraries+data computed at runtime: lazy-loaded binaries, ssl cert, ...\r\ncache:       shared; ephemeral data that has to persist across localstack runs and reboots\r\ntmp:         shared; ephemeral data that has to persist across localstack runs but not reboots\r\nfunctions:   shared; volume to communicate between host<->lambda containers\r\ndata:        shared; holds localstack state, pods, ...\r\nconfig:      host only; pre-defined configuration values, cached credentials, machine id, ...\r\ninit:        shared; user-defined provisioning scripts executed in the container when it starts\r\nlogs:        shared; log files produced by localstack\r\n```",
        "comments": 5
    },
    {
        "merged": true,
        "additions": 47,
        "deletions": 14,
        "changed_files": 4,
        "created_at": "2021-11-25T16:56:47Z",
        "closed_at": "2021-11-27T14:52:27Z",
        "merged_at": "2021-11-27T14:52:27Z",
        "body": "* upgrade pyopenssl version to fix recent OpenSSL issue\r\n* slightly refactor SSL cert generation and add tests\r\n* minor fix for `on_stop` handler with Tailer",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 14,
        "deletions": 7,
        "changed_files": 2,
        "created_at": "2021-11-25T12:28:31Z",
        "closed_at": "2021-11-25T14:12:11Z",
        "merged_at": "2021-11-25T14:12:11Z",
        "body": "Restarting \r\n\r\nThis PR prevents kinesis or stepfunctions from throwing an exception on restart when not eagerly loaded.\r\n\r\n\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 27,
        "deletions": 15,
        "changed_files": 1,
        "created_at": "2021-11-25T00:50:44Z",
        "closed_at": "2021-11-25T14:19:38Z",
        "merged_at": "2021-11-25T14:19:38Z",
        "body": "Add missing attributes for CFN Lambda::Function resources. Addresses #5006 . Manually verified that the schema of the CFN attributes corresponds to the boto3 API call parameters. (Tests still to be updated/extended - some attributes not supported in Community, hence covered elsewhere.)",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 127,
        "deletions": 3,
        "changed_files": 2,
        "created_at": "2021-11-24T15:57:40Z",
        "closed_at": "2021-11-25T13:53:11Z",
        "merged_at": "2021-11-25T13:53:11Z",
        "body": "Related issue: https://github.com/localstack/localstack/issues/4987\r\n\r\nRelated PR: #4939\r\n\r\nIntroduced test that mimics requests with `chunk-signature` and `content-md5`, couldn't make it work with `TEST_TARGET=AWS_CLOUD`",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 20,
        "deletions": 3,
        "changed_files": 2,
        "created_at": "2021-11-24T10:26:23Z",
        "closed_at": "2021-11-24T13:45:24Z",
        "merged_at": "2021-11-24T13:45:24Z",
        "body": "Followup for #4994\r\n\r\nAlso, add additional checks in the related test. I should add these checks in the original PR (related comment as well: https://github.com/localstack/localstack/pull/2565/files#r446286581)",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 15,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2021-11-23T20:11:21Z",
        "closed_at": "2021-11-23T21:13:15Z",
        "merged_at": "2021-11-23T21:13:15Z",
        "body": "this PR fixes the issue that custom flags were not added correctly to the list of additional flags. adds a bootstrap test to verify that the container has the exposed ports (we should write more like these!)",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 118,
        "deletions": 103,
        "changed_files": 2,
        "created_at": "2021-11-23T17:57:59Z",
        "closed_at": "2021-11-24T09:38:49Z",
        "merged_at": "2021-11-24T09:38:49Z",
        "body": "Related issues:\r\n- https://github.com/localstack/localstack/issues/4398\r\n- https://github.com/localstack/localstack/issues/2564\r\n\r\nThe `test_cors_with_single_origin_error` test against AWS:\r\n```sh\r\n$ TEST_TARGET=AWS_CLOUD pytest -vs -k test_cors_with_single_origin_error\r\n============================================================================================================= test session starts ==============================================================================================================\r\nplatform linux -- Python 3.9.2, pytest-6.2.4, py-1.11.0, pluggy-0.13.1 -- /opt/localstack/env/bin/python3\r\ncachedir: .pytest_cache\r\nrootdir: /opt/localstack/localstack\r\nplugins: httpserver-1.0.2, rerunfailures-10.0\r\ncollected 1054 items / 1053 deselected / 1 selected\r\n\r\ntests/integration/test_s3.py::test_cors_with_single_origin_error PASSED\r\n```\r\n\r\nConsole log:\r\n```sh\r\n$ awslocal s3api create-bucket --bucket test\r\n{\r\n    \"Location\": \"http://test.s3.localhost.localstack.cloud:4566/\"\r\n}\r\n\r\n$ aws --endpoint-url=http://localhost:4566 s3api put-bucket-cors --bucket=test --cors-configuration '{\r\n    \"CORSRules\": [\r\n        {\r\n            \"AllowedHeaders\": [\r\n                \"*\"\r\n            ],\r\n            \"AllowedMethods\": [\r\n                \"GET\",\r\n                \"PUT\",\r\n                \"POST\",\r\n                \"HEAD\"\r\n            ],\r\n            \"AllowedOrigins\": [\r\n                \"*\",\r\n                \"http://localhost:8000\"\r\n            ],\r\n            \"ExposeHeaders\": [\r\n                \"ETag\"\r\n            ],\r\n            \"MaxAgeSeconds\": 86400\r\n        }\r\n    ]\r\n}'\r\n\r\n$ aws --endpoint-url=http://localhost:4566 s3api get-bucket-cors --bucket=test\r\n{\r\n    \"CORSRules\": [\r\n        {\r\n            \"AllowedHeaders\": [\r\n                \"*\"\r\n            ],\r\n            \"AllowedMethods\": [\r\n                \"GET\",\r\n                \"PUT\",\r\n                \"POST\",\r\n                \"HEAD\"\r\n            ],\r\n            \"AllowedOrigins\": [\r\n                \"*\",\r\n                \"http://localhost:8000\"\r\n            ],\r\n            \"ExposeHeaders\": [\r\n                \"ETag\"\r\n            ],\r\n            \"MaxAgeSeconds\": 86400\r\n        }\r\n    ]\r\n}\r\n\r\n$ bucket=test; file=file2.doc; cat <<EOF | python | read upload_url\r\n# generate presigned url for put_object (can't generate it by aws cli)\r\n# instead of \"awslocal s3 presign s3://evidence.api.lambda.s3.bucket/file.doc --region eu-west-1\"\r\n\r\nimport os\r\nimport boto3\r\n\r\nos.environ['AWS_DEFAULT_REGION'] = 'us-east-1'\r\nos.environ['AWS_ACCESS_KEY_ID'] = 'test'\r\nos.environ['AWS_SECRET_ACCESS_KEY'] = 'test'\r\nurl = boto3.client('s3', endpoint_url='http://localhost:4566').generate_presigned_url(\r\n   ClientMethod='put_object',\r\n   Params={'Bucket': '$bucket', 'Key': '$file'},\r\n   ExpiresIn=3600\r\n)\r\nprint(url)\r\nEOF\r\n\r\n$ echo $upload_url\r\nhttp://localhost:4566/test/file2.doc?AWSAccessKeyId=test&Signature=8uA5%2BfbNKEdRo8mTzQfp6P2EQmE%3D&Expires=1637693398\r\n```\r\n\r\n![Screenshot_2021-11-23_19-53-15](https://user-images.githubusercontent.com/161289/143078202-b8f6cde0-f387-4ccd-b043-c6a8c77540a5.png)\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 199,
        "deletions": 11,
        "changed_files": 4,
        "created_at": "2021-11-22T20:32:36Z",
        "closed_at": "2021-11-23T09:44:56Z",
        "merged_at": "2021-11-23T09:44:56Z",
        "body": "This PR adds a CLI that wraps the `services/install.py` and adds a plugin class for registering installer methods for packages. In  the companion PR in localstack-ext, we introduce a plugin for ext packages.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2021-11-22T19:21:52Z",
        "closed_at": "2021-11-24T09:41:04Z",
        "merged_at": "2021-11-24T09:41:04Z",
        "body": "Skip replay tests introduced by #4985 for `Pro` integration tests, as we skip `replay` in `Pro` because of the different implementation of persistency.\r\n\r\nBecause of these lines in `localstack-ext`: https://github.com/localstack/localstack-ext/blob/833b345a9ecbd0f84bcbba6199d21be0cc34e7c6/localstack_ext/utils/persistence.py#L146-L148\r\n\r\nWe get this error\r\n```\r\n        resp = persistence.replay_command(payload)\r\n>       assert resp.status_code == 200\r\nE       AttributeError: 'NoneType' object has no attribute 'status_code'\r\n```\r\n\r\n\r\nFailed runs:\r\n- https://github.com/localstack/localstack/runs/4290802930?check_suite_focus=true\r\n\r\n",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 94,
        "deletions": 11,
        "changed_files": 2,
        "created_at": "2021-11-22T17:24:20Z",
        "closed_at": "2021-11-22T18:52:52Z",
        "merged_at": "2021-11-22T18:52:52Z",
        "body": "Related issue: https://github.com/localstack/localstack/issues/4297\r\n\r\nThe bug was introduced by https://github.com/localstack/localstack/pull/4033\r\n\r\nAn error was like this (reproduced in the test):\r\n```\r\ntests/unit/utils/test_persistence.py:89: AssertionError\r\n-------------------------------------------------------------------------------------------------------------- Captured log call ---------------------------------------------------------------------------------------------------------------\r\nERROR    werkzeug:_internal.py:225 Error on request:\r\nTraceback (most recent call last):\r\n  File \"/opt/localstack/env/lib/python3.9/site-packages/werkzeug/serving.py\", line 319, in run_wsgi\r\n    execute(self.server.app)\r\n  File \"/opt/localstack/env/lib/python3.9/site-packages/werkzeug/serving.py\", line 308, in execute\r\n    application_iter = app(environ, start_response)\r\n  File \"/opt/localstack/env/lib/python3.9/site-packages/moto/server.py\", line 204, in __call__\r\n    backend_app = self.get_application(environ)\r\n  File \"/opt/localstack/env/lib/python3.9/site-packages/moto/server.py\", line 164, in get_application\r\n    host = self.infer_service_region_host(environ)\r\n  File \"/opt/localstack/env/lib/python3.9/site-packages/moto/server.py\", line 91, in infer_service_region_host\r\n    credential_scope = auth.split(\",\")[0].split()[1]\r\nIndexError: list index out of range\r\n```",
        "comments": 3
    },
    {
        "merged": false,
        "additions": 426,
        "deletions": 1190,
        "changed_files": 8,
        "created_at": "2021-11-22T16:52:14Z",
        "closed_at": "2021-12-26T12:06:52Z",
        "merged_at": null,
        "body": "- implement dead letter queue behaviour via maxReceiveCount\r\n- enable both StandardQueue and FifoQueue behaviour\r\n- implement behaviour according to the tests against the old listener, such as .fifo for fifo queue names, no illegal unicode chars, etc\r\n- add and enhance tests\r\n- add md5 generation for attributes",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 166,
        "deletions": 1,
        "changed_files": 4,
        "created_at": "2021-11-22T08:32:15Z",
        "closed_at": "2021-11-22T23:06:52Z",
        "merged_at": "2021-11-22T23:06:52Z",
        "body": "API Gateway endpoints generated via CloudFormation are patched to return values compatible with localstack\r\n\r\n\r\nExample of CDK-generated output for API Gateway v2 uri\r\n```yaml\r\nOutputs:\r\n  ApiV2UrlOutput:\r\n    Value:\r\n      Fn::Join:\r\n        - \"\"\r\n        - - https://\r\n          - Ref: apigatewayE40D7439\r\n          - .execute-api.\r\n          - Ref: AWS::Region\r\n          - \".\"\r\n          - Ref: AWS::URLSuffix\r\n          - /\r\n```\r\n\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 17,
        "changed_files": 1,
        "created_at": "2021-11-22T08:21:21Z",
        "closed_at": "2021-11-22T10:22:35Z",
        "merged_at": "2021-11-22T10:22:35Z",
        "body": "With the new Docker image, we implemented a workaround for Kinesis by using `kinesalite` instead of `kinesis-mock` on arm64 (due to #4358).\r\nHowever, with the native docker image (and with it the native java runtime) the usage of `kinesis-mock` should be fine again.\r\nThis PR removes the workaround to use `kinesalite`. By default `kinesis-mock` is then used for all architectures again.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 79,
        "deletions": 1,
        "changed_files": 3,
        "created_at": "2021-11-22T05:41:20Z",
        "closed_at": "2021-11-23T17:47:21Z",
        "merged_at": "2021-11-23T17:47:21Z",
        "body": "The Rust AWS SDK has extra xmlns attributes on child elements that cause localstack to misparse valid bucket notification configurations. I've described the issue more thoroughly here: https://github.com/awslabs/aws-sdk-rust/issues/301\r\n\r\nI'm not really sure whose bug this is, to be honest. On the one hand localstack seems to choke on perfectly valid XML; on the other hand, sticking an `xmlns` attribute on every single element, like the Rust SDK does, is pretty weird. \r\n\r\nIn any case, this PR fixes the issue on localstack's side, if that's deemed the right approach.",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 146,
        "deletions": 145,
        "changed_files": 9,
        "created_at": "2021-11-20T19:13:08Z",
        "closed_at": "2021-11-24T19:16:47Z",
        "merged_at": "2021-11-24T19:16:47Z",
        "body": "This PR replaces the old plugin loading mechanism methods `load_plugins` and `register_localstack_plugins`, with the new plugin-based hook system.\r\n\r\n* Add the `hook_spec` and `HookManager` concepts built around [function plugins](https://github.com/localstack/localstack-plugin-loader/#functions-as-plugins) (into a new `runtime` module in preparation for more infra -> runtime refactoring)\r\n* Add four types of hooks (can be extended in the future for more fine-grained control over the startup proceedure)\r\n  * `configure_localstack_container` gets handed the `LocalstackContainer` object to add port mappings, volume binds, ... or anything else to the container that's about to run localstack\r\n  * `install` called in `install.py::install_components` that is called when the infra is started, or `install.py` is run from the terminal\r\n  * `prepare_host` called to prepare the host from which localstack is started, which shouldn't be called as part of the infra (e.g., creates the DNS server forward, the ec2 daemon, etc, ...)\r\n  * `on_infra_start` called when `do_infra_start` is called, and currently used for most of the pro setup (patching, ...)\r\n  * `on_infra_ready` called after the Ready marker has been printed\r\n\r\nthe companion PR in localstack-ext now uses these hooks to augment the localstack runtime.\r\n\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 762,
        "deletions": 100,
        "changed_files": 12,
        "created_at": "2021-11-19T22:53:41Z",
        "closed_at": "2021-11-20T14:32:45Z",
        "merged_at": "2021-11-20T14:32:45Z",
        "body": "This PR adds the following CLI commands and the necessary restructuring to make them possible:\r\n\r\n*  `localstack start --detached`: starts the localstack container in the background\r\n* `localstack wait` blocks until localstack is running (the ready marker has been printed)\r\n* `localstack logs --follow` tails the log output of localstack\r\n\r\nThe most noteworthy changes and improvements:\r\n\r\n* The most fundamental change is that, in the `start_infra_in_docker` routine, the terminal output no longer comes directly from the `docker run` command itself, but is forwarded to a logfile in the TMP folder that is then tailed using a new uiltity called `FileListener` (that is platform independent, but needs to be tested on Windows). that log is then printed to stdout asynchronously, while waiting on the docker run command to stop (via the `Server` abstraction)\r\n* added the CLI commands\r\n* The part of `start_infra_in_docker` that was building the command is now separated into a holder object (`LocalstackContainer`) and a configuration routine (`configure_container`)\r\n* adds a dedicated test step for bootstrapping (which involves starting up and tearing down the container).\r\n* `FORCE_NONINTERACTIVE` is not used anymore (there's no obvious reason to have an interactive tty docker session when only logs are printed to stdout)\r\n\r\nSome things that I hope will be useful in the future:\r\n* with the `LocalstackContainerServer`, you can now treat localstack as you would any `Server` implementation. this can be used in tests to start up and tear down localstack without mucking about with low-level docker commands.\r\n* the `LocalstackContainer` object can be passed to configuration hooks that modify the startup behavior, without being part of the actual startup routine\r\n* being able to start localstack in detached mode via the CLI paves the way for a new type of UX\r\n\r\nThings that need improving:\r\n* more bootstrap tests! especially for testing custom docker flags and volume mounts\r\n* The way the logfile is resolved for the `LocalstackContainer` is sort of hacky\r\n* The CmdDockerClient is used to allow the `--privileged` flag for the container startup\r\n* extend the item types `VolumeMappings` and use that throughout the `ContainerClient` abstraction (some ideas in this gist: https://gist.github.com/thrau/b450e79c6a08d965ca2731b26065b67c)\r\n* the ContainerClient abstraction does not provide any way of capturing or streaming the output of commands to something outside of the abstraction. i added `default_out_file` as a workaround, which is handed down as `outfile` parameter to the underlying subprocess to be able to capture the output of a `run_container` execution\r\n* the CI build step starts up localstack containers with the latest image, not the one built in the pipeline. this is only an issue when there is new interaction between the cli and the container runtime.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 111,
        "deletions": 8,
        "changed_files": 3,
        "created_at": "2021-11-19T20:41:01Z",
        "closed_at": "2021-11-24T15:06:07Z",
        "merged_at": "2021-11-24T15:06:07Z",
        "body": "Simple implementation of the [SNS delivery logs ](https://aws.amazon.com/premiumsupport/knowledge-center/monitor-sns-texts-cloudwatch/) requested in the issue #4036. \r\n\r\nChanges:\r\n- Every time a message is being sent, a log in the CloudWatch service is created.\r\n- Creation of a test for the creation of the LogGroup for the topic.\r\n\r\nNOTES:\r\n1.  The logs created are most approximate for the http/https and sms protocols.\r\n2.  In contrary to AWS, the user doesn't need to create an IAM rol neither to set attributes for the topic for the logs to be created.\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 15,
        "deletions": 15,
        "changed_files": 2,
        "created_at": "2021-11-19T14:29:24Z",
        "closed_at": "2021-11-22T16:38:33Z",
        "merged_at": "2021-11-22T16:38:33Z",
        "body": null,
        "comments": 2
    },
    {
        "merged": true,
        "additions": 16,
        "deletions": 14,
        "changed_files": 3,
        "created_at": "2021-11-18T17:39:03Z",
        "closed_at": "2021-11-18T21:21:54Z",
        "merged_at": "2021-11-18T21:21:54Z",
        "body": "Re-arrange some layers in the Dockerfile to decrease the image size and increase the number of cache hits.\r\n- Move the installation of awscli and awscli-local a bit up. These packages should only be updated if the requirements file changes.\r\n- Avoid adding the infra folder multiple times (in the builder and in the final stage).\r\n- Avoid adding the infra folder in the builder. It's non-reproducible and creates a cache-miss with every build.\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 65,
        "deletions": 308,
        "changed_files": 2,
        "created_at": "2021-11-18T13:41:48Z",
        "closed_at": "2021-11-19T14:45:14Z",
        "merged_at": "2021-11-19T14:45:14Z",
        "body": "also, apply the fix from #3947 to virtual host addressing part\r\n\r\nthis is deduplication for\r\n- `test_presigned_url_signature_authentication`\r\n- `test_presigned_url_signature_authentication_virtual_host_addressing`\r\n\r\nI will address this further with https://github.com/localstack/localstack/issues/4952.\r\n\r\n----\r\nInspired by https://github.com/localstack/localstack/blob/62c495a41b04df323a69cdd7240cbd80df280b34/tests/integration/test_s3.py#L2195-L2195\r\n\r\nHow I made the comparison:\r\n- unified some variables in both functions\r\n- created two files with content from `run_presigned_url_signature_authentication` and `run_presigned_url_signature_authentication_virtual_host_addressing`\r\n- compared files using `vimdiff`\r\n- extracted common parts into one method\r\n\r\nOne difference I found: \r\nhttps://github.com/localstack/localstack/blob/62c495a41b04df323a69cdd7240cbd80df280b34/tests/integration/test_s3.py#L2013-L2013\r\n\r\nFrom #3947\r\n\r\nWhen I included it to common method `test_presigned_url_signature_authentication_virtual_host_addressing` started to fail\r\n```\r\n__________________________________________________________________________________ TestS3.test_presigned_url_signature_authentication_virtual_host_addressing __________________________________________________________________________________\r\n....\r\ntests/integration/test_s3.py:2054: in run_presigned_url_signature_authentication\r\n    self.assertEqual(200, response.status_code)\r\nE   AssertionError: 200 != 403\r\n```\r\nSo I fixed this case in `localstack/services/s3/s3_utils.py` as well.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 15,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2021-11-18T11:16:05Z",
        "closed_at": "2021-11-18T13:07:40Z",
        "merged_at": "2021-11-18T13:07:40Z",
        "body": "With the recent refactoring of how we build the docker images (https://github.com/localstack/localstack/pull/4754), we do not squash the image anymore.\r\nHowever, the base image (`python:3.8-slim-buster`) is updated quite frequently. Therefore, we don't really benefit from the layer caching (both the local cache when pulling as well as the remote cache when building), since the whole cache is invalidated with an update of the base image.\r\n\r\nThis commit explicitly pins the docker base images by referencing them by their manifest-list digest:\r\n```\r\n$ docker buildx imagetools inspect docker.io/library/python:3.8.12-slim-buster\r\nName:      docker.io/library/python:3.8.12-slim-buster\r\n...\r\nDigest:    sha256:d328c165606db4773f8242972ae82c2f7312478a5071090a768d0e9fc63fab51\r\n...\r\n```\r\n(It needs to be the manifest-list's digest, otherwise a specific platform image would be referenced leading in build failures on other platforms.)\r\n\r\nThe downside of pinning the digest is that the base image is not updated anymore (updates to the - mutable - tags are ignored).\r\nTherefore this PR also enables GitHub's dependabot with the following config:\r\n- It only updates the root Dockerfile.\r\n- The Docker/Python dependency updates are limited to patch updates.\r\n- The updates are scheduled to be executed every Monday morning at 9:00 UTC.\r\n- The resulting PRs need to be manually approved and merged. (We could think about configuring some kind of auto-merge in the future, [but we would need to enable the automerge GitHub feature](https://github.com/marketplace/actions/fetch-metadata-from-dependabot-prs#enabling-auto-merge).)",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 9,
        "deletions": 6,
        "changed_files": 1,
        "created_at": "2021-11-18T08:37:09Z",
        "closed_at": "2021-11-18T13:09:00Z",
        "merged_at": "2021-11-18T13:09:00Z",
        "body": "https://docs.python.org/3/library/venv.html\r\n> When a virtual environment is active, the VIRTUAL_ENV environment variable\r\n> is set to the path of the virtual environment. This can be used to check\r\n> if one is running inside a virtual environment.\r\n\r\nI use a different directory for my virtual environment, and by coincidence, I use `.venv` file for project-based settings: https://github.com/naspeh/dotfiles/blob/eaf47f55f2e4b7f40e94f178fbe7a29f6c3b9421/env/zshrc#L77-L89\r\n\r\nI set `export VENV_DIR=../env/` for `Makefile`, but we have this hardcoded `.venv` in `localstack.constants` that caused some issues while I was bootstrapping the project and running tests.  As you can see from docs, `VIRTUAL_ENV` is a good way to check the virtual environment. I keep existing logic as a fallback.\r\n\r\nIt is supposed to be my first PR in `localstack`, but I postponed it using `git stash`, and now I've prepared the fix.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 14,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2021-11-18T07:54:56Z",
        "closed_at": "2021-11-18T13:24:16Z",
        "merged_at": "2021-11-18T13:24:16Z",
        "body": "While investigating https://github.com/localstack/localstack/issues/4639 found this.\r\n\r\n\r\n```sh\r\n# while deleting objects from the non-existing bucket\r\nawslocal s3api delete-objects --bucket test-non-existing --delete '{\"Objects\":[{\"Key\":\"test.txt\"}]}' \r\n\r\n# server throws error\r\n2021-11-18T07:51:59.155:WARNING:localstack.utils.server.http2_server: Error in proxy handler for request POST http://localhost:4566/test-non-existing?delete: 'NoneType' object has no attribute 'get' Traceback (most recent call last):\r\n  File \"/opt/localstack/localstack/localstack/utils/server/http2_server.py\", line 159, in index\r\n    result = await run_sync(handler, request, data)\r\n  File \"/opt/localstack/localstack/localstack/utils/async_utils.py\", line 86, in run_sync\r\n    return await loop.run_in_executor(thread_pool, copy_context().run, func_wrapped)\r\n  File \"/opt/localstack/localstack/localstack/utils/run.py\", line 150, in run\r\n    result = self.func(self.params, **kwargs)\r\n  File \"/opt/localstack/localstack/localstack/utils/async_utils.py\", line 31, in _run\r\n    return fn(*args, **kwargs)\r\n  File \"/opt/localstack/localstack/localstack/services/generic_proxy.py\", line 669, in handler\r\n    response = modify_and_forward(\r\n  File \"/opt/localstack/localstack/localstack/utils/aws/request_context.py\", line 205, in modify_and_forward\r\n    result = modify_and_forward_orig(\r\n  File \"/opt/localstack/localstack/localstack/services/generic_proxy.py\", line 338, in modify_and_forward\r\n    listener_result = listener.forward_request(\r\n  File \"/opt/localstack/localstack/localstack/services/edge.py\", line 172, in forward_request\r\n    result = do_forward_request(api, method, path, data, headers, port=port)\r\n  File \"/opt/localstack/localstack/localstack/services/edge.py\", line 227, in do_forward_request\r\n    result = do_forward_request_inmem(api, method, path, data, headers, port=port)\r\n  File \"/opt/localstack/localstack/localstack/services/edge.py\", line 250, in do_forward_request_inmem\r\n    response = modify_and_forward(\r\n  File \"/opt/localstack/localstack/localstack/services/generic_proxy.py\", line 414, in modify_and_forward\r\n    updated_response = update_listener.return_response(**kwargs)\r\n  File \"/opt/localstack/localstack/localstack/services/s3/s3_listener.py\", line 1446, in return_response\r\n    fix_delete_objects_response(bucket_name, method, parsed, data, headers, response)\r\n  File \"/opt/localstack/localstack/localstack/services/s3/s3_listener.py\", line 664, in fix_delete_objects_response\r\n    errors = result.get(\"Error\")\r\nAttributeError: 'NoneType' object has no attribute 'get'\r\n```",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 6,
        "deletions": 40,
        "changed_files": 1,
        "created_at": "2021-11-17T21:43:18Z",
        "closed_at": "2021-11-18T00:41:48Z",
        "merged_at": "2021-11-18T00:41:48Z",
        "body": "Just some minor cleanup I did while looking through bootstrap.py to better understand what it does",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 21,
        "deletions": 5,
        "changed_files": 4,
        "created_at": "2021-11-17T19:48:04Z",
        "closed_at": "2021-11-17T23:40:28Z",
        "merged_at": "2021-11-17T23:40:28Z",
        "body": "STS responses contain `Content-Type: text/html` header, but AWS returns `text/xml`. \r\nSome applications (e.g. Hashicorp Vault) rely on `text/xml` and don't work properly. ",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 35,
        "deletions": 34,
        "changed_files": 2,
        "created_at": "2021-11-17T15:16:34Z",
        "closed_at": "2021-11-17T20:07:08Z",
        "merged_at": "2021-11-17T20:07:08Z",
        "body": "Addresses the comment in https://github.com/localstack/localstack/pull/4754#pullrequestreview-806142105\r\n\r\n~~currently we have no way to test this though.~~\r\n\r\nfor full compatibility we also have to\r\n- [x] compile the examples in https://github.com/localstack/awslamba-go-runtime for arm64\r\n- [x] pick the right one in https://github.com/localstack/localstack/blob/10ce50ce2abe65973ed2d97233df5e1a717d26f1/tests/integration/test_lambda.py#L135-L137\r\n- [x] re-enable https://github.com/localstack/localstack/blob/10ce50ce2abe65973ed2d97233df5e1a717d26f1/tests/integration/test_lambda.py#L1691-L1692",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 47,
        "changed_files": 1,
        "created_at": "2021-11-17T14:40:44Z",
        "closed_at": "2021-11-17T17:28:58Z",
        "merged_at": "2021-11-17T17:28:57Z",
        "body": "With https://github.com/spulec/moto/pull/4201 being released (quite a while ago), we can remove related fix from `localstack`.\r\n\r\nI have tested this manually with the repo provided in #4743.\r\n\r\nAlso, I removed [the related handler from `moto`](https://github.com/spulec/moto/blob/60d9667da26e91c69232d3366039b0e8da823339/moto/s3/responses.py#L1274-L1280):\r\n```py\r\n        if (\r\n            request.headers.get(\"x-amz-content-sha256\", None)\r\n            == \"STREAMING-AWS4-HMAC-SHA256-PAYLOAD\"\r\n        ):\r\n            #body = self._handle_v4_chunk_signatures(\r\n            #    body, int(request.headers[\"x-amz-decoded-content-length\"])\r\n            #)\r\n            pass\r\n```\r\nAnd ran [this test](https://github.com/localstack/localstack/blob/1b690097c00ad8c163b2056c0e43b00a5fc7c29e/tests/integration/test_s3.py#L651-L651\r\n)\r\n```sh\r\n$ pytest -v --tb=native -k test_s3_put_object_chunked_newlines\r\n....\r\ntests/integration/test_s3.py::TestS3::test_s3_put_object_chunked_newlines FAILED                                                                                                                                                         [100%]\r\n...\r\n__________________________________________________________________________________________________ TestS3.test_s3_put_object_chunked_newlines __________________________________________________________________________________________________\r\nTraceback (most recent call last):\r\n  File \"/opt/localstack/localstack/tests/integration/test_s3.py\", line 684, in test_s3_put_object_chunked_newlines\r\n    self.assertEqual(len(body), len(str(download_file_object)))\r\n  File \"/usr/lib64/python3.9/unittest/case.py\", line 831, in assertEqual\r\n    assertion_func(first, second, msg=msg)\r\n  File \"/usr/lib64/python3.9/unittest/case.py\", line 824, in _baseAssertEqual\r\n    raise self.failureException(msg)\r\nAssertionError: 13 != 183\r\n```\r\nSo we have a test that covers this place a bit.\r\n\r\nTaking into account:\r\n```\r\nWARNING:localstack.services.infra: Persistence mechanism for community services (based on API calls record&replay) will be deprecated in 0.13.0\r\n```\r\nAn integration test that would cover the whole process from https://github.com/localstack/localstack/issues/4743 will be harder to implement. It requires running `localstack` without API key and with `DATA_DIR` and then stopping it and running again, which can be a pretty slow test, so I don't think it makes sense to introduce it.\r\n\r\n-----\r\n\r\nThe original issue in #4743 was: when we recorded the request without `x-amz-content-sha256` header\r\nhttps://github.com/localstack/localstack/blob/10ce50ce2abe65973ed2d97233df5e1a717d26f1/localstack/services/s3/s3_listener.py#L1267-L1267\r\n\r\n and after `localstack` restart we replay the request without that header (persistency based on API calls record&replay), but with `chunk-signature=` in the body.\r\n\r\nFixes: #4743",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 28,
        "deletions": 10,
        "changed_files": 2,
        "created_at": "2021-11-15T22:15:38Z",
        "closed_at": "2021-11-20T19:23:43Z",
        "merged_at": "2021-11-20T19:23:42Z",
        "body": "Fixes #4794\r\nExtended the existing integration test `test_dynamodb_with_kinesis_stream` to cover the added functionality.\r\n\r\n\r\n\r\n\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 105,
        "deletions": 1,
        "changed_files": 3,
        "created_at": "2021-11-15T19:26:00Z",
        "closed_at": "2021-11-19T13:25:02Z",
        "merged_at": "2021-11-19T13:25:02Z",
        "body": "Subnet Route Table association were limited to one per route table, this will add a check for subnet id.\r\n\r\nSimilar fix as for route table.\r\n",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 0,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2021-11-15T13:05:49Z",
        "closed_at": "2021-11-15T15:25:21Z",
        "merged_at": null,
        "body": "This reverts commit cd464b911458b6145772f8248771ff5fb7b739e2.\r\n\r\n... checking whether this is really causing the problem",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 168,
        "deletions": 44,
        "changed_files": 7,
        "created_at": "2021-11-14T00:42:39Z",
        "closed_at": "2021-11-16T16:16:50Z",
        "merged_at": "2021-11-16T16:16:50Z",
        "body": "Support \"stay open\" mode for Lambda invocations.\r\n\r\nBased on #4906 . Recreated the PR, to trigger the CI builds, and added a few minor fixes.\r\n\r\nReplaces #4185\r\nCloses #4123",
        "comments": 8
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 3,
        "changed_files": 1,
        "created_at": "2021-11-13T05:32:39Z",
        "closed_at": "2021-11-13T18:52:48Z",
        "merged_at": "2021-11-13T18:52:48Z",
        "body": "While reading documentation recently, I discovered a few typos in the README.md file. This PR corrects what I found.\r\n\r\nNote: Given that this is only documentation edits, I didn't think it worthwhile to configure the dev environment for tests or linting, so those haven't been run.\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 37,
        "deletions": 11,
        "changed_files": 2,
        "created_at": "2021-11-12T17:15:26Z",
        "closed_at": "2021-11-13T18:51:54Z",
        "merged_at": "2021-11-13T18:51:54Z",
        "body": "Adds support for `{\"exists\": false}` filters to SNS filters that were added to SNS in April 2021.\r\n\r\nhttps://aws.amazon.com/about-aws/whats-new/2021/04/amazon-sns-grows-the-set-of-message-filtering-operators/\r\n\r\nCloses #4379",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 79,
        "deletions": 22,
        "changed_files": 5,
        "created_at": "2021-11-12T00:14:57Z",
        "closed_at": "2021-11-12T21:25:12Z",
        "merged_at": "2021-11-12T21:25:12Z",
        "body": "Extend `escapeJavaScript(..)` velocity template function and add more tests for it. This function is required for API GW request/response mapping templates.\r\n\r\nPartial fix for #4719",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 56,
        "deletions": 10,
        "changed_files": 2,
        "created_at": "2021-11-11T14:20:52Z",
        "closed_at": "2021-11-16T11:29:53Z",
        "merged_at": null,
        "body": "Fix to `LAMBDA_EXECUTOR=docker-reuse` by using the `DOCKER_LAMBDA_STAY_OPEN` in lambci/lambda containers to allow faster lambda invocations.\r\n\r\nThis as been tested against both `nodejs` and `.NET` lambdas (`.NET` using custom runtime `provided.al2`)\r\n\r\nPlease feel free test further @jamietanna, @wesselvdv\r\n\r\n**NOTE:** I had to fork brand new as the current changes in `master` are extensive enough to warrant a clean slate.\r\n\r\n\r\n[Replaces PR-4185](https://github.com/localstack/localstack/pull/4185)\r\n[Closes #4123](https://github.com/localstack/localstack/pull/4185#issue-927174042)",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 54,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2021-11-11T02:35:31Z",
        "closed_at": "2021-11-11T10:38:22Z",
        "merged_at": "2021-11-11T10:38:22Z",
        "body": "URLs are encoded by clients and when trying to `get-base-path-mapping` with the `(none)` type localstack fails to match the url since it is encoded `%28none%29`. \r\nThis PR right now decodes the urls being passed into the handle_base_path_mappings. However, it might be worth considering putting this at a higher level to make sure all URLs are decoded.\r\n\r\nFixes #4891 \r\n",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 43,
        "deletions": 21,
        "changed_files": 1,
        "created_at": "2021-11-10T22:23:32Z",
        "closed_at": "2021-11-11T11:51:02Z",
        "merged_at": null,
        "body": "* restructured https://github.com/localstack/awslamba-go-runtime to allow cross platform builds\r\n* refactored the install routine of the go lambda runtime according to the new distribution format\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 118,
        "deletions": 20,
        "changed_files": 3,
        "created_at": "2021-11-10T17:21:58Z",
        "closed_at": "2021-11-11T10:22:25Z",
        "merged_at": "2021-11-11T10:22:25Z",
        "body": "Uses the the  botocore ArnParser utility to parse ARNs. Hopefully fixing the regression in #4894",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 38,
        "deletions": 6,
        "changed_files": 2,
        "created_at": "2021-11-10T15:28:01Z",
        "closed_at": "2021-11-10T21:32:47Z",
        "merged_at": "2021-11-10T21:32:46Z",
        "body": "For this, we now let the docker sdk handle the parsing of the image name provided.\r\n\r\nAlso adds test for that particular usecase.\r\n\r\nFixes #4876 ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 259,
        "deletions": 232,
        "changed_files": 5,
        "created_at": "2021-11-10T12:52:58Z",
        "closed_at": "2021-12-06T18:09:46Z",
        "merged_at": "2021-12-06T18:09:46Z",
        "body": "Removes filter behavior which isn't in [documented in the official docs](https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/FilterAndPatternSyntax.html). In the community edition the change in the PR amounts to filters selecting all logs all the time. Proper filtering for the JSON filters will be added to Pro. \r\n\r\nLoosely related to #4826 ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 5,
        "changed_files": 1,
        "created_at": "2021-11-09T22:56:39Z",
        "closed_at": "2021-11-17T17:58:12Z",
        "merged_at": "2021-11-17T17:58:12Z",
        "body": "Continuation of #4887. \r\n\r\nChanges:\r\n - The conversion of booleans from the IAM service responses to lowercase is done for all clients now.\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 22,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2021-11-09T19:26:05Z",
        "closed_at": "2021-11-09T22:08:28Z",
        "merged_at": "2021-11-09T22:08:28Z",
        "body": "After testing #4831, it's shown that the iam client of the AWS SDK for NodeJs needs the boolean values to be in lowercase not truncated like many other SDKs.\r\n\r\nChanges:\r\n - Transform to lowercase the boolean values of the xml content when User-Agent is `aws-sdk-js`\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 634,
        "deletions": 197,
        "changed_files": 9,
        "created_at": "2021-11-09T17:36:19Z",
        "closed_at": "2021-11-10T17:23:21Z",
        "merged_at": "2021-11-10T17:23:21Z",
        "body": "This PR adds a tiny framework for routing REST calls to resource classes through the edge proxy, and uses that framework to route internal `/_localstack` calls. It's inspired by the Falcon framework that encapsulates request handlers into classes and `on_<verb>` methods.\r\n\r\nResources can be added with `get_internal_apis().add_route('/my/route', MyResource())` where `MyResource` is a class that  exposes optional `on_get(request: Request)`, `on_post`, `on_put`, ... methods.\r\nWe can now also think about adding internal routes through the plugin mechanism.\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2021-11-09T15:52:34Z",
        "closed_at": "2021-11-09T20:25:13Z",
        "merged_at": "2021-11-09T20:25:13Z",
        "body": "Fixing an issue where the LEGACY_DOCKER_CLIENT environment variable was not being parsed by the CLI. Relevant issue #4876",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 85,
        "deletions": 6,
        "changed_files": 3,
        "created_at": "2021-11-08T23:22:14Z",
        "closed_at": "2021-11-12T21:28:49Z",
        "merged_at": "2021-11-12T21:28:49Z",
        "body": "The check against current stack was breaking multi route tables creation from the cloudformation template.\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 101,
        "deletions": 146,
        "changed_files": 3,
        "created_at": "2021-11-08T17:33:36Z",
        "closed_at": "2021-11-11T12:53:55Z",
        "merged_at": "2021-11-11T12:53:55Z",
        "body": "Depends on https://github.com/spulec/moto/pull/4542\r\n\r\nOur custom patch didn't support paging and because moto has since implemented part of this, I've added the label filtering there making our custom patch unnecessary. Should only be merged after the corresponding moto change is in our fork.\r\n\r\nCloses #4607",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 634,
        "deletions": 14,
        "changed_files": 1,
        "created_at": "2021-11-08T16:36:26Z",
        "closed_at": "2021-11-16T14:17:37Z",
        "merged_at": "2021-11-16T14:17:37Z",
        "body": "Refactoring SQS Tests\r\n",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 210,
        "deletions": 8,
        "changed_files": 3,
        "created_at": "2021-11-07T16:58:47Z",
        "closed_at": "2021-11-07T19:48:36Z",
        "merged_at": "2021-11-07T19:48:36Z",
        "body": "Add simple UI for deploying CloudFormation stacks from public template URLs. Inspired from the \"1-click deploy\" feature in the AWS console that allows to point to an existing CFN template URL, fill out the required parameters, and trigger the deployment from the browser.\r\n\r\nThe app is implemented as a standalone React app, with embedded babel runtime compiler. (Deliberately kept simple, to avoid having a separate build step for this app).\r\n\r\nThe app is accessible under `http://localhost:4566/_/deploy`, and we can either pass in `templateURL` as a query parameter, or enter the template URL (e.g., https://s3.eu-central-1.amazonaws.com/cloudformation-templates-eu-central-1/DynamoDB_Secondary_Indexes.template) on the start page:\r\n\r\n-----\r\n\r\n<img width=\"669\" alt=\"image\" src=\"https://user-images.githubusercontent.com/2807888/140654127-f5cf4f31-b829-485f-8562-ccd03a374a1d.png\">\r\n\r\n-----\r\n\r\nIn the next step we download the template URL and extract the stack parameters (default values automatically applied):\r\n<img width=\"1067\" alt=\"image\" src=\"https://user-images.githubusercontent.com/2807888/140654160-fc982021-2651-47c5-b0f2-de28d2363423.png\">\r\n\r\n-----\r\n\r\nUpon submit, the stack deployment is triggered, and we're displaying a result message (with a pointer to app.localstack.cloud, in case users are interested in browsing the deployed resources):\r\n\r\n<img width=\"1041\" alt=\"image\" src=\"https://user-images.githubusercontent.com/2807888/140654194-03559a86-51d9-4394-ac3e-b180e0d72bfc.png\">\r\n\r\n-----\r\n\r\n/cc @dominikschubert @thrau \r\n\r\n@thrau - What are your thoughts on using a common path for all the internal, e.g., `/-/....`? Please review (see `PATH_PREFIX_INTERNAL` in the PR) - might affect the routing logic in other places.. Thanks\r\n\r\n**Note:** The styling is very rudimentary at this point ;) - we can brush it up in a follow-up iteration...",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 849,
        "deletions": 261,
        "changed_files": 11,
        "created_at": "2021-11-06T16:25:41Z",
        "closed_at": "2021-11-08T16:00:15Z",
        "merged_at": "2021-11-08T16:00:15Z",
        "body": "this PR adds one-cluster-per-domain support #4865 as well as the (necessary) domain and path-based endpoint creation.\r\n\r\n## Endpoint strategies\r\n\r\nthe value of `ES_ENDPOINT_STRATEGY` governs how endpoints are created for a domain:\r\n\r\n* `domain`: `<domain-name>.<region>.es.localhost.localstack.cloud:4566`\r\n* `path`: `localhost:4566/es/<region>/<domain-name>`\r\n* `off`: `localhost:4571` (only works with single cluster)\r\n\r\nspecifying a custom endpoint like `localhost:4566/foo/bar` will overwrite the behavior and simply make the elasticsearch cluster routable through that endpoint.\r\n\r\na major breaking change is that the localstack ES api now behaves like the AWS api, and does not send a fully-qualified URL in the `Endpoint` field of the `CreateElasticsearchDomain` request. (`localhost:4571` instead of `http://localhost:4571`)\r\n\r\n## Multi-cluster\r\n\r\n`ES_MULTI_CLUSTER`: a bolean flag indicating whether or not to spawn one cluster per domain, or to multiplex all domains to a single cluster.\r\nThere are three managers for the different config permutations:\r\n\r\n| `ES_MULTI_CLUSTER` | `ES_ENDPOINT_STRATEGY` | Cluster manager |\r\n|---------------------------------|------------------------------------------|------------------------|\r\n| `True` | `path` or `domain` | `MultiClusterManager` creates one cluster per create domain request |\r\n| `False` | `path` or `domain` | `MultiplexingClusterManager`, creates a single cluster for the first create domain request, then creates endpoints that point to that cluster |\r\n| `False` | `off` | `SingletonClusterManager` creates a single cluster on `http://localhost:4571` and will return that endpoint for each subsequent create domain request | \r\n| `True` | `!= off` | Invalid configuration: cannot provide multiple clusters without an endpoint strategy |\r\n\r\n## Storage Layout\r\n\r\nThe PR changes the way that cluster data is stored.\r\nThe elasticsearch installation directory is now untouched, all data comes into either the DATA_DIR or TMP_FOLDER, and will be organized as `<arn>/<domain>`.\r\n\r\n```\r\nthomas@om /tmp/localstack % tree -L 4\r\n.\r\n\u251c\u2500\u2500 elasticsearch\r\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 arn:aws:es:us-east-1:000000000000:domain\r\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 my-cluster-1\r\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 backup\r\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 data\r\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2514\u2500\u2500 tmp\r\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 my-cluster-2\r\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 backup\r\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 data\r\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2514\u2500\u2500 tmp\r\n```\r\n\r\n## TODOs\r\n- [x] endpoint strategies\r\n- [x] multi-cluster management\r\n- [x] update storage layout for elasticsearch instances (use domain names for es data dir)\r\n- [x] write tests",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 522,
        "deletions": 21,
        "changed_files": 8,
        "created_at": "2021-11-05T22:52:13Z",
        "closed_at": "2021-11-06T12:44:10Z",
        "merged_at": "2021-11-06T12:44:10Z",
        "body": "This PR adds support for custom elasticsearch endpoints that can be routed through the edge proxy as described here:\r\n* #4861\r\n\r\nThe newly introduced `UrlMatchingForwarder` allows limited URL rewriting, and facilitates both host and path-based URL matching and forwarding rules.\r\nFor example, you can define: `http://localhost:4566/my-cluster-endpoint => http://localhost:12356/`, and `http://localhost:4566/my-cluster-endpoint/foo/bar` will be routed to `http://localhost:12356/foo/bar`, which is what we need to route requests through the edge proxy to a backend like elasticsearch. The `UrlMatchingForwarder` supports other patterns as well (see the test for it)\r\n\r\nTo test the elasticsearch feature run:\r\n\r\n```\r\nawslocal es create-elasticsearch-domain \\                                                                          \r\n   --domain-name my-cluster  \\\r\n   --domain-endpoint-options '{ \"CustomEndpointEnabled\": true,\"CustomEndpoint\": \"http://localhost:4566/my-cluster-endpoint\" }'\r\n```\r\nand then you can call:\r\n\r\n`curl http://localhost:4566/my-cluster-endpoint` or `http://localhost:4566/my-cluster-endpoint/_cluster/health`\r\n\r\nthe same works with URLs, so you could use `http://es.localhost.localstack.cloud:4566` as custom endpoint.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 13,
        "changed_files": 3,
        "created_at": "2021-11-05T07:13:43Z",
        "closed_at": "2021-11-05T17:09:20Z",
        "merged_at": "2021-11-05T17:09:20Z",
        "body": "Upgrade Terraform version in base image to fix and re-enable TF tests.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 192,
        "deletions": 31,
        "changed_files": 6,
        "created_at": "2021-11-04T22:17:41Z",
        "closed_at": "2021-11-05T17:08:38Z",
        "merged_at": "2021-11-05T17:08:38Z",
        "body": "This PR adds support for older (and generally more) elasticsearch versions. I've refactored a bit of the version and URL fetching logic to make it less static (removed the `ELASTICSEARCH_URL` constants and replaced it with a function).\r\n\r\nI've tested the creation of a cluster with ES 5.5 locally, and at least starting/stopping and the health endpoints work. The default version is still respected (set to 7.10.0)\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 38,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2021-11-04T20:06:06Z",
        "closed_at": "2021-11-05T16:06:50Z",
        "merged_at": "2021-11-05T16:06:50Z",
        "body": "This PR adds several tests for the following issues\r\n\r\n- #3619 not reproducible in python tests\r\n- #3737 not reproducible in python tests\r\n- #4135 fails with LocalStack",
        "comments": 5
    },
    {
        "merged": true,
        "additions": 56,
        "deletions": 26,
        "changed_files": 2,
        "created_at": "2021-11-04T15:40:34Z",
        "closed_at": "2021-11-05T01:32:03Z",
        "merged_at": "2021-11-05T01:32:03Z",
        "body": "Minor refactoring of API Gateway for easier extraction of resource/method details from invocation context",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 76,
        "deletions": 57,
        "changed_files": 5,
        "created_at": "2021-11-04T15:33:23Z",
        "closed_at": "2021-11-05T11:31:56Z",
        "merged_at": "2021-11-05T11:31:56Z",
        "body": "* Fixes monkey patches of ses in moto to always use current instance of ses_backend\r\n* Add reruns to github action to make test results more stable\r\n* Do not allow redirects in priviledged proxies\r\n* Redo ses tests in pytest",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2021-11-04T11:21:11Z",
        "closed_at": "2021-11-05T17:56:09Z",
        "merged_at": "2021-11-05T17:56:09Z",
        "body": "As indicated by the latest comment in #2626 message attribute bodies are now wrapped inside a CDATA tag (as of moto/moto#4337). This does not match the behaviour of AWS which uses html encoding. This behaviour is handled fine by some XML parsers (such as the one used by boto - hence the passing tests) but it causes issues for some SDKs, the .Net one in particular.\r\n\r\nThis PR removes the CDATA wrapper and relies on the existing escaping call to handle special characters (essentially reverting localstack behaviour back to before the moto change). \r\nI have not added any tests as I wasn't sure if they were possible when using the boto library, it only exposes the decoded attribute values.",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 21,
        "deletions": 26,
        "changed_files": 2,
        "created_at": "2021-11-03T14:58:31Z",
        "closed_at": "2021-11-03T16:16:24Z",
        "merged_at": "2021-11-03T16:16:24Z",
        "body": "Issue was due to type erasure and creation of bridge functions in Java.\r\n\r\nFixes #4512.\r\n\r\nTo be released after artifacts of localstack/localstack-java-utils#79 are published.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 225,
        "deletions": 185,
        "changed_files": 4,
        "created_at": "2021-11-03T12:46:41Z",
        "closed_at": "2021-11-03T18:53:03Z",
        "merged_at": "2021-11-03T18:53:03Z",
        "body": "Introduce a `ApiInvocationContext` class to properly encapsulate API Gateway request context information.\r\n\r\nThis is a (long overdue) refactoring that will help us streamline the code logic and address the remaining missing features (e.g., certain request authorizer details) in API Gateway more systematically.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 17,
        "deletions": 36,
        "changed_files": 5,
        "created_at": "2021-11-02T23:35:55Z",
        "closed_at": "2021-11-03T19:19:29Z",
        "merged_at": "2021-11-03T19:19:29Z",
        "body": "There were some issues with the AWS::SecretsManager::Secret  and the related cloudformation test. \r\n\r\nRemoves the Username reference from the test template since this isn't actually defined and correctly fails when trying to deploy on AWS. The test now works both against AWS and LocalStack.\r\n\r\nAlso removes some presumably legacy code and unnecessary physical-id-generating fallbacks that led to some issues/race conditions when deploying the secret where the output resolved to the wrong ARN in up to 50% of test runs.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 57,
        "deletions": 18,
        "changed_files": 4,
        "created_at": "2021-11-02T21:25:41Z",
        "closed_at": "2021-11-03T11:24:08Z",
        "merged_at": "2021-11-03T11:24:08Z",
        "body": "This PR fixes a few issues blocking the pilot SQS implementation that are mostly related to dispatching requests.\r\n\r\n* sets the attributes of `RequestContext` to None (to avoid attribute errors at runtime)\r\n* skeleton re-uses the parsed operation/request from the RequestContext if it exists (in preparation for new handler framework)\r\n* adds a `ServiceOperation` that encapsulates the unique identifier of an operation `service_name, operation_name` (in preparation for service request routing)\r\n* `ServiceRequestDispatcher` initializes the required default values (boto clients may remove empty lists or dict from the request entirely, but the APIs expect a value)",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 180,
        "deletions": 25,
        "changed_files": 6,
        "created_at": "2021-11-02T19:33:32Z",
        "closed_at": "2021-11-02T23:23:14Z",
        "merged_at": "2021-11-02T23:23:14Z",
        "body": "Add test-invoke-method to API-GW - copy of PR #3553, rebased onto latest `master`.. /cc @monty16597 ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 9,
        "changed_files": 2,
        "created_at": "2021-11-02T16:24:36Z",
        "closed_at": "2021-11-02T17:27:41Z",
        "merged_at": "2021-11-02T17:27:40Z",
        "body": "Following the suggestions from the pull request #4809 ,found that there is already a function that extracts the region from the arn in the suggested lib.\r\n\r\nChanges:\r\n - delete the duplicated function\r\n - use of `aws_stack.extract_region_from_arn`\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 79,
        "deletions": 4,
        "changed_files": 3,
        "created_at": "2021-11-02T13:21:52Z",
        "closed_at": "2021-11-03T11:29:05Z",
        "merged_at": "2021-11-03T11:29:04Z",
        "body": "This PR adds the concept of a `ServiceLifecycleHook` that encapsulates functionality executed during the lifecycle of a `Service`, and can be injected into a `Service`.\r\n\r\nThis is a preparation for the AWS service framework, where a lifecycle hook can be used to call certain methods of a service when it is initialized or started up. In the future, we can use this abstraction to inject state into services.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 286,
        "deletions": 5,
        "changed_files": 3,
        "created_at": "2021-11-02T13:02:31Z",
        "closed_at": "2021-11-02T14:46:18Z",
        "merged_at": "2021-11-02T14:46:18Z",
        "body": null,
        "comments": 1
    },
    {
        "merged": true,
        "additions": 139,
        "deletions": 53,
        "changed_files": 3,
        "created_at": "2021-11-02T11:29:39Z",
        "closed_at": "2021-11-02T14:23:00Z",
        "merged_at": "2021-11-02T14:23:00Z",
        "body": "This PR adds encapsulation for the dynamodb process into a `serving.Server` subclass, and adds a factory using environment variables to enable #4836\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2021-11-02T09:43:28Z",
        "closed_at": "2021-11-02T11:30:40Z",
        "merged_at": "2021-11-02T11:30:40Z",
        "body": "updates the global variable in the es_api.py to the version we set as default a while ago",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2021-10-31T11:30:30Z",
        "closed_at": "2021-10-31T18:18:24Z",
        "merged_at": "2021-10-31T18:18:24Z",
        "body": null,
        "comments": 0
    },
    {
        "merged": true,
        "additions": 21,
        "deletions": 7,
        "changed_files": 1,
        "created_at": "2021-10-29T15:31:50Z",
        "closed_at": "2021-10-29T21:26:38Z",
        "merged_at": "2021-10-29T21:26:38Z",
        "body": "Small change to the test util function `create_zip_file`\r\n\r\nMy changes in ext depend on those changes\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 65,
        "deletions": 0,
        "changed_files": 3,
        "created_at": "2021-10-29T12:31:59Z",
        "closed_at": "2021-10-29T21:35:52Z",
        "merged_at": "2021-10-29T21:35:52Z",
        "body": "Minor fix for the AWS::SSM::Parameter cloudformation resource. Assigns a default name for parameters. Interestingly this generated name is a bit different from the usual AWS scheme of stack-logicalid-random in this case.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 3873,
        "deletions": 0,
        "changed_files": 17,
        "created_at": "2021-10-29T09:09:44Z",
        "closed_at": "2021-10-29T18:27:55Z",
        "merged_at": "2021-10-29T18:27:55Z",
        "body": "This PR adds the initial version of the AWS Service Framework, a full implementation of the Query protocol, and partial implementations of the other protocols.\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2021-10-28T21:44:56Z",
        "closed_at": "2021-10-28T23:34:12Z",
        "merged_at": "2021-10-28T23:34:12Z",
        "body": "Adding a reference to troubleshooting guide, when using lambda remote mode do not set DOCKER_HOST in the localhost container.\r\n\r\nSee question originally raised for notes and references to the behaviour in action,\r\nhttps://github.com/localstack/localstack/issues/4801\r\n\r\n\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 20,
        "deletions": 3,
        "changed_files": 2,
        "created_at": "2021-10-28T21:15:55Z",
        "closed_at": "2021-10-29T08:53:01Z",
        "merged_at": "2021-10-29T08:53:01Z",
        "body": "This PR addresses issue localstack/localstack#4763.\r\n\r\nThe changes are the next:\r\n  1. Now the s3 notifications reach resources in different regions using the ARN\r\n  2. Correction of the Event generated when a file is uploaded through a pre-signed post form.\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2021-10-28T16:10:04Z",
        "closed_at": "2021-11-08T23:25:16Z",
        "merged_at": "2021-11-08T23:25:16Z",
        "body": "Draft PR to see whether the CI build stays green with lazy loading as default",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 29,
        "deletions": 10,
        "changed_files": 1,
        "created_at": "2021-10-28T14:10:49Z",
        "closed_at": "2021-10-28T15:14:12Z",
        "merged_at": "2021-10-28T15:14:12Z",
        "body": "Addresses the issue described in #4782 by adding concurrency control around `aws_stack.connect_to_service`.\r\n\r\nThe critical piece of information from the logs was:\r\n```\r\n2021-10-27T05:48:27:ERROR:localstack.services.sqs.sqs_starter: SQS health check failed\r\nTraceback (most recent call last):\r\n  File \"/opt/code/localstack/localstack/services/sqs/sqs_starter.py\", line 47, in check_sqs\r\n    service_name=\"sqs\", endpoint_url=endpoint_url\r\n  File \"/opt/code/localstack/localstack/utils/aws/aws_stack.py\", line 325, in connect_to_service\r\n    **kwargs,\r\n  File \"/opt/code/localstack/.venv/lib/python3.7/site-packages/boto3/__init__.py\", line 93, in client\r\n    return _get_default_session().client(*args, **kwargs)\r\n  File \"/opt/code/localstack/.venv/lib/python3.7/site-packages/boto3/session.py\", line 263, in client\r\n    aws_session_token=aws_session_token, config=config)\r\n  File \"/opt/code/localstack/.venv/lib/python3.7/site-packages/botocore/session.py\", line 834, in create_client\r\n    endpoint_resolver = self._get_internal_component('endpoint_resolver')\r\n  File \"/opt/code/localstack/.venv/lib/python3.7/site-packages/botocore/session.py\", line 707, in _get_internal_component\r\n    return self._internal_components.get_component(name)\r\n  File \"/opt/code/localstack/.venv/lib/python3.7/site-packages/botocore/session.py\", line 935, in get_component\r\n    del self._deferred[name]\r\n    KeyError: 'endpoint_resolver'\r\n```\r\n\r\nand this boto issue: https://github.com/boto/boto3/issues/801",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 26,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2021-10-28T13:12:17Z",
        "closed_at": "2021-10-28T14:26:25Z",
        "merged_at": "2021-10-28T14:26:25Z",
        "body": "The health endpoint PUT didn't overwrite the state dict correctly, which was blocking #4769\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 112,
        "deletions": 30,
        "changed_files": 7,
        "created_at": "2021-10-28T09:39:54Z",
        "closed_at": "2021-10-30T18:12:01Z",
        "merged_at": "2021-10-30T18:12:01Z",
        "body": "Currently, the method wrapping the code in a zip file is not called on update.\r\nThis PR fixes this behavior, and adds a test to test it.\r\n\r\nFixes #4786 ",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 39,
        "deletions": 178,
        "changed_files": 1,
        "created_at": "2021-10-27T17:48:56Z",
        "closed_at": "2021-10-29T20:18:26Z",
        "merged_at": "2021-10-29T20:18:26Z",
        "body": "`serving.Server` was inspired by the `ElasticsearchCluster` implementation, and pulled up as part of #4793. this PR uses the new abstract for the `ElasticsearchCluster` implementation.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 46,
        "deletions": 3,
        "changed_files": 4,
        "created_at": "2021-10-27T13:57:46Z",
        "closed_at": "2021-10-28T11:21:23Z",
        "merged_at": "2021-10-28T11:21:23Z",
        "body": "This PR adds environment variables, similar to HTTP_PROXY and HTTPS_PROXY, which allows downloading runtime requirements of LocalStack using a http/https proxy.\r\n\r\nHTTP_PROXY and HTTPS_PROXY should not be set, due to problems with boto calls calling localhost, but honoring the proxy variables, which will ultimately fail.\r\n\r\nAlso, REQUESTS_CA_BUNDLE is now propagated into the container, to be able to use special ca_bundles for proxies.\r\n\r\nFixes #4771 ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 283,
        "deletions": 189,
        "changed_files": 7,
        "created_at": "2021-10-26T21:05:09Z",
        "closed_at": "2021-10-27T17:40:23Z",
        "merged_at": "2021-10-27T17:40:23Z",
        "body": "This PR adds a new abstraction `MotoServer` to encapsulate a running moto server. It removes the unused multi-processing and \"multiserver\" code\r\n\r\nThe `serving.Server` abstraction was pulled up from `ElasticsearchCluster`, for which I added TODOs for refactoring.\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 34,
        "deletions": 25,
        "changed_files": 1,
        "created_at": "2021-10-25T16:46:10Z",
        "closed_at": "2021-10-25T18:01:23Z",
        "merged_at": "2021-10-25T18:01:23Z",
        "body": "Adds a mutex to control the race condition described in #4782\r\n\r\nhas no significant performance impact.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 30,
        "deletions": 49,
        "changed_files": 5,
        "created_at": "2021-10-22T21:25:52Z",
        "closed_at": "2021-10-22T23:49:15Z",
        "merged_at": "2021-10-22T23:49:15Z",
        "body": "* adds a setup.cfg file so we can read the `localstack.__init__.__version__` attribute (and works around an issue with pip 21.3.1 \"When installing projects with a pyproject.toml in editable mode, and the build backend does not support PEP 660, prepare metadata using prepare_metadata_for_build_wheel instead of setup.py egg_info.\")\r\n* Simplifies the setup step a bit by using `make install`\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 116,
        "deletions": 52,
        "changed_files": 5,
        "created_at": "2021-10-21T14:49:19Z",
        "closed_at": "2021-10-21T16:29:59Z",
        "merged_at": "2021-10-21T16:29:58Z",
        "body": "We removed the ability to put arbitrary state into the health resource, which broke user code. This PR re-introduces this functionality in an encapsulation called `HealthResource` which is served via the edge proxy.\r\n\r\n* Fixes #4769",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 18,
        "deletions": 10,
        "changed_files": 1,
        "created_at": "2021-10-21T10:39:36Z",
        "closed_at": "2021-10-21T14:20:21Z",
        "merged_at": "2021-10-21T14:20:21Z",
        "body": "We need this method in the AWS framework, and this change makes it a bit easier to re-use by just passing HTTP headers.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 148,
        "deletions": 62,
        "changed_files": 3,
        "created_at": "2021-10-21T03:16:29Z",
        "closed_at": "2021-11-08T14:34:04Z",
        "merged_at": "2021-11-08T14:34:04Z",
        "body": "this PR fixes a bug that causes starting localstack to fail to startup when specifying a port mapping from a range of host ports to a single container port EG `-p 9230-9231:9230`.  This turns out to be essential for being able to debug simultaneous nodejs lambda containers.  I am hoping to share the nodejs integration of localstack as described [here](https://github.com/localstack/localstack/issues/4443) but i discovered it was broken when trying to run on the newest version.\r\n\r\nSpecifying a host port range did work in version (0.12.16) but fails with the newest version of localstack.  To reproduce this you can pass a port range such as the example above into the `LAMBDA_DOCKER_FLAGS` variable of a localstack dockerfile.  \r\n\r\nI have unit tested this (small) change but I was not able to build the docker image and confirm that the fix works because it looks like I encounter 4 failing integration tests when i try to build the docker container (before any of my changes are applied). I am happy to try to get this cleaned up and pushed through but will need guidance on how to build the container.\r\n\r\nexample error:\r\n```\r\n\"errorMessage\": \"invalid literal for int() with base 10: '9230-9231'\",\r\n       \"errorType\": \"ValueError\",\r\n       \"stackTrace\": Array [\r\n         \"  File \\\"/opt/code/localstack/localstack/services/awslambda/lambda_api.py\\\", line 811, in run_lambda\r\n         lock_discriminator=lock_discriminator,\r\n\",\r\n         \"  File \\\"/opt/code/localstack/localstack/services/awslambda/lambda_executors.py\\\", line 429, in execute\r\n         return do_execute()\r\n     \",\r\n         \"  File \\\"/opt/code/localstack/localstack/services/awslambda/lambda_executors.py\\\", line 419, in do_execute\r\n         return _run(func_arn=func_arn)\r\n     \",\r\n         \"  File \\\"/opt/code/localstack/localstack/utils/cloudwatch/cloudwatch_util.py\\\", line 157, in wrapped\r\n         raise e\r\n     \",\r\n         \"  File \\\"/opt/code/localstack/localstack/utils/cloudwatch/cloudwatch_util.py\\\", line 153, in wrapped\r\n         result = func(*args, **kwargs)\r\n     \",\r\n         \"  File \\\"/opt/code/localstack/localstack/services/awslambda/lambda_executors.py\\\", line 406, in _run\r\n         raise e\r\n     \",\r\n         \"  File \\\"/opt/code/localstack/localstack/services/awslambda/lambda_executors.py\\\", line 402, in _run\r\n         result = self._execute(lambda_function, inv_context)\r\n     \",\r\n         \"  File \\\"/opt/code/localstack/localstack/services/awslambda/lambda_executors.py\\\", line 710, in _execute\r\n         result = self.run_lambda_executor(lambda_function=lambda_function, inv_context=inv_context)\r\n     \",\r\n         \"  File \\\"/opt/code/localstack/localstack/services/awslambda/lambda_executors.py\\\", line 599, in run_lambda_executor\r\n         stdin=event_stdin_bytes,\r\n     \",\r\n         \"  File \\\"/opt/code/localstack/localstack/services/awslambda/lambda_executors.py\\\", line 1119, in execute_in_container\r\n         stdin=stdin,\r\n     \",\r\n         \"  File \\\"/opt/code/localstack/localstack/utils/docker_utils.py\\\", line 1412, in run_container\r\n         workdir=workdir,\r\n     \",\r\n         \"  File \\\"/opt/code/localstack/localstack/utils/docker_utils.py\\\", line 1325, in create_container\r\n         additional_flags, env_vars, ports, mount_volumes, network\r\n     \",\r\n         \"  File \\\"/opt/code/localstack/localstack/utils/docker_utils.py\\\", line 953, in parse_additional_flags\r\n         ports.add(int(host_port), int(container_port), protocol)\r\n     \",\r\n       ],\r\n```",
        "comments": 9
    },
    {
        "merged": true,
        "additions": 133,
        "deletions": 7,
        "changed_files": 13,
        "created_at": "2021-10-20T15:44:58Z",
        "closed_at": "2021-10-22T11:16:31Z",
        "merged_at": "2021-10-22T11:16:31Z",
        "body": "Depends on https://github.com/localstack/localstack-java-utils/pull/75 and release to version 0.2.16.\r\n\r\nThis PR does 3 things:\r\n* bumping version of localstack-java-utils\r\n* Add log output of invocation result to cloudwatch logs\r\n* Add test for this behavior, combined with normal lambdas (which implement an interface)\r\nThis notation should take precedence if used in a lambda which also implements an LambdaHandler interface.\r\n\r\nCloses #3793, closes #4512, closes #4647",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 34,
        "deletions": 3,
        "changed_files": 1,
        "created_at": "2021-10-19T20:41:11Z",
        "closed_at": "2021-10-20T11:41:09Z",
        "merged_at": "2021-10-20T11:41:09Z",
        "body": "This PR adds a generic API health check as fallback to existing health checks. This fixes an issue, where services that don't have a health check would fail when cold-starting when `EAGER_SERVICE_LOADING=0`.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2021-10-19T13:04:25Z",
        "closed_at": "2021-10-19T21:23:26Z",
        "merged_at": "2021-10-19T21:23:26Z",
        "body": "fixes #4753",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 709,
        "deletions": 530,
        "changed_files": 19,
        "created_at": "2021-10-19T08:47:35Z",
        "closed_at": "2021-11-15T19:12:07Z",
        "merged_at": "2021-11-15T19:12:07Z",
        "body": "Multi-platform changes for Dockerfile-base and Dockerfile.\r\nPreparation for changes to circleci.yml to perform multi-arch builds using docker buildx build.\r\n\r\nConfirmed tests run with locally integrated tests harnesses.\r\nConfirmed working sns, s3, dynamodb, sqs, secretsmanager, ssm\r\n\r\nTODO: \r\n\r\nNeed to run full test suite locally.\r\nNeed to modify make file and circle ci configuration to include docker buildx build with multiple platforms and qemu for arm builds in circle ci and local.\r\n",
        "comments": 13
    },
    {
        "merged": true,
        "additions": 96,
        "deletions": 25,
        "changed_files": 3,
        "created_at": "2021-10-18T21:30:37Z",
        "closed_at": "2021-10-18T22:38:57Z",
        "merged_at": "2021-10-18T22:38:57Z",
        "body": "When creating an event bus policy one can either specify a Policy Statement as Json or directly via Action,Resource,etc. fields. The statement handling here was broken because it didn't produce a valid policy statement format as expected by AWS.\r\n\r\nExample of a valid resource policy for eventbridge:\r\n\r\n```\r\n{\r\n  \"Version\": \"2012-10-17\",\r\n  \"Statement\": [{\r\n    \"Sid\": \"statement-04b33061\",\r\n    \"Effect\": \"Allow\",\r\n    \"Principal\": \"*\",\r\n    \"Action\": \"events:PutEvents\",\r\n    \"Resource\": \"arn:aws:events:eu-central-1:000000000000:event-bus/event-bus-d20476ea\"\r\n  }]\r\n}\r\n```",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 211,
        "deletions": 75,
        "changed_files": 3,
        "created_at": "2021-10-18T17:01:32Z",
        "closed_at": "2021-10-19T19:51:41Z",
        "merged_at": "2021-10-19T19:51:40Z",
        "body": "# UpdateStack API for the IAM ROLE.\r\n- Added Test case.\r\n- Fix `await_stack_completion()` method.\r\n- Added `update_and_await_stack` and `delete_and_await_stack` test utils method.\r\n- Fixed `update_resource()` method in `IAM` model of the `Cloudformation`.",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 14,
        "deletions": 4,
        "changed_files": 2,
        "created_at": "2021-10-18T14:44:56Z",
        "closed_at": "2021-10-18T20:47:07Z",
        "merged_at": "2021-10-18T20:47:06Z",
        "body": "Instead of hardcoding the Prefix for the Lambda container name, this PR will change this behavior to make it dependent on the parent LocalStack container name.\r\n\r\nThis results in multiple parallel instances working under the same docker daemon.\r\n\r\nFixes #4735 .",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 66,
        "deletions": 7,
        "changed_files": 3,
        "created_at": "2021-10-18T14:09:11Z",
        "closed_at": "2021-10-18T20:21:44Z",
        "merged_at": "2021-10-18T20:21:44Z",
        "body": "Currently, all values have to be present when specifying a custom SSE specification.\r\n\r\nNow, if only enabled is set to true (otherwise the whole config won't matter), the rest of the needed values are generated.\r\n\r\nFixes #4716 \r\n\r\nTODO:\r\n\r\n- [x] allow multi region for managed kms keys",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 26,
        "deletions": 22,
        "changed_files": 1,
        "created_at": "2021-10-18T10:23:54Z",
        "closed_at": "2021-10-18T14:08:46Z",
        "merged_at": "2021-10-18T14:08:46Z",
        "body": "Lambda deletion logic is now defined in a separate function.\r\n\r\nOne step in resolving #4737 ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2021-10-18T08:15:40Z",
        "closed_at": "2021-10-18T09:59:56Z",
        "merged_at": "2021-10-18T09:59:56Z",
        "body": "ENABLE_CONFIG_UPDATES was not in the list of config options to be propagated to the LocalStack docker container when starting the CLI.\r\n\r\nFixes #4736 ",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 64,
        "deletions": 15,
        "changed_files": 3,
        "created_at": "2021-10-16T09:59:40Z",
        "closed_at": "2021-10-16T11:13:38Z",
        "merged_at": "2021-10-16T11:13:38Z",
        "body": "Support case-sensitive response headers, add ETag to CORS exposed headers for S3 JS SDK compatibility (required for multipart uploads to S3 from the browser).",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 5,
        "deletions": 3,
        "changed_files": 1,
        "created_at": "2021-10-15T13:24:44Z",
        "closed_at": "2021-10-15T17:48:27Z",
        "merged_at": "2021-10-15T17:48:27Z",
        "body": "tbd",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 135,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2021-10-14T20:15:33Z",
        "closed_at": "2022-06-03T10:05:28Z",
        "merged_at": null,
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n- maps runtime name to image name/version in amazon docker image repo\r\n- writes tests for this mapping\r\n",
        "comments": 26
    },
    {
        "merged": true,
        "additions": 17,
        "deletions": 3,
        "changed_files": 2,
        "created_at": "2021-10-14T14:54:15Z",
        "closed_at": "2021-10-14T15:54:53Z",
        "merged_at": "2021-10-14T15:54:53Z",
        "body": "Fix CFN `SecretsManager::Secret` resource class to properly return secret ARN as Ref (with `...-<id_suffix>` appended).",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 173,
        "deletions": 18,
        "changed_files": 7,
        "created_at": "2021-10-14T05:56:26Z",
        "closed_at": "2021-10-18T23:53:26Z",
        "merged_at": "2021-10-18T23:53:26Z",
        "body": "Implements the Log Group target for EventBridge rules. Events can now be routed to a log group for logging purposes.\r\nAlso fixes some issues that lead to StateMachines failing when sending events.\r\n\r\n\r\nCloses #4611",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 33,
        "deletions": 14,
        "changed_files": 1,
        "created_at": "2021-10-12T10:41:48Z",
        "closed_at": "2021-10-14T14:18:15Z",
        "merged_at": "2021-10-14T14:18:15Z",
        "body": "Log emails being sent with `send_raw_email` function to DATA_DIR as it is already done with `send_email` function.\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 38,
        "deletions": 5,
        "changed_files": 2,
        "created_at": "2021-10-10T15:32:05Z",
        "closed_at": "2021-10-10T21:20:54Z",
        "merged_at": "2021-10-10T21:20:54Z",
        "body": "Closes #4671 .\r\n\r\nReplaces the current execution by using the array-based command representation which does not need a shell to run (and has therefore no problem with string escapes using quotes).",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 105,
        "deletions": 3,
        "changed_files": 3,
        "created_at": "2021-10-07T14:08:25Z",
        "closed_at": "2021-10-08T07:57:32Z",
        "merged_at": "2021-10-08T07:57:32Z",
        "body": "Add support for and/or/condition CFN intrinsic functions, fix resource type lookup.\r\n\r\nThese issues have surfaced when testing the latest version of `copilotlocal`, deploying their ECS sample app locally.",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 46,
        "changed_files": 2,
        "created_at": "2021-10-06T16:44:49Z",
        "closed_at": "2021-10-07T16:56:03Z",
        "merged_at": "2021-10-07T16:56:03Z",
        "body": "Dependacy Fixed for : https://github.com/spulec/moto/pull/4367\r\nThe above PR will have some negative effect on localstack s3 service. This PR is as a fix to that.\r\n\r\n## Test Passing\r\nTestAccAWSS3Bucket_forceDestroyWithObjectLockEnabled",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 115,
        "deletions": 28,
        "changed_files": 5,
        "created_at": "2021-10-06T09:40:03Z",
        "closed_at": "2021-10-06T11:12:05Z",
        "merged_at": "2021-10-06T11:12:05Z",
        "body": "Add support for `arn:aws:states:::events:putEvents` resource tyes to publish events directly from StepFunction. Addresses #4703\r\n\r\nGoes hand in hand with a small patch here: https://github.com/localstack/localstack-artifacts/blob/005214d91fd2f1b68f49b77b383323462758a651/stepfunctions-local-patch/com/amazonaws/stepfunctions/local/runtime/Config.java#L156 (which we may be able to remove in the future).",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 115,
        "deletions": 39,
        "changed_files": 5,
        "created_at": "2021-10-05T08:40:35Z",
        "closed_at": "2021-10-05T12:35:26Z",
        "merged_at": "2021-10-05T12:35:26Z",
        "body": "Removes the `fix_resource_props_for_sdk_deployment` from the template deployer and moves the code into the corresponding service models.\r\n\r\nAlso adds support for the `EnableKeyRotation` and `Enabled` Properties on `AWS::KMS::Key`.",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 8,
        "deletions": 8,
        "changed_files": 2,
        "created_at": "2021-10-05T06:12:50Z",
        "closed_at": "2021-10-05T07:34:38Z",
        "merged_at": "2021-10-05T07:34:38Z",
        "body": "Similar to https://github.com/localstack/localstack/pull/4213 . The aliases have been removed in Python 3.11 https://docs.python.org/3/library/unittest.html#deprecated-aliases . Regex to check the cases.\r\n\r\n```\r\nrg -t py 'assertEquals|assertNotEquals|assertAlmostEquals|assertNotAlmostEquals|assertRegexpMatches|assertNotRegexpMatches|assertRaisesRegexp|failUnlessEqual|failIfEqual|failUnlessAlmostEqual|failUnless|failUnlessRaises|failIf'\r\n```\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 22,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2021-10-04T13:38:37Z",
        "closed_at": "2021-10-04T14:40:15Z",
        "merged_at": "2021-10-04T14:40:14Z",
        "body": "Tests to complement the recent fixes in localstack/moto",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 64,
        "deletions": 75,
        "changed_files": 4,
        "created_at": "2021-10-04T11:01:02Z",
        "closed_at": "2021-10-05T07:33:55Z",
        "merged_at": "2021-10-05T07:33:55Z",
        "body": "Moves some delete patching from the `template_deployer.py` to the respective service models.\r\n\r\nThe patches for `AWS::EC2::Subnet` and `AWS::EC2::RouteTable` were removed since they didn't seem to affect any tests and either didn't make sense in the context or should be handled differently (**if** these issues resurface)",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 305,
        "deletions": 146,
        "changed_files": 22,
        "created_at": "2021-10-04T05:07:23Z",
        "closed_at": "2021-10-04T10:49:19Z",
        "merged_at": "2021-10-04T10:49:19Z",
        "body": "Moves the default values (mostly name generation) to the service models and adjusts/extends the tests where necessary.\r\n\r\nThe only thing that should be changed on the user's side should be some of the auto-generated Names that now conform more to what CloudFormation would produce.",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 2,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2021-10-02T18:06:24Z",
        "closed_at": "2021-10-03T12:49:49Z",
        "merged_at": null,
        "body": "... for API-Gateway integrations if CORS is not enabled for all domains\r\n\r\n**P.S.** I have inspired from `s3_listener.append_cors_headers`\r\n\r\nThis is required if the request's credentials mode is `include`.\r\n\r\nFor example, if I enable credentials for Axios requests (`withCredentials: true` option), without this change, request fails with the following error:\r\n```\r\nThe value of the 'Access-Control-Allow-Credentials' header in the response is '' which must be 'true' when the request's credentials mode is 'include'. The credentials mode of requests initiated by the XMLHttpRequest is controlled by the withCredentials attribute.\r\n```",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 327,
        "deletions": 297,
        "changed_files": 7,
        "created_at": "2021-10-02T16:14:06Z",
        "closed_at": "2021-10-02T20:36:52Z",
        "merged_at": "2021-10-02T20:36:52Z",
        "body": "Allow Lambda plugins to return invocation results directly, streamlining the code, and removing code duplication around invocation forwarding in the presence of `LAMBDA_FORWARD_URL`.\r\n\r\nIntroduces a `LambdaInvocationForwarderPlugin` which is in charge of forwarding the Lambda invocations. In that process, we are able to remove some of the duplicate error handling code in `lambda_api.py` and `lambda_executors.py`.\r\n\r\nThere is one `TODO` left in the code - currently we're returning the first result received from a Lambda executor. Technically, there could be multiple execution plugins trying to intercept the invocation and returning a result - we need a better conflict resolution mechanism if that situation comes up in the future (currently a `WARNING` message is being logged should that occur..).\r\n\r\n(The PR also contains a few refactorings/fixes in the Lambda unit tests, e.g., avoid hardcoding `us-east-1` as the region for Lambda ARNs.)\r\n\r\n@serkan-ozal - can you please confirm that the Thundra plugin still works properly with these changes? Thanks!\r\n\r\n/cc @thrau @dfangl ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 9,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2021-10-02T15:54:55Z",
        "closed_at": "2021-10-02T17:41:29Z",
        "merged_at": "2021-10-02T17:41:29Z",
        "body": null,
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2021-10-01T11:58:41Z",
        "closed_at": "2021-10-01T13:13:37Z",
        "merged_at": "2021-10-01T13:13:37Z",
        "body": null,
        "comments": 2
    },
    {
        "merged": true,
        "additions": 72,
        "deletions": 13,
        "changed_files": 2,
        "created_at": "2021-10-01T10:27:14Z",
        "closed_at": "2021-10-30T17:37:03Z",
        "merged_at": "2021-10-30T17:37:03Z",
        "body": "Fixes:\r\n - No content-type header in index or error page responses.\r\n - No etag header in any website responses.\r\n - Incorrect 302 status code for index page responses (should be 200).\r\n\r\nAdds:\r\n - Handling of objects with an `WebsiteRedirectLocation` property [as 301 responses](https://docs.aws.amazon.com/AmazonS3/latest/userguide/how-to-page-redirect.html#redirect-requests-object-metadata).\r\n - Responding with a 304 when the incoming request has an `If-None-Match` header containing a matching ETag for the targeted object.\r\n\r\nNot addressed:\r\n - `If-Modified-Since` etc. handling for a 304 response.\r\n",
        "comments": 6
    },
    {
        "merged": true,
        "additions": 61,
        "deletions": 2,
        "changed_files": 4,
        "created_at": "2021-10-01T06:58:24Z",
        "closed_at": "2021-10-01T14:33:26Z",
        "merged_at": "2021-10-01T14:33:26Z",
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 33,
        "deletions": 3,
        "changed_files": 2,
        "created_at": "2021-10-01T02:58:37Z",
        "closed_at": "2021-10-01T13:12:43Z",
        "merged_at": "2021-10-01T13:12:43Z",
        "body": "Hi.\r\n\r\nWhen we execute `aws s3api copy-object` command, AWS publishes `ObjectCreated:Copy` event.\r\nCurrently, localstack publishes `ObjectCreated:Put`.\r\n\r\nThis PR fixes it.\r\n\r\nRegards.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 79,
        "deletions": 3,
        "changed_files": 4,
        "created_at": "2021-09-30T11:33:53Z",
        "closed_at": "2021-10-01T20:43:43Z",
        "merged_at": "2021-10-01T20:43:43Z",
        "body": "Given situation we have for example two lambdas to deploy. One named getUsers and getUser. When e.g. serverless framework deploys those functions in that order, it fails to deploy getUser because getUsers's arn includes string \"getUser\".\r\nI just removed the partial arn matching because it was the cause for the problem we faced. Not sure though if it's too naive assumption.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 39,
        "deletions": 13,
        "changed_files": 2,
        "created_at": "2021-09-29T17:32:02Z",
        "closed_at": "2021-09-29T19:49:41Z",
        "merged_at": "2021-09-29T19:49:41Z",
        "body": null,
        "comments": 2
    },
    {
        "merged": false,
        "additions": 178,
        "deletions": 62,
        "changed_files": 3,
        "created_at": "2021-09-29T17:22:30Z",
        "closed_at": "2021-09-30T15:58:38Z",
        "merged_at": null,
        "body": "## Fix\r\n- `UpdateStack` API for the `IAM ROLE`.\r\n- Added Test case.\r\n- Added common stack operations in the cloudformation test cases.\r\n- Fix `await_stack_completion()` method.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 43,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2021-09-29T13:36:22Z",
        "closed_at": "2021-09-29T16:02:46Z",
        "merged_at": "2021-09-29T16:02:46Z",
        "body": "Currently, it is not possible to inspect docker networks, which is useful for various cli commands.\r\n\r\nThis PR introduces this possibility in both docker client implementations, and adds tests for them.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 6,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2021-09-29T08:56:21Z",
        "closed_at": "2021-09-29T13:13:08Z",
        "merged_at": "2021-09-29T13:13:08Z",
        "body": null,
        "comments": 1
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2021-09-29T07:29:40Z",
        "closed_at": "2021-09-29T09:16:11Z",
        "merged_at": "2021-09-29T09:16:11Z",
        "body": "\u2026 to be able to be passed by CLI\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2021-09-28T19:51:23Z",
        "closed_at": "2021-09-28T22:53:26Z",
        "merged_at": "2021-09-28T22:53:26Z",
        "body": "\u2026 (it was `localstack:sns` before)\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 16,
        "deletions": 4,
        "changed_files": 2,
        "created_at": "2021-09-28T19:46:13Z",
        "closed_at": "2021-09-28T22:50:19Z",
        "merged_at": "2021-09-28T22:50:19Z",
        "body": null,
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2021-09-28T18:48:01Z",
        "closed_at": "2021-09-29T09:14:51Z",
        "merged_at": "2021-09-29T09:14:51Z",
        "body": "Correct the way the response data is read so that the `xmlns` data that comes back from elasticmq doesn't cause an error here.\r\n\r\nFixes #4656",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2021-09-28T12:54:29Z",
        "closed_at": "2021-09-29T07:32:57Z",
        "merged_at": "2021-09-29T07:32:57Z",
        "body": "## Summary\r\n\r\n* Update `HOST_TMP_FOLDER` to avoid slash duplications (`$TMPDIR` already comes with a trailing slash)\r\n* Remove surrounding quotes since they are getting passed (at least on Mac) as part of the `$HOST_TMP_FOLDER` var, resulting in paths like `\"a/b/c\"/d` which leads to mounting errors\r\n\r\nPlease let me know if these changes may lead to any negative side effects on platforms other than Mac.",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 1475,
        "deletions": 1728,
        "changed_files": 49,
        "created_at": "2021-09-26T19:50:27Z",
        "closed_at": "2021-10-18T17:07:45Z",
        "merged_at": "2021-10-18T17:07:45Z",
        "body": "This PR adds\r\n\r\n* A ServiceManager class that now takes care of managing AWS services (instead of previously having a only global arrays of state)\r\n* A ServicePlugin concept that uses our plugin framework to load services\r\n* optional lazy-loading of services \r\n\r\nTo test:\r\n* start localstack with `EAGER_SERVICE_START=0`\r\n* run `localstack status services` and observe that services are in `available` mode\r\n\r\nTODO\r\n- [x] this will break localstack-ext. there's a branch with the same name in localstack-ext that needs to be updated and released at the same time.\r\n- [x] remove `localstack.cli.plugins` (a cli tool i added for debugging purposes)\r\n- [x] remove resulting dead code",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 112,
        "deletions": 53,
        "changed_files": 4,
        "created_at": "2021-09-24T16:13:19Z",
        "closed_at": "2021-09-24T18:50:50Z",
        "merged_at": "2021-09-24T18:50:50Z",
        "body": "* refactor DDBStreams/ES/Firehose APIs to use RegionBackend classes\r\n* add `reset()` method for region `RegionBackend` base class",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 3,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2021-09-22T21:00:14Z",
        "closed_at": "2021-09-24T10:43:40Z",
        "merged_at": null,
        "body": "While triaging issue #4593 an error keep occurring to me about the LogsBackend object  not having and attribute. This PR makes a quick fix about that. \r\n\r\n```\r\nFile \"/home/cristopher/Projects/localstack/localstack/services/logs/logs_listener.py\", line 21, in forward_request\r\n    publish_log_metrics_for_events(data)\r\n  File \"/home/cristopher/Projects/localstack/localstack/services/logs/logs_listener.py\", line 68, in publish_log_metrics_for_events\r\n    metric_filters = logs_backend.filters.metric_filters\r\nAttributeError: 'LogsBackend' object has no attribute 'filters'\r\n```\r\n\r\nThis is NOT a fix for the issue, due to being in reality an usage problem.\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 0,
        "deletions": 4,
        "changed_files": 1,
        "created_at": "2021-09-22T14:38:14Z",
        "closed_at": "2021-09-22T16:20:48Z",
        "merged_at": "2021-09-22T16:20:48Z",
        "body": "\u2026 in the Thundra lambda executor plugin\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 37,
        "deletions": 5,
        "changed_files": 1,
        "created_at": "2021-09-22T12:20:15Z",
        "closed_at": "2021-09-22T14:13:10Z",
        "merged_at": "2021-09-22T14:13:10Z",
        "body": null,
        "comments": 2
    },
    {
        "merged": true,
        "additions": 61,
        "deletions": 5,
        "changed_files": 3,
        "created_at": "2021-09-22T11:55:29Z",
        "closed_at": "2021-09-22T14:20:51Z",
        "merged_at": "2021-09-22T14:20:51Z",
        "body": "Addresses #4626\r\n* fix CFN `list_stack_resources()` for stacks with deleted resources\r\n* extend tests to cover this case",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 5,
        "changed_files": 3,
        "created_at": "2021-09-22T10:53:35Z",
        "closed_at": "2021-09-22T14:07:52Z",
        "merged_at": "2021-09-22T14:07:52Z",
        "body": "Some tests make assumptions that no longer hold, depending on the environment and whether Pro is enabled or not, that is changed with this PR.\r\nAlso I remove the disabled retries, maybe that makes some tests more resilient.",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 132,
        "deletions": 6,
        "changed_files": 2,
        "created_at": "2021-09-22T05:51:05Z",
        "closed_at": "2021-09-22T12:10:33Z",
        "merged_at": "2021-09-22T12:10:33Z",
        "body": null,
        "comments": 1
    },
    {
        "merged": true,
        "additions": 9,
        "deletions": 10,
        "changed_files": 3,
        "created_at": "2021-09-21T22:24:03Z",
        "closed_at": "2021-09-22T07:31:29Z",
        "merged_at": "2021-09-22T07:31:29Z",
        "body": "This PR fixes an issue, where this line: https://github.com/localstack/localstack/blob/5ed4699e4803b111ac62ab986513d0ea40ea7d81/localstack/services/generic_proxy.py#L385-L386\r\n\r\n would lead to a complete import of the cloudformation API.\r\n\r\nThis lead to the first HTTP request to the edge server taking over 3 seconds.\r\n\r\nRelated to this todo: https://github.com/localstack/localstack/blob/5ed4699e4803b111ac62ab986513d0ea40ea7d81/localstack/services/s3/s3_listener.py#L1033-L1035\r\n\r\nGenerally I think it's better the cloudformation service depends on other services (like in this instance, now the `s3_utils` provided by `services.s3`) rather than the other way around.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 276,
        "deletions": 246,
        "changed_files": 6,
        "created_at": "2021-09-21T21:12:04Z",
        "closed_at": "2021-09-21T23:17:42Z",
        "merged_at": "2021-09-21T23:17:42Z",
        "body": "Follow-up of #4623 :\r\n* Refactor Lambda executor methods to use `InvocationContext` as input param\r\n* Add more type hints to Lambda executors",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2021-09-21T16:12:16Z",
        "closed_at": "2021-09-22T18:34:55Z",
        "merged_at": "2021-09-22T18:34:55Z",
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 289,
        "deletions": 21,
        "changed_files": 3,
        "created_at": "2021-09-21T14:56:27Z",
        "closed_at": "2021-09-29T19:32:09Z",
        "merged_at": "2021-09-29T19:32:09Z",
        "body": "Fixes #4541 ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 263,
        "deletions": 79,
        "changed_files": 2,
        "created_at": "2021-09-21T09:58:47Z",
        "closed_at": "2021-09-21T20:13:11Z",
        "merged_at": "2021-09-21T20:13:11Z",
        "body": null,
        "comments": 2
    },
    {
        "merged": true,
        "additions": 129,
        "deletions": 17,
        "changed_files": 4,
        "created_at": "2021-09-20T16:50:05Z",
        "closed_at": "2021-09-20T20:56:50Z",
        "merged_at": "2021-09-20T20:56:49Z",
        "body": "* Add/re-enable util function for creating simple SSL proxy servers. (useful to proxy and intercept SSL calls for some APIs..)\r\n* Minor refactoring and more type hints in common utils.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 735,
        "deletions": 221,
        "changed_files": 19,
        "created_at": "2021-09-20T06:11:35Z",
        "closed_at": "2021-09-21T13:07:22Z",
        "merged_at": "2021-09-21T13:07:22Z",
        "body": "Another step in the cloudformation refactoring effort :rocket: \r\n\r\n- Moves pre-\"create\" actions into resource models (and adds fixes where needed)\r\n- Moves post-\"create\" actions into resource models (and adds fixes where needed)\r\n- Adds some pre-\"delete\" actions for resource models (e.g. to detach/delete policies)\r\n- Adds support for the AWS::IAM::Group  Cloudformation resource\r\n\r\nWhere these weren't covered by tests before, new tests were added.\r\n\r\n\r\nSoft dependency on https://github.com/spulec/moto/pull/4311\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2021-09-18T14:10:10Z",
        "closed_at": "2021-09-20T10:02:41Z",
        "merged_at": "2021-09-20T10:02:41Z",
        "body": "updated classifiers\r\n\r\n\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2021-09-16T22:30:43Z",
        "closed_at": "2021-09-17T08:21:52Z",
        "merged_at": "2021-09-17T08:21:52Z",
        "body": "Fixing #4529  -   ApiKeyRequired value was not getting passed to API gateway.\r\n\r\nhttps://github.com/localstack/localstack/issues/4529\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 9,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2021-09-15T23:59:43Z",
        "closed_at": "2021-09-22T07:49:43Z",
        "merged_at": "2021-09-22T07:49:43Z",
        "body": "This PR addresses issue #4158.\r\n\r\nThe problem derives from the function `lambda_function_or_layer(...)` considering the : (Colon) in the entity_name parameter as an error when in reality it can refer to an alias of the function.\r\n\r\nWith this PR, the function now also searches for a version of the function using the alias.\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 140,
        "deletions": 5,
        "changed_files": 6,
        "created_at": "2021-09-15T19:17:44Z",
        "closed_at": "2021-09-16T17:30:07Z",
        "merged_at": "2021-09-16T17:30:06Z",
        "body": "## Summary\r\n* fix code updates for lambdas executed in docker containers (an issue when lambda code is not updated after redeployment)\r\n* add basic tests to test `AWS::ApiGateway::DomainName` and `AWS::ApiGateway::BasePathMapping` models",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 26,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2021-09-15T15:05:00Z",
        "closed_at": "2021-09-15T18:02:21Z",
        "merged_at": "2021-09-15T18:02:21Z",
        "body": "Relates to #4470 and [change to moto](https://github.com/spulec/moto/pull/4287)",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 80,
        "deletions": 11,
        "changed_files": 2,
        "created_at": "2021-09-15T14:27:08Z",
        "closed_at": "2021-09-16T22:11:13Z",
        "merged_at": "2021-09-16T22:11:13Z",
        "body": "Fixes #4581.\r\n* Fixing missing `SSEDescription` and `TableId` property on both `CreateTable` and `DescribeTable` output\r\n* Adding tests to fit these requirements.\r\n* Some minor fixes like redundant conditionals",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 25,
        "deletions": 4,
        "changed_files": 2,
        "created_at": "2021-09-15T10:17:27Z",
        "closed_at": "2021-09-15T14:58:38Z",
        "merged_at": "2021-09-15T14:58:38Z",
        "body": "This PR improves the parsing of volume flags in LAMBDA_DOCKER_FLAGS and BATCH_DOCKER_FLAGS, so windows paths can be sent to the docker daemon (which should work with docker desktop for windows: https://docs.docker.com/desktop/windows/troubleshoot/#path-conversion-on-windows)\r\n\r\nPrior logic just separates by colons `:`, which is inadequate for windows paths.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 176,
        "deletions": 72,
        "changed_files": 11,
        "created_at": "2021-09-14T15:02:27Z",
        "closed_at": "2021-09-14T17:56:14Z",
        "merged_at": "2021-09-14T17:56:14Z",
        "body": "Distinguish polling and reactive mode in Lambda `EventSourceListener`. This can be used to enhance the performance of, e.g., the SQS event source listener. However, it is still required to delete messages from the queue after the listener has consumed them (hence polling is still enabled as default mode for SQS).\r\n\r\nIn the near future, we may enhance/replace this with a centralized event bus, allowing the event source listeners to subscribe to updates directly.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 39,
        "deletions": 6,
        "changed_files": 2,
        "created_at": "2021-09-14T14:07:17Z",
        "closed_at": "2021-09-14T15:07:20Z",
        "merged_at": "2021-09-14T15:07:20Z",
        "body": "AWS behavior is to only pass sns message attributes as sqs message attributes if `raw_message_delivery` is enabled.\r\nPR #3887 introduces this behavior, which is not identical to AWS.\r\n\r\nDemo SQS Message if raw_message_delivery is not enabled on AWS:\r\n```\r\n{\r\n    \"Messages\": [\r\n        {\r\n            \"MessageId\": \"cb98bce2-f11f-4bac-8870-0605ada8cb91\",\r\n            \"ReceiptHandle\": \"AQEBSvvZb/WZACLr3onUPhHEyGLrtmmzA8e8wK0w8A+UykenUK7v2rxk6qy4MAfVKfr6ywmxjuKNuaLmjDtjt1f7xUR6llpad6Iy8dpShvooPsszYvGYzYFjp3f61oF8VZfMmzklM5Z6CtQN6Vr5NmG+/FZn2hRVo4s54Oy00GvVcj1bm8tOt/am4CwLKTzsD2hXa/lXIQ9Sl+QPGSM2rOBmqKqUQ9bET8vPsx1xdt9Ag7nSGlCBkW1/AUrlkZPPGb+/YtoqbU7St0iKbKLNv1WZt7JxSrAq0VNEAFOzF8sbweyHpe/NIpn4BELwLDFNB4T8ahw8mmoBr2WVJhbvDz7imiXA8uri4fsqGuJPHzIugKO+GhlZ3GSPpExpsyZF4+lGcv/oVgaiKi7NuV6Ord6yGA==\",\r\n            \"MD5OfBody\": \"868db474dc18d3764a4939a02abce3cd\",\r\n            \"Body\": \"{\\n  \\\"Type\\\" : \\\"Notification\\\",\\n  \\\"MessageId\\\" : \\\"26a7b12d-bf26-5110-9400-e89722adc1b7\\\",\\n  \\\"TopicArn\\\" : \\\"arn:aws:sns:eu-central-1:869636330914:ls-test-topic\\\",\\n  \\\"Message\\\" : \\\"{\\\\\\\"operatorId\\\\\\\":3375003,\\\\\\\"eventTypeId\\\\\\\":1,\\\\\\\"eventLevelId\\\\\\\":1,\\\\\\\"validFrom\\\\\\\":\\\\\\\"2018-03-10T09:00:00Z\\\\\\\",\\\\\\\"validTo\\\\\\\":\\\\\\\"2018-03-11T09:00:00Z\\\\\\\"}\\\",\\n  \\\"Timestamp\\\" : \\\"2021-09-14T12:53:31.210Z\\\",\\n  \\\"SignatureVersion\\\" : \\\"1\\\",\\n  \\\"Signature\\\" : \\\"VXouhlNJNsqi5a9m+tuCSACvtfQ+lID84S1pioo11DblGvvKZfKPAcx+WmVsFicXCgRn9VvNok3Vz7zY89OTHx6UkJOq/2GbWUr2o/KG1LzASNO8x/Y3P9pQggVrRVXDZTjcFMqbKNYgEROwUuDFO7q8E28JNiq7qYlvt4kPOUj5CFerpT0S9/8P+Ut6fWiK5+PIL/azhkd+P5OypHUFCbl+MedL1nonRebp/OcXYHD7U9D/EIuIz+NmaNCCuiFAECP5D6WG33jxYs4P75qX4XusynmN2UdxySljv+olIvPaUOMVduM+52/fxu81r4gDEA0BFOR/4CgiKxwY6G2Vsg==\\\",\\n  \\\"SigningCertURL\\\" : \\\"https://sns.eu-central-1.amazonaws.com/SimpleNotificationService-010a507c1833636cd94bdb98bd93083a.pem\\\",\\n  \\\"UnsubscribeURL\\\" : \\\"https://sns.eu-central-1.amazonaws.com/?Action=Unsubscribe&SubscriptionArn=arn:aws:sns:eu-central-1:869636330914:ls-test-topic:86ecdc89-a3b9-4041-a186-21153c509f10\\\",\\n  \\\"MessageAttributes\\\" : {\\n    \\\"SomeNameType\\\" : {\\\"Type\\\":\\\"String\\\",\\\"Value\\\":\\\"Orchestration.Services.Model.Pollution.PollutionMessage\\\"}\\n  }\\n}\"\r\n        }\r\n    ]\r\n}\r\n``` \r\nIf it is enabled:\r\n```\r\n{\r\n    \"Messages\": [\r\n        {\r\n            \"MessageId\": \"4a4c61e2-dc0b-4cf2-b2b3-370329323289\",\r\n            \"ReceiptHandle\": \"AQEBl3vzFIWBncmzcdmAUk7KPxJ7LrZI/zWjlJsWUxTpBnrVSmkSDwbLl9Hrogbgpp6qsZEdijwiYvid1z4xafqUVFxYmStyj4+tWn6jH8syJZwajhUKd/IXSrDZQPtaL2rEHEoIpyQQIvRq6IiSdqTQVzEKQJYGLG7Elftu9MW5sD1XIpsPBreWywzpdt/lWN4b7cbSPxRqwC6T1EDlcaoXDzw+uRkNG8CMl/MqT6cVS79DhEvDb/CmZS3So86qf6S/yvxEdRH4obGKeg5RlFWNADH7Hxxft9W8E223h6xnU7D9DLfy/vDMDN6oNAcTadPrsyVL6Wruj8+dNpRurDphhK7/vEeGkspg2TIw0jgYSzMJDh5d/XA0VZqZF0l2/gBjhdsXM3xethfStjLRorcfMQ==\",\r\n            \"MD5OfBody\": \"53810f00d136168d96a1d9b6ca3cc0ee\",\r\n            \"Body\": \"{\\\"operatorId\\\":3375003,\\\"eventTypeId\\\":1,\\\"eventLevelId\\\":1,\\\"validFrom\\\":\\\"2018-03-10T09:00:00Z\\\",\\\"validTo\\\":\\\"2018-03-11T09:00:00Z\\\"}\",\r\n            \"MD5OfMessageAttributes\": \"d8851d45ac6319acafe674825cc7825b\",\r\n            \"MessageAttributes\": {\r\n                \"SomeNameType\": {\r\n                    \"StringValue\": \"Orchestration.Services.Model.Pollution.PollutionMessage\",\r\n                    \"DataType\": \"String\"\r\n                }\r\n            }\r\n        }\r\n    ]\r\n}\r\n```\r\n\r\n(Example taken from https://stackoverflow.com/questions/44238656/how-to-add-sqs-message-attributes-in-sns-subscription)\r\n\r\nFixes #4458 .\r\n\r\nMaybe @usmangani1 can chime in here.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 193,
        "deletions": 0,
        "changed_files": 5,
        "created_at": "2021-09-14T05:57:05Z",
        "closed_at": "2021-09-14T11:48:13Z",
        "merged_at": "2021-09-14T11:48:13Z",
        "body": "Adds support for the [AWS::Events::EventBusPolicy](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-events-eventbuspolicy.html) resource.\r\n\r\nSecond part of the test is commented out for now since this is a general issue of our cloudformation engine right now that will be handled separately.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 117,
        "deletions": 11,
        "changed_files": 4,
        "created_at": "2021-09-14T05:53:58Z",
        "closed_at": "2021-09-14T07:56:58Z",
        "merged_at": "2021-09-14T07:56:58Z",
        "body": "Adds support for the [AWS::SQS::QueuePolicy](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-sqs-policy.html) resource. ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 8,
        "deletions": 3,
        "changed_files": 3,
        "created_at": "2021-09-13T11:00:56Z",
        "closed_at": "2021-09-13T12:06:39Z",
        "merged_at": "2021-09-13T12:06:38Z",
        "body": "Currently, the example docker-compose file uses TMPDIR incorrectly. If one would use this environment variable not to describe the actual TMPDIR (example /tmp), but the localstack-specific TMPDIR (most likely /tmp/localstack), it would produce inconsistent behavior.\r\nThe docker-compose.yml is updated to correctly use the TMPDIR value, and a warning is now displayed (should be discussed) if the HOST_TMP_FOLDER and the TMP_FOLDER of localstack (by default both /tmp/localstack) mismatch, to warn of possible configuration errors.",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 31,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2021-09-11T19:37:59Z",
        "closed_at": "2022-06-24T14:18:11Z",
        "merged_at": null,
        "body": "Attempt to add persistence to the cloudformation implementation by pickling the CloudFormationRegion instances.\r\n\r\nI'm unfamiliar with both `pickle` and the localstack codebase, so sorry if this is a woefully naive implementation. It does however work well in my simple testing with a cdk project.\r\n\r\nI'm unsure of the best way to add tests for it, if the implementation seems appropriate then some guidance would be appreciated.\r\n\r\nShould hopefully address issue [3191](https://github.com/localstack/localstack/issues/3191)",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 8,
        "deletions": 6,
        "changed_files": 1,
        "created_at": "2021-09-11T00:21:06Z",
        "closed_at": "2021-09-15T17:26:07Z",
        "merged_at": "2021-09-15T17:26:07Z",
        "body": "As requested in the review of #4310 , the necessary env variables for the local execution of the lambda function, are passed down through the func_details object.\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 940,
        "deletions": 47,
        "changed_files": 18,
        "created_at": "2021-09-10T20:30:21Z",
        "closed_at": "2021-09-16T21:03:54Z",
        "merged_at": "2021-09-16T21:03:54Z",
        "body": "This PR generalizes the ideas of #4497 into a framework for writing plugins in LocalStack.\r\n\r\n## Core concepts\r\n\r\n* `PluginSpec`: describes a `Plugin`. Each plugin has a namespace, a unique name in that namespace, and a `PluginFactory` (something that creates `Plugin` the spec is describing. In the simplest case, that can just be the Plugin's class).\r\n* `Plugin`: an object that exposes a `should_load` and `load` method. note that it does not function as a domain object (it does not hold the plugins lifecycle state, like initialized, loaded, etc..., or other metadata of the Plugin)\r\n* `PluginFinder`: finds plugins, either at build time (by scanning the modules using `pkgutil` and `setuptools`) or at run time (reading entrypoints of the distribution using [stevedore](https://docs.openstack.org/stevedore/latest/))\r\n* `PluginManager`: manages the run time lifecycle of a Plugin, which has three states:\r\n  * resolved: the entrypoint pointing to the PluginSpec was imported and the `PluginSpec` instance was created\r\n  * init: the `PluginFactory` of the `PluginSpec` was successfully invoked\r\n  * loaded: the `load` method of the `Plugin` was successfully invoked\r\n\r\n## Build time vs run time\r\n\r\nAt build time (`make entrypoints` or `python setup.py develop/install`), a special `PluginFinder` collects anything that can be interpreted as a `PluginSpec`, and creates from it setuptools entrypoints. in the `setup.py` we can use the `localstack.plugin.entrypoint.find_plugins` method to collect a dictionary for the `entry_points` value of `setup()`.\r\n\r\nAt run time, a `PluginManager` uses a `PluginFinder` that in turn uses stevedore to scan the available entrypoints for things that look like a`PluginSpec`. with `PluginManager.load(name: str)` or `PluginManager.load_all()`, plugins within the namespace that are discoverable in entrypoints can be loaded. If an error occurs at any state of the lifecycle, the `PluginManager` informs the `PluginLifecycleListener` about it, but continues operating.\r\n\r\n## Creating a system using the plugin framework\r\n\r\nThe framework itself does not have immediate impact on anything in the codebase yet, but provides powerfull tools to restructure existing systems (like we did in #4497, or `localstack.services`).\r\n\r\nTo build something using the plugin framework, you will first want to introduce a Plugin that does something when it is loaded. And then, at runtime, you need a component that uses the `PluginManager` to get those plugins.\r\n\r\n### One class per plugin\r\n\r\nThis is the way we went with `LocalstackCliPlugin`. Every plugin class (e.g., `ProCliPlugin`) is essentially a singleton. This is easy as the classes are discoverable as plugins. Simply create a plugin class with a name and namespace and it will be discovered by the build time `PluginFinder`.\r\n\r\n```python\r\n\r\n# abstract case (not discovered at build time, missing name)\r\nclass CliPlugin(Plugin):\r\n    namespace = \"my.plugins.cli\"\r\n\r\n    def load(self, cli):\r\n        self.attach(cli)\r\n\r\n    def attach(self, cli):\r\n        raise NotImplementedError\r\n\r\n# discovered at build time (has a namespace, name, and is a Plugin)\r\nclass MyCliPlugin(CliPlugin):\r\n    name = \"my\"\r\n\r\n    def attach(self, cli):\r\n        # ... attach commands to cli object\r\n\r\n```\r\n\r\nnow we need a `PluginManager` (which has a generic type) to load the plugins for us:\r\n\r\n```python\r\ncli = #... needs to come from somewhere\r\n\r\nmanager: PluginManager[CliPlugin] = PluginManager(\"my.plugins.cli\", load_args=(cli,))\r\n\r\nplugins: List[CliPlugin] = manager.load_all()\r\n\r\n# todo: do stuff with the plugins, if you want/need\r\n#  in this example, we simply use the plugin mechanism to run a one-shot function (attach) on a load argument\r\n\r\n```\r\n\r\n\r\n### Re-usable plugins\r\n\r\nWhen you have lots of plugins that are structured in a similar way, we may not want to create a separate Plugin class for each plugin. Instead we want to use the same `Plugin` class to do the same thing, but use several instances of it. The `PluginFactory`, and the fact that `PluginSpec` instances defined at module level are discoverable (inpired by [pluggy](https://github.com/pytest-dev/pluggy)), can be used to achieve that.\r\n\r\n\r\n```python\r\n\r\nclass ServicePlugin(Plugin):\r\n\r\n    def __init__(self, service_name):\r\n      self.service_name = service_name\r\n      self.service = None\r\n\r\n    def should_load(self):\r\n        return self.service_name in config.SERVICES:\r\n\r\n    def load(self):\r\n        module = importlib.import_module(\"localstack.services.%s\" % self.service_name)\r\n        # suppose we define a convention that each service module has a Service class, like moto's `Backend`\r\n        self.service = module.Service()\r\n\r\n\r\ndef service_plugin_factory(name) -> PluginFactory:\r\n    def create():\r\n        return ServicePlugin(name)\r\n\r\n    return create\r\n\r\n# discoverable\r\ns3 = PluginSpec(\"localstack.plugins.services\", \"s3\", service_plugin_factory(\"s3\"))\r\n\r\n# discoverable\r\ndynamodb = PluginSpec(\"localstack.plugins.services\", \"dynamodb\", service_plugin_factory(\"dynamodb\"))\r\n\r\n# ... could be simplified with convenience framework code, but the principle will stay the same\r\n\r\n```\r\n\r\nThen we could use the `PluginManager` to build a Supervisor\r\n\r\n```python\r\n\r\nclass Supervisor:\r\n    manager: PluginManager[ServicePlugin]\r\n\r\n    def start(self, service_name):\r\n      plugin = manager.load(service_name)\r\n      service = plugin.service\r\n      service.start()\r\n\r\n```\r\n\r\nThese are just some examples, and depending on the type of code we will write using the framework in the future, we can introduce new concepts that will reduce boilerplate code.\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 244,
        "deletions": 51,
        "changed_files": 6,
        "created_at": "2021-09-10T11:52:47Z",
        "closed_at": "2021-09-12T20:36:33Z",
        "merged_at": "2021-09-12T20:36:33Z",
        "body": "Adds support for  the \"DefinitionSubstitutions\" property in  for Cloudformation/SAM StateMachine resources. This property is used to inject dynamic values (e.g. ARNs resolved by cloudformation or other results from intrinsic functions) into the statemachine definition.\r\n\r\nContext: \r\nhttps://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-stepfunctions-statemachine.html\r\nhttps://docs.aws.amazon.com/serverless-application-model/latest/developerguide/sam-resource-statemachine.html\r\n\r\nCloses #4533 ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2021-09-10T02:43:30Z",
        "closed_at": "2021-09-10T08:18:33Z",
        "merged_at": "2021-09-10T08:18:33Z",
        "body": "Resolves #4522\r\n",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 47,
        "deletions": 39,
        "changed_files": 2,
        "created_at": "2021-09-09T22:58:53Z",
        "closed_at": "2021-09-10T09:13:58Z",
        "merged_at": "2021-09-10T09:13:58Z",
        "body": "* Add ability to specify SelfManagedEventSource for CFN Lambda::EventSourceMapping\r\n* Minor refactoring in logic to fetch resource state",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 9,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2021-09-08T14:21:49Z",
        "closed_at": "2021-09-08T15:44:31Z",
        "merged_at": "2021-09-08T15:44:31Z",
        "body": "This is a quick fix, as this test runs only if glibc >= 2.32 is present on the system, which might not be the case outside of the docker/alpine image.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 8,
        "deletions": 3,
        "changed_files": 3,
        "created_at": "2021-09-07T21:00:24Z",
        "closed_at": "2021-09-07T22:44:55Z",
        "merged_at": "2021-09-07T22:44:55Z",
        "body": null,
        "comments": 1
    },
    {
        "merged": true,
        "additions": 169,
        "deletions": 194,
        "changed_files": 8,
        "created_at": "2021-09-07T19:07:54Z",
        "closed_at": "2021-09-08T09:24:46Z",
        "merged_at": "2021-09-08T09:24:46Z",
        "body": "This PR prepares the build environment for the setuptools configuration we have introduced in other projects, where we group dependencies using setup.py extras.\r\n\r\n* reorganize `requirements.txt` to group dependencies into \"extra\" blocks\r\n* use `setup.py` to parse the requirements into extras\r\n* refactor `Makefile` to install with `pip install -e .`\r\n* refactor `Dockerfile` to use the new make commands and uninstall test dependencies\r\n* disables several dependencies from requirements.txt\r\n* makes the image smaller  (:pinching_hand:)\r\n\r\n- [x] update documentation (make targets, developer guide)\r\n- [x] remove code where pip is called in localstack to lazily install requirements\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 6,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2021-09-07T15:05:26Z",
        "closed_at": "2021-09-07T16:06:36Z",
        "merged_at": "2021-09-07T16:06:36Z",
        "body": null,
        "comments": 1
    },
    {
        "merged": true,
        "additions": 106,
        "deletions": 66,
        "changed_files": 6,
        "created_at": "2021-09-06T22:20:22Z",
        "closed_at": "2021-09-07T14:59:09Z",
        "merged_at": "2021-09-07T14:59:09Z",
        "body": "Fix template deployer and tests to retrieve updated PhysicalResourceId for `EC2::Instance`.\r\n\r\nRe-enables the previously failing test `test_cfn_update_ec2_instance_type`.\r\n\r\nThe key change is in these two lines - running the recursive ref resolution only for `Properties`, to avoid touching/changing the PhysicalResourceId and other meta properties of the resource:\r\nhttps://github.com/localstack/localstack/pull/4548/files#diff-900aece9b505bb3af907341efb45bc7fa52bc8e0482eda44630959f622b74f8aL468-R470\r\n\r\n```\r\n        # extract the Properties here, as we only want to recurse over the resource props...\r\n        resource_props = resources.get(ref, {}).get(\"Properties\")\r\n        resolve_refs_recursively(stack_name, resource_props, resources)\r\n```",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 5,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2021-09-06T15:11:22Z",
        "closed_at": "2021-09-06T17:31:59Z",
        "merged_at": "2021-09-06T17:31:59Z",
        "body": "Closes https://github.com/localstack/localstack/issues/4545",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 285,
        "deletions": 246,
        "changed_files": 10,
        "created_at": "2021-09-06T06:35:02Z",
        "closed_at": "2021-09-06T07:49:36Z",
        "merged_at": "2021-09-06T07:49:36Z",
        "body": "Part of the service model refactoring effort. Moves the rest of the RESOURCE_TO_FUNCTION in the template_deployer into the respective service models.\r\n\r\nOne part I'm not 100% certain about is the change in the last commit. I've dropped/removed the get_role_arn call which itself depends on resolve_refs_recursively. I would've assumed the parameters should already have gone through a resolve_refs_recursively call by this point? @whummer  Maybe you can provide a bit more insight here.  The original get_arn_role code was added in 3684fcfd66baa387e03f6b2d9d30585a4ab0130a",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 8,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2021-09-04T03:13:46Z",
        "closed_at": "2021-09-04T09:20:58Z",
        "merged_at": "2021-09-04T09:20:58Z",
        "body": "Found out while debugging #4492 there is no clear documentation for providers (except kinesis), adding those to our `README` as a separate section. Also Moved `KINESIS_PROVIDER` there. as well",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 38,
        "deletions": 3,
        "changed_files": 4,
        "created_at": "2021-09-03T15:24:48Z",
        "closed_at": "2021-09-03T19:30:03Z",
        "merged_at": "2021-09-03T19:30:03Z",
        "body": "Disable shell mode in `run(..)` utility function if `cmd` is passed as a list - see description in the code comment.\r\n\r\n/cc @thrau @dfangl ",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 13,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2021-09-02T18:17:50Z",
        "closed_at": "2021-09-03T11:57:23Z",
        "merged_at": null,
        "body": "Return container ID in Docker SDK client for interactive=True, attach=False . This is required in a few places where we're launching Lambda containers with `interactive=True` (to pass in events via `stdin`), yet the containers should be detached and started up non-blockingly in the background (returning the container ID via `stdout`).",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 5,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2021-09-01T18:16:24Z",
        "closed_at": "2021-09-02T18:29:08Z",
        "merged_at": "2021-09-02T18:29:08Z",
        "body": "\u2026 instead of wrapping as Flask response in \"LAMBDA_FORWARD_URL\" mode\r\n\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 61,
        "deletions": 61,
        "changed_files": 2,
        "created_at": "2021-09-01T16:45:04Z",
        "closed_at": "2021-09-01T22:15:10Z",
        "merged_at": "2021-09-01T22:15:10Z",
        "body": "Since more code is going to use this, making it public and moving it to Util (and extracting the conversion method for mounts) seems like a good idea.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 33,
        "deletions": 7,
        "changed_files": 2,
        "created_at": "2021-08-31T18:38:34Z",
        "closed_at": "2021-08-31T22:00:10Z",
        "merged_at": "2021-08-31T22:00:10Z",
        "body": null,
        "comments": 0
    },
    {
        "merged": true,
        "additions": 52,
        "deletions": 4,
        "changed_files": 3,
        "created_at": "2021-08-31T16:23:30Z",
        "closed_at": "2021-08-31T17:40:01Z",
        "merged_at": "2021-08-31T17:40:00Z",
        "body": "Fixes #4515 \r\n\r\nIf a non-default network is assigned to the container queried, it will return an empty string instead of a correct IP.\r\nThis PR fixes this behaviour by returning the IP of the first assigned network (can lead to problems if LocalStack is assigned multiple networks for different purposes, but the fix provides a similar behavior to the command line client)",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 42,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2021-08-30T12:57:55Z",
        "closed_at": "2021-08-30T20:46:50Z",
        "merged_at": "2021-08-30T20:46:50Z",
        "body": "Add missing integration tests with AWS support service.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 15,
        "deletions": 3,
        "changed_files": 2,
        "created_at": "2021-08-30T12:02:30Z",
        "closed_at": "2021-08-30T17:52:41Z",
        "merged_at": "2021-08-30T17:52:41Z",
        "body": "Adds a restart method for kinesis, which is required for the corresponding MR in the pro version",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 80,
        "deletions": 61,
        "changed_files": 4,
        "created_at": "2021-08-30T08:21:52Z",
        "closed_at": "2021-09-06T21:10:05Z",
        "merged_at": "2021-09-06T21:10:05Z",
        "body": "~Add temporary debug logs to investigate flaky EC2 CloudFormation test.~\r\n\r\nFix template deployer and tests to retrieve updated PhysicalResourceId for EC2::Instance",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 5,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2021-08-30T07:58:39Z",
        "closed_at": "2021-08-30T10:51:39Z",
        "merged_at": "2021-08-30T10:51:39Z",
        "body": "Currently the Feature Coverage misses this option.\r\n\r\nAlso, we should print some kind of warning if someone tries to use an ImageUri with LocalStack, and not fail only with an obscure error message.\r\n\r\nFixes #4452 ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 7,
        "deletions": 6,
        "changed_files": 3,
        "created_at": "2021-08-29T20:56:59Z",
        "closed_at": "2021-08-30T07:12:26Z",
        "merged_at": "2021-08-30T07:12:26Z",
        "body": "Minor fix in call to EC2 modify_instance_attribute - required to accommodate recent change in `moto`.",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 8,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2021-08-27T15:51:45Z",
        "closed_at": "2021-08-27T17:28:28Z",
        "merged_at": "2021-08-27T17:28:28Z",
        "body": null,
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2021-08-27T14:20:52Z",
        "closed_at": "2021-08-27T17:29:20Z",
        "merged_at": "2021-08-27T17:29:20Z",
        "body": "See https://github.com/etspaceman/kinesis-mock/releases/tag/0.1.9\r\n\r\nFixes #4489\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 2621,
        "deletions": 2510,
        "changed_files": 29,
        "created_at": "2021-08-27T10:57:59Z",
        "closed_at": "2021-08-27T19:37:22Z",
        "merged_at": "2021-08-27T19:37:22Z",
        "body": "`service_models.py` is used for mapping CloudFormation resources to the corresponding SDK calls to manage their lifecycle. This file is quickly growing in size making it ever harder to navigate.\r\n\r\nThis PR extracts all subclasses of GenericBaseModel and moves them into separate files where the file is determined by the cloudformation type (e.g. AWS::S3::Bucket would go into `s3_service_models.py`).  It's a preliminary step for the following refactorings where more and more code will move into these model classes.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 108,
        "deletions": 2,
        "changed_files": 6,
        "created_at": "2021-08-27T01:57:14Z",
        "closed_at": "2021-08-30T10:54:07Z",
        "merged_at": "2021-08-30T10:54:07Z",
        "body": "Fixes #4409, adds support for [config service](https://aws.amazon.com/config/), depends on https://github.com/localstack/localstack-python-client/pull/32",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 280,
        "deletions": 151,
        "changed_files": 6,
        "created_at": "2021-08-26T21:01:53Z",
        "closed_at": "2021-08-27T15:04:22Z",
        "merged_at": "2021-08-27T15:04:22Z",
        "body": "This PR introduces a Lambda executor plugin mechanism to hook in custom/third-party Lambda extensions at runtime.\r\n\r\n* Introduce a `LambdaExecutorPlugin` interface with the central method `prepare_invocation(...)` that allows to introspect the current `InvocationContext`, and return additional invocation options (`AdditionalInvocationOptions`) in the form of (1) additional environment variables, (2) additional files to be made available to the Lambda, and (3) custom updates to the Lambda startup command itself.\r\n* Optionally, plugins can introspect and modify/augment the results returned from an invocation via `process_result(..)`\r\n* Plugins are lazily initialized via the `initialize()` method (called once, immediately before the plugin is first being used)\r\n* Remove references of `*thundra*` from `lambda_executors.py` and rewrite the Thundra extensions using the new plugin mechanism.\r\n\r\nChanges have been tested manually for the Thundra plugin (for `local` and `docker*` Lambda executors, with `LAMBDA_REMOTE_DOCKER` flag both enabled/disabled). @serkan-ozal - I'd appreciate it if you could run a few tests post merge to confirm whether things are still working. Thanks!\r\n\r\nThere is currently still one TODO left - copying the files in `files_to_add` into containers if `LAMBDA_REMOTE_DOCKER=1` is enabled. This is currently not required for the Thundra plugin, but may well become a requirement for plugins in the future.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 539,
        "deletions": 250,
        "changed_files": 18,
        "created_at": "2021-08-26T19:32:23Z",
        "closed_at": "2021-08-27T17:32:23Z",
        "merged_at": "2021-08-27T17:32:23Z",
        "body": "This PR introduces a new CLI system using\r\n* click (the CLI framework, which we already had as transitive dependency)\r\n* rich (for colors, emojis, and other super important stuff!) \r\n![image](https://user-images.githubusercontent.com/3996682/131024059-d52909f2-9a87-4e7d-bbbe-753584cca37b.png)\r\n* [stevedore](https://docs.openstack.org/stevedore/latest/) (for the plugin mechanism)\r\n* It also moves the `VERSION` constant into `localstack.__init__` as per convention\r\n\r\n## Plugin loading\r\n\r\n\u26a0 the localstack-pro CLI now only works when installed as a distribution (using pip install or setup.py install). extensions simply residing in the python path is no longer sufficient for loading them.\r\n\r\nto debug the plugin lifecycle run\r\n```bash\r\nDEBUG_PLUGINS=1 bin/localstack\r\n```\r\n\r\n\r\n## Creating plugins\r\n\r\nPlugins are advertised using setuptools entrypoints. To create a CLI plugin, first implement the `LocalstackCliPlugin` class that adds click commands to the `localstack` command group (a `click.Group` object):\r\n```python\r\nclass MyCliPlugin(LocalstackCliPlugin):\r\n    name = \"mine\"\r\n\r\n    def attach(self, cli: LocalstackCli) -> None:\r\n        cli.group.add_command(...) # add your click commands to `localstack`\r\n```\r\nthen, in the `setup.py`, add an entry point to the namespace `localstack.plugins.cli` (this will be automated in the future!)\r\n\r\n```python\r\nsetup(entry_points={\r\n    \"localstack.plugins.cli\": [\r\n        \"mine = path.to.plugin:MyCliPlugin\",\r\n    ]\r\n})\r\n```\r\n\r\nIn localstack, we then use stevedore's [Extension pattern](https://docs.openstack.org/stevedore/latest/user/patterns_loading.html#extensions-many-names-many-entry-points) to load extensions (using an [`ExtensionManager`](https://docs.openstack.org/stevedore/latest/reference/index.html#stevedore.extension.ExtensionManager)) in the namespace `localstack.plugins.cli`\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2021-08-26T18:45:54Z",
        "closed_at": "2021-08-26T21:12:54Z",
        "merged_at": "2021-08-26T21:12:54Z",
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\nfix not supported netween instances of 'NoneType' and 'Int' in scheduler.py",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 83,
        "deletions": 1,
        "changed_files": 3,
        "created_at": "2021-08-26T10:42:31Z",
        "closed_at": "2021-08-26T17:51:54Z",
        "merged_at": "2021-08-26T17:51:53Z",
        "body": "When a  `AWS::Lambda::Function` doesn't include a `FunctionName` it is autogenerated by CloudFormation. previously the resource id part was hard-coded as \"lambda\" and this PR changes it to use the resource_id. With this change it's much easier to see which lambda belongs to which CDK construct/Cfn resource when deploying a stack with multiple lambdas.\r\n\r\nCloses #4130 ",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 295,
        "deletions": 64,
        "changed_files": 5,
        "created_at": "2021-08-26T07:15:33Z",
        "closed_at": "2021-08-26T17:48:14Z",
        "merged_at": "2021-08-26T17:48:13Z",
        "body": "Adds support for integration request parameters in AWS::ApiGateway::Method and moves the logic into service_models.\r\n\r\nCloses #4203 ",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 20,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2021-08-25T20:40:58Z",
        "closed_at": "2021-08-26T00:03:46Z",
        "merged_at": "2021-08-26T00:03:46Z",
        "body": "Closes #4487\r\n\r\nThis PR sets the content-type correctly on s3-website responses (that of the object requested). It does _not_ address other headers (notably `ETag`), though it can be extended to do so if desireable.",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 130,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2021-08-25T11:33:51Z",
        "closed_at": "2021-09-08T11:19:36Z",
        "merged_at": "2021-09-08T11:19:36Z",
        "body": "This Action runs the LocalStack integration tests against a Pro Instance, to check if any problems arise and reports them.\r\n\r\nThis should provide more confidence that LocalStack changes do not brick any features in Pro or vice versa.\r\n\r\nTo be merged after #4485 ",
        "comments": 5
    },
    {
        "merged": true,
        "additions": 62,
        "deletions": 30,
        "changed_files": 7,
        "created_at": "2021-08-25T11:00:38Z",
        "closed_at": "2021-09-08T10:07:54Z",
        "merged_at": "2021-09-08T10:07:53Z",
        "body": "Main goal is to use this PR to fix test failures if testing against Pro (where test adaptions are necessary).",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 13,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2021-08-24T12:03:38Z",
        "closed_at": "2021-08-25T19:16:17Z",
        "merged_at": "2021-08-25T19:16:17Z",
        "body": "Adds a function to restart the dynamodb process. This function is required for the MR with the same working title in the pro version. ",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 12,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2021-08-24T07:03:30Z",
        "closed_at": "2021-08-24T11:49:19Z",
        "merged_at": "2021-08-24T11:49:19Z",
        "body": null,
        "comments": 1
    },
    {
        "merged": true,
        "additions": 11,
        "deletions": 15,
        "changed_files": 3,
        "created_at": "2021-08-22T09:01:09Z",
        "closed_at": "2021-08-22T10:15:37Z",
        "merged_at": "2021-08-22T10:15:36Z",
        "body": "* Fix removing x-amz-content-sha256 header after removing chunk signatures\r\n* Minor fixes to accommodate recent moto upstream changes",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 98,
        "deletions": 2,
        "changed_files": 5,
        "created_at": "2021-08-18T07:08:29Z",
        "closed_at": "2021-08-18T14:54:35Z",
        "merged_at": "2021-08-18T14:54:35Z",
        "body": "When creating a deduplicated FIFO SNS topic via cloudformation, the attributes were previously passed as booleans whereas it botocore expects strings here. They are now passed down as \"true\"/\"false\"",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 19,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2021-08-16T04:20:31Z",
        "closed_at": "2021-08-16T08:50:40Z",
        "merged_at": "2021-08-16T08:50:40Z",
        "body": "Currently, we're only supporting the basic fiends in IAM user in cloudformation, this PR enables the full compatibility with IAM users, adding the logic about the following missing properties:\r\n- Groups\r\n- LoginProfile\r\n- ManagedPolicyArns\r\n- Policies\r\n\r\nReference: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-iam-user.html",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2021-08-16T04:18:21Z",
        "closed_at": "2021-08-16T08:30:35Z",
        "merged_at": "2021-08-16T08:30:35Z",
        "body": "For some reason, the managed policies were returning role RNAs, instead of policy, this PR corrects that small error",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 35,
        "deletions": 27,
        "changed_files": 2,
        "created_at": "2021-08-16T04:16:52Z",
        "closed_at": "2021-09-16T11:42:22Z",
        "merged_at": "2021-09-16T11:42:22Z",
        "body": "Currently, only the StartExecution is enabled in the API Gateway integration, I spent hours thinking that I was doing something wrong in my definition until I found that the error was in localstack, this PR adds dynamism in the method to be used, supporting any sfn action",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1148,
        "deletions": 143,
        "changed_files": 9,
        "created_at": "2021-08-13T16:31:11Z",
        "closed_at": "2021-08-18T14:03:52Z",
        "merged_at": "2021-08-18T14:03:52Z",
        "body": "Work left to do:\r\n\r\n- [x] Better handling of the copy container functions\r\n- [x] More tests\r\n- [x] Better documentation of the docker_client interface\r\n- [x] Handle additional_flags in some way",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 34,
        "deletions": 14,
        "changed_files": 3,
        "created_at": "2021-08-13T09:47:18Z",
        "closed_at": "2021-08-13T11:10:33Z",
        "merged_at": "2021-08-13T11:10:33Z",
        "body": "This is part of an ongoing effort to rework and extend cloud pods and other related persistence features. \r\n\r\nNote: This merge request should **only** be approved if the corresponding merge request in the pro version was approved ",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 38,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2021-08-12T02:17:24Z",
        "closed_at": "2021-08-12T20:03:26Z",
        "merged_at": "2021-08-12T20:03:26Z",
        "body": "When you're deploying an `AWS::IAM::User` with the UserName property defined isn't taken, uses the physical resource id instead of.\r\n\r\nAlso, the console it's printing: `localstack_1  | 2021-08-12T02:15:09:WARNING:localstack.utils.cloudformation.template_deployer: Unexpected resource type IAM::User when resolving references of resource HeveaUser: {'Type': 'AWS::IAM::User', 'LogicalResourceId': 'CustomUsername', 'Properties': {'UserName': 'custom_username'}}`\r\n\r\n\r\nThe current result it's:\r\n```console\r\n> aws iam list-users\r\n{\r\n    \"Users\": [\r\n        {\r\n            \"Path\": \"/\",\r\n            \"UserName\": \"CustomUsername\",\r\n            \"UserId\": \"ohy0nq0xlr17v8i72b1e\",\r\n            \"Arn\": \"arn:aws:iam::000000000000:user/CustomUsername\",\r\n            \"CreateDate\": \"2021-08-12T02:15:08.897Z\"\r\n        }\r\n    ]\r\n}\r\n```",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 22,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2021-08-11T19:14:40Z",
        "closed_at": "2021-08-11T20:56:30Z",
        "merged_at": "2021-08-11T20:56:30Z",
        "body": "Currently, SNS topics do not have their properties set using cloud formation. This commit should (hopefully) fix that issue\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 367,
        "deletions": 60,
        "changed_files": 15,
        "created_at": "2021-08-11T18:46:06Z",
        "closed_at": "2021-08-12T12:39:31Z",
        "merged_at": "2021-08-12T12:39:31Z",
        "body": "This PR adds support for multi-region request handling.\r\n\r\nNote: This may be a potentially breaking change for some users - however, controlling the request region from the client is more in line with the behavior in real AWS.\r\n\r\nThe current request region is tracked in a thread-local variable (`THREAD_LOCAL`), so that invocation chains are automatically using the correct region in the `Authorization` header (e.g., if the client is calling an API method which then calls another API as part of handling the request).\r\n\r\nTODOs:\r\n\r\n- [x] make sure all tests are passing\r\n- [x] add config option `USE_SINGLE_REGION` to enable the legacy single-region mode\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 198,
        "deletions": 98,
        "changed_files": 6,
        "created_at": "2021-08-11T13:59:09Z",
        "closed_at": "2021-08-12T20:10:35Z",
        "merged_at": "2021-08-12T20:10:35Z",
        "body": null,
        "comments": 0
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2021-08-09T17:37:52Z",
        "closed_at": "2021-08-10T07:27:45Z",
        "merged_at": "2021-08-10T07:27:45Z",
        "body": "\u2026 in order to be able to be passed to Localstack if specified\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1012,
        "deletions": 202,
        "changed_files": 22,
        "created_at": "2021-08-09T14:45:24Z",
        "closed_at": "2021-08-10T19:38:52Z",
        "merged_at": "2021-08-10T19:38:52Z",
        "body": "this PR adds new facilities for logging localstack events",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 608,
        "deletions": 497,
        "changed_files": 26,
        "created_at": "2021-08-09T11:26:41Z",
        "closed_at": "2021-08-09T20:53:37Z",
        "merged_at": "2021-08-09T20:53:37Z",
        "body": "This PR replaces run() calls throughout the code base with calls of the docker client, to reduce possible vulnerability to command injection.\r\n\r\nTo prevent issues with circular imports. the run() method and FuncThread() class had to be moved from bootstrap.py to a separate package.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2021-08-05T05:03:28Z",
        "closed_at": "2021-08-05T13:10:49Z",
        "merged_at": "2021-08-05T13:10:49Z",
        "body": "Release notes: https://github.com/etspaceman/kinesis-mock/releases/tag/0.1.8",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2021-07-30T08:54:26Z",
        "closed_at": "2021-07-30T10:53:25Z",
        "merged_at": "2021-07-30T10:53:25Z",
        "body": "Minor change, the first group has to be non capturing, to work on line 256 correctly (and for pro).",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 770,
        "deletions": 73,
        "changed_files": 17,
        "created_at": "2021-07-29T21:50:45Z",
        "closed_at": "2021-07-30T18:34:05Z",
        "merged_at": "2021-07-30T18:34:04Z",
        "body": "Adds support for SSM parameter resolution for CloudFormation. \r\n\r\nThere are still some issues with the flow for parameter initialization which will need a bit more refactoring in the future but for now it adds the SSM string parameter support without rewriting too much of the core CFn logic.\r\n\r\nSome other changes:\r\n\r\n- Started adding new tests in a new cloudformation test subdir for integration tests since we'll have to add more CFn tests here in the near future. The exiting Unittest tests will be moved there in the near future as well and split up where necessary.\r\n- Added new fixtures for cleanup (might make sense to encapsulate them in a utils fixture to avoid too many parameters in the unit tests)\r\n- Minor type hint additions\r\n- Support for change set types (\"CREATE\"/\"UPDATE\") and corresponding errors. \"IMPORT\" is not yet supported, but a corresponding TODO was added.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 183,
        "deletions": 33,
        "changed_files": 5,
        "created_at": "2021-07-28T21:14:55Z",
        "closed_at": "2021-07-29T10:04:18Z",
        "merged_at": "2021-07-29T10:04:18Z",
        "body": "When this PR is merged, Lambdas will not be executed in parallel if the ParallelizationFactor does not allow it, when triggered from Kinesis.",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 21,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2021-07-28T00:48:13Z",
        "closed_at": "2021-07-30T09:07:24Z",
        "merged_at": "2021-07-30T09:07:24Z",
        "body": "* Add tests for #4373 \r\n* Tests won't pass until https://github.com/spulec/moto/pull/4096 is merged\r\n\r\nExtending integration tests to match route table associations right state.",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 11,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2021-07-27T19:23:27Z",
        "closed_at": "2021-07-27T22:04:13Z",
        "merged_at": "2021-07-27T22:04:13Z",
        "body": "Addresses #4351 \r\nThis PR fixes the event data format sent from DynamoDB to kinesis.\r\nExtended the existing integration test `test_dynamodb_with_kinesis_stream` to cover the added functionality.\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 122,
        "deletions": 22,
        "changed_files": 3,
        "created_at": "2021-07-27T09:33:49Z",
        "closed_at": "2021-07-28T10:42:41Z",
        "merged_at": "2021-07-28T10:42:41Z",
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 66,
        "deletions": 21,
        "changed_files": 2,
        "created_at": "2021-07-26T11:29:29Z",
        "closed_at": "2021-09-01T22:29:55Z",
        "merged_at": "2021-09-01T22:29:55Z",
        "body": "Fixes #4343. \r\n\r\n*Note:* __Tests will not pass until  https://github.com/spulec/moto/pull/4087 is merged__\r\n\r\nWhen passing an empty string as tag to SQS this is the `req_data` passed to the `CreateQueue` function:\r\n\r\n```\r\n{'Action': 'CreateQueue', 'Attribute.1.Name': 'DelaySeconds', 'Attribute.1.Value': '0', 'Attribute.2.Name': 'MaximumMessageSize', 'Attribute.2.Value': '262144', 'Attribute.3.Name': 'MessageRetentionPeriod', 'Attribute.3.Value': '345600', 'Attribute.4.Name': 'ReceiveMessageWaitTimeSeconds', 'Attribute.4.Value': '0', 'Attribute.5.Name': 'VisibilityTimeout', 'Attribute.5.Value': '30', 'QueueName': 'foobar', 'Tag.1.Key': 'NoFoo', 'Version': '2012-11-05'}\r\n```\r\n\r\nThe querystring actually has no value at all:\r\n```\r\nAction=CreateQueue&Attribute.1.Name=DelaySeconds&Attribute.1.Value=0&Attribute.2.Name=MaximumMessageSize&Attribute.2.Value=262144&Attribute.3.Name=MessageRetentionPeriod&Attribute.3.Value=345600&Attribute.4.Name=ReceiveMessageWaitTimeSeconds&Attribute.4.Value=0&Attribute.5.Name=VisibilityTimeout&Attribute.5.Value=30&QueueName=foobar&Tag.1.Key=NoFoo&Version=2012-11-05\r\n```\r\n\r\nSo there's a missing `Tag.1.Value`, now if we loop through every `Tag.N` index and check if there's  a present k/v `Value` for that (which the only case for this is passing an empty string as value). Also extending integration tests for this.\r\n\r\nTerraform output with this fix:\r\n```\r\nTerraform used the selected providers to generate the following execution plan. Resource actions are indicated with the following symbols:\r\n  + create\r\n\r\nTerraform will perform the following actions:\r\n\r\n  # aws_sqs_queue.queue will be created\r\n  + resource \"aws_sqs_queue\" \"queue\" {\r\n      + arn                               = (known after apply)\r\n      + content_based_deduplication       = false\r\n      + deduplication_scope               = (known after apply)\r\n      + delay_seconds                     = 0\r\n      + fifo_queue                        = false\r\n      + fifo_throughput_limit             = (known after apply)\r\n      + id                                = (known after apply)\r\n      + kms_data_key_reuse_period_seconds = (known after apply)\r\n      + max_message_size                  = 262144\r\n      + message_retention_seconds         = 345600\r\n      + name                              = \"foobar\"\r\n      + name_prefix                       = (known after apply)\r\n      + policy                            = (known after apply)\r\n      + receive_wait_time_seconds         = 0\r\n      + tags                              = {\r\n          + \"NoFoo\" = \"\"\r\n        }\r\n      + tags_all                          = {\r\n          + \"NoFoo\" = (known after apply)\r\n        }\r\n      + url                               = (known after apply)\r\n      + visibility_timeout_seconds        = 30\r\n    }\r\n\r\nPlan: 1 to add, 0 to change, 0 to destroy.\r\naws_sqs_queue.queue: Creating...\r\naws_sqs_queue.queue: Creation complete after 0s [id=http://localhost:4566/000000000000/foobar]\r\n\r\nApply complete! Resources: 1 added, 0 changed, 0 destroyed.\r\n```\r\n\r\nAnd AWS CLI get tags:\r\n```\r\n$ awslocal sqs list-queue-tags --queue-url http://localhost:4566/000000000000/foobar\r\n{\r\n    \"Tags\": {\r\n        \"NoFoo\": \"\"\r\n    }\r\n}\r\n```",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 134,
        "deletions": 43,
        "changed_files": 5,
        "created_at": "2021-07-26T09:35:49Z",
        "closed_at": "2021-07-27T21:57:17Z",
        "merged_at": "2021-07-27T21:57:16Z",
        "body": "Adds the possibility to subscribe to config changes via the _config_ endpoint, for services where direct dependencies to the config values is not feasable.\r\n\r\nFixes #4363 \r\n\r\nAdds the possibility for further services to enable live changes of the config. Could be useful for testing etc.\r\n\r\n- [x] Add options to listen to config changes\r\n- [x] Add config subscription for lambda executors\r\n- [x] Add test for the config endpoint",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 0,
        "deletions": 15,
        "changed_files": 1,
        "created_at": "2021-07-26T07:14:19Z",
        "closed_at": "2021-07-26T08:18:01Z",
        "merged_at": "2021-07-26T08:18:01Z",
        "body": "As seen in #4360 , there is some confusion about the Web UI, since it has been remove, but the Readme still contains a section about it.\r\nThis PR removes the regarding sections in the Readme, to prevent further problems.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 43,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2021-07-26T06:44:03Z",
        "closed_at": "2021-07-28T11:26:11Z",
        "merged_at": "2021-07-28T11:26:11Z",
        "body": "See https://github.com/localstack/localstack/pull/4259\r\n\r\nThis PR removes the erroneous line that prevents the AWS credential environment variables being made available to dockerized Lambdas, which then prevents them from accessing other LocalStack services.\r\n\r\nAn additional commit will, with the guidance of @dominikschubert, add tests to verify correct behavior.\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2021-07-26T00:18:24Z",
        "closed_at": "2021-07-27T22:05:09Z",
        "merged_at": "2021-07-27T22:05:09Z",
        "body": "\r\n",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 24,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2021-07-24T14:21:51Z",
        "closed_at": "2021-07-24T17:53:56Z",
        "merged_at": "2021-07-24T17:53:56Z",
        "body": "##  Running integration test against AWS\r\nSet env var `TEST_TARGET=AWS_CLOUD` when running an integration test to use actual AWS cloud endpoints instead of the localstack instance. Useful when writing integration tests to check the behavior against the AWS cloud. This will also disable the start of the localstack instance since it wouldn't make much sense anyway. (Currently only implemented for pytest fixtures)\r\n\r\n## Avoid retries and timeouts while debugging\r\n\r\nWhen debugging it's usually fairly annoying when you're stepping through the debugger and suddenly the request either times out or a new request is issued and pulls you into the new request context.\r\n\r\nTo avoid this we can now do the following:\r\n* set `PROXY_MAX_RETRIES=0` to prevent the generic_proxy from retrying to call the backend services\r\n* set `TEST_DISABLE_RETRIES_AND_TIMEOUTS=1` (or some other \"truthy\" value) to disable the boto3/botocore retries and timeouts of our test fixtures/clients.\r\n\r\nIf you're using the AWS CLI to send requests while debugging you can also disable retries and timeouts:\r\n* add `--cli-read-timeout=0 --cli-connect-timeout=0` to the AWS CLI command. the CLI interprets these values as a \"blocking\" call, i.e. it will never timeout.\r\n  * E.g. `aws cloudformation list-stacks --cli-read-timeout=0 --cli-connect-timeout=0`\r\n* set the environment variable `AWS_MAX_ATTEMPTS=1` to avoid any retries from the AWS CLI\r\n\r\nexample alias for your shell config:\r\n`aws=\"AWS_MAX_ATTEMPTS=1 aws --cli-read-timeout=0 --cli-connect-timeout=0\"`",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 52,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2021-07-24T09:44:51Z",
        "closed_at": "2021-07-24T14:51:31Z",
        "merged_at": "2021-07-24T14:51:31Z",
        "body": "Similar to https://github.com/localstack/localstack/pull/4098 I needed to check if an email was sent correctly but relied upon templated emails which the above PR did not address.\r\n\r\nI have essentially duplicated the work done in the above PR but amended it slightly for the send_templated_email use case i.e. sending a templated email will dump said email into the DATA_DIR in an ses subdirectory using the id of the sent email as filename.\r\n\r\nThe contents of the JSON file are:\r\n- Source\r\n- Template\r\n- TemplateData\r\n- Destinations\r\n\r\ne.g.\r\n```\r\n{\r\n  \"Source\": \"user@example.com\",\r\n  \"Template\": [\"hello-world\"],\r\n  \"TemplateData\": [\"{\\\"A key\\\": \\\"A value\\\"}\"],\r\n  \"Destinations\": {\r\n    \"ToAddresses\": [\"success@example.com\"],\r\n    \"CcAddresses\": [],\r\n    \"BccAddresses\": []\r\n  },\r\n  \"Region\": \"us-east-1\"\r\n}\r\n```\r\n* NOTE: I am not a Python Developer and had a ton of trouble getting the tooling around Python and Localstack to work so if you spot anything odd please just let me know and I'll do my best to improve it.\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 0,
        "deletions": 11,
        "changed_files": 1,
        "created_at": "2021-07-24T00:50:44Z",
        "closed_at": "2021-07-24T15:55:02Z",
        "merged_at": "2021-07-24T15:55:02Z",
        "body": "Work Done\r\n--- \r\nRemove proxy of: \r\n- `AWSEvents.ListTagsForResource`\r\n- `AWSEvents.TagResource`\r\n- `AWSEvents.UntagResource`\r\n\r\nThis allows the moto events backend to resolve the operations instead. Using its own tagging service. \r\nCheck this PR: localstack/moto#38\r\n\r\nI've checked the sources where these tags are used, and it seems that there are no consumers in localstack that access this directly. Still this is open to discussion and any feedback is welcome! \r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 36,
        "deletions": 20,
        "changed_files": 2,
        "created_at": "2021-07-23T10:02:41Z",
        "closed_at": "2021-07-24T15:13:30Z",
        "merged_at": "2021-07-24T15:13:30Z",
        "body": "The rm_env_file method was completely unused, and is now modified and used after each docker invocation.\r\nAlso a test for docker pull is added.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 9,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2021-07-22T23:48:48Z",
        "closed_at": "2021-09-01T07:56:54Z",
        "merged_at": "2021-09-01T07:56:54Z",
        "body": "Adding tests for https://github.com/localstack/localstack/issues/4225\r\n\r\nPlease rerun the pipeline after merging https://github.com/spulec/moto/pull/4091\r\n\r\nSetting the `Policy` attribute to an empty string should remove the attribute (and clean the path for terraform to destroy the sqs queue)",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 111,
        "deletions": 20,
        "changed_files": 5,
        "created_at": "2021-07-22T15:21:41Z",
        "closed_at": "2021-07-23T11:40:43Z",
        "merged_at": "2021-07-23T11:40:43Z",
        "body": "Background: Some AWS API endpoints use member tags to wrap list instances in XML (see sample response here: https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_DescribeChangeSet.html)\r\n\r\nSome of the AWS API XML responses need a bit more custom serialization logic that xmltodict.unparse doesn't support.\r\nI've also noticed that a lot of the current \"member\" wrapping was usually only applied on the top level of the responses. We also need a more flexible way to handle empty tags for some endpoints which might require changes to this xml serialization (more customization) in the future as well.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 12,
        "deletions": 10,
        "changed_files": 1,
        "created_at": "2021-07-22T09:22:39Z",
        "closed_at": "2021-07-22T10:41:37Z",
        "merged_at": "2021-07-22T10:41:37Z",
        "body": "Additional structure around adding type hints for our clients will be in a future PR.\r\n\r\nThis PR replaces the botostubs in the test fixtures for the clients with boto3-stubs.\r\n\r\n\r\nRun `python -m pip install 'boto3-stubs[all]'` to install boto3-stubs for all AWS services.\r\n\r\nThe `TYPE_CHECKING` variable guards the type imports because we don't want to include the type libraries in the packaged production code.\r\n\r\nabout `TYPE_CHECKING`: \r\n\r\n> A special constant that is assumed to be True by 3rd party static type checkers. It is False at runtime.\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 331,
        "deletions": 21,
        "changed_files": 9,
        "created_at": "2021-07-20T22:19:28Z",
        "closed_at": "2021-07-21T08:32:27Z",
        "merged_at": "2021-07-21T08:32:27Z",
        "body": "This PR adds tests for the dashboard graph backend code and several improvements (like correct edges between bucket notifications)\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 48,
        "deletions": 53,
        "changed_files": 1,
        "created_at": "2021-07-20T14:04:37Z",
        "closed_at": "2021-07-20T22:27:25Z",
        "merged_at": "2021-07-20T22:27:25Z",
        "body": "Refactor and re-enable a previously disabled test.\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 292,
        "deletions": 2,
        "changed_files": 3,
        "created_at": "2021-07-19T22:07:36Z",
        "closed_at": "2021-07-20T08:00:15Z",
        "merged_at": "2021-07-20T08:00:15Z",
        "body": "* adds several unit tests for common.py and config.py\r\n* fixes one error found by the tests\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2021-07-19T20:43:18Z",
        "closed_at": "2021-07-19T22:21:48Z",
        "merged_at": "2021-07-19T22:21:48Z",
        "body": "See https://github.com/etspaceman/kinesis-mock/releases/tag/0.1.4\r\n\r\n0.1.4 fixes a bug in the UpdateShardCount API. \r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2021-07-19T19:32:19Z",
        "closed_at": "2021-07-19T23:36:06Z",
        "merged_at": "2021-07-19T23:36:06Z",
        "body": "Apigateway sends event with datetime object, which does not play with json.dumps().\r\n\r\nCloses #4307 ",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 19,
        "deletions": 2,
        "changed_files": 3,
        "created_at": "2021-07-19T16:55:29Z",
        "closed_at": "2021-07-22T10:31:16Z",
        "merged_at": "2021-07-22T10:31:16Z",
        "body": "So after much delving into the Terraform AWS provider, AWS Go SDK, and the AWS API docs themselves, I think I've identified the core issue. The error that is cropping up occurs when the AWS Go SDK runs the [GetEventSourceMapping](https://github.com/aws/aws-sdk-go/blob/e54742b5910e84b907c8a555b265c20c143b6b95/service/lambda/api.go#L1861) operation against the AWS API. Diving through the internals of the Go SDK we arrive at the function that [sends the actual request](https://github.com/aws/aws-sdk-go/blob/e54742b5910e84b907c8a555b265c20c143b6b95/aws/request/request.go#L589-L620) to AWS. The line of code which is failing is at [611](https://github.com/aws/aws-sdk-go/blob/e54742b5910e84b907c8a555b265c20c143b6b95/aws/request/request.go#L611) since the error logging matches the [code block](https://github.com/aws/aws-sdk-go/blob/e54742b5910e84b907c8a555b265c20c143b6b95/aws/request/request.go#L613-L615) for when an error is returned by that function.\r\n\r\nSo, the issue must be that the response of the API isn't matching the SDK's unmarshalling code. This means what is being returned on the wire by Localstack must differ in some way from the actual AWS API. Within the Go SDK there's a comment above the `GetEventSourceMapping` function with a reference to the [AWS API docs](https://docs.aws.amazon.com/goto/WebAPI/lambda-2015-03-31/GetEventSourceMapping). The docs specify that the Response object's LastModified element is `The date that the event source mapping was last updated or that its state changed, in Unix time seconds.`\r\n\r\nThis PR modifies the timestamp that way provided to match this specification. I haven't actually been able to test this however since my machine isn't currently capable of building the Localstack container for some reason.",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 46,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2021-07-19T16:48:23Z",
        "closed_at": "2021-07-19T18:43:29Z",
        "merged_at": "2021-07-19T18:43:29Z",
        "body": "Add missing bucket region header to appropriate requests \r\n#4205",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 73,
        "deletions": 23,
        "changed_files": 5,
        "created_at": "2021-07-19T13:24:53Z",
        "closed_at": "2021-07-19T17:05:54Z",
        "merged_at": "2021-07-19T17:05:54Z",
        "body": "This PR updates the circleci workflow to aggregate coverage statistics from other build steps and combines them in a fan-in step that does the coveralls reporting.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 12,
        "deletions": 43,
        "changed_files": 1,
        "created_at": "2021-07-19T12:43:30Z",
        "closed_at": "2021-07-19T15:54:01Z",
        "merged_at": "2021-07-19T15:54:01Z",
        "body": "Use `JAVA_TOOL_OPTIONS` to apply `LAMBDA_JAVA_OPTS` in Java Lambdas, and remove unused/deprecated code.\r\n\r\nThis removes old code which was using our own Java Lambda executor to apply JVM options. The Lambda Docker images now support `LAMBDA_JAVA_OPTS` for JVM flags, which is a much easier and cleaner approach.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 3,
        "changed_files": 2,
        "created_at": "2021-07-19T09:08:16Z",
        "closed_at": "2021-07-19T10:12:57Z",
        "merged_at": "2021-07-19T10:12:57Z",
        "body": "",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 7,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2021-07-18T18:09:17Z",
        "closed_at": "2021-07-21T11:36:57Z",
        "merged_at": "2021-07-21T11:36:57Z",
        "body": "Adding integration tests for #4313.\r\nPlease only merge after https://github.com/localstack/moto/pull/31\r\n\r\nAdds an ARN check to the certificate import integration test.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 17,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2021-07-17T12:04:36Z",
        "closed_at": "2021-07-17T14:52:12Z",
        "merged_at": "2021-07-17T14:52:12Z",
        "body": "Addresses #4289 \r\nC# AWS sdk client uses` get_acl` method to check for the existence of the bucket. In case of not exists, returns NoSuchBucket Error.\r\nExtended the existing integration test method `test_bucket_exists` to cover the added functionality.\r\n",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 4,
        "deletions": 4,
        "changed_files": 2,
        "created_at": "2021-07-16T20:52:37Z",
        "closed_at": "2021-07-17T16:30:58Z",
        "merged_at": null,
        "body": "Proposed fix for bug #4295.\r\n\r\n**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 165,
        "deletions": 1,
        "changed_files": 7,
        "created_at": "2021-07-15T21:29:58Z",
        "closed_at": "2021-09-08T08:40:14Z",
        "merged_at": "2021-09-08T08:40:14Z",
        "body": "Clone of  #4309\r\n",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 118,
        "deletions": 1,
        "changed_files": 7,
        "created_at": "2021-07-15T19:13:18Z",
        "closed_at": "2021-07-15T21:28:35Z",
        "merged_at": null,
        "body": " Clone of #4296 from a new fork.\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 0,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2021-07-15T01:24:11Z",
        "closed_at": "2021-07-15T16:37:14Z",
        "merged_at": "2021-07-15T16:37:14Z",
        "body": "Looks like this file was accidentally committed in 809235e3079a1060dae599ce83ed06c84b0e34a5",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 13,
        "deletions": 5,
        "changed_files": 2,
        "created_at": "2021-07-14T00:51:05Z",
        "closed_at": "2021-07-16T19:40:36Z",
        "merged_at": "2021-07-16T19:40:35Z",
        "body": "Fixes #4291 \r\nThe right response for a non existent policy should be raise an `IAMNotFoundException` instead of 500 (not implemented). A little monkey patching solves this.\r\n\r\nExample hitting AWS for real:\r\n```\r\naws --profile localstack iam delete-policy --policy-arn arn:aws:iam::000000000000:policy/non-existent-policy\r\nAn error occurred (NoSuchEntity) when calling the DeletePolicy operation: Policy arn:aws:iam::000000000000:policy/non-existent-policy was not found.\r\n```",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 147,
        "deletions": 1,
        "changed_files": 8,
        "created_at": "2021-07-13T19:56:30Z",
        "closed_at": "2021-07-15T19:07:26Z",
        "merged_at": null,
        "body": "This PR adds the feature to allow localstack to run go lambda functions locally, as requested in issue #4113.\r\n\r\nSame as the python local execution, this feature requires the user to start Localstack with `LAMBDA_EXECUTOR=local`.\r\n\r\nAlso the execution of the go lambda requires a Runtime program which is taken from this [project](https://github.com/localstack/awslamba-go-runtime) release.\r\n\r\nHere is the simple test I used to test the lambda execution: [test.zip](https://github.com/localstack/localstack/files/6811594/test.zip)\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2021-07-13T15:56:48Z",
        "closed_at": "2021-07-13T17:17:02Z",
        "merged_at": "2021-07-13T17:17:02Z",
        "body": "I noticed the environment variable wasn't matching the README, so I updated it. I'm not sure if this is the right way to go though as this would be a breaking change, but I wanted to keep the environment variables names matching. Happy to change this PR to updating the docs instead.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 125,
        "deletions": 1,
        "changed_files": 4,
        "created_at": "2021-07-13T11:04:13Z",
        "closed_at": "2021-07-13T16:51:44Z",
        "merged_at": "2021-07-13T16:51:44Z",
        "body": "this PR introduces a new file `startup_info.json` into the `DATA_DIR`. Each time localstack is started with this data dir, the file is amended with a record that contains: the timestamp when it was started, the localstack version, the localstack_ext version, and whether the pro license key was activated.\r\n\r\nit will look something like this:\r\n```json\r\n[{\"timestamp\": \"2021-07-13T13:01:39.980737\", \"localstack_version\": \"0.12.15\", \"localstack_ext_version\": \"0.12.12.4\", \"pro_activated\": false}]\r\n```",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 34,
        "deletions": 0,
        "changed_files": 3,
        "created_at": "2021-07-12T06:10:21Z",
        "closed_at": "2021-07-13T08:27:17Z",
        "merged_at": "2021-07-13T08:27:17Z",
        "body": "This PR adds a pre-commit config to automatically run black/flake8 on commit. \r\n\r\n`pip install -r requirements.txt`\r\n`make init-precommit` or `pre-commit install` will add the hook to `./.git/hooks`\r\n\r\nTo test it simply change a python file in `tests/` to be incompatible with the back format (e.g. use `'` quotes for a string) and try to commit the changes. It should fail the commit and automatically format the file for you.\r\n\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2021-07-10T16:42:54Z",
        "closed_at": "2021-07-11T13:49:52Z",
        "merged_at": "2021-07-11T13:49:52Z",
        "body": "When for example creating a stack in CDK with an s3 bucket that has static hosting enabled (e.g. implicitly when specifying an index document) and a cloudfront distribution, the distribution tries to reference the s3 bucket attribute WebsiteURL. This PR adds support for this attribute and returns the buckets HTTP URL.\r\n\r\nRelevant AWS docs: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-s3-bucket.html\r\n\r\nExample with minimal CDK stack contents:\r\n\r\n```typescript\r\nexport class CloudFrontStack extends cdk.Stack {\r\n    constructor(scope: cdk.App, id: string, props?: cdk.StackProps) {\r\n        super(scope, id, props);\r\n\r\n        const bucket = new s3.Bucket(this, 'bucket', {\r\n            websiteIndexDocument: 'index.html',\r\n        });\r\n        const dist = new cloudfront.Distribution(this, 'distribution', {\r\n            defaultBehavior: {\r\n                origin: new origins.S3Origin(bucket)\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\n```",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 44,
        "deletions": 23,
        "changed_files": 1,
        "created_at": "2021-07-09T11:09:22Z",
        "closed_at": "2021-07-09T14:51:24Z",
        "merged_at": "2021-07-09T14:51:24Z",
        "body": "Implements enhancement from #4274\r\n\r\nAdds default headers AWS sends when invoking the API destination target and fixes the api destination ARN structure.\r\n\r\nCorresponding ARN fixes are available in the moto-ext release 2.0.3.37",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 52,
        "deletions": 9,
        "changed_files": 4,
        "created_at": "2021-07-08T10:30:41Z",
        "closed_at": "2021-07-09T13:08:16Z",
        "merged_at": "2021-07-09T13:08:16Z",
        "body": "Extend s3 unit tests and fix regex that distinguishes between host and path based bucket references\r\n#4254 ",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 5,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2021-07-07T22:14:39Z",
        "closed_at": "2021-12-29T20:45:41Z",
        "merged_at": "2021-12-29T20:45:41Z",
        "body": "This PR extends the integration test in APIGateway to cover the passing of binary data via APIGateway.\r\nIt is a follow-up PR to PR #4249 \r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 1222,
        "deletions": 435,
        "changed_files": 11,
        "created_at": "2021-07-06T20:22:57Z",
        "closed_at": "2021-07-16T19:24:05Z",
        "merged_at": "2021-07-16T19:24:05Z",
        "body": "This PR refactors the lambda executor logic to untie the lambda executor and container logic.\r\nThe goal is, to provide a interface for starting and interacting with docker (or maybe even other container runtimes someday), which the lambda executor then uses.\r\n\r\n- [x] Add container interface\r\n- [x] implement container interface with docker subprocess\r\n- [x] Refactor lambda executor to make use of it\r\n- [x] Make docker - reuse work\r\n- [x] Remove leftover code\r\n- [x] Add new tests and remove/adapt the ones depending hard on the current implementation\r\n- [x] Adapt Localstack-Ext\r\n- [x] Better documentation of the container interface\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 3662,
        "changed_files": 3,
        "created_at": "2021-07-06T12:34:17Z",
        "closed_at": "2021-07-06T16:25:49Z",
        "merged_at": "2021-07-06T16:25:49Z",
        "body": "I kept two functions in the cloudformation_starter that are used in the pro code to not require refactoring there.",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1622,
        "changed_files": 25,
        "created_at": "2021-07-06T10:40:47Z",
        "closed_at": "2021-07-06T12:47:59Z",
        "merged_at": "2021-07-06T12:47:59Z",
        "body": "This PR removes the old web app as well as the old flask app that used to expose resources to the app",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2021-07-05T13:12:42Z",
        "closed_at": "2021-07-05T15:14:47Z",
        "merged_at": "2021-07-05T15:14:47Z",
        "body": "Certain event fields could be empty strings, but the current filter does not allow that.\r\n\r\nFor example, 'source' _could_ be empty, and the eventpattern could allow that, but the filter would not permit that.",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 0,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2021-07-04T03:49:52Z",
        "closed_at": "2021-07-05T13:24:14Z",
        "merged_at": null,
        "body": "Remove shadowing env parameter, preventing addition of missing environment variables.\r\n\r\nThe `inject_test_credentials_into_env` was shadowing the `env` argument therefore not actually updating it in the caller.\r\n\r\nAh, mutation.\r\n\r\nSadly I could not find any tests that are impacted or check for this. I'm not a pythonista.\r\n\r\nThis may also fix the TODO in [lamba_integration.py](https://github.com/localstack/localstack/blob/9977b14999981ebcbbb54c346b7121702eeeda7d/tests/integration/lambdas/lambda_integration.py#L21) and may help some of the issues with Docker execution mode lambdas not having permission to access services in LocalStack (even though they should be able to) - see #3702",
        "comments": 11
    },
    {
        "merged": true,
        "additions": 730,
        "deletions": 217,
        "changed_files": 12,
        "created_at": "2021-07-03T22:58:56Z",
        "closed_at": "2021-07-05T23:07:28Z",
        "merged_at": "2021-07-05T23:07:28Z",
        "body": "This PR completely restructures the startup procedure for the elasticsearch service. It introduces a object-oriented-style wrapper around the elasticsearch binary and the involved installation procedure. This makes it reusable, simplifies the use inside `es_api.py`, and makes it easier in the future to add multi-cluster implementation (one cluster per domain). I also added proper concurrency control that was previously missing. I kept the principle that there is only one cluster for all domains, but made it more explicit in the code, and added comments indicating where changes have to be made, if we one day want a setup where each domain can spawn its own cluster (for that we would have to also refactor the installation procedure, as we assume a single installation + data directory).\r\n\r\nI haven't tested it with the `DATA_DIR` option yet\r\n\r\n\r\nthis is a useful code snippet to test manually:\r\n\r\n```python\r\nif __name__ == \"__main__\":\r\n    logging.basicConfig(level=logging.INFO)\r\n\r\n    es_client = aws_stack.connect_to_service(\"es\")\r\n    name = 'my domain name'\r\n\r\n    ## run afterwards\r\n    # es_client.delete_elasticsearch_domain(DomainName=name)\r\n    # exit(0)\r\n\r\n    # status = es_client.describe_elasticsearch_domain(DomainName=name)\r\n    # LOG.info('domain status %s', status)\r\n\r\n    kwargs = {}\r\n    LOG.info('creating elasticsearch domain %s', name)\r\n    es_client.create_elasticsearch_domain(DomainName=name, **kwargs)\r\n    print(es_client.list_domain_names()[\"DomainNames\"])\r\n\r\n    # wait for completion status\r\n    def check_cluster_ready(*args):\r\n        LOG.info('describe_elasticsearch_domain %s ', name)\r\n        status = es_client.describe_elasticsearch_domain(DomainName=name)\r\n        created = status[\"DomainStatus\"][\"Created\"]\r\n        LOG.info('asserting created state of domain %s (state = %s)', name, created)\r\n        assert created\r\n\r\n    LOG.info('waiting for domain to be ready...')\r\n    retry(check_cluster_ready, sleep=10, retries=12)\r\n    LOG.info('created!')\r\n```",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 27,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2021-07-03T22:38:24Z",
        "closed_at": "2021-07-07T19:38:20Z",
        "merged_at": "2021-07-07T19:38:19Z",
        "body": "Re-creating PR #4239 one more time, to trigger the CI builds",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 24567,
        "deletions": 18988,
        "changed_files": 171,
        "created_at": "2021-07-02T12:54:52Z",
        "closed_at": "2021-07-02T19:44:12Z",
        "merged_at": "2021-07-02T19:44:12Z",
        "body": "This PR introduces black and isort configurations, and runs two formatting commits, one for black and one for isort.",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 9,
        "deletions": 9,
        "changed_files": 7,
        "created_at": "2021-07-01T22:20:36Z",
        "closed_at": "2021-07-03T10:42:35Z",
        "merged_at": "2021-07-03T10:42:35Z",
        "body": "The starting or not of certain services based on Flask, makes the logs inconsistent, with this PR the quieting of those logs are mostly depended on the DEBUG variable.\r\n\r\nI think we should consider removing completly the `quiet` param since just quieting one service, quiets all the other Flask APi's, because they share the **werkzeug** logger.\r\n\r\nThis PR  addresses #4162 ",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 15,
        "deletions": 4,
        "changed_files": 2,
        "created_at": "2021-07-01T20:31:26Z",
        "closed_at": "2021-07-06T22:00:17Z",
        "merged_at": "2021-07-06T22:00:17Z",
        "body": "Addresses - #4092 \r\nAdded temporary fix to pass binary data to API Gateway\r\n\r\n",
        "comments": 3
    },
    {
        "merged": false,
        "additions": 11,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2021-07-01T15:58:30Z",
        "closed_at": "2021-07-22T23:44:36Z",
        "merged_at": null,
        "body": "Fixes #4225 .\r\n\r\nDescription:\r\nThere is a problem when trying to remove an SQS queue if it has policy attached, and it is basically because terraform tries to set `Policy=None` before actually removing the queue.\r\n\r\n[This explanation](https://github.com/localstack/localstack/issues/4225#issuecomment-871415857) states pretty well the issue coming from [this piece of terraform code](https://github.com/hashicorp/terraform-provider-aws/blob/ccc13f55709c860a2130ecee6e21acde2318e936/aws/resource_aws_sqs_queue_policy.go#L104)\r\n\r\nMain issue for us is the `_set_attributes` function does not detect the attribute being passed an empty K/V if passing i.e. `Policy=\"\"` or `DelaySeconds=\"\"` which is the behaviour by design on the AWS CLI.\r\n\r\n**Pros:**\r\nActually removing the policy if we pass an empty attribute.\r\n\r\n**Cons:**\r\n`Any` empty attribute will actually remove the policy.\r\nExample:\r\n```\r\nawslocal sqs set-queue-attributes --queue-url http://localhost:4566/000000000000/myqueue  --attributes DelaySeconds=\"\"\r\n```\r\n\r\nOne side note is that no should pass empty parameters, but if it would be the case (by mistake for example) it would remove their policy.\r\n\r\nSuggestions are welcome",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 87,
        "deletions": 147,
        "changed_files": 4,
        "created_at": "2021-06-30T18:36:59Z",
        "closed_at": "2021-07-06T09:56:50Z",
        "merged_at": "2021-07-06T09:56:50Z",
        "body": "This PR eliminates some dead code from common.py, simplifies several functions/removes python 2.7 support, and fixes a few IDE warnings.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 7,
        "deletions": 6,
        "changed_files": 2,
        "created_at": "2021-06-30T15:51:17Z",
        "closed_at": "2021-07-01T00:44:54Z",
        "merged_at": "2021-07-01T00:44:54Z",
        "body": "And fix error throughput error response for PutRecords\r\n\r\nI can not dedicate more time to add more tests to the codebase and this PR does fix 2 issues, feel free to take over and complete/split the PR or close it if you think it is against the rules.\r\n",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 20,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2021-06-30T08:21:13Z",
        "closed_at": "2021-07-03T22:37:08Z",
        "merged_at": null,
        "body": "Note: Copied from: https://github.com/localstack/localstack/pull/4236\r\n\r\n----\r\nSince the base image already has the node runtime, I made a similar process to the python local execution.\r\nI'm considering doing the rest in the same way but with a validation that the runtime exist and if not, do the installation with an **apk** command. \r\n\r\nI tested this feature this running this nodejs lambda: \r\n\r\n```javascript\r\nexports.handler =  async function(event, context) {\r\n  console.log(\"EVENT:\" + JSON.stringify(event, null, 2))\r\n  console.log(\"CONTEXT:\" + JSON.stringify(context, null, 2))\r\n  return null;\r\n}\r\n```\r\n\r\nand I get this logs: \r\n```\r\n2021-06-29T16:55:11:INFO:localstack.services.awslambda.lambda_executors: node -e 'require(\"/tmp/localstack/zipfile.f1009281/index.js\").handler({\"name\": \"Bob\"},{\"function_name\": \"crist-test\", \"function_version\": \"$LATEST\", \"client_context\": null, \"invoked_function_arn\": \"arn:aws:lambda:us-east-1:000000000000:function:crist-test\", \"cognito_identity\": null, \"aws_request_id\": \"b0cad9f5-14fc-48a5-8989-e28ccea2311e\", \"memory_limit_in_mb\": 1536, \"log_group_name\": \"/aws/lambda/crist-test\", \"log_stream_name\": \"2021/06/29/[1]786bf82f\"})'\r\n2021-06-29T16:55:11:DEBUG:localstack.services.awslambda.lambda_executors: Lambda arn:aws:lambda:us-east-1:000000000000:function:crist-test result / log output:\r\n}\r\n> EVENT:{\r\n>   \"name\": \"Bob\"\r\n> }\r\n> CONTEXT:{\r\n>   \"function_name\": \"crist-test\",\r\n>   \"function_version\": \"$LATEST\",\r\n>   \"client_context\": null,\r\n>   \"invoked_function_arn\": \"arn:aws:lambda:us-east-1:000000000000:function:crist-test\",\r\n>   \"cognito_identity\": null,\r\n>   \"aws_request_id\": \"b0cad9f5-14fc-48a5-8989-e28ccea2311e\",\r\n>   \"memory_limit_in_mb\": 1536,\r\n>   \"log_group_name\": \"/aws/lambda/crist-test\",\r\n>   \"log_stream_name\": \"2021/06/29/[1]786bf82f\"\r\n```\r\n\r\nI think this PR could be the foundation for issue #4113 \r\n[reproduzer.zip](https://github.com/localstack/localstack/files/6736834/reproduzer.zip)",
        "comments": 5
    },
    {
        "merged": true,
        "additions": 1060,
        "deletions": 943,
        "changed_files": 28,
        "created_at": "2021-06-30T00:23:45Z",
        "closed_at": "2021-07-01T10:16:35Z",
        "merged_at": "2021-07-01T10:16:35Z",
        "body": "### Issue\r\n#4197\r\n\r\n\r\n### Work done\r\n- [x] Invert `assertEqual(actual, expected)` to `assertEqual(expected, actual)`\r\n- [x] Address `PEP8 E128` in several function/method calls\r\n- [ ] Run tests locally\r\n",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 20,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2021-06-29T22:22:23Z",
        "closed_at": "2021-06-30T08:20:19Z",
        "merged_at": null,
        "body": "Since the base image already has the node runtime, I made a similar process to the python local execution.\r\nI'm considering doing the rest in the same way but with a validation that the runtime exist and if not, do the installation with an **apk** command. \r\n\r\nI tested this feature this running this nodejs lambda: \r\n\r\n```javascript\r\nexports.handler =  async function(event, context) {\r\n  console.log(\"EVENT:\" + JSON.stringify(event, null, 2))\r\n  console.log(\"CONTEXT:\" + JSON.stringify(context, null, 2))\r\n  return null;\r\n}\r\n```\r\n\r\nand I get this logs: \r\n```\r\n2021-06-29T16:55:11:INFO:localstack.services.awslambda.lambda_executors: node -e 'require(\"/tmp/localstack/zipfile.f1009281/index.js\").handler({\"name\": \"Bob\"},{\"function_name\": \"crist-test\", \"function_version\": \"$LATEST\", \"client_context\": null, \"invoked_function_arn\": \"arn:aws:lambda:us-east-1:000000000000:function:crist-test\", \"cognito_identity\": null, \"aws_request_id\": \"b0cad9f5-14fc-48a5-8989-e28ccea2311e\", \"memory_limit_in_mb\": 1536, \"log_group_name\": \"/aws/lambda/crist-test\", \"log_stream_name\": \"2021/06/29/[1]786bf82f\"})'\r\n2021-06-29T16:55:11:DEBUG:localstack.services.awslambda.lambda_executors: Lambda arn:aws:lambda:us-east-1:000000000000:function:crist-test result / log output:\r\n}\r\n> EVENT:{\r\n>   \"name\": \"Bob\"\r\n> }\r\n> CONTEXT:{\r\n>   \"function_name\": \"crist-test\",\r\n>   \"function_version\": \"$LATEST\",\r\n>   \"client_context\": null,\r\n>   \"invoked_function_arn\": \"arn:aws:lambda:us-east-1:000000000000:function:crist-test\",\r\n>   \"cognito_identity\": null,\r\n>   \"aws_request_id\": \"b0cad9f5-14fc-48a5-8989-e28ccea2311e\",\r\n>   \"memory_limit_in_mb\": 1536,\r\n>   \"log_group_name\": \"/aws/lambda/crist-test\",\r\n>   \"log_stream_name\": \"2021/06/29/[1]786bf82f\"\r\n```\r\n\r\nI think this PR could be the foundation for issue #4113 \r\n[reproduzer.zip](https://github.com/localstack/localstack/files/6736834/reproduzer.zip)",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 7,
        "deletions": 3,
        "changed_files": 1,
        "created_at": "2021-06-29T19:44:10Z",
        "closed_at": "2021-06-29T21:08:26Z",
        "merged_at": "2021-06-29T21:08:26Z",
        "body": "I think the recent change in the base image made pip not accessible from the command line.\r\nThis PR  makes the installation process of **debugpy** to be done through the pip module.  ",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 35,
        "deletions": 21,
        "changed_files": 5,
        "created_at": "2021-06-29T08:03:11Z",
        "closed_at": "2021-06-29T16:09:50Z",
        "merged_at": "2021-06-29T16:09:50Z",
        "body": "This PR introduces a workaround for the issue that localstack startup fails with `DATA_DIR` and kinesis-mock provider",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 6,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2021-06-28T17:09:15Z",
        "closed_at": "2021-07-19T18:37:21Z",
        "merged_at": "2021-07-19T18:37:21Z",
        "body": "adding CI slack notifications. important stuff!\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 39,
        "deletions": 19,
        "changed_files": 10,
        "created_at": "2021-06-28T13:22:48Z",
        "closed_at": "2021-06-29T13:48:54Z",
        "merged_at": "2021-06-29T13:48:54Z",
        "body": "Edge Service bound to 0.0.0.0 can lead to unforeseen security risks.\r\n\r\nAdd an environment variable to control the bind address and change the default to localhost.\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 186,
        "deletions": 172,
        "changed_files": 15,
        "created_at": "2021-06-28T11:50:59Z",
        "closed_at": "2021-06-28T15:23:14Z",
        "merged_at": "2021-06-28T15:23:14Z",
        "body": "## Issue\r\n#4197\r\n\r\n## Work done\r\n- [x] Flip asserts to comply with `(expected, actual)`\r\n- [x] Change `assertEquals(<Constant>, obj)` to `assert<Constant>(obj)`\r\n- [x] Minor style refactors on multiline statements",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 74,
        "deletions": 83,
        "changed_files": 1,
        "created_at": "2021-06-28T11:35:16Z",
        "closed_at": "2021-06-28T16:24:12Z",
        "merged_at": "2021-06-28T16:24:12Z",
        "body": "this PR refactors the test methods in https://github.com/localstack/localstack/blob/master/tests/integration/test_error_injection.py  into a unittest.TestCase class.\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 7,
        "deletions": 10,
        "changed_files": 1,
        "created_at": "2021-06-28T11:14:11Z",
        "closed_at": "2021-06-28T14:53:33Z",
        "merged_at": "2021-06-28T14:53:33Z",
        "body": "Changes terraform version check to a regex match.\r\n\r\n`terraform -version` can also show out-of-date notices like this:\r\n\r\n```\r\nYour version of Terraform is out of date! The latest version\r\nis 1.0.1. You can update by downloading from https://www.terraform.io/downloads.html\r\nTerraform v0.13.0\r\n```\r\n\r\nThis PR matches directly to the version string, so the check passes even when terraform displays this message.",
        "comments": 3
    },
    {
        "merged": false,
        "additions": 34,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2021-06-27T15:27:19Z",
        "closed_at": "2021-11-09T10:24:25Z",
        "merged_at": null,
        "body": "This adds a circleci workflow/job to build the docker-base image",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 12,
        "deletions": 8,
        "changed_files": 6,
        "created_at": "2021-06-27T11:01:54Z",
        "closed_at": "2021-06-27T12:11:05Z",
        "merged_at": "2021-06-27T12:11:05Z",
        "body": "This PR fixes a couple of deprecation warnings of using `imp` and `getargspec`.",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 87,
        "deletions": 8,
        "changed_files": 3,
        "created_at": "2021-06-26T20:23:45Z",
        "closed_at": "2021-06-27T09:29:14Z",
        "merged_at": "2021-06-27T09:29:14Z",
        "body": "Resolves issue #4126\r\n\r\n- added tests (and did some refactoring)\r\n- note: **I seem to have added the first PEP 484 type annotations in Localstack;** is there any reason the rest of the codebase doesn't really use it?",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 20,
        "deletions": 18,
        "changed_files": 1,
        "created_at": "2021-06-26T19:01:59Z",
        "closed_at": "2021-06-27T19:48:39Z",
        "merged_at": "2021-06-27T19:48:38Z",
        "body": "Fix event details\r\nhttps://github.com/localstack/localstack/issues/4198",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 12,
        "deletions": 5,
        "changed_files": 1,
        "created_at": "2021-06-26T10:17:31Z",
        "closed_at": "2021-06-26T12:22:02Z",
        "merged_at": "2021-06-26T12:22:02Z",
        "body": "Fixes #4208 ",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 55,
        "deletions": 40,
        "changed_files": 2,
        "created_at": "2021-06-25T18:35:25Z",
        "closed_at": "2021-11-29T11:15:18Z",
        "merged_at": null,
        "body": "**Issue**\r\n- #4160 \r\n\r\n**Updated**\r\n- Skip validation was not skipping expiration time in s3 presigned url",
        "comments": 5
    },
    {
        "merged": true,
        "additions": 27,
        "deletions": 8,
        "changed_files": 6,
        "created_at": "2021-06-25T14:18:36Z",
        "closed_at": "2021-06-28T15:17:03Z",
        "merged_at": "2021-06-28T15:17:03Z",
        "body": "fixes #4200 ",
        "comments": 5
    },
    {
        "merged": true,
        "additions": 306,
        "deletions": 179,
        "changed_files": 23,
        "created_at": "2021-06-23T19:01:23Z",
        "closed_at": "2021-06-27T10:24:34Z",
        "merged_at": "2021-06-27T10:24:34Z",
        "body": "This PR builds on #4008 and adds a more elaborate starting procedure that we also use in https://github.com/localstack/localstack-terraform-test (i added documentation).\r\n\r\nother changes:\r\n* some deprecation warnings in tests\r\n* added a check in the TestTerraform integration test that will skip the test if the terraform command fails\r\n* add pytest plugin that can re-run failed integration tests",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2021-06-23T14:32:18Z",
        "closed_at": "2021-06-23T15:46:56Z",
        "merged_at": "2021-06-23T15:46:55Z",
        "body": "An [issue](https://github.com/etspaceman/kinesis-mock/issues/128) was raised in Kinesis Mock in which M1 Macbooks were getting a segfault. This is due to the binary file for MacOS being compiled for AMD64.\r\n\r\nThis PR will detect ARM machines and ensure that they fallback to the JAR file. \r\n\r\nUnfortunately Kinesis Mock will not be able to build M1 compliant binary executables until GitHub Actions supports a virtual environment for this, as GraalVM requires this for linking the libraries properly:\r\n\r\nhttps://github.com/actions/virtual-environments/issues/2187\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 18,
        "deletions": 5,
        "changed_files": 3,
        "created_at": "2021-06-22T14:52:30Z",
        "closed_at": "2021-06-22T16:56:58Z",
        "merged_at": "2021-06-22T16:56:58Z",
        "body": "Adds a KINESIS_INITIALIZE_STREAMS environment variable, which allows kinesis-mock to be initialized with streams that are already created. This is a common pattern for a lot of users, so it makes sense to add here.\r\n",
        "comments": 3
    },
    {
        "merged": false,
        "additions": 116,
        "deletions": 33,
        "changed_files": 3,
        "created_at": "2021-06-22T12:21:46Z",
        "closed_at": "2021-12-26T18:16:21Z",
        "merged_at": null,
        "body": "Note that this is _very_ draft and Work-in-Progress.\r\n\r\nI've only verified this with a Java 8 Lambda, and have not updated any of the local tests.\r\n\r\nThis does, however, allow for some early feedback on the approach (albeit not very clean right now).\r\n\r\nCloses #4123",
        "comments": 15
    },
    {
        "merged": true,
        "additions": 92,
        "deletions": 21,
        "changed_files": 2,
        "created_at": "2021-06-20T22:04:07Z",
        "closed_at": "2021-06-21T00:09:21Z",
        "merged_at": "2021-06-21T00:09:21Z",
        "body": "* Add support for API Gateway client certificates (covered by TF integration tests)\r\n* Minor refactoring to eliminate duplicate `PATH_REGEX_*` constants",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 3,
        "changed_files": 1,
        "created_at": "2021-06-20T15:14:23Z",
        "closed_at": "2021-06-20T16:20:37Z",
        "merged_at": "2021-06-20T16:20:37Z",
        "body": "Fix per https://github.com/localstack/localstack/pull/4175\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 86,
        "deletions": 46,
        "changed_files": 2,
        "created_at": "2021-06-20T14:47:11Z",
        "closed_at": "2021-06-20T17:25:56Z",
        "merged_at": "2021-06-20T17:25:56Z",
        "body": "This PR moves the install procedure of kinesis-mock from `kinesis_starter.py` into `installs.py` and makes it a bit more robust.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 67,
        "deletions": 21,
        "changed_files": 4,
        "created_at": "2021-06-20T13:34:45Z",
        "closed_at": "2021-06-20T17:36:24Z",
        "merged_at": "2021-06-20T17:36:24Z",
        "body": "Fix API GW imports from OpenAPI specs, minor fixes for TF compatibility",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 204,
        "deletions": 65,
        "changed_files": 4,
        "created_at": "2021-06-19T21:41:48Z",
        "closed_at": "2021-06-20T21:12:38Z",
        "merged_at": "2021-06-20T21:12:38Z",
        "body": "This PR fixes the issue described in https://github.com/localstack/localstack-terraform-test/issues/7\r\n\r\nOverview:\r\n\r\n* refactored parts of `s3_listener.py` related to the put/get notification handling\r\n* changed the put-bucket-notification behavior to make the filter rule names title case (like AWS does)\r\n* added a `_validate_filter_rules` method that throws an exception when it finds filter rules names that aren't allowed (only `suffix` and `prefix` are allowed\r\n* added exception handling in `generic_proxy.py` that renders an `HTTPException` into a `requests.Response` object (this depends on the latest moto-ext changes)\r\n\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 185,
        "deletions": 43,
        "changed_files": 8,
        "created_at": "2021-06-19T14:45:56Z",
        "closed_at": "2021-06-24T22:55:16Z",
        "merged_at": "2021-06-24T22:55:15Z",
        "body": "this PR will create a more streamlined circleci workflow as per #4169. just opened it so i can start running builds \r\n\r\nthings left to do:\r\n\r\n- [x] get integration tests to work\r\n- [x] hand docker image downstream to docker-push job\r\n- [x] extract test report from docker build with [custom build outputs](https://docs.docker.com/engine/reference/commandline/build/#custom-build-outputs)\r\n- (postponed) aggregate coverage data\r\n- (postponed)  use pip cache with pyenv as per circleci documentation\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 95,
        "deletions": 1,
        "changed_files": 4,
        "created_at": "2021-06-18T19:51:34Z",
        "closed_at": "2021-06-19T12:00:49Z",
        "merged_at": "2021-06-19T12:00:49Z",
        "body": "Pull request fixes error with cloud formation, when creating a apigateway-s3 integration.\r\nIt also adds preliminary support for apigateway-s3 integration for GET requests.\r\n\r\nFixes #4062 .",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 98,
        "deletions": 35,
        "changed_files": 8,
        "created_at": "2021-06-18T14:14:35Z",
        "closed_at": "2021-06-19T17:55:56Z",
        "merged_at": "2021-06-19T17:55:56Z",
        "body": "This PR fixes an issue in common.mktime where the unixtime would be calculated from GMT rather than the timezone of the datetime object being passed. i also simplified the calculation of millseconds unixtime, based on [this stackoverflow post](https://stackoverflow.com/a/8160307/804840)\r\n\r\nthis was apparently the root cause for issues surrounding expiry calculations, for example `is_url_already_expired` in `s3_listener.py`\r\n\r\n/cc @macnev2013 ",
        "comments": 7
    },
    {
        "merged": false,
        "additions": 0,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2021-06-17T17:51:53Z",
        "closed_at": "2021-06-18T09:53:28Z",
        "merged_at": null,
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 31,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2021-06-16T16:30:13Z",
        "closed_at": "2021-06-27T09:33:03Z",
        "merged_at": "2021-06-27T09:33:03Z",
        "body": "**Issues**\r\n- [4133](https://github.com/localstack/localstack/issues/4133)\r\n\r\n**Added**\r\n- Added support for custom headers in s3",
        "comments": 5
    },
    {
        "merged": true,
        "additions": 68,
        "deletions": 41,
        "changed_files": 5,
        "created_at": "2021-06-16T09:51:31Z",
        "closed_at": "2021-06-16T11:49:58Z",
        "merged_at": "2021-06-16T11:49:58Z",
        "body": "This PR refactors the shutdown procedure and allows a shutdown without a call to `exit`\r\n\r\nThe major changes are:\r\n* a dedicated `wait_for_infra_shutdown` method that was extracted from `check_infra` and now waits in parallel for services to shut down\r\n* a flag `FORCE_SHUTDOWN` that is true per default, and circumvents `wait_for_infra_shutdown` but rather calls `sys.exit` immediately in the TERM/INT signal handler (as previously)\r\n* replaced the `sleep_forever` call in `start_infra` with a proper threading flag that now returns correctly after `stop_infra` has been called\r\n* minor related refactoring and unused code removal\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2021-06-15T19:27:29Z",
        "closed_at": "2021-06-15T22:32:53Z",
        "merged_at": "2021-06-15T22:32:53Z",
        "body": "With this PR the lambda enpoint ignores the trailing slash in the corresponding routes, so the requests with both `http://localstack:4566/2015-03-31/event-source-mappings/` or `http://localstack:4566/2015-03-31/event-source-mappings` are accepted.\r\n\r\nAddresses #4124 \r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 128,
        "deletions": 31,
        "changed_files": 8,
        "created_at": "2021-06-15T17:30:56Z",
        "closed_at": "2021-06-16T23:41:29Z",
        "merged_at": "2021-06-16T23:41:29Z",
        "body": "Add initial integration of kinesis-mock - addresses #4137.\r\n\r\nThis is only a first PoC - we still need to make a deeper evaluation of the tradeoffs regarding missing/supported features (e.g., persistence support), parity with AWS (e.g., API coverage, multi-region support, etc), and performance (e.g., JVM vs Node.js process; disk space of the required binaries in the Docker image), to select the best default implementation option for Kinesis in the future.\r\n\r\nCreating to transfer ownership of https://github.com/localstack/localstack/pull/4139",
        "comments": 12
    },
    {
        "merged": true,
        "additions": 25,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2021-06-15T17:24:00Z",
        "closed_at": "2021-06-15T18:31:00Z",
        "merged_at": "2021-06-15T18:31:00Z",
        "body": "The lambda configuration update function did behave differently from other endpoints, and differently from AWS.\r\n\r\nThis breaks chalice-local (related to #4084).\r\n\r\nPull request adds test and aligns the endpoint with AWS and other lambda localstack endpoints.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 91,
        "deletions": 27,
        "changed_files": 2,
        "created_at": "2021-06-15T11:31:50Z",
        "closed_at": "2021-06-15T13:53:55Z",
        "merged_at": "2021-06-15T13:53:55Z",
        "body": "Fix passing payload via stdin for large Lambda events using docker-reuse",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2021-06-14T21:36:22Z",
        "closed_at": "2021-06-19T12:00:04Z",
        "merged_at": "2021-06-19T12:00:04Z",
        "body": "As of the 2.0.9 release of moto (2.0.3.23 of moto-ext) the intended way of modifying the default key buffer size is via the  `MOTO_S3_DEFAULT_KEY_BUFFER_SIZE` environment variable, see https://github.com/spulec/moto/pull/4001 for all the details.\r\n\r\nMoreover the current setting for the default key buffer size in both moto and localstack is problematic since it is potentially larger than the upload size, causing the entire object to be held in memory. This is especially problematic for large files which are typically uploaded via multi part uploads. This is going to be fixed in the next minor release of moto, see https://github.com/spulec/moto/pull/4003. \r\n\r\nI believe this is the cause for the issue that has been re-raised here:\r\nhttps://github.com/localstack/localstack/issues/682\r\n\r\nImo for localstack I think it makes sense to lower the value of `MOTO_S3_DEFAULT_KEY_BUFFER_SIZE` to something very small (like 1 KB), to avoid in memory caching of s3 objects (which looks like a memory leak). If users need the higher performance from the in memory caching they can set the `MOTO_S3_DEFAULT_KEY_BUFFER_SIZE` environment variable to a larger value. But I am also happy to adjust the default to a larger value if that's preferred. \r\n\r\nAlso related:\r\nhttps://github.com/localstack/localstack/pull/1951",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 16,
        "deletions": 12,
        "changed_files": 5,
        "created_at": "2021-06-13T18:56:01Z",
        "closed_at": "2021-06-14T18:25:53Z",
        "merged_at": "2021-06-14T18:25:53Z",
        "body": "Adding another environment variable to the config so users can specify the bucket name when mounting local files to lambdas. CDK/Cloudformation cannot deploy local resources successfully when the only available S3 bucket name is `__local__`. This change allows people to use a bucket name like `local` instead.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2021-06-12T15:52:46Z",
        "closed_at": "2021-06-13T09:23:19Z",
        "merged_at": "2021-06-13T09:23:19Z",
        "body": "**Fixed**\r\n- added support for x-id parameter for delete object\r\n(Required in golang sdk v2)\r\n\r\n**Issues**\r\n- [4015](https://github.com/localstack/localstack/issues/4015)\r\n- [3931](https://github.com/localstack/localstack/issues/3931)",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 35,
        "deletions": 4,
        "changed_files": 1,
        "created_at": "2021-06-12T15:01:54Z",
        "closed_at": "2021-06-19T13:38:27Z",
        "merged_at": null,
        "body": "Add initial integration of `kinesis-mock` - addresses #4137. \r\n\r\nThis is only a first PoC - we still need to make a deeper evaluation of the tradeoffs regarding missing/supported features (e.g., persistence support), parity with AWS (e.g., API coverage, multi-region support, etc), and performance (e.g., JVM vs Node.js process; disk space of the required binaries in the Docker image), to select the best default implementation option for Kinesis in the future.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 13,
        "deletions": 11,
        "changed_files": 3,
        "created_at": "2021-06-10T19:41:53Z",
        "closed_at": "2021-06-15T11:42:23Z",
        "merged_at": "2021-06-15T11:42:23Z",
        "body": "Addresses #4061 \r\nRemoved the redundant headers \r\nExtended an integration test to verify the correct behavior\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 52,
        "deletions": 20,
        "changed_files": 3,
        "created_at": "2021-06-09T08:00:11Z",
        "closed_at": "2021-06-09T09:35:05Z",
        "merged_at": "2021-06-09T09:35:05Z",
        "body": "Switch to --env-file to pass env vars to Lambda containers; add fix for missing pip packages in Dockerfile",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 8,
        "deletions": 3,
        "changed_files": 2,
        "created_at": "2021-06-09T04:58:05Z",
        "closed_at": "2021-06-09T13:44:58Z",
        "merged_at": "2021-06-09T13:44:58Z",
        "body": "# Changes\r\n- based off https://github.com/localstack/localstack/issues/4120\r\n\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2021-06-07T13:27:54Z",
        "closed_at": "2021-06-07T17:53:56Z",
        "merged_at": "2021-06-07T17:53:56Z",
        "body": "Due to changes in https://github.com/localstack/localstack/commit/3fe01cf6699a4fb71153b582715b4ec21560e4e1 `S3_SKIP_SIGNATURE_VALIDATION` flag is not working anymore, here is the proposed fix\r\n\r\n**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 5,
        "deletions": 5,
        "changed_files": 2,
        "created_at": "2021-06-07T11:22:36Z",
        "closed_at": "2021-06-07T12:59:58Z",
        "merged_at": "2021-06-07T12:59:57Z",
        "body": "Fixes #4108 where devs can't use the internal `awslocal` command line as the `localstack_client` library is missing, a temporary workaround for this is to just install it beforehand as specified [here](https://github.com/localstack/localstack/issues/4108#issuecomment-855826709).\r\n\r\nOne guess is that the `localstack-client` library got old in our `requirements.txt` (should be `1.20`), that is why updating it, as you can see it is not even inside the app container:\r\n\r\n```\r\n$ docker exec -ti localstack_main bash\r\nbash-5.0# pip freeze\r\nappdirs==1.4.4\r\nawscli-local==0.14\r\ncertifi==2021.5.30\r\nchardet==4.0.0\r\ncolorama==0.4.3\r\ndistlib==0.3.2\r\ndocutils==0.15.2\r\nfilelock==3.0.12\r\nimportlib-metadata==4.5.0\r\njmespath==0.10.0\r\npyasn1==0.4.8\r\npython-dateutil==2.8.1\r\nPyYAML==5.4.1\r\nrequests==2.25.1\r\nrsa==4.7.2\r\nsix==1.16.0\r\nsupervisor==4.2.2\r\ntyping-extensions==3.10.0.0\r\nurllib3==1.26.5\r\nvirtualenv==20.4.7\r\nzipp==3.4.1\r\n```",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2021-06-07T02:25:55Z",
        "closed_at": "2021-06-08T06:19:31Z",
        "merged_at": "2021-06-08T06:19:31Z",
        "body": "Fixes #4079 where datetime format on `aws lambda put-function-event-invoke-config`, previous it was:\r\n`2021-05-28T16:02:30.018Z`\r\n\r\nNow:\r\n`2021-06-07T02:21:46.871370+00:00`\r\n\r\nAs it is a very specific fix, I am just adding it to lambda, but if you think it is worth adding it to utils/common let me know.\r\n\r\n```\r\n$ awslocal lambda put-function-event-invoke-config --function-name SampleFunction --maximum-event-age-in-seconds 3600 --maximum-retry-attempts 0\r\n{\r\n    \"LastModified\": \"2021-06-07T02:21:46.871370+00:00\",\r\n    \"FunctionArn\": \"arn:aws:lambda:us-east-1:000000000000:function:SampleFunction\",\r\n    \"MaximumRetryAttempts\": 0,\r\n    \"MaximumEventAgeInSeconds\": 3600,\r\n    \"DestinationConfig\": {\r\n        \"OnSuccess\": {\r\n            \"Destination\": \"None\"\r\n        },\r\n        \"OnFailure\": {\r\n            \"Destination\": \"None\"\r\n        }\r\n    }\r\n}\r\n```",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 0,
        "deletions": 3,
        "changed_files": 1,
        "created_at": "2021-06-06T14:51:23Z",
        "closed_at": "2021-06-06T17:10:56Z",
        "merged_at": "2021-06-06T17:10:56Z",
        "body": "- cleaning up unused code",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 10,
        "deletions": 6,
        "changed_files": 2,
        "created_at": "2021-06-06T12:37:16Z",
        "closed_at": "2021-06-06T16:46:51Z",
        "merged_at": "2021-06-06T16:46:51Z",
        "body": "**Fixed**\r\n- Response message fixed for deleting a non existing bucket\r\n\r\n**Referenced Issues**\r\n- #3316 \r\n\r\n**PR**\r\n- [3321](https://github.com/localstack/localstack/pull/3321)",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 142,
        "deletions": 124,
        "changed_files": 1,
        "created_at": "2021-06-06T07:42:02Z",
        "closed_at": "2021-06-06T18:07:55Z",
        "merged_at": "2021-06-06T18:07:55Z",
        "body": "(Re-creating PR #4101 to trigger PR build.)\r\n\r\n> With this PR the SNS service delivers the messages to the subscribers of a topic in an async way.\r\n> Addresses #3670",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 142,
        "deletions": 124,
        "changed_files": 1,
        "created_at": "2021-06-03T20:37:18Z",
        "closed_at": "2021-06-06T07:40:27Z",
        "merged_at": null,
        "body": "With this PR the SNS service delivers the messages to the subscribers of a topic in an async way.\r\n\r\nAddresses #3670 \r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 68,
        "deletions": 14,
        "changed_files": 6,
        "created_at": "2021-06-03T13:21:27Z",
        "closed_at": "2021-06-04T09:37:24Z",
        "merged_at": "2021-06-04T09:37:24Z",
        "body": "When using loclstack for development an even for easier integration/local testing\r\nof interaction with AWS services, a feature is missing to check if an e-mail\r\nwas sent correctly.\r\n\r\nIssue #2514 was closed with a patch that dumped the e-mail contents to the\r\nlog output. However, in most cases, this is not reliably useable for testing,\r\nas it would require to parse the log-stream of localstack.\r\n\r\nThis commit now adds a feature where a sent e-mail is persisted to the local\r\nfile system. It re-uses the specified data directory (DATA_DIR) and falls back\r\nto the temp directory to save e-mails into an `ses` subdirectory. Each\r\nsuccessfully sent message is saved in a JSON file named after the message ID.\r\nThe contents are the Source, Subject, Body, Destinations (To, CCs, BCCs) as\r\nwell as the region.\r\n\r\nCo-Authored-By: Arne Wohlert <arne.wohlert@oss.volkswagen.com>",
        "comments": 5
    },
    {
        "merged": true,
        "additions": 78,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2021-06-02T19:47:07Z",
        "closed_at": "2021-06-05T08:51:33Z",
        "merged_at": "2021-06-05T08:51:33Z",
        "body": "**Added:**\r\n- GetBucketRequestPayment\r\n- PutBucketRequestPayment\r\n\r\n**Property**\r\n- Payer: valid values - 'Requester'|'BucketOwner'\r\n\r\n**Related Issue**\r\n- #4071 ",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 48,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2021-06-02T02:37:52Z",
        "closed_at": "2021-06-03T17:59:00Z",
        "merged_at": "2021-06-03T17:58:59Z",
        "body": "Fix #4038 and fix #4048",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2021-05-29T17:15:37Z",
        "closed_at": "2021-05-30T10:22:05Z",
        "merged_at": "2021-05-30T10:22:05Z",
        "body": "**Fixed**\r\n- Considering edge port instead of hardcoded port 4566 in presign url calculation",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 19,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2021-05-29T16:13:52Z",
        "closed_at": "2021-05-30T10:20:13Z",
        "merged_at": "2021-05-30T10:20:13Z",
        "body": "**Added**\r\n- Added test case for bucket with existing name\r\n- When creating bucket in default region it will not throw any excption\r\n- if creating bucket in non default region it witl throw  exception as `BucketAlreadyExsists`\r\n\r\n**Issues**\r\n- [ISSUE - 3540](https://github.com/localstack/localstack/issues/3540)\r\n- [PR - 3570](https://github.com/localstack/localstack/pull/3570)",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 31,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2021-05-29T14:41:10Z",
        "closed_at": "2021-05-30T09:33:03Z",
        "merged_at": "2021-05-30T09:33:02Z",
        "body": "**Fixed**\r\n- [3971](https://github.com/localstack/localstack/issues/3971)\r\n- [3972](https://github.com/localstack/localstack/issues/3972)\r\n\r\n**Added**\r\n- Added support for AWS_SESSION_TOKEN (support for `X-Amz-Security-Token` in presigned url)",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 57,
        "deletions": 14,
        "changed_files": 2,
        "created_at": "2021-05-27T19:48:32Z",
        "closed_at": "2021-05-28T17:03:21Z",
        "merged_at": "2021-05-28T17:03:20Z",
        "body": "**Added**\r\n- Added multiple presigned url calculations with different port combination to add more flexibility.\r\n ",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 6,
        "deletions": 4,
        "changed_files": 3,
        "created_at": "2021-05-27T09:12:23Z",
        "closed_at": "2021-05-27T20:34:21Z",
        "merged_at": "2021-05-27T20:34:21Z",
        "body": "Fixes #4073 as we are not currently supporting ruby 2.7 image. Tested locally with a sample handler and looking good.\r\nAlso moving tests to support 2.7 by default as per [AWS Runtime Policy](https://docs.aws.amazon.com/lambda/latest/dg/runtime-support-policy.html) ruby 2.5 EOL starts in ~2mo (July 30, 2021).\r\n\r\n```\r\nrequire 'json'\r\n\r\ndef handler(event:, context:)\r\n    { event: JSON.generate(event), context: JSON.generate(context.inspect) }\r\nend\r\n```",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 45,
        "deletions": 5,
        "changed_files": 8,
        "created_at": "2021-05-24T21:22:24Z",
        "closed_at": "2021-06-02T09:05:14Z",
        "merged_at": "2021-06-02T09:05:14Z",
        "body": "This PR adds the debugpy library to Localstack.\r\nIt provides more insight while debugging a running Localstack container.\r\n\r\nTo start the debugpy server the env variable DEVELOP must be true.\r\nAlso there are other env vars to setup debugpy explained in the README file.\r\n\r\n",
        "comments": 5
    },
    {
        "merged": true,
        "additions": 79,
        "deletions": 11,
        "changed_files": 7,
        "created_at": "2021-05-21T23:08:10Z",
        "closed_at": "2021-06-07T21:20:41Z",
        "merged_at": "2021-06-07T21:20:41Z",
        "body": "Addresses #3448 \r\nModified the moto patch `apigateway_response_resource_methods()` .\r\nFixed requestparameters for method integration in apigateway `service_models.py`.\r\nModified the existing integration test to cover the added functionality.\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 7,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2021-05-21T16:52:09Z",
        "closed_at": "2021-05-23T21:29:53Z",
        "merged_at": "2021-05-23T21:29:53Z",
        "body": "When an SQS message is using an HTTP endpoint, return an UnsubscribeURL on every message.\r\n\r\n**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2021-05-20T08:02:08Z",
        "closed_at": "2021-05-23T21:31:53Z",
        "merged_at": "2021-05-23T21:31:53Z",
        "body": "When using SES service from an AWS Client, the `api` is not identified by the `ProxyListenerEdge`, because in the Authorization headers it's marked as `email`.\r\n# Request\r\n```\r\nlocalstack_main     | 2021-05-20T06:33:34:DEBUG:localstack.services.edge: IN(email): \"POST /\" - headers: {'Remote-Addr': '172.20.0.1', 'Accept-Encoding': 'gzip', 'Content-Length': '114147', 'Host': 'localhost', 'X-Amz-Date': '20210520T063334Z', 'X-Amz-Content-Sha256': 'a9c08cd9d528688a2d0557ed0337db1c8ed719b5019c1920bb928fd7f286aa36', 'Content-Type': 'application/x-www-form-urlencoded; charset=utf-8', 'Authorization': 'AWS4-HMAC-SHA256 Credential=AKIAJQZL3AQH4K743T7A/20210520/eu-central-1/email/aws4_request, SignedHeaders=content-type;host;x-amz-content-sha256;x-amz-date, Signature=3a11e8a2698f9310435a6f6f3c0579ef3abcc7ec31c45c7fe85588f24f08b918', 'X-Forwarded-For': '172.20.0.1, localhost', 'x-localstack-edge': 'http://localhost'} - data: b'Action=SendRawEmail&RawMessage.Data=RnJvbTogPT91dGYtOD9RP2tvcHBscj89IDxoZWxsb0Brb3BwbHIuY29tP.....\r\n```\r\n# Stacktrace\r\n```\r\nlocalstack_main     | 2021-05-20T06:33:34:WARNING:localstack.services.edge: Unable to find listener for service \"email\" - please make sure to include it in $SERVICES\r\nlocalstack_main     | 2021-05-20T06:33:34:WARNING:bootstrap.py: Thread run method <function AdaptiveThreadPool.submit.<locals>._run at 0x7efd175ff160>(None) failed: Unable to find listener for service \"email\" - please make sure to include it in $SERVICES Traceback (most recent call last):\r\nlocalstack_main     |   File \"/opt/code/localstack/localstack/utils/bootstrap.py\", line 689, in run\r\nlocalstack_main     |     result = self.func(self.params)\r\nlocalstack_main     |   File \"/opt/code/localstack/localstack/utils/async_utils.py\", line 28, in _run\r\nlocalstack_main     |     return fn(*args, **kwargs)\r\nlocalstack_main     |   File \"/opt/code/localstack/localstack/services/generic_proxy.py\", line 364, in handler\r\nlocalstack_main     |     response = modify_and_forward(method=method, path=path_with_params, data_bytes=data, headers=headers,\r\nlocalstack_main     |   File \"/opt/code/localstack/localstack/services/generic_proxy.py\", line 183, in modify_and_forward\r\nlocalstack_main     |     listener_result = listener.forward_request(method=method,\r\nlocalstack_main     |   File \"/opt/code/localstack/localstack/services/edge.py\", line 122, in forward_request\r\nlocalstack_main     |     return do_forward_request(api, method, path, data, headers, port=port)\r\nlocalstack_main     |   File \"/opt/code/localstack/localstack/services/edge.py\", line 143, in do_forward_request\r\nlocalstack_main     |     result = do_forward_request_inmem(api, method, path, data, headers, port=port)\r\nlocalstack_main     |   File \"/opt/code/localstack/localstack/services/edge.py\", line 157, in do_forward_request_inmem\r\nlocalstack_main     |     raise HTTPErrorResponse(message, code=400)\r\nlocalstack_main     | localstack.utils.server.http2_server.HTTPErrorResponse: Unable to find listener for service \"email\" - please make sure to include it in $SERVICES\r\nlocalstack_main     | \r\nlocalstack_main     | 2021-05-20T06:33:34:WARNING:localstack.utils.server.http2_server: Error in proxy handler for request POST http://localhost/: Unable to find listener for service \"email\" - please make sure to include it in $SERVICES Traceback (most recent call last):\r\nlocalstack_main     |   File \"/opt/code/localstack/localstack/utils/server/http2_server.py\", line 129, in index\r\nlocalstack_main     |     raise result\r\nlocalstack_main     |   File \"/opt/code/localstack/localstack/utils/bootstrap.py\", line 689, in run\r\nlocalstack_main     |     result = self.func(self.params)\r\nlocalstack_main     |   File \"/opt/code/localstack/localstack/utils/async_utils.py\", line 28, in _run\r\nlocalstack_main     |     return fn(*args, **kwargs)\r\nlocalstack_main     |   File \"/opt/code/localstack/localstack/services/generic_proxy.py\", line 364, in handler\r\nlocalstack_main     |     response = modify_and_forward(method=method, path=path_with_params, data_bytes=data, headers=headers,\r\nlocalstack_main     |   File \"/opt/code/localstack/localstack/services/generic_proxy.py\", line 183, in modify_and_forward\r\nlocalstack_main     |     listener_result = listener.forward_request(method=method,\r\nlocalstack_main     |   File \"/opt/code/localstack/localstack/services/edge.py\", line 122, in forward_request\r\nlocalstack_main     |     return do_forward_request(api, method, path, data, headers, port=port)\r\nlocalstack_main     |   File \"/opt/code/localstack/localstack/services/edge.py\", line 143, in do_forward_request\r\nlocalstack_main     |     result = do_forward_request_inmem(api, method, path, data, headers, port=port)\r\nlocalstack_main     |   File \"/opt/code/localstack/localstack/services/edge.py\", line 157, in do_forward_request_inmem\r\nlocalstack_main     |     raise HTTPErrorResponse(message, code=400)\r\nlocalstack_main     | localstack.utils.server.http2_server.HTTPErrorResponse: Unable to find listener for service \"email\" - please make sure to include it in $SERVICES\r\nlocalstack_main     | \r\n\r\n```",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 290,
        "deletions": 1,
        "changed_files": 5,
        "created_at": "2021-05-19T02:21:42Z",
        "closed_at": "2021-05-20T18:04:15Z",
        "merged_at": "2021-05-20T18:04:15Z",
        "body": "As some of our customers have been asking (#3534, #4023, #4041) it would be nice to add some documentation on how to integrate some external services to localstack, These guides aim to achieve this.",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 45,
        "deletions": 1,
        "changed_files": 3,
        "created_at": "2021-05-18T20:18:28Z",
        "closed_at": "2021-06-03T17:59:00Z",
        "merged_at": null,
        "body": "Fix kinesis streaming destinations",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 76,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2021-05-17T21:05:43Z",
        "closed_at": "2021-06-01T22:27:28Z",
        "merged_at": null,
        "body": "With this patch the moto SQS backend stops that weird behaviour about not sending the messages of a queue in certain conditions.\r\n\r\nAddresses #3766 and requires spulec/moto#3924",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 5,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2021-05-17T16:47:03Z",
        "closed_at": "2021-05-17T23:29:50Z",
        "merged_at": null,
        "body": "Fixes #3935 . Detailed explanation is [here](https://github.com/localstack/localstack/issues/3935#issuecomment-829084959)",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 80,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2021-05-16T16:58:56Z",
        "closed_at": "2021-05-16T18:50:07Z",
        "merged_at": "2021-05-16T18:50:07Z",
        "body": "**Added**\r\n- Test case to generate presigned url in nodejs sdk with async library\r\n- Test case for x-id headers",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2021-05-16T12:54:38Z",
        "closed_at": "2021-05-17T15:35:01Z",
        "merged_at": "2021-05-17T15:35:01Z",
        "body": "* fix to use latest released version of docker-compose\r\n~~* delete unnecessary port in ports block~~",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 8,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2021-05-15T12:45:09Z",
        "closed_at": "2021-05-15T14:56:34Z",
        "merged_at": "2021-05-15T14:56:34Z",
        "body": "This fixes https://github.com/localstack/localstack/issues/4010\r\n\r\n\r\n",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 34,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2021-05-14T19:13:03Z",
        "closed_at": "2021-05-15T19:38:17Z",
        "merged_at": "2021-05-15T19:38:17Z",
        "body": "Fix Error code in get sns attributes",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 51,
        "deletions": 14,
        "changed_files": 2,
        "created_at": "2021-05-14T18:24:31Z",
        "closed_at": "2021-05-16T19:34:51Z",
        "merged_at": "2021-05-16T19:34:50Z",
        "body": "Fixes #4023, adding ES cluster config option and leaving defaults out.",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 106,
        "deletions": 59,
        "changed_files": 3,
        "created_at": "2021-05-14T16:31:12Z",
        "closed_at": "2021-05-15T20:12:29Z",
        "merged_at": "2021-05-15T20:12:29Z",
        "body": "Addresses #4009 \r\nAdded : Patch for moto SNS create platform endpoint\r\nRefactored API logic to use SNSBackend class to keep track of state instead of global variables.\r\nRefactored SNS integration test to use SNSBackend class instead of global variables\r\n",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 35,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2021-05-14T08:56:32Z",
        "closed_at": "2021-05-14T19:11:40Z",
        "merged_at": null,
        "body": "Fix Error code in get sns attributes\r\n\r\ncloses https://github.com/localstack/localstack/issues/4022",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 30,
        "deletions": 4,
        "changed_files": 3,
        "created_at": "2021-05-13T21:50:36Z",
        "closed_at": "2021-05-20T21:07:28Z",
        "merged_at": "2021-05-20T21:07:28Z",
        "body": "Fix:secret ARN fix\r\nAddresses #4014",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 9,
        "deletions": 5,
        "changed_files": 2,
        "created_at": "2021-05-13T18:55:19Z",
        "closed_at": "2021-05-13T20:06:32Z",
        "merged_at": "2021-05-13T20:06:32Z",
        "body": "Added:\r\n- Remove url parsing for Quart update\r\n- Appending query params to request object in presign url\r\n- Enabled the test case",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 91,
        "deletions": 24,
        "changed_files": 9,
        "created_at": "2021-05-12T13:35:46Z",
        "closed_at": "2021-06-23T18:54:44Z",
        "merged_at": null,
        "body": "Fixes #4007 ",
        "comments": 9
    },
    {
        "merged": true,
        "additions": 21,
        "deletions": 9,
        "changed_files": 1,
        "created_at": "2021-05-11T21:58:15Z",
        "closed_at": "2021-05-13T12:03:39Z",
        "merged_at": "2021-05-13T12:03:39Z",
        "body": "## Summary\r\n\r\nThis is a temporary fix for https://github.com/localstack/localstack/issues/3924 until Mock integrations are implemented for ApiGateway.\r\n\r\n## Issue Summary\r\n\r\nFor lambda responses some of the headers may be written to [multiValueHeaders](https://docs.aws.amazon.com/elasticloadbalancing/latest/application/lambda-functions.html#multi-value-headers). Since we are not checking if some of them are already there, they are written again in regular `headers` which results in duplicated headers sent to users (default one + one from lambda).\r\n\r\n## Open questions\r\n\r\nIs it fine to reset `multiValueHeaders` from the response, or it's critical to preserve it?",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 37,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2021-05-11T19:26:22Z",
        "closed_at": "2021-05-12T20:21:17Z",
        "merged_at": "2021-05-12T20:21:17Z",
        "body": "**Fixed**\r\n- Copied object from multipart upload should have different tag\r\n\r\n**Issues**\r\n- [3729](https://github.com/localstack/localstack/issues/3729)",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 0,
        "deletions": 0,
        "changed_files": 0,
        "created_at": "2021-05-11T18:14:02Z",
        "closed_at": "2021-05-13T18:49:57Z",
        "merged_at": null,
        "body": "**Added**\r\n- Appending query params to request object in presign url",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 48,
        "deletions": 9,
        "changed_files": 1,
        "created_at": "2021-05-11T14:58:13Z",
        "closed_at": "2021-05-13T11:11:57Z",
        "merged_at": "2021-05-13T11:11:57Z",
        "body": "Addresses #3981 \r\nAdded : Feature to send message attributes to DLQ (along with custom message attributes)\r\nAdded : Usage of send_message_batch to improve performance \r\n\r\n",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 4,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2021-05-10T18:48:13Z",
        "closed_at": "2022-01-03T22:05:26Z",
        "merged_at": null,
        "body": "Fix : Replace proxy in the URI\r\nhttps://github.com/localstack/localstack/issues/3985",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 3,
        "changed_files": 1,
        "created_at": "2021-05-09T09:56:34Z",
        "closed_at": "2021-05-10T22:10:28Z",
        "merged_at": "2021-05-10T22:10:28Z",
        "body": "Issue fixed:\r\n#3833 S3 Content-Length issue with AWS Go SDK",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2021-05-08T05:04:30Z",
        "closed_at": "2021-05-08T08:37:08Z",
        "merged_at": "2021-05-08T08:37:08Z",
        "body": "Fixes #3988 ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 89,
        "deletions": 0,
        "changed_files": 6,
        "created_at": "2021-05-06T21:30:21Z",
        "closed_at": "2021-05-08T08:39:32Z",
        "merged_at": "2021-05-08T08:39:32Z",
        "body": "Added support for resource -groups\r\nhttps://github.com/localstack/localstack/issues/3979",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 8,
        "deletions": 3,
        "changed_files": 1,
        "created_at": "2021-05-06T16:01:18Z",
        "closed_at": "2021-05-06T20:56:03Z",
        "merged_at": "2021-05-06T20:56:03Z",
        "body": "There are some situations where the decoding of a JSON kinesis get-records response returns the data in a bytearray object but stills need to be send as a base64 encoded string.\r\n\r\nThis PR makes sure that the kinesis get-records tests from localstack-java-utils pass without problem in both JSON and CBOR encoding.\r\n\r\nI tested it with:\r\n- cloud.localstack.KinesisConsumerTest\r\n- cloud.localstack.awssdkv2.KinesisV2ConsumerTest\r\n- cloud.localstack.awssdkv2.KinesisSchedulerTest",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 63,
        "deletions": 0,
        "changed_files": 6,
        "created_at": "2021-05-05T21:06:53Z",
        "closed_at": "2021-05-06T06:57:16Z",
        "merged_at": "2021-05-06T06:57:15Z",
        "body": "Fix : Added support for resourcegroupstaggingapi \r\nhttps://github.com/localstack/localstack/issues/3962",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 32,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2021-05-05T19:17:47Z",
        "closed_at": "2021-05-06T07:57:54Z",
        "merged_at": "2021-05-06T07:57:53Z",
        "body": "Fix:Dynamodb-Empty response on no unprocessed items\r\nhttps://github.com/localstack/localstack/issues/3968",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 57,
        "deletions": 40,
        "changed_files": 5,
        "created_at": "2021-05-05T10:02:56Z",
        "closed_at": "2021-05-05T11:37:11Z",
        "merged_at": "2021-05-05T11:37:11Z",
        "body": "Issue fixed:\r\n#3872 EventBridge trigger on localstack defaults to default event bus even though a new one is passed.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2021-05-05T07:36:34Z",
        "closed_at": "2021-05-05T14:57:42Z",
        "merged_at": "2021-05-05T14:57:42Z",
        "body": "Addresses #3964 where PATCH method is not included in `Access-Control-Allow-Methods` header\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 47,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2021-05-04T14:00:43Z",
        "closed_at": "2021-05-04T20:45:16Z",
        "merged_at": "2021-05-04T20:45:16Z",
        "body": "Addresses #3959 \r\nAdded integration test for DynamoDB batch write items\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 10,
        "deletions": 2,
        "changed_files": 3,
        "created_at": "2021-05-03T16:54:17Z",
        "closed_at": "2021-05-03T18:11:46Z",
        "merged_at": "2021-05-03T18:11:46Z",
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n\r\nThis PR adds the requestTemplates parameter to the put_integration request and fixes the render velocity template.\r\nAddresses #3777 ",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 27,
        "deletions": 19,
        "changed_files": 2,
        "created_at": "2021-05-03T11:35:32Z",
        "closed_at": "2021-05-05T09:48:55Z",
        "merged_at": "2021-05-05T09:48:55Z",
        "body": "Addresses #3954 where it is not possible to fetch Lambda function's via ARN or partial ARN. Also minor test extension.",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 12,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2021-05-01T16:26:14Z",
        "closed_at": "2021-05-01T21:41:14Z",
        "merged_at": "2021-05-01T21:41:14Z",
        "body": "**Issues**\r\n- #3713\r\n\r\n**Added**\r\n- Added support for tags in multipart upload",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 6,
        "deletions": 4,
        "changed_files": 2,
        "created_at": "2021-04-30T13:55:41Z",
        "closed_at": "2021-05-02T19:59:56Z",
        "merged_at": "2021-05-02T19:59:56Z",
        "body": "Addresses #3912 \r\n ",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 77,
        "deletions": 3,
        "changed_files": 3,
        "created_at": "2021-04-29T07:56:36Z",
        "closed_at": "2021-12-26T17:37:18Z",
        "merged_at": null,
        "body": "Addresses #3938 where `PATCH` method is not included when updating path",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 43,
        "deletions": 5,
        "changed_files": 4,
        "created_at": "2021-04-28T23:51:17Z",
        "closed_at": "2021-04-29T21:14:26Z",
        "merged_at": "2021-04-29T21:14:26Z",
        "body": "## Summary\r\n\r\nFix paths for apigw events\r\n\r\nHere are samples of real events (tested scenarios):\r\n\r\n/{proxy+}\r\n```\r\nrequest: ANY /api/v2/hello/world\r\n\r\nevent.path: /api/v2/hello/world\r\nevent.resource: /{proxy+}\r\nevent.requestContext.path: /<stage>/api/v2/hello/world\r\nevent.requestContext.resourcePath: /{proxy+}\r\n```\r\n\r\n/api/v2/{proxy+}\r\n```\r\nrequest: ANY /api/v2/hello/world\r\n\r\nevent.path: /api/v2/hello/world\r\nevent.resource: /api/v2/{proxy+}\r\nevent.requestContext.path: /<stage>/api/v2/hello/world\r\nevent.requestContext.resourcePath:  /api/v2/{proxy+}\r\n```\r\n\r\n/api/v2/hello/world (no proxy)\r\n```\r\nrequest: ANY /api/v2/hello/world\r\n\r\nevent.path: /api/v2/hello/world\r\nevent.resource: /api/v2/hello/world\r\nevent.requestContext.path: /<stage>/api/v2/hello/world\r\nevent.requestContext.resourcePath: /api/v2/hello/world\r\n```\r\n\r\nRelated issue: https://github.com/localstack/localstack/issues/3923",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 28,
        "deletions": 3,
        "changed_files": 3,
        "created_at": "2021-04-27T22:44:07Z",
        "closed_at": "2021-04-28T11:33:02Z",
        "merged_at": "2021-04-28T11:33:02Z",
        "body": "## Summary\r\n\r\nAs reported by @arciisine in https://github.com/localstack/localstack/issues/3931 AWS has introduced `x-id` query parameter in their requests (just to say, I couldn't find any documentation). This makes `DeleteObjects` request look like the following:\r\n\r\n```\r\nPOST /?delete=&x-id=DeleteObjects\r\n...\r\n```\r\n\r\nThis request is bypassed by moto (since DeleteObjects is unsupported) and our `s3_response_is_delete_keys` since underlying `is_delete_keys` is making a full string check for `/?delete`, whereas the path now includes `x-id` query parameter.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 49,
        "deletions": 19,
        "changed_files": 4,
        "created_at": "2021-04-25T19:57:17Z",
        "closed_at": "2021-06-06T07:50:48Z",
        "merged_at": "2021-06-06T07:50:48Z",
        "body": "Add: Xray trace from S3->SQS\r\nhttps://github.com/localstack/localstack/issues/3686\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 11,
        "deletions": 6,
        "changed_files": 2,
        "created_at": "2021-04-25T08:01:54Z",
        "closed_at": "2021-05-21T07:13:46Z",
        "merged_at": "2021-05-21T07:13:46Z",
        "body": "Issue fixed:\r\n#3888 APIGateway on CloudFormation can't find ref on resource\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 21,
        "deletions": 5,
        "changed_files": 2,
        "created_at": "2021-04-24T12:10:56Z",
        "closed_at": "2021-04-24T20:17:39Z",
        "merged_at": "2021-04-24T20:17:39Z",
        "body": "Fix SNS create topic with tags fails when called more than one time\r\nAdded integration test\r\nAddresses #3928",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 165,
        "deletions": 9,
        "changed_files": 4,
        "created_at": "2021-04-24T08:28:57Z",
        "closed_at": "2021-04-24T16:56:28Z",
        "merged_at": "2021-04-24T16:56:28Z",
        "body": "* Fix APIGateway Model state fetching\r\n* Add integration tests\r\n\r\nIssue fixed:\r\n#3888 APIGateway on CloudFormation can't find ref on resource",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2021-04-23T17:06:38Z",
        "closed_at": "2021-04-26T17:21:39Z",
        "merged_at": null,
        "body": "Fix CORSConfiguration nested key access of CORSRules\r\n\r\nResolves #3926",
        "comments": 5
    },
    {
        "merged": true,
        "additions": 312,
        "deletions": 47,
        "changed_files": 14,
        "created_at": "2021-04-23T15:58:39Z",
        "closed_at": "2021-04-25T18:42:41Z",
        "merged_at": "2021-04-25T18:42:41Z",
        "body": "## Add Kinesis target support to EventBridge\r\n\r\n* Remove some old Java targets references\r\n* Add Kinesis target support for EventBridge\r\n* Add e2e tests for newly added functionality\r\n\r\nConnected issue: https://github.com/localstack/localstack/issues/3826",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 173,
        "deletions": 16,
        "changed_files": 2,
        "created_at": "2021-04-22T20:15:19Z",
        "closed_at": "2021-04-30T18:32:59Z",
        "merged_at": "2021-04-30T18:32:59Z",
        "body": "https://github.com/localstack/localstack/issues/3369\r\n",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 311,
        "deletions": 47,
        "changed_files": 13,
        "created_at": "2021-04-22T01:17:48Z",
        "closed_at": "2021-04-23T15:58:20Z",
        "merged_at": null,
        "body": "## Add Kinesis target support to EventBridge\r\n\r\n* Remove some old Java targets references\r\n* Add Kinesis target support for EventBridge\r\n* Add e2e tests for newly added functionality\r\n\r\nConnected issue: https://github.com/localstack/localstack/issues/3826",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 54,
        "deletions": 26,
        "changed_files": 2,
        "created_at": "2021-04-21T18:29:13Z",
        "closed_at": "2021-04-22T06:15:52Z",
        "merged_at": "2021-04-22T06:15:52Z",
        "body": "Added support for INSERT, DELETE events.\r\nAdded support for batch_write_item and transact_write_item\r\nAddresses #3851",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 3,
        "changed_files": 3,
        "created_at": "2021-04-21T07:10:22Z",
        "closed_at": "2021-04-27T07:22:57Z",
        "merged_at": "2021-04-27T07:22:57Z",
        "body": "`utils/persistence.py` already has most of the code available to switch on this, it just is not exposed to be configured by an environment variable.\r\n\r\nI used the name as it stood. Since this name will be difficult to change once it's in place you may want to consider inverting this to `USE_MULTIPLE_DUMP_FILES` with the default of `false`.   If you'd like to change the name, happy to resubmit this PR :)",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2021-04-20T23:29:00Z",
        "closed_at": "2021-04-22T06:27:24Z",
        "merged_at": "2021-04-22T06:27:24Z",
        "body": "Fixes #3908.\r\n\r\nI've had some problems installing sasl on arch, so I haven't been able to reproduce this fix locally. I'd appreciate some help to validate this fix. ",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 73,
        "deletions": 31,
        "changed_files": 3,
        "created_at": "2021-04-20T01:39:02Z",
        "closed_at": "2021-04-30T14:24:55Z",
        "merged_at": "2021-04-30T14:24:55Z",
        "body": "Fixes #3879.\r\n\r\n* Pretty nice example to make this \"fail\" if you add `DYNAMODB_WRITE_ERROR_PROBABILITY=1.0` and use [this guide](\r\nhttps://www.dynamodbguide.com/working-with-multiple-items/) to see it fail.\r\n* Some minor fixes on config, i.e. `DYNAMODB_WRITE_ERROR_PROBABILITY` and `DYNAMODB_READ_ERROR_PROBABILITY` where being \"captured\" on the `config` file but even if you passed it it would not work.\r\n\r\n* I have also found line `70` (function `action_should_throttle`) on `dynamodb_listener` not working as it would expect the action (i.e. `BatchWriteItem`) to match `DynamoDB_20120810.BatchWriteItem` when being run from the AWS command line, as the CLI would just pass the action, not the action_prefix.\r\nFixed with:\r\n```\r\n        return (action in throttled) or (action in actions)\r\n```\r\n\r\nAs usual comments are welcome.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 33,
        "deletions": 3,
        "changed_files": 1,
        "created_at": "2021-04-19T19:27:27Z",
        "closed_at": "2021-04-20T22:10:42Z",
        "merged_at": "2021-04-20T22:10:41Z",
        "body": "## Work done:\r\n- Fix CloudFormation state filter #3878 \r\n- Add support for multi-value filtering (as specified in the [API docs for CloudFormation](https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_ListStacks.html)) \r\n\r\n## Testing\r\nI've created a small script for setting up the scenarios\r\n[main.txt](https://github.com/localstack/localstack/files/6338536/main.txt)\r\n\r\n\r\n&nbsp;\r\n### Preparing the scenario\r\nRun `localstack` with the `cloudformation` service enabled:\r\n```\r\nlocalstack start --host\r\n```\r\n\r\nOnce `localstack` is up, on the attached script run:\r\n```python3\r\nstep1() # Creates the stacks 1,2,3 and 4\r\n```\r\n    \r\nThen run:\r\n```python3\r\nstep2() # Updates the stacks 3 and 4\r\n```\r\n    \r\nWait a few seconds and then run:     \r\n```python3\r\nstep3() # Deletes the stack 4\r\n```\r\n\r\nOn this step you should be able to run: \r\n```\r\naws --region us-east-1 --endpoint-url=http://localhost:4566 cloudformation list-stacks\r\n```\r\nAnd the response should be something like: \r\n```json\r\n{\r\n    \"StackSummaries\": [\r\n        {\r\n            \"StackId\": \"arn:aws:cloudformation:us-east-1:000000000000:stack/TestStack1/dcf9e17c\",\r\n            \"StackName\": \"TestStack1\",\r\n            \"CreationTime\": \"2021-04-19T17:02:18.935Z\",\r\n            \"StackStatus\": \"CREATE_COMPLETE\",\r\n            \"StackStatusReason\": \"Deployment succeeded\"\r\n        },\r\n        {\r\n            \"StackId\": \"arn:aws:cloudformation:us-east-1:000000000000:stack/TestStack2/6e3ec56b\",\r\n            \"StackName\": \"TestStack2\",\r\n            \"CreationTime\": \"2021-04-19T17:02:18.965Z\",\r\n            \"StackStatus\": \"CREATE_COMPLETE\",\r\n            \"StackStatusReason\": \"Deployment succeeded\"\r\n        },\r\n        {\r\n            \"StackId\": \"arn:aws:cloudformation:us-east-1:000000000000:stack/TestStack3/4ae0bc60\",\r\n            \"StackName\": \"TestStack3\",\r\n            \"CreationTime\": \"2021-04-19T17:02:19.002Z\",\r\n            \"StackStatus\": \"UPDATE_FAILED\",\r\n            \"StackStatusReason\": \"Deployment failed\"\r\n        },\r\n        {\r\n            \"StackId\": \"arn:aws:cloudformation:us-east-1:000000000000:stack/TestStack4/211ceda7\",\r\n            \"StackName\": \"TestStack4\",\r\n            \"CreationTime\": \"2021-04-19T17:02:19.039Z\",\r\n            \"StackStatus\": \"DELETE_IN_PROGRESS\",\r\n            \"StackStatusReason\": \"Deployment succeeded\"\r\n        }\r\n    ]\r\n}\r\n```\r\n\r\n&nbsp;\r\n### Running the scenario\r\n\r\n\r\n#### python boto3\r\nOn the attached script you can run:\r\n```\r\nstep4() # List stacks with filters \"UPDATE_FAILED\" and \"DELETE_IN_PROGRESS\"\r\n```\r\nIn this case, the response should be: \r\n```\r\n{'StackSummaries': [{'StackId': 'arn:aws:cloudformation:us-east-1:000000000000:stack/TestStack3/4ae0bc60', 'StackName': 'TestStack3', 'CreationTime': datetime.datetime(2021, 4, 19, 17, 2, 19, 2000, tzinfo=tzutc()), 'StackStatus': 'UPDATE_FAILED', 'StackStatusReason': 'Deployment failed'}, {'StackId': 'arn:aws:cloudformation:us-east-1:000000000000:stack/TestStack4/211ceda7', 'StackName': 'TestStack4', 'CreationTime': datetime.datetime(2021, 4, 19, 17, 2, 19, 39000, tzinfo=tzutc()), 'StackStatus': 'DELETE_IN_PROGRESS', 'StackStatusReason': 'Deployment succeeded'}], 'ResponseMetadata': {'HTTPStatusCode': 200, 'HTTPHeaders': {'content-type': 'text/html; charset=utf-8', 'content-length': '780', 'access-control-allow-origin': '*', 'access-control-allow-methods': 'HEAD,GET,PUT,POST,DELETE,OPTIONS,PATCH', 'access-control-allow-headers': 'authorization,content-type,content-length,content-md5,cache-control,x-amz-content-sha256,x-amz-date,x-amz-security-token,x-amz-user-agent,x-amz-target,x-amz-acl,x-amz-version-id,x-localstack-target,x-amz-tagging', 'access-control-expose-headers': 'x-amz-version-id', 'connection': 'close', 'date': 'Mon, 19 Apr 2021 17:04:46 GMT', 'server': 'hypercorn-h11'}, 'RetryAttempts': 0}}\r\n\r\n```\r\n\r\n\r\n#### aws cli\r\n```\r\naws --region us-east-1 --endpoint-url=http://localhost:4566 cloudformation list-stacks --stack-status-filter UPDATE_FAILED DELETE_IN_PROGRESS\r\n```\r\n\r\nIn this case, the response should be:\r\n```\r\n{\r\n    \"StackSummaries\": [\r\n        {\r\n            \"StackId\": \"arn:aws:cloudformation:us-east-1:000000000000:stack/TestStack3/4ae0bc60\",\r\n            \"StackName\": \"TestStack3\",\r\n            \"CreationTime\": \"2021-04-19T17:02:19.002Z\",\r\n            \"StackStatus\": \"UPDATE_FAILED\",\r\n            \"StackStatusReason\": \"Deployment failed\"\r\n        },\r\n        {\r\n            \"StackId\": \"arn:aws:cloudformation:us-east-1:000000000000:stack/TestStack4/211ceda7\",\r\n            \"StackName\": \"TestStack4\",\r\n            \"CreationTime\": \"2021-04-19T17:02:19.039Z\",\r\n            \"StackStatus\": \"DELETE_IN_PROGRESS\",\r\n            \"StackStatusReason\": \"Deployment succeeded\"\r\n        }\r\n    ]\r\n}\r\n\r\n```\r\n",
        "comments": 3
    },
    {
        "merged": false,
        "additions": 86,
        "deletions": 42,
        "changed_files": 12,
        "created_at": "2021-04-19T17:38:56Z",
        "closed_at": "2021-04-19T19:09:44Z",
        "merged_at": null,
        "body": "## Work done:\r\n- Fix CloudFormation state filter\r\n- Add support for multi-value filtering (as specified in the [API docs for CloudFormation](https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_ListStacks.html)) \r\n\r\n## Testing\r\nI've created a small script for setting up the scenario\r\n[main.txt](https://github.com/localstack/localstack/files/6337935/main.txt)\r\n\r\n&nbsp;\r\n### Preparing the scenario\r\nRun `localstack` with the `cloudformation` service enabled:\r\n```\r\nlocalstack start --host\r\n```\r\n\r\nOnce `localstack` is up, on the attached script run:\r\n```python3\r\nstep1() # Creates the stacks 1,2,3 and 4\r\n```\r\n    \r\nThen run:\r\n```python3\r\nstep2() # Updates the stacks 3 and 4\r\n```\r\n    \r\nWait a few seconds and then run:     \r\n```python3\r\nstep3() # Deletes the stack 4\r\n```\r\n\r\nOn this step you should be able to run: \r\n```\r\naws --region us-east-1 --endpoint-url=http://localhost:4566 cloudformation list-stacks\r\n```\r\nAnd the response should be something like: \r\n```json\r\n{\r\n    \"StackSummaries\": [\r\n        {\r\n            \"StackId\": \"arn:aws:cloudformation:us-east-1:000000000000:stack/TestStack1/dcf9e17c\",\r\n            \"StackName\": \"TestStack1\",\r\n            \"CreationTime\": \"2021-04-19T17:02:18.935Z\",\r\n            \"StackStatus\": \"CREATE_COMPLETE\",\r\n            \"StackStatusReason\": \"Deployment succeeded\"\r\n        },\r\n        {\r\n            \"StackId\": \"arn:aws:cloudformation:us-east-1:000000000000:stack/TestStack2/6e3ec56b\",\r\n            \"StackName\": \"TestStack2\",\r\n            \"CreationTime\": \"2021-04-19T17:02:18.965Z\",\r\n            \"StackStatus\": \"CREATE_COMPLETE\",\r\n            \"StackStatusReason\": \"Deployment succeeded\"\r\n        },\r\n        {\r\n            \"StackId\": \"arn:aws:cloudformation:us-east-1:000000000000:stack/TestStack3/4ae0bc60\",\r\n            \"StackName\": \"TestStack3\",\r\n            \"CreationTime\": \"2021-04-19T17:02:19.002Z\",\r\n            \"StackStatus\": \"UPDATE_FAILED\",\r\n            \"StackStatusReason\": \"Deployment failed\"\r\n        },\r\n        {\r\n            \"StackId\": \"arn:aws:cloudformation:us-east-1:000000000000:stack/TestStack4/211ceda7\",\r\n            \"StackName\": \"TestStack4\",\r\n            \"CreationTime\": \"2021-04-19T17:02:19.039Z\",\r\n            \"StackStatus\": \"DELETE_IN_PROGRESS\",\r\n            \"StackStatusReason\": \"Deployment succeeded\"\r\n        }\r\n    ]\r\n}\r\n```\r\n\r\n&nbsp;\r\n### Running the scenario\r\n\r\n\r\n#### python boto3\r\nOn the attached script you can run:\r\n```\r\nstep4() # List stacks with filters \"UPDATE_FAILED\" and \"DELETE_IN_PROGRESS\"\r\n```\r\nIn this case, the response should be: \r\n```\r\n{'StackSummaries': [{'StackId': 'arn:aws:cloudformation:us-east-1:000000000000:stack/TestStack3/4ae0bc60', 'StackName': 'TestStack3', 'CreationTime': datetime.datetime(2021, 4, 19, 17, 2, 19, 2000, tzinfo=tzutc()), 'StackStatus': 'UPDATE_FAILED', 'StackStatusReason': 'Deployment failed'}, {'StackId': 'arn:aws:cloudformation:us-east-1:000000000000:stack/TestStack4/211ceda7', 'StackName': 'TestStack4', 'CreationTime': datetime.datetime(2021, 4, 19, 17, 2, 19, 39000, tzinfo=tzutc()), 'StackStatus': 'DELETE_IN_PROGRESS', 'StackStatusReason': 'Deployment succeeded'}], 'ResponseMetadata': {'HTTPStatusCode': 200, 'HTTPHeaders': {'content-type': 'text/html; charset=utf-8', 'content-length': '780', 'access-control-allow-origin': '*', 'access-control-allow-methods': 'HEAD,GET,PUT,POST,DELETE,OPTIONS,PATCH', 'access-control-allow-headers': 'authorization,content-type,content-length,content-md5,cache-control,x-amz-content-sha256,x-amz-date,x-amz-security-token,x-amz-user-agent,x-amz-target,x-amz-acl,x-amz-version-id,x-localstack-target,x-amz-tagging', 'access-control-expose-headers': 'x-amz-version-id', 'connection': 'close', 'date': 'Mon, 19 Apr 2021 17:04:46 GMT', 'server': 'hypercorn-h11'}, 'RetryAttempts': 0}}\r\n\r\n```\r\n\r\n\r\n#### aws cli\r\n```\r\naws --region us-east-1 --endpoint-url=http://localhost:4566 cloudformation list-stacks --stack-status-filter UPDATE_FAILED DELETE_IN_PROGRESS\r\n```\r\n\r\nIn this case, the response should be:\r\n```\r\n{\r\n    \"StackSummaries\": [\r\n        {\r\n            \"StackId\": \"arn:aws:cloudformation:us-east-1:000000000000:stack/TestStack3/4ae0bc60\",\r\n            \"StackName\": \"TestStack3\",\r\n            \"CreationTime\": \"2021-04-19T17:02:19.002Z\",\r\n            \"StackStatus\": \"UPDATE_FAILED\",\r\n            \"StackStatusReason\": \"Deployment failed\"\r\n        },\r\n        {\r\n            \"StackId\": \"arn:aws:cloudformation:us-east-1:000000000000:stack/TestStack4/211ceda7\",\r\n            \"StackName\": \"TestStack4\",\r\n            \"CreationTime\": \"2021-04-19T17:02:19.039Z\",\r\n            \"StackStatus\": \"DELETE_IN_PROGRESS\",\r\n            \"StackStatusReason\": \"Deployment succeeded\"\r\n        }\r\n    ]\r\n}\r\n\r\n```\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 206,
        "deletions": 13,
        "changed_files": 2,
        "created_at": "2021-04-18T00:39:18Z",
        "closed_at": "2021-04-20T11:00:24Z",
        "merged_at": "2021-04-20T11:00:24Z",
        "body": "Added support to Enable, Disable and Describe Kinesis streaming destinations for dynamodb\r\nAddresses #3600 \r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 12,
        "deletions": 12,
        "changed_files": 2,
        "created_at": "2021-04-17T20:15:49Z",
        "closed_at": "2021-06-02T13:28:10Z",
        "merged_at": "2021-06-02T13:28:09Z",
        "body": "Fix: missing message attributes for notifications via sns\r\n\r\nhttps://github.com/localstack/localstack/issues/3725",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 8,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2021-04-17T16:54:40Z",
        "closed_at": "2021-04-17T18:35:23Z",
        "merged_at": "2021-04-17T18:35:23Z",
        "body": "This PR adds more attributes to the Subscribe To Shard Response, according to [This Doc](https://docs.aws.amazon.com/kinesis/latest/APIReference/API_SubscribeToShard.html#API_SubscribeToShard_ResponseSyntax)\r\nAddresses #3822 \r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 10,
        "deletions": 5,
        "changed_files": 2,
        "created_at": "2021-04-17T00:18:02Z",
        "closed_at": "2021-04-30T21:36:19Z",
        "merged_at": "2021-04-30T21:36:19Z",
        "body": "Missing domain name value when apigateway sends a request to lambda function.\r\n\r\nhttps://docs.aws.amazon.com/apigateway/latest/developerguide/http-api-develop-integrations-lambda.html",
        "comments": 5
    },
    {
        "merged": false,
        "additions": 73,
        "deletions": 2,
        "changed_files": 3,
        "created_at": "2021-04-15T00:49:56Z",
        "closed_at": "2021-11-13T18:54:25Z",
        "merged_at": null,
        "body": "Add CircleCI build config for building base Docker image. (Temporary PR to trigger CI build..)\r\n\r\n**!DO NOT MERGE THIS PR!**",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 50,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2021-04-14T21:13:16Z",
        "closed_at": "2021-04-15T16:43:50Z",
        "merged_at": "2021-04-15T16:43:50Z",
        "body": "Added support for AT_SEQUENCENUMBER, AFTER_SEQUENCENUMBER, TIMESTAMP Iterator types on Kinesis\r\nAddresses #3823\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 98,
        "deletions": 6,
        "changed_files": 3,
        "created_at": "2021-04-11T23:16:11Z",
        "closed_at": "2021-04-14T11:11:42Z",
        "merged_at": "2021-04-14T11:11:42Z",
        "body": "Fix : DynamoDB stream records stream view type\r\nAddresses #3851 \r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 157,
        "deletions": 93,
        "changed_files": 14,
        "created_at": "2021-04-11T14:46:21Z",
        "closed_at": "2021-04-11T20:38:54Z",
        "merged_at": "2021-04-11T20:38:54Z",
        "body": "Refactor logic for CF stack instances; enhance CF model for KMS::Key",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 23,
        "deletions": 3,
        "changed_files": 2,
        "created_at": "2021-04-10T10:54:16Z",
        "closed_at": "2021-04-13T07:21:33Z",
        "merged_at": "2021-04-13T07:21:33Z",
        "body": "Recreating PR #3596 - to trigger new CI build on CircleCI.",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 72,
        "deletions": 6,
        "changed_files": 2,
        "created_at": "2021-04-09T22:05:55Z",
        "closed_at": "2021-04-11T10:45:38Z",
        "merged_at": "2021-04-11T10:45:37Z",
        "body": "Addresses #3829 \r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 5,
        "changed_files": 2,
        "created_at": "2021-04-08T09:03:27Z",
        "closed_at": "2021-04-10T13:24:51Z",
        "merged_at": "2021-04-10T13:24:51Z",
        "body": "Fixes #3608 Regression: listObjects does not work with phpsdk\r\n\r\nThe AWS PHP SDK when used with Guzzle 6 is unable to parse the response\r\nXML when it encounters a 'content-encoding: identity' HTTP header.\r\n\r\nReplaces #3831",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 12,
        "deletions": 1,
        "changed_files": 4,
        "created_at": "2021-04-08T08:59:47Z",
        "closed_at": "2021-04-08T10:35:10Z",
        "merged_at": "2021-04-08T10:35:10Z",
        "body": "Addresses #3802, please also check that https://github.com/localstack/localstack-python-client/pull/28 needs to be merged before as well (version bump up).\r\nAlso added https://github.com/localstack/moto/pull/16 to this list before-merge",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 103,
        "deletions": 15,
        "changed_files": 4,
        "created_at": "2021-04-07T17:32:47Z",
        "closed_at": "2021-04-07T22:03:37Z",
        "merged_at": "2021-04-07T22:03:37Z",
        "body": "Issue fixed:\r\n#3808 CloudFormation: Missing Support for KMS::Alias",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 222,
        "deletions": 7,
        "changed_files": 6,
        "created_at": "2021-04-06T17:14:19Z",
        "closed_at": "2021-09-23T12:07:06Z",
        "merged_at": null,
        "body": "Issue fixed:\r\n#3785 Creation of AWS Security Group Rule hangs using terraform",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 14,
        "deletions": 1,
        "changed_files": 4,
        "created_at": "2021-04-06T16:54:06Z",
        "closed_at": "2021-04-08T08:49:21Z",
        "merged_at": null,
        "body": "Fixes #3802, please also check that https://github.com/localstack/localstack-python-client/pull/28 needs to be merged before as well (version bump up).\r\nAlso added https://github.com/localstack/moto/pull/16 to this list before-merge",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 2,
        "deletions": 5,
        "changed_files": 2,
        "created_at": "2021-04-06T02:00:07Z",
        "closed_at": "2021-04-08T09:02:48Z",
        "merged_at": null,
        "body": "Fixes #3608 Regression: listObjects does not work with phpsdk\r\n\r\nThe AWS PHP SDK when used with Guzzle 6 is unable to parse the response\r\nXML when it encounters a 'content-encoding: identity' HTTP header.\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 100,
        "deletions": 320,
        "changed_files": 14,
        "created_at": "2021-04-05T18:51:53Z",
        "closed_at": "2021-04-05T21:06:09Z",
        "merged_at": "2021-04-05T21:06:09Z",
        "body": "Refactor logic for proxy listener; fix edge forward headers",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 126,
        "deletions": 3,
        "changed_files": 4,
        "created_at": "2021-04-04T15:03:33Z",
        "closed_at": "2021-04-07T20:52:54Z",
        "merged_at": "2021-04-07T20:52:54Z",
        "body": "Addresses #3384",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 90,
        "deletions": 176,
        "changed_files": 2,
        "created_at": "2021-04-04T12:51:33Z",
        "closed_at": "2021-04-05T21:39:02Z",
        "merged_at": "2021-04-05T21:39:02Z",
        "body": "Replacing `dashboard/infra.py` AWS CLI custom commands in favour of boto3 calls",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 19,
        "deletions": 4,
        "changed_files": 2,
        "created_at": "2021-04-02T03:27:43Z",
        "closed_at": "2021-04-02T18:37:27Z",
        "merged_at": "2021-04-02T18:37:27Z",
        "body": "Fixes: #3820 \r\n\r\nChanges:\r\n* Update `StreamArn` to `StreamARN` to match records stored in `STREAM_CONSUMERS`.\r\n* Fix `ConsumerArn` to `ConsumerARN` to get the ARN in the response.\r\n* Test coverage for `DescribeStreamConsumer` calls.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 7,
        "deletions": 4,
        "changed_files": 1,
        "created_at": "2021-04-01T17:05:11Z",
        "closed_at": "2021-04-01T20:23:54Z",
        "merged_at": "2021-04-01T20:23:54Z",
        "body": "With this PR the Data send to the LAMBDA_FALLBACK_URL  is encoded to JSON again.\r\n\r\nAddresses #3498 and #3584",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2021-03-31T18:46:08Z",
        "closed_at": "2021-03-31T23:15:51Z",
        "merged_at": "2021-03-31T23:15:51Z",
        "body": "**Fixed**\r\n- Updated the s3 virtual host name regex to support `HOSTNAME_EXTERNAL` environment variable.\r\n\r\n**Rendered Regex**\r\n- `^(http(s)?://)?([^\\.]+)\\.s3((-website)|(-external-1))?[\\.-](dualstack\\.)?((localhost\\.localstack\\.cloud)|(localhost)|(([a-z]{2}-[a-z]+-[0-9]{1,}\\.)?amazonaws\\.com(.cn)?))(:[\\d]{0,6})?$`\r\n\r\n**Note**\r\n- To use s3 with host based addressing the request must be sent with the host header with `s3.xxxx:xxx`\r\n\r\n`(http(s))://(bucketname).<s3>.<hostname>(:port)`\r\n- ( ) -> Optional\r\n- <> -> Required",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2021-03-31T17:37:00Z",
        "closed_at": "2021-03-31T23:09:07Z",
        "merged_at": "2021-03-31T23:09:07Z",
        "body": "**Fixed**\r\n- return statement in `prepare_transact_write_item_records`\r\n\r\n**Issues**\r\n- #3801 ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2021-03-31T15:01:45Z",
        "closed_at": "2021-03-31T18:11:58Z",
        "merged_at": "2021-03-31T18:11:57Z",
        "body": "Adding aws_request_id to LambdaContext. This is in response to this issue that I have encountered: \r\n\r\nhttps://github.com/localstack/localstack/issues/3806 \r\n\r\nGlad to implement any feedback in response to it! ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 41,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2021-03-31T01:18:19Z",
        "closed_at": "2021-03-31T12:46:20Z",
        "merged_at": "2021-03-31T12:46:20Z",
        "body": "Addresses #3787, adding GetIdentityVerificationAttributes, I have got the Reference from the [official docs](https://s3.amazonaws.com/awsdocs/ses/latest/ses-api.pdf) and the [API reference](https://docs.aws.amazon.com/ses/latest/APIReference/API_GetIdentityVerificationAttributes.html). Also adding tests.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 14,
        "changed_files": 1,
        "created_at": "2021-03-29T19:23:11Z",
        "closed_at": "2021-03-30T16:55:16Z",
        "merged_at": "2021-03-30T16:55:16Z",
        "body": "Removed **get_forward_url** as we are supporting case sensitive bucket/key names\r\n\r\nFix:\r\n- localstack was lowering the case of URL/Path before sending to moto\r\n\r\n**Isssues**\r\n- #3726 \r\n- #3756 ",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 5,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2021-03-29T12:34:17Z",
        "closed_at": "2021-03-29T18:27:37Z",
        "merged_at": "2021-03-29T18:27:37Z",
        "body": "**Issue**\r\n- #3732\r\n\r\n**Fixed**\r\n- allowed `x-id` query parameters to invoke the notification\r\n- reused `bucket_name_in_host`",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 6,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2021-03-28T22:35:28Z",
        "closed_at": "2021-03-29T19:21:55Z",
        "merged_at": "2021-03-29T19:21:55Z",
        "body": "When using `aws-sdk-cpp::TransferManager`, I noiced there is a different in the behavior of `localstack` and production.\r\n- `localstack`: When we do a `HeadObjectRequest` with `range` headers, `localstack` respects this header and return `416` if there is a mismatch in `range` and object's size.\r\n- On the other hands, production doesn't return `416` even if there is mismatch. As long as the questioning object is accessible, it will return 200 along with other data.\r\n\r\nFor more informations, you could take a look at [`TransferManager::InitializePartsForDownload`](https://github.com/aws/aws-sdk-cpp/blob/3fe07dc617103886c3051bd7cd529456f2011dfe/aws-cpp-sdk-transfer/source/transfer/TransferManager.cpp#L718-L793), I've tested it with many different offsets and sizes, and the production server always returns 200. With an object 7 bytes:\r\n\r\n```\r\n\u25b6 aws s3api head-object --bucket bucketvnvo --key TEST\r\n{\r\n    \"AcceptRanges\": \"bytes\",\r\n    \"LastModified\": \"2021-03-28T22:20:00+00:00\",\r\n    \"ContentLength\": 7,\r\n    \"ETag\": \"\\\"fcea920f7412b5da7be0cf42b8c93759\\\"\",\r\n    \"ContentType\": \"binary/octet-stream\",\r\n    \"Metadata\": {}\r\n}\r\n\u25b6 aws s3api head-object --bucket bucketvnvo --key TEST --range 0-499\r\n{\r\n    \"AcceptRanges\": \"bytes\",\r\n    \"LastModified\": \"2021-03-28T22:20:00+00:00\",\r\n    \"ContentLength\": 7,\r\n    \"ETag\": \"\\\"fcea920f7412b5da7be0cf42b8c93759\\\"\",\r\n    \"ContentType\": \"binary/octet-stream\",\r\n    \"Metadata\": {}\r\n}\r\n\u25b6 aws s3api head-object --bucket bucketvnvo --key TEST --range 100-499\r\n{\r\n    \"AcceptRanges\": \"bytes\",\r\n    \"LastModified\": \"2021-03-28T22:20:00+00:00\",\r\n    \"ContentLength\": 7,\r\n    \"ETag\": \"\\\"fcea920f7412b5da7be0cf42b8c93759\\\"\",\r\n    \"ContentType\": \"binary/octet-stream\",\r\n    \"Metadata\": {}\r\n}\r\n```",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 14,
        "deletions": 10,
        "changed_files": 1,
        "created_at": "2021-03-28T16:44:27Z",
        "closed_at": "2021-03-30T21:28:05Z",
        "merged_at": "2021-03-30T21:28:05Z",
        "body": "- S3 create bucket headers contains `Location` header in the response\r\n- Removed unused code/comment",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 29,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2021-03-28T16:12:08Z",
        "closed_at": "2021-04-07T20:32:35Z",
        "merged_at": "2021-04-07T20:32:35Z",
        "body": "Issue fixed:\r\n#2782 Specific status code needed for Cyberduck compatibility",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 240,
        "deletions": 4,
        "changed_files": 4,
        "created_at": "2021-03-28T13:48:27Z",
        "closed_at": "2021-03-30T23:01:30Z",
        "merged_at": "2021-03-30T23:01:30Z",
        "body": "Issue fixed:\r\n#3728 Unable to extract attribute \"PhysicalResourceId\" from \"EC2::Route\"\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2021-03-27T08:01:02Z",
        "closed_at": "2021-03-27T11:46:15Z",
        "merged_at": "2021-03-27T11:46:15Z",
        "body": "- Follow up PR for #3781 .\r\n\r\n- Enabled `test_s3_static_website_hosting`",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2021-03-26T13:10:32Z",
        "closed_at": "2021-03-26T20:27:59Z",
        "merged_at": "2021-03-26T20:27:59Z",
        "body": "Unless there's a good reason not to, it seems to work as intended\r\n\r\n",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 14,
        "deletions": 11,
        "changed_files": 1,
        "created_at": "2021-03-25T19:15:42Z",
        "closed_at": "2021-03-30T16:57:20Z",
        "merged_at": null,
        "body": "get_forward_url method lowering the URL path before sending it to the moto.\r\nNote: This is the test PR. Do not merge it immediately.",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2021-03-25T17:18:41Z",
        "closed_at": "2021-03-26T19:59:19Z",
        "merged_at": "2021-03-26T19:59:19Z",
        "body": "Changed addressing style to auto for the common default aws client of the s3 service.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 9,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2021-03-24T19:35:33Z",
        "closed_at": "2021-03-24T21:05:37Z",
        "merged_at": "2021-03-24T21:05:37Z",
        "body": "Reverts localstack/localstack#3750 - fixes a regression with Node.js AWS SDK that was introduced by this change.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2021-03-24T02:30:15Z",
        "closed_at": "2021-03-25T12:02:09Z",
        "merged_at": "2021-03-25T12:02:09Z",
        "body": "I found an error while using the lib, I got something like this from localstack logs:\r\n\r\n```\r\nlocalstack_1  | Traceback (most recent call last):\r\nlocalstack_1  |   File \"/opt/code/localstack/localstack/utils/bootstrap.py\", line 671, in run\r\nlocalstack_1  |     result = self.func(self.params)\r\nlocalstack_1  |   File \"/opt/code/localstack/localstack/utils/async_utils.py\", line 28, in _run\r\nlocalstack_1  |     return fn(*args, **kwargs)\r\nlocalstack_1  |   File \"/opt/code/localstack/localstack/services/generic_proxy.py\", line 607, in handler\r\nlocalstack_1  |     response = modify_and_forward(method=method, path=path_with_params, data_bytes=data, headers=headers,\r\nlocalstack_1  |   File \"/opt/code/localstack/localstack/services/generic_proxy.py\", line 373, in modify_and_forward\r\nlocalstack_1  |     listener_result = listener.forward_request(method=method,\r\nlocalstack_1  |   File \"/opt/code/localstack/localstack/services/edge.py\", line 108, in forward_request\r\nlocalstack_1  |     return do_forward_request(api, method, path, data, headers, port=port)\r\nlocalstack_1  |   File \"/opt/code/localstack/localstack/services/edge.py\", line 119, in do_forward_request\r\nlocalstack_1  |     result = do_forward_request_inmem(api, method, path, data, headers, port=port)\r\nlocalstack_1  |   File \"/opt/code/localstack/localstack/services/edge.py\", line 139, in do_forward_request_inmem\r\nlocalstack_1  |     response = modify_and_forward(method=method, path=path, data_bytes=data, headers=headers,\r\nlocalstack_1  |   File \"/opt/code/localstack/localstack/services/generic_proxy.py\", line 373, in modify_and_forward\r\nlocalstack_1  |     listener_result = listener.forward_request(method=method,\r\nlocalstack_1  |   File \"/opt/code/localstack/localstack/services/s3/s3_listener.py\", line 1108, in forward_request\r\nlocalstack_1  |     expiration_datetime = self.parse_policy_expiration_date(expiration_string)\r\nlocalstack_1  |   File \"/opt/code/localstack/localstack/services/s3/s3_listener.py\", line 1015, in parse_policy_expiration_date\r\nlocalstack_1  |     return datetime.datetime.strptime(expiration_string, POLICY_EXPIRATION_FORMAT2)\r\nlocalstack_1  |   File \"/usr/lib/python3.8/_strptime.py\", line 568, in _strptime_datetime\r\nlocalstack_1  |     tt, fraction, gmtoff_fraction = _strptime(data_string, format)\r\nlocalstack_1  |   File \"/usr/lib/python3.8/_strptime.py\", line 349, in _strptime\r\nlocalstack_1  |     raise ValueError(\"time data %r does not match format %r\" %\r\nlocalstack_1  | ValueError: time data '2021-03-24T02:51:36.365Z' does not match format '%Y-%m-%dT%H:%M:%S.%IZ'\r\n```\r\n\r\nThis same date works in aws S3, from reading the [docs](https://docs.aws.amazon.com/AmazonS3/latest/API/sigv4-HTTPPOSTConstructPolicy.html):\r\n\r\n>The expiration element specifies the expiration date and time of the POST policy in ISO8601 GMT date format. For example, 2013-08-01T12:00:00.000Z specifies that the POST policy is not valid after midnight GMT on August 1, 2013.",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 4,
        "deletions": 4,
        "changed_files": 2,
        "created_at": "2021-03-21T14:41:51Z",
        "closed_at": "2021-06-08T15:55:45Z",
        "merged_at": null,
        "body": "**Fixed**\r\n- synchronous lambda calls from dynamodb was causing socket timeouts\r\n\r\n**Issues**\r\n- #3561",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 158,
        "deletions": 9,
        "changed_files": 2,
        "created_at": "2021-03-21T12:11:18Z",
        "closed_at": "2021-03-21T13:14:45Z",
        "merged_at": "2021-03-21T13:14:45Z",
        "body": "Fix EC2 responses for compatibility with TF VPC module.\r\nAddresses https://github.com/hashicorp/terraform-provider-aws/issues/18187",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 105,
        "deletions": 3,
        "changed_files": 3,
        "created_at": "2021-03-21T10:00:09Z",
        "closed_at": "2021-03-21T13:36:54Z",
        "merged_at": "2021-03-21T13:36:53Z",
        "body": "Update integration test\r\n\r\nIssue fixed:\r\n#171 Implement import-rest-api for API Gateway",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 11,
        "deletions": 28,
        "changed_files": 2,
        "created_at": "2021-03-21T09:38:14Z",
        "closed_at": "2021-03-21T13:12:48Z",
        "merged_at": "2021-03-21T13:12:48Z",
        "body": "Issue already fixed:\r\n#2115 Region ignored when using ${AWS::Region} in template\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 48,
        "deletions": 8,
        "changed_files": 2,
        "created_at": "2021-03-20T18:24:17Z",
        "closed_at": "2021-03-23T00:20:02Z",
        "merged_at": "2021-03-23T00:20:02Z",
        "body": "### Things fixed in this PR\r\n- presign authentication failing when key contains special char in the name\r\n- presign authentication failing while multipart uploading  \r\n\r\n### Added\r\n- test cases for multipart upload and special char as a key name\r\n\r\n### Fix for issues\r\n#3713 \r\n#3759 \r\n\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 49,
        "deletions": 24,
        "changed_files": 1,
        "created_at": "2021-03-19T19:37:12Z",
        "closed_at": "2021-03-29T19:25:08Z",
        "merged_at": "2021-03-29T19:25:08Z",
        "body": "Now he the kinesis functions that deal with consumer actions support CBOR encoded data and responses.\r\n\r\nAlso encodes to base64 the data of the records send to a consumer through the SubscribeToShard Event\r\nWith this, the Kinesis Scheduler completely Works in JSON mode and make this test(localstack/localstack-java-utils#47) pass.\r\n\r\n\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 9,
        "deletions": 11,
        "changed_files": 2,
        "created_at": "2021-03-19T17:13:10Z",
        "closed_at": "2021-03-21T16:49:41Z",
        "merged_at": "2021-03-21T16:49:41Z",
        "body": "**fixed**\r\n- Response for get-bucket-cors when the configuration is non existent\r\n\r\n**issue**\r\n- [3755](https://github.com/localstack/localstack/issues/3755)",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2021-03-18T23:01:05Z",
        "closed_at": "2021-03-20T12:32:17Z",
        "merged_at": "2021-03-20T12:32:17Z",
        "body": "Fixes #3734 ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 6,
        "deletions": 7,
        "changed_files": 1,
        "created_at": "2021-03-18T17:20:17Z",
        "closed_at": "2021-03-20T12:36:39Z",
        "merged_at": "2021-03-20T12:36:39Z",
        "body": "",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 9,
        "changed_files": 1,
        "created_at": "2021-03-18T15:11:37Z",
        "closed_at": "2021-03-21T17:41:24Z",
        "merged_at": "2021-03-21T17:41:24Z",
        "body": "Fixed:\r\n- Location Constraint returns `null` for selected region\r\n- Valid Values: `af-south-1 | ap-east-1 | ap-northeast-1 | ap-northeast-2 | ap-northeast-3 | ap-south-1 | ap-southeast-1 | ap-southeast-2 | ca-central-1 | cn-north-1 | cn-northwest-1 | EU | eu-central-1 | eu-north-1 | eu-south-1 | eu-west-1 | eu-west-2 | eu-west-3 | me-south-1 | sa-east-1 | us-east-2 | us-gov-east-1 | us-gov-west-1 | us-west-1 | us-west-2`",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 5,
        "deletions": 8,
        "changed_files": 1,
        "created_at": "2021-03-18T13:23:10Z",
        "closed_at": "2021-03-20T14:57:13Z",
        "merged_at": "2021-03-20T14:57:13Z",
        "body": "Fixes #2485 in a more elegant way, just a small pick.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 7,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2021-03-17T20:28:55Z",
        "closed_at": "2021-03-18T08:34:00Z",
        "merged_at": "2021-03-18T08:34:00Z",
        "body": "Fixes #2485 where users want to load a custom private `RSA` certificate.\r\n\r\nI honestly wanted to do it a bit more clean but I'll put it in the pipeline to load the str on a more... smooth? Way. For now this fixes the issue.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 11,
        "deletions": 16,
        "changed_files": 2,
        "created_at": "2021-03-17T18:35:46Z",
        "closed_at": "2021-03-18T08:17:30Z",
        "merged_at": "2021-03-18T08:17:30Z",
        "body": "minor s3 refactoring - following pr [3690](https://github.com/localstack/localstack/pull/3690)",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2021-03-17T17:42:44Z",
        "closed_at": "2021-03-17T20:25:16Z",
        "merged_at": "2021-03-17T20:25:16Z",
        "body": "Add missing `get_physical_resource_id` for `IAM::InstanceProfile`",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 492,
        "deletions": 243,
        "changed_files": 3,
        "created_at": "2021-03-17T16:34:57Z",
        "closed_at": "2021-03-18T08:16:26Z",
        "merged_at": "2021-03-18T08:16:26Z",
        "body": "### Things added or fixed in the PR.\r\n\r\n- Added support for virtual addressing style presign url signature authentication.\r\n- Added Test Cases\r\n- Restructured the presign url authentication. Moved mechanism to s3_utils.\r\n- Improved the path style presign url signature authenticase test case. Decrease amount of the time being taken to complete the test.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 50,
        "deletions": 59,
        "changed_files": 6,
        "created_at": "2021-03-16T20:19:59Z",
        "closed_at": "2021-03-17T02:13:01Z",
        "merged_at": "2021-03-17T02:13:01Z",
        "body": "Run CF deployments asynchronously",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 20,
        "deletions": 9,
        "changed_files": 3,
        "created_at": "2021-03-14T22:16:19Z",
        "closed_at": "2021-03-16T09:24:40Z",
        "merged_at": "2021-03-16T09:24:40Z",
        "body": "Sorry for the double-PR in a day @whummer, and thanks for the help on the last one.\r\n\r\nThis PR fixes an issue where the Authorization parameters couldn't be sent as GET parameters. I meant to include in in the last PR, but well the test suite takes a bit to run and I stepped away :)",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 299,
        "deletions": 232,
        "changed_files": 11,
        "created_at": "2021-03-14T12:17:38Z",
        "closed_at": "2021-03-14T22:20:32Z",
        "merged_at": "2021-03-14T22:20:32Z",
        "body": "Run CF deployments asynchronously in the background. This is required for large stacks with long-running deployment loops, to prevent network timeouts in the client connection.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 140,
        "deletions": 5,
        "changed_files": 4,
        "created_at": "2021-03-14T07:25:58Z",
        "closed_at": "2021-03-14T21:21:45Z",
        "merged_at": "2021-03-14T21:21:44Z",
        "body": "Fixes #3716 \r\n\r\nAuthorization GET Parameters are read and turned into an `Authorization` header.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 87,
        "deletions": 22,
        "changed_files": 8,
        "created_at": "2021-03-13T12:51:23Z",
        "closed_at": "2021-03-13T19:08:59Z",
        "merged_at": "2021-03-13T19:08:59Z",
        "body": "Fix extracting list of changes in CloudFormation change sets. Partial fix for https://github.com/localstack/localstack-pro-samples/issues/37",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 19,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2021-03-13T09:37:03Z",
        "closed_at": "2021-03-14T11:45:22Z",
        "merged_at": "2021-03-14T11:45:22Z",
        "body": "Added mechanism to check whether localstack instance is running inside the docker or on the host. It also will support cgroup v2.\r\n\r\nFix for #3675 ",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 48,
        "deletions": 1,
        "changed_files": 3,
        "created_at": "2021-03-11T14:57:08Z",
        "closed_at": "2021-03-11T17:29:48Z",
        "merged_at": "2021-03-11T17:29:48Z",
        "body": "* Add gradle build for java lambda\r\n* Add java lambda zip built by gradle\r\n* Update integration tests\r\n\r\nIssue already fixed:\r\n#983 AWS lambda on localstack not seeing its dependencies\r\n#2090 I have a zip that works in AWS, but fails to load my classes in localstack.\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 53,
        "deletions": 13,
        "changed_files": 2,
        "created_at": "2021-03-07T18:14:50Z",
        "closed_at": "2021-03-07T22:11:01Z",
        "merged_at": "2021-03-07T22:11:01Z",
        "body": "Now Localstack returns if a Stream Consumer really exists and also a new header was added to the binary messages.\r\nWith this changes, KCL can correctly register a Stream Consumer and read the binary messages without crashing.\r\n\r\nProgress to fixing #3487 ",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 365,
        "deletions": 275,
        "changed_files": 10,
        "created_at": "2021-03-06T18:46:51Z",
        "closed_at": "2021-03-17T12:31:37Z",
        "merged_at": "2021-03-17T12:31:37Z",
        "body": "**added**\r\n- support for virutal host based routing in s3\r\n\r\n**Issues**\r\n- #2631 ",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2021-03-05T09:49:00Z",
        "closed_at": "2021-03-07T14:27:30Z",
        "merged_at": "2021-03-07T14:27:30Z",
        "body": "Fix:Events changed condition to indetify service\r\n\r\nRelated to #3256  and #3255 ",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 13,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2021-03-05T08:28:45Z",
        "closed_at": "2021-03-05T15:50:36Z",
        "merged_at": "2021-03-05T15:50:36Z",
        "body": "Fixed case of `PutEvents` with no `Detail`. Fix  #3682",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 12,
        "deletions": 21,
        "changed_files": 3,
        "created_at": "2021-03-04T18:18:34Z",
        "closed_at": "2021-03-06T18:47:04Z",
        "merged_at": null,
        "body": "**added**\r\n- support for virutal host based routing in s3\r\n\r\nAddresses #2631",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 354,
        "deletions": 17,
        "changed_files": 6,
        "created_at": "2021-03-04T16:25:59Z",
        "closed_at": "2021-03-04T20:57:57Z",
        "merged_at": "2021-03-04T20:57:57Z",
        "body": "* Fix Resource Condition issue\r\n* Add integration tests\r\n\r\nIssue fixed:\r\n#3661 Cloudformation - StateMachine dependencies cause exception\r\n#3668 Cloudformation - References to AWS::ApiGateway::RestApi cause exception",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2021-03-04T12:06:56Z",
        "closed_at": "2021-03-05T00:56:56Z",
        "merged_at": "2021-03-05T00:56:56Z",
        "body": "Fixes https://github.com/localstack/localstack/issues/3676\r\n\r\n**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 60,
        "deletions": 8,
        "changed_files": 6,
        "created_at": "2021-03-03T18:50:21Z",
        "closed_at": "2021-04-07T20:41:18Z",
        "merged_at": "2021-04-07T20:41:17Z",
        "body": "Closes #3669 \r\n\r\n- adds propagation of xray tracing header from sns to sqs message\r\n- adds relevant test case\r\n- bumps elasticmq version to enable XRay propagation support in SQS itself (moto does not seem to support XRay propagation at all)\r\n\r\n**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 9
    },
    {
        "merged": true,
        "additions": 42,
        "deletions": 5,
        "changed_files": 6,
        "created_at": "2021-03-02T18:45:52Z",
        "closed_at": "2021-03-02T21:07:42Z",
        "merged_at": "2021-03-02T21:07:42Z",
        "body": "- print the localstack version\r\n- print the build date\r\n- print the build commit id\r\n- print the container id if localstack is running within docker\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 26,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2021-03-02T16:54:21Z",
        "closed_at": "2021-03-02T18:27:29Z",
        "merged_at": "2021-03-02T18:27:29Z",
        "body": "Fixes #3663, also adding integration tests.\r\nSadly I could not find a better way to add an \"empty\" response as moto expectes a response [len == 2](https://github.com/spulec/moto/blob/master/moto/core/responses.py#L420), I'm open to suggestions though.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 56,
        "deletions": 0,
        "changed_files": 4,
        "created_at": "2021-03-01T17:49:08Z",
        "closed_at": "2021-03-01T19:32:21Z",
        "merged_at": "2021-03-01T19:32:21Z",
        "body": "Issue fixed:\r\n#3612 Failed to create event bus using cloudformation on localstack\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 135,
        "deletions": 379,
        "changed_files": 3,
        "created_at": "2021-02-28T20:56:27Z",
        "closed_at": "2021-02-28T22:12:54Z",
        "merged_at": "2021-02-28T22:12:54Z",
        "body": "Refactor tests and logic for EventBridge targets - addresses #3628",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 91,
        "deletions": 1,
        "changed_files": 4,
        "created_at": "2021-02-27T19:11:11Z",
        "closed_at": "2021-02-28T10:16:20Z",
        "merged_at": "2021-02-28T10:16:20Z",
        "body": "**Added**\r\n- CLI command to validate docker-compose file",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 5,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2021-02-26T16:52:54Z",
        "closed_at": "2021-02-26T18:40:35Z",
        "merged_at": "2021-02-26T18:40:35Z",
        "body": "This \"fix\" addresses the regression introduced by PR #3435 (as documented by issue #3486) when publishing from SNS to SQS and using ElasticMQ as SQS backend. While the SQS backend has been switched out to moto by default, it is still possible to set ElasticMQ as a SQS backend, making SNS publication to SQS unusable when using ElasticMQ as SQS backend. Until ElasticMQ is completely phased out (which would almost make localstack unusable for us, considering the performance issues we've experienced using moto), it should still be possible to send from SNS to SQS.\r\n\r\nI didn't really find a precedent for mocking env vars or constants (which would seem necessary for `SQS_PROVIDER` or `SQS_BACKEND_IMPL`), so I didn't add specific tests. If anyone has pointers for adding tests, I would be happy to implement them.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 77,
        "deletions": 14,
        "changed_files": 7,
        "created_at": "2021-02-26T11:56:36Z",
        "closed_at": "2021-02-26T16:06:53Z",
        "merged_at": "2021-02-26T16:06:53Z",
        "body": "Add CloudFormation support for Lambda::EventInvokeConfig - addresses #3648",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 11,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2021-02-25T01:22:47Z",
        "closed_at": "2021-03-22T23:28:39Z",
        "merged_at": "2021-03-22T23:28:39Z",
        "body": "Thanks to @whummer I found out my fix was mistaken on this comment: https://github.com/localstack/localstack/pull/3605#issuecomment-779403412 related to https://github.com/localstack/localstack/issues/3588\r\n\r\nI have created [these tests](https://github.com/localstack/localstack-java-utils/pull/42) on the Java utils repo that match these new requirements. Sadly the only way I could find to fix this out is to \"hack\" the bytes and strip the double quotes and recreate the bytesarray or string (depending on each case). \r\n\r\nComments and requests as usual are welcome.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 116,
        "deletions": 15,
        "changed_files": 8,
        "created_at": "2021-02-24T21:55:55Z",
        "closed_at": "2021-02-25T01:44:25Z",
        "merged_at": "2021-02-25T01:44:25Z",
        "body": "Add support and tests for StepFunctions intrinsic functions - addresses #3629\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 75,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2021-02-24T17:31:26Z",
        "closed_at": "2021-02-28T17:46:23Z",
        "merged_at": "2021-02-28T17:46:23Z",
        "body": "Fix:Delete lifecycle configuration\r\n\r\nhttps://github.com/localstack/localstack/issues/3639",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 32,
        "deletions": 23,
        "changed_files": 4,
        "created_at": "2021-02-20T19:48:17Z",
        "closed_at": "2021-02-22T15:50:34Z",
        "merged_at": "2021-02-22T15:50:34Z",
        "body": "**Fixed**\r\n- Cloudformation stack status when using `ExecuteChangeSet` to 'CREATE_COMPLETE'. Which was causing `cloudformation deploy` command to fail.\r\n\r\n**Refractored**\r\n- Refractored `SSM::Parameters` from `template_deployer` to `service_models`\r\n\r\n**Issue**\r\n- [760](https://github.com/localstack/localstack/issues/760)",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 11,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2021-02-19T23:13:59Z",
        "closed_at": "2021-02-20T18:44:43Z",
        "merged_at": "2021-02-20T18:44:43Z",
        "body": "\u2026 other installs (only docker).\r\n\r\nMost images on docker hub have this kind of 'execute me to get started' kind of code snippet. I have trialed multiple S3 replacements lately and it is really annoying if you need to read the docs to find the right parameters before having tried even the simplest use case.\r\n\r\n**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 49,
        "deletions": 5,
        "changed_files": 3,
        "created_at": "2021-02-19T15:55:11Z",
        "closed_at": "2021-02-20T01:38:28Z",
        "merged_at": "2021-02-20T01:38:28Z",
        "body": "- addresses https://github.com/localstack/localstack/issues/3616\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 211,
        "deletions": 35,
        "changed_files": 9,
        "created_at": "2021-02-19T07:28:34Z",
        "closed_at": "2021-02-19T10:04:38Z",
        "merged_at": "2021-02-19T10:04:38Z",
        "body": "Initial support for Kinesis consumers and SubscribeToShard via HTTP2 push events. Addresses #3611 #893",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 9,
        "deletions": 0,
        "changed_files": 3,
        "created_at": "2021-02-18T20:50:57Z",
        "closed_at": "2021-02-19T11:03:07Z",
        "merged_at": "2021-02-19T11:03:07Z",
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 47,
        "deletions": 0,
        "changed_files": 5,
        "created_at": "2021-02-17T19:57:28Z",
        "closed_at": "2021-07-17T10:24:32Z",
        "merged_at": null,
        "body": "This is the initial framework for `elbv2` usage. It acts more as a pass-through to `moto` right now, but it's expandable.\r\n\r\nThe one hitch I ran into was the service name `elbv2` vs the API endpoint being parsed and expecting `elasticloadbalancing` for it's URL response, so for that I added an `elif` in the edge service. Wasn't sure if I should've done something more with the starter or listener to register it properly as the endpoint URL vs the service name.",
        "comments": 5
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2021-02-16T20:15:59Z",
        "closed_at": "2021-02-17T18:26:17Z",
        "merged_at": "2021-02-17T18:26:17Z",
        "body": "- addresses https://github.com/localstack/localstack/issues/3562",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 2,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2021-02-14T23:49:03Z",
        "closed_at": "2021-04-07T21:29:19Z",
        "merged_at": null,
        "body": "AWS XRay tracing header is supported and trace propagation works as expected since EMQ 0.15.8 -> https://github.com/softwaremill/elasticmq/pull/405\r\n\r\nFixes https://github.com/localstack/localstack/issues/3528",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2021-02-14T20:23:20Z",
        "closed_at": "2021-02-15T19:06:30Z",
        "merged_at": "2021-02-15T19:06:30Z",
        "body": "When the data put into kinesis streams is put into an `SdkBytes` byte format and not standard bytes or base64 format it needs to be decoded. This PR fixes that issue.\r\n\r\nFixes https://github.com/localstack/localstack/issues/3588\r\n\r\nSteps to reproduce:\r\n\r\nJava code:\r\n`src/main/java/com/test/PutDataExample.java`\r\n```\r\npackage com.test;\r\n\r\nimport java.nio.ByteBuffer;\r\n\r\nimport com.amazonaws.auth.AWSCredentials;\r\nimport com.amazonaws.auth.BasicAWSCredentials;\r\nimport com.amazonaws.services.kinesis.AmazonKinesisClient;\r\nimport com.amazonaws.services.kinesis.model.PutRecordRequest;\r\nimport com.amazonaws.services.kinesis.model.PutRecordResult;\r\n\r\npublic class PutDataExample {\r\n\r\n  AmazonKinesisClient kinesisClient;\r\n\r\n  PutDataExample() {\r\n    String accessKey = \"test\";\r\n    String secretKey = \"test\";\r\n    AWSCredentials credentials = new BasicAWSCredentials(accessKey, secretKey);\r\n    kinesisClient = new AmazonKinesisClient(credentials);\r\n    kinesisClient.setEndpoint(\"http://localhost:4566\", \"kinesis\", \"us-east-1\");\r\n    System.out.println(\"starting the PutDataExample Application\");\r\n  }\r\n\r\n  public void putData(String fileContent, String session) throws Exception {\r\n    final String myStreamName = \"test\";\r\n\r\n    PutRecordRequest putRecordRequest = new PutRecordRequest();\r\n    putRecordRequest.setStreamName(myStreamName);\r\n    String putData = fileContent;\r\n    putRecordRequest.setData(ByteBuffer.wrap(putData.getBytes()));\r\n    putRecordRequest.setPartitionKey(\"session\" + session);\r\n    PutRecordResult putRecordResult = kinesisClient.putRecord(putRecordRequest);\r\n    System.out.println(\"Put Record Successful, partition key : \" + putRecordRequest.getPartitionKey() + \", ShardID : \" + putRecordResult.getShardId());\r\n    System.out.println(fileContent);\r\n    System.out.println(\"Sequence Number: \" + putRecordResult.getSequenceNumber());\r\n\r\n  }\r\n\r\n  public static void main(String[] args) throws Exception {\r\n    new PutDataExample().putData(\"User has logged in successfully\", \"s1\");\r\n    new PutDataExample().putData(\"User started to bet \", \"s2\");\r\n    new PutDataExample().putData(\"User has logged out\", \"s3\");\r\n    new PutDataExample().putData(\"User has exit from the system\", \"s4\");\r\n  }\r\n}\r\n```\r\n\r\n`pom.xml` (I'm probably using more dependencies than expected):\r\n```\r\n\r\n\r\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\r\n   <modelVersion>4.0.0</modelVersion>\r\n   <groupId>com.test.</groupId>\r\n   <artifactId>my-app</artifactId>\r\n   <version>1.0-SNAPSHOT</version>\r\n   <properties>\r\n      <maven.compiler.source>1.7</maven.compiler.source>\r\n      <maven.compiler.target>1.7</maven.compiler.target>\r\n   </properties>\r\n   <dependencies>\r\n      <dependency>\r\n         <groupId>software.amazon.kinesis</groupId>\r\n         <artifactId>amazon-kinesis-client</artifactId>\r\n         <version>2.3.3</version>\r\n      </dependency>\r\n      <dependency>\r\n         <groupId>com.amazonaws</groupId>\r\n         <artifactId>aws-java-sdk</artifactId>\r\n         <version>1.11.954</version>\r\n      </dependency>\r\n      <dependency>\r\n         <groupId>com.amazonaws</groupId>\r\n         <artifactId>aws-java-sdk-core</artifactId>\r\n         <version>1.11.954</version>\r\n      </dependency>\r\n      <dependency>\r\n         <groupId>software.amazon.awssdk</groupId>\r\n         <artifactId>kinesis</artifactId>\r\n         <version>2.15.81</version>\r\n      </dependency>\r\n   </dependencies>\r\n   <build>\r\n      <plugins>\r\n         <plugin>\r\n            <artifactId>maven-assembly-plugin</artifactId>\r\n            <configuration>\r\n               <archive>\r\n                  <manifest>\r\n                     <mainClass>com.test.PutDataExample</mainClass>\r\n                  </manifest>\r\n               </archive>\r\n               <descriptorRefs>\r\n                  <descriptorRef>jar-with-dependencies</descriptorRef>\r\n               </descriptorRefs>\r\n            </configuration>\r\n         </plugin>\r\n      </plugins>\r\n   </build>\r\n</project>\r\n```\r\n\r\n3. Execute `mvn clean compile assembly:single`\r\n4. Create the stream:\r\n```\r\nawslocal kinesis create-stream --stream-name test --shard-count 1\r\n```\r\n5. Then insert data into the stream: `java -cp target/my-app-1.0-SNAPSHOT-jar-with-dependencies.jar com.test.PutDataExample`\r\n6. Get the shard iterator:\r\n```\r\nawslocal kinesis get-shard-iterator --stream-name test --shard-id shardId-000000000000 --shard-iterator-type TRIM_HORIZON\r\n```\r\n7. Insert data in base64 format with the following python code:\r\n```\r\nimport base64\r\nimport boto3\r\nimport json\r\nimport random\r\nimport calendar\r\nfrom datetime import datetime\r\n\r\nthing_id = 'aa-bb'\r\n\r\npayload = {\r\n            'prop': str(random.randint(40, 120)),\r\n            'timestamp': calendar.timegm(datetime.utcnow().timetuple()),\r\n            'thing_id': thing_id\r\n          }\r\n\r\nclient = boto3.client('kinesis', region_name='us-east-1', endpoint_url='http://localhost:4566', aws_access_key_id='test', aws_secret_access_key='test')\r\n\r\nresponse = client.put_record(\r\n  StreamName='test',\r\n  Data=base64.b64encode(json.dumps(payload).encode('utf-8')),\r\n  PartitionKey=thing_id\r\n)\r\n```\r\n\r\n\r\n8. Read data from it:\r\n```\r\nawslocal kinesis get-records --shard-iterator  $SHARD_ITERATOR_STR\r\n```\r\nExample output:\r\n```\r\n{\r\n    \"Records\": [\r\n        {\r\n            \"SequenceNumber\": \"49615513957620404616321850166192823801450482321451909122\",\r\n            \"ApproximateArrivalTimestamp\": \"2021-02-14T21:12:49+01:00\",\r\n            \"Data\": \"User has logged in successfully\",\r\n            \"PartitionKey\": \"sessions1\"\r\n        },\r\n        {\r\n            \"SequenceNumber\": \"49615513957620404616321850166194032727270096950626615298\",\r\n            \"ApproximateArrivalTimestamp\": \"2021-02-14T21:12:49+01:00\",\r\n            \"Data\": \"User started to bet \",\r\n            \"PartitionKey\": \"sessions2\"\r\n        },\r\n        {\r\n            \"SequenceNumber\": \"49615513957620404616321850166195241653089711579801321474\",\r\n            \"ApproximateArrivalTimestamp\": \"2021-02-14T21:12:49+01:00\",\r\n            \"Data\": \"User has logged out\",\r\n            \"PartitionKey\": \"sessions3\"\r\n        },\r\n        {\r\n            \"SequenceNumber\": \"49615513957620404616321850166196450578909326208976027650\",\r\n            \"ApproximateArrivalTimestamp\": \"2021-02-14T21:12:49+01:00\",\r\n            \"Data\": \"User has exit from the system\",\r\n            \"PartitionKey\": \"sessions4\"\r\n        },\r\n        {\r\n            \"SequenceNumber\": \"49615513957620404616321850166197659504728943793088233474\",\r\n            \"ApproximateArrivalTimestamp\": \"2021-02-14T21:13:32+01:00\",\r\n            \"Data\": \"ZXlKd2NtOXdJam9nSWpjM0lpd2dJblJwYldWemRHRnRjQ0k2SURFMk1UTXpNek0yTURZc0lDSjBhR2x1WjE5cFpDSTZJQ0poWVMxaVlpSjk=\",\r\n            \"PartitionKey\": \"aa-bb\"\r\n        }\r\n    ],\r\n    \"NextShardIterator\": \"AAAAAAAAAAGpB9vwvdjBrklL9AR2RkFT9BdOh2yW52J2DEfzTDDzgbACyaLBJy2Vwkj6Uc4YoeGpxHiljGK5/YMh63MEQEwFxEKDND0AJckZZFlHaRnjYU4uOPZf7ade7fsU1ype77b7QQSzLrjFnmWqP+qZMOn3CmJpIIsin0QhSZT01rdUwk89qJ1JTDVL41zSUjEneEk=\",\r\n    \"MillisBehindLatest\": 0\r\n}\r\n```",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2021-02-14T07:59:21Z",
        "closed_at": "2021-02-14T15:50:08Z",
        "merged_at": "2021-02-14T15:50:08Z",
        "body": "- addresses https://github.com/localstack/localstack/issues/3595\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 339,
        "deletions": 39,
        "changed_files": 3,
        "created_at": "2021-02-13T18:53:42Z",
        "closed_at": "2021-03-09T17:10:18Z",
        "merged_at": "2021-03-09T17:10:18Z",
        "body": "Added Signature calculation algorithm for version 4 pre-sign URL.\r\nAdded test cases for the different types of methods and different types of requests (valid, invalid and expired).\r\n#3522 \r\n#3266 ",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 111,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2021-02-13T10:46:32Z",
        "closed_at": "2021-02-15T18:57:45Z",
        "merged_at": "2021-02-15T18:57:45Z",
        "body": "Fix: added event handler\r\nhttps://github.com/localstack/localstack/issues/3352",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 57,
        "deletions": 12,
        "changed_files": 2,
        "created_at": "2021-02-12T20:34:18Z",
        "closed_at": "2021-02-13T13:41:06Z",
        "merged_at": "2021-02-13T13:41:06Z",
        "body": "The code to `validate_api_key` only compared the key in the request headers to one api key configured for the API Gateway. All usage plans were iterated over for the stage, however only the last found one was recorded. Similarly, all keys for the usage plan were iterated over, but only the last one was compared to the request.\r\n\r\nThis PR changes `validate_api_key` to create a list of usage plans, then iterate over each plan until an api key is found that matches the key in the request, or return False if no match is found.\r\n",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2021-02-12T18:20:24Z",
        "closed_at": "2021-02-18T17:12:33Z",
        "merged_at": null,
        "body": "**Fixed**\r\n- Eventbridge not letting detail-type pass though the filter\r\n\r\n**Issue**\r\n- #3586 ",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 25,
        "deletions": 3,
        "changed_files": 2,
        "created_at": "2021-02-12T17:22:53Z",
        "closed_at": "2021-04-10T10:53:21Z",
        "merged_at": null,
        "body": "# Detailed description\r\nThis is mostly copy pasted from https://github.com/localstack/localstack/issues/3594 which I submitted.\r\n\r\nThe MessageStructure json for SNS messages does not work as expected with raw message delivery enabled. The fix added [in this pull request](https://github.com/localstack/localstack/pull/668) gets most of the way there. The bug is the `if` block on [line 558](https://github.com/localstack/localstack/blob/master/localstack/services/sns/sns_listener.py#L558) needs to be _AFTER_ the `if` block on [line 561](https://github.com/localstack/localstack/blob/master/localstack/services/sns/sns_listener.py#L561) that parses out the default block.\r\n\r\n## Expected behavior\r\nA SQS subscription to an SNS topic with raw message delivery enabled should strip out the `default` top level json key. So the `Body` field should look like this: `{\"hello\":\"world\"}`. This is how AWS actually works with this setup.\r\n\r\n## Actual behavior\r\nMessage body looks like this: `{\"default\":\"{\\\"hello\\\":\\\"world\\\"}\"}`. This is different from how AWS works.\r\n\r\n# Steps to reproduce\r\nWith this setup script:\r\n```\r\nawslocal sns create-topic --name MyEvents\r\nawslocal sqs create-queue --queue-name MyQueue\r\nawslocal sns subscribe \\\r\n    --topic-arn arn:aws:sns:us-east-1:000000000000:MyEvents \\\r\n    --protocol sqs \\\r\n    --attributes RawMessageDelivery=true \\\r\n    --notification-endpoint http://localhost:4566/000000000000/MyQueue\r\n```\r\n\r\nAnd this publish message (typescript):\r\n```\r\nconst myData = { hello: 'world' };\r\nconst snsMsg: AWS.SNS.PublishInput = {\r\n  TopicArn: 'arn:aws:sns:us-east-1:000000000000:MyEvents',\r\n  Message: JSON.stringify({ default: JSON.stringify(myData) }),\r\n  MessageStructure: 'json'\r\n}\r\n```\r\n\r\n## Command used to start LocalStack\r\nDocker compose:\r\n```\r\nversion: '3.7'\r\n\r\nservices:\r\n  localstack:\r\n    container_name: '${LOCALSTACK_DOCKER_NAME-localstack}'\r\n    image: localstack/localstack\r\n    networks:\r\n      - localstack-net\r\n    healthcheck:\r\n      test: awslocal sns list-topics && awslocal sqs list-queues\r\n      interval: 3s\r\n      timeout: 10s\r\n    ports:\r\n      - '4566-4599:4566-4599'\r\n      - '8081:8080'\r\n    environment:\r\n      - DEFAULT_REGION=us-east-1\r\n      - SERVICES=sns:4575,sqs:4576\r\n      - DEBUG=${DEBUG- }\r\n      - DATA_DIR=${DATA_DIR- }\r\n      - PORT_WEB_UI=8081\r\n      - LAMBDA_EXECUTOR=${LAMBDA_EXECUTOR- }\r\n      - KINESIS_ERROR_PROBABILITY=${KINESIS_ERROR_PROBABILITY- }\r\n      - DOCKER_HOST=unix:///var/run/docker.sock\r\n      - HOST_TMP_FOLDER=${TMPDIR}\r\n    volumes:\r\n      - '${TMPDIR:-/tmp/localstack}:/tmp/localstack'\r\n      - '/var/run/docker.sock:/var/run/docker.sock'\r\n      - ./bin:/docker-entrypoint-initaws.d\r\n\r\nnetworks:\r\n  localstack-net:\r\n    external: false\r\n    driver: bridge\r\n    name: localstack-net\r\n```",
        "comments": 5
    },
    {
        "merged": true,
        "additions": 144,
        "deletions": 0,
        "changed_files": 4,
        "created_at": "2021-02-10T15:13:39Z",
        "closed_at": "2021-02-11T23:18:22Z",
        "merged_at": "2021-02-11T23:18:22Z",
        "body": "Integrate moto swf support:\r\nhttps://github.com/spulec/moto/blob/master/IMPLEMENTATION_COVERAGE.md#swf\r\n\r\nPossibly satisfy this issue:\r\nhttps://github.com/localstack/localstack/issues/116",
        "comments": 9
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2021-02-10T05:23:53Z",
        "closed_at": "2021-02-10T10:21:41Z",
        "merged_at": "2021-02-10T10:21:41Z",
        "body": "We have been developing [LocalStack .Net Client Library](https://github.com/localstack-dotnet/localstack-dotnet-client) for two years and updating it regularly. We thought it might be useful to other AWS and .NET users like us. ",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 9,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2021-02-08T19:08:37Z",
        "closed_at": "2021-02-09T00:58:55Z",
        "merged_at": "2021-02-09T00:58:55Z",
        "body": "Add API GET method to list the available ES versions to be installed.\r\n\r\n```\r\n$ awslocal es list-elasticsearch-versions\r\n{\r\n    \"ElasticsearchVersions\": [\r\n        \"7.7.0\",\r\n        \"7.4.0\",\r\n        \"7.1.0\",\r\n        \"6.7.0\"\r\n    ]\r\n}\r\n```\r\n\r\nFixes https://github.com/localstack/localstack/issues/3439",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 35,
        "deletions": 22,
        "changed_files": 3,
        "created_at": "2021-02-08T18:07:13Z",
        "closed_at": "2021-02-08T20:24:46Z",
        "merged_at": "2021-02-08T20:24:46Z",
        "body": "**added**\r\n- sns subscription delete method\r\n\r\n**fixed**\r\n- cloudformation stack deletion will only mark stack as deleted\r\n\r\n**Issue**\r\n- [3495](https://github.com/localstack/localstack/issues/3495)",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 10,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2021-02-08T17:41:54Z",
        "closed_at": "2021-02-08T22:47:48Z",
        "merged_at": "2021-02-08T22:47:48Z",
        "body": "- addresses https://github.com/localstack/localstack/issues/3563\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2021-02-08T17:20:39Z",
        "closed_at": "2021-02-08T23:54:27Z",
        "merged_at": "2021-02-08T23:54:27Z",
        "body": "Added fix for taking the value from `config` on env. variable update using the backdoor config API",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 6,
        "deletions": 6,
        "changed_files": 2,
        "created_at": "2021-02-07T23:11:35Z",
        "closed_at": "2021-09-06T22:50:31Z",
        "merged_at": null,
        "body": "FIx for a Json Parse bug.",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 3,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2021-02-07T19:09:26Z",
        "closed_at": "2021-02-16T15:19:24Z",
        "merged_at": null,
        "body": "The `config.get('Filter')` can return `None` if the configuration had one\r\nthere, which isn't correct, instead it should treat it as an empty filter set.\r\n\r\n---\r\n\r\nI'm happy to refactor the tests to make it possible to separate this behavior out, this seemed like the smallest change I could make that would run your full CI suite and validate the change.",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 10,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2021-02-07T07:37:00Z",
        "closed_at": "2021-02-07T11:48:09Z",
        "merged_at": "2021-02-07T11:48:09Z",
        "body": "Add email endpoint for SNS\r\nhttps://github.com/localstack/localstack/issues/3532",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 17,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2021-02-07T05:54:36Z",
        "closed_at": "2021-05-30T10:19:11Z",
        "merged_at": null,
        "body": "Fix:Add location to s3 create bucket URL\r\n\r\nhttps://github.com/localstack/localstack/issues/3540",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 19,
        "deletions": 4,
        "changed_files": 2,
        "created_at": "2021-02-06T11:01:48Z",
        "closed_at": "2021-02-06T12:29:28Z",
        "merged_at": "2021-02-06T12:29:28Z",
        "body": "Fix tests for ACM certs created by Terraform",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 16,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2021-02-06T09:06:18Z",
        "closed_at": "2021-02-07T13:37:06Z",
        "merged_at": "2021-02-07T13:37:06Z",
        "body": "- addresses https://github.com/localstack/localstack/issues/3555\r\n\r\n**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 54,
        "deletions": 29,
        "changed_files": 3,
        "created_at": "2021-02-06T03:28:33Z",
        "closed_at": "2021-02-07T22:56:30Z",
        "merged_at": "2021-02-07T22:56:30Z",
        "body": "* Fixing elasticsearch APIs checks, thus removing error messages on startup\r\n* Domain creation only creates one instance of ES (previously 1 instance per domain created)\r\n* Making startup of ES sync instead of async, we need to wait for ES to come up\r\n* Minor unit testing to confirm API is working as expected\r\n\r\nAddresses #3081 and dup #3490",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 74,
        "deletions": 7,
        "changed_files": 2,
        "created_at": "2021-02-04T20:25:25Z",
        "closed_at": "2021-02-04T23:45:21Z",
        "merged_at": "2021-02-04T23:45:21Z",
        "body": "Support associate_vpc for Route53",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 19,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2021-02-04T18:29:17Z",
        "closed_at": "2021-02-04T20:35:40Z",
        "merged_at": "2021-02-04T20:35:40Z",
        "body": "**fixed**\r\n- added attribute `TreatMissingData` in Cloudwatch `PutMetricAlarm`\r\n\r\n**Reference**\r\n- [PutMetricAlarm](https://docs.aws.amazon.com/AmazonCloudWatch/latest/APIReference/API_PutMetricAlarm.html)",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 143,
        "deletions": 6,
        "changed_files": 1,
        "created_at": "2021-02-03T17:56:43Z",
        "closed_at": "2021-02-03T21:16:07Z",
        "merged_at": "2021-02-03T21:16:07Z",
        "body": "**Improved**\r\n- test_put_subscription_filter_lambda\r\n\r\n**Added:**\r\n- test_put_subscription_filter_firehose\r\n- test_put_subscription_filter_kinesis",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 112,
        "deletions": 6,
        "changed_files": 4,
        "created_at": "2021-02-03T17:35:03Z",
        "closed_at": "2021-11-02T19:49:15Z",
        "merged_at": null,
        "body": "Added support for the test-invoke-method feature. It tests the integrated method before making the deployment of the api-gateway.\r\nAlso added simulated method, headers, body, and pathWithQueryString.\r\nAdded test cases for test-invoke-method.\r\nFix for #3291 ",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 3,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2021-02-03T16:09:39Z",
        "closed_at": "2021-12-26T17:52:01Z",
        "merged_at": null,
        "body": "Fixes the error `Object of type bytearray is not JSON serializable` in line 158: `response._content = json.dumps(results)`.\r\n\r\n\r\nError Stack:\r\n```\r\nlocalstack            | 2021-02-03T16:07:48:WARNING:localstack.utils.server.http2_server: Error in proxy handler for request POST http://localhost:4800/: Object of type bytearray is not JSON serializable Traceback (most recent call last):\r\nlocalstack            |   File \"/opt/code/localstack/localstack/utils/server/http2_server.py\", line 107, in index\r\nlocalstack            |     raise result\r\nlocalstack            |   File \"/opt/code/localstack/localstack/utils/bootstrap.py\", line 593, in run\r\nlocalstack            |     result = self.func(self.params)\r\nlocalstack            |   File \"/opt/code/localstack/localstack/utils/async_utils.py\", line 28, in _run\r\nlocalstack            |     return fn(*args, **kwargs)\r\nlocalstack            |   File \"/opt/code/localstack/localstack/services/generic_proxy.py\", line 605, in handler\r\nlocalstack            |     response = modify_and_forward(method=method, path=path_with_params, data_bytes=data, headers=headers,\r\nlocalstack            |   File \"/opt/code/localstack/localstack/services/generic_proxy.py\", line 373, in modify_and_forward\r\nlocalstack            |     listener_result = listener.forward_request(method=method,\r\nlocalstack            |   File \"/opt/code/localstack/localstack/services/edge.py\", line 105, in forward_request\r\nlocalstack            |     return do_forward_request(api, method, path, data, headers, port=port)\r\nlocalstack            |   File \"/opt/code/localstack/localstack/services/edge.py\", line 116, in do_forward_request\r\nlocalstack            |     result = do_forward_request_inmem(api, method, path, data, headers, port=port)\r\nlocalstack            |   File \"/opt/code/localstack/localstack/services/edge.py\", line 136, in do_forward_request_inmem\r\nlocalstack            |     response = modify_and_forward(method=method, path=path, data_bytes=data, headers=headers,\r\nlocalstack            |   File \"/opt/code/localstack/localstack/services/generic_proxy.py\", line 441, in modify_and_forward\r\nlocalstack            |     updated_response = update_listener.return_response(**kwargs)\r\nlocalstack            |   File \"/opt/code/localstack/localstack/services/kinesis/kinesis_listener.py\", line 158, in return_response\r\nlocalstack            |     response._content = json.dumps(results)\r\nlocalstack            |   File \"/usr/lib/python3.8/json/__init__.py\", line 231, in dumps\r\nlocalstack            |     return _default_encoder.encode(obj)\r\nlocalstack            |   File \"/usr/lib/python3.8/json/encoder.py\", line 199, in encode\r\nlocalstack            |     chunks = self.iterencode(o, _one_shot=True)\r\nlocalstack            |   File \"/usr/lib/python3.8/json/encoder.py\", line 257, in iterencode\r\nlocalstack            |     return _iterencode(o, 0)\r\nlocalstack            |   File \"/usr/lib/python3.8/json/encoder.py\", line 179, in default\r\nlocalstack            |     raise TypeError(f'Object of type {o.__class__.__name__} '\r\nlocalstack            | TypeError: Object of type bytearray is not JSON serializable\r\n```\r\n\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 11,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2021-02-02T18:07:54Z",
        "closed_at": "2021-02-03T17:24:40Z",
        "merged_at": "2021-02-03T17:24:40Z",
        "body": "- Subscribe\r\n- Unsubscribe\r\n- ConfirmSubscription\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 101,
        "deletions": 41,
        "changed_files": 3,
        "created_at": "2021-02-02T17:45:48Z",
        "closed_at": "2021-02-03T13:14:52Z",
        "merged_at": "2021-02-03T13:14:51Z",
        "body": "First shot to setup lambda with event source mapping.\r\nI know there are some corrections to do, had to do some minor tricks and validations as we are (for example) checking for the `source_arn` on the `check_batch_size_range` but the JSON structure is very different when using Self managed kafka clusters as the flags are not the same. But one step forward to support more source mappings. Open to comments here of course.\r\n\r\nWorking as expected though and fixes #3534 ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 21,
        "deletions": 1,
        "changed_files": 4,
        "created_at": "2021-02-01T16:15:43Z",
        "closed_at": "2021-02-01T22:27:24Z",
        "merged_at": "2021-02-01T22:27:24Z",
        "body": "1) LS_LOG env. variable which allows log levels to be specified ('debug', 'info', 'warn', 'error', 'warning')\r\n2) Currently overrides the DEBUG env. variable if LS_LOG is set",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 23,
        "deletions": 11,
        "changed_files": 1,
        "created_at": "2021-01-31T22:25:31Z",
        "closed_at": "2021-02-01T00:34:12Z",
        "merged_at": "2021-02-01T00:34:12Z",
        "body": "Refactor API Gateway invocation logic for better extensibility (extract `invoke_rest_api_integration(..)` into separate function)",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 47,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2021-01-30T19:51:00Z",
        "closed_at": "2021-01-31T00:04:05Z",
        "merged_at": "2021-01-31T00:04:05Z",
        "body": "\r\nFix:restore deep archive object",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 36,
        "deletions": 10,
        "changed_files": 3,
        "created_at": "2021-01-30T18:40:03Z",
        "closed_at": "2021-01-30T19:42:28Z",
        "merged_at": "2021-01-30T19:42:28Z",
        "body": "Add backdoor API to receive raw CloudWatch metrics - addresses #3508\r\n\r\nExample:\r\n```\r\n$ curl http://localhost:4566/cloudwatch/metrics/raw\r\n{'metrics': [{'ns': 'some/thing', 'n': 'someMetric', 'v': 23.0, 't': '2021-01-30T18:35:30.132Z', 'd': []}, {'ns': 'some/thing', 'n': 'someMetric', 'v': 18.0, 't': '2021-01-30T18:35:30.160Z', 'd': []}, {'ns': 'ug/thing', 'n': 'ug', 'v': 23.0, 't': '2021-01-30T18:35:30.186Z', 'd': []}]}\r\n```",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 9,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2021-01-30T08:48:39Z",
        "closed_at": "2021-01-31T00:22:54Z",
        "merged_at": "2021-01-31T00:22:54Z",
        "body": "- addresses https://github.com/localstack/localstack/issues/3485",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 5,
        "changed_files": 1,
        "created_at": "2021-01-29T02:26:21Z",
        "closed_at": "2021-01-30T13:34:58Z",
        "merged_at": "2021-01-30T13:34:58Z",
        "body": " Specifying `debug_port` `LAMBDA_JAVA_OPTS not being respected per issue https://github.com/localstack/localstack/issues/3479\r\n\r\nThis fixes it.\r\n\r\nTested locally:\r\n`LAMBDA_JAVA_OPTS='-agentlib:jdwp=transport=dt_socket,server=y,suspend=y,address=0.0.0.0:5025' DEBUG=1 LAMBDA_EXECUTOR=docker LAMBDA_REMOTE_DOCKER=true SERVICES=lambda HOSTNAME=localhost HOSTNAME_EXTERNAL=localhost  make docker-mount-run`\r\n\r\nAnd via docker-compose.yml as well.\r\n\r\nApp is listening as expected:\r\n`1c3d7b3bd588   lambci/lambda:java8     \"bash -c 'cd /var/ta\u2026\"   14 seconds ago       Up 12 seconds       0.0.0.0:5025->5025/tcp                                               inspiring_villani`\r\n\r\n```\r\n$ telnet localhost 5025\r\nTrying ::1...\r\nTrying 127.0.0.1...\r\nConnected to localhost.\r\nEscape character is '^]'.\r\n```\r\n\r\nApp is listening on the right port as well (13A1 is 5025 in hex):\r\n```\r\n$ cat /proc/8/net/tcp\r\n  sl  local_address rem_address   st tx_queue rx_queue tr tm->when retrnsmt   uid  timeout inode                                                     \r\n   0: 00000000:13A1 00000000:0000 0A 00000000:00000000 00:00000000 00000000   993        0 19084567 1 000000008bf3b268 100 0 0 10 0  \r\n```",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 116,
        "deletions": 24,
        "changed_files": 2,
        "created_at": "2021-01-28T19:22:04Z",
        "closed_at": "2021-01-29T00:30:48Z",
        "merged_at": "2021-01-29T00:30:48Z",
        "body": "**Added:**\r\n\r\n- added lambda, kinesis, firehose invocation on put-log-event\r\n- implemented put-subscription api\r\n- added util function for retriving service name from arn\r\n\r\n**Support Case Ref:**\r\n- [Using CloudWatch Logs Subscription Filters](https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/SubscriptionFilters.html)",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 149,
        "deletions": 58,
        "changed_files": 4,
        "created_at": "2021-01-27T18:33:07Z",
        "closed_at": "2021-01-28T16:36:34Z",
        "merged_at": "2021-01-28T16:36:34Z",
        "body": "* EC2::SecurityGroup\r\n* IAM::InstanceProfile\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 182,
        "deletions": 25,
        "changed_files": 5,
        "created_at": "2021-01-27T17:03:55Z",
        "closed_at": "2021-01-27T20:02:49Z",
        "merged_at": "2021-01-27T20:02:48Z",
        "body": "Enhance CloudFormation support for API Gateway resources",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 154,
        "deletions": 77,
        "changed_files": 5,
        "created_at": "2021-01-26T20:24:49Z",
        "closed_at": "2021-01-26T23:26:53Z",
        "merged_at": "2021-01-26T23:26:53Z",
        "body": "Enhance CloudFormation logic for managed and inline IAM policies ",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2021-01-26T18:40:04Z",
        "closed_at": "2021-01-29T13:23:23Z",
        "merged_at": null,
        "body": "Using the integration between dynamodb stream and lambda with the pro version of localstack I ran into the problem that the lambdas were not invoked.\r\nI found that inside the modified_and_forward function of the generic_proxy module, when it updates listeners, the dictionary \"kwargs\" is created using the possibly outdated variable \"data_bytes\", instead it should be \"data\".\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 26,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2021-01-26T16:17:28Z",
        "closed_at": "2021-01-29T20:48:25Z",
        "merged_at": "2021-01-29T20:48:25Z",
        "body": "Fix:Kinesis:Timestamp in get records\r\n\r\nhttps://github.com/localstack/localstack/issues/3488",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2021-01-25T16:52:05Z",
        "closed_at": "2021-01-27T18:56:29Z",
        "merged_at": "2021-01-27T18:56:29Z",
        "body": "Now the content of the records is correct when working decoding in CBOR mode.\r\nThis should fix (finally) issue #3208 ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 9,
        "deletions": 7,
        "changed_files": 1,
        "created_at": "2021-01-24T17:55:46Z",
        "closed_at": "2021-01-25T08:33:24Z",
        "merged_at": "2021-01-25T08:33:23Z",
        "body": "**Fixed:**\r\n\r\n- Fixed cloudwatch log subscription lambda function invocation.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 72,
        "deletions": 42,
        "changed_files": 5,
        "created_at": "2021-01-24T10:38:58Z",
        "closed_at": "2021-01-24T13:28:24Z",
        "merged_at": "2021-01-24T13:28:24Z",
        "body": "Minor refactoring of Lambda API and handling of edge cases, for better extensibility",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2021-01-23T18:50:00Z",
        "closed_at": "2021-01-24T10:29:22Z",
        "merged_at": "2021-01-24T10:29:22Z",
        "body": "Fixes https://github.com/localstack/localstack/issues/3502, it looks there's a malformed call to the function that returns API throttling errors.",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 35,
        "deletions": 1,
        "changed_files": 4,
        "created_at": "2021-01-22T22:19:44Z",
        "closed_at": "2021-01-23T18:52:12Z",
        "merged_at": null,
        "body": "I don't know if this is a problem or not, but it's something I noticed when testing dynamodb error injection & thought I would bring to the attention of maintainers.\r\n\r\nWill write up in an issue in just a sec; this is just to make it easy to replicate",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 21,
        "deletions": 4,
        "changed_files": 2,
        "created_at": "2021-01-21T17:16:35Z",
        "closed_at": "2021-01-21T23:49:08Z",
        "merged_at": "2021-01-21T23:49:08Z",
        "body": "This PR addresses #3175 and #3453 \r\n\r\nJAVA SDK was throwing errors when put object API is being called with a slash in the key name.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 6,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2021-01-21T02:54:02Z",
        "closed_at": "2021-01-21T23:43:11Z",
        "merged_at": "2021-01-21T23:43:11Z",
        "body": "This PR stringify the secretsmanager response to mirror SSM behaviour when getting a parameter that references a secret.\r\n[3496](https://github.com/localstack/localstack/issues/3496)",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 20,
        "deletions": 11,
        "changed_files": 1,
        "created_at": "2021-01-20T21:30:38Z",
        "closed_at": "2021-01-21T20:08:03Z",
        "merged_at": "2021-01-21T20:08:03Z",
        "body": "- addresses https://github.com/localstack/localstack/issues/3492\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 37,
        "deletions": 5,
        "changed_files": 3,
        "created_at": "2021-01-19T21:49:38Z",
        "closed_at": "2021-01-23T17:26:09Z",
        "merged_at": "2021-01-23T17:26:09Z",
        "body": "With this patch, the ses-listener patches the xml error responses. Now the java -sdk can show the correct error messages.\r\n\r\nthis fixes the issue #3466 \r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 13,
        "deletions": 8,
        "changed_files": 2,
        "created_at": "2021-01-18T21:29:09Z",
        "closed_at": "2021-01-19T19:02:19Z",
        "merged_at": "2021-01-19T19:02:19Z",
        "body": "- addresses https://github.com/localstack/localstack/issues/3467\r\n\r\n**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 0,
        "deletions": 52,
        "changed_files": 1,
        "created_at": "2021-01-18T21:20:29Z",
        "closed_at": "2021-01-19T14:50:15Z",
        "merged_at": "2021-01-19T14:50:15Z",
        "body": "- the fix is done in upstream so its no longer required.\r\n- left the test case",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 14,
        "deletions": 13,
        "changed_files": 4,
        "created_at": "2021-01-18T20:26:28Z",
        "closed_at": "2021-01-20T15:06:55Z",
        "merged_at": "2021-01-20T15:06:55Z",
        "body": "- addresses https://github.com/localstack/localstack/issues/3475\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 343,
        "deletions": 30,
        "changed_files": 7,
        "created_at": "2021-01-18T17:43:08Z",
        "closed_at": "2021-01-20T16:27:59Z",
        "merged_at": "2021-01-20T16:27:59Z",
        "body": "* Add support for EC2:Instance\r\n* Fix issue with Fn:FindInMap\r\n* Add integration test\r\n\r\nIssues fixed:\r\n#2379 Can't update stack (aws cloudformation)\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 23,
        "deletions": 5,
        "changed_files": 3,
        "created_at": "2021-01-18T16:25:38Z",
        "closed_at": "2021-01-19T10:39:58Z",
        "merged_at": "2021-01-19T10:39:58Z",
        "body": "**Added**\r\n- Support for tags in cloudformation\r\n\r\n**Fixed**\r\n- [3476](https://github.com/localstack/localstack/issues/3476)",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 112,
        "deletions": 5,
        "changed_files": 4,
        "created_at": "2021-01-17T03:49:07Z",
        "closed_at": "2021-01-19T11:17:09Z",
        "merged_at": "2021-01-19T11:17:09Z",
        "body": "* Fix issue with IAM::InstanceProfile\r\n* Update integration test\r\n\r\nIssues fixed:\r\n#3375 CloudFormation - All deployed stacks have StackStatus: CREATE_FAILED\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 23,
        "deletions": 13,
        "changed_files": 2,
        "created_at": "2021-01-14T21:26:00Z",
        "closed_at": "2021-01-17T10:39:29Z",
        "merged_at": "2021-01-17T10:39:29Z",
        "body": "- set the response payload for both success and failed invoications\r\n- handle json and string responses from lambda\r\n- use the correct lambda handler to raise error\r\n- addresses https://github.com/localstack/localstack/issues/3373\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 73,
        "deletions": 0,
        "changed_files": 3,
        "created_at": "2021-01-14T18:51:49Z",
        "closed_at": "2021-01-15T21:10:50Z",
        "merged_at": "2021-01-15T21:10:50Z",
        "body": "* Add handle for function GetAZs\r\n* Add integration test\r\n\r\nIssues fixed:\r\n#3331 CloudFormation - Pseudo parameter AWS::Region doesn't work in function Fn::GetAZs\r\n#3333 CloudFormation - Sub Intrinsic Function doesn't support variable map\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 252,
        "deletions": 213,
        "changed_files": 14,
        "created_at": "2021-01-12T22:52:12Z",
        "closed_at": "2021-01-13T08:05:12Z",
        "merged_at": "2021-01-13T08:05:12Z",
        "body": "Refactor Lambda API to use RegionBackend base class.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 330,
        "deletions": 15,
        "changed_files": 4,
        "created_at": "2021-01-12T13:42:01Z",
        "closed_at": "2021-01-14T00:04:27Z",
        "merged_at": "2021-01-14T00:04:27Z",
        "body": "* Add cfn support for KMS:Key resource type\r\n* Add integration test\r\n\r\nIssue fixed:\r\n#3362 Unknown resource type \"KMS::Key\" in resource deployment map\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 49,
        "deletions": 11,
        "changed_files": 3,
        "created_at": "2021-01-12T02:32:45Z",
        "closed_at": "2021-01-19T18:49:45Z",
        "merged_at": "2021-01-19T18:49:44Z",
        "body": "Fixes https://github.com/localstack/localstack/issues/3009\r\n\r\nInitializing the object SESBackend which is the default object for creating templates and listing them, transforming the input to using isoformat() for ISO 8601 (SDKv2 compatible) and collecting the output with the same ses_backend object.\r\n\r\nAlso some minor removals on what it seems to be legacy code.\r\n\r\nCreate:\r\n\r\n```\r\n$ aws --debug --endpoint-url=http://localhost:4566 --profile=test ses create-template --template 'TemplateName=hell-world,SubjectPart=subject,TextPart=hello\\nworld,HtmlPart=hello<br/>world'\r\n2021-01-12 03:31:59,466 - MainThread - awscli.clidriver - DEBUG - CLI version: aws-cli/1.18.211 Python/3.7.9 Linux/4.19.0-13-amd64 botocore/1.19.51\r\n2021-01-12 03:31:59,466 - MainThread - awscli.clidriver - DEBUG - Arguments entered to CLI: ['--debug', '--endpoint-url=http://localhost:4566', '--profile=test', 'ses', 'create-template', '--template', 'TemplateName=hell-world,SubjectPart=subject,TextPart=hello\\\\nworld,HtmlPart=hello<br/>world']\r\n2021-01-12 03:31:59,466 - MainThread - botocore.hooks - DEBUG - Event session-initialized: calling handler <function add_scalar_parsers at 0x7fba58e79440>\r\n2021-01-12 03:31:59,467 - MainThread - botocore.hooks - DEBUG - Event session-initialized: calling handler <function register_uri_param_handler at 0x7fba5937bef0>\r\n2021-01-12 03:31:59,467 - MainThread - botocore.hooks - DEBUG - Event session-initialized: calling handler <function inject_assume_role_provider_cache at 0x7fba59364950>\r\n2021-01-12 03:31:59,467 - MainThread - botocore.utils - DEBUG - IMDS ENDPOINT: http://169.254.169.254/\r\n2021-01-12 03:31:59,470 - MainThread - botocore.credentials - DEBUG - Skipping environment variable credential check because profile name was explicitly set.\r\n2021-01-12 03:31:59,470 - MainThread - botocore.hooks - DEBUG - Event session-initialized: calling handler <function attach_history_handler at 0x7fba59059b90>\r\n2021-01-12 03:31:59,470 - MainThread - botocore.loaders - DEBUG - Loading JSON file: /home/gattes/.miniconda3/lib/python3.7/site-packages/botocore/data/ses/2010-12-01/service-2.json\r\n2021-01-12 03:31:59,478 - MainThread - botocore.hooks - DEBUG - Event building-command-table.ses: calling handler functools.partial(<function _remove_commands at 0x7fba58f087a0>, commands_to_remove=['delete-verified-email-address', 'list-verified-email-addresses', 'verify-email-address'])\r\n2021-01-12 03:31:59,478 - MainThread - awscli.customizations.removals - DEBUG - Removing operation: delete-verified-email-address\r\n2021-01-12 03:31:59,478 - MainThread - awscli.customizations.removals - DEBUG - Removing operation: list-verified-email-addresses\r\n2021-01-12 03:31:59,478 - MainThread - awscli.customizations.removals - DEBUG - Removing operation: verify-email-address\r\n2021-01-12 03:31:59,478 - MainThread - botocore.hooks - DEBUG - Event building-command-table.ses: calling handler <function add_waiters at 0x7fba58e88560>\r\n2021-01-12 03:31:59,484 - MainThread - botocore.loaders - DEBUG - Loading JSON file: /home/gattes/.miniconda3/lib/python3.7/site-packages/botocore/data/ses/2010-12-01/waiters-2.json\r\n2021-01-12 03:31:59,486 - MainThread - awscli.clidriver - DEBUG - OrderedDict([('template', <awscli.arguments.CLIArgument object at 0x7fba58cf0c90>)])\r\n2021-01-12 03:31:59,487 - MainThread - botocore.hooks - DEBUG - Event building-argument-table.ses.create-template: calling handler <function add_streaming_output_arg at 0x7fba58e79b90>\r\n2021-01-12 03:31:59,487 - MainThread - botocore.hooks - DEBUG - Event building-argument-table.ses.create-template: calling handler <function add_cli_input_json at 0x7fba59369ef0>\r\n2021-01-12 03:31:59,487 - MainThread - botocore.hooks - DEBUG - Event building-argument-table.ses.create-template: calling handler <function unify_paging_params at 0x7fba58efd5f0>\r\n2021-01-12 03:31:59,496 - MainThread - botocore.loaders - DEBUG - Loading JSON file: /home/gattes/.miniconda3/lib/python3.7/site-packages/botocore/data/ses/2010-12-01/paginators-1.json\r\n2021-01-12 03:31:59,497 - MainThread - botocore.hooks - DEBUG - Event building-argument-table.ses.create-template: calling handler <function add_generate_skeleton at 0x7fba58f56a70>\r\n2021-01-12 03:31:59,499 - MainThread - botocore.hooks - DEBUG - Event before-building-argument-table-parser.ses.create-template: calling handler <bound method OverrideRequiredArgsArgument.override_required_args of <awscli.customizations.cliinputjson.CliInputJSONArgument object at 0x7fba58cf0c50>>\r\n2021-01-12 03:31:59,500 - MainThread - botocore.hooks - DEBUG - Event before-building-argument-table-parser.ses.create-template: calling handler <bound method GenerateCliSkeletonArgument.override_required_args of <awscli.customizations.generatecliskeleton.GenerateCliSkeletonArgument object at 0x7fba58cf1490>>\r\n2021-01-12 03:31:59,501 - MainThread - botocore.hooks - DEBUG - Changing event name from load-cli-arg.email.create-template.template to load-cli-arg.ses.create-template.template\r\n2021-01-12 03:31:59,501 - MainThread - botocore.hooks - DEBUG - Event load-cli-arg.ses.create-template.template: calling handler <awscli.paramfile.URIArgumentHandler object at 0x7fba593a4d10>\r\n2021-01-12 03:31:59,502 - MainThread - botocore.hooks - DEBUG - Event process-cli-arg.ses.create-template: calling handler <awscli.argprocess.ParamShorthandParser object at 0x7fba593a4f10>\r\n2021-01-12 03:31:59,502 - MainThread - awscli.argprocess - DEBUG - Parsing param --template as shorthand\r\n2021-01-12 03:31:59,502 - MainThread - awscli.arguments - DEBUG - Unpacked value of 'TemplateName=hell-world,SubjectPart=subject,TextPart=hello\\\\nworld,HtmlPart=hello<br/>world' for parameter \"template\": {'TemplateName': 'hell-world', 'SubjectPart': 'subject', 'TextPart': 'hello\\\\nworld', 'HtmlPart': 'hello<br/>world'}\r\n2021-01-12 03:31:59,502 - MainThread - botocore.hooks - DEBUG - Changing event name from load-cli-arg.email.create-template.cli-input-json to load-cli-arg.ses.create-template.cli-input-json\r\n2021-01-12 03:31:59,502 - MainThread - botocore.hooks - DEBUG - Event load-cli-arg.ses.create-template.cli-input-json: calling handler <awscli.paramfile.URIArgumentHandler object at 0x7fba593a4d10>\r\n2021-01-12 03:31:59,503 - MainThread - botocore.hooks - DEBUG - Changing event name from load-cli-arg.email.create-template.generate-cli-skeleton to load-cli-arg.ses.create-template.generate-cli-skeleton\r\n2021-01-12 03:31:59,503 - MainThread - botocore.hooks - DEBUG - Event load-cli-arg.ses.create-template.generate-cli-skeleton: calling handler <awscli.paramfile.URIArgumentHandler object at 0x7fba593a4d10>\r\n2021-01-12 03:31:59,503 - MainThread - botocore.hooks - DEBUG - Event calling-command.ses.create-template: calling handler <bound method CliInputJSONArgument.add_to_call_parameters of <awscli.customizations.cliinputjson.CliInputJSONArgument object at 0x7fba58cf0c50>>\r\n2021-01-12 03:31:59,503 - MainThread - botocore.hooks - DEBUG - Event calling-command.ses.create-template: calling handler <bound method GenerateCliSkeletonArgument.generate_json_skeleton of <awscli.customizations.generatecliskeleton.GenerateCliSkeletonArgument object at 0x7fba58cf1490>>\r\n2021-01-12 03:31:59,503 - MainThread - botocore.credentials - DEBUG - Looking for credentials via: assume-role\r\n2021-01-12 03:31:59,503 - MainThread - botocore.credentials - DEBUG - Looking for credentials via: assume-role-with-web-identity\r\n2021-01-12 03:31:59,503 - MainThread - botocore.credentials - DEBUG - Looking for credentials via: sso\r\n2021-01-12 03:31:59,504 - MainThread - botocore.credentials - DEBUG - Looking for credentials via: shared-credentials-file\r\n2021-01-12 03:31:59,504 - MainThread - botocore.credentials - INFO - Found credentials in shared credentials file: ~/.aws/credentials\r\n2021-01-12 03:31:59,504 - MainThread - botocore.loaders - DEBUG - Loading JSON file: /home/gattes/.miniconda3/lib/python3.7/site-packages/botocore/data/endpoints.json\r\n2021-01-12 03:31:59,516 - MainThread - botocore.hooks - DEBUG - Event choose-service-name: calling handler <function handle_service_name_alias at 0x7fba599bad40>\r\n2021-01-12 03:31:59,518 - MainThread - botocore.hooks - DEBUG - Event creating-client-class.ses: calling handler <function add_generate_presigned_url at 0x7fba59a689e0>\r\n2021-01-12 03:31:59,522 - MainThread - botocore.endpoint - DEBUG - Setting email timeout as (60, 60)\r\n2021-01-12 03:31:59,523 - MainThread - botocore.loaders - DEBUG - Loading JSON file: /home/gattes/.miniconda3/lib/python3.7/site-packages/botocore/data/_retry.json\r\n2021-01-12 03:31:59,523 - MainThread - botocore.client - DEBUG - Registering retry handlers for service: ses\r\n2021-01-12 03:31:59,525 - MainThread - botocore.hooks - DEBUG - Event before-parameter-build.ses.CreateTemplate: calling handler <function generate_idempotent_uuid at 0x7fba599ebd40>\r\n2021-01-12 03:31:59,527 - MainThread - botocore.hooks - DEBUG - Event before-call.ses.CreateTemplate: calling handler <function inject_api_version_header_if_needed at 0x7fba599755f0>\r\n2021-01-12 03:31:59,527 - MainThread - botocore.endpoint - DEBUG - Making request for OperationModel(name=CreateTemplate) with params: {'url_path': '/', 'query_string': '', 'method': 'POST', 'headers': {'Content-Type': 'application/x-www-form-urlencoded; charset=utf-8', 'User-Agent': 'aws-cli/1.18.211 Python/3.7.9 Linux/4.19.0-13-amd64 botocore/1.19.51'}, 'body': {'Action': 'CreateTemplate', 'Version': '2010-12-01', 'Template.TemplateName': 'hell-world', 'Template.SubjectPart': 'subject', 'Template.TextPart': 'hello\\\\nworld', 'Template.HtmlPart': 'hello<br/>world'}, 'url': 'http://localhost:4566/', 'context': {'client_region': 'us-east-1', 'client_config': <botocore.config.Config object at 0x7fba58a65110>, 'has_streaming_input': False, 'auth_type': None}}\r\n2021-01-12 03:31:59,528 - MainThread - botocore.hooks - DEBUG - Event request-created.ses.CreateTemplate: calling handler <bound method RequestSigner.handler of <botocore.signers.RequestSigner object at 0x7fba58a650d0>>\r\n2021-01-12 03:31:59,528 - MainThread - botocore.hooks - DEBUG - Event choose-signer.ses.CreateTemplate: calling handler <function set_operation_specific_signer at 0x7fba599eb290>\r\n2021-01-12 03:31:59,529 - MainThread - botocore.auth - DEBUG - Calculating signature using v4 auth.\r\n2021-01-12 03:31:59,529 - MainThread - botocore.auth - DEBUG - CanonicalRequest:\r\nPOST\r\n/\r\n\r\ncontent-type:application/x-www-form-urlencoded; charset=utf-8\r\nhost:localhost:4566\r\nx-amz-date:20210112T023159Z\r\n\r\ncontent-type;host;x-amz-date\r\nb16c912c68ff17474ad84796b8cc27181b0b987089ffccf8f73fe3bab09f712b\r\n2021-01-12 03:31:59,529 - MainThread - botocore.auth - DEBUG - StringToSign:\r\nAWS4-HMAC-SHA256\r\n20210112T023159Z\r\n20210112/us-east-1/ses/aws4_request\r\n7d00c8049b188304ece19bf3b071c788645e89247e374f9bc474edfd05d8b7d9\r\n2021-01-12 03:31:59,529 - MainThread - botocore.auth - DEBUG - Signature:\r\n7bb8c5e2c71971d81df114293680423750f76ce7717b7114480a86f80dcbdbed\r\n2021-01-12 03:31:59,530 - MainThread - botocore.endpoint - DEBUG - Sending http request: <AWSPreparedRequest stream_output=False, method=POST, url=http://localhost:4566/, headers={'Content-Type': b'application/x-www-form-urlencoded; charset=utf-8', 'User-Agent': b'aws-cli/1.18.211 Python/3.7.9 Linux/4.19.0-13-amd64 botocore/1.19.51', 'X-Amz-Date': b'20210112T023159Z', 'Authorization': b'AWS4-HMAC-SHA256 Credential=1234/20210112/us-east-1/ses/aws4_request, SignedHeaders=content-type;host;x-amz-date, Signature=7bb8c5e2c71971d81df114293680423750f76ce7717b7114480a86f80dcbdbed', 'Content-Length': '175'}>\r\n2021-01-12 03:31:59,531 - MainThread - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): localhost:4566\r\n2021-01-12 03:31:59,557 - MainThread - urllib3.connectionpool - DEBUG - http://localhost:4566 \"POST / HTTP/1.1\" 200 217\r\n2021-01-12 03:31:59,558 - MainThread - botocore.parsers - DEBUG - Response headers: {'content-type': 'text/html; charset=utf-8', 'content-length': '217', 'access-control-allow-origin': '*', 'access-control-allow-methods': 'HEAD,GET,PUT,POST,DELETE,OPTIONS,PATCH', 'access-control-allow-headers': 'authorization,content-type,content-md5,cache-control,x-amz-content-sha256,x-amz-date,x-amz-security-token,x-amz-user-agent,x-amz-target,x-amz-acl,x-amz-version-id,x-localstack-target,x-amz-tagging', 'access-control-expose-headers': 'x-amz-version-id', 'connection': 'close', 'date': 'Tue, 12 Jan 2021 02:31:59 GMT', 'server': 'hypercorn-h11'}\r\n2021-01-12 03:31:59,558 - MainThread - botocore.parsers - DEBUG - Response body:\r\nb'<CreateTemplateResponse xmlns=\"http://ses.amazonaws.com/doc/2010-12-01/\"><CreateTemplateResult/><ResponseMetadata><RequestId>47e0ef1a-9bf2-11e1-9279-0100e8cf12ba</RequestId></ResponseMetadata></CreateTemplateResponse>'\r\n2021-01-12 03:31:59,560 - MainThread - botocore.hooks - DEBUG - Event needs-retry.ses.CreateTemplate: calling handler <botocore.retryhandler.RetryHandler object at 0x7fba58a65550>\r\n2021-01-12 03:31:59,561 - MainThread - botocore.retryhandler - DEBUG - No retry needed.\r\n2021-01-12 03:31:59,562 - MainThread - awscli.formatter - DEBUG - RequestId: 47e0ef1a-9bf2-11e1-9279-0100e8cf12ba\r\n```\r\n\r\nOutput:\r\n```\r\n$ awslocal --profile=test ses list-templates\r\nTEMPLATESMETADATA\t2021-01-12T02:31:59.551596\thell-world\r\n```",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 39,
        "deletions": 9,
        "changed_files": 3,
        "created_at": "2021-01-10T15:34:46Z",
        "closed_at": "2021-01-11T22:02:29Z",
        "merged_at": "2021-01-11T22:02:28Z",
        "body": "- addresses https://github.com/localstack/localstack/issues/3402\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 9,
        "deletions": 3,
        "changed_files": 1,
        "created_at": "2021-01-09T22:12:49Z",
        "closed_at": "2021-01-10T10:51:34Z",
        "merged_at": "2021-01-10T10:51:34Z",
        "body": "We now trap all signals supported by default for supervisord and pass those through. I've tested each of these with docker both with the container as daemon and in interactive mode and they work.  Specifically, ctrl-c in interactive mode now trapped and supervisord exits cleanly as expected.  Other signals were tested using `docker kill -s {signal} {container-name}`.\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 11,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2021-01-09T15:42:17Z",
        "closed_at": "2021-01-11T20:29:42Z",
        "merged_at": "2021-01-11T20:29:42Z",
        "body": "**fixed**\r\n- return response for sqs redrive policy\r\n\r\n**issue**\r\n- [3427](https://github.com/localstack/localstack/issues/3427)",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 39,
        "deletions": 15,
        "changed_files": 4,
        "created_at": "2021-01-09T12:50:03Z",
        "closed_at": "2021-01-09T16:43:31Z",
        "merged_at": "2021-01-09T16:43:31Z",
        "body": "* Fix removal of deleted resources from CF stack template\r\n* Add SET_TERM_HANDLER config for Docker entrypoint signal trap",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 171,
        "deletions": 24,
        "changed_files": 8,
        "created_at": "2021-01-08T11:53:22Z",
        "closed_at": "2021-01-08T17:19:37Z",
        "merged_at": "2021-01-08T17:19:37Z",
        "body": "Fix infinite recursion when loading stack exports that reference other imports.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 7,
        "deletions": 6,
        "changed_files": 2,
        "created_at": "2021-01-08T02:32:00Z",
        "closed_at": "2021-01-08T19:58:58Z",
        "merged_at": "2021-01-08T19:58:57Z",
        "body": "Fixes https://github.com/localstack/helm-charts/issues/5\r\n\r\nDefaulting port to 8090 in config (which was missing in `stepfunctions_starter.py`)",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 70,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2021-01-07T20:31:35Z",
        "closed_at": "2021-01-11T20:27:15Z",
        "merged_at": "2021-01-11T20:27:15Z",
        "body": "- addresses https://github.com/localstack/localstack/issues/3433",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 48,
        "deletions": 1,
        "changed_files": 4,
        "created_at": "2021-01-07T14:28:58Z",
        "closed_at": "2021-01-08T07:29:12Z",
        "merged_at": "2021-01-08T07:29:12Z",
        "body": "This PR will fix the issue https://github.com/localstack/localstack/issues/3442 just opened. \r\n\r\nWhen we call the listExports method for cloudformation api the result is malformed. This cause issued in aws js sdk as it returns an empty array. The python sdk manages to parse it even if it is malformed, so you can't see the bug using the aws command line interface.",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2021-01-06T15:52:45Z",
        "closed_at": "2021-01-06T16:53:48Z",
        "merged_at": "2021-01-06T16:53:48Z",
        "body": "SNS listener now passes along the Message Group ID if it exists to the SQS client.\r\n\r\nThis fixes issue #3414 \r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2021-01-06T11:09:40Z",
        "closed_at": "2021-01-06T19:08:34Z",
        "merged_at": "2021-01-06T19:08:34Z",
        "body": "Addresses https://github.com/localstack/localstack/issues/3426",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 146,
        "deletions": 30,
        "changed_files": 8,
        "created_at": "2021-01-05T22:49:12Z",
        "closed_at": "2021-01-07T23:08:07Z",
        "merged_at": "2021-01-07T23:08:07Z",
        "body": "\r\naddresses https://github.com/localstack/localstack/issues/3373",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 95,
        "deletions": 79,
        "changed_files": 5,
        "created_at": "2021-01-05T19:46:00Z",
        "closed_at": "2021-01-05T21:46:32Z",
        "merged_at": "2021-01-05T21:46:32Z",
        "body": "Add integration test for StepFunction try/catch functionality - addresses #2984",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 139,
        "deletions": 37,
        "changed_files": 6,
        "created_at": "2021-01-04T18:25:32Z",
        "closed_at": "2021-01-04T23:32:17Z",
        "merged_at": "2021-01-04T23:32:17Z",
        "body": "* Enhance DynamoDB performance by skipping item lookups if no streams enabled - addresses #1205 \r\n* Fix returning log output on Lambda errors - addresses #1630",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 253,
        "deletions": 193,
        "changed_files": 8,
        "created_at": "2021-01-03T18:15:44Z",
        "closed_at": "2021-01-03T22:16:39Z",
        "merged_at": "2021-01-03T22:16:38Z",
        "body": "Fix yaml to JSON parsing of CF templates; minor CF refactoring",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 26,
        "deletions": 8,
        "changed_files": 2,
        "created_at": "2021-01-02T18:57:53Z",
        "closed_at": "2021-01-02T20:45:40Z",
        "merged_at": "2021-01-02T20:45:40Z",
        "body": "Support S3 key names containing hashes (#)",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 187,
        "deletions": 142,
        "changed_files": 2,
        "created_at": "2020-12-31T00:32:20Z",
        "closed_at": "2020-12-31T02:28:56Z",
        "merged_at": "2020-12-31T02:28:56Z",
        "body": "CF refactoring: add method to configure deploy templates in resource class",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 50,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2020-12-30T21:50:16Z",
        "closed_at": "2020-12-31T18:21:47Z",
        "merged_at": "2020-12-31T18:21:47Z",
        "body": "This PR adds the functionality to read GZIP encoded data in a PutMetricsData request for the CloudWatch service. \r\n\r\nIt should fix the issue #3385 \r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 21,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2020-12-30T16:42:39Z",
        "closed_at": "2021-01-06T21:38:44Z",
        "merged_at": "2021-01-06T21:38:44Z",
        "body": "This PR adds signal trap support for the docker-entrypoint.sh file.  Because we are spinning up supervisord to then load localstack, when Docker sends a sigterm to the container it only sends it to PID 1 which means that signal is never reaching supervisord. Docker will eventually kill off all of the processes, however, depending on the environment and configuration this time can take from a few seconds to a few minutes. Trapping the SIGTERM signal in the docker-entrypoint allows us to then send that signal to supervisord and in turn allows for a clean shutdown of all services and a clean exit of the container.\r\n\r\nThis change has been tested in a kubernetes environment and resulted in the container consistently terminating 1-2 minutes faster than without it.",
        "comments": 6
    },
    {
        "merged": true,
        "additions": 455,
        "deletions": 231,
        "changed_files": 5,
        "created_at": "2020-12-30T11:41:45Z",
        "closed_at": "2020-12-30T19:13:19Z",
        "merged_at": "2020-12-30T19:13:19Z",
        "body": "Refactor CF implementation to use resource model classes",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 15,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2020-12-29T21:02:25Z",
        "closed_at": "2020-12-30T20:46:22Z",
        "merged_at": null,
        "body": "https://github.com/localstack/localstack/issues/3374",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2020-12-29T17:12:36Z",
        "closed_at": "2020-12-29T22:15:39Z",
        "merged_at": "2020-12-29T22:15:39Z",
        "body": "Adds ability to get an AppSync DataSource's physical id.\r\n\r\n**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 56,
        "deletions": 23,
        "changed_files": 4,
        "created_at": "2020-12-29T14:53:13Z",
        "closed_at": "2020-12-29T21:48:09Z",
        "merged_at": "2020-12-29T21:48:09Z",
        "body": "Fix returning `LogResult` from synchronous Lambda invocations - addresses #1630",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 19,
        "deletions": 5,
        "changed_files": 2,
        "created_at": "2020-12-29T13:01:17Z",
        "closed_at": "2021-09-06T22:52:23Z",
        "merged_at": null,
        "body": "When making a POST request to AWS S3 the HTTP 204 response includes a \"Location\" header where the uploaded object can be found. This header is missing in LocalStack.\r\nThis PR adds the missing header.\r\n\r\nCurrent behavior:\r\n**Amazon S3**\r\n\r\nRequest:\r\n```\r\nPOST / HTTP/1.1\r\nHost: mybucket.s3.eu-central-1.amazonaws.com\r\nContent-Type: multipart/form-data; boundary=----WebKitFormBoundary3wktu4fYIB8OnZBK\r\n...\r\n```\r\n\r\nResponse:\r\n```\r\nHTTP/1.1 204 No Content\r\nx-amz-id-2: 8OSqzYyCkY6eaUc5PaklRnHzlbta8cXDTNXTJfQkb3CA4iexjRcEw4HGhk6TU5+Kp+sasKWCFv0=\r\nx-amz-request-id: 1AEBFFF1F332A912\r\nServer: AmazonS3\r\nLocation: https://mybucket.s3.eu-central-1.amazonaws.com/test.zip\r\n...\r\n```\r\n\r\n**LocalStack**\r\n\r\nRequest:\r\n```\r\nPOST /mybucket HTTP/1.1\r\nHost: localhost:4566\r\nContent-Type: multipart/form-data; boundary=----WebKitFormBoundaryC2enEWmAhB0PzOAL\r\n...\r\n```\r\n\r\nResponse:\r\n```\r\nHTTP/1.1 204\r\ncontent-type: text/html; charset=utf-8\r\ncontent-length: 0\r\nserver: hypercorn-h11\r\n...\r\n```\r\n\r\nWith this fix applied the LocalStack response would include the header\r\n`location: https://localhost:4566/mybucket/test.zip`",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2020-12-29T11:53:36Z",
        "closed_at": "2021-02-10T12:22:12Z",
        "merged_at": "2021-02-10T12:22:12Z",
        "body": "@whummer I don't see this as fully completed PR and it's a starting point. \r\n\r\nThere is a general issue with elasticsearch after it has got a dynamic port.  `connect_elasticsearch` used without any parameters and as result `endpoint` is defined as`http://localhost:0` and firehose is not able to put records. Firehose tries to connect on 9200 port while Elasticsearch is running on another port.\r\n\r\nThere is another issue in es_starter.py with in `check_elasticsearch`. This method also calls  `connect_elasticsearch`  with no inputs and fails with this error \r\n```\r\nlocalstack_1    |   File \"/opt/code/localstack/localstack/services/plugins.py\", line 99, in check_infra\r\nlocalstack_1    |     additional(expect_shutdown=expect_shutdown)\r\nlocalstack_1    |   File \"/opt/code/localstack/localstack/services/es/es_starter.py\", line 97, in check_elasticsearch\r\nlocalstack_1    |     assert isinstance(out, six.string_types)\r\nlocalstack_1    | AssertionError\r\n```\r\nI don't know what is the best way to pass port to that method.\r\n\r\nI used image localstack/localstack-full:0.12.4 . I would like to get your suggestions and know more about `TEST_ELASTICSEARCH_URL`. \r\n",
        "comments": 9
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 9,
        "changed_files": 2,
        "created_at": "2020-12-28T11:40:39Z",
        "closed_at": "2020-12-30T17:33:29Z",
        "merged_at": "2020-12-30T17:33:28Z",
        "body": "As discussed in #2165, the AWS .NET SDK has problems with null values in the response JSON.\r\n\r\nSo I edited the code to only add this fields if they are not null.",
        "comments": 5
    },
    {
        "merged": true,
        "additions": 42,
        "deletions": 0,
        "changed_files": 3,
        "created_at": "2020-12-26T17:40:19Z",
        "closed_at": "2020-12-27T11:24:44Z",
        "merged_at": "2020-12-27T11:24:44Z",
        "body": "* Patched moto apigateway method\r\n* Update integration test with terraform\r\n\r\nIssue fixed:\r\n#3325 API Gateway IAM Policy not escaped properly\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 3382,
        "deletions": 677,
        "changed_files": 30,
        "created_at": "2020-12-25T18:52:35Z",
        "closed_at": "2020-12-27T16:13:42Z",
        "merged_at": "2020-12-27T16:13:42Z",
        "body": "Rewrite CloudFormation to use independent deployment mechanism.\r\n\r\nThis is a major change that fundamentally changes the way that CloudFormation resources are deployed in LocalStack. A flag `USE_MOTO_CF=1` can be used to revert to the previous mechanism (this flag may be removed in the future).\r\n\r\n**Background:**\r\nOur existing CloudFormation (CF) implementation has historically grown as an extension to `moto`'s CF. Over time, LocalStack has added more and more functionality (including model classes, dependency resolution mechanism, etc), while still, at its core, relying on some aspects of the CF implementation of `moto`. This has led to an increasingly complex setup with multiple layers of complexity, and essentially two dependency resolution mechanisms running in parallel. Lately, this dependency and the added complexity has become unmanageable, and it seems worthwhile to create a separate, cleaner implementation of CF that is less error-prone and easier to maintain.\r\n\r\n**Goal:**\r\nThe goal of this PR is to start establishing an independent CF deployment mechanism that is independent of third-party libraries, thereby significantly reducing the cognitive complexity, making the code cleaner, more readable/debuggable.\r\n\r\n**Overview of Changes:**\r\n* Put existing functionality into `template_deployer_old.py` for reference\r\n* Add flag `USE_MOTO_CF` that can be configured to fall back to the old functionality\r\n* Add Flask app in `cloudformation_api.py` with the API methods, as well as core classes (e.g., `class Stack`)",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 11,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2020-12-23T18:59:15Z",
        "closed_at": "2020-12-24T12:47:22Z",
        "merged_at": "2020-12-24T12:47:22Z",
        "body": "#3347  skip checking content md5 upon create-multipart-request as it return uploadID which is used at the time of actual object upload.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 5,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2020-12-21T22:28:26Z",
        "closed_at": "2020-12-22T13:38:07Z",
        "merged_at": "2020-12-22T13:38:07Z",
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 55,
        "deletions": 13,
        "changed_files": 5,
        "created_at": "2020-12-21T20:06:53Z",
        "closed_at": "2020-12-26T19:41:46Z",
        "merged_at": "2020-12-26T19:41:46Z",
        "body": "addresses https://github.com/localstack/localstack/issues/3279",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 32,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2020-12-21T17:56:20Z",
        "closed_at": "2020-12-22T14:32:42Z",
        "merged_at": "2020-12-22T14:32:42Z",
        "body": "Feature SES\r\n",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 99,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2020-12-19T17:50:14Z",
        "closed_at": "2021-04-22T20:16:18Z",
        "merged_at": null,
        "body": "Fix:events:added support for sqs event filtering with event pattern\r\nhttps://github.com/localstack/localstack/issues/3369",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2020-12-18T20:48:08Z",
        "closed_at": "2020-12-19T21:07:45Z",
        "merged_at": "2020-12-19T21:07:45Z",
        "body": "Hardcode local hostname instead of using `$HOSTNAME` from the environment. This should fix several issues we've seen around connecting to local/loopback APIs (e.g., because local hostname cannot be resolved).",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 10,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2020-12-17T07:03:38Z",
        "closed_at": "2020-12-17T22:21:40Z",
        "merged_at": "2020-12-17T22:21:40Z",
        "body": "**Fixed:**\r\n- Lambda concurrency issue with `LAMBDA_EXECUTOR=docker-reuse`\r\n\r\n**Issue:**\r\n- #3338 \r\n- #1777 ",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 47,
        "deletions": 1,
        "changed_files": 3,
        "created_at": "2020-12-16T22:52:58Z",
        "closed_at": "2020-12-17T10:07:06Z",
        "merged_at": "2020-12-17T10:07:06Z",
        "body": "Addresses the issue: https://github.com/localstack/localstack/issues/3160",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 7,
        "deletions": 6,
        "changed_files": 2,
        "created_at": "2020-12-15T23:30:23Z",
        "closed_at": "2020-12-16T01:02:44Z",
        "merged_at": "2020-12-16T01:02:44Z",
        "body": "Add gzip encoding of response payloads to edge service - based on the `Accept-Encoding` HTTP header.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2020-12-15T21:50:53Z",
        "closed_at": "2020-12-16T13:02:14Z",
        "merged_at": "2020-12-16T13:02:14Z",
        "body": "Fixes #3242 ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 97,
        "deletions": 6,
        "changed_files": 2,
        "created_at": "2020-12-15T19:00:40Z",
        "closed_at": "2020-12-16T14:23:17Z",
        "merged_at": "2020-12-16T14:23:17Z",
        "body": "Fix:Events on multiple targets and inputPath\r\nhttps://github.com/localstack/localstack/issues/3353",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 75,
        "deletions": 62,
        "changed_files": 4,
        "created_at": "2020-12-15T18:00:20Z",
        "closed_at": "2020-12-15T21:23:58Z",
        "merged_at": "2020-12-15T21:23:58Z",
        "body": "Refactor and enhance CF resolution of placeholders in Sub expressions",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 111,
        "deletions": 12,
        "changed_files": 4,
        "created_at": "2020-12-15T17:18:16Z",
        "closed_at": "2021-02-03T16:40:11Z",
        "merged_at": null,
        "body": "Added support for the test-invoke-method feature. It tests the integrated method before making the deployment of the api-gateway.\r\nAlso added simulated method, headers, body, and pathWithQueryString.\r\nAdded test cases for test-invoke-method.\r\nFix for #3291 ",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 118,
        "deletions": 31,
        "changed_files": 4,
        "created_at": "2020-12-14T11:23:40Z",
        "closed_at": "2020-12-14T19:18:28Z",
        "merged_at": "2020-12-14T19:18:28Z",
        "body": "Fix issue with fn in output export name\r\n\r\nIssue fixed:\r\n#3249 StepFunctions: Unable to parse and update resource\r\n#3301 CloudFormation - Unable to use intrinsic functions in output export name\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 62,
        "deletions": 19,
        "changed_files": 2,
        "created_at": "2020-12-13T00:09:21Z",
        "closed_at": "2020-12-14T21:40:29Z",
        "merged_at": "2020-12-14T21:40:29Z",
        "body": "With this PR localstack adds a new version of a lambda function when is being updated and the Publish flag is set to true. \r\nAlso verifies if the SHA256 is different so it's not just adding more values with each update.\r\n\r\nThis PR should fix issue #3281 \r\n\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 17,
        "deletions": 8,
        "changed_files": 1,
        "created_at": "2020-12-11T01:26:11Z",
        "closed_at": "2020-12-11T09:39:57Z",
        "merged_at": "2020-12-11T09:39:57Z",
        "body": "Fix passing events to provided Lambda runtimes (Rust) - addresses #3264",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 3,
        "changed_files": 1,
        "created_at": "2020-12-10T20:56:10Z",
        "closed_at": "2020-12-11T13:04:29Z",
        "merged_at": "2020-12-11T13:04:29Z",
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 90,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2020-12-10T20:22:00Z",
        "closed_at": "2020-12-11T10:03:21Z",
        "merged_at": "2020-12-11T10:03:21Z",
        "body": "Fix:events:Add sns target type for events\r\nhttps://github.com/localstack/localstack/issues/3308",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 49,
        "deletions": 4,
        "changed_files": 3,
        "created_at": "2020-12-10T10:59:20Z",
        "closed_at": "2020-12-10T20:31:04Z",
        "merged_at": "2020-12-10T20:31:04Z",
        "body": "* Handle StateMachine resource\r\n\r\nIssue fixed:\r\n#3249 StepFunctions: Unable to parse and update resource\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 140,
        "deletions": 13,
        "changed_files": 8,
        "created_at": "2020-12-10T07:36:46Z",
        "closed_at": "2020-12-10T20:35:23Z",
        "merged_at": "2020-12-10T20:35:23Z",
        "body": "* Fix CF export name uniqueness checks prior to stack deployment - addresses #3332\r\n* Release version 0.12.3",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 136,
        "deletions": 1,
        "changed_files": 3,
        "created_at": "2020-12-08T20:41:57Z",
        "closed_at": "2020-12-10T10:44:16Z",
        "merged_at": "2020-12-10T10:44:16Z",
        "body": "Created StepFunctions integration in the API gateway with or without velocity template.\r\nAlso added Test Cases for the same.\r\nFix for: #1451 ",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 6,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2020-12-08T19:03:35Z",
        "closed_at": "2020-12-08T21:18:04Z",
        "merged_at": "2020-12-08T21:18:04Z",
        "body": "#3323 fixed account id in response",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 9,
        "deletions": 687,
        "changed_files": 12,
        "created_at": "2020-12-08T17:13:36Z",
        "closed_at": "2020-12-08T19:04:25Z",
        "merged_at": "2020-12-08T19:04:25Z",
        "body": "Migrate Helm charts into separate repo https://github.com/localstack/helm-charts",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 11,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2020-12-07T18:39:50Z",
        "closed_at": "2021-06-06T16:47:21Z",
        "merged_at": null,
        "body": "\r\nFix:S3 Delete Invalid bucket error\r\nhttps://github.com/localstack/localstack/issues/3316",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 112,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2020-12-07T11:15:41Z",
        "closed_at": "2020-12-08T00:46:22Z",
        "merged_at": "2020-12-08T00:46:22Z",
        "body": "This pull request configure missing forwarding rule to AWS STS for AssumeRoleWithSAML action from edge custom_rules mapping.\r\n\r\nCloses #3317\r\n",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 6,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2020-12-06T19:57:44Z",
        "closed_at": "2020-12-08T22:14:16Z",
        "merged_at": null,
        "body": "\nhttps://github.blog/2020-06-01-keep-all-your-packages-up-to-date-with-dependabot/\n\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 172,
        "deletions": 6,
        "changed_files": 5,
        "created_at": "2020-12-06T15:00:36Z",
        "closed_at": "2020-12-06T17:50:09Z",
        "merged_at": "2020-12-06T17:50:09Z",
        "body": "* Handle FN::Sub in resource properties (stepfunctions' definition, lambda function name)\r\n* Add integration test for template\r\n\r\nIssue fixed:\r\n#3293 CloudFormation template substitution using !sub not working in latest\r\n#3294 CloudFormation - the use of intrinsic functions in AWS::Lambda::Function FunctionName...\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 729,
        "deletions": 0,
        "changed_files": 13,
        "created_at": "2020-12-06T04:29:08Z",
        "closed_at": "2020-12-07T07:46:43Z",
        "merged_at": "2020-12-07T07:46:42Z",
        "body": "Using GitHub Actions to release the official helm chart\r\n\r\nThis PR is a starting point to introduce an official helm chart for locakstack,\r\n\r\nI copied the helm chart from https://github.com/sidhuko/charts/pull/1 without any modification (hope it is fine with @sidhuko)\r\n\r\nThere are couple of tasks that need to be done before this can be merged:\r\n- A `gh-pages` branch need to be created\r\n- `GitHub Pages` need to be enabled in the setting\r\n\r\nTODO (can be done in this PR or next PRs):\r\n- A GitHub workflow to test the helm chart for PRs\r\n\r\nFixes #882 ",
        "comments": 13
    },
    {
        "merged": true,
        "additions": 5,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2020-12-05T21:16:28Z",
        "closed_at": "2020-12-06T00:18:25Z",
        "merged_at": "2020-12-06T00:18:24Z",
        "body": "Fix:S3:add access-control-allow-credentials\r\nhttps://github.com/localstack/localstack/issues/3292",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 27,
        "deletions": 6,
        "changed_files": 2,
        "created_at": "2020-12-05T02:12:23Z",
        "closed_at": "2020-12-05T11:43:53Z",
        "merged_at": "2020-12-05T11:43:53Z",
        "body": "Fix passing of stack parameters/resources to CF changeset",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 12,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2020-12-04T20:24:41Z",
        "closed_at": "2020-12-05T11:03:37Z",
        "merged_at": "2020-12-05T11:03:37Z",
        "body": "Fix:SNS:Recreation of Topic with new tags\r\nhttps://github.com/localstack/localstack/issues/3304",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 16,
        "deletions": 36,
        "changed_files": 1,
        "created_at": "2020-12-04T10:17:56Z",
        "closed_at": "2020-12-04T16:58:43Z",
        "merged_at": "2020-12-04T16:58:43Z",
        "body": "Add missing parameters and conditions for CF change sets",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2020-12-03T22:42:10Z",
        "closed_at": "2020-12-04T11:22:52Z",
        "merged_at": "2020-12-04T11:22:52Z",
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 33,
        "deletions": 13,
        "changed_files": 5,
        "created_at": "2020-12-03T19:27:36Z",
        "closed_at": "2020-12-04T19:33:48Z",
        "merged_at": "2020-12-04T19:33:48Z",
        "body": "**Fixed:**\r\n- fixed test cases for \r\n\r\n**Improved:**\r\n- Terraform test cases performance using parallel initialization\r\n\r\n**Issue Addressed:**\r\n#3297 ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2020-12-02T19:06:56Z",
        "closed_at": "2020-12-03T15:26:46Z",
        "merged_at": "2020-12-03T15:26:46Z",
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 12,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2020-12-01T18:29:30Z",
        "closed_at": "2020-12-01T21:17:48Z",
        "merged_at": "2020-12-01T21:17:48Z",
        "body": "**Fixed API:**\r\n- Lambda UpdateFunctionConfig. [Ref](https://docs.aws.amazon.com/lambda/latest/dg/API_UpdateFunctionConfiguration.html)\r\n    Added support for `MemorySize` `Role` `KMSKeyArn` `VpcConfig` `Description` attributes\r\n\r\n`Issue Fixed:`\r\n#3282 ",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 66,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2020-11-30T07:47:03Z",
        "closed_at": "2020-12-01T17:37:28Z",
        "merged_at": "2020-12-01T17:37:28Z",
        "body": "**Added (test cases):**\r\n- Test added for:\r\n  - Create config\r\n  - Delete config\r\n  - Get config\r\n  - UpdateConfig\r\n  - PutFunctionConfig\r\n  - GetFunctionConfig\r\n  - DeleteFunctionConfig\r\n\r\nFixed status code for `get-config` api\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 32,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2020-11-29T09:10:51Z",
        "closed_at": "2020-11-29T17:29:19Z",
        "merged_at": "2020-11-29T17:29:19Z",
        "body": "**API Added:**\r\n- update-rest-api: \r\n  - [AWS CLI Documentation Ref.](https://docs.aws.amazon.com/cli/latest/reference/apigateway/update-rest-api.html)\r\n  - [AWS API Documentation Ref.](https://docs.aws.amazon.com/apigateway/api-reference/link-relation/restapi-update/)\r\n\r\n**Issue Addressed**\r\n- Issue #3261 ",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 154,
        "deletions": 19,
        "changed_files": 6,
        "created_at": "2020-11-28T09:46:51Z",
        "closed_at": "2020-11-29T18:44:04Z",
        "merged_at": "2020-11-29T18:44:04Z",
        "body": "* Handle physical resource id from Resource\r\n* Handle FN::ImportValue\r\n* Handle short form FN::Sub\r\n* Add integration test for template with short form FN::Sub\r\n\r\nIssue fixed:\r\n#3251 CloudFormation YAML short form !Sub / Fn::Sub in dependent resource causes dependency resolution failure\r\n#3184 CF template FN::ImportValue fails on parameter validation.\r\n\r\n**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 197,
        "deletions": 3,
        "changed_files": 4,
        "created_at": "2020-11-26T08:05:13Z",
        "closed_at": "2020-11-27T11:52:48Z",
        "merged_at": "2020-11-27T11:52:48Z",
        "body": "This PR will implement lambda-code-signing-config.\r\n\r\n**Added (API Implemented):**\r\n- `create-code-signing-config`\r\n- `delete-code-signing-config`\r\n- `get-code-signing-config`\r\n- `update-code-signing-config`\r\n\r\n- `delete-function-code-signing-config`\r\n- `get-function-code-signing-config`\r\n- `put-function-code-signing-config`\r\n\r\n**Note: Test cases not yet added because of the `older version of boto`.** \r\n\r\nAlso it will fix issue reported in #3270.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 52,
        "deletions": 6,
        "changed_files": 2,
        "created_at": "2020-11-25T20:52:00Z",
        "closed_at": "2020-11-29T14:23:30Z",
        "merged_at": "2020-11-29T14:23:30Z",
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n\r\nThis patch fixes some of the server crashed due to CBOR encoded messages caused in the issue #3243 even thou there's still work in progress to support the new Date Format used by AWS SDK V2.",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2020-11-24T18:34:43Z",
        "closed_at": "2020-11-26T08:02:01Z",
        "merged_at": "2020-11-26T08:02:01Z",
        "body": "This is a fix for Centos 8 that solves: Service \"ANY_SERVICE_HERE\" not yet available, retrying...\n\n#808\n\n\n\n\u2506Issue is synchronized with this [Jira Bug](https://localstack.atlassian.net/browse/LOC-353) by [Unito](https://www.unito.io/learn-more)\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 68,
        "deletions": 0,
        "changed_files": 4,
        "created_at": "2020-11-24T18:24:52Z",
        "closed_at": "2020-11-25T16:55:49Z",
        "merged_at": "2020-11-25T16:55:49Z",
        "body": "PR adds the possibility to run a localstack environment using Vagrant in Centos. For development purposes.\n\n\n\n\u2506Issue is synchronized with this [Jira Bug](https://localstack.atlassian.net/browse/LOC-352) by [Unito](https://www.unito.io/learn-more)\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2020-11-24T18:17:50Z",
        "closed_at": "2020-11-28T11:36:21Z",
        "merged_at": "2020-11-28T11:36:21Z",
        "body": "* Added a check to enable enterprises that utilize self signed certificates for their proxied connections\r\n\r\n\r\nNote that no test was added since this expected functionality for Requests.\r\n\r\n\r\n\r\n\u2506Issue is synchronized with this [Jira Bug](https://localstack.atlassian.net/browse/LOC-351) by [Unito](https://www.unito.io/learn-more)\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 40,
        "deletions": 5,
        "changed_files": 4,
        "created_at": "2020-11-24T05:28:18Z",
        "closed_at": "2020-11-25T08:10:42Z",
        "merged_at": "2020-11-25T08:10:42Z",
        "body": "**Added:**\n\n\n* GetFunctionConcurrency: Added Support for `GetFunctionConcurrency` api - [Reference](https://docs.aws.amazon.com/lambda/latest/dg/API_GetFunctionConcurrency.html)\n* DeleteFunctionConcurrency: Added Support for `DeleteFunctionConcurrency` api - [Reference](https://docs.aws.amazon.com/lambda/latest/dg/API_DeleteFunctionConcurrency.html)\n\nTest:\n\n\n* Added Unit test cases for `GetFunctionConcurrency` and `DeleteFunctionConcurrency`\n* Added Ingtegration test cases for `GetFunctionConcurrency` and `DeleteFunctionConcurrency`\n\nThis PR will also fix issue #3260.\n\n\n\n\u2506Issue is synchronized with this [Jira Bug](https://localstack.atlassian.net/browse/LOC-346) by [Unito](https://www.unito.io/learn-more)\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 38,
        "deletions": 9,
        "changed_files": 6,
        "created_at": "2020-11-23T16:00:12Z",
        "closed_at": "2020-11-25T08:38:44Z",
        "merged_at": "2020-11-25T08:38:43Z",
        "body": "minor refractoring - route53\nAdded: route53 terraform test case support\n\n\n\n\u2506Issue is synchronized with this [Jira Bug](https://localstack.atlassian.net/browse/LOC-344) by [Unito](https://www.unito.io/learn-more)\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2020-11-22T14:11:17Z",
        "closed_at": "2020-11-22T23:32:18Z",
        "merged_at": "2020-11-22T23:32:18Z",
        "body": "Port refers to 4568, but commands run successfully on port 4566. Not sure if typo or version change, or if I have fundamentally misunderstood the purpose of the example commands...\n\n**Please refer to the contribution guidelines in the README when submitting PRs.**\n\n\n\n\u2506Issue is synchronized with this [Jira Bug](https://localstack.atlassian.net/browse/LOC-342) by [Unito](https://www.unito.io/learn-more)\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 5,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2020-11-22T06:19:12Z",
        "closed_at": "2021-01-11T11:48:17Z",
        "merged_at": "2021-01-11T11:48:17Z",
        "body": "Change in dates format to long so the response can be interpreted by SDKs (tested in Java AWS SDK v2)\r\n\r\nYou can test using the Java SDK v2 with this snippet:\r\n\r\n\r\n```\r\nimport software.amazon.awssdk.services.ssm.*;\r\nimport software.amazon.awssdk.services.ssm.model.*;\r\n\r\nimport java.net.URI;\r\n\r\npublic class App \r\n{\r\n    public static void main( String[] args ) {\r\n        SsmClient client = SsmClient.builder().endpointOverride(URI.create(\"http://localstack:4566\")).build();\r\n        GetParametersResponse response = client.getParameters(GetParametersRequest.builder().names(\"/aws/reference/secretsmanager/test_secret\", \"/aws/reference/secretsmanager/no_secret\",\"test_parameter\", \"no_parameter\").build());\r\n        System.out.println( response );\r\n    }\r\n}\r\n```\r\n\r\nThe console prints the following:\r\n\r\n\r\n```\r\nGetParametersResponse(Parameters=[Parameter(Name=/aws/reference/secretsmanager/test_secret, Type=SecureString, Value=test_secret, LastModifiedDate=2020-11-22T05:10:49Z), Parameter(Name=test_parameter, Value=test_parameter, Version=1, LastModifiedDate=2020-11-22T05:10:50Z, ARN=arn:aws:ssm:us-east-1:1234567890:parameter/test_parameter)], InvalidParameters=[/aws/reference/secretsmanager/no_secret, no_parameter])\r\n```\r\n\r\n**NOTE:** This only applies for the AWS SDK Version 2 iterations, it is not compatible with AWS SKD Version 1. Which brings my following question.\r\n\r\n**What is the support policy for the wide variety of SDKs and its versions?**\r\nIn case of this feature (SSM & SecretsManager integration) the payload needs to be different depending on the Java SDK. The response format used to comply with the Java JDK v2 (`software.amazon.awssdk.services.ssm`) is incompatible with the one used with the Java JDK v1 (`com.amazonaws.services.simplesystemsmanagement`).\r\n\r\n\u2506Issue is synchronized with this [Jira Bug](https://localstack.atlassian.net/browse/LOC-340) by [Unito](https://www.unito.io/learn-more)\r\n",
        "comments": 6
    },
    {
        "merged": true,
        "additions": 143,
        "deletions": 31,
        "changed_files": 5,
        "created_at": "2020-11-21T14:08:05Z",
        "closed_at": "2020-11-21T23:24:22Z",
        "merged_at": "2020-11-21T23:24:22Z",
        "body": "Enhance CF logic to load state of existing resources\n\n\n\n\u2506Issue is synchronized with this [Jira Bug](https://localstack.atlassian.net/browse/LOC-339) by [Unito](https://www.unito.io/learn-more)\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2020-11-20T13:39:27Z",
        "closed_at": "2020-11-21T14:07:05Z",
        "merged_at": "2020-11-21T14:07:05Z",
        "body": "WORKDIR is not enough, it can be overriden by k8s or docker or anything else really.\n\n**Please refer to the contribution guidelines in the README when submitting PRs.**\n\n\n\n\u2506Issue is synchronized with this [Jira Bug](https://localstack.atlassian.net/browse/LOC-336) by [Unito](https://www.unito.io/learn-more)\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 308,
        "deletions": 52,
        "changed_files": 2,
        "created_at": "2020-11-20T11:02:19Z",
        "closed_at": "2020-11-28T10:57:31Z",
        "merged_at": "2020-11-28T10:57:31Z",
        "body": "Added content base filters in events. Also there some required changes in the pattern rule's format (**Only string or integer in pattern rule is not allowed. Instead, add pattern rule's values in a list structure**).\nThe test case has been added.\n#2672\n\n\n\n\u2506Issue is synchronized with this [Jira Bug](https://localstack.atlassian.net/browse/LOC-335) by [Unito](https://www.unito.io/learn-more)\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2020-11-19T18:11:35Z",
        "closed_at": "2020-11-20T17:10:56Z",
        "merged_at": "2020-11-20T17:10:56Z",
        "body": "This should fix #3255.\n\nI added a fallback for the edge-service, so that the service `EventBridge` will be mapped to `events`, because `EventBridge` will be used by the AWS Go SDK.\n\n\n\n\u2506Issue is synchronized with this [Jira Bug](https://localstack.atlassian.net/browse/LOC-333) by [Unito](https://www.unito.io/learn-more)\n",
        "comments": 5
    },
    {
        "merged": true,
        "additions": 23,
        "deletions": 22,
        "changed_files": 3,
        "created_at": "2020-11-16T18:22:16Z",
        "closed_at": "2020-11-19T09:32:13Z",
        "merged_at": "2020-11-19T09:32:13Z",
        "body": "the objective of this patch is to avoid the instance collection every time a new object is created, which can be the reason of the memory leaks mentioned in the issues #3143 and #3233 .\n\n\n\n\u2506Issue is synchronized with this [Jira Bug](https://localstack.atlassian.net/browse/LOC-327) by [Unito](https://www.unito.io/learn-more)\n",
        "comments": 6
    },
    {
        "merged": true,
        "additions": 45,
        "deletions": 5,
        "changed_files": 5,
        "created_at": "2020-11-16T16:16:37Z",
        "closed_at": "2020-11-18T20:50:05Z",
        "merged_at": "2020-11-18T20:50:05Z",
        "body": "**Feature Added:**\n\n\n* `GetChange `API for route53 [(Reference)](https://docs.aws.amazon.com/Route53/latest/APIReference/API_GetChange.html)\n\nThis PR will implements the feature requested by #1860 and #3221 .\n\n\n\n\u2506Issue is synchronized with this [Jira Bug](https://localstack.atlassian.net/browse/LOC-325) by [Unito](https://www.unito.io/learn-more)\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 693,
        "deletions": 1,
        "changed_files": 6,
        "created_at": "2020-11-16T09:53:04Z",
        "closed_at": "2020-11-17T18:55:13Z",
        "merged_at": "2020-11-17T18:55:13Z",
        "body": "* handle IAM::Policy resource on cloudformation\n* fix issue on deleting IAM::Policy\n* Add integration test\n\nIssue fixed:\n#2757 CloudFormation: Read timeout\n\n\n\n\u2506Issue is synchronized with this [Jira Bug](https://localstack.atlassian.net/browse/LOC-324) by [Unito](https://www.unito.io/learn-more)\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 80,
        "deletions": 9,
        "changed_files": 2,
        "created_at": "2020-11-15T22:31:40Z",
        "closed_at": "2020-11-20T17:15:49Z",
        "merged_at": "2020-11-20T17:15:49Z",
        "body": "Patched SSM so **GetRequests** requests can support having SecretsManager secres in it. Also, slightly modified the method so when an inexistent secret is requested a 400 is managed instead of having the 500 thrown.\n\n**NOTE:** I'm not much acquainted with Python so sorry if I'm not doing some things the most recommended Python way\n\n## Caveat\nThe patch works as expected when making requests through the aws-cli or HTTP request (with postman) like so:\n\n1) Create the param and secret\n\n\n```\naws --endpoint-url http://localstack:4566 secretsmanager create-secret --name test_secret --secret-string 'test_secret' && \\\naws --endpoint-url http://localstack:4566 ssm put-parameter --name test_parameter --value 'test_parameter'\n```\n\n2) Get existent and non existent params and secrets\n\n\n```\naws --endpoint-url http://localstack:4566 ssm get-parameters \\\n    --names /aws/reference/secretsmanager/test_secret /aws/reference/secretsmanager/no_secret \\\n            test_parameter no_parameter\n```\n\nResponse:\n\n\n```\n{\n    \"Parameters\": [\n        {\n            \"Name\": \"/aws/reference/secretsmanager/test_secret\",\n            \"Type\": \"SecureString\",\n            \"Value\": \"test_secret\",\n            \"SourceResult\": {\n                \"ARN\": \"arn:aws:secretsmanager:us-east-1:1234567890:secret:test_secret-HHFCE\",\n                \"Name\": \"test_secret\",\n                \"VersionId\": \"d9dd4abe-66aa-491e-b124-63258e7c33cc\",\n                \"SecretString\": \"test_secret\",\n                \"VersionStages\": [\n                    \"AWSCURRENT\"\n                ],\n                \"CreatedDate\": \"2020-11-15T20:54:28.000Z\"\n            },\n            \"LastModifiedDate\": \"2020-11-15T20:54:28+00:00\"\n        },\n        {\n            \"Name\": \"test_parameter\",\n            \"Value\": \"test_parameter\",\n            \"Version\": 1,\n            \"LastModifiedDate\": \"2020-11-15T20:54:29.656000+00:00\",\n            \"ARN\": \"arn:aws:ssm:us-east-1:1234567890:parameter/test_parameter\"\n        }\n    ],\n    \"InvalidParameters\": [\n        \"/aws/reference/secretsmanager/no_secret\",\n        \"no_parameter\"\n    ]\n}\n```\n\n**BUT**\nWhen requesting through an SDK (Java in this case) there are problems in parsing the JSON response. I would like to request some help as of why this is the case. I believe that is because when secrets are involved, the response is sent directly in the listener instead of returning a Request.\n\n\n```\nCaused by: java.lang.RuntimeException: We expected a VALUE token but got: START_OBJECT\n  at com.amazonaws.transform.JsonUnmarshallerContextImpl.readCurrentJsonTokenValue(JsonUnmarshallerContextImpl.java:152)\n  at com.amazonaws.transform.JsonUnmarshallerContextImpl.readText(JsonUnmarshallerContextImpl.java:135)\n  at com.amazonaws.transform.SimpleTypeJsonUnmarshallers$StringJsonUnmarshaller.unmarshall(SimpleTypeJsonUnmarshallers.java:34)\n  at com.amazonaws.transform.SimpleTypeJsonUnmarshallers$StringJsonUnmarshaller.unmarshall(SimpleTypeJsonUnmarshallers.java:32)\n... and so on\n```\n\n\n\n\u2506Issue is synchronized with this [Jira Bug](https://localstack.atlassian.net/browse/LOC-323) by [Unito](https://www.unito.io/learn-more)\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 75,
        "deletions": 23,
        "changed_files": 2,
        "created_at": "2020-11-14T14:40:20Z",
        "closed_at": "2020-11-19T11:29:14Z",
        "merged_at": "2020-11-19T11:29:14Z",
        "body": "This PR will fix response structure for Integration/IntegrationResponse\nImproved Support for `APIGateway `in terraform\n\n**Refractored:**\n\n\n* `apigateway_models_Integration_init` for backward compatibility\n* streamline patching pattern\n\n**Fixed:**\n\n\n* APIGateway `put_integration` response\n* APIGateway `put_integration_response` response\n\n**Test:**\n\n\n* Extended test case for improved response structure\n\nThis PR will address issue mentioned in #1984 .\n\n\n\n\u2506Issue is synchronized with this [Jira Bug](https://localstack.atlassian.net/browse/LOC-322) by [Unito](https://www.unito.io/learn-more)\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 357,
        "deletions": 161,
        "changed_files": 11,
        "created_at": "2020-11-14T11:44:05Z",
        "closed_at": "2020-11-15T23:04:04Z",
        "merged_at": "2020-11-15T23:04:04Z",
        "body": "Refactor CloudFormation dependency resolution mechanism - this fixes some issues with CDK templates that could not be deployed with the current logic.\r\n\r\nThis PR contains a couple of smaller changes, mostly:\r\n* minor refactorings of the current logic\r\n* enhanced CF deployment support for various resource types\r\n* assigning default resource names where missing (prior to the deployment loop, to make it more stable)\r\n\r\nThe **main change** in this PR is to introduce an exception class `DependencyNotYetSatisfied` which is raised whenever a resource dependency can not (yet) be resolved (this can be an intermittent error, as the stack resources are deployed in multiple steps/iterations to resolve all dependencies). The resource deployment loop has been adapted to be able to deal with this type of exception. This fixes an issue where we were seeing various resource references/attributes replaced with `None` values if the corresponding resources have not been deployed yet. Overall, these changes should (hopefully) make complex stacks with various resource dependencies deploy more reliably and consistently.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 21,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2020-11-12T12:06:40Z",
        "closed_at": "2020-11-13T16:17:37Z",
        "merged_at": "2020-11-13T16:17:37Z",
        "body": "This PR fixed the issue mentioned in #1984 .\r\n\r\n`timeoutInMillis` variable was missing in the response in `CreateIntegrations` api when the timout is specified.\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2020-11-12T06:43:41Z",
        "closed_at": "2020-11-12T16:37:52Z",
        "merged_at": "2020-11-12T16:37:52Z",
        "body": "Fixing issue where SSM couldn't get parameters created from SecretsManager when the name contains slashes (#3237)\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 63,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2020-11-11T22:10:26Z",
        "closed_at": "2020-11-15T17:14:39Z",
        "merged_at": "2020-11-15T17:14:39Z",
        "body": "Now the instances of  **FakeKey** and  **FakeBucket** are being remove from the attribute instances on creation, to avoid storing the object references even after the object was deleted.\r\n\r\nposible solution to [issue 3143](https://github.com/localstack/localstack/issues/3143) ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 30,
        "deletions": 4,
        "changed_files": 2,
        "created_at": "2020-11-11T09:12:30Z",
        "closed_at": "2020-11-11T11:19:28Z",
        "merged_at": "2020-11-11T11:19:28Z",
        "body": "This PR fixed the issue mentioned in #3209 .\r\n\r\n`cacheClusterStatus` variable was missing in the response in `CreateStage` api when the `cacheCluster` is enable.\r\n\r\nLamda IAM policy should contain qualifier in the ARN.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 16,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2020-11-08T14:18:29Z",
        "closed_at": "2020-11-12T20:12:06Z",
        "merged_at": "2020-11-12T20:12:06Z",
        "body": "Issue #3190 ",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 21,
        "deletions": 15,
        "changed_files": 2,
        "created_at": "2020-11-06T15:29:09Z",
        "closed_at": "2020-11-06T20:43:36Z",
        "merged_at": "2020-11-06T20:43:36Z",
        "body": "This change disables compression for falsy S3 response bodies.\r\n\r\nIf an HTTP request has an `Accept-Encoding: gzip` header when an S3 response has a 204 status code, the empty body is compressed with gzip into a non-empty body. This causes some HTTP clients, [like tornado](https://github.com/tornadoweb/tornado/blob/b120df9b584dc59881b72854a4b8e73b16b25159/tornado/http1connection.py#L630-L638), to raise an exception.",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2020-11-04T19:26:45Z",
        "closed_at": "2020-11-05T00:22:38Z",
        "merged_at": "2020-11-05T00:22:38Z",
        "body": "Fix : S3 POST Browser direct upload Crash\r\nhttps://github.com/localstack/localstack/issues/2948",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 18,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2020-11-04T06:31:19Z",
        "closed_at": "2020-11-04T10:53:37Z",
        "merged_at": "2020-11-04T10:53:37Z",
        "body": "https://github.com/localstack/localstack/issues/3151",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 123,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2020-11-03T18:51:39Z",
        "closed_at": "2020-11-03T23:34:08Z",
        "merged_at": "2020-11-03T23:34:08Z",
        "body": "**Patched:**\r\n- Moto implementation for secretsmanager `get-resource-policy`\r\n\r\n**Added:**\r\n- API implementation for secretsmanager `put-resource-policy`\r\n- API implementation for secretsmanager `delete-resource-policy`\r\n\r\n**Test:**\r\n- Added test cases for `get-resource-policy` `put-resource-policy` `delete-resource-policy`\r\n\r\nThis PR will fix the issue #3195 .",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 103,
        "deletions": 22,
        "changed_files": 6,
        "created_at": "2020-10-31T18:12:04Z",
        "closed_at": "2020-11-01T14:24:54Z",
        "merged_at": "2020-11-01T14:24:54Z",
        "body": "**Test Added:**\r\n- test cases for api-gateway v1 using module\r\n- terraform refractoring",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 104,
        "deletions": 2,
        "changed_files": 3,
        "created_at": "2020-10-30T16:12:34Z",
        "closed_at": "2020-11-04T16:56:53Z",
        "merged_at": "2020-11-04T16:56:53Z",
        "body": "CORS headers issue has been solved. Now the response of the S3 object call will contain the require CORS headers if CORS configurations are being enabled. If the CORS configurations of the bucket are not enabled then it will add * as an allowed origin and add all valid methods and headers in the response headers. #2168 ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 565,
        "deletions": 483,
        "changed_files": 15,
        "created_at": "2020-10-30T08:19:58Z",
        "closed_at": "2020-11-01T12:43:27Z",
        "merged_at": "2020-11-01T12:43:26Z",
        "body": "* refactor test templates using files\r\n* handle non-zero ReceiveMessageWaitTimeSeconds property on SQS\r\n* implement Cloudformation validate_template API\r\n\r\nIssue fixed:\r\n#3004 Cannot create SQS queue a non zero ReceiveMessageWaitTimeSeconds property via CloudFormation\r\n#2696 LocalStack:Cloudformation Issue",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 6,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2020-10-29T11:45:14Z",
        "closed_at": "2020-10-29T16:51:05Z",
        "merged_at": "2020-10-29T16:51:04Z",
        "body": "Now s3 presign feature requires credentials to be set 'test' as Aws Access Key Id and Aws Secret Access Key Id. We have added signature validation and expiration validation of the presign URL. \r\n\r\nPR:  #3092 ",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 16,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2020-10-28T18:27:46Z",
        "closed_at": "2020-11-04T08:19:45Z",
        "merged_at": "2020-11-04T08:19:45Z",
        "body": "Fix:SQS:Delete queue operation for queues with slashes\r\nhttps://github.com/localstack/localstack/issues/3180",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 43,
        "deletions": 45,
        "changed_files": 4,
        "created_at": "2020-10-28T00:01:29Z",
        "closed_at": "2020-10-29T01:05:30Z",
        "merged_at": "2020-10-29T01:05:30Z",
        "body": "Fix Content-Length for edge responses",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 47,
        "deletions": 20,
        "changed_files": 2,
        "created_at": "2020-10-26T22:14:50Z",
        "closed_at": "2020-10-27T07:40:03Z",
        "merged_at": "2020-10-27T07:40:03Z",
        "body": "Add utility function to create Lambda event request context for API GW",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 105,
        "deletions": 25,
        "changed_files": 5,
        "created_at": "2020-10-26T20:24:59Z",
        "closed_at": "2020-10-31T18:09:27Z",
        "merged_at": null,
        "body": "**Added:**\r\n\r\n- test cases for api-gateway v1 using module\r\n- terraform refractoring",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 39,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2020-10-26T09:37:33Z",
        "closed_at": "2020-11-05T17:42:37Z",
        "merged_at": "2020-11-05T17:42:37Z",
        "body": "Fix:SSM:Secrets manager get parameter\r\n\r\nhttps://github.com/localstack/localstack/issues/3128",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 17,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2020-10-26T05:59:08Z",
        "closed_at": "2020-11-01T21:36:59Z",
        "merged_at": "2020-11-01T21:36:59Z",
        "body": "Fix:S3:Crash on precondition failure\r\nhttps://github.com/localstack/localstack/issues/3168",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 25,
        "deletions": 27,
        "changed_files": 7,
        "created_at": "2020-10-24T17:22:28Z",
        "closed_at": "2020-10-26T23:45:34Z",
        "merged_at": "2020-10-26T23:45:34Z",
        "body": "- Fixes https://github.com/localstack/localstack/issues/2093\r\n- Fixes https://github.com/localstack/localstack/issues/3136\r\n\r\n---\r\n\r\nCurrently, the local lambda executor cannot run any Java code built by JDK 9+ since the docker image comes with JRE 8. See https://github.com/localstack/localstack/issues/2093 for more details. This PR upgrades the Java version installed in the docker image.\r\n\r\nhttps://github.com/localstack/localstack-java-utils is still compiled with JDK 8 but it's not a blocker for this PR. We can tackle that upgrade later.",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 14,
        "deletions": 7,
        "changed_files": 1,
        "created_at": "2020-10-24T16:36:34Z",
        "closed_at": "2020-10-25T11:23:19Z",
        "merged_at": "2020-10-25T11:23:18Z",
        "body": "Add log output listener to shell command thread - allows clients to consume and process individual log lines from a spawned process.",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 43,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2020-10-24T08:55:38Z",
        "closed_at": "2020-10-24T14:41:34Z",
        "merged_at": "2020-10-24T14:41:34Z",
        "body": "Add documentation about how to setup Localstack `docker-compose.yml` file to use  the official AWS CLI v2 docker container. (see #3088) ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2020-10-23T18:55:34Z",
        "closed_at": "2020-10-24T09:59:17Z",
        "merged_at": "2020-10-24T09:59:17Z",
        "body": "The docker-compose.yml file in the root director is using the version 2.1 file spec. This requires Compose 1.9.0+. Updating readme.md to reflect this. docker-compose latest version is currently at 1.27.4 \r\nSee: https://docs.docker.com/compose/compose-file/compose-versioning/#version-21\r\n\r\n**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 8,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2020-10-23T00:41:52Z",
        "closed_at": "2020-10-24T16:34:31Z",
        "merged_at": "2020-10-24T16:34:31Z",
        "body": "The dynamodb streams' record sequence number is mismatched from the shard's starting and end sequence number.\r\n\r\nWhen we call ddbstreams.describe_stream(...) we get shards with SequenceNumber that looks like the following:\r\n{'ShardId': 'shardId-00000001603400000000-000000000000', 'SequenceNumberRange': {**'StartingSequenceNumber': '49611974300205315735694662545343431332397447507475431426'**}}\r\n\r\nBut when we call ddbstreams.get_records(...) we get records with SequenceNumber that looks like this:\r\n{'ApproximateCreationDateTime': datetime.datetime(2020, 10, 22, 17, 37, 41, 162566, tzinfo=tzlocal()), 'Keys': {'id': {'S': 'a1c3bd2e'}}, 'NewImage': {'attr1': {'S': 'value1'}, 'attr2': {'S': 'value2'}, 'id': {'S': 'a1c3bd2e'}}, **'SequenceNumber': '1',** 'SizeBytes': 77, 'StreamViewType': 'NEW_AND_OLD_IMAGES'}\r\n\r\nThis violate the contract that the records's sequence number should be greater than the shard's starting sequence number and equal or smaller than the end sequence number.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2020-10-22T23:00:37Z",
        "closed_at": "2020-10-25T11:53:08Z",
        "merged_at": "2020-10-25T11:53:08Z",
        "body": "Currently, when fetching s3 notifications `Id` field is generated on response so it differs from call to call, also ID that is provided when creating notification is ignored.\r\n\r\nThis fix should make use of provided `Id` when notifications are created (defaults to UUID) and return the said `Id` on `GET`.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 51,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2020-10-22T16:41:37Z",
        "closed_at": "2020-10-25T11:25:10Z",
        "merged_at": "2020-10-25T11:25:10Z",
        "body": "This PR has been created to fix the upstream response. If the authorization type is 'CUSTOM' or 'COGNITO_USER_POOLS', then the request should be responded with 'authorizationId' parameter\r\n\r\nIssue Ref: #1315 ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 75,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2020-10-21T19:09:56Z",
        "closed_at": "2020-10-21T23:07:36Z",
        "merged_at": "2020-10-21T23:07:36Z",
        "body": "Updated documentation for setting up development environment",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 116,
        "deletions": 37,
        "changed_files": 2,
        "created_at": "2020-10-21T18:42:41Z",
        "closed_at": "2020-10-26T21:34:57Z",
        "merged_at": "2020-10-26T21:34:57Z",
        "body": "Added a validation before creating a policy for a function. Without it, creating a policy that already exists throws an Error in localstack and Error 500 in awslocal.\r\n\r\nCould be the fix to the [Issue 3040]( https://github.com/localstack/localstack/issues/3040)\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 29,
        "deletions": 5,
        "changed_files": 2,
        "created_at": "2020-10-20T21:21:48Z",
        "closed_at": "2020-10-21T10:03:42Z",
        "merged_at": "2020-10-21T10:03:41Z",
        "body": "Fix:Events add eventPattern filter for the rules\r\n#3132",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 19,
        "deletions": 17,
        "changed_files": 2,
        "created_at": "2020-10-20T20:09:53Z",
        "closed_at": "2020-10-20T22:44:28Z",
        "merged_at": "2020-10-20T22:44:28Z",
        "body": "Add CloudFormation support for Lambda::Permission",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 11,
        "deletions": 5,
        "changed_files": 2,
        "created_at": "2020-10-20T15:09:25Z",
        "closed_at": "2021-02-06T16:12:10Z",
        "merged_at": null,
        "body": "Fixed errors on elastic search startup\n\n\n\n\u2506Issue is synchronized with this [Jira Bug](https://localstack.atlassian.net/browse/LOC-296) by [Unito](https://www.unito.io/learn-more)\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 27,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2020-10-18T11:27:30Z",
        "closed_at": "2020-10-18T13:27:11Z",
        "merged_at": "2020-10-18T13:27:11Z",
        "body": "added expanded s3 test cases:\r\n- support for cors policy s3",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2020-10-17T17:20:46Z",
        "closed_at": "2020-10-17T19:31:08Z",
        "merged_at": "2020-10-17T19:31:08Z",
        "body": "this pr will fix empty response handling with gzip header.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 42,
        "deletions": 49,
        "changed_files": 3,
        "created_at": "2020-10-17T15:09:40Z",
        "closed_at": "2020-10-17T16:31:54Z",
        "merged_at": "2020-10-17T16:31:54Z",
        "body": "* Refactor StepFunctions integration tests\r\n* Pass $EDGE_PORT to Lambdas (addresses #3119)",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 81,
        "deletions": 9,
        "changed_files": 3,
        "created_at": "2020-10-17T11:32:43Z",
        "closed_at": "2020-10-17T13:18:28Z",
        "merged_at": "2020-10-17T13:18:28Z",
        "body": "When trying to create Choice State Machines, the \"IsPresent\" key wasn't valid, created an integration test to test that.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 48,
        "deletions": 2,
        "changed_files": 3,
        "created_at": "2020-10-17T11:07:05Z",
        "closed_at": "2020-10-17T12:53:34Z",
        "merged_at": "2020-10-17T12:53:34Z",
        "body": "Added:\r\n\r\n-  initial terraform test support for lambda functions",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 45,
        "deletions": 20,
        "changed_files": 2,
        "created_at": "2020-10-16T01:47:58Z",
        "closed_at": "2020-10-16T11:40:07Z",
        "merged_at": "2020-10-16T11:40:06Z",
        "body": "To fix https://github.com/localstack/localstack/issues/3111",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 70,
        "deletions": 7,
        "changed_files": 6,
        "created_at": "2020-10-15T20:44:22Z",
        "closed_at": "2020-10-18T22:05:32Z",
        "merged_at": "2020-10-18T22:05:31Z",
        "body": "* Add cloudwatch starter and listener to fix date format.\r\n* Add unittest to test cloudwatch listener.\r\n#3062 \r\n**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2020-10-15T06:07:37Z",
        "closed_at": "2020-10-16T20:20:45Z",
        "merged_at": "2020-10-16T20:20:45Z",
        "body": "Fix:S3 Notification case sensitivity\r\n#3097",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 118,
        "deletions": 70,
        "changed_files": 4,
        "created_at": "2020-10-14T21:17:22Z",
        "closed_at": "2020-10-16T21:12:45Z",
        "merged_at": "2020-10-16T21:12:45Z",
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n\r\nPR to solve [Issue 2928](https://github.com/localstack/localstack/issues/2928)",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 63,
        "deletions": 1,
        "changed_files": 6,
        "created_at": "2020-10-14T20:18:59Z",
        "closed_at": "2020-10-16T14:57:24Z",
        "merged_at": "2020-10-16T14:57:24Z",
        "body": "Initial implementation of terraform test cases.\r\nIt includes:\r\n- Basic S3 test case setup.\r\n- Base Docker image includes terraform now.\r\n- Removing terraform from final image\r\n- gitignore updated",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 14,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2020-10-13T23:16:29Z",
        "closed_at": "2020-10-14T14:56:45Z",
        "merged_at": "2020-10-14T14:56:44Z",
        "body": "Fix XML root tag for S3 error responses",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 13,
        "deletions": 4,
        "changed_files": 2,
        "created_at": "2020-10-12T19:09:49Z",
        "closed_at": "2020-10-13T06:14:51Z",
        "merged_at": "2020-10-13T06:14:51Z",
        "body": "Fix invalid account ID in CloudWatch logs listener ARNs\r\n\r\nAddresses #2883",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 339,
        "deletions": 76,
        "changed_files": 5,
        "created_at": "2020-10-12T17:44:29Z",
        "closed_at": "2020-10-15T12:49:20Z",
        "merged_at": "2020-10-15T12:49:19Z",
        "body": "Signature validation is being implemented.\r\nAlso the presign URL's expiration is being compared to validate the request.\r\nAddresses #739",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 96,
        "deletions": 96,
        "changed_files": 5,
        "created_at": "2020-10-11T19:05:10Z",
        "closed_at": "2020-10-12T06:52:18Z",
        "merged_at": "2020-10-12T06:52:18Z",
        "body": "* Fix issue with blocking sockets in HTTP2 server\r\n* Minor refactoring of /graph endpoint",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 7,
        "deletions": 5,
        "changed_files": 2,
        "created_at": "2020-10-11T17:56:34Z",
        "closed_at": "2020-10-11T19:22:38Z",
        "merged_at": "2020-10-11T19:22:38Z",
        "body": "Fix Kinesis put record timestamp\r\n#3083 ",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 2,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2020-10-08T03:52:40Z",
        "closed_at": "2020-10-10T22:06:49Z",
        "merged_at": null,
        "body": "Fix: ES :Create Domain Response \r\n\r\n#3081 ",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 12,
        "deletions": 9,
        "changed_files": 2,
        "created_at": "2020-10-07T12:25:46Z",
        "closed_at": "2020-10-10T12:36:14Z",
        "merged_at": "2020-10-10T12:36:14Z",
        "body": "Issue addressed: #3037\r\n\r\nAdded cloudwatch as a dependency in bootstrap.py, to start whenever lambda is enabled.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 17,
        "deletions": 5,
        "changed_files": 4,
        "created_at": "2020-10-07T00:06:13Z",
        "closed_at": "2020-10-07T22:14:59Z",
        "merged_at": "2020-10-07T22:14:59Z",
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n \r\nWith my last PR on [Kinesalite](https://github.com/mhart/kinesalite/pull/104) and this new function. Kinesa_Proxy is be able to handle CBOR Requests.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 61,
        "deletions": 43,
        "changed_files": 7,
        "created_at": "2020-10-06T20:02:26Z",
        "closed_at": "2020-10-07T22:45:20Z",
        "merged_at": "2020-10-07T22:45:20Z",
        "body": "Fix Java Lambda executor to use lambci mechanism (disable deprecated custom Java Lambda handling in LocalStack). Based on #3076",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 19,
        "deletions": 18,
        "changed_files": 2,
        "created_at": "2020-10-06T17:29:52Z",
        "closed_at": "2020-10-07T22:30:32Z",
        "merged_at": null,
        "body": "Updated Lambda Executor with lambci",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 88,
        "deletions": 8,
        "changed_files": 4,
        "created_at": "2020-10-06T07:57:19Z",
        "closed_at": "2020-10-06T17:43:32Z",
        "merged_at": "2020-10-06T17:43:32Z",
        "body": "Fix issue when update stack with same template\r\n* Patch moto function\r\n* Add integration test\r\n\r\nIssue fixed:\r\n#2444 Not working for same cloud-formation \"No updates are to be performed.\"",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 24,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2020-10-03T14:13:09Z",
        "closed_at": "2020-10-16T23:09:34Z",
        "merged_at": "2020-10-16T23:09:34Z",
        "body": "Test:added tests for cloudformation create queue with attributes\r\n#3004",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 78,
        "deletions": 4,
        "changed_files": 3,
        "created_at": "2020-10-02T19:00:20Z",
        "closed_at": "2020-10-04T20:29:31Z",
        "merged_at": "2020-10-04T20:29:31Z",
        "body": "Fix:Events:Put events:publishing event with target InputPath consideration.\r\n#3060",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 41,
        "deletions": 7,
        "changed_files": 3,
        "created_at": "2020-10-02T15:19:49Z",
        "closed_at": "2020-10-03T12:12:57Z",
        "merged_at": "2020-10-03T12:12:57Z",
        "body": "This PR fixed (adds support) for add-permission in lambda. Also this will add resolve the issue reported by #3040 .\r\nFixed: Response for `lambda add-permission`.\r\nExtended test case for `add-permission`.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 77,
        "deletions": 12,
        "changed_files": 3,
        "created_at": "2020-10-01T23:36:36Z",
        "closed_at": "2020-10-04T22:10:37Z",
        "merged_at": "2020-10-04T22:10:37Z",
        "body": "* Separate read and write error injection.\r\n* Add integration test cases for the same.\r\n* Separate env variables for read ad write.\r\n\r\nAddresses #2013",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 3,
        "deletions": 0,
        "changed_files": 3,
        "created_at": "2020-10-01T16:25:25Z",
        "closed_at": "2020-10-01T17:28:07Z",
        "merged_at": null,
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 9,
        "deletions": 3,
        "changed_files": 3,
        "created_at": "2020-10-01T10:04:21Z",
        "closed_at": "2020-10-01T18:30:15Z",
        "merged_at": "2020-10-01T18:30:15Z",
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 8,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2020-09-30T20:58:41Z",
        "closed_at": "2020-10-05T18:22:55Z",
        "merged_at": "2020-10-05T18:22:55Z",
        "body": "I am proposing to create a variable `INIT_SCRIPTS_PATH` to define the path of the initialization files.\r\n\r\nThis solves a problem for me where pipelines mount the volume with the files from the repository, however I must not manipulate these files, but I can reference the existing path.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 16,
        "deletions": 3,
        "changed_files": 2,
        "created_at": "2020-09-29T18:41:52Z",
        "closed_at": "2020-10-02T19:43:06Z",
        "merged_at": "2020-10-02T19:43:06Z",
        "body": "Fix:Events put events on No source\r\n#3043 ",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 24,
        "deletions": 24,
        "changed_files": 1,
        "created_at": "2020-09-29T17:21:48Z",
        "closed_at": "2020-09-30T17:23:03Z",
        "merged_at": "2020-09-30T17:23:02Z",
        "body": "#3039 \r\n \r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 89,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2020-09-28T18:10:10Z",
        "closed_at": "2020-09-29T07:06:56Z",
        "merged_at": "2020-09-29T07:06:55Z",
        "body": "* Add integration test with map state machine, input and output.\r\n* Update lambda function to handle dynamic value to relace text in dict\r\n  only if map key is present.\r\n\r\n**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 33,
        "deletions": 10,
        "changed_files": 4,
        "created_at": "2020-09-27T20:55:49Z",
        "closed_at": "2020-09-27T22:23:26Z",
        "merged_at": "2020-09-27T22:23:25Z",
        "body": "Refactor CF logic for API GW resources and empty values",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 4,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2020-09-26T15:38:51Z",
        "closed_at": "2021-02-17T18:30:37Z",
        "merged_at": null,
        "body": "https://github.com/localstack/localstack.git\n#3025\n\n\n\n\u2506Issue is synchronized with this [Jira Bug](https://localstack.atlassian.net/browse/LOC-271) by [Unito](https://www.unito.io/learn-more)\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 92,
        "deletions": 100,
        "changed_files": 8,
        "created_at": "2020-09-26T00:12:08Z",
        "closed_at": "2020-09-26T17:12:20Z",
        "merged_at": "2020-09-26T17:12:20Z",
        "body": "Refactor API Gateway utils and test code",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 22,
        "deletions": 4,
        "changed_files": 2,
        "created_at": "2020-09-25T15:14:44Z",
        "closed_at": "2020-09-30T07:10:03Z",
        "merged_at": "2020-09-30T07:10:03Z",
        "body": "When 404 is returned and ErrorDocument is defined, the error\r\ndocument object is fetched from the bucket, but if the document is\r\nmissing we get an endless loop.\r\n\r\n\r\n",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 1,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2020-09-25T12:29:10Z",
        "closed_at": "2020-09-26T20:04:13Z",
        "merged_at": null,
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 34,
        "deletions": 12,
        "changed_files": 4,
        "created_at": "2020-09-24T12:05:10Z",
        "closed_at": "2020-09-26T00:15:16Z",
        "merged_at": "2020-09-26T00:15:16Z",
        "body": "Adds ability to set --dns flag when starting the lambda containers\r\n\r\n**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2020-09-24T05:36:35Z",
        "closed_at": "2020-09-24T17:48:57Z",
        "merged_at": "2020-09-24T17:48:57Z",
        "body": "This PR was implemented to fix issue #2544 .\r\nAdded expectation handling for `es_type` that is used as `doc_type` which is deprecated in es 7.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 52,
        "deletions": 48,
        "changed_files": 11,
        "created_at": "2020-09-23T19:57:04Z",
        "closed_at": "2020-09-24T00:17:27Z",
        "merged_at": "2020-09-24T00:17:27Z",
        "body": "Refactor startup logs to print correct ports in output",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 19,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2020-09-22T11:44:59Z",
        "closed_at": "2020-09-22T20:15:26Z",
        "merged_at": "2020-09-22T20:15:26Z",
        "body": "When making a s3 get object request with the `range` keyword, the `fix_range_content_type` function is called which can accidently change the request from looking for `s3://mybucket/myfile` to `s3://mybucket/mybucket` if `uses_path_addressing` is false.\r\n\r\nCurrently this returns true if the host is `http://localhost` but not if the host is `http://127.0.0.1`.\r\n\r\nThis pull request updates the check to also return true if the localhost ip is listed as the host.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 153,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2020-09-21T15:08:34Z",
        "closed_at": "2020-09-23T16:12:39Z",
        "merged_at": "2020-09-23T16:12:39Z",
        "body": "Update serverless template test\r\n* Test lambda handler for queue\r\n* Test apigateway integration\r\n\r\nIssue fixed:\r\n#2932 Unable to deploy CloudFormation stack via Serverless when having HTTP event as ANY {proxy+}",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 13,
        "deletions": 1,
        "changed_files": 3,
        "created_at": "2020-09-20T12:42:39Z",
        "closed_at": "2020-09-20T14:06:14Z",
        "merged_at": "2020-09-20T14:06:14Z",
        "body": "Fix error response for requests to non-started APIs",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2020-09-19T13:50:49Z",
        "closed_at": "2020-09-20T21:27:33Z",
        "merged_at": "2020-09-20T21:27:33Z",
        "body": "Test : SQS Lambda Event source Mapping Message deletion Check\r\n\r\n#3007",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 96,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2020-09-18T08:29:43Z",
        "closed_at": "2020-09-18T10:16:57Z",
        "merged_at": "2020-09-18T10:16:57Z",
        "body": "Update serverless template test\r\n* Test lambda handler for dynamodb, kinesis resource\r\n\r\nIssue fixed:\r\n#2756 An error occurred (ResourceConflictException) when calling the CreateFunction operation: Function already exist:",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 17,
        "deletions": 12,
        "changed_files": 3,
        "created_at": "2020-09-17T20:16:11Z",
        "closed_at": "2020-09-18T05:12:04Z",
        "merged_at": "2020-09-18T05:12:04Z",
        "body": "Minor refactoring of installation logic",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 22,
        "deletions": 12,
        "changed_files": 1,
        "created_at": "2020-09-17T18:46:54Z",
        "closed_at": "2020-09-18T05:54:57Z",
        "merged_at": "2020-09-18T05:54:57Z",
        "body": "Fixed AWS Behaviour for uploading big zip files based on #2990 .\r\n\r\n**Validation Removed:**\r\n- Lambda handler function validation when creating lambda function.\r\n\r\n**Validation Added:**\r\n- File size limit is less then 69905067.\r\n\r\nAWS message:\r\n```\r\nAn error occurred (RequestEntityTooLargeException) when calling the CreateFunction operation: Request must be smaller than 69905067 bytes for the CreateFunction operation\r\n```",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 58,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2020-09-16T18:34:56Z",
        "closed_at": "2021-10-18T16:10:13Z",
        "merged_at": null,
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\n\n\n\n\u2506Issue is synchronized with this [Jira Bug](https://localstack.atlassian.net/browse/LOC-266) by [Unito](https://www.unito.io/learn-more)\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 5,
        "changed_files": 3,
        "created_at": "2020-09-15T09:58:46Z",
        "closed_at": "2020-09-15T14:15:51Z",
        "merged_at": "2020-09-15T14:15:51Z",
        "body": "addresses https://github.com/localstack/serverless-localstack/issues/105\r\n\r\nIt seems that in the refactor of moto, they no longer return `BucketName` in the `Properties` when you call `parse_resource_and_generate_name`\r\n\r\nIt seems that we're already handling cases like this in `add_default_resource_props` so I've added another case to handle this.",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2020-09-14T22:48:45Z",
        "closed_at": "2020-10-29T01:08:09Z",
        "merged_at": null,
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 101,
        "deletions": 3,
        "changed_files": 4,
        "created_at": "2020-09-14T18:23:16Z",
        "closed_at": "2020-09-14T19:51:04Z",
        "merged_at": "2020-09-14T19:51:04Z",
        "body": "This PR adds more API supports for `Lambda Asynchronous invocation`.\r\n**APIs Added:**\r\n- UpdateFunctionEventInvokeConfig\r\n- DeleteFunctionEventInvokeConfig\r\n\r\n**Fixed API behaviour:**\r\n- PutFunctionEventInvokeConfig\r\n\r\nAdded features requested by issue: #2926 .",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 52,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2020-09-12T11:52:07Z",
        "closed_at": "2020-09-14T09:24:38Z",
        "merged_at": "2020-09-14T09:24:38Z",
        "body": "Add integration test:\r\n* Trigger java lambda through SNS\r\n\r\nIssue fixed:\r\n#2968 PRO:Unable to trigger Lambda through SNS",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 34,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2020-09-12T09:48:25Z",
        "closed_at": "2020-09-14T07:47:58Z",
        "merged_at": "2020-09-14T07:47:58Z",
        "body": "Add integration test:\r\n* Invoke zip nodejs lambda\r\n\r\nIssue fixed:\r\n#2969 Cannot invoke a zip deployed nodejs or python lambda deployed into localstack",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 6,
        "deletions": 7,
        "changed_files": 2,
        "created_at": "2020-09-11T07:57:52Z",
        "closed_at": "2020-09-14T08:53:25Z",
        "merged_at": "2020-09-14T08:53:25Z",
        "body": "Fix for #2970 \r\n * APIGateway should send the method it is called with to the backend not the method the backend is called with ",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 52,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2020-09-10T09:10:04Z",
        "closed_at": "2020-09-13T21:03:40Z",
        "merged_at": "2020-09-13T21:03:40Z",
        "body": "Add integration test:\r\n* Dynamodb stream invoke lambda\r\n# DynamoDB stream service requires Kinesis service enable\r\n\r\nIssue fixed:\r\n#2959 404 with DynamoDB Stream to Lambda",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2020-09-09T00:20:02Z",
        "closed_at": "2020-09-14T07:56:56Z",
        "merged_at": "2020-09-14T07:56:56Z",
        "body": "\u2026ring body\r\n\r\n**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 6,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2020-09-08T12:47:27Z",
        "closed_at": "2020-09-08T14:28:44Z",
        "merged_at": "2020-09-08T14:28:44Z",
        "body": "I always forget to pass environment variables especially for being selective which services to start. I put this tiny example at the end of configuration section.\r\nI'm hoping this could be useful for future.\r\n\r\n**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 306,
        "deletions": 2,
        "changed_files": 5,
        "created_at": "2020-09-08T09:10:28Z",
        "closed_at": "2020-09-08T14:19:12Z",
        "merged_at": "2020-09-08T14:19:11Z",
        "body": "Add integration test:\r\n* Query on deleted table\r\n\r\nIssue fixed:\r\n#2927 DynamoDB query not throwing exception when resource not exists",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 277,
        "deletions": 2,
        "changed_files": 4,
        "created_at": "2020-09-08T08:33:02Z",
        "closed_at": "2020-09-08T13:50:42Z",
        "merged_at": "2020-09-08T13:50:42Z",
        "body": "Fix cloudformation issue with API GW HTTP_PROXY integration.\r\n* Fix Uri value in Integration object before sending to moto backend\r\n* Add integration test\r\n\r\nIssue fixed:\r\n#2930 Localstack deployment fails with API GW HTTP_PROXY integration.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 9,
        "deletions": 8,
        "changed_files": 4,
        "created_at": "2020-09-07T23:23:32Z",
        "closed_at": "2020-09-15T19:24:45Z",
        "merged_at": "2020-09-15T19:24:45Z",
        "body": "* Minor fix in LAMBDA_REMOTE_DOCKER/HOST_TMP_FOLDER warning message\r\n* Release version 0.11.5 \r\n\r\nNote: This is the last release before some breaking changes will get merged (PR #2905).",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 8,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2020-09-07T19:11:04Z",
        "closed_at": "2020-09-14T08:15:36Z",
        "merged_at": "2020-09-14T08:15:36Z",
        "body": "Fixed:\r\n\r\n- `x-amz-crc32` header updated after patching the response.\r\n- Added a common function for calculating crc32.\r\n\r\nThis PR should fix the issue #2640 .",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 53,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2020-09-06T20:09:30Z",
        "closed_at": "2020-09-07T22:49:39Z",
        "merged_at": "2020-09-07T22:49:39Z",
        "body": "Kinesis:Lambda event changes\r\n#2938 ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 64,
        "deletions": 43,
        "changed_files": 8,
        "created_at": "2020-09-06T11:37:12Z",
        "closed_at": "2020-09-06T14:09:06Z",
        "merged_at": "2020-09-06T14:09:06Z",
        "body": "Minor refactoring of util functions for AWS responses",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 22,
        "deletions": 11,
        "changed_files": 4,
        "created_at": "2020-09-05T18:56:41Z",
        "closed_at": "2020-09-06T11:34:34Z",
        "merged_at": "2020-09-06T11:34:34Z",
        "body": "Fix issue SNS return message id doesn't match with message id in notification sent\r\n* Fix sns implementation: build message body logic\r\n* Update integration test\r\n\r\nIssue fixed:\r\n#2924 SNS message ID doesn't match in the response and the notification",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 160,
        "deletions": 17,
        "changed_files": 4,
        "created_at": "2020-09-05T09:12:44Z",
        "closed_at": "2020-09-06T10:18:24Z",
        "merged_at": "2020-09-06T10:18:24Z",
        "body": "Fix cloudformation issue when updating lambda function environment variables\r\n* Validate lambda function properties before sending request to moto\r\n* Add integration tests\r\n\r\n> Properties for each resource type will be validated by botocore before sending request to backend/AWS\r\n(`botocore/data/lambda/2015-03-31/service-2.json:1161 (EnvironmentVariableValue)`)\r\n> Lambda Function Environment Variables must be a map of string\r\nhttps://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-lambda-function-environment.html\r\nThis the root cause of issue.\r\n\r\nIssue fixed:\r\n#2659 ParamValidationError when creating/updating lambda environment variable from serverless-localstack\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 11,
        "deletions": 3,
        "changed_files": 2,
        "created_at": "2020-09-04T08:05:48Z",
        "closed_at": "2020-09-04T10:17:35Z",
        "merged_at": "2020-09-04T10:17:34Z",
        "body": "Add MAX_POOL_CONNECTIONS environment variable for customizing the number of connections (default remains at 150 as before)",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 18,
        "deletions": 7,
        "changed_files": 1,
        "created_at": "2020-09-02T18:01:34Z",
        "closed_at": "2020-09-04T09:03:47Z",
        "merged_at": "2020-09-04T09:03:47Z",
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 33,
        "deletions": 15,
        "changed_files": 6,
        "created_at": "2020-09-02T16:16:54Z",
        "closed_at": "2020-09-02T22:12:47Z",
        "merged_at": "2020-09-02T22:12:47Z",
        "body": "Minor fix for recent CloudFormation upstream change",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 35,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2020-09-01T20:18:19Z",
        "closed_at": "2020-09-04T22:59:21Z",
        "merged_at": "2020-09-04T22:59:21Z",
        "body": "Fix Default Region in services\r\n#2881",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 10,
        "deletions": 15,
        "changed_files": 1,
        "created_at": "2020-08-31T23:38:21Z",
        "closed_at": "2020-09-09T17:44:47Z",
        "merged_at": "2020-09-09T17:44:47Z",
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 10,
        "deletions": 3,
        "changed_files": 3,
        "created_at": "2020-08-31T10:34:51Z",
        "closed_at": "2020-09-01T08:57:30Z",
        "merged_at": "2020-09-01T08:57:30Z",
        "body": "This PR reads the container name dynamically from docker, instead of using the hardcoded one from the config/env.\r\n\r\nIn my case, I'm using the same `docker-compose.yml` to start several concurrent localstack instances. By using the `-p` project name flag, each one is namespaced so that the container/network names don't conflict with each other. The problem is that localstack now needs to know the new namespaced container name.\r\n\r\nI could work around it like this:\r\n```yml\r\nservices:\r\n  localstack:\r\n    image: localstack/localstack\r\n    container_name: ${PROJECT_NAME}-localstack\r\n    ports:\r\n      - \"${EDGE_PORT-4566}:4566\"\r\n    environment:\r\n      - MAIN_CONTAINER_NAME=${PROJECT_NAME}-localstack\r\n      - DOCKER_HOST=unix:///var/run/docker.sock\r\n```\r\nand then `PROJECT_NAME=foobar && docker-compose -p $PROJECT_NAME up -d`\r\n\r\nbut it seems to make more sense to allow users to specify the container name however they want, and then just read it dynamically",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2020-08-31T09:26:05Z",
        "closed_at": "2020-08-31T12:03:22Z",
        "merged_at": "2020-08-31T12:03:22Z",
        "body": "Follow on PR to https://github.com/localstack/localstack/pull/2890#issuecomment-683653906",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 314,
        "deletions": 183,
        "changed_files": 32,
        "created_at": "2020-08-30T16:10:53Z",
        "closed_at": "2020-09-15T21:41:35Z",
        "merged_at": "2020-09-15T21:41:34Z",
        "body": "**Note:** :warning: **This is a breaking change - after this change, services are no longer accessible via the legacy service ports, but ONLY via the edge port** :warning:\r\n\r\n---\r\nThis PR introduces a couple of performance improvements which aim to improve the startup time and reduce the overall resource usage/footprint (e.g., less open network ports).\r\n\r\n* Forward edge requests in-memory instead of opening port per service\r\n* Remove proxies and backend ports where not needed anymore\r\n* Apply basic time profiling to provide some insights into the performance of different parts of the startup procedure.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 23,
        "deletions": 9,
        "changed_files": 5,
        "created_at": "2020-08-30T14:34:25Z",
        "closed_at": "2020-08-30T22:20:12Z",
        "merged_at": "2020-08-30T22:20:12Z",
        "body": "Minor refactoring in API Gateway path handling and CORS responses",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2020-08-30T11:19:44Z",
        "closed_at": "2020-08-30T17:13:56Z",
        "merged_at": "2020-08-30T17:13:56Z",
        "body": "Added rule in edge to forward Bucket HEAD request to S3 service\r\n\r\nFixed issue: \r\nhttps://github.com/localstack/localstack/issues/2832",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 69,
        "deletions": 51,
        "changed_files": 8,
        "created_at": "2020-08-29T16:18:21Z",
        "closed_at": "2020-08-29T19:14:28Z",
        "merged_at": "2020-08-29T19:14:28Z",
        "body": "Minor fixes for CloudFormation API Gateway deployments",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 6,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2020-08-28T13:55:59Z",
        "closed_at": "2020-08-30T08:44:44Z",
        "merged_at": "2020-08-30T08:44:44Z",
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 58,
        "deletions": 5,
        "changed_files": 3,
        "created_at": "2020-08-28T07:00:47Z",
        "closed_at": "2020-08-28T10:05:23Z",
        "merged_at": "2020-08-28T10:05:23Z",
        "body": "* Fix issue on parsing queue name in moto\r\n* Add integration test\r\n\r\nIssue fixed:\r\n#2874 SQS 404 on posting to queue with trailing slash",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 28,
        "deletions": 13,
        "changed_files": 5,
        "created_at": "2020-08-27T19:36:39Z",
        "closed_at": "2020-08-29T12:27:43Z",
        "merged_at": "2020-08-29T12:27:43Z",
        "body": "Fixed test cases which were failing because of delays.\r\n\r\n**List of fixed test cases:**\r\n```\r\ntests.integration.test_s3.S3ListenerTest.test_s3_put_object_notification_with_lambda\r\ntests.integration.test_sns.SNSTest.test_publish_message_by_target_arn\r\ntests.integration.test_events.EventsTest.test_put_events_with_target_lambda\r\ntests.integration.test_lambda.TestPythonRuntimes.test_lambda_subscribe_sns_topic\r\n```",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 58,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2020-08-27T16:17:32Z",
        "closed_at": "2020-08-27T19:51:34Z",
        "merged_at": "2020-08-27T19:51:34Z",
        "body": "Add integration test:\r\n* SNS triggered by s3 event when new object created\r\n\r\nIssue fixed:\r\n#2871 How to check if event is triggered between s3 and SNS after uploading a file in S3 bucket.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 11,
        "deletions": 10,
        "changed_files": 5,
        "created_at": "2020-08-27T15:53:01Z",
        "closed_at": "2020-08-29T10:16:10Z",
        "merged_at": "2020-08-29T10:16:10Z",
        "body": "addresses #2738 ",
        "comments": 5
    },
    {
        "merged": true,
        "additions": 19,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2020-08-26T20:40:07Z",
        "closed_at": "2020-08-30T22:24:19Z",
        "merged_at": "2020-08-30T22:24:19Z",
        "body": "Test:Added test for SQS publish from SNS\r\n#2881",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 3,
        "changed_files": 1,
        "created_at": "2020-08-26T16:39:51Z",
        "closed_at": "2020-08-27T10:06:47Z",
        "merged_at": "2020-08-27T10:06:47Z",
        "body": "Issue fixed: \r\nhttps://github.com/localstack/localstack/issues/1892",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 10,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2020-08-25T21:32:38Z",
        "closed_at": "2020-08-28T21:53:06Z",
        "merged_at": null,
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 79,
        "deletions": 44,
        "changed_files": 7,
        "created_at": "2020-08-25T21:11:30Z",
        "closed_at": "2020-08-25T22:31:16Z",
        "merged_at": "2020-08-25T22:31:16Z",
        "body": "* Add adaptive, unbounded thread pool to avoid deadlocks on concurrent requests - addresses #2873\r\n* Minor refactorings\r\n",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 5,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2020-08-25T03:23:36Z",
        "closed_at": "2020-08-25T16:22:39Z",
        "merged_at": null,
        "body": "\r\nLOCALSTACK_PATCH_SCRIPT variable to customize existing docker image (patching python code before service start) without rebuilding and dealing with docker infrastructure. \r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 7,
        "deletions": 6,
        "changed_files": 2,
        "created_at": "2020-08-24T16:04:35Z",
        "closed_at": "2020-08-25T19:11:13Z",
        "merged_at": "2020-08-25T19:11:13Z",
        "body": "This PR fixes the issue with event bridge serialization issue mentioned in #2735 .",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 58,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2020-08-24T07:55:34Z",
        "closed_at": "2020-08-24T09:35:01Z",
        "merged_at": "2020-08-24T09:35:01Z",
        "body": "Fix batch delete objects issue:\r\n* Path moto functions\r\n* Add integration test using requests lib (reproduce the golang sdk behavior)\r\n\r\nIssue fixed:\r\n#2850 Can't delete objects from s3 bucket using golang SDK\r\n#2866 S3 batch delete gets 500",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 31,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2020-08-23T19:53:45Z",
        "closed_at": "2020-08-23T21:07:53Z",
        "merged_at": "2020-08-23T21:07:52Z",
        "body": "Fix:Lambda-SQS:Invoke Lambda on SQS event sources\r\n\r\n#1595",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 8,
        "deletions": 4,
        "changed_files": 1,
        "created_at": "2020-08-21T23:38:59Z",
        "closed_at": "2020-09-04T20:20:40Z",
        "merged_at": null,
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 10
    },
    {
        "merged": true,
        "additions": 12,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2020-08-21T19:21:07Z",
        "closed_at": "2020-08-24T00:02:29Z",
        "merged_at": "2020-08-24T00:02:29Z",
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 10,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2020-08-19T21:51:47Z",
        "closed_at": "2020-08-23T19:29:23Z",
        "merged_at": "2020-08-23T19:29:23Z",
        "body": "\r\nFix:Edge-s3:PutObject\r\n\r\n#2853",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 16,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2020-08-19T20:38:34Z",
        "closed_at": "2020-08-24T00:09:54Z",
        "merged_at": "2020-08-24T00:09:54Z",
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 27,
        "deletions": 7,
        "changed_files": 7,
        "created_at": "2020-08-18T15:19:26Z",
        "closed_at": "2020-08-24T15:42:18Z",
        "merged_at": null,
        "body": "This PR fixes the issue with event bridge serialization issue mentioned in #2735 .",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 220,
        "deletions": 7,
        "changed_files": 3,
        "created_at": "2020-08-18T08:41:44Z",
        "closed_at": "2020-08-24T11:06:33Z",
        "merged_at": "2020-08-24T11:06:33Z",
        "body": "* Patch moto method\r\n* Add integration test\r\n\r\nIssue fixed:\r\n#2763 aws apigateway put-rest-api returns 500 Internal Server Error",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 171,
        "deletions": 19,
        "changed_files": 4,
        "created_at": "2020-08-16T11:03:38Z",
        "closed_at": "2020-08-20T23:50:20Z",
        "merged_at": "2020-08-20T23:50:20Z",
        "body": "* Handle delete action for restApi resource\r\n* Fix missing physical resource id for restApi\r\n* Fix issue with restApi's resource, deployment\r\n* Add integration test: cfn handle serverless api resource\r\n\r\nIssues fixed:\r\n#2641 Serverless Api resource creation errors without explicit Name property in CloudFormation template\r\n#2642 Error during CreateDeployment call when trying to create a Serverless Api in CloudFormation template",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 17,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2020-08-15T21:54:10Z",
        "closed_at": "2020-08-30T19:14:28Z",
        "merged_at": "2020-08-30T19:14:28Z",
        "body": "Fix:URL Encoding for S3-SQS Notification Setup\r\nhttps://github.com/localstack/localstack/issues/2741",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 20,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2020-08-14T20:00:33Z",
        "closed_at": "2020-08-20T09:39:25Z",
        "merged_at": "2020-08-20T09:39:25Z",
        "body": "Test:EC2:Added tests for Terminate Instances\r\nhttps://github.com/localstack/localstack/issues/1550",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 79,
        "deletions": 0,
        "changed_files": 3,
        "created_at": "2020-08-14T19:19:40Z",
        "closed_at": "2020-08-20T08:08:38Z",
        "merged_at": "2020-08-20T08:08:38Z",
        "body": "Fix:CloudFormation: DynamoDbOnDemandTable Creation Using CFT\r\n\r\n#1737 ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 53,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2020-08-13T11:54:23Z",
        "closed_at": "2020-08-28T22:05:10Z",
        "merged_at": "2020-08-28T22:05:10Z",
        "body": "Fix:Dynamodb Index query error handling.\r\n#805 ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 17,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2020-08-11T07:13:40Z",
        "closed_at": "2020-08-11T20:35:13Z",
        "merged_at": "2020-08-11T20:35:13Z",
        "body": "CloudFormation's DeleteStack wrapper would create an `aws_stack` client in\r\norder to list the resources contained in the stack for deletion. This\r\nclient was created without specifying a `region_name` parameter which meant\r\nthat even if the stack was created in a given region the deletion would\r\nalways be attempted in us-east-1.\r\n\r\nThis change fixes that by specifying the region name sent in the request\r\nitself.",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 10,
        "deletions": 4,
        "changed_files": 2,
        "created_at": "2020-08-11T06:00:27Z",
        "closed_at": "2020-08-12T19:58:21Z",
        "merged_at": "2020-08-12T19:58:21Z",
        "body": "Changed register_stream_consumer ConsumerCreationTimestamp output from a formatted string to a UNIX timestamp.\r\n\r\nSee https://github.com/localstack/localstack/issues/2834",
        "comments": 7
    },
    {
        "merged": true,
        "additions": 11,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2020-08-11T02:59:28Z",
        "closed_at": "2020-08-11T10:00:59Z",
        "merged_at": "2020-08-11T10:00:59Z",
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 14,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2020-08-09T18:00:31Z",
        "closed_at": "2020-08-09T19:57:03Z",
        "merged_at": "2020-08-09T19:57:02Z",
        "body": "**Fix:**\r\n- dummy aws credentials configured for lambda execution environment.\r\n- Streamlined environment configuration method in local and docker lambda executors.\r\n\r\n\r\nThis PR should fix issue #2819 .",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 66,
        "deletions": 6,
        "changed_files": 2,
        "created_at": "2020-08-09T14:48:21Z",
        "closed_at": "2020-08-15T08:47:25Z",
        "merged_at": "2020-08-15T08:47:25Z",
        "body": "DynamoDB with Global Secondary index ReadWrite Capacity unit testing in cloudformation. Addresses #809",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 73,
        "deletions": 20,
        "changed_files": 8,
        "created_at": "2020-08-09T13:28:29Z",
        "closed_at": "2020-08-09T18:51:46Z",
        "merged_at": "2020-08-09T18:51:46Z",
        "body": "Increase max threads in thread pool to improve concurrency - addresses #2825",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 55,
        "deletions": 8,
        "changed_files": 3,
        "created_at": "2020-08-08T21:48:48Z",
        "closed_at": "2021-06-27T18:35:50Z",
        "merged_at": null,
        "body": "Fix:API GATEWAY- Pre flight method response handling\n\n#2723\n\n\n\n\u2506Issue is synchronized with this [Jira Bug](https://localstack.atlassian.net/browse/LOC-233) by [Unito](https://www.unito.io/learn-more)\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2020-08-08T20:11:57Z",
        "closed_at": "2020-08-09T11:45:18Z",
        "merged_at": "2020-08-09T11:45:18Z",
        "body": "Fix:S3-HOSTNAME_EXTERNAL key name extraction.\r\n\r\n#2812",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 33,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2020-08-08T14:41:08Z",
        "closed_at": "2020-08-08T19:17:30Z",
        "merged_at": "2020-08-08T19:17:30Z",
        "body": "Added support for the sms protocol in sns to publish a message. Also added test case for the same\r\nAddresses #1361 #1882",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2020-08-08T13:13:13Z",
        "closed_at": "2020-08-08T15:57:34Z",
        "merged_at": "2020-08-08T15:57:34Z",
        "body": "Fixed: While using localstack in debug mode, the output was printing three times. Removed `setup_log()` function being called in `bootstrap.py`. This PR fixed issue #2777 .",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 168,
        "deletions": 126,
        "changed_files": 6,
        "created_at": "2020-08-07T15:38:39Z",
        "closed_at": "2020-08-07T16:45:03Z",
        "merged_at": "2020-08-07T16:45:03Z",
        "body": "Add support for custom Lambda integration in API Gateway - addresses #1080",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 58,
        "deletions": 19,
        "changed_files": 2,
        "created_at": "2020-08-07T09:54:23Z",
        "closed_at": "2020-08-07T13:54:50Z",
        "merged_at": "2020-08-07T13:54:50Z",
        "body": "Add support for platform endpoints in SNS subscriptions - addresses #874",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 52,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2020-08-07T09:46:00Z",
        "closed_at": "2020-08-07T12:45:33Z",
        "merged_at": "2020-08-07T12:45:33Z",
        "body": "* Add integration test\r\n\r\nIssue fixed:\r\n#2724 Localstack not returning correct error code when retreiving S3 files in DEEP_ARCHIVE storage class.\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 18,
        "deletions": 14,
        "changed_files": 2,
        "created_at": "2020-08-05T16:05:55Z",
        "closed_at": "2020-08-06T20:11:39Z",
        "merged_at": "2020-08-06T20:11:39Z",
        "body": "**Fix:**\r\n- SQS implementation is changed to moto.\r\n- Retry mechanism added for sqs\r\n- Dot net lambda exection issue fixed for case sensative system",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 50,
        "deletions": 16,
        "changed_files": 6,
        "created_at": "2020-08-04T18:48:56Z",
        "closed_at": "2020-08-04T19:58:56Z",
        "merged_at": "2020-08-04T19:58:56Z",
        "body": "CloudFormation updates to fix recent moto upgrade ",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 44,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2020-08-04T17:13:57Z",
        "closed_at": "2020-08-06T06:08:16Z",
        "merged_at": "2020-08-06T06:08:16Z",
        "body": "- Issue was fixed in the lasted version\r\n- Add integration to verify bug\r\n\r\nIssue fixed:\r\nhttps://github.com/localstack/localstack/issues/2431",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 12,
        "deletions": 7,
        "changed_files": 2,
        "created_at": "2020-08-03T17:55:50Z",
        "closed_at": "2020-08-07T20:15:03Z",
        "merged_at": "2020-08-07T20:15:03Z",
        "body": "adding base64 encoding for client context\r\n\r\n#2758",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 0,
        "deletions": 18,
        "changed_files": 1,
        "created_at": "2020-08-03T16:23:11Z",
        "closed_at": "2020-08-05T06:04:05Z",
        "merged_at": "2020-08-05T06:04:05Z",
        "body": "Remove unsed patch for vpc_conns region response.\r\nIssue link:\r\nhttps://github.com/localstack/localstack/issues/2147\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 62,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2020-08-03T16:10:58Z",
        "closed_at": "2020-08-03T19:36:39Z",
        "merged_at": "2020-08-03T19:36:39Z",
        "body": "- Fixed in function prepare TransactWriteItems records to dynamodbstreams\r\n- Add integration test to verify bug\r\nIssue fixed: https://github.com/localstack/localstack/issues/2745",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 95,
        "deletions": 4,
        "changed_files": 2,
        "created_at": "2020-08-03T14:06:35Z",
        "closed_at": "2020-08-05T10:09:47Z",
        "merged_at": "2020-08-05T10:09:47Z",
        "body": "* Delete role polices before deleting IAM::Role resource\r\n* Add integration test\r\n\r\nIssue fixed:\r\n#2790 CloudFormation: Delete stack containing IAM role with inline policy fails\r\n",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2020-08-02T16:21:51Z",
        "closed_at": "2020-08-03T06:12:51Z",
        "merged_at": null,
        "body": "Fix for issue #2701 , To Duplicate Key for RedrivePolicy we have changed `SQS_BACKEND_IMPL != 'elasticmq'`",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2020-08-02T06:54:48Z",
        "closed_at": "2020-08-02T16:16:16Z",
        "merged_at": null,
        "body": "Fix for issue #2701 . Removed RedrivePolicy from UNSUPPORTED_ATTRIBUTE_NAMES in sqs_listener.py",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 55,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2020-07-31T17:21:28Z",
        "closed_at": "2020-08-01T00:06:47Z",
        "merged_at": "2020-08-01T00:06:47Z",
        "body": "- Fix UpdateItem response event\r\n- Add integration test to verify event 'INSERT' and 'MODIFY'\r\n\r\nIssue fixed:\r\nhttps://github.com/localstack/localstack/issues/2684\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 12,
        "deletions": 3,
        "changed_files": 3,
        "created_at": "2020-07-30T21:09:10Z",
        "closed_at": "2020-07-31T23:37:29Z",
        "merged_at": "2020-07-31T23:37:29Z",
        "body": "Fix:DynamoDbStreams- fix get-shardId-iterator with type AT_SEQUENCE_NUMBER\r\n\r\nhttps://github.com/localstack/localstack/issues/2781",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 33,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2020-07-29T01:13:31Z",
        "closed_at": "2020-07-29T07:15:11Z",
        "merged_at": "2020-07-29T07:15:11Z",
        "body": "This bug was fixed in moto repository\r\n- Add integration tests to verify issue\r\n\r\nIssue fixed:\r\nhttps://github.com/localstack/localstack/issues/2761",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 12,
        "deletions": 7,
        "changed_files": 1,
        "created_at": "2020-07-27T07:34:32Z",
        "closed_at": "2020-07-27T21:05:28Z",
        "merged_at": "2020-07-27T21:05:27Z",
        "body": "In _install.py_, LocalStack downloads and installs a number of third-party files. Until now, the common pattern in most of the `install_*` functions was the following:\r\n1. check if the installation directory exists.\r\n2. if not, create it.\r\n3. download and install the required software.\r\n\r\nIf step 3 fails (for example, the download is dropped midway through) or if a user accidentally deletes one of the executables, the installation directory will exist but will not contain the required software. Step 1 will evaluate to false, and installation will never be reattempted again. This issue is then hard to debug, for example I've hit a case where the LocalStack service would start up happily but would then reject all requests with a 502 as the underlying Java service could not start because of a missing JAR.\r\n\r\nThis pull request changes step 1 to check whether the actual executable we're interested in is present. Step 2 will still work as `mkdir` handles the case where the directory is already present.\r\n\r\nThanks for considering this pull request!",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 50,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2020-07-26T17:57:42Z",
        "closed_at": "2021-09-06T21:53:10Z",
        "merged_at": null,
        "body": "QueueUrls from sqs_client.list_queues() follow the QueueName for its url or if QueueName is not present it follows the strategy of the [Unique Physical Id](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-name.html). From my testing it is something like `stack_name-resource_id-unique_string`.\n\nThis fixes #2772 because the method template_deployer.is_deployed was returning false for the resource dependency even it being deployed successfully.\n\nCouldn't find any tests for template_deployer so I am not sure where to put the tests for this case. Let me know if you there is a better place to test this.\n\n\n\n\u2506Issue is synchronized with this [Jira Bug](https://localstack.atlassian.net/browse/LOC-227) by [Unito](https://www.unito.io/learn-more)\n",
        "comments": 8
    },
    {
        "merged": true,
        "additions": 21,
        "deletions": 3,
        "changed_files": 3,
        "created_at": "2020-07-25T20:42:56Z",
        "closed_at": "2020-07-27T17:52:29Z",
        "merged_at": "2020-07-27T17:52:29Z",
        "body": "FIX:IAM: Adding support to pathPrefix in list_users method\r\n#2767 ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 63,
        "deletions": 6,
        "changed_files": 6,
        "created_at": "2020-07-25T13:49:45Z",
        "closed_at": "2020-07-25T15:09:38Z",
        "merged_at": "2020-07-25T15:09:38Z",
        "body": "Add initial support for ACM API - addresses #2320",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 31,
        "deletions": 20,
        "changed_files": 6,
        "created_at": "2020-07-23T19:58:20Z",
        "closed_at": "2020-07-31T23:00:11Z",
        "merged_at": "2020-07-31T23:00:11Z",
        "body": "Fix:Lambda - Fixed client-context attribute inside lambda invoke\r\n\r\nhttps://github.com/localstack/localstack/issues/2758",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 6,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2020-07-17T15:43:25Z",
        "closed_at": "2020-07-18T00:01:57Z",
        "merged_at": "2020-07-18T00:01:57Z",
        "body": "Minor fix for UTF-8 encoding in persistence",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 35,
        "deletions": 13,
        "changed_files": 2,
        "created_at": "2020-07-16T20:44:18Z",
        "closed_at": "2020-07-16T22:28:00Z",
        "merged_at": "2020-07-16T22:28:00Z",
        "body": "Refactor logic and add tests for command line ports parsing",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2020-07-16T12:45:24Z",
        "closed_at": "2020-07-16T14:09:22Z",
        "merged_at": "2020-07-16T14:09:22Z",
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 34,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2020-07-16T05:43:02Z",
        "closed_at": "2020-07-17T06:32:53Z",
        "merged_at": "2020-07-17T06:32:53Z",
        "body": "- Added integration tested that support received multiple messages in multiple times\r\n\r\nIssue fixed:\r\nhttps://github.com/localstack/localstack/issues/2710\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 8,
        "deletions": 4,
        "changed_files": 1,
        "created_at": "2020-07-14T06:33:06Z",
        "closed_at": "2020-07-14T17:04:05Z",
        "merged_at": "2020-07-14T17:04:05Z",
        "body": "* get resource name from moto's parse_resource\r\n* handle RestApi resource when missing \"Name\" property\r\n\r\nIssue fixed:\r\nhttps://github.com/localstack/serverless-localstack/issues/89\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 24,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2020-07-13T19:04:56Z",
        "closed_at": "2020-07-13T20:28:35Z",
        "merged_at": "2020-07-13T20:28:35Z",
        "body": "- Add integration test tag and untag SQS queue\r\n\r\nIssue fixed:\r\nSQS Action TagQueue is not working with moto as provider #2690",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 6,
        "deletions": 4,
        "changed_files": 2,
        "created_at": "2020-07-13T15:42:20Z",
        "closed_at": "2020-07-14T13:03:36Z",
        "merged_at": "2020-07-14T13:03:36Z",
        "body": "It was found that StepFunctionsLocal.jar can read custom lambda service endpoint, **but** if it has been specified the original endpoint will not work.\r\nEven if you specify https://lambda.us-east-1.amazonaws.com for example.",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 139,
        "deletions": 81,
        "changed_files": 7,
        "created_at": "2020-07-13T15:05:34Z",
        "closed_at": "2020-07-13T17:55:12Z",
        "merged_at": "2020-07-13T17:55:12Z",
        "body": "Add basic string functions in VLT templates - addresses #2714 #2717 #2718",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 111,
        "deletions": 97,
        "changed_files": 6,
        "created_at": "2020-07-12T16:43:46Z",
        "closed_at": "2020-07-12T20:33:17Z",
        "merged_at": "2020-07-12T20:33:17Z",
        "body": "Minor fix in velocity template rendering, to enable a syntax like `test#${foo.bar}`. Addresses #2714",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 36,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2020-07-12T15:38:55Z",
        "closed_at": "2020-07-13T06:05:41Z",
        "merged_at": "2020-07-13T06:05:40Z",
        "body": "- Fix delete table fails\r\n- Add integration test\r\nIssue fixed:\r\ndynamodb delete-table fails #2702",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 55,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2020-07-11T17:26:25Z",
        "closed_at": "2020-07-12T19:23:36Z",
        "merged_at": "2020-07-12T19:23:36Z",
        "body": "- Add integration tests\r\nIssue fixed:\r\nCan't queue multiple messages on SQS within a single message group #2710\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 60,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2020-07-10T18:31:21Z",
        "closed_at": "2020-07-11T09:15:33Z",
        "merged_at": "2020-07-11T09:15:33Z",
        "body": "The issue was fixed in the lasted version\r\n- Add integration test \r\nIssue fixed\r\nLambda triggered by SQS event source doesn't delete SQS message #2536\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 16,
        "deletions": 8,
        "changed_files": 4,
        "created_at": "2020-07-07T21:14:52Z",
        "closed_at": "2020-07-08T00:20:00Z",
        "merged_at": "2020-07-08T00:20:00Z",
        "body": "Add utility function to detect local test execution context",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 44,
        "deletions": 12,
        "changed_files": 1,
        "created_at": "2020-07-07T06:26:05Z",
        "closed_at": "2020-07-07T10:33:17Z",
        "merged_at": "2020-07-07T10:33:16Z",
        "body": "Add test for SQS DLQ when maxReceiveCount is reached - addresses #2107",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 11,
        "deletions": 10,
        "changed_files": 3,
        "created_at": "2020-07-06T21:59:31Z",
        "closed_at": "2020-07-07T17:02:46Z",
        "merged_at": "2020-07-07T17:02:46Z",
        "body": "\u2026 enviornmnet variable DYNAMODB_HEAP_SIZE default 256m\r\n\r\nDYNAMODB_HEAP_SIZE gets added to the config object then pulled into the dynamodb start script\r\n\r\nI was having issues with full table scans running out of memory\r\n\r\n**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 22,
        "deletions": 11,
        "changed_files": 4,
        "created_at": "2020-07-06T16:36:44Z",
        "closed_at": "2020-07-06T20:58:36Z",
        "merged_at": "2020-07-06T20:58:36Z",
        "body": "* Fix error/warning messages for terminated SSL connections\r\n* Add S3 edge route for `--no-sign-request` CLI requests - addresses #2671",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 102,
        "deletions": 4,
        "changed_files": 2,
        "created_at": "2020-07-05T20:40:33Z",
        "closed_at": "2020-07-07T21:02:21Z",
        "merged_at": "2020-07-07T21:02:21Z",
        "body": "Fix:Logs- put subscribe filter \r\n#2653 ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2020-07-05T14:27:20Z",
        "closed_at": "2020-07-05T16:23:27Z",
        "merged_at": "2020-07-05T16:23:27Z",
        "body": "Hi,\r\n\r\nI made an error on my last PR (#2670). I was sending a JSON-formatted string to a lambda instead of the actual dictionary. This fixes that error. If this isn't fixed, you'll get errors in `services/awslambda/labmda_executors.py`, line 69, `get_from_event`.\r\n\r\nSorry for the error.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 41,
        "deletions": 9,
        "changed_files": 2,
        "created_at": "2020-07-03T20:41:27Z",
        "closed_at": "2020-07-04T11:21:12Z",
        "merged_at": "2020-07-04T11:21:12Z",
        "body": "Hi all. Thanks so much for developing localstack. I was playing around with cloudwatch events and got something I thought was strange, so I thought I'd try to fix it.\r\n\r\nI believe that when cloudwatch events trigger a service (lambda, sqs, firehose, etc) it sends a wrapped version of the actual event, not just the event detail. Namely I think it looks something like this ([source](https://docs.aws.amazon.com/AmazonCloudWatch/latest/events/EventTypes.html)):\r\n\r\n```\r\n{\r\n    \"version\": \"0\",\r\n    \"id\": \"fe8d3c65-xmpl-c5c3-2c87-81584709a377\",\r\n    \"detail-type\": \"RDS DB Instance Event\",\r\n    \"source\": \"aws.rds\",\r\n    \"account\": \"123456789012\",\r\n    \"time\": \"2020-04-28T07:20:20Z\",\r\n    \"region\": \"us-east-2\",\r\n    \"resources\": [\r\n        \"arn:aws:rds:us-east-2:123456789012:db:rdz6xmpliljlb1\"\r\n    ],\r\n    \"detail\": {\r\n        \"EventCategories\": [\r\n            \"backup\"\r\n        ],\r\n        \"SourceType\": \"DB_INSTANCE\",\r\n        \"SourceArn\": \"arn:aws:rds:us-east-2:123456789012:db:rdz6xmpliljlb1\",\r\n        \"Date\": \"2020-04-28T07:20:20.112Z\",\r\n        \"Message\": \"Finished DB Instance backup\",\r\n        \"SourceIdentifier\": \"rdz6xmpliljlb1\"\r\n    }\r\n}\r\n```\r\n\r\nThis change formats the events before sending them out for processing. Please let me know if you have any questions, comments or concerns!",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2020-07-03T19:20:20Z",
        "closed_at": "2020-07-04T11:51:55Z",
        "merged_at": "2020-07-04T11:51:54Z",
        "body": "DynamoDB : Duplicate table Error change.\r\n#2629 ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 100,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2020-07-03T18:50:39Z",
        "closed_at": "2020-07-04T11:27:53Z",
        "merged_at": "2020-07-04T11:27:53Z",
        "body": "- Patch function describe_vpc_peering_connections\r\n- Add integration test\r\n\r\nIssue fixed:\r\nLocalstack region is always null in getAccepterVpcInfo after vpc peering #2147\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 10,
        "deletions": 6,
        "changed_files": 3,
        "created_at": "2020-07-03T14:06:01Z",
        "closed_at": "2020-07-03T21:16:20Z",
        "merged_at": "2020-07-03T21:16:20Z",
        "body": "Return raw response in edge proxy to fix gzip encoded S3 content - addresses #2582",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 31,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2020-07-03T07:50:04Z",
        "closed_at": "2020-07-03T12:39:25Z",
        "merged_at": "2020-07-03T12:39:25Z",
        "body": "The bug was fixed in dead letter queue.\r\n - Added the integration test that send messages in multiple subscription\r\nIssue fixed:\r\nMultiple SNS subscriptions not triggered when 429 is returned from web server #2422",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 16,
        "deletions": 15,
        "changed_files": 5,
        "created_at": "2020-07-02T21:03:45Z",
        "closed_at": "2020-07-03T05:38:53Z",
        "merged_at": "2020-07-03T05:38:53Z",
        "body": "* Minor refactoring of logic to determe http/https prototol\r\n* Skip setting `HOSTNAME` in Lambda container environment",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 41,
        "deletions": 4,
        "changed_files": 2,
        "created_at": "2020-07-02T20:51:54Z",
        "closed_at": "2020-07-03T05:34:40Z",
        "merged_at": "2020-07-03T05:34:40Z",
        "body": "Fix : Add multiple permissions to same lambda function.\r\n#2661 ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 49,
        "deletions": 5,
        "changed_files": 4,
        "created_at": "2020-07-02T06:36:30Z",
        "closed_at": "2020-07-02T16:12:54Z",
        "merged_at": "2020-07-02T16:12:54Z",
        "body": "* Update list_roles patch\r\n* Add integration test\r\n\r\nIssue fixed:\r\n#2647 Possible regression error with IAM Role Policy Document\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 7,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2020-07-01T16:27:37Z",
        "closed_at": "2020-07-01T18:49:37Z",
        "merged_at": "2020-07-01T18:49:37Z",
        "body": "* Update integration test\r\n\r\nIssue fixed:\r\n#2573 Cloudformation: using Ref on a DynamoDB Table is returning the ARN instead of the table name\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 42,
        "deletions": 3,
        "changed_files": 6,
        "created_at": "2020-06-29T20:38:08Z",
        "closed_at": "2020-06-30T09:33:53Z",
        "merged_at": "2020-06-30T09:33:53Z",
        "body": "* Fix HTML escaping of SQS message attributes - addresses #2626\r\n* add access to the DynamoDB shell via the edge port - addresses #2619",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 26,
        "deletions": 3,
        "changed_files": 2,
        "created_at": "2020-06-29T18:17:14Z",
        "closed_at": "2020-06-29T20:06:13Z",
        "merged_at": "2020-06-29T20:06:13Z",
        "body": "- Update event listener\r\n- Update integration test\r\n\r\nIssue Fixed:\r\n#2620 Add SQS as target in EventBridge\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 206,
        "deletions": 5,
        "changed_files": 7,
        "created_at": "2020-06-29T17:23:52Z",
        "closed_at": "2020-07-01T09:25:33Z",
        "merged_at": "2020-07-01T09:25:33Z",
        "body": "* Disable wait_for block (related to dynamodb stream) when creating dynamodb table\r\n* Add action delete for dynamodb table resource type\r\n* Add integration test\r\n\r\nIssues fixed:\r\n#2607 Cloudformation does not work (tested with DynamoDBstack-amplify.txt template)\r\n#2336 cloudformation deploy regression in latest version\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 11,
        "deletions": 4,
        "changed_files": 2,
        "created_at": "2020-06-28T16:32:44Z",
        "closed_at": "2020-06-28T18:00:59Z",
        "merged_at": "2020-06-28T18:00:59Z",
        "body": "Fix error handling for Lambda event source mappings in CloudFormation - addresses #2617",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 30,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2020-06-27T20:35:33Z",
        "closed_at": "2020-06-28T20:51:59Z",
        "merged_at": "2020-06-28T20:51:59Z",
        "body": "Fix: dynamodbStreams get_shardId_Iterator\r\n\r\n#2616 ",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 78,
        "deletions": 77,
        "changed_files": 2,
        "created_at": "2020-06-26T22:36:22Z",
        "closed_at": "2020-06-27T00:25:48Z",
        "merged_at": "2020-06-27T00:25:48Z",
        "body": "Add thread synchronization to Lambda config initialization - addresses #2579",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 36,
        "deletions": 3,
        "changed_files": 2,
        "created_at": "2020-06-26T20:11:22Z",
        "closed_at": "2020-07-01T09:21:19Z",
        "merged_at": "2020-07-01T09:21:19Z",
        "body": "This PR fixes an issue for s3 where the response content for a presigned post (with `success_action_status` = 201) was incorrect when the \"${filename}\" variable was used in the key.  The \"${filename}\" variable should be replaced with the name of the provided file.\r\n\r\n### Example\r\nGiven a POST to the presigned post url with the following parameters:\r\n\r\nBucket: my-bucket\r\nKey: my-key-${filename}\r\nFilename: file.txt\r\nSuccess Action Status: 201\r\n\r\n#### Before\r\n```\r\n<PostResponse>\r\n    <Location>http://localhost/my-key-%24%7Bfilename%7D</Location>\r\n    <Bucket>my-bucket</Bucket>\r\n    <Key>my-key-${filename}</Key>\r\n    <ETag>d41d8cd98f00b204e9800998ecf8427f</ETag>\r\n</PostResponse>\r\n```\r\n\r\n#### After\r\n```\r\n<PostResponse>\r\n    <Location>http://localhost/my-key-file.txt</Location>\r\n    <Bucket>my-bucket</Bucket>\r\n     <Key>my-key-file.txt</Key>\r\n     <ETag>d41d8cd98f00b204e9800998ecf8427f</ETag>\r\n</PostResponse>\r\n```",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 14,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2020-06-26T16:02:51Z",
        "closed_at": "2020-06-26T17:13:24Z",
        "merged_at": "2020-06-26T17:13:24Z",
        "body": "Tests : Dynamodb tests for empty string & Binary values.\r\n#2443 ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 31,
        "deletions": 7,
        "changed_files": 5,
        "created_at": "2020-06-25T22:44:18Z",
        "closed_at": "2020-06-25T23:51:29Z",
        "merged_at": "2020-06-25T23:51:29Z",
        "body": "Fix direct access to queue URLs with new SQS backend - addresses #2612 ",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 173,
        "deletions": 3,
        "changed_files": 3,
        "created_at": "2020-06-25T18:30:39Z",
        "closed_at": "2020-06-26T09:42:37Z",
        "merged_at": "2020-06-26T09:42:37Z",
        "body": "* Fix TypeError issue when create stack for SNS\r\n* Fix issue No Output on deploying stack\r\n* Add integration test\r\n\r\nIssue fixed:\r\n#2568 Cloudformation create-stack for SNS with yaml causes TypeError",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2020-06-24T19:20:21Z",
        "closed_at": "2020-06-24T21:49:14Z",
        "merged_at": "2020-06-24T21:49:13Z",
        "body": "API gateway Using JSON Safe for failure of byte type.\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 117,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2020-06-24T07:54:16Z",
        "closed_at": "2020-06-24T17:05:07Z",
        "merged_at": "2020-06-24T17:05:07Z",
        "body": "* Patch moto method to handle policy document\r\n* Update integration test for cfn deploy\r\n\r\nIssue fixed:\r\n#2528 cloudformation deploy doesn't create the stack resources\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 13,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2020-06-23T17:41:19Z",
        "closed_at": "2020-06-23T21:14:57Z",
        "merged_at": "2020-06-23T21:14:57Z",
        "body": "Determine proper external port in SQS URLs",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 19,
        "deletions": 9,
        "changed_files": 2,
        "created_at": "2020-06-22T17:17:13Z",
        "closed_at": "2020-06-22T20:53:04Z",
        "merged_at": "2020-06-22T20:53:04Z",
        "body": "Fix handling of S3 LocationConstraint on bucket creation",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 6,
        "deletions": 5,
        "changed_files": 1,
        "created_at": "2020-06-21T21:22:25Z",
        "closed_at": "2020-06-21T22:52:00Z",
        "merged_at": "2020-06-21T22:52:00Z",
        "body": "Fix dynamodb deleteEventSourceMappings : Handling cases when tableARN is None\r\n\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 15,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2020-06-21T21:06:44Z",
        "closed_at": "2020-06-21T22:50:03Z",
        "merged_at": "2020-06-21T22:50:03Z",
        "body": "Fix:S3-Invalid range Error\r\n#2587 ",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 160,
        "deletions": 34,
        "changed_files": 12,
        "created_at": "2020-06-20T21:58:47Z",
        "closed_at": "2020-06-21T20:37:46Z",
        "merged_at": "2020-06-21T20:37:46Z",
        "body": "Use moto instead of ElasticMQ as default backend for SQS.\r\n\r\nThis should increase stability for some deployments where the Java JRE required for ElasticMQ appears to have been causing issues.\r\n\r\nMoto still has some performance issues, message throughput is considerably lower than with ElasticMQ, as indicated by a simple performance test. These issues will be solved separately elsewhere.\r\n\r\nUsers can use the `SQS_PROVIDER=elasticmq` environment variable to fall back to ElasticMQ, if needed.",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 6,
        "deletions": 3,
        "changed_files": 1,
        "created_at": "2020-06-20T18:28:07Z",
        "closed_at": "2020-06-22T16:08:09Z",
        "merged_at": "2020-06-22T16:08:09Z",
        "body": "Closes #2545 \r\n\r\nAdded missing optional [Record](https://docs.aws.amazon.com/kinesis/latest/APIReference/API_Record.html) values to kinesis listener responses. As referenced in #940 and verified in [Kinesalite](https://github.com/mhart/kinesalite), encryption is not supported, so the value has been left as `NONE` by default.\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 7,
        "deletions": 3,
        "changed_files": 2,
        "created_at": "2020-06-20T14:06:42Z",
        "closed_at": "2020-06-20T15:25:44Z",
        "merged_at": "2020-06-20T15:25:44Z",
        "body": "Encode account ID in SQS queue URL - addresses #2518",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 68,
        "deletions": 36,
        "changed_files": 4,
        "created_at": "2020-06-19T17:14:55Z",
        "closed_at": "2020-06-19T19:25:29Z",
        "merged_at": "2020-06-19T19:25:29Z",
        "body": "Return proper response details on Lambda invocation error - addresses #2572",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 48,
        "deletions": 5,
        "changed_files": 3,
        "created_at": "2020-06-19T08:29:42Z",
        "closed_at": "2020-06-20T11:08:15Z",
        "merged_at": "2020-06-20T11:08:14Z",
        "body": "* Add integration test: publish to topic using pure http request\r\n\r\nIssue fixed:\r\n#2438 SNS publish does not work with aws-sdk-java 2.11.8\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 29,
        "deletions": 28,
        "changed_files": 6,
        "created_at": "2020-06-19T02:56:39Z",
        "closed_at": "2020-06-19T09:40:49Z",
        "merged_at": "2020-06-19T09:40:49Z",
        "body": "* Fix edge mapping for CloudWatch - fixes #2571\r\n* Fix DynamoDB shard IDs - addresses #2569",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 36,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2020-06-18T22:17:05Z",
        "closed_at": "2020-06-19T21:29:19Z",
        "merged_at": "2020-06-19T21:29:19Z",
        "body": "Fix:delete corresponding event source mappings on deletion of dynamodb table.\r\n#2561 ",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 17,
        "deletions": 3,
        "changed_files": 2,
        "created_at": "2020-06-17T23:34:01Z",
        "closed_at": "2020-06-18T07:08:12Z",
        "merged_at": "2020-06-18T07:08:12Z",
        "body": "Convert SQS->Lambda message attributes to lower case - addresses #2255",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 6,
        "deletions": 2,
        "changed_files": 3,
        "created_at": "2020-06-17T22:18:14Z",
        "closed_at": "2020-06-17T23:35:15Z",
        "merged_at": "2020-06-17T23:35:15Z",
        "body": "Minor: pass HTTP_PROXY to Lambda if configured",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 11,
        "deletions": 5,
        "changed_files": 4,
        "created_at": "2020-06-17T19:59:05Z",
        "closed_at": "2020-06-19T00:34:20Z",
        "merged_at": "2020-06-19T00:34:20Z",
        "body": "Fix : shardId format change for dynamodb streams\r\n#2569 ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 55,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2020-06-17T08:43:40Z",
        "closed_at": "2020-06-17T10:16:35Z",
        "merged_at": "2020-06-17T10:16:35Z",
        "body": "* Fix dynamodb listener\r\n* Add integration test: Disabled event source mapping will not invoke lambda\r\n\r\nIssue fixed:\r\n#2541 Disabled lambda event source mapping still triggers lambda\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 39,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2020-06-16T22:33:10Z",
        "closed_at": "2020-06-19T10:54:52Z",
        "merged_at": "2020-06-19T10:54:52Z",
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n\r\nFound an issue with path selection when the Path starts with a parameter. From the tests added  path_args = {'/{param1}/{param2}/foo/{param3}': {}, '/{param}/bar': {}} is the main culprit.\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 73,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2020-06-15T21:54:21Z",
        "closed_at": "2020-06-17T09:50:28Z",
        "merged_at": "2020-06-17T09:50:28Z",
        "body": "S3:FIX - fix cors policy with one origin\r\n#2564 ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2020-06-14T17:10:52Z",
        "closed_at": "2020-06-14T18:16:28Z",
        "merged_at": "2020-06-14T18:16:28Z",
        "body": "Fix edge routing for DynamoDB Streams - fixes #2543",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 99,
        "deletions": 20,
        "changed_files": 4,
        "created_at": "2020-06-14T10:53:08Z",
        "closed_at": "2020-06-14T12:25:40Z",
        "merged_at": "2020-06-14T12:25:40Z",
        "body": "* Refactor async utils into separate file\r\n* Cleanup thread pool on shutdown ",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 42,
        "deletions": 12,
        "changed_files": 3,
        "created_at": "2020-06-14T02:26:21Z",
        "closed_at": "2020-06-14T18:16:02Z",
        "merged_at": "2020-06-14T18:16:01Z",
        "body": "aws proxy resource method call deviation from aws\r\n#2210 ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 18,
        "deletions": 18,
        "changed_files": 5,
        "created_at": "2020-06-13T16:29:44Z",
        "closed_at": "2020-06-13T20:13:20Z",
        "merged_at": "2020-06-13T20:13:20Z",
        "body": "* Fix S3 method rename from get_key to get_object\r\n* Fix timestamps for S3 buckets",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 3,
        "changed_files": 1,
        "created_at": "2020-06-12T14:48:34Z",
        "closed_at": "2020-06-12T17:02:27Z",
        "merged_at": "2020-06-12T17:02:27Z",
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2020-06-08T16:56:37Z",
        "closed_at": "2020-06-10T20:24:42Z",
        "merged_at": "2020-06-10T20:24:41Z",
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\nThis is added functionality to allow for an ElasticSearch snapshot repo. The added code registers where the ElasticSearch Snapshot repositories will be.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 12,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2020-06-07T21:44:25Z",
        "closed_at": "2020-06-08T06:30:09Z",
        "merged_at": "2020-06-08T06:30:09Z",
        "body": "\u2026bda from api gateway aws_proxy integration request\r\nThis PR addresses two of the inconsistencies mentioned in #2210 .\r\n\r\nIf someone can give me a hint how to create a new test / extend an existing test, I will do my best to add some. Sorry if the changes look awkward - it's my first python contact ever :-).\r\nI tested that I can now integrate Java lambdas as AWS_PROXY integration which use the AWS models in com.amazonaws.serverless:aws-serverless-java-container (e.g. AwsProxyRequest) where multi value headers and query string parameters are mandatory.\r\nTherefore I was looking at the Java lambda in integration tests but it is not used for tests in combination with api gateway.\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 9,
        "deletions": 7,
        "changed_files": 3,
        "created_at": "2020-06-07T10:45:32Z",
        "closed_at": "2020-06-10T20:17:51Z",
        "merged_at": "2020-06-10T20:17:51Z",
        "body": "\r\nFix: Binary MessageAttribute is corrupted when routed from SNS Topic to SQS Queue #2432",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 58,
        "deletions": 7,
        "changed_files": 2,
        "created_at": "2020-06-06T21:09:39Z",
        "closed_at": "2020-06-07T10:27:48Z",
        "merged_at": "2020-06-07T10:27:48Z",
        "body": "Adding API-Key validation support in api-gateway method invocation",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 102,
        "deletions": 1,
        "changed_files": 3,
        "created_at": "2020-06-06T15:29:03Z",
        "closed_at": "2020-06-08T18:35:06Z",
        "merged_at": "2020-06-08T18:35:06Z",
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 315,
        "deletions": 63,
        "changed_files": 17,
        "created_at": "2020-06-06T12:04:29Z",
        "closed_at": "2020-06-09T06:32:04Z",
        "merged_at": "2020-06-09T06:32:04Z",
        "body": "This PR is a first step towards adding support for HTTP/2 for the LocalStack API endpoints.\r\n\r\nNote: This PR is still work in progress, several things still need to be fixed to ensure the correct functionality and make all tests pass.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 120,
        "deletions": 71,
        "changed_files": 6,
        "created_at": "2020-06-06T10:25:50Z",
        "closed_at": "2020-06-10T06:15:58Z",
        "merged_at": "2020-06-10T06:15:58Z",
        "body": "Based on #1352 - rebases the code onto latest `master` ",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 33,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2020-06-06T09:20:17Z",
        "closed_at": "2020-06-06T12:05:39Z",
        "merged_at": "2020-06-06T12:05:39Z",
        "body": "Fix: Api Gateway validation of api-key-required\r\n#2488 ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 135,
        "deletions": 113,
        "changed_files": 3,
        "created_at": "2020-06-06T00:31:51Z",
        "closed_at": "2020-06-06T08:44:18Z",
        "merged_at": "2020-06-06T08:44:18Z",
        "body": "Refactor proxy listener logic into separate function",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 41,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2020-06-05T16:37:44Z",
        "closed_at": "2020-06-10T20:27:24Z",
        "merged_at": "2020-06-10T20:27:24Z",
        "body": "This adds support for handling expiration in presigned POST URLs. The `policy` is base-64 encoded and may include an `expiration` date field. If it does then we compare it to the current time and return a token expired error if it has expired, in the same way as the existing handling of expires in URL params.\r\n\r\nRelevant AWS documentation on constructing a policy: https://docs.aws.amazon.com/AmazonS3/latest/API/sigv4-HTTPPOSTConstructPolicy.html \r\n\r\nThis is related to https://github.com/localstack/localstack/issues/2493 but for presigned posts.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 9,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2020-06-04T20:26:47Z",
        "closed_at": "2020-06-04T23:17:56Z",
        "merged_at": "2020-06-04T23:17:56Z",
        "body": "Added test for Binary Message attribute for messages into sqs via sns\r\n#2432 ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 47,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2020-06-04T16:38:01Z",
        "closed_at": "2020-06-04T17:57:25Z",
        "merged_at": "2020-06-04T17:57:25Z",
        "body": "Revert iam integration test\r\n* Test simulate principle policy\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 9,
        "deletions": 6,
        "changed_files": 3,
        "created_at": "2020-06-04T00:41:10Z",
        "closed_at": "2020-06-04T07:30:53Z",
        "merged_at": "2020-06-04T07:30:53Z",
        "body": "Add edge route for S3 HEAD requests - should fix #2506",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 11,
        "deletions": 3,
        "changed_files": 2,
        "created_at": "2020-06-03T20:08:01Z",
        "closed_at": "2020-06-07T13:48:23Z",
        "merged_at": "2020-06-07T13:48:23Z",
        "body": "Add persistence for SNS with PersistingProxyListener.\r\n\r\nhttps://github.com/localstack/localstack/issues/2463",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 50,
        "deletions": 147,
        "changed_files": 3,
        "created_at": "2020-06-03T14:20:37Z",
        "closed_at": "2020-06-03T17:21:02Z",
        "merged_at": "2020-06-03T17:21:02Z",
        "body": "* Combine test events test cases\r\n",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 60,
        "deletions": 28,
        "changed_files": 3,
        "created_at": "2020-06-03T13:11:49Z",
        "closed_at": "2020-07-26T19:21:47Z",
        "merged_at": null,
        "body": "This PR extends the approach in https://github.com/localstack/localstack/pull/2333 to also work for HTTP methods other than GET. More importantly it extends it to support requests that include a file upload including an `Expect: 100-continue` request header.\r\n\r\nThis is challenging because by default Python's HTTP handler sends an `HTTP/1.1 100 Continue` **at the request parse stage** ([Python Doc](https://docs.python.org/3.2/library/http.server.html#http.server.BaseHTTPRequestHandler.handle_expect_100), [Python Source](https://github.com/python/cpython/blob/3.8/Lib/http/server.py#L364)) which is before the S3 listener gets involved and can check the expires. This means that regardless what we eventually respond (eg. a token expired error), curl hides it because it's already received a 100 continue:\r\n\r\n```\r\n$ curl --upload-file test.txt http://localhost:4566/testbucket/test.txt\\?AWSAccessKeyId\\=AKIAIG7AH67ANH3GAWPQ\\&Signature\\=lnrEdiaMrRoZXjnj%2FPueQu8Fa5c%3D\\&Expires\\=1591024990\r\n$ echo $?\r\n0\r\n```\r\n\r\nThe solution to this is to override the `handle_expected_100` function in `GenericProxyHandler` and use it to allow the listener (eg S3 listener) to get involved at that stage. It does that by calling `handle_expect_100` on `ProxyListener` which has the same contract in terms of its response but also receives the `http_handler` - giving it access to all of the request details.\r\n\r\nA listener such as S3 listener can then override that function, and implement its own handling. In this case it uses the same logic as `forward_request` to determine if the request is expired, and writes the same token_expired_error if it has. If it hasn't expired then it just defers to the default implementation (as do all other listeners that haven't overridden the function).\r\n\r\n### Examples\r\n\r\n**Link has expired**\r\n\r\n```\r\n$ curl --upload-file test.txt http://localhost:4572/testbucket/test.txt\\?AWSAccessKeyId\\=AKIAIG7AH67ANH3GAWPQ\\&Signature\\=lnrEdiaMrRoZXjnj%2FPueQu8Fa5c%3D\\&Expires\\=1591024990\r\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<Error><Code>ExpiredToken</Code><Message>The provided token has expired.</Message><Resource>/testbucket/test.txt?AWSAccessKeyId=AKIAIG7AH67ANH3GAWPQ&amp;Signature=lnrEdiaMrRoZXjnj%2FPueQu8Fa5c%3D&amp;Expires=1591024990</Resource><RequestId></RequestId></Error>%\r\n```\r\n\r\n**Link has not expired**\r\n\r\n```\r\n$ curl --upload-file test.txt http://localhost:4572/testbucket/test.txt\\?AWSAccessKeyId\\=AKIAIG7AH67ANH3GAWPQ\\&Signature\\=lnrEdiaMrRoZXjnj%2FPueQu8Fa5c%3D\\&Expires\\=9991591024990\r\n$ echo $?\r\n0\r\n```\r\n\r\nI appreciate that this is fiddling with some pretty low-level details of HTTP handling in localstack, so I figured it was worth opening an early draft PR to get a sanity check on the approach before going too far with it. Feedback appreicated! :) \r\n\r\nAs an aside I've also changed the expired status code to 403, which is what I always see from AWS on these calls. Let me know if that should be changed back, I did need to update a test.\r\n\r\nTODO:\r\n\r\n- [ ] Probably worth thinking about whether we can expose a different API for the listener side. Currently it's implementing the same `handle_expect_100` API as Python's BaseHttpRequestHandler and writing to the handler itself which is probably lower level than is necessary. It could probably just return a response/None and get handled by the `GenericProxyHandler`\r\n- [ ] Handle the edge port, which will need to implement `handle_expect_100` and pass it to the correct listener\r\n- [ ] Test how the post equivalent works. If it has the same expects header then the S3 listener will need to handle a multipart form too, otherwise this might be sufficient as-is. If there's a lot of extra work then it might make sense to do in a separate PR but definitely worth testing here.\r\n- [ ] Tests!\r\n\r\nFixes https://github.com/localstack/localstack/issues/2493",
        "comments": 5
    },
    {
        "merged": true,
        "additions": 8,
        "deletions": 16,
        "changed_files": 1,
        "created_at": "2020-06-03T12:17:28Z",
        "closed_at": "2020-06-03T13:38:58Z",
        "merged_at": "2020-06-03T13:38:58Z",
        "body": "Fix sqs batch forward lambda integration test\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 92,
        "deletions": 2,
        "changed_files": 3,
        "created_at": "2020-06-02T17:14:46Z",
        "closed_at": "2020-06-02T20:48:16Z",
        "merged_at": "2020-06-02T20:48:16Z",
        "body": "Tweak the existing handling of POST form data to also treat multipart forms with a 'key' field as S3\r\n\r\nI've kept the same logic for multipart forms as the existing logic used for normal form params - if it's a multipart form with a `key` field it's treated as S3.\r\n\r\nAdded unit tests with example form/multipart form data, and an integration test using presigned post URLs against the edge port.\r\n\r\nHopefully this is the last of the S3 weirdness around the edge port! :) \r\n\r\nFixes #2464 ",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 37,
        "deletions": 4,
        "changed_files": 2,
        "created_at": "2020-06-02T16:15:46Z",
        "closed_at": "2020-06-15T11:49:44Z",
        "merged_at": "2020-06-15T11:49:44Z",
        "body": "* Patch moto s3 implementation\r\n* Add integration test\r\n\r\nIssue fixed:\r\n#2481 S3 storage class header does not work for larger files\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 13,
        "deletions": 6,
        "changed_files": 3,
        "created_at": "2020-06-01T20:56:58Z",
        "closed_at": "2020-06-01T23:21:25Z",
        "merged_at": "2020-06-01T23:21:25Z",
        "body": "#2392 ",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 94,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2020-06-01T15:06:39Z",
        "closed_at": "2020-06-01T17:04:40Z",
        "merged_at": "2020-06-01T17:04:40Z",
        "body": "This PR adds support for scheduled rules that target step functions. This fixes the issue in comment https://github.com/localstack/localstack/issues/2359#issuecomment-622566572 \r\n\r\nNote that the new integration test takes just over a minute to run for the same reason as `test_schedule_expression_event_with_http_endpoint` - because it has to add a scheduled execution and the best precision available is running every 1 minute.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 28,
        "deletions": 15,
        "changed_files": 1,
        "created_at": "2020-05-31T22:38:51Z",
        "closed_at": "2020-06-01T08:13:49Z",
        "merged_at": "2020-06-01T08:13:49Z",
        "body": "Add edge port heuristics for SQS client requests - should fix #2478",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 31,
        "deletions": 3,
        "changed_files": 2,
        "created_at": "2020-05-30T20:45:42Z",
        "closed_at": "2020-05-31T12:37:14Z",
        "merged_at": "2020-05-31T12:37:14Z",
        "body": "CreateTopic with different tags diverging from aws #2405 ",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 5,
        "changed_files": 2,
        "created_at": "2020-05-30T15:13:35Z",
        "closed_at": "2020-05-30T20:43:10Z",
        "merged_at": "2020-05-30T20:43:10Z",
        "body": "* Add Letsencrypt CA certificate to cert store in Docker image\r\n* Remove Python 2 tests in CI",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 189,
        "deletions": 54,
        "changed_files": 2,
        "created_at": "2020-05-29T18:01:57Z",
        "closed_at": "2020-05-31T09:13:50Z",
        "merged_at": "2020-05-31T09:13:50Z",
        "body": "* Patch moto IAM implementation\r\n* Add integration test\r\n* Fix lint error\r\n\r\nIssue fixed:\r\n#1674 IAM SimulatePrincipalPolicy returns XML error\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 6,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2020-05-28T19:47:51Z",
        "closed_at": "2020-05-30T08:35:10Z",
        "merged_at": "2020-05-30T08:35:10Z",
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\nThis is a PR to fix the issue describe in Issue #2472 ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 97,
        "deletions": 7,
        "changed_files": 2,
        "created_at": "2020-05-28T11:39:39Z",
        "closed_at": "2020-05-30T14:45:11Z",
        "merged_at": "2020-05-30T14:45:11Z",
        "body": "* Update event listener\r\n* Add integration test\r\n\r\nIssue fixed:\r\n#2460 EventBridge Unsupported Events rule target ARN\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 13,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2020-05-28T11:06:25Z",
        "closed_at": "2020-05-28T20:35:35Z",
        "merged_at": "2020-05-28T20:35:35Z",
        "body": "Included the missing attributes for Lambda SNS Notification.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 15,
        "deletions": 19,
        "changed_files": 6,
        "created_at": "2020-05-24T21:00:21Z",
        "closed_at": "2020-05-26T20:21:07Z",
        "merged_at": "2020-05-26T20:21:07Z",
        "body": "Minor testutil refactoring; release v0.11.2",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 232,
        "deletions": 207,
        "changed_files": 13,
        "created_at": "2020-05-24T13:23:51Z",
        "closed_at": "2020-05-24T14:51:58Z",
        "merged_at": "2020-05-24T14:51:58Z",
        "body": "* Refactor CLI and infra startup\r\n* Use random port for multiserver\r\n* Remove subprocess32 dependency",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 66,
        "deletions": 11,
        "changed_files": 4,
        "created_at": "2020-05-23T16:40:58Z",
        "closed_at": "2020-05-24T13:57:33Z",
        "merged_at": "2020-05-24T13:57:33Z",
        "body": "* Update lambda model, lambda_api\r\n* Add integration test\r\n\r\nIssue fixed:\r\n#2398 Lambda model missing or not preserving attributes\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 38,
        "deletions": 8,
        "changed_files": 2,
        "created_at": "2020-05-22T11:16:21Z",
        "closed_at": "2020-05-23T20:51:56Z",
        "merged_at": "2020-05-23T20:51:56Z",
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\nIncluded bucket checks....",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 76,
        "deletions": 81,
        "changed_files": 20,
        "created_at": "2020-05-21T15:10:59Z",
        "closed_at": "2020-05-21T18:00:40Z",
        "merged_at": "2020-05-21T18:00:40Z",
        "body": "Use dynamic ports instead of hardcoded backend service ports",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 12,
        "deletions": 3,
        "changed_files": 2,
        "created_at": "2020-05-19T21:52:40Z",
        "closed_at": "2020-05-26T18:10:23Z",
        "merged_at": "2020-05-26T18:10:23Z",
        "body": "\"Steals\" the work of making SecretsManager persistent by changing SQS\r\nfrom a ProxyListener to a PersistingProxyListener.\r\n\r\n**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 6,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2020-05-19T21:20:35Z",
        "closed_at": "2020-05-19T22:35:21Z",
        "merged_at": "2020-05-19T22:35:21Z",
        "body": "Fix mapping of CloudFormation account IDs - should fix the issue in #2437",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2020-05-19T06:00:45Z",
        "closed_at": "2020-05-21T05:18:06Z",
        "merged_at": null,
        "body": "When creating lambda function using cloudformation create-stack (`aws cloudformation create-stack --stack-name stack-name --endpoint-url http://localhost:4566 --template-body file://template.yaml`), I'm getting error:\r\n```\r\nMember must satisfy regular expression pattern: arn:(aws[a-zA-Z-]*)?:iam::(\\\\d{12}):role/?[a-zA-Z_0-9+=,.@\\\\-_/]+\"\r\n``` \r\nand in the logs there is (debug enabled):\r\n```\r\nERROR:localstack.services.cloudformation.cloudformation_starter: Unable to parse and create resource \"SampleLambda\": An error occurred (ValidationException) when calling the None operation: 1 validation error detected: Value 'arn:aws:iam::123456789:role/a-role' at 'role' failed to satisfy constraint: Member must satisfy regular expression pattern: arn:(aws[a-zA-Z-]*)?:iam::(\\d{12}):role/?[a-zA-Z_0-9+=,.@\\-_/]+ Traceback (most recent call last):\r\n```\r\n\r\nThe suspicious part is that I'm not specifying \"123456789\" anywhere -  (`template.yaml`, simplified):\r\n```\r\n...\r\nResources:\r\n  SampleLambda:\r\n    Type: AWS::Serverless::Function\r\n    Properties:\r\n      FunctionName: \"function-name\"\r\n      Handler: index.handler\r\n      Runtime: python3.8\r\n      InlineCode: |\r\n        def handler(event, context):\r\n          print(\"Hey!\")\r\n      Role: \"arn:aws:iam::000000000000:role/a-role\"    # this causes the problem, works fine when omitted, but then new role is created which I don't want in this case\r\n```\r\nI searched the codebase for \"123456789\" to find out if it doesn't come from localstack and I've found this in `cloudformation_listener.py`. I don't fully understand the logic behind [this replacement](https://github.com/localstack/localstack/blob/c501046c611aba0d891b2cfea1752c35bc285f49/localstack/services/cloudformation/cloudformation_listener.py#L175) but i think that this is the root cause of the issue.\r\n\r\nThe role with given arn exists: output from `aws iam --endpoint-url=http://localhost:4566 list-roles`:\r\n```\r\n{\r\n    \"Roles\": [\r\n        {\r\n            \"Path\": \"/\",\r\n            \"RoleName\": \"a-role\",\r\n            \"RoleId\": \"ky8b9qs20hq7cyofd9de\",\r\n            \"Arn\": \"arn:aws:iam::000000000000:role/a-role\",\r\n            ....\r\n}\r\n```\r\n\r\nI'm using latest (0.11.1) docker version (`docker-compose.yml`):\r\n```\r\n...\r\n  localstack-s3-lambda:\r\n    image: localstack/localstack:0.11.1\r\n    environment:\r\n      - SERVICES=s3:4572,lambda:4574,cloudformation:4581,stepfunctions:4585,iam:4593\r\n      - DEFAULT_REGION=us-east-1\r\n      - DEBUG=1\r\n      - LAMBDA_EXECUTOR=docker\r\n      - LAMBDA_DOCKER_NETWORK=host\r\n    ports:\r\n      - \"4566:4566\"\r\n    volumes:\r\n      -  \"/var/run/docker.sock:/var/run/docker.sock\"\r\n```",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 22,
        "deletions": 3,
        "changed_files": 2,
        "created_at": "2020-05-18T11:24:09Z",
        "closed_at": "2020-05-21T13:25:40Z",
        "merged_at": "2020-05-21T13:25:40Z",
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n\r\nIncluded bucket check",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 11,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2020-05-13T11:50:59Z",
        "closed_at": "2020-05-14T16:06:50Z",
        "merged_at": "2020-05-14T16:06:50Z",
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\nIncluded some utc",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 54,
        "deletions": 2,
        "changed_files": 3,
        "created_at": "2020-05-10T21:07:13Z",
        "closed_at": "2020-05-25T22:12:28Z",
        "merged_at": "2020-05-25T22:12:28Z",
        "body": "Fix : Error handling on sqs send empty message batch #1658 ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 103,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2020-05-10T18:49:41Z",
        "closed_at": "2020-05-11T19:27:09Z",
        "merged_at": "2020-05-11T19:27:09Z",
        "body": "Enhancement adding API_gateway Dynamodb integration #1546\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 42,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2020-05-07T13:57:48Z",
        "closed_at": "2020-05-07T16:27:59Z",
        "merged_at": "2020-05-07T16:27:59Z",
        "body": "* Publish message to topic\r\n* Publish message after subscribe topic\r\n\r\nIssue fixed:\r\n#1956 SNS subscribe to topic throws 502 when invoked via Java AWS client\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 61,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2020-05-06T20:44:07Z",
        "closed_at": "2020-05-07T16:50:07Z",
        "merged_at": "2020-05-07T16:50:07Z",
        "body": "Adding test case to create vpc end point #1450 , put/get bucket versioning #2051 ",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 40,
        "deletions": 20,
        "changed_files": 1,
        "created_at": "2020-05-06T08:25:27Z",
        "closed_at": "2020-05-07T13:18:27Z",
        "merged_at": "2020-05-07T13:18:27Z",
        "body": "* Put metric data\r\n* List metrics\r\n* Get metric statistics\r\n\r\nFixes #712 - cloudwatch internal server errors\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 27,
        "deletions": 6,
        "changed_files": 2,
        "created_at": "2020-05-05T21:09:13Z",
        "closed_at": "2020-05-07T21:44:17Z",
        "merged_at": "2020-05-07T21:44:17Z",
        "body": "Enhancement Adding not existent lambda name in response headers. Fixes #1971 ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 19,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2020-05-05T19:51:17Z",
        "closed_at": "2020-05-05T22:21:59Z",
        "merged_at": "2020-05-05T22:21:59Z",
        "body": "Tests Adding test case for sqs Get Queue attributes #1992 ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 192,
        "deletions": 4,
        "changed_files": 4,
        "created_at": "2020-05-04T22:47:31Z",
        "closed_at": "2020-05-07T21:35:09Z",
        "merged_at": "2020-05-07T21:35:09Z",
        "body": "* Added tests for moto upstream implementations - #2367\r\n* Added a null check for json conversion. Addresses - #2321\r\n* Add test for api gateway create and get model - #1991",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2020-05-04T20:13:20Z",
        "closed_at": "2020-05-04T21:56:27Z",
        "merged_at": "2020-05-04T21:56:27Z",
        "body": "Fix health check for HTTPS endpoints with self-signed certificates - fixes #2387",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 23,
        "deletions": 7,
        "changed_files": 6,
        "created_at": "2020-05-03T14:59:14Z",
        "closed_at": "2020-05-03T16:46:25Z",
        "merged_at": "2020-05-03T16:46:24Z",
        "body": "* optimize image size\r\n* add documentation for USE_LIGHT_IMAGE\r\n* release v0.11.1",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 22,
        "deletions": 6,
        "changed_files": 5,
        "created_at": "2020-05-02T19:21:39Z",
        "closed_at": "2020-05-02T22:02:07Z",
        "merged_at": "2020-05-02T22:02:07Z",
        "body": "Create a stripped-down \"light\" version of the Docker image, with lazy loading of Elasticsearch libs, and with the (deprecated) dashboard Web UI sources removed.\r\n\r\nThe name of the light image is currently `localstack/localstack-light`. This change cuts down the image size (compared to the default `localstack/localstack`) by more than 20%.\r\n\r\nIn the future, we may want to make this the default behavior, to reduce image size and download volume overall.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 121,
        "deletions": 46,
        "changed_files": 9,
        "created_at": "2020-05-02T17:01:43Z",
        "closed_at": "2020-05-02T20:15:26Z",
        "merged_at": "2020-05-02T20:15:26Z",
        "body": "This commit introduces API call record & replay (i.e. persistence) for both SSM (requested in ticket #164) and Secretsmanager (needed it in a personal project).\r\n\r\nAdditionally, this introduces a proxy listener which makes it easy for other services to gradually adopt to, which will add persistence virtually for free.\r\n\r\nList of changes per file:\r\n\r\nconstants.py\r\n- Added DEFAULT_PORT_SECRETSMANAGER_BACKEND\r\n\r\ninfra.py\r\n- Removed the deprecated start_apigatway, start_events, start_secretsmanager functions - these services have their own starter\r\n\r\npersistence.py\r\n- Added the PersistingProxyListener, which persists API calls via the available record-replay layer\r\n- Fixed some warnings\r\n\r\nplugins.py\r\n- Added the secretsmanager health-check and proxy listener\r\n\r\nREADME.md\r\n- Added Secretsmanager and SSM to the list of services which support persistence\r\n\r\ns3_listener.py\r\n- Migrated to use the PersistingProxyListener\r\n\r\nsecretsmanager_listener.py\r\n- Introduced, simple listener which persists all non get/list/describe amazon target methods for secretsmanager\r\n\r\nsecretsmanager_starter.py\r\n- Added check_secretsmanager (healthcheck)\r\n- Added the use of the backend port and update listener in start_secretsmanager\r\n\r\nssm_listener.py\r\n- Migrated to use PersistingProxyListener",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2020-05-02T07:06:58Z",
        "closed_at": "2020-05-02T12:06:33Z",
        "merged_at": "2020-05-02T12:06:33Z",
        "body": "#1160 describes problems caused by AWS SDK classes from the localstack-utils-fat.jar overriding classes defined in the actual Lambda jar/zip itself. This causes numerous incompatibility problems.\r\n\r\nI was able to isolate and repro this problem with a minimal example ( https://github.com/krrg/localstack-java-classpath-debug )\r\n\r\n@whummer implemented a partial fix for this that moved the `localstack-utils-fat.jar` later on the classpath, but this fix only applied to lambdas being run using the `docker` executor.\r\n\r\nThis PR takes a similar approach, but this time for lambdas being executed locally. Using the minimal example above, I verified that the classpath is now correctly ordered for local lambdas and that my example is able to be invoked without error.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 29,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2020-04-30T17:04:00Z",
        "closed_at": "2020-05-01T09:03:41Z",
        "merged_at": "2020-05-01T09:03:41Z",
        "body": "* Patch apigateway models init functions\r\n* Update integration test\r\n\r\nIssue fixed:\r\n#1030 ApiGateway doesn't work with simple AWSClient : responseTemplates should not be null",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 2,
        "changed_files": 3,
        "created_at": "2020-04-29T21:35:28Z",
        "closed_at": "2020-04-29T23:14:58Z",
        "merged_at": "2020-04-29T23:14:58Z",
        "body": "Fix regression in CloudFormation deployment, caused by recent change in upstream `moto`.",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 11,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2020-04-29T19:02:06Z",
        "closed_at": "2020-04-30T11:38:53Z",
        "merged_at": "2020-04-30T11:38:53Z",
        "body": "#1409 \r\n\r\nAdding test case for sts get_federation_token",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 166,
        "deletions": 24,
        "changed_files": 9,
        "created_at": "2020-04-29T04:43:45Z",
        "closed_at": "2020-05-04T23:32:48Z",
        "merged_at": "2020-05-04T23:32:48Z",
        "body": "- Added the dotnetcore3.1 lambda runtime\r\n\r\nMay resolve issue #2285 ",
        "comments": 6
    },
    {
        "merged": true,
        "additions": 60,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2020-04-28T17:37:57Z",
        "closed_at": "2020-04-29T20:41:29Z",
        "merged_at": "2020-04-29T20:41:29Z",
        "body": "* Add handle delete action for stepfunctions's stateMachine\r\n* Add integration test: cloudformation with events rule without name\r\n\r\nIssue fixed:\r\n#2359 Cloudformation doesn't create Cloudwatch event rule\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 26,
        "deletions": 7,
        "changed_files": 4,
        "created_at": "2020-04-28T08:16:32Z",
        "closed_at": "2020-04-30T12:08:44Z",
        "merged_at": "2020-04-30T12:08:44Z",
        "body": "* Add integration test\r\n\r\nIssue fixed:\r\n#2338 Can't create FIFO queue with cloudformation\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 80,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2020-04-27T16:24:07Z",
        "closed_at": "2020-04-27T20:02:37Z",
        "merged_at": "2020-04-27T20:02:37Z",
        "body": "* Add integration test\r\n\r\nIssue fixed:\r\n#1594 Unable to invoke services through boto3 from latest. Works fine on 0.10.2\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 226,
        "deletions": 54,
        "changed_files": 11,
        "created_at": "2020-04-26T21:22:19Z",
        "closed_at": "2020-04-27T12:43:43Z",
        "merged_at": "2020-04-27T12:43:43Z",
        "body": "Add support for Lambdas triggered by scheduled event rules.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 8,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2020-04-26T12:24:41Z",
        "closed_at": "2020-04-26T14:02:46Z",
        "merged_at": "2020-04-26T14:02:46Z",
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\nIncluded some UTC",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2020-04-25T23:44:56Z",
        "closed_at": "2020-04-26T10:51:40Z",
        "merged_at": "2020-04-26T10:51:39Z",
        "body": "#2290 Fix s3 get object fails with header Content-MD5",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 33,
        "deletions": 7,
        "changed_files": 5,
        "created_at": "2020-04-25T21:35:02Z",
        "closed_at": "2020-04-26T10:43:47Z",
        "merged_at": "2020-04-26T10:43:47Z",
        "body": "#1637 FIX extracting multi value headers to headers ",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 10,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2020-04-25T13:21:12Z",
        "closed_at": "2020-04-25T14:51:16Z",
        "merged_at": "2020-04-25T14:51:15Z",
        "body": "Extract `.coverage` file from created Docker image in CI - should fix #2346",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 147,
        "deletions": 58,
        "changed_files": 9,
        "created_at": "2020-04-25T12:51:38Z",
        "closed_at": "2020-04-25T21:49:50Z",
        "merged_at": "2020-04-25T21:49:50Z",
        "body": "* Fix CloudFormation deployment for EventPattern attribute in Events::Rule - addresses #2241 \r\n* Refactor SNS integration tests to create resources locally instead of globally\r\n* Add CF support to update instances of IAM::Role",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 88,
        "deletions": 6,
        "changed_files": 4,
        "created_at": "2020-04-25T11:05:54Z",
        "closed_at": "2020-04-25T16:14:39Z",
        "merged_at": "2020-04-25T16:14:39Z",
        "body": "* Add handle for target lambda\r\n* Add integration test\r\n\r\nFixed last comment in:\r\n#1429 Add basic EventBridge (CloudWatch Events) support (https://github.com/localstack/localstack/pull/1429)\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 8,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2020-04-24T16:03:43Z",
        "closed_at": "2020-04-25T01:29:57Z",
        "merged_at": "2020-04-25T01:29:56Z",
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\nFixed issue #2305 ",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 247,
        "deletions": 114,
        "changed_files": 3,
        "created_at": "2020-04-23T16:20:05Z",
        "closed_at": "2020-04-24T16:56:25Z",
        "merged_at": "2020-04-24T16:56:25Z",
        "body": "* Patch moto's functions of events service\r\n* Refactor events integration test\r\n\r\nIssue fixed:\r\n#2101 events put-targets does not respond\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 38,
        "deletions": 17,
        "changed_files": 7,
        "created_at": "2020-04-22T23:17:56Z",
        "closed_at": "2020-04-23T18:40:48Z",
        "merged_at": "2020-04-23T18:40:48Z",
        "body": "Fix default RoleName in CF dependent IAM roles",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 0,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2020-04-22T08:16:14Z",
        "closed_at": "2020-04-22T23:21:09Z",
        "merged_at": "2020-04-22T23:21:09Z",
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\nIncluded edge port details in the arch diagram",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 121,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2020-04-21T23:07:23Z",
        "closed_at": "2020-04-22T23:19:46Z",
        "merged_at": "2020-04-22T23:19:46Z",
        "body": "https://github.com/localstack/localstack/issues/1685\r\n\r\npre-signed-url expiry after given timestamp,s3 object expiry after timestamp\r\n\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 11,
        "deletions": 9,
        "changed_files": 3,
        "created_at": "2020-04-21T20:32:30Z",
        "closed_at": "2020-04-22T17:03:34Z",
        "merged_at": "2020-04-22T17:03:33Z",
        "body": "Fix edge request forwarding for public S3 URLs - fixes #2329",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 55,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2020-04-21T14:32:42Z",
        "closed_at": "2020-04-21T18:42:14Z",
        "merged_at": "2020-04-21T18:42:14Z",
        "body": "* Add sample lambda that make put_item to dynamodb table\r\n* Add integration test\r\n\r\nIssue fixed:\r\n#1333 Lambda function cannot make DynamoDB calls\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 21,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2020-04-21T09:14:52Z",
        "closed_at": "2020-04-21T18:33:48Z",
        "merged_at": "2020-04-21T18:33:48Z",
        "body": "* Add integration test\r\n* Update moto-ext version\r\n\r\nIssue fixed:\r\n#1564 Can't create domain name in apigateway service\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 20,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2020-04-21T08:58:18Z",
        "closed_at": "2020-04-21T10:02:06Z",
        "merged_at": "2020-04-21T10:02:06Z",
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\nAdded info for Dev packages installation & testing",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 36,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2020-04-20T21:55:58Z",
        "closed_at": "2020-04-21T18:25:25Z",
        "merged_at": "2020-04-21T18:25:24Z",
        "body": "#1859 Added missing headers in the s3 get object response.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 16,
        "deletions": 8,
        "changed_files": 7,
        "created_at": "2020-04-19T08:41:33Z",
        "closed_at": "2020-04-21T19:02:48Z",
        "merged_at": "2020-04-21T19:02:48Z",
        "body": "\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 105,
        "deletions": 42,
        "changed_files": 8,
        "created_at": "2020-04-19T02:07:53Z",
        "closed_at": "2020-04-20T16:40:11Z",
        "merged_at": "2020-04-20T16:40:11Z",
        "body": "https://github.com/localstack/localstack/issues/1663\r\n\r\n",
        "comments": 5
    },
    {
        "merged": true,
        "additions": 115,
        "deletions": 86,
        "changed_files": 3,
        "created_at": "2020-04-18T13:59:19Z",
        "closed_at": "2020-04-18T19:51:40Z",
        "merged_at": "2020-04-18T19:51:40Z",
        "body": "* Handle notification configuration when deleting bucket\r\n* Remove unused code\r\n* Add integration test\r\n\r\nIssue fixed:\r\n#1752 CloudFormation - S3 notification configuration not created",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 60,
        "deletions": 3,
        "changed_files": 2,
        "created_at": "2020-04-18T08:57:10Z",
        "closed_at": "2020-04-18T19:42:58Z",
        "merged_at": "2020-04-18T19:42:58Z",
        "body": "* Add test lambda for sending message to sqs inside lambda\r\n* Add integration test\r\n\r\nIssue fixed:\r\n#1437 i am facing a problem while sending message to SQS queue from lambda function\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 37,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2020-04-18T03:30:12Z",
        "closed_at": "2020-04-19T09:46:37Z",
        "merged_at": "2020-04-19T09:46:37Z",
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\nAdded Unit Test cases to increase code coverage",
        "comments": 4
    },
    {
        "merged": false,
        "additions": 75,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2020-04-17T22:50:45Z",
        "closed_at": "2020-05-06T22:34:24Z",
        "merged_at": null,
        "body": "#2168 Added cors policy adherence checks for s3 bucket.",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 37,
        "deletions": 4,
        "changed_files": 2,
        "created_at": "2020-04-16T13:39:16Z",
        "closed_at": "2020-04-18T00:08:20Z",
        "merged_at": null,
        "body": "@duongpv7 I noticed you assigned yourself the issue, so I hope I'm not stepping on your toes. I was trying to fix this before I noticed, but was wondering if you could give me a pointer how I can get this working/what I've done wrong?\r\n\r\nWith this change, when I create a role without a name (eg. the repro in the issue) I no longer get an error, but when I run `awslocal iam list-roles` afterward I get:\r\n\r\n```\r\n{\r\n    \"Roles\": [\r\n        {\r\n            \"Path\": \"/\",\r\n            \"RoleName\": \"dccef\",\r\n            \"RoleId\": \"g4hlb2xp8eo2n7t6pjce\",\r\n            \"Arn\": \"arn:aws:iam::000000000000:role/dccef\",\r\n            \"CreateDate\": \"2020-04-16T13:34:45.673Z\",\r\n            \"AssumeRolePolicyDocument\": {}\r\n        },\r\n        {\r\n            \"Path\": \"/\",\r\n            \"RoleName\": \"RoleName\",\r\n            \"RoleId\": \"uba7i590qmp0h0xu8fre\",\r\n            \"Arn\": \"arn:aws:iam::000000000000:role/RoleName\",\r\n            \"CreateDate\": \"2020-04-16T13:34:45.721Z\",\r\n            \"AssumeRolePolicyDocument\": {}\r\n        }\r\n    ]\r\n}\r\n```\r\n\r\n2 roles are added instead of one, one has the short uid (correct), the other has 'RoleName'. The test I've added has the same behaviour - it fails because there's this second role being created. I can't figure out how my change could be causing this to happen and I'm not familiar enough with the code to understand how to debug this. Do you have any idea what might be wrong here?\r\n\r\nFixes #2303 ",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 7,
        "deletions": 2,
        "changed_files": 3,
        "created_at": "2020-04-16T09:35:41Z",
        "closed_at": "2020-04-16T19:00:31Z",
        "merged_at": "2020-04-16T19:00:30Z",
        "body": "This allows setting the lambda endpoint used for executing step functions to be different\r\nto the localstack lambda endpoint.\r\n\r\nThis is useful for integration with eg. SAM or just the lambci docker images.\r\n\r\n--\r\n\r\nNote: I can't see any existing tests for similar environment variable/config code. If there is somewhere appropriate I should be adding tests then please let me know and I'll update!\r\n\r\nResolves #2296 ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 191,
        "deletions": 23,
        "changed_files": 4,
        "created_at": "2020-04-16T09:12:41Z",
        "closed_at": "2020-04-16T19:39:10Z",
        "merged_at": "2020-04-16T19:39:10Z",
        "body": "  - Events Rule\r\n  - S3 Bucket Policy\r\n* Add integration tests:\r\n  - Events Rule\r\n  - Kinesis Stream\r\n  - S3 Bucket Policy\r\n  - SQS\r\n\r\n Issues fixed:\r\n #1616 No Moto CloudFormation support for AWS::KinesisFirehose::DeliveryStream / AWS::S3::BucketPolicy\r\n #2058 Invoking CF stack destroy API call seems to delete the stack but not the resources it has provisioned\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 139,
        "deletions": 68,
        "changed_files": 14,
        "created_at": "2020-04-15T20:37:41Z",
        "closed_at": "2020-04-15T23:42:24Z",
        "merged_at": "2020-04-15T23:42:24Z",
        "body": "Lazily install and allow selection of specific Elasticsearch versions - addresses #2242",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 42,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2020-04-15T20:08:47Z",
        "closed_at": "2020-04-17T20:59:10Z",
        "merged_at": "2020-04-17T20:59:10Z",
        "body": "Fixed dbynamo db return values param behaviour \r\n\r\nhttps://github.com/localstack/localstack/issues/2121",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 8,
        "deletions": 9,
        "changed_files": 2,
        "created_at": "2020-04-15T11:58:54Z",
        "closed_at": "2020-04-16T19:11:59Z",
        "merged_at": null,
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\nMoving the infra common method to util \r\nfixing todos",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2020-04-15T00:16:48Z",
        "closed_at": "2020-04-15T05:43:35Z",
        "merged_at": "2020-04-15T05:43:35Z",
        "body": "For some reason the payload going through the listener is of binary type. I've tried to write a test reproducing the issue, but it seems the test setup isn't exactly the same as when not in the test environment.\r\n\r\nFixes this :\r\nWhen sending this request :\r\n```\r\nPOST http://localhost:4567/restapis/{{api_id}}/test/_user_request_/resolve\r\nContent-Type: application/json\r\n\r\n{\r\n    \"firstName\": \"Charles\",\r\n    \"lastName\": \"Darwin\"\r\n}\r\n```\r\n\r\nIt returns this error :\r\n```\r\nFile \"/opt/code/localstack/localstack/services/awslambda/lambda_api.py\", line 459, in run_lambda\r\n   result = LAMBDA_EXECUTOR.execute(func_arn, func_details, event, context=context,\r\n File \"/opt/code/localstack/localstack/services/awslambda/lambda_executors.py\", line 132, in execute\r\n   return do_execute()\r\n File \"/opt/code/localstack/localstack/services/awslambda/lambda_executors.py\", line 119, in do_execute\r\n   raise e\r\n File \"/opt/code/localstack/localstack/services/awslambda/lambda_executors.py\", line 107, in do_execute\r\n   result = self._execute(func_arn, func_details, event, context, version)\r\n File \"/opt/code/localstack/localstack/services/awslambda/lambda_executors.py\", line 669, in _execute\r\n   process.run()\r\n File \"/usr/lib/python3.8/multiprocessing/process.py\", line 108, in run\r\n   self._target(*self._args, **self._kwargs)\r\n File \"/opt/code/localstack/localstack/services/awslambda/lambda_executors.py\", line 664, in do_execute\r\n   result = lambda_function(event, context)\r\n File \"/opt/code/localstack/localstack/services/awslambda/lambda_api.py\", line 586, in execute\r\n   result = lambda_executors.EXECUTOR_LOCAL.execute_java_lambda(\r\n File \"/opt/code/localstack/localstack/services/awslambda/lambda_executors.py\", line 686, in execute_java_lambda\r\n   save_file(event_file, json.dumps(event))\r\n File \"/usr/lib/python3.8/json/__init__.py\", line 231, in dumps\r\n   return _default_encoder.encode(obj)\r\n File \"/usr/lib/python3.8/json/encoder.py\", line 199, in encode\r\n   chunks = self.iterencode(o, _one_shot=True)\r\n File \"/usr/lib/python3.8/json/encoder.py\", line 257, in iterencode\r\n   return _iterencode(o, 0)\r\n File \"/usr/lib/python3.8/json/encoder.py\", line 179, in default\r\n   raise TypeError(f'Object of type {o.__class__.__name__} '\r\nTypeError: Object of type bytes is not JSON serializable\r\n```",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 76,
        "deletions": 6,
        "changed_files": 2,
        "created_at": "2020-04-14T19:38:09Z",
        "closed_at": "2020-04-15T17:34:22Z",
        "merged_at": "2020-04-15T17:34:22Z",
        "body": "Enhancement Added exists operator support for SNS FILTER POLICY \r\n\r\nhttps://github.com/localstack/localstack/issues/1703",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 131,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2020-04-14T10:07:11Z",
        "closed_at": "2020-04-14T20:53:38Z",
        "merged_at": "2020-04-14T20:53:38Z",
        "body": "Fix some iam issues on moto backend\r\n* Patched detach_role_policy function\r\n* Add missing managed policies\r\n* Add integration test\r\n\r\nIssues fixed:\r\n#2274 iam: Problem with AWSLambdaExecute permission\r\n#2286 Error reading IAM Role in terraform destroy",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 74,
        "deletions": 28,
        "changed_files": 2,
        "created_at": "2020-04-13T19:52:53Z",
        "closed_at": "2020-04-15T17:10:28Z",
        "merged_at": "2020-04-15T17:10:28Z",
        "body": "Added missed cloudformation getatt for KinesisFirehose::DeliveryStream and Elasticsearch::Domain\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 52,
        "deletions": 32,
        "changed_files": 5,
        "created_at": "2020-04-11T10:40:25Z",
        "closed_at": "2020-04-12T13:00:25Z",
        "merged_at": "2020-04-12T13:00:25Z",
        "body": "Fix tagging support for Elasticsearch domains",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 107,
        "deletions": 26,
        "changed_files": 3,
        "created_at": "2020-04-11T09:11:41Z",
        "closed_at": "2020-04-12T13:59:16Z",
        "merged_at": "2020-04-12T13:59:16Z",
        "body": "* Patch moto IAM model\r\n* Add integration test\r\nFixed:\r\n#925 Serverless CloudFormation templates using AWS::Partition fail\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 7,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2020-04-11T02:35:39Z",
        "closed_at": "2020-04-13T09:02:39Z",
        "merged_at": "2020-04-13T09:02:39Z",
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\nIncluded the version details in the application logs\r\n#2268 ",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 7,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2020-04-11T01:01:05Z",
        "closed_at": "2020-04-11T10:44:09Z",
        "merged_at": "2020-04-11T10:44:09Z",
        "body": "Adding test case to test the ARN in sns topic ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2020-04-10T01:32:12Z",
        "closed_at": "2020-04-10T10:50:41Z",
        "merged_at": "2020-04-10T10:50:41Z",
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\nExposing edge port in Dockerfile #2275",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 95,
        "deletions": 51,
        "changed_files": 5,
        "created_at": "2020-04-08T15:21:29Z",
        "closed_at": "2020-04-10T10:32:57Z",
        "merged_at": "2020-04-10T10:32:57Z",
        "body": "* Refactor get lambda event logs functions\r\n* Add integration tests: publish message with target arn\r\nIssues fixed:\r\n#1876 SNS lambda subscription not triggered when using TargetArn instead of TopicArn on publish\r\n#1933 Specifying targetArn when Publish SNS message seems to no longer work\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2020-04-08T13:08:44Z",
        "closed_at": "2020-04-08T15:51:23Z",
        "merged_at": "2020-04-08T15:51:23Z",
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\nExposed the edge port 4566 to start from docker-compose #2253",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 229,
        "deletions": 31,
        "changed_files": 5,
        "created_at": "2020-04-08T09:57:51Z",
        "closed_at": "2020-04-11T09:37:12Z",
        "merged_at": "2020-04-11T09:37:12Z",
        "body": "Added basic cloudformation support for ElasticSearch::Domain, SecretsManager::Secret and KinesisFirehose::DeliveryStream\r\n\r\n",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2020-04-07T15:56:55Z",
        "closed_at": "2020-04-07T17:33:51Z",
        "merged_at": "2020-04-07T17:33:51Z",
        "body": "* Fix xml format response\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 135,
        "deletions": 24,
        "changed_files": 3,
        "created_at": "2020-04-07T14:43:00Z",
        "closed_at": "2020-04-07T18:40:25Z",
        "merged_at": "2020-04-07T18:40:25Z",
        "body": "* Update lambda_api\r\n* Add integration test: lambda add event source mapping with batch size\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2020-04-06T16:20:57Z",
        "closed_at": "2020-04-06T20:21:47Z",
        "merged_at": "2020-04-06T20:21:47Z",
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n\r\nfixes https://github.com/localstack/localstack/issues/2258",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 21,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2020-04-06T09:56:36Z",
        "closed_at": "2020-04-06T20:04:17Z",
        "merged_at": "2020-04-06T20:04:16Z",
        "body": "* Add integration test for: list_tags_log_group\r\n\r\nFixes #1698 ",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 96,
        "deletions": 11,
        "changed_files": 3,
        "created_at": "2020-04-06T05:32:40Z",
        "closed_at": "2020-04-06T19:54:03Z",
        "merged_at": "2020-04-06T19:54:03Z",
        "body": "* Patched moto functions\r\n* Add integration test\r\n\r\nFixes #1673 \r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 22,
        "deletions": 5,
        "changed_files": 3,
        "created_at": "2020-04-04T23:05:34Z",
        "closed_at": "2020-04-07T11:26:25Z",
        "merged_at": "2020-04-07T11:26:25Z",
        "body": "Fixed data type conversions in sns message attributes\r\n\r\n",
        "comments": 3
    },
    {
        "merged": false,
        "additions": 66,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2020-04-04T21:27:16Z",
        "closed_at": "2020-04-07T13:37:01Z",
        "merged_at": null,
        "body": "Issue 2150 , Mocking the response for describe_instance_credit_specifications",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 320,
        "deletions": 73,
        "changed_files": 9,
        "created_at": "2020-04-04T15:43:52Z",
        "closed_at": "2020-04-04T17:23:04Z",
        "merged_at": "2020-04-04T17:23:04Z",
        "body": "This PR adds an _edge service_ that acts as central entry point for all API invocations. The edge service listens on a configurable port (`EDGE_PORT`, `4566` by default) and can be used to access any of the underlying LocalStack APIs.\r\n\r\nThis is a breaking change - , although backwards compatibility has been preserved for now. Users should start reconfiguring their client SDKs to use the edge service endpoint URL, instead of the API-specific endpoints. \r\n\r\nIn a future version of LocalStack, we will remove the service-specific ports and route all API requests through the single edge endpoint only.\r\n\r\nAddresses #2173, #151",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 95,
        "deletions": 4,
        "changed_files": 4,
        "created_at": "2020-04-04T11:03:46Z",
        "closed_at": "2020-04-04T18:00:04Z",
        "merged_at": "2020-04-04T18:00:04Z",
        "body": "* Add support for Log Group resource\r\n* Add integration test\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 15,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2020-04-04T02:57:38Z",
        "closed_at": "2020-04-07T12:01:05Z",
        "merged_at": "2020-04-07T12:01:04Z",
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n#2234",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 73,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2020-04-03T22:04:10Z",
        "closed_at": "2020-04-04T21:28:11Z",
        "merged_at": null,
        "body": "ec2 \r\nhandling describe_credit_instance_specifications,ec2 tests",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 108,
        "deletions": 53,
        "changed_files": 2,
        "created_at": "2020-04-03T10:21:49Z",
        "closed_at": "2020-04-03T13:10:27Z",
        "merged_at": "2020-04-03T13:10:27Z",
        "body": "* Add integration test\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 54,
        "deletions": 15,
        "changed_files": 2,
        "created_at": "2020-04-03T09:24:10Z",
        "closed_at": "2020-04-03T16:44:13Z",
        "merged_at": "2020-04-03T16:44:12Z",
        "body": "* Fix logs listener: patch response from moto\r\n* Add integration test\r\n\r\nFixes #1343",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 74,
        "deletions": 21,
        "changed_files": 1,
        "created_at": "2020-04-02T09:46:27Z",
        "closed_at": "2020-04-03T06:24:49Z",
        "merged_at": "2020-04-03T06:24:49Z",
        "body": "#1328 Deleting and recreating the stack with same name gives me 409 conflict error\r\n#2189 CloudFormation does not properly handle deleted resources.\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 61,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2020-04-02T05:40:00Z",
        "closed_at": "2020-04-02T18:47:28Z",
        "merged_at": "2020-04-02T18:47:28Z",
        "body": "* Add integration test: lambda invoked by sqs message with delay time\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 6,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2020-04-01T22:25:33Z",
        "closed_at": "2020-09-03T17:43:33Z",
        "merged_at": "2020-09-03T17:43:33Z",
        "body": "In my scenario i would like to use localstack firehose with S3 somewhere else. \r\n\r\nFirst problem is that `aws_stack.get_s3_client` doesn't make use of `S3_BACKEND` at all. Second problem: my S3 requires `AWS_ACCESS_KEY_ID` and `AWS_SECRET_ACCESS_KEY` and this change will make use of them if the env variables are set",
        "comments": 7
    },
    {
        "merged": true,
        "additions": 7,
        "deletions": 5,
        "changed_files": 1,
        "created_at": "2020-04-01T20:21:44Z",
        "closed_at": "2020-04-03T06:11:29Z",
        "merged_at": "2020-04-03T06:11:29Z",
        "body": "It appears we only supported python 2.7-3.6 before this for the lambda api in local? This is an attempt to fix that.\r\nAdded python 3.7 and 3.8 support to localstacks lambda api.\r\n\r\n@whummer let me know if this is incorrect!",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 67,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2020-04-01T06:22:31Z",
        "closed_at": "2020-04-01T19:14:21Z",
        "merged_at": "2020-04-01T19:14:20Z",
        "body": "Add test for sending SQS message to FIFO queue with DelaySeconds - fixes  #1503",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 34,
        "deletions": 9,
        "changed_files": 1,
        "created_at": "2020-04-01T04:35:44Z",
        "closed_at": "2020-04-01T06:11:39Z",
        "merged_at": "2020-04-01T06:11:38Z",
        "body": "Add tests for S3 uploads with special content and large size - fixes #1417\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 43,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2020-03-31T12:30:28Z",
        "closed_at": "2020-03-31T19:57:16Z",
        "merged_at": "2020-03-31T19:57:16Z",
        "body": "#981  Secrets Manager response CreatedDate Invalid Format\r\n#1002 Secretsmanager crashing at list / update operations\r\n#1079 Multiple secrets in secrets manager\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2020-03-31T10:44:15Z",
        "closed_at": "2020-03-31T19:16:30Z",
        "merged_at": "2020-03-31T19:16:30Z",
        "body": "Closes #2029 ",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 190,
        "deletions": 74,
        "changed_files": 2,
        "created_at": "2020-03-29T15:41:42Z",
        "closed_at": "2020-03-29T16:46:22Z",
        "merged_at": "2020-03-29T16:46:22Z",
        "body": "* Add handle for resource's tags\r\n* Update integration tests\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 206,
        "deletions": 11,
        "changed_files": 6,
        "created_at": "2020-03-29T06:01:55Z",
        "closed_at": "2020-03-29T19:39:22Z",
        "merged_at": "2020-03-29T19:39:21Z",
        "body": "Fixes #1364 \r\n\r\n* SQS event source poll loop starts after `sqs:SendMessageBatch` events\r\n* SQS -> Lambda trigger now properly respects batch size parameter instead of always sending 1 message (and will send a maximum of 10, consistent with AWS)\r\n* Added integration test for SQS -> Lambda events\r\n* Added sqs test for SendMessageBatch\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 154,
        "deletions": 183,
        "changed_files": 6,
        "created_at": "2020-03-28T12:26:22Z",
        "closed_at": "2020-03-29T00:56:11Z",
        "merged_at": "2020-03-29T00:56:11Z",
        "body": "* Update sqs listener\r\n* Add integration test\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 29,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2020-03-27T07:49:35Z",
        "closed_at": "2020-03-28T12:41:25Z",
        "merged_at": "2020-03-28T12:41:25Z",
        "body": "This is to fix the bug reported in: https://github.com/localstack/localstack/issues/2204",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 15,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2020-03-26T15:24:04Z",
        "closed_at": "2020-03-26T18:25:37Z",
        "merged_at": "2020-03-26T18:25:37Z",
        "body": "Add test for S3 list_object_versions with EncodingType parameter - addresses #452",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 162,
        "deletions": 51,
        "changed_files": 3,
        "created_at": "2020-03-25T17:49:05Z",
        "closed_at": "2020-03-26T11:01:13Z",
        "merged_at": "2020-03-26T11:01:13Z",
        "body": "* Path describe_change_set on moto's cloudformation\r\n* Update forward request for changeSet's requests\r\n* Add integration tests for cloudformation deploy API",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 17,
        "deletions": 12,
        "changed_files": 4,
        "created_at": "2020-03-25T16:38:26Z",
        "closed_at": "2020-04-12T15:21:03Z",
        "merged_at": null,
        "body": "Co-authored-by: Fatma Elverir Yuzkollar <f.elverir-yuzkollar@klarna.com>\r\n\r\n**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 98,
        "deletions": 12,
        "changed_files": 2,
        "created_at": "2020-03-23T17:30:39Z",
        "closed_at": "2020-03-24T07:24:59Z",
        "merged_at": "2020-03-24T07:24:59Z",
        "body": "* Patch get_integration method (error on getting an integration which was deleted)\r\n* Add integration tests\r\n\r\n",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 0,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2020-03-21T20:52:10Z",
        "closed_at": "2020-03-21T22:56:42Z",
        "merged_at": null,
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 0,
        "deletions": 42,
        "changed_files": 1,
        "created_at": "2020-03-21T20:51:18Z",
        "closed_at": "2020-03-21T22:56:28Z",
        "merged_at": null,
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 37,
        "deletions": 6,
        "changed_files": 4,
        "created_at": "2020-03-21T03:32:18Z",
        "closed_at": "2020-03-21T14:28:29Z",
        "merged_at": "2020-03-21T14:28:29Z",
        "body": "* Fix download of CloudWatch templates from S3 for custom hostnames - addresses #2154\r\n* Add Github issue template\r\n* Update patch for CF `CreationTime` - fixes #2178",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 15,
        "deletions": 13,
        "changed_files": 3,
        "created_at": "2020-03-21T02:04:01Z",
        "closed_at": "2021-09-06T21:50:20Z",
        "merged_at": null,
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\n\n\n\n\u2506Issue is synchronized with this [Jira Bug](https://localstack.atlassian.net/browse/LOC-167) by [Unito](https://www.unito.io/learn-more)\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 24,
        "deletions": 9,
        "changed_files": 5,
        "created_at": "2020-03-20T19:04:14Z",
        "closed_at": "2020-03-20T20:49:35Z",
        "merged_at": "2020-03-20T20:49:34Z",
        "body": "Fixes #2170",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 45,
        "deletions": 17,
        "changed_files": 2,
        "created_at": "2020-03-19T17:36:19Z",
        "closed_at": "2020-03-20T07:45:17Z",
        "merged_at": "2020-03-20T07:45:17Z",
        "body": "* Handle get_object with range parameter\r\n* Update integration test\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 194,
        "deletions": 0,
        "changed_files": 3,
        "created_at": "2020-03-19T07:14:12Z",
        "closed_at": "2020-03-31T10:49:00Z",
        "merged_at": "2020-03-31T10:49:00Z",
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 51,
        "deletions": 4,
        "changed_files": 3,
        "created_at": "2020-03-18T17:49:03Z",
        "closed_at": "2020-03-19T08:09:45Z",
        "merged_at": "2020-03-19T08:09:45Z",
        "body": "* Update sns listener: handle empty subject\r\n* Add integration test: publish with empty subject\r\n\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 17,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2020-03-18T05:01:59Z",
        "closed_at": "2020-03-18T20:42:39Z",
        "merged_at": "2020-03-18T20:42:39Z",
        "body": "* Add integration test for get_object call\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 59,
        "deletions": 6,
        "changed_files": 5,
        "created_at": "2020-03-16T15:18:40Z",
        "closed_at": "2020-03-17T11:18:38Z",
        "merged_at": "2020-03-17T11:18:37Z",
        "body": "* Add ses starter\r\n* Patch send_raw_email in moto.ses\r\n* Add integration test\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 5,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2020-03-15T04:49:00Z",
        "closed_at": "2020-03-15T10:59:21Z",
        "merged_at": "2020-03-15T10:59:21Z",
        "body": "* Add integration test to confirm that 'CreatedDate' is a datetime object\r\n* Rename moto patched function\r\n\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 66,
        "deletions": 126,
        "changed_files": 8,
        "created_at": "2020-03-15T02:17:05Z",
        "closed_at": "2020-03-15T03:23:55Z",
        "merged_at": "2020-03-15T03:23:55Z",
        "body": "* Refactor test utils for Lambda creation\r\n* Refactor SSL cert creation",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 31,
        "deletions": 11,
        "changed_files": 2,
        "created_at": "2020-03-13T00:21:30Z",
        "closed_at": "2020-03-13T08:44:32Z",
        "merged_at": "2020-03-13T08:44:32Z",
        "body": "Support passing of parameters to nested CF stacks - fixes #2111",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 58,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2020-03-12T18:40:26Z",
        "closed_at": "2020-03-15T11:16:20Z",
        "merged_at": "2020-03-15T11:16:20Z",
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2020-03-12T17:11:48Z",
        "closed_at": "2020-03-13T09:25:48Z",
        "merged_at": null,
        "body": "Bumps [psutil](https://github.com/giampaolo/psutil) from 5.4.8 to 5.6.6.\n<details>\n<summary>Changelog</summary>\n<p><em>Sourced from <a href=\"https://github.com/giampaolo/psutil/blob/master/HISTORY.rst\">psutil's changelog</a>.</em></p>\n<blockquote>\n<h1>5.6.6</h1>\n<p>2019-11-25</p>\n<p><strong>Bug fixes</strong></p>\n<ul>\n<li>1179_: [Linux] Process cmdline() now takes into account misbehaving processes\nrenaming the command line and using inappropriate chars to separate args.</li>\n<li>1616_: use of Py_DECREF instead of Py_CLEAR will result in double free and\nsegfault\n(<code>CVE-2019-18874 &lt;https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2019-18874&gt;</code>__).\n(patch by Riccardo Schirone)</li>\n<li>1619_: [OpenBSD] compilation fails due to C syntax error.  (patch by Nathan\nHoughton)</li>\n</ul>\n<h1>5.6.5</h1>\n<p>2019-11-06</p>\n<p><strong>Bug fixes</strong></p>\n<ul>\n<li>1615_: remove pyproject.toml as it was causing installation issues.</li>\n</ul>\n<h1>5.6.4</h1>\n<p>2019-11-04</p>\n<p><strong>Enhancements</strong></p>\n<ul>\n<li>1527_: [Linux] added Process.cpu_times().iowait counter, which is the time\nspent waiting for blocking I/O to complete.</li>\n<li>1565_: add PEP 517/8 build backend and requirements specification for better\npip integration.  (patch by Bern\u00e1t G\u00e1bor)</li>\n</ul>\n<p><strong>Bug fixes</strong></p>\n<ul>\n<li>875_: [Windows] Process' cmdline(), environ() or cwd() may occasionally fail\nwith ERROR_PARTIAL_COPY which now gets translated to AccessDenied.</li>\n<li>1126_: [Linux] cpu_affinity() segfaults on CentOS 5 / manylinux.\ncpu_affinity() support for CentOS 5 was removed.</li>\n<li>1528_: [AIX] compilation error on AIX 7.2 due to 32 vs 64 bit differences.\n(patch by Arnon Yaari)</li>\n<li>1535_: 'type' and 'family' fields returned by net_connections() are not\nalways turned into enums.</li>\n<li>1536_: [NetBSD] process cmdline() erroneously raise ZombieProcess error if\ncmdline has non encodable chars.</li>\n<li>1546_: usage percent may be rounded to 0 on Python 2.</li>\n</ul>\n</tr></table> ... (truncated)\n</blockquote>\n</details>\n<details>\n<summary>Commits</summary>\n<ul>\n<li><a href=\"https://github.com/giampaolo/psutil/commit/c6cd256da95ffe9599792759b1c2586ba24fa047\"><code>c6cd256</code></a> pre release</li>\n<li><a href=\"https://github.com/giampaolo/psutil/commit/b2414b83d3d728ec34ea0e35bfb21517ee231401\"><code>b2414b8</code></a> revert <a href=\"https://github-redirect.dependabot.com/giampaolo/psutil/issues/1595\">#1595</a></li>\n<li><a href=\"https://github.com/giampaolo/psutil/commit/c63369e999b458ecbd559bdde895c344b4db2841\"><code>c63369e</code></a> updat HISTORY</li>\n<li><a href=\"https://github.com/giampaolo/psutil/commit/edb20f664f28653dcdd24f0bf0191984738dca6e\"><code>edb20f6</code></a> linux, cmdline(), fix for <a href=\"https://github-redirect.dependabot.com/giampaolo/psutil/issues/1179\">#1179</a>, comment 552984549: sometimes string ends wit...</li>\n<li><a href=\"https://github.com/giampaolo/psutil/commit/d739cbb1a5b207212d467b219dfc25b017911530\"><code>d739cbb</code></a> use PROCESS_QUERY_LIMITED_INFORMATION</li>\n<li><a href=\"https://github.com/giampaolo/psutil/commit/f7e898b0987f97352c7551bdd9b29b594e1236f6\"><code>f7e898b</code></a> <a href=\"https://github-redirect.dependabot.com/giampaolo/psutil/issues/1595\">#1595</a>: use psutil_pid_is_running() instead of GetExitCodeProcess</li>\n<li><a href=\"https://github.com/giampaolo/psutil/commit/72c84cb4edb5c0968a83c1f45ad5cc51235e0af3\"><code>72c84cb</code></a> #fix <a href=\"https://github-redirect.dependabot.com/giampaolo/psutil/issues/1595\">#1595</a> / windows: kill() may not raise AccessDenied</li>\n<li><a href=\"https://github.com/giampaolo/psutil/commit/1f8d432db12a907544ac533b66a5a61ba25321fb\"><code>1f8d432</code></a> Merge branch 'master' of github.com:giampaolo/psutil</li>\n<li><a href=\"https://github.com/giampaolo/psutil/commit/e6faebcd7adaa327d1ce57385cbebe7724d02350\"><code>e6faebc</code></a> release gil around users()/BSD (<a href=\"https://github-redirect.dependabot.com/giampaolo/psutil/issues/1425\">#1425</a>)</li>\n<li><a href=\"https://github.com/giampaolo/psutil/commit/5cb1b0b526765720253fdb2e8eff0bf380bbe0a8\"><code>5cb1b0b</code></a> Merge branch 'master' of github.com:giampaolo/psutil</li>\n<li>Additional commits viewable in <a href=\"https://github.com/giampaolo/psutil/compare/release-5.4.8...release-5.6.6\">compare view</a></li>\n</ul>\n</details>\n<br />\n\n\n[![Dependabot compatibility score](https://dependabot-badges.githubapp.com/badges/compatibility_score?dependency-name=psutil&package-manager=pip&previous-version=5.4.8&new-version=5.6.6)](https://help.github.com/articles/configuring-automated-security-fixes)\n\nDependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.\n\n[//]: # (dependabot-automerge-start)\n[//]: # (dependabot-automerge-end)\n\n---\n\n<details>\n<summary>Dependabot commands and options</summary>\n<br />\n\nYou can trigger Dependabot actions by commenting on this PR:\n- `@dependabot rebase` will rebase this PR\n- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it\n- `@dependabot merge` will merge this PR after your CI passes on it\n- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it\n- `@dependabot cancel merge` will cancel a previously requested merge and block automerging\n- `@dependabot reopen` will reopen this PR if it is closed\n- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually\n- `@dependabot ignore this major version` will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot ignore this minor version` will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot ignore this dependency` will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot use these labels` will set the current labels as the default for future PRs for this repo and language\n- `@dependabot use these reviewers` will set the current reviewers as the default for future PRs for this repo and language\n- `@dependabot use these assignees` will set the current assignees as the default for future PRs for this repo and language\n- `@dependabot use this milestone` will set the current milestone as the default for future PRs for this repo and language\n\nYou can disable automated security fix PRs for this repo from the [Security Alerts page](https://github.com/localstack/localstack/network/alerts).\n\n</details>",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 50,
        "deletions": 7,
        "changed_files": 3,
        "created_at": "2020-03-12T12:47:57Z",
        "closed_at": "2020-03-13T09:53:49Z",
        "merged_at": "2020-03-13T09:53:49Z",
        "body": "* Error when query a method that doesn't exists\r\n* Can't delete method via API\r\n* Failed when destroying with terraform\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 68,
        "deletions": 6,
        "changed_files": 3,
        "created_at": "2020-03-11T23:54:00Z",
        "closed_at": "2020-03-12T01:07:06Z",
        "merged_at": "2020-03-12T01:07:06Z",
        "body": "Normalize S3 bucket names for CloudFormation deployments",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 132,
        "deletions": 91,
        "changed_files": 8,
        "created_at": "2020-03-10T21:53:49Z",
        "closed_at": "2020-03-11T01:32:19Z",
        "merged_at": "2020-03-11T01:32:19Z",
        "body": "Add message polling mechanism for Lambda-SQS integration.\r\n\r\nThis is a follow-up PR for the change in #2139 . Prior to this change, we used to intercept incoming SQS messages, check if they are linked to a Lambda function (via an event source mapping), and in that case call the Lambda directly with the event message, *without* forwarding the message to the actual SQS queue. This approach is fundamentally flawed, because Lambdas need to have access to the actual message `receiptHandle` in order to manipulate messages in the queue.\r\n\r\nWith this PR, we now implement an approach that is more in line with what's happening in real AWS. We're forwarding all SQS messages to the queues in all cases, and use a polling thread in the Lambda API to poll SQS queues for new messages. We're using a short-polling approach (`receive_message` with zero wait time), as we want to monitor several queues in parallel, in regular intervals (currently configured to poll every second).\r\n\r\nShould fix #2039. ",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 196,
        "deletions": 57,
        "changed_files": 4,
        "created_at": "2020-03-10T12:58:59Z",
        "closed_at": "2020-03-14T16:50:24Z",
        "merged_at": "2020-03-14T16:50:24Z",
        "body": "Added support for SNS redrive policy.\r\nChanged exception handle on lambda_api.process_sns_notification\r\nChanged publish_message to check and send message to dead queue when redrive policy is set.\r\n\r\nFor proper usage follow the aws doc:\r\nhttps://docs.aws.amazon.com/sns/latest/dg/sns-configure-dead-letter-queue.html",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 119,
        "deletions": 53,
        "changed_files": 7,
        "created_at": "2020-03-10T08:53:32Z",
        "closed_at": "2020-03-10T17:03:27Z",
        "merged_at": "2020-03-10T17:03:27Z",
        "body": "* Fix lint error template_deployer.py\r\n* Fix log steam name (That was an issue with get-log-events API)\r\n* Add lambda integration test\r\n - Create topic\r\n - Create a lambda function that subscribe that topic\r\n - Push an message with subject\r\n - Get event message from cloudwatch logs to confirm subject exists in message event",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 39,
        "deletions": 18,
        "changed_files": 8,
        "created_at": "2020-03-08T03:37:30Z",
        "closed_at": "2020-03-08T14:51:26Z",
        "merged_at": "2020-03-08T14:51:26Z",
        "body": "* Fix order of resource checks for CF deployment in single process - required due to recent change that starts S3 within the same process as the CF API.\r\n* Fix tags for CF deployment of `S3::Bucket`",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 19,
        "deletions": 2,
        "changed_files": 3,
        "created_at": "2020-03-07T02:02:25Z",
        "closed_at": "2020-03-08T18:18:23Z",
        "merged_at": "2020-03-08T18:18:23Z",
        "body": "See: https://github.com/softwaremill/elasticmq/pull/341\r\n\r\nThis PR makes it more compatible with string attributes.\r\n\r\nUntil now, string attribute has not been validated.\r\nNow it will verify that string attribute does not contain invalid characters .",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 80,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2020-03-06T05:01:15Z",
        "closed_at": "2020-03-07T14:20:03Z",
        "merged_at": "2020-03-07T14:20:03Z",
        "body": "* Set a random FunctionName when this property not provided\r\n* Add integration test\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 6,
        "deletions": 6,
        "changed_files": 1,
        "created_at": "2020-03-05T21:56:09Z",
        "closed_at": "2020-03-13T10:20:53Z",
        "merged_at": "2020-03-13T10:20:53Z",
        "body": "Allowing a range provides for more flexibility when integrating localstack into an existing project or package.\n\nThere's a bit of a cat-and-mouse game here, where we want to provide some flexibility in the ranges of packages that are allowed, but so many that it introduces subtle incompatibilities due to the increased number of combinations of package versions that are permitted.\n\n----\n\n# References\n\nCloses localstack/localstack#2019.",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 186,
        "deletions": 154,
        "changed_files": 3,
        "created_at": "2020-03-05T07:01:04Z",
        "closed_at": "2020-03-05T13:22:16Z",
        "merged_at": "2020-03-05T13:22:16Z",
        "body": "* Workaround: Add FifoQueue to unsupported attributes\r\n* Add integration test case\r\n\r\nAddresses #2096 ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 173,
        "deletions": 30,
        "changed_files": 3,
        "created_at": "2020-03-05T05:02:45Z",
        "closed_at": "2020-03-05T11:53:22Z",
        "merged_at": "2020-03-05T11:53:22Z",
        "body": "* Add event_start.py: apply patches for moto\r\n* Update plugins loader\r\n* Add integration tests\r\n\r\nAddresses #2101",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 44,
        "deletions": 28,
        "changed_files": 3,
        "created_at": "2020-03-02T23:10:18Z",
        "closed_at": "2020-03-03T22:43:22Z",
        "merged_at": "2020-03-03T22:43:22Z",
        "body": "Fix forwarding of Lambda output into CloudWatch Logs",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 27,
        "deletions": 6,
        "changed_files": 5,
        "created_at": "2020-03-02T01:26:19Z",
        "closed_at": "2020-03-02T09:55:07Z",
        "merged_at": "2020-03-02T09:55:07Z",
        "body": "Fix creation of SQS tags via CloudFormation - fixes #1723",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 28,
        "deletions": 13,
        "changed_files": 1,
        "created_at": "2020-02-29T17:52:55Z",
        "closed_at": "2020-03-01T17:01:34Z",
        "merged_at": "2020-03-01T17:01:34Z",
        "body": "* Set default batch size event source = 10\r\n* Create multiple events according to the batch size\r\n\r\nFixes #1131",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 36,
        "deletions": 4,
        "changed_files": 2,
        "created_at": "2020-02-29T12:14:45Z",
        "closed_at": "2020-02-29T13:53:32Z",
        "merged_at": "2020-02-29T13:53:32Z",
        "body": "Optimize plugin loading to speed up boot time",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 75,
        "deletions": 2,
        "changed_files": 12,
        "created_at": "2020-02-28T15:58:01Z",
        "closed_at": "2020-03-16T23:10:38Z",
        "merged_at": "2020-03-16T23:10:38Z",
        "body": "1. clear out `sys.modules` after importing a local py lambda function\r\n\r\n- [x] Add tests for any new features and bug fixes. Ideally, each PR should increase the test coverage.\r\n- [x] Follow the existing code style (e.g., indents). A PEP8 code linting target is included in the Makefile.\r\n- [x] Put a reasonable amount of comments into the code.\r\n- [x] Separate unrelated changes into multiple pull requests.\r\n- [ ] 1 commit per PR: Please squash/rebase multiple commits into one single commit (to keep the history clean).",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 9,
        "deletions": 5,
        "changed_files": 3,
        "created_at": "2020-02-28T06:06:00Z",
        "closed_at": "2020-02-29T09:39:01Z",
        "merged_at": "2020-02-29T09:39:01Z",
        "body": "Fix issue #2089 \r\n* Fix key path issue\r\n* Update test case with special character in key",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 30,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2020-02-28T00:30:57Z",
        "closed_at": "2020-02-28T08:30:43Z",
        "merged_at": "2020-02-28T08:30:43Z",
        "body": "* Configure nodejs Lambdas to skip SSL verification\r\n* Add CloudFormation support for S3::BucketPolicy - fixes #1877",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 15,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2020-02-27T20:17:20Z",
        "closed_at": "2020-02-27T21:45:10Z",
        "merged_at": "2020-02-27T21:45:09Z",
        "body": "* Fix returned attributes on ReturnValues=ALL_OLD for DynamoDB PutItem - addresses #2049\r\n* Fix CreationTime for CloudFormation stacks - fixes #2099",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 68,
        "deletions": 29,
        "changed_files": 3,
        "created_at": "2020-02-27T08:58:16Z",
        "closed_at": "2020-02-28T16:00:46Z",
        "merged_at": "2020-02-28T16:00:46Z",
        "body": "Fix issue #2001 \r\n* Re-trigger CI",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2020-02-26T13:53:12Z",
        "closed_at": "2020-02-27T00:13:07Z",
        "merged_at": "2020-02-27T00:13:07Z",
        "body": "This pull request is related to an issue I opened a few days ago: https://github.com/localstack/localstack/issues/2018\r\n\r\nI chose to use the already existing environment variable LAMBDA_REMOVE_CONTAINERS to prevent containers from being deleted after 10 minutes. At the moment this variable is not taken in consideration when the docker-reuse executor is used.\r\n\r\nLet me know your thoughts\r\n\r\nCheers",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 46,
        "deletions": 18,
        "changed_files": 2,
        "created_at": "2020-02-25T16:06:28Z",
        "closed_at": "2020-02-27T08:52:39Z",
        "merged_at": null,
        "body": "* Rebuild message body: add SignatureVersion, Signature, SigningCertURL (Currently hardcoded values)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 114,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2020-02-25T08:03:50Z",
        "closed_at": "2020-02-25T18:54:27Z",
        "merged_at": "2020-02-25T18:54:27Z",
        "body": "* Update delete_keys_response_template (jinja2 template)\r\n* Patch _bucket_response_delete_keys from moto\r\n* Add test case for bugfix\r\n\r\n",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 32,
        "deletions": 10,
        "changed_files": 6,
        "created_at": "2020-02-24T21:59:56Z",
        "closed_at": "2020-03-25T22:16:32Z",
        "merged_at": null,
        "body": "Updates Elasticsearch to 7.1.\r\nThis is the latest supported version by AWS",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 37,
        "deletions": 4,
        "changed_files": 2,
        "created_at": "2020-02-24T06:59:27Z",
        "closed_at": "2020-02-25T08:55:38Z",
        "merged_at": "2020-02-25T08:55:38Z",
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 167,
        "deletions": 83,
        "changed_files": 10,
        "created_at": "2020-02-23T21:11:09Z",
        "closed_at": "2020-02-23T23:07:39Z",
        "merged_at": "2020-02-23T23:07:39Z",
        "body": "* Add basic /health check endpoint - addresses #2072 \r\n* Fix parsing of `Version` date string in CloudFormation - fixes #2022",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 21,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2020-02-22T00:47:04Z",
        "closed_at": "2020-02-23T00:29:25Z",
        "merged_at": "2020-02-23T00:29:25Z",
        "body": "The CloudWatch log stream names created by lambda invocations were incorrect.  \r\nThe invocation time is in milliseconds, which wasn't accounted for by the _store_logs method resulting in date prefixes like '52112/01/29'\r\ninstead of '2020/02/22'.\r\n\r\nSo the lambdas thought they ware logging to stream names like:        \r\n\r\n\"2020/02/21/[$LATEST]549d751bde9d222e4917f4ac838986ed\"\r\n\r\nbut were really logging to names like:\r\n\r\n\"+52111/12/10/[$LATEST]4b3dcbb1\"\r\n\r\nThere will have to be an additional fix because there's still the issue of the short_uuid vs the long uuid.\r\n\r\n\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 6,
        "deletions": 4,
        "changed_files": 1,
        "created_at": "2020-02-20T11:49:00Z",
        "closed_at": "2020-02-23T00:34:01Z",
        "merged_at": "2020-02-23T00:34:01Z",
        "body": "* I found that ConsumedCapacity already returned by our DynamoDB Local\r\n* Just a small update to cover Query action\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 3,
        "changed_files": 3,
        "created_at": "2020-02-20T11:32:43Z",
        "closed_at": "2020-02-20T17:44:22Z",
        "merged_at": "2020-02-20T17:44:22Z",
        "body": "Fixes #2066\r\n\r\nSimilar approach to #1756 but changed everywhere the python path was used along the project.\r\n\r\nI think in the long run we should be able to get this value dynamically so it won't break every time python version is updated",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 54,
        "deletions": 6,
        "changed_files": 3,
        "created_at": "2020-02-20T09:05:58Z",
        "closed_at": "2020-02-20T17:21:07Z",
        "merged_at": "2020-02-20T17:21:07Z",
        "body": "Add test case\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 7,
        "deletions": 3,
        "changed_files": 1,
        "created_at": "2020-02-20T08:36:09Z",
        "closed_at": "2020-02-20T09:51:14Z",
        "merged_at": "2020-02-20T09:51:14Z",
        "body": "\u2026 as well\r\n\r\n**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 23,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2020-02-19T13:51:45Z",
        "closed_at": "2020-02-20T09:55:48Z",
        "merged_at": "2020-02-20T09:55:47Z",
        "body": "\u2026ibute for SNS - SQS integration\r\n\r\nThis fixes an issue where the Message Attributes were not being delivered from SNS to SQS when the RawMessageDelivery attribute is set like this in the cloudformation template:\r\n\r\n```\r\n  QueueTopicSubscription:\r\n    Type: AWS::SNS::Subscription\r\n    Properties:\r\n      Endpoint: !GetAtt SomeEndpoint.Arn\r\n      Protocol: sqs\r\n      RawMessageDelivery: True\r\n      TopicArn: !Ref SomeTopic.Arn\r\n```\r\n\r\nMoved the check to a function to centralize this logic.\r\n",
        "comments": 5
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2020-02-18T21:28:06Z",
        "closed_at": "2020-02-20T10:34:55Z",
        "merged_at": "2020-02-20T10:34:55Z",
        "body": "Fixes: #2055\r\nCheck for None before iterating the parsed headers.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 10,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2020-02-18T17:22:35Z",
        "closed_at": "2020-02-18T20:59:22Z",
        "merged_at": "2020-02-18T20:59:22Z",
        "body": "* Patch Kinesis Stream get_cfn_attribute(..) method in moto\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 7,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2020-02-17T18:21:19Z",
        "closed_at": "2020-02-18T21:14:36Z",
        "merged_at": "2020-02-18T21:14:36Z",
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 26,
        "deletions": 6,
        "changed_files": 2,
        "created_at": "2020-02-13T23:26:38Z",
        "closed_at": "2020-02-14T00:40:33Z",
        "merged_at": "2020-02-14T00:40:33Z",
        "body": "* Fix setting of empty SQS queue attribute values - fixes #2046\r\n* Modify payload to forward only supported queue attributes to SQS backend\r\n* Ensure environment variable values are strings - should fix #1891",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2020-02-12T12:56:09Z",
        "closed_at": "2020-02-15T20:50:10Z",
        "merged_at": "2020-02-15T20:50:09Z",
        "body": "Fixes: https://github.com/localstack/localstack/issues/2044\r\n\r\nTested with localstack running inside of docker and lambdas are using local executor.\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 1,
        "changed_files": 3,
        "created_at": "2020-02-11T21:34:16Z",
        "closed_at": "2020-02-11T23:51:55Z",
        "merged_at": "2020-02-11T23:51:55Z",
        "body": "LocalstackExtension was previously deprecated but was lacking the proper annotation.\r\n\r\nThis also fixes the documentation for JUnit 5 in the README to use LocalstackDockerExtension instead of the deprecated LocalstackExtension.\r\n\r\nResolves: #1928",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 43,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2020-02-11T13:42:43Z",
        "closed_at": "2020-02-12T12:35:09Z",
        "merged_at": "2020-02-12T12:35:08Z",
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 53,
        "deletions": 23,
        "changed_files": 6,
        "created_at": "2020-02-09T22:00:42Z",
        "closed_at": "2020-02-10T01:09:45Z",
        "merged_at": "2020-02-10T01:09:45Z",
        "body": "* Remove None strings from SNS results\r\n* Refactor resolution of CF resource name placeholders ",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 23,
        "deletions": 5,
        "changed_files": 2,
        "created_at": "2020-02-09T17:28:45Z",
        "closed_at": "2020-02-10T23:14:55Z",
        "merged_at": "2020-02-10T23:14:54Z",
        "body": "A [previous PR](https://github.com/localstack/localstack/pull/1830) wrote CloudWatch events to disk so that clients could verify their expected events had been published. This worked great in our tests until it came to reasoning about the order in which events had been published.\r\n\r\nThis change prepends the current time in milliseconds to the name of the event file (it's currently just the event id).\r\n\r\nWe considered instead relying on the modification timestamp of the file to determine the order events had been published in, but we encountered certain OSs and filesystems that are unable to report these timestamps with sub-second precision.\r\n\r\nAnother option would have been to rely on a timestamp included in the event payload itself, but some of our events do not contain timestamps.\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 45,
        "deletions": 10,
        "changed_files": 4,
        "created_at": "2020-02-08T10:06:27Z",
        "closed_at": "2020-02-08T12:35:09Z",
        "merged_at": "2020-02-08T12:35:09Z",
        "body": "Fix CloudFormation support for IAM::Role - fixes https://github.com/localstack/serverless-localstack/issues/72",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 33,
        "deletions": 11,
        "changed_files": 3,
        "created_at": "2020-02-08T01:19:39Z",
        "closed_at": "2020-02-08T10:06:49Z",
        "merged_at": "2020-02-08T10:06:48Z",
        "body": "Add ExportName to CloudFormation stack outputs - fixes #1408",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 58,
        "deletions": 34,
        "changed_files": 2,
        "created_at": "2020-02-07T19:16:25Z",
        "closed_at": "2020-02-08T00:46:47Z",
        "merged_at": "2020-02-08T00:46:47Z",
        "body": "* Fix CloudFormation dependency resolution loop\r\n* Run CloudFormation deployment in background and update stack status accordingly",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 96,
        "deletions": 8,
        "changed_files": 4,
        "created_at": "2020-02-06T17:31:24Z",
        "closed_at": "2020-02-06T20:18:45Z",
        "merged_at": "2020-02-06T20:18:45Z",
        "body": "Refactor CloudFormation dependency resolution.\r\n* Add dependency resolution loop to `FakeStack.initialize_resources`\r\n* Fix lookup of existing `ApiGateway::GatewayResponse` resources\r\n* Fix recursive resolution of references in `fn::join` CloudFormation macros\r\n* Enhance logging with more details\r\n* Add `get-compatible-elasticsearch-versions` Elasticsearch API method",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2020-02-06T14:14:38Z",
        "closed_at": "2020-02-13T14:27:55Z",
        "merged_at": null,
        "body": "The new one consistently fails with this message:\n\n```\nAws::Lambda::Errors::InternalFailure:\n       Error executing Lambda function arn:aws:lambda:us-east-1:000000000000:function:*******: Lambda process returned error status code: 1. Result: . Output:\n       2020/02/06 13:46:40 listen tcp 127.0.0.1:9001: bind: address already in use Traceback (most recent call last):\n         File \"/opt/code/localstack/localstack/services/awslambda/lambda_api.py\", line 380, in run_lambda\n           event, context=context, version=version, asynchronous=asynchronous)\n         File \"/opt/code/localstack/localstack/services/awslambda/lambda_executors.py\", line 116, in execute\n           return do_execute()\n         File \"/opt/code/localstack/localstack/services/awslambda/lambda_executors.py\", line 101, in do_execute\n           raise e\n         File \"/opt/code/localstack/localstack/services/awslambda/lambda_executors.py\", line 90, in do_execute\n           result, log_output = self._execute(func_arn, func_details, event, context, version)\n         File \"/opt/code/localstack/localstack/services/awslambda/lambda_executors.py\", line 235, in _execute\n           result, log_output = self.run_lambda_executor(cmd, stdin, environment)\n         File \"/opt/code/localstack/localstack/services/awslambda/lambda_executors.py\", line 153, in run_lambda_executor\n           (return_code, result, log_output))\n       Exception: Lambda process returned error status code: 1. Result: . Output:\n       2020/02/06 13:46:40 listen tcp 127.0.0.1:9001: bind: address already in use\n```\n\nI haven't tested that this actually works, it's just a theory. The new\nimages were published 13 hours ago, so more languages could actually\nhave broken.",
        "comments": 7
    },
    {
        "merged": true,
        "additions": 6,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2020-02-06T12:09:35Z",
        "closed_at": "2020-02-06T14:25:45Z",
        "merged_at": "2020-02-06T14:25:45Z",
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2020-02-05T10:32:59Z",
        "closed_at": "2020-02-05T12:38:04Z",
        "merged_at": "2020-02-05T12:38:04Z",
        "body": "Hi,\r\n\r\nNow that the PR https://github.com/softwaremill/elasticmq/pull/333 is merged, a new version of ElasticMQ is available fixing an issue with tagging on SQS queue creation.\r\nThis PR change the version.\r\n\r\nThanks\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 43,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2020-02-04T05:26:37Z",
        "closed_at": "2020-02-07T09:14:02Z",
        "merged_at": "2020-02-07T09:14:02Z",
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 54,
        "deletions": 35,
        "changed_files": 7,
        "created_at": "2020-02-02T20:36:38Z",
        "closed_at": "2020-02-03T08:58:30Z",
        "merged_at": "2020-02-03T08:58:30Z",
        "body": "* Refactor persistence logic\r\n* Use single file for persistence\r\n* Add `response` to list of arguments for persisting API calls",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 9,
        "deletions": 2,
        "changed_files": 4,
        "created_at": "2020-02-01T15:12:14Z",
        "closed_at": "2020-02-01T18:30:05Z",
        "merged_at": "2020-02-01T18:30:05Z",
        "body": "* resolve CloudFormation attributes starting with lower case\r\n* bump moto version\r\n* ensure `dependencies` is a list when resolving CF resource dependencies",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 84,
        "deletions": 48,
        "changed_files": 3,
        "created_at": "2020-01-31T18:23:12Z",
        "closed_at": "2020-02-03T10:35:31Z",
        "merged_at": "2020-02-03T10:35:31Z",
        "body": "Hello,\r\n\r\nThis PR fix two issues with the attributes:\r\n* When we create a queue, attributes not supported by ElasticMQ are not saved \r\n* When we query specific attributes, the unsupported attributes are all appended to the response\r\n\r\nAlso ElasticMQ now support tag operations (https://github.com/softwaremill/elasticmq/blob/master/rest/rest-sqs/src/main/scala/org/elasticmq/rest/sqs/TagQueueDirectives.scala), so i removed the hack around the tag and list methods.\r\nThere is still an issue around tagging on queue creation but it's on ElasticMQ side (https://github.com/softwaremill/elasticmq/pull/333).\r\n\r\nThanks",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2020-01-29T09:55:38Z",
        "closed_at": "2020-01-29T12:49:53Z",
        "merged_at": "2020-01-29T12:49:53Z",
        "body": "\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 47,
        "deletions": 8,
        "changed_files": 3,
        "created_at": "2020-01-28T21:39:16Z",
        "closed_at": "2020-01-28T23:18:57Z",
        "merged_at": "2020-01-28T23:18:56Z",
        "body": "Fix S3 ETag hashes for multipart uploads - fixes #1978",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 3,
        "deletions": 22,
        "changed_files": 2,
        "created_at": "2020-01-25T02:57:21Z",
        "closed_at": "2020-02-04T19:32:06Z",
        "merged_at": null,
        "body": "Not sure where to update this in `test_lambda.py` yet. I'll continue looking into it.\r\nThis resolves https://github.com/localstack/localstack/issues/1979",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 62,
        "deletions": 11,
        "changed_files": 4,
        "created_at": "2020-01-22T22:16:00Z",
        "closed_at": "2020-01-24T18:33:49Z",
        "merged_at": "2020-01-24T18:33:49Z",
        "body": "This PR decouples SQS message processing and lambda execution by running lambdas asynchronously. It also adds a test on SNS-triggered lambdas to see if messages end up in the correct dead letter queue.\r\nIt addresses #1967.\r\n\r\n@rfunix and @georgeyk contributed with suggestions and pairing.",
        "comments": 8
    },
    {
        "merged": true,
        "additions": 7,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2020-01-20T21:01:37Z",
        "closed_at": "2020-01-20T22:18:17Z",
        "merged_at": "2020-01-20T22:18:17Z",
        "body": "Include latest Lambda regions from boto3 - fixes #1961",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 41,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2020-01-18T22:38:19Z",
        "closed_at": "2020-01-19T10:32:12Z",
        "merged_at": "2020-01-19T10:32:12Z",
        "body": "Fix underscores in S3 object metadata keys - fixes #1790, fixes #459",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 126,
        "deletions": 28,
        "changed_files": 10,
        "created_at": "2020-01-16T10:09:08Z",
        "closed_at": "2020-01-16T19:51:36Z",
        "merged_at": "2020-01-16T19:51:36Z",
        "body": "* Add `ignoreDockerRunErrors` attribute to `@LocalstackDockerProperties`, which allows to run the tests with an already running Docker container.\r\n* Add test for SQS message attributes - addresses #1857",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2020-01-14T21:49:33Z",
        "closed_at": "2020-01-15T02:23:39Z",
        "merged_at": null,
        "body": "proposed fix for #1950 ",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 17,
        "deletions": 6,
        "changed_files": 3,
        "created_at": "2020-01-12T18:40:39Z",
        "closed_at": "2020-01-12T19:52:35Z",
        "merged_at": "2020-01-12T19:52:35Z",
        "body": "Pull non-existing Docker image from JUnit runner - fixes #1599 .",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 3,
        "changed_files": 2,
        "created_at": "2020-01-11T13:57:41Z",
        "closed_at": "2020-01-11T15:16:22Z",
        "merged_at": "2020-01-11T15:16:22Z",
        "body": "* Fix Lambda Docker image for Python 3.8\r\n* Fix overwrite flag for unzip function\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2020-01-10T19:52:50Z",
        "closed_at": "2020-01-11T14:28:41Z",
        "merged_at": "2020-01-11T14:28:41Z",
        "body": "Fixes #1936 ",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 3,
        "changed_files": 2,
        "created_at": "2020-01-05T19:09:46Z",
        "closed_at": "2020-01-05T21:25:51Z",
        "merged_at": "2020-01-05T21:25:51Z",
        "body": "Following on from @whummer's PR: https://github.com/localstack/localstack/pull/1839\r\n\r\nPulls in the binaries from the official local-kms repo. The URL will always return the latest stable tag of v3. Ensures new features (e.g. https://github.com/nsmithuk/local-kms/issues/12) are incorporated into localstack. Locking it to MAJOR version 3 ensures no backward breaking changes will be introduced.\r\n\r\nLocalstack has been given its own subfolder to allow for its naming convention: `local-kms.<arch>.bin`.\r\n\r\nAt present there are 3 pre-compiled versions:\r\n* `local-kms.osx.bin`\r\n* `local-kms.linux.bin`\r\n* `local-kms.alpine.bin`\r\n\r\nlocal-kms now also prefers some of its environment variables to be prefixed with `KMS_`.\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 82,
        "deletions": 51,
        "changed_files": 4,
        "created_at": "2020-01-05T12:57:11Z",
        "closed_at": "2020-01-05T15:34:01Z",
        "merged_at": "2020-01-05T15:34:01Z",
        "body": "* Refactor util function for storing CloudWatch logs - create a reusable `store_cloudwatch_logs` function\r\n* Create simple `Boto3Session` class that wraps boto3 sessions with local endpoint URLs",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 56,
        "deletions": 2,
        "changed_files": 5,
        "created_at": "2020-01-04T15:48:02Z",
        "closed_at": "2020-01-04T17:36:46Z",
        "merged_at": "2020-01-04T17:36:46Z",
        "body": "Add support for nested CloudFormation stacks - fixes #1566",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 19,
        "deletions": 5,
        "changed_files": 3,
        "created_at": "2020-01-04T14:13:14Z",
        "closed_at": "2020-01-04T15:43:40Z",
        "merged_at": "2020-01-04T15:43:39Z",
        "body": "Fix S3 path layout for Firehose streams - fixes #1554",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 12,
        "deletions": 7,
        "changed_files": 2,
        "created_at": "2020-01-03T18:43:36Z",
        "closed_at": "2020-01-03T23:25:58Z",
        "merged_at": "2020-01-03T23:25:58Z",
        "body": "Extract command to start SFN into separate function.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 33,
        "deletions": 19,
        "changed_files": 3,
        "created_at": "2020-01-03T14:03:57Z",
        "closed_at": "2020-01-03T16:10:47Z",
        "merged_at": "2020-01-03T16:10:47Z",
        "body": "Skip unnecessary extraction of Java lambda archives - this can dramatically improve the performance of deploying large JAR files with lots of files contained.",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 7,
        "deletions": 3,
        "changed_files": 1,
        "created_at": "2020-01-02T10:53:49Z",
        "closed_at": "2020-01-02T12:23:03Z",
        "merged_at": "2020-01-02T12:23:02Z",
        "body": "Return CF stack events for deleted stacks - should fix https://github.com/localstack/serverless-localstack/issues/35",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 120,
        "deletions": 17,
        "changed_files": 8,
        "created_at": "2019-12-30T22:32:03Z",
        "closed_at": "2020-01-03T17:07:39Z",
        "merged_at": "2020-01-03T17:07:39Z",
        "body": "adds localstack.utils.TaggingService, implements TaggingService for CloudWatch Events\r\n\r\n**Please refer to the contribution guidelines in the README when submitting PRs.**",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 6,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2019-12-27T19:45:22Z",
        "closed_at": "2019-12-30T17:39:35Z",
        "merged_at": "2019-12-30T17:39:35Z",
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 3,
        "changed_files": 2,
        "created_at": "2019-12-26T22:46:06Z",
        "closed_at": "2019-12-27T15:25:50Z",
        "merged_at": "2019-12-27T15:25:49Z",
        "body": "* Remove dev dependencies from prod package - fixes #1323",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 6,
        "deletions": 9,
        "changed_files": 3,
        "created_at": "2019-12-24T09:23:40Z",
        "closed_at": "2019-12-24T14:02:39Z",
        "merged_at": "2019-12-24T14:02:39Z",
        "body": "Increase Java docker timeout for image pulls - fixes #1456",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 48,
        "deletions": 4,
        "changed_files": 2,
        "created_at": "2019-12-23T11:49:58Z",
        "closed_at": "2019-12-23T14:10:46Z",
        "merged_at": "2019-12-23T14:10:46Z",
        "body": "* Fix routes for DynamoDB shell - fixes #1803\r\n* Add Java test for S3 presigned object upload - fixes #1396",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 174,
        "deletions": 29,
        "changed_files": 10,
        "created_at": "2019-12-22T23:02:56Z",
        "closed_at": "2019-12-23T11:11:24Z",
        "merged_at": "2019-12-23T11:11:24Z",
        "body": "Support dead letter queues for Lambdas and SQS queues - fixes #988, fixes #1886",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2019-12-22T12:42:04Z",
        "closed_at": "2019-12-23T22:59:27Z",
        "merged_at": "2019-12-23T22:59:27Z",
        "body": "",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 22,
        "deletions": 29,
        "changed_files": 2,
        "created_at": "2019-12-21T13:12:51Z",
        "closed_at": "2019-12-21T14:22:16Z",
        "merged_at": "2019-12-21T14:22:16Z",
        "body": "* Update documentation around Java/JUnit test runner\r\n* Remove static Elasticsearch endpoint from documentation; re-add dependency between `es`<>`elasticsearch` service ports",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 81,
        "deletions": 20,
        "changed_files": 4,
        "created_at": "2019-12-21T09:02:46Z",
        "closed_at": "2019-12-21T12:40:18Z",
        "merged_at": "2019-12-21T12:40:17Z",
        "body": "* Fix issue and add test for S3 `listNextBatchOfObjects` - addresses #1061\r\n* Fix S3 delete-objects for non-existing keys - fixes #1893",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 144,
        "deletions": 6,
        "changed_files": 2,
        "created_at": "2019-12-19T18:04:48Z",
        "closed_at": "2019-12-20T19:57:15Z",
        "merged_at": "2019-12-20T19:57:15Z",
        "body": "Addresses https://github.com/localstack/localstack/issues/1883\r\n\r\nRather than trying to pre-determine whether or not a given string is json-encoded based on the first character, simply give it a try, and assume that raised errors imply it was not.\r\n\r\n- [x] Add tests for any new features and bug fixes. Ideally, each PR should increase the test coverage.\r\n- [x] Follow the existing code style (e.g., indents). A PEP8 code linting target is included in the Makefile.\r\n- [x] Put a reasonable amount of comments into the code.\r\n- [x] Separate unrelated changes into multiple pull requests.\r\n- [ ] 1 commit per PR: Please squash/rebase multiple commits into one single commit (to keep the history clean).",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2019-12-17T02:11:54Z",
        "closed_at": "2019-12-17T10:51:25Z",
        "merged_at": "2019-12-17T10:51:25Z",
        "body": "Currently, when attempting to [execute workflow from task](https://docs.aws.amazon.com/step-functions/latest/dg/concepts-nested-workflows.html), I get this error: {\"Type\":\"TaskFailed\",\"PreviousEventId\":6,\"TaskFailedEventDetails\":{\"ResourceType\":\"states\",\"Resource\":\"startExecution.sync\",\"Error\":\"StepFunctions-AWSStepFunctionsException\",\"Cause\":\"The security token included in the request is invalid. (Service: AWSStepFunctions; Status Code: 400; Error Code: UnrecognizedClientException; Request ID: 1a9d805b-55af-4bf3-8515-4bf49e4f81e3)\"}}\r\n\r\nThis PR exposes the `--step-functions-endpoint` flag that was added to the jar but not documented properly in the AWS docs.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2019-12-16T21:44:32Z",
        "closed_at": "2019-12-17T23:04:01Z",
        "merged_at": "2019-12-17T23:04:01Z",
        "body": "The objective of this PR is to add content-length header to success_action_status response because it sends an empty response if that header has no value.\r\n\r\nThis is related to https://github.com/localstack/localstack/pull/1849",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 126,
        "deletions": 99,
        "changed_files": 5,
        "created_at": "2019-12-15T11:27:43Z",
        "closed_at": "2019-12-15T20:21:16Z",
        "merged_at": "2019-12-15T20:21:16Z",
        "body": "Lazily start up Elasticsearch instance on ES domain creation. This helps to significantly speed up startup time and reduce memory consumption for the default configuration.",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 151,
        "deletions": 41,
        "changed_files": 14,
        "created_at": "2019-12-14T16:09:22Z",
        "closed_at": "2019-12-16T01:52:16Z",
        "merged_at": "2019-12-16T01:52:15Z",
        "body": "* Fix deletion of S3 object tags - fixes #1083\r\n* Fix S3 results for max-keys=0 - fixes #919\r\n* Bump version of moto\r\n   - fixes #1828 (multi-byte character encoding for CW logs)\r\n   - fixes #1390 (add missing regions for CloudFormation)",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 21,
        "deletions": 6,
        "changed_files": 1,
        "created_at": "2019-12-12T15:54:05Z",
        "closed_at": "2019-12-14T11:49:11Z",
        "merged_at": "2019-12-14T11:49:11Z",
        "body": "After the PR https://github.com/lambci/docker-lambda/pull/218 we got the issue #1777. This PR is to try to solve this.\r\n\r\n* Defining a new value to DOCKER_LAMBDA_API_PORT and DOCKER_LAMBDA_RUNTIME_PORT port on each lambda container execution when network mode `host`.",
        "comments": 6
    },
    {
        "merged": true,
        "additions": 40,
        "deletions": 30,
        "changed_files": 5,
        "created_at": "2019-12-12T10:15:20Z",
        "closed_at": "2019-12-12T12:11:33Z",
        "merged_at": "2019-12-12T12:11:33Z",
        "body": "* Release version 0.10.6\r\n* Fix plugin import warnings",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 70,
        "deletions": 23,
        "changed_files": 7,
        "created_at": "2019-12-11T22:38:14Z",
        "closed_at": "2019-12-12T01:57:08Z",
        "merged_at": "2019-12-12T01:57:07Z",
        "body": "* Add LAMBDA_REMOVE_CONTAINERS config - fixes #1851\r\n* Enhance StepFunctions tests - addresses #1854",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2019-12-11T14:02:52Z",
        "closed_at": "2019-12-11T20:38:04Z",
        "merged_at": "2019-12-11T20:38:04Z",
        "body": "This PR is to improve the changes made on https://github.com/localstack/localstack/pull/1771 that has changed the lambda executors to add the prefix `20191117-` to the image. \r\n\r\nAs it says that this change is necessary to dotnetcore/python lambdas images, I added a check to add the prefix only to these images.",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 24,
        "deletions": 4,
        "changed_files": 4,
        "created_at": "2019-12-11T01:45:38Z",
        "closed_at": "2019-12-12T23:59:25Z",
        "merged_at": "2019-12-12T23:59:25Z",
        "body": "This PR is about adding an optional flag to use a singleton docker container instead of start/stop Localstack container for each test class\r\n\r\nI agree to the contributor license agreement",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 64,
        "deletions": 23,
        "changed_files": 7,
        "created_at": "2019-12-09T23:04:07Z",
        "closed_at": "2019-12-10T22:28:54Z",
        "merged_at": "2019-12-10T22:28:54Z",
        "body": "Fix MD5 hash of SQS message attributes - addresses #1841",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 52,
        "deletions": 18,
        "changed_files": 3,
        "created_at": "2019-12-09T17:54:01Z",
        "closed_at": "2019-12-11T20:31:31Z",
        "merged_at": "2019-12-11T20:31:31Z",
        "body": "My attempt to fix https://github.com/localstack/localstack/issues/1302\r\nI agree to the contributor license agreement\r\n\r\n",
        "comments": 4
    },
    {
        "merged": false,
        "additions": 44,
        "deletions": 4,
        "changed_files": 4,
        "created_at": "2019-12-09T15:51:59Z",
        "closed_at": "2019-12-12T08:48:58Z",
        "merged_at": null,
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 12,
        "deletions": 3,
        "changed_files": 1,
        "created_at": "2019-12-08T19:10:59Z",
        "closed_at": "2019-12-08T21:15:24Z",
        "merged_at": "2019-12-08T21:15:24Z",
        "body": "Update certificate generation to satisfy new requirements in MacOS Catalina - see https://support.apple.com/en-us/HT210176",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 91,
        "deletions": 32,
        "changed_files": 9,
        "created_at": "2019-12-08T14:42:19Z",
        "closed_at": "2019-12-08T17:01:05Z",
        "merged_at": "2019-12-08T17:01:05Z",
        "body": "Fix Docker port mapping for JUnit test runner - fixes #1198 .\r\n\r\nThis PR ensures that the Docker ports are correctly exposed when using the `services` configuration in `LocalstackDockerProperties` (e.g., port `12345` in the example below):\r\n```\r\n@RunWith(LocalstackTestRunner.class)\r\n@ExtendWith(LocalstackDockerExtension.class)\r\n@LocalstackDockerProperties(randomizePorts = false, services = { \"sqs:12345\" })\r\npublic class PortBindingTest {\r\n...\r\n```",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 107,
        "deletions": 5,
        "changed_files": 7,
        "created_at": "2019-12-08T09:58:14Z",
        "closed_at": "2019-12-08T16:59:09Z",
        "merged_at": "2019-12-08T16:59:09Z",
        "body": "* Add test for CW logs multi-byte message - addresses #1828 \r\n* Allow trailing slashes in Elasticsearch API requests - fixes #1139\r\n* Add basic tests for CloudWatch - addresses #1123",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1116,
        "deletions": 835,
        "changed_files": 29,
        "created_at": "2019-12-07T23:04:40Z",
        "closed_at": "2019-12-08T08:56:39Z",
        "merged_at": "2019-12-08T08:56:39Z",
        "body": "* Refactor Java libs\r\n* Make Docker the default executor - JUnit runner that installs LocalStack on the host (outside Docker) is now deprecated\r\n* Release new version 0.2.0 of the Java libs in Maven",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 128,
        "deletions": 46,
        "changed_files": 9,
        "created_at": "2019-12-07T14:29:19Z",
        "closed_at": "2019-12-07T16:11:09Z",
        "merged_at": "2019-12-07T16:11:09Z",
        "body": "Add initial support for KMS - addresses #206 .\r\n\r\nThis implementation is currently based on the wonderful [`local-kms` library](https://github.com/nsmithuk/local-kms), with pre-built binaries published here: https://github.com/localstack/localstack-artifacts/tree/master/local-kms\r\n\r\nNote that moto has recently also added initial [support for KMS](https://github.com/spulec/moto/blob/master/IMPLEMENTATION_COVERAGE.md#kms), so we may want to consider switching to their implementation at some point, depending on API method coverage.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2019-12-07T11:04:31Z",
        "closed_at": "2019-12-07T14:23:43Z",
        "merged_at": "2019-12-07T14:23:43Z",
        "body": "* Add missing Lambdas attribute to fix terraform deployment - should fix #1822",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 17,
        "deletions": 2,
        "changed_files": 5,
        "created_at": "2019-12-07T07:03:39Z",
        "closed_at": "2019-12-09T03:49:17Z",
        "merged_at": null,
        "body": "Hey @whummer, here is a follow-up PR for #1525 adding the following:\r\n\r\n* Kept Commandeer under Other UI Clients as a third-party tool.\r\n* Added LocalStack Start/Stop/Install capabilities.\r\n* Added a couple of small screenshots of how it looks.\r\n\r\nThanks,\r\nAlex",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 96,
        "deletions": 10,
        "changed_files": 6,
        "created_at": "2019-12-05T10:16:51Z",
        "closed_at": "2019-12-09T13:43:30Z",
        "merged_at": "2019-12-09T13:43:30Z",
        "body": "The previous implementation of EventBridge (CloudWatch events) was so basic that `put_events` didn't even respond in the correct format and had no way of asserting against emitted events. Since we want to use localstack in our system tests, we needed it to respond in the format specified in AWS docs and also give us some way to assert against the events that had been raised.\r\n\r\nThis PR provides an implementation solving those two problems. `put_events` now responds with an array of event-ids, just like real AWS does. Also it puts the events it receives into a temporary directory to assert against. The file name represents the event-id and the content of the file is the payload of the event.\r\n\r\nI hope this is good enough as an extension to current functionality. I'm aware that this is still far off from proper cw-event support, but it at least makes it possible to test event emission and assert against the raised events.",
        "comments": 6
    },
    {
        "merged": true,
        "additions": 68,
        "deletions": 21,
        "changed_files": 5,
        "created_at": "2019-12-04T23:41:55Z",
        "closed_at": "2019-12-06T10:46:01Z",
        "merged_at": "2019-12-06T10:46:01Z",
        "body": "* Fix API to retrieve list of API Gateway authorizers \r\n* Add test for stack name in CloudFormation resource names",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 40,
        "deletions": 17,
        "changed_files": 4,
        "created_at": "2019-12-02T23:20:54Z",
        "closed_at": "2019-12-03T01:00:06Z",
        "merged_at": "2019-12-03T01:00:06Z",
        "body": "Enhance proxy to transparently accept both HTTP/HTTPS - addresses #1245",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 36,
        "deletions": 0,
        "changed_files": 3,
        "created_at": "2019-12-02T00:04:45Z",
        "closed_at": "2019-12-02T09:59:21Z",
        "merged_at": "2019-12-02T09:59:21Z",
        "body": "Proposed fix for Issue #1811.\r\n\r\n1. Adds `@synchronized` decorator to provide thread-based locking support\r\n1. Added `@synchronized` around `common.generate_ssl_cert`\r\n\r\n- [x] Add tests for any new features and bug fixes. Ideally, each PR should increase the test coverage.\r\n- [x] Follow the existing code style (e.g., indents). A PEP8 code linting target is included in the Makefile.\r\n- [x] Put a reasonable amount of comments into the code.\r\n- [x] Separate unrelated changes into multiple pull requests.\r\n- [ ] 1 commit per PR: Please squash/rebase multiple commits into one single commit (to keep the history clean).\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 49,
        "deletions": 55,
        "changed_files": 3,
        "created_at": "2019-12-01T17:07:14Z",
        "closed_at": "2019-12-01T18:58:28Z",
        "merged_at": "2019-12-01T18:58:28Z",
        "body": "Allow Java Lambdas with code provided in multiple JAR files embedded in a ZIP file - fixes #385",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 117,
        "deletions": 51,
        "changed_files": 7,
        "created_at": "2019-11-29T11:44:37Z",
        "closed_at": "2019-12-01T16:09:26Z",
        "merged_at": "2019-12-01T16:09:26Z",
        "body": "* Fix classpath for Java lambdas - make sure to append the localstack-utils.jar at the end of the classpath. Addresses #1160\r\n* Fix S3 notification queue ARN - fixes #1216\r\n* Make Kinesis proxy resilient to empty requests - fixes #1597\r\n* Add initial support for Kinesis stream consumers - fixes #1159",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 22,
        "deletions": 2,
        "changed_files": 3,
        "created_at": "2019-11-28T22:56:28Z",
        "closed_at": "2019-11-29T00:52:47Z",
        "merged_at": "2019-11-29T00:52:47Z",
        "body": "* Minor fix for CF deployment of step functions\r\n* Fix DOCKER_HOST_FROM_CONTAINER configuration when running locally, outside of Docker\r\n* Fix issue with CF `describe_stack_events`",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 74,
        "deletions": 13,
        "changed_files": 3,
        "created_at": "2019-11-28T18:50:48Z",
        "closed_at": "2019-11-28T20:47:29Z",
        "merged_at": "2019-11-28T20:47:28Z",
        "body": "* Fix object ACLs for multipart uploads - fixes #1170\r\n* Avoid modifying XML files stored in S3 - fixes #1037",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 6,
        "deletions": 3,
        "changed_files": 2,
        "created_at": "2019-11-27T14:06:59Z",
        "closed_at": "2019-11-27T19:58:48Z",
        "merged_at": "2019-11-27T19:58:48Z",
        "body": "Fixed random statement id in order to use the provided by the requests #1788.\r\n\r\nUpdated tests and responses when the policies don't exists anymore.\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 47,
        "deletions": 19,
        "changed_files": 8,
        "created_at": "2019-11-26T22:59:09Z",
        "closed_at": "2019-11-27T07:51:18Z",
        "merged_at": "2019-11-27T07:51:18Z",
        "body": "* fix S3 bucket name validation - addresses #998\r\n* fix SQS startup health check - addresses #966",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 5,
        "changed_files": 3,
        "created_at": "2019-11-24T21:10:17Z",
        "closed_at": "2019-11-26T07:38:39Z",
        "merged_at": "2019-11-26T07:38:39Z",
        "body": "Minor fixes\r\n* Print stdout for Lambda errors - fixes #816\r\n* Clean up dependencies in `requirements.txt`",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 153,
        "deletions": 6,
        "changed_files": 11,
        "created_at": "2019-11-24T18:59:11Z",
        "closed_at": "2019-11-24T22:34:40Z",
        "merged_at": "2019-11-24T22:34:40Z",
        "body": "Supersedes #1795 - attempt to fix the Lambda executor for Docker-based execution",
        "comments": 3
    },
    {
        "merged": false,
        "additions": 27,
        "deletions": 17,
        "changed_files": 4,
        "created_at": "2019-11-24T03:25:20Z",
        "closed_at": "2020-06-19T18:14:56Z",
        "merged_at": null,
        "body": "Fix message attributes for SNS-to-SQS integration - addresses #1786",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 62,
        "deletions": 14,
        "changed_files": 5,
        "created_at": "2019-11-23T19:49:13Z",
        "closed_at": "2019-11-23T21:39:07Z",
        "merged_at": "2019-11-23T21:39:07Z",
        "body": "* fix permission issue for cert files - addresses #1743\r\n* fix non-JSON content types for API gateway - addresses #871\r\n* add priority flag to support plugin overriding",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 130,
        "deletions": 1,
        "changed_files": 10,
        "created_at": "2019-11-23T19:04:03Z",
        "closed_at": "2019-11-24T22:35:44Z",
        "merged_at": null,
        "body": "Added proposed fix for https://github.com/localstack/localstack/issues/913. \r\n\r\n1. `lambda_api.py` extracts the `lib` folder if it exists and places it alongside the `.jar`/`.zip`\r\n2. `lambda_request.py` adds `:lib/*` to the `-cp` argument to augment the classpath\r\n\r\n- [x] Add tests for any new features and bug fixes. Ideally, each PR should increase the test coverage.\r\n- [x] Follow the existing code style (e.g., indents). A PEP8 code linting target is included in the Makefile.\r\n- [x] Put a reasonable amount of comments into the code.\r\n- [x] Separate unrelated changes into multiple pull requests.\r\n- [x] 1 commit per PR: Please squash/rebase multiple commits into one single commit (to keep the history clean).\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 186,
        "deletions": 30,
        "changed_files": 4,
        "created_at": "2019-11-22T18:55:53Z",
        "closed_at": "2019-11-24T14:03:46Z",
        "merged_at": "2019-11-24T14:03:46Z",
        "body": "Api Gateway authorizer endpoints didn't work correctly and crashed terraform. Fixed in this PR. Additionally added PUT/DELETE methods.",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2019-11-21T11:28:41Z",
        "closed_at": "2019-11-21T17:04:16Z",
        "merged_at": "2019-11-21T17:04:16Z",
        "body": "Dockerfile has been updated to python 3.7 under commit https://github.com/localstack/localstack/commit/5d492fcab14e57b70a12195fce5edae49562531b\r\n\r\n**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 7,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2019-11-20T20:57:13Z",
        "closed_at": "2019-11-21T10:15:03Z",
        "merged_at": "2019-11-21T10:15:03Z",
        "body": "* Extend test for SQS delete message - addresses #468\r\n* Raise error for local Lambda mount in combination with `LAMBDA_REMOTE_DOCKER`",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 65,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2019-11-20T20:50:01Z",
        "closed_at": "2019-11-25T17:13:48Z",
        "merged_at": "2019-11-25T17:13:48Z",
        "body": "See #1734 for what this PR partially addresses (it handles the ErrorDocument functionality but not IndexDocument).\r\n\r\nThis adds emulation of S3's ErrorDocument website configuration. It should not change the behavior of a LocalStack S3 bucket that has no website configuration.",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 4,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2019-11-19T12:17:26Z",
        "closed_at": "2020-02-18T14:03:58Z",
        "merged_at": null,
        "body": "Attempt to fix https://github.com/localstack/localstack/issues/1774\r\n\r\nI agree to the contributor license agreement",
        "comments": 7
    },
    {
        "merged": true,
        "additions": 42,
        "deletions": 24,
        "changed_files": 4,
        "created_at": "2019-11-18T22:19:18Z",
        "closed_at": "2019-11-19T12:00:49Z",
        "merged_at": "2019-11-19T12:00:49Z",
        "body": "* Fix DynamoDB error for Put on non-existing table - should fix #789\r\n* Add `requests` as basic lib - should fix #1761\r\n* Fix UTC timestamps\r\n* Fix Lambda dotnetcore execution issues related to recent changes in lambci: https://github.com/lambci/docker-lambda/pull/218",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 5,
        "deletions": 4,
        "changed_files": 1,
        "created_at": "2019-11-16T15:57:36Z",
        "closed_at": "2019-11-16T17:31:07Z",
        "merged_at": "2019-11-16T17:31:07Z",
        "body": "Populate env variable names `CONFIG_ENV_VARS` in `populate_configs` function in config.py",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 123,
        "deletions": 7,
        "changed_files": 5,
        "created_at": "2019-11-16T00:35:07Z",
        "closed_at": "2019-11-16T12:10:14Z",
        "merged_at": "2019-11-16T12:10:14Z",
        "body": "Add SAM transformer to support cloudformation deployment for SAM resource. Should fix #632",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 48,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2019-11-14T19:13:25Z",
        "closed_at": "2019-11-15T17:13:28Z",
        "merged_at": "2019-11-15T17:13:28Z",
        "body": "Avoids matching on all prefixes but still matches on path prefixes.\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 389,
        "deletions": 330,
        "changed_files": 7,
        "created_at": "2019-11-13T20:39:27Z",
        "closed_at": "2019-11-13T22:51:23Z",
        "merged_at": "2019-11-13T22:51:22Z",
        "body": "* Fix SNS FilterPolicy configuration - fixes #684\r\n* Add kinesis/ListStreams API gateway integration - fixes #666\r\n* Don't delete ES data if DATA_DIR is configured",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2019-11-13T09:19:24Z",
        "closed_at": "2019-11-13T13:45:53Z",
        "merged_at": "2019-11-13T13:45:53Z",
        "body": "Fixes #1751 and #1753",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2019-11-11T13:09:36Z",
        "closed_at": "2019-11-11T21:31:55Z",
        "merged_at": "2019-11-11T21:31:55Z",
        "body": "ref: https://github.com/localstack/localstack/issues/1619\r\nref: https://github.com/localstack/localstack/pull/1652\r\n\r\n#1652 fixed the bug and upgrade the version of elasticmq in python code.\r\nBut in docker, the old version is used.\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 65,
        "deletions": 18,
        "changed_files": 4,
        "created_at": "2019-11-10T13:17:18Z",
        "closed_at": "2019-11-11T09:23:11Z",
        "merged_at": "2019-11-11T09:23:11Z",
        "body": "Fixes #1553\r\nUses kinesalite `3.2.0` with implemented `DescribeStreamSummary` method",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 43,
        "deletions": 3,
        "changed_files": 2,
        "created_at": "2019-11-09T12:16:33Z",
        "closed_at": "2019-11-09T15:27:49Z",
        "merged_at": "2019-11-09T15:27:49Z",
        "body": "Fix passing of metadata on S3 presigned URL put - addresses #544",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 39,
        "deletions": 3,
        "changed_files": 4,
        "created_at": "2019-11-08T20:58:53Z",
        "closed_at": "2019-11-08T22:46:50Z",
        "merged_at": "2019-11-08T22:46:50Z",
        "body": "* Support TemplateURL for ValidateTemplate API - fixes #660\r\n* Support Marker argument for S3 list-objects  - fixes #636\r\n* Overwrite default region in SNS request headers - fixes #731",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 10,
        "deletions": 3,
        "changed_files": 5,
        "created_at": "2019-11-06T22:38:21Z",
        "closed_at": "2019-11-07T00:00:48Z",
        "merged_at": "2019-11-07T00:00:48Z",
        "body": "* Fix CF deployment of API Gateway method integrations - fixes #1727\r\n* Fix passing of `TEST_AWS_ACCOUNT_ID` to Docker container - should fix #1728\r\n* Release version 0.10.5 ",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2019-11-05T21:47:19Z",
        "closed_at": "2019-11-06T14:45:59Z",
        "merged_at": "2019-11-06T14:45:58Z",
        "body": "The pip install command mentioned in the README for localstack[full] will not work if simply copied and pasted on Linux and other systems.  Added quotes to the command to make this easier to copy and paste.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 6,
        "deletions": 3,
        "changed_files": 1,
        "created_at": "2019-11-05T14:20:25Z",
        "closed_at": "2019-11-05T16:00:45Z",
        "merged_at": "2019-11-05T16:00:44Z",
        "body": "Fix CloudFormation deployer to properly skip resource updates. \r\n\r\nFixes an issue where CF keeps retrying to deploy resources, even if they already exist and are not requested for updating.\r\n\r\nFixes #1677",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 26,
        "deletions": 11,
        "changed_files": 4,
        "created_at": "2019-11-05T06:05:52Z",
        "closed_at": "2019-11-06T14:34:01Z",
        "merged_at": "2019-11-06T14:34:01Z",
        "body": "This adds support for Lambda executor docker registries other than `lambci/lambda` for cases where public docker hub is not accessible and/or where hardened images are in use.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 64,
        "deletions": 32,
        "changed_files": 4,
        "created_at": "2019-11-04T09:12:29Z",
        "closed_at": "2019-11-04T23:00:49Z",
        "merged_at": "2019-11-04T23:00:49Z",
        "body": "* Minor fix in CF deployment (resolve references in Lambda function props)\r\n* Minor fix in Lambda runner (allow non-UTF bytes in output)",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 21,
        "deletions": 27,
        "changed_files": 3,
        "created_at": "2019-11-02T21:00:25Z",
        "closed_at": "2019-11-02T22:16:27Z",
        "merged_at": "2019-11-02T22:16:27Z",
        "body": "Fix encoding of non-ASCII results from API Gateway",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 50,
        "deletions": 24,
        "changed_files": 4,
        "created_at": "2019-11-02T15:09:43Z",
        "closed_at": "2019-11-02T18:09:52Z",
        "merged_at": "2019-11-02T18:09:51Z",
        "body": "Fix lookup of Python Lambda handler in sub directories.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 21,
        "deletions": 14,
        "changed_files": 1,
        "created_at": "2019-11-01T15:41:28Z",
        "closed_at": "2019-11-02T22:16:12Z",
        "merged_at": "2019-11-02T22:16:12Z",
        "body": "Added mount flags if DOCKER_REMOTE=\"false\" for LAMBDA_EXECUTOR=\"docker-reuse\" to prevent expensive copying on each invocation",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2019-10-31T20:52:42Z",
        "closed_at": "2019-11-01T00:22:25Z",
        "merged_at": "2019-11-01T00:22:24Z",
        "body": "When the persistence is enabled, the Kinesis mock service crash with the follow stacktrace \r\n```\r\nStarting mock Kinesis (http port 4568)...\r\ninternal/modules/cjs/loader.js:797\r\nthrow err;\r\n^\r\n\r\nError: Cannot find module 'leveldown'\r\nRequire stack:\r\n- /opt/code/localstack/localstack/node_modules/kinesalite/db/index.js\r\n- /opt/code/localstack/localstack/node_modules/kinesalite/index.js\r\n- /opt/code/localstack/localstack/node_modules/kinesalite/cli.js\r\nat Function.Module._resolveFilename (internal/modules/cjs/loader.js:794:15)\r\nat Function.Module._load (internal/modules/cjs/loader.js:687:27)\r\nat Module.require (internal/modules/cjs/loader.js:849:19)\r\nat require (internal/modules/cjs/helpers.js:74:18)\r\nat Object.create (/opt/code/localstack/localstack/node_modules/kinesalite/db/index.js:31:35)\r\nat kinesalite (/opt/code/localstack/localstack/node_modules/kinesalite/index.js:24:26)\r\nat Object.<anonymous> (/opt/code/localstack/localstack/node_modules/kinesalite/cli.js:29:35)\r\nat Module._compile (internal/modules/cjs/loader.js:956:30)\r\nat Object.Module._extensions..js (internal/modules/cjs/loader.js:973:10)\r\nat Module.load (internal/modules/cjs/loader.js:812:32) {\r\ncode: 'MODULE_NOT_FOUND',\r\nrequireStack: [\r\n'/opt/code/localstack/localstack/node_modules/kinesalite/db/index.js',\r\n'/opt/code/localstack/localstack/node_modules/kinesalite/index.js',\r\n'/opt/code/localstack/localstack/node_modules/kinesalite/cli.js'\r\n]\r\n}\r\n```\r\n\r\nPotentially caused by an incompatibility with the most recent version of NPM and the leveldown module mhart/kinesalite#27 .\r\n\r\nUpgrade to the v3.1.0 mhart/kinesalite@2afcafc3ec9132bb942e3e0322a15049d71d0ef7 solves the issue.\r\n\r\nResolves #1003 #918 #1689 #771\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 74,
        "deletions": 27,
        "changed_files": 5,
        "created_at": "2019-10-31T18:36:30Z",
        "closed_at": "2019-10-31T19:39:55Z",
        "merged_at": "2019-10-31T19:39:54Z",
        "body": "Add API to remove lambda permissions - should fix #1707",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2019-10-29T18:15:38Z",
        "closed_at": "2019-10-30T10:24:15Z",
        "merged_at": "2019-10-30T10:24:15Z",
        "body": "This reproduces #1629. Maybe I'll go and try fixing it myself, but anyone is welcome to have a pop...",
        "comments": 5
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2019-10-29T00:34:36Z",
        "closed_at": "2019-10-29T19:24:09Z",
        "merged_at": "2019-10-29T19:24:09Z",
        "body": "Addresses #1113\r\n\r\nBasically allow for the container to have a name when it is launched.  Is it defined as an environment variable.  The `.env` file is there as according to the documentation here: https://docs.docker.com/compose/environment-variables/\r\n\r\nVariables listed in the `.env` file can be read in when the user runs `docker-compose up`\r\n\r\nThe last change made is that there is a newer spec for compose files which is shown here: \r\nhttps://docs.docker.com/compose/compose-file/#variable-substitution\r\n\r\nSo I went ahead and updated the specs for the docker-compose file to a later version\r\n\r\nSigned-off-by: Zuhayr Elahi <elahi.zuhayr@gmail.com>\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 69,
        "deletions": 6,
        "changed_files": 3,
        "created_at": "2019-10-28T19:52:35Z",
        "closed_at": "2019-10-28T23:04:29Z",
        "merged_at": "2019-10-28T23:04:29Z",
        "body": "Support adding lambda policies - fixes #1260",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 140,
        "deletions": 24,
        "changed_files": 8,
        "created_at": "2019-10-27T17:28:28Z",
        "closed_at": "2019-10-27T18:43:45Z",
        "merged_at": "2019-10-27T18:43:45Z",
        "body": "* Add CloudFormation support for `ApiGateway::GatewayResponse` (fixes #1675)\r\n* Fix error handling on duplicate creation of log groups (should fix #1686)",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 19,
        "deletions": 4,
        "changed_files": 3,
        "created_at": "2019-10-26T13:07:37Z",
        "closed_at": "2019-10-26T16:52:39Z",
        "merged_at": "2019-10-26T16:52:39Z",
        "body": "Minor refactoring in CF logic:\r\n* make `describe_stack_resource` more resilient to errors\r\n* make `parameters` optional in resource definition, default to plain parameters dict",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 6,
        "deletions": 5,
        "changed_files": 2,
        "created_at": "2019-10-25T23:07:13Z",
        "closed_at": "2019-10-26T08:48:31Z",
        "merged_at": "2019-10-26T08:48:31Z",
        "body": "* Fix duplicate CORS headers (fixes #1612)\r\n* Fix passing of path in `recurse_object` util function",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 20,
        "deletions": 16,
        "changed_files": 3,
        "created_at": "2019-10-24T20:58:05Z",
        "closed_at": "2019-10-24T22:46:57Z",
        "merged_at": "2019-10-24T22:46:57Z",
        "body": "* fix regression with CF resource creation - fixes #1677, fixes #1682\r\n* add simple test for lambda env vars - fixes #681",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 32,
        "deletions": 6,
        "changed_files": 2,
        "created_at": "2019-10-23T18:56:16Z",
        "closed_at": "2019-10-23T21:58:40Z",
        "merged_at": "2019-10-23T21:58:40Z",
        "body": "* Add CF support for Events::Rule\r\n* Fix hanging tests in Travis-CI",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2019-10-23T18:27:55Z",
        "closed_at": "2019-10-23T21:18:54Z",
        "merged_at": "2019-10-23T21:18:54Z",
        "body": "I noticed that lambda deployment fails if the file path to the code has any spaces in it (When deploying without mounting flag enabled). I've found the error and added the fix.\r\n\r\nIt was missing quotes around the file path. I didn't think tests for this was necessary.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 8,
        "deletions": 4,
        "changed_files": 3,
        "created_at": "2019-10-22T23:08:23Z",
        "closed_at": "2019-10-23T07:46:10Z",
        "merged_at": "2019-10-23T07:46:09Z",
        "body": "* Fix SNS x-amz-sns-message-type (fixes #881)\r\n* Fix S3 content type (fixes #854)",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 9,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2019-10-22T03:18:08Z",
        "closed_at": "2019-10-22T07:29:05Z",
        "merged_at": "2019-10-22T07:29:05Z",
        "body": "Currently calls like \r\n\r\n```\r\nawslocal sns publish \\\r\n  --target-arn \"arn:aws:sns:us-east-1:000000000000:endpoint/APNS/abc/0f7d5971-aa8b-4bd5-b585-0826e9f93a66\" \\\r\n  --message \"Hello world\"\r\n```\r\n\r\ndo not work, and give the error \"Topic not found\". The SNS docs state that only one of topic, target or phone number is required. This change means they'd be silently handled in the same way as SMS messages currently are, as per #1369  ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 62,
        "deletions": 38,
        "changed_files": 5,
        "created_at": "2019-10-21T22:20:59Z",
        "closed_at": "2019-10-22T11:07:18Z",
        "merged_at": "2019-10-22T11:07:18Z",
        "body": "Fixes #881",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 52,
        "deletions": 33,
        "changed_files": 8,
        "created_at": "2019-10-20T13:56:27Z",
        "closed_at": "2019-10-21T00:34:44Z",
        "merged_at": "2019-10-21T00:34:44Z",
        "body": "* Fix DynamoDB local libs (currently breaking builds on `master`)\r\n* Minor update to dashboard - add deprecation notice\r\n* Small fix in CloudFormation update for Lambda function code",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 63,
        "deletions": 9,
        "changed_files": 8,
        "created_at": "2019-10-19T19:57:11Z",
        "closed_at": "2019-10-19T22:50:36Z",
        "merged_at": "2019-10-19T22:50:36Z",
        "body": "* add CF support for SNS subscriptions (fixes #1191)\r\n* fix CF parsing of `!Ref` and `!GetAtt`",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2019-10-19T19:07:19Z",
        "closed_at": "2019-10-19T20:33:36Z",
        "merged_at": "2019-10-19T20:33:36Z",
        "body": "Fixed firehose put-record-batch to return 'RequestResponses' as list of maps with 'RecordId' as a uuid4 similar to put-record\r\n\r\nI couldn't find how to test this properly from your other test files, if you have any pointers to add a test for this let me know.",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 10,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2019-10-16T15:46:00Z",
        "closed_at": "2019-10-17T09:57:39Z",
        "merged_at": null,
        "body": "ref: https://github.com/localstack/localstack/pull/1652\r\nsee: https://github.com/softwaremill/elasticmq/pull/298\r\n\r\nAs you can see, \r\nhttps://travis-ci.org/localstack/localstack/builds/598668449#L1315\r\n`EventSourceArn` is set `arn:aws:sqs:us-east-1:000000000:test_lambda_queue`\r\n\r\nBut actually it requires `arn:aws:sqs:us-east-1:000000000000:test_lambda_queue`\r\nhttps://travis-ci.org/localstack/localstack/builds/598668449#L1558\r\n\r\nIn this change, overrides accountId because elasticmq 0.14.15 ~ behaves as accountId: 000000000.\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 36,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2019-10-15T11:41:48Z",
        "closed_at": "2019-10-17T22:06:23Z",
        "merged_at": "2019-10-17T22:06:23Z",
        "body": "Fix: https://github.com/localstack/localstack/issues/1619\r\n\r\nSee: https://github.com/softwaremill/elasticmq/pull/294\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 132,
        "deletions": 122,
        "changed_files": 2,
        "created_at": "2019-10-14T23:17:29Z",
        "closed_at": "2019-10-15T09:20:34Z",
        "merged_at": "2019-10-15T09:20:34Z",
        "body": "* Minor refactoring to extract API GW invocation into separate function\r\n* Fix pip installation which currently breaks CI builds",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 31,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2019-10-14T19:01:14Z",
        "closed_at": "2019-10-15T12:19:15Z",
        "merged_at": "2019-10-15T12:19:15Z",
        "body": "Fixes https://github.com/localstack/localstack/issues/933",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 23,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2019-10-09T20:18:40Z",
        "closed_at": "2020-02-29T12:45:28Z",
        "merged_at": "2020-02-29T12:45:28Z",
        "body": "Fixes #1225 and #945",
        "comments": 6
    },
    {
        "merged": true,
        "additions": 58,
        "deletions": 49,
        "changed_files": 3,
        "created_at": "2019-10-09T20:14:28Z",
        "closed_at": "2019-10-10T15:57:25Z",
        "merged_at": "2019-10-10T15:57:25Z",
        "body": "Fixes #1225 and #945 \r\n",
        "comments": 5
    },
    {
        "merged": true,
        "additions": 59,
        "deletions": 27,
        "changed_files": 2,
        "created_at": "2019-10-08T23:00:04Z",
        "closed_at": "2019-10-10T11:11:08Z",
        "merged_at": "2019-10-10T11:11:07Z",
        "body": "This is an attempt to help fix this issue https://github.com/localstack/localstack/issues/1596 raised by @vballa whenever an SQS -> Lambda is triggered by previously it was erroring in the md5 hashing the response. This would only ever happen if an event source with a lambda was setup for the GW -> SQS -> lambda. \r\n\r\nThe reason for this was that there was no \"data\" body for GET requests meaning that data in https://github.com/localstack/localstack/blob/e65705a6ebf93ed7fbb05b690ebeb2c9c4aa88ae/localstack/services/sqs/sqs_listener.py#L52 was None and therefore throwing an exception when trying to hash.\r\n\r\nWe could have fixed it by remapping the query params in the [forward_request](\r\nhttps://github.com/localstack/localstack/blob/e65705a6ebf93ed7fbb05b690ebeb2c9c4aa88ae/localstack/services/sqs/sqs_listener.py#L69-L76) to data and passing that, however it felt more natural that this should correctly be a POST request as its creating a resource even though AWS docs support GET with query params.\r\n\r\nTo validate that the change was covered, we needed to expand on the existing test by creating an event source and lamdbda for the SQS event, so that it correctly triggered the sqs flows from the API gateway setup, because without the event source when this line was called\r\n\r\nhttps://github.com/localstack/localstack/blob/e65705a6ebf93ed7fbb05b690ebeb2c9c4aa88ae/localstack/services/sqs/sqs_listener.py#L236\r\n\r\nand hit the below function it wasn't triggered any lambda and therefore just returning\r\n\r\nhttps://github.com/localstack/localstack/blob/e65705a6ebf93ed7fbb05b690ebeb2c9c4aa88ae/localstack/services/awslambda/lambda_api.py#L246-L253\r\n\r\nI kept the original test as it also provides value in itself as well\r\n\r\nAny feedback appreciated and thanks for maintaining this project",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2019-10-08T19:46:25Z",
        "closed_at": "2019-10-08T20:51:54Z",
        "merged_at": "2019-10-08T20:51:54Z",
        "body": "Updates `README.md` to include code formatting around `/docker-entrypoint-initaws.d`\r\n\r\n- [x] **Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 6,
        "deletions": 10,
        "changed_files": 2,
        "created_at": "2019-10-07T11:24:55Z",
        "closed_at": "2019-10-07T15:02:26Z",
        "merged_at": "2019-10-07T15:02:26Z",
        "body": "minor fix required for installation of plugins (setting `LOCALSTACK_INFRA_PROCESS` env variable when installing dependencies)",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 33,
        "deletions": 17,
        "changed_files": 6,
        "created_at": "2019-10-06T20:28:52Z",
        "closed_at": "2019-10-07T11:11:15Z",
        "merged_at": "2019-10-07T11:11:15Z",
        "body": "Add bat script and support running under Windows",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 13,
        "deletions": 3,
        "changed_files": 3,
        "created_at": "2019-10-06T10:47:48Z",
        "closed_at": "2019-10-06T15:23:51Z",
        "merged_at": "2019-10-06T15:23:51Z",
        "body": "* fix S3 location constraint for CF (fixes #1622)\r\n* fix CF `StreamArn` attribute (fixes #1620)",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2019-10-05T13:24:00Z",
        "closed_at": "2019-10-05T19:04:12Z",
        "merged_at": "2019-10-05T19:04:12Z",
        "body": "Make setupInfrastructure public so tests can call the method when infrastructure is needed.\r\n\r\nCloses:\r\nhttps://github.com/localstack/localstack/issues/1615\r\n\r\n**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 157,
        "deletions": 95,
        "changed_files": 9,
        "created_at": "2019-10-05T12:10:10Z",
        "closed_at": "2019-10-05T17:19:19Z",
        "merged_at": "2019-10-05T17:19:19Z",
        "body": "* fix attributes for SQS queues addressed via URL (addresses #1551)\r\n* don't overwrite certificate file to avoid permission denied error (addresses #1607)",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2019-10-05T02:32:36Z",
        "closed_at": "2019-10-05T10:06:51Z",
        "merged_at": "2019-10-05T10:06:50Z",
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2019-10-05T02:17:34Z",
        "closed_at": "2019-10-05T10:08:12Z",
        "merged_at": "2019-10-05T10:08:12Z",
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 17,
        "deletions": 17,
        "changed_files": 1,
        "created_at": "2019-10-01T15:06:45Z",
        "closed_at": "2019-10-03T11:39:39Z",
        "merged_at": "2019-10-03T11:39:39Z",
        "body": "Fixes issue https://github.com/localstack/localstack/issues/1609",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 102,
        "deletions": 33,
        "changed_files": 10,
        "created_at": "2019-09-30T18:13:19Z",
        "closed_at": "2019-09-30T19:32:24Z",
        "merged_at": "2019-09-30T19:32:23Z",
        "body": "* Add checks for open UDP ports\r\n* Fix S3 chunked encoding uploads (addresses #1571)",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2019-09-29T12:41:52Z",
        "closed_at": "2019-10-01T19:57:24Z",
        "merged_at": "2019-10-01T19:57:23Z",
        "body": "Fixes #1604 \r\n\r\nlocalstack docker image is using python 3.6.8, latest fix for describe stream fixed the crash for python 2.7 and broke it for the docker image, the cause is #1605. This PR will roll it back because the docker image is reference.\r\n",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2019-09-28T17:29:57Z",
        "closed_at": "2019-09-29T20:38:06Z",
        "merged_at": "2019-09-29T20:38:06Z",
        "body": "Fix typo of **certificate** word in readme file.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2019-09-22T11:22:50Z",
        "closed_at": "2019-09-23T08:19:03Z",
        "merged_at": "2019-09-23T08:19:03Z",
        "body": "Fixes #1588 ",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 58,
        "deletions": 54,
        "changed_files": 7,
        "created_at": "2019-09-21T11:20:36Z",
        "closed_at": "2019-09-21T14:18:45Z",
        "merged_at": "2019-09-21T14:18:45Z",
        "body": "* set Java lambda debug port only when needed\r\n* fix CORS in proxy (addresses #1573)\r\n* allow customizing of certificate serial number\r\n* add `LOCALSTACK_WEB_PROCESS` env variable to flag the process running the Web UI",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 15,
        "deletions": 10,
        "changed_files": 3,
        "created_at": "2019-09-21T11:05:20Z",
        "closed_at": "2019-09-22T09:33:30Z",
        "merged_at": "2019-09-22T09:33:30Z",
        "body": "Fixes (#1540)\r\n\r\nAfter creating the dynamodb table with streams, or updating the table and enabling streams, StreamArn should be passed through to make stream definition in dynamodb streams uniform with dynamodb table definitions.\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2019-09-20T13:16:50Z",
        "closed_at": "2019-09-20T15:30:41Z",
        "merged_at": "2019-09-20T15:30:40Z",
        "body": "Fixes #1581 \u2014 only check that the qualifier exists for the lambda function if the lambda function exists in the first place.\r\n\r\nI couldn't find any tests around this to add to \u2014 any advice on how to test this would be very welcome!",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 52,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2019-09-19T23:18:36Z",
        "closed_at": "2019-09-20T20:03:54Z",
        "merged_at": "2019-09-20T20:03:54Z",
        "body": "This adds support for signed requests that include response header overrides.\r\n\r\nFixes #1203",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 11,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2019-09-19T16:28:53Z",
        "closed_at": "2019-09-20T15:54:57Z",
        "merged_at": "2019-09-20T15:54:57Z",
        "body": "This seems to be an official field on SNS messages\r\n\r\nSee https://docs.aws.amazon.com/en_pv/sns/latest/dg/sns-message-and-json-formats.html",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2019-09-17T12:10:29Z",
        "closed_at": "2019-09-18T15:07:28Z",
        "merged_at": "2019-09-18T15:07:28Z",
        "body": "the supervisord logfiles are touched but not cleared on container\r\nruntime which causes the scripts under `/docker-entrypoint-initaws.d/`\r\nto run prematurely. This will most likely fix #1494 , #1457 , and #1412.\r\n\r\nI'm not sure how much this impacts people on backward compatibility i.e. people using the supervisord logs directly instead of the containers logs.",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 20,
        "deletions": 13,
        "changed_files": 6,
        "created_at": "2019-09-14T22:25:44Z",
        "closed_at": "2019-09-15T10:23:15Z",
        "merged_at": "2019-09-15T10:23:15Z",
        "body": "* Fix Lambda docker command and imports\r\n* Replace `subprocess32-ext` with `subprocess32`",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2019-09-11T21:52:41Z",
        "closed_at": "2019-09-12T07:05:24Z",
        "merged_at": "2019-09-12T07:05:24Z",
        "body": "",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 41,
        "deletions": 5,
        "changed_files": 8,
        "created_at": "2019-09-09T07:53:48Z",
        "closed_at": "2019-09-09T09:43:42Z",
        "merged_at": "2019-09-09T09:43:42Z",
        "body": "* load plugins at component installation time\r\n* add a few more analytics events",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 93,
        "deletions": 64,
        "changed_files": 3,
        "created_at": "2019-09-07T19:59:26Z",
        "closed_at": "2019-09-08T10:51:20Z",
        "merged_at": "2019-09-08T10:51:20Z",
        "body": "* Allow specifying functions for CF resource params\r\n* Make `boto_client` parameter optional in CF",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 41,
        "deletions": 5,
        "changed_files": 2,
        "created_at": "2019-09-04T21:23:53Z",
        "closed_at": "2019-09-05T07:37:49Z",
        "merged_at": "2019-09-05T07:37:49Z",
        "body": "Fix ARN when looking up cloudformation resources.\r\n\r\nShould fix #1416",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 70,
        "deletions": 41,
        "changed_files": 17,
        "created_at": "2019-09-03T20:58:17Z",
        "closed_at": "2019-09-04T06:10:10Z",
        "merged_at": "2019-09-04T06:10:09Z",
        "body": "Allow specifying data types for CF attributes.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2019-09-03T05:05:22Z",
        "closed_at": "2019-09-03T16:41:26Z",
        "merged_at": "2019-09-03T16:41:26Z",
        "body": "The DynamoDB streams endpoint was throwing away NextShardIterator, making it impossible for continuation through iterator reuse.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2019-09-03T02:21:11Z",
        "closed_at": "2019-09-03T09:08:39Z",
        "merged_at": "2019-09-03T09:08:39Z",
        "body": "while trying to test my docker image for #1526 i ran into the issue supposedly fixed by #1469, but the same exception \"encoding without a string argument\" was happening. these tweaks made it work for me...",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 16,
        "deletions": 3,
        "changed_files": 3,
        "created_at": "2019-09-03T00:31:36Z",
        "closed_at": "2019-09-03T21:02:03Z",
        "merged_at": "2019-09-03T21:02:03Z",
        "body": "Ability to set two new environment variables (both of which default to values prior to this PR):\r\n\r\nKINESIS_SHARD_LIMIT\r\nKINESIS_LATENCY\r\n\r\nCan fix #1524 by setting (should this be the default setting?)\r\n\r\nKINESIS_SHARD_LIMIT=Infinity\r\n\r\nWhen using localstack in a test environment in which many streams are created/destroyed over time, the latency introduced by kinesalite defaults, arbitrarily increase execution time and the tests eventually hang after repeated use due to #1524.\r\n\r\nPossibly related issues (briefly reviewed some of the dialog in each):\r\n\r\n#1091\r\n#894\r\n#918\r\n#230\r\n#789\r\n#753\r\n#514\r\n\r\nFor those having issues with the references tickets, see if running my docker build solves your issues: `parisholley/localstack:latest`\r\n\r\nI haven't dug into, but I think the way the GeneralProxy is handling exceptions from the kinesalite endpoint is broken (and causing hangs/timeouts).",
        "comments": 4
    },
    {
        "merged": false,
        "additions": 8,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2019-09-02T22:54:40Z",
        "closed_at": "2019-10-10T18:34:49Z",
        "merged_at": null,
        "body": "Adding some instructions on installing LocalStack automatically from Commandeer. I created a separate folder for images. Let me know if you would like to keep the images used for documentation in the `doc` folder instead.",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 64,
        "deletions": 9,
        "changed_files": 4,
        "created_at": "2019-09-02T13:22:16Z",
        "closed_at": "2019-09-05T07:50:09Z",
        "merged_at": "2019-09-05T07:50:09Z",
        "body": "Added JAVA_OPTS env for lambda ide debug purpose. Only as docker in lambda executor\r\n\r\nAdd JAVA_OPTS in docker-compose.yml\r\n\r\nSample:\r\nJAVA_OPTS=-agentlib:jdwp=transport=dt_socket,server=y,suspend=y\r\n\r\nPort is defined randomly",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 43,
        "deletions": 10,
        "changed_files": 2,
        "created_at": "2019-09-02T07:20:15Z",
        "closed_at": "2019-09-02T08:23:02Z",
        "merged_at": "2019-09-02T08:23:01Z",
        "body": "Add mock responses for S3 encryption and replication",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 197,
        "deletions": 97,
        "changed_files": 3,
        "created_at": "2019-09-01T12:32:05Z",
        "closed_at": "2019-09-01T13:42:53Z",
        "merged_at": "2019-09-01T13:42:53Z",
        "body": "Support custom SQS queue attributes.\r\n\r\nFixes #804",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2019-08-30T23:10:19Z",
        "closed_at": "2019-08-31T20:28:09Z",
        "merged_at": "2019-08-31T20:28:09Z",
        "body": "This PR will fix the response for dynamodbstreams request as described in the issue.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 107,
        "deletions": 107,
        "changed_files": 4,
        "created_at": "2019-08-28T11:08:11Z",
        "closed_at": "2019-08-28T12:52:10Z",
        "merged_at": "2019-08-28T12:52:10Z",
        "body": "* Refactor utils to make run() available in bootstrap\r\n* Fix docker shell access",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 35,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2019-08-28T02:55:21Z",
        "closed_at": "2019-08-29T08:11:02Z",
        "merged_at": "2019-08-29T08:11:01Z",
        "body": "As found in #538, when there is an S3 copy the MD5 header should not be checked. With this change was able to use `s3a` with Localstack otherwise fails to copy file during writing.\r\n\r\nFor reference here is the standalone test project: https://github.com/risdenk/s3a-localstack",
        "comments": 5
    },
    {
        "merged": true,
        "additions": 11,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2019-08-25T18:37:49Z",
        "closed_at": "2019-08-25T19:50:00Z",
        "merged_at": "2019-08-25T19:50:00Z",
        "body": "Fix dynamodb table ARN for cloudformation\r\n\r\nAddresses #438",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 62,
        "deletions": 11,
        "changed_files": 4,
        "created_at": "2019-08-25T17:23:38Z",
        "closed_at": "2019-08-25T18:35:41Z",
        "merged_at": "2019-08-25T18:35:41Z",
        "body": "Fix CloudFormation deployment of StepFunction activities\r\n\r\nFixes #1435",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 62,
        "deletions": 31,
        "changed_files": 7,
        "created_at": "2019-08-22T20:06:51Z",
        "closed_at": "2019-08-23T06:27:43Z",
        "merged_at": "2019-08-23T06:27:43Z",
        "body": "* refactor Lambda API\r\n* minor extensions to CloudFormation impl",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2019-08-21T03:42:28Z",
        "closed_at": "2019-08-23T06:33:55Z",
        "merged_at": "2019-08-23T06:33:54Z",
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2019-08-21T03:39:37Z",
        "closed_at": "2019-08-23T06:29:56Z",
        "merged_at": "2019-08-23T06:29:55Z",
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 47,
        "deletions": 21,
        "changed_files": 3,
        "created_at": "2019-08-19T14:01:03Z",
        "closed_at": "2019-08-19T15:42:54Z",
        "merged_at": "2019-08-19T15:42:54Z",
        "body": "Fix incorrect region for API GW resources created via Cloud Formation",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 27,
        "deletions": 1,
        "changed_files": 4,
        "created_at": "2019-08-16T08:44:30Z",
        "closed_at": "2019-08-16T10:20:32Z",
        "merged_at": "2019-08-16T10:20:32Z",
        "body": "Add OS version checks",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2019-08-14T20:10:27Z",
        "closed_at": "2019-08-15T06:52:27Z",
        "merged_at": "2019-08-15T06:52:27Z",
        "body": "",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 13,
        "deletions": 15,
        "changed_files": 5,
        "created_at": "2019-08-14T18:44:05Z",
        "closed_at": "2019-08-25T16:58:16Z",
        "merged_at": "2019-08-25T16:58:16Z",
        "body": "Add test for uploading Java Lambda as JAR in ZIP\r\n\r\nFixes #385",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 14,
        "deletions": 5,
        "changed_files": 6,
        "created_at": "2019-08-13T16:03:41Z",
        "closed_at": "2019-08-13T18:19:02Z",
        "merged_at": "2019-08-13T18:19:02Z",
        "body": "Cache API server processes",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 33,
        "deletions": 20,
        "changed_files": 4,
        "created_at": "2019-08-09T20:20:04Z",
        "closed_at": "2019-08-13T20:57:02Z",
        "merged_at": "2019-08-13T20:57:01Z",
        "body": "Command line arguments are limited in size, but the event body for lambda should be able to accommodate up to 6Mb of data.  Event bodies can be sent to [lambci/docker-lambda](https://github.com/lambci/docker-lambda) as either an environment variable, a command line argument, or as STDIN.  \r\n\r\nFixes #1055 and #1081 ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 3,
        "changed_files": 2,
        "created_at": "2019-08-09T18:43:27Z",
        "closed_at": "2019-08-10T12:06:56Z",
        "merged_at": "2019-08-10T12:06:56Z",
        "body": "Bump moto version",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2019-08-08T09:35:07Z",
        "closed_at": "2019-08-10T12:08:59Z",
        "merged_at": "2019-08-10T12:08:59Z",
        "body": "#### This change set aims to fix the uuid generation error by removing `.decode('utf-8')` in python3.6.\r\n\r\npython3.6 will return `TypeError: encoding without a string argument` when running ```uuid.uuid5(namespace=namespace, name=namestring.encode('utf-8'))``` , which seems to be only supported by python2, thus causing error on DynamoDB streams api.\r\n\r\nSince LocalStack latest docker image runs on python3.6, I think this issue will cause shard_id generation failure in `dynamodbstreams_api.py`.\r\n\r\nMore reference regarding to this issue:\r\n`https://bugs.python.org/issue34145` \r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 49,
        "deletions": 47,
        "changed_files": 3,
        "created_at": "2019-08-07T06:44:56Z",
        "closed_at": "2019-08-07T14:08:23Z",
        "merged_at": "2019-08-07T14:08:23Z",
        "body": "Attempting to fix logging for asynchronous lambdas, based on #1424 \r\n\r\nThis supersedes the previous PR #1424 by @trestini - we'll make sure to preserve that commit when merging.",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 8,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2019-08-06T01:59:33Z",
        "closed_at": "2019-08-07T14:18:32Z",
        "merged_at": "2019-08-07T14:18:32Z",
        "body": "Without this, KCLv1 for java throws exceptions.",
        "comments": 8
    },
    {
        "merged": true,
        "additions": 13,
        "deletions": 12,
        "changed_files": 1,
        "created_at": "2019-08-06T01:32:09Z",
        "closed_at": "2019-08-06T15:04:00Z",
        "merged_at": "2019-08-06T15:04:00Z",
        "body": "fix #753",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 16,
        "deletions": 9,
        "changed_files": 5,
        "created_at": "2019-08-04T10:14:11Z",
        "closed_at": "2019-08-05T15:33:29Z",
        "merged_at": "2019-08-05T15:33:29Z",
        "body": "Minor patch in install script",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 532,
        "deletions": 360,
        "changed_files": 18,
        "created_at": "2019-08-02T14:46:50Z",
        "closed_at": "2019-08-03T18:13:40Z",
        "merged_at": "2019-08-03T18:13:39Z",
        "body": "Work in progress: Optimize modules for pip package and lazy fetch dependencies",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2019-07-30T22:07:47Z",
        "closed_at": "2019-08-01T17:06:14Z",
        "merged_at": "2019-08-01T17:06:14Z",
        "body": "Quick grammar fix for the `localstack web` command - adding a missing word here.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 9,
        "deletions": 10,
        "changed_files": 1,
        "created_at": "2019-07-28T02:52:30Z",
        "closed_at": "2019-08-13T16:12:12Z",
        "merged_at": "2019-08-13T16:12:12Z",
        "body": "",
        "comments": 17
    },
    {
        "merged": true,
        "additions": 1047,
        "deletions": 361,
        "changed_files": 38,
        "created_at": "2019-07-27T20:27:34Z",
        "closed_at": "2019-08-01T18:48:10Z",
        "merged_at": "2019-08-01T18:48:10Z",
        "body": "* Fix handling of regions\r\n* Minor code refactoring",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 57,
        "deletions": 29,
        "changed_files": 4,
        "created_at": "2019-07-26T18:21:24Z",
        "closed_at": "2019-07-26T21:22:14Z",
        "merged_at": "2019-07-26T21:22:14Z",
        "body": "* Minor fixes to lambda executor\r\n* Change default executor from `local` to `docker` (as specified in the docs)",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 128,
        "deletions": 71,
        "changed_files": 8,
        "created_at": "2019-07-23T21:05:02Z",
        "closed_at": "2019-07-24T07:14:52Z",
        "merged_at": "2019-07-24T07:14:52Z",
        "body": "Refactor Lambda API",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 46,
        "deletions": 1,
        "changed_files": 4,
        "created_at": "2019-07-17T13:59:45Z",
        "closed_at": "2019-07-29T14:54:39Z",
        "merged_at": "2019-07-29T14:54:39Z",
        "body": "This adds a moto server for CloudWatch Events / EventBridge.\r\n\r\nRelates to issue #103 but does not add a full implementation with event triggering. The benefit of merging this PR is that you can invoke CloudWatch Events APIs like `put_rule` and `put_events` against a local target. A separate PR would be required to add full event bus support with scheduled events, triggers and targets.",
        "comments": 6
    },
    {
        "merged": true,
        "additions": 84,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2019-07-17T09:54:22Z",
        "closed_at": "2019-07-18T15:12:19Z",
        "merged_at": "2019-07-18T15:12:19Z",
        "body": "This should fix  #1322",
        "comments": 4
    },
    {
        "merged": false,
        "additions": 20,
        "deletions": 17,
        "changed_files": 1,
        "created_at": "2019-07-14T03:07:50Z",
        "closed_at": "2019-08-07T07:13:55Z",
        "merged_at": null,
        "body": "In the current implementation, when a lambda is executed in Event mode (asynchronously), the `run_lambda_executor` function receives `True` in the `asynchronous` parameter which sends a fixed message to the log and don't collect the outputs (in/err) from the child process. However, this  parameter doesn't interfere in the way how the lambda container is executed (which is always asynchronous).\r\n\r\nThis is a big issue when we're working with SNS as event source for lambda functions, since no logs are presented in the localstack's logs or in the Cloudwatch logs (the message stored in CW is the fixed message from `run_lambda_executor`, and not the output of the child container.\r\n\r\nWith this in mind, my propose is to deal with logs in the same way as in the synchronous calls, which resolves both the plot of the entries in the log and in the Cloudwatch logs.",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 11,
        "deletions": 3,
        "changed_files": 2,
        "created_at": "2019-07-14T02:16:46Z",
        "closed_at": "2019-07-18T20:01:57Z",
        "merged_at": "2019-07-18T20:01:57Z",
        "body": "Currently, when a Lambda function is invoked by a SNS topic, some attributes aren't forwarded. This PR includes the following attributes inside the object in the `Records` array:\r\n\r\n- EventSource with a fixed value of `localstack:sns`\r\n- EventVersion with a fixed value of `1.0`\r\n- EventSubscriptionArn with the arn of the subscriptoin between the topic and function,\r\n- MessageAttributes containing an object with the message attributes published in the original event\r\n\r\n**Note for the `EventSource` attribute**: originally, this attribute have a fixed value of `aws:sns`. In my opinion, change this value gives an opportunity to the services that are using localstack to know in which environment they are being executed, but I would like to know what you think about.\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 20,
        "deletions": 3,
        "changed_files": 3,
        "created_at": "2019-07-12T22:14:18Z",
        "closed_at": "2019-07-13T14:57:39Z",
        "merged_at": "2019-07-13T14:57:39Z",
        "body": "This is a fork of #1353  with fixing @whummer feedbacks \r\n\r\nDescription copied from #1353 : \r\n\r\n \r\n\r\n> While developing a browser application using the AWS S3 Javascript SDK, I ran into some (quite obtuse) issues related to CORS headers.\r\n> \r\n> the S3 SDK expects that certain headers will be both allowed in PUT requests (and the like) and that certain headers will be available in the output. If those headers are not present, the SDK will behave inconsistently (and silently).\r\n> \r\n> Specifically, the SDK expects that x-amz-acl and x-amz-version-id to be in Access-Control-Allow-Headers. It additionally assumes that x-amz-version-id will be in the response headers.\r\n> \r\n> Further, S3 Metadata is sent via headers, and therefore expects a header looking like x-amz-meta-* to be present. However, I couldn't figure out how to GLOB, so instead I elected to add an env var facilitating parameterization of the CORS header space.\r\n> \r\n> Anyway, this PR should unblock consumers using the AWS S3 SDK for Javascript in the Browser Context.",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 5,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2019-07-05T01:33:56Z",
        "closed_at": "2019-07-10T09:13:18Z",
        "merged_at": "2019-07-10T09:13:18Z",
        "body": "First of all, thanks for making localstack happen. It's a great product, I use it on most of my projects.\r\n\r\nIt would greatly help the adoption of this project if developers have more visibility into each service. Managing the data in localstack is super useful for development.\r\n\r\nTherefore, we build [Commandeer](https://getcommandeer.com) which works with localstack out of the box. Scanning for localstack is also a part of our onboarding.\r\n\r\nThis PR is just to start a conversation about a potential collaboration between Commandeer and Locastack. Let me know if you see more opportunities to collaborate.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 21,
        "deletions": 10,
        "changed_files": 1,
        "created_at": "2019-07-01T20:20:08Z",
        "closed_at": "2019-07-10T09:19:34Z",
        "merged_at": "2019-07-10T09:19:34Z",
        "body": "Fixes #917 \r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 99,
        "deletions": 7,
        "changed_files": 8,
        "created_at": "2019-06-29T10:31:27Z",
        "closed_at": "2019-07-08T19:55:22Z",
        "merged_at": "2019-07-08T19:55:22Z",
        "body": "Debug and fix failing build in CI.\r\n\r\nhttps://travis-ci.org/localstack/localstack/builds/551967379?utm_source=github_status&utm_medium=notification\r\n```\r\nCalledProcessError: Command '{ test `which aws` || . .venv/bin/activate; }; aws --no-verify-ssl --endpoint-url=\"https://localhost:4574\" lambda list-event-source-mappings --function-name test_lambda_env' returned non-zero exit status 139\r\n```",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2019-06-28T21:35:21Z",
        "closed_at": "2019-07-08T19:56:53Z",
        "merged_at": "2019-07-08T19:56:53Z",
        "body": "Updating the path to the test_integration.py in the README\r\n\r\n**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 68,
        "deletions": 22,
        "changed_files": 3,
        "created_at": "2019-06-27T17:27:41Z",
        "closed_at": "2019-07-11T08:48:25Z",
        "merged_at": "2019-07-11T08:48:25Z",
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\nLocalstack overwrites the account ID in ARNs in IAM responses from moto, but did not reset it when sending requests to it.\r\nI added a test case to demonstrate the bug that this PR addresses.\r\n",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2019-06-26T21:24:01Z",
        "closed_at": "2019-07-10T09:26:44Z",
        "merged_at": "2019-07-10T09:26:44Z",
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\nThe python executable that was used to start S3 was sometimes different from the one that was used to install and run localstack. Therefore, S3 service could not start. With my modification, the same python executable will always be used to start S3 as the one running localstack.\r\nFixes #808",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 6,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2019-06-20T19:51:05Z",
        "closed_at": "2019-06-21T10:59:05Z",
        "merged_at": "2019-06-21T10:59:05Z",
        "body": "PR #1181 introduced the ability to prefix localstack's environment\r\nvariables with `LOCALSTACK_` in the Docker image. However, it also\r\nintroduced a crash when a variable called `LOCALSTACK_` immediately\r\nfollowed by a digit was present in the environment. The entrypoint\r\nwould try to re-export a variable starting with a digit which would\r\nobviously fail.\r\n\r\nThe fix consist in skipping problematic variables in the entrypoint.\r\nSuch variable don't make sense for localstack anyways.\r\n\r\nFixes #1387\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 46,
        "deletions": 13,
        "changed_files": 2,
        "created_at": "2019-06-16T18:54:54Z",
        "closed_at": "2019-06-16T20:56:56Z",
        "merged_at": "2019-06-16T20:56:56Z",
        "body": "* fix Docker bridge IP configuration\r\n* print a warning if we're not running in Docker but using Docker based LAMBDA_EXECUTOR (addresses #1359)",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 75,
        "deletions": 26,
        "changed_files": 9,
        "created_at": "2019-06-16T12:23:28Z",
        "closed_at": "2019-06-16T15:24:07Z",
        "merged_at": "2019-06-16T15:24:07Z",
        "body": "* Fix account IDs for cloudformation and SNS - addresses #1300\r\n* Release v0.9.5",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 55,
        "deletions": 29,
        "changed_files": 2,
        "created_at": "2019-06-15T17:25:56Z",
        "closed_at": "2019-06-15T19:05:24Z",
        "merged_at": "2019-06-15T19:05:24Z",
        "body": "Fix response body for presigned URL S3 PUT requests. Addresses #1317",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 21,
        "deletions": 5,
        "changed_files": 1,
        "created_at": "2019-06-13T18:15:05Z",
        "closed_at": "2019-06-13T20:20:52Z",
        "merged_at": "2019-06-13T20:20:52Z",
        "body": "Fix CreateDate returned by IAM - (partially) addresses #1366 ",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2019-06-11T21:32:29Z",
        "closed_at": "2019-06-12T07:43:34Z",
        "merged_at": "2019-06-12T07:43:34Z",
        "body": "Currently there isn't a one to one mapping in the ports.  Therefore it is causing the `docker-compose up` command to generate the error in the screenshot below: \r\n\r\n![Screen Shot 2019-06-11 at 2 31 02 PM](https://user-images.githubusercontent.com/5545603/59308331-aa5f6c80-8c55-11e9-8b54-7f0bc93aedaa.png)\r\n\r\nThe PR here increases the ports to match the ranges and prevent this error.  If it needs to be decreased instead, I can go ahead and do that as well",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 34,
        "deletions": 34,
        "changed_files": 2,
        "created_at": "2019-06-11T21:29:48Z",
        "closed_at": "2019-06-13T16:22:32Z",
        "merged_at": "2019-06-13T16:22:32Z",
        "body": "When we try to send SMS through SNS, we don't have to use an existing topic. This fixes #1361.\r\nAlso I did a bit of refacto around the SNS tests as there was lots of code dupplicates.\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 24,
        "deletions": 6,
        "changed_files": 10,
        "created_at": "2019-06-07T18:40:15Z",
        "closed_at": "2019-06-11T20:13:36Z",
        "merged_at": "2019-06-11T20:13:36Z",
        "body": "This adds basic EC2 support using the prexisting Moto implementation. \r\n\r\nIt needs an update to the client to pass through the proper port, although I've already bumped the requirements.txt version and submitted a PR - see [here](https://github.com/localstack/localstack-python-client/pull/15).\r\n\r\nOpen to any input! :)\r\n\r\nCloses #691 ",
        "comments": 9
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 5,
        "changed_files": 3,
        "created_at": "2019-06-06T18:21:41Z",
        "closed_at": "2019-06-07T13:30:03Z",
        "merged_at": "2019-06-07T13:30:03Z",
        "body": "https://aws.amazon.com/about-aws/whats-new/2019/06/amazon-elasticsearch-service-announces-support-for-elasticsearch-67/?nc1=h_ls\r\n\r\n ingest-user-agent is already built-in ES\r\nhttps://www.elastic.co/guide/en/elasticsearch/plugins/6.7/ingest-user-agent.html",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 15,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2019-06-05T20:18:31Z",
        "closed_at": "2019-06-11T20:16:30Z",
        "merged_at": "2019-06-11T20:16:30Z",
        "body": "Fixes #1324.\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 82,
        "deletions": 2,
        "changed_files": 4,
        "created_at": "2019-06-05T11:16:13Z",
        "closed_at": "2019-06-18T07:43:21Z",
        "merged_at": "2019-06-18T07:43:21Z",
        "body": "Currently, when using an API Gateway integration type of `AWS`, we're only able to mock Kinesis integrations. Everything else responds with a 404 and a message explaining that the action isn't implemented yet.\r\n\r\nThis change adds a new condition which routes the action to SQS. \r\n\r\nTemplating in the function is handled in the same way as Kinesis. \r\n\r\nIn the future, it might be nice to refactor this into a more generic function which caters for more action types.\r\n\r\n**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 15,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2019-06-04T20:08:30Z",
        "closed_at": "2019-07-13T14:57:54Z",
        "merged_at": null,
        "body": "While developing a browser application using the AWS S3 Javascript SDK, I ran into some (quite obtuse) issues related to CORS headers.\r\n\r\nthe S3 SDK expects that certain headers will be both allowed in PUT requests (and the like) and that certain headers will be available in the output. If those headers are not present, the SDK will behave inconsistently (and silently).\r\n\r\nSpecifically, the SDK expects that `x-amz-acl` and `x-amz-version-id` to be in `Access-Control-Allow-Headers`. It additionally assumes that `x-amz-version-id` will be in the response headers.\r\n\r\nFurther, S3 `Metadata` is sent via headers, and therefore expects a header looking like `x-amz-meta-*` to be present. However, I couldn't figure out how to GLOB, so instead I elected to add an env var facilitating parameterization of the CORS header space.\r\n\r\nAnyway, this PR should unblock consumers using the AWS S3 SDK for Javascript in the Browser Context.",
        "comments": 6
    },
    {
        "merged": false,
        "additions": 26,
        "deletions": 15,
        "changed_files": 3,
        "created_at": "2019-06-04T19:19:19Z",
        "closed_at": "2020-06-06T10:26:58Z",
        "merged_at": null,
        "body": "To speed up local actions and to be a bit closer to production behavior, lambda events triggered by an event source should be done so asynchronously.\r\n\r\nThis change makes async processing the default behavior, but allows each service (API Gateway, SNS, Kinesis, DyanmoDB, and SQS) to turn on synchronous processing with environment variables.\r\n\r\nThis may be a short-sighted change, but I can't see a major reason for synchronous processing to be blocking by default - please let me know if I'm missing a use-case.\r\n\r\nThis change is necessary as I'm using a custom go1.x runtime image that only allows on event to be processed at a time (simulating a reserved concurrency of one), and synchronous events deadlock if a dynamodb handler publishes a record back to dynamodb. Setting them as async does exactly what we're looking for.",
        "comments": 6
    },
    {
        "merged": true,
        "additions": 22,
        "deletions": 1,
        "changed_files": 3,
        "created_at": "2019-06-02T23:22:55Z",
        "closed_at": "2019-06-10T18:11:10Z",
        "merged_at": "2019-06-10T18:11:09Z",
        "body": "The LOCALSTACK_PORTS constant in Container.java didn't include the secretsmanager port (4584).  I added it plus a basic test to verify the plumbing.\r\n\r\nThis is to address #1350.\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 9,
        "deletions": 4,
        "changed_files": 2,
        "created_at": "2019-06-02T15:11:58Z",
        "closed_at": "2019-06-02T18:00:27Z",
        "merged_at": "2019-06-02T18:00:27Z",
        "body": "Squash and reduce size of Docker image. Reduces the size of the uncompressed image from approximately 1.29GB to 702MB.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 80,
        "deletions": 30,
        "changed_files": 4,
        "created_at": "2019-06-01T20:26:02Z",
        "closed_at": "2019-06-02T15:16:14Z",
        "merged_at": "2019-06-02T15:16:14Z",
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\nThe responses returned from `list_versions`, `create_function`, `create_alias`, `update_alias` and `update_function_code` did not match the corresponding responses returned by AWS. This has been fixed in this PR.",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 67,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2019-06-01T15:58:59Z",
        "closed_at": "2019-06-02T12:58:56Z",
        "merged_at": "2019-06-02T12:58:56Z",
        "body": "This commit adds a `Last-Modified` header on a S3Proxy response.\r\n\r\nIf the content has a XML with a `<LastModified>` field, it uses that field. Else, it uses currentDate.\r\n\r\nI used this personally to fix an incompatibility with [minio-go](https://github.com/minio/minio-go) library, which requires a `Last-Modified` header ([api-get-object.go:626](https://github.com/minio/minio-go/blob/da91b3bbdca31aef023d51f3ac74cec0e02b23ac/api-get-object.go)), and fails if it is not set. \r\nAs adding a header is an easy-fix and will not break anything, I followed that path.\r\n\r\nIt works for me, and I though it might be useful for someone else.",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 32,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2019-05-29T08:54:59Z",
        "closed_at": "2019-06-01T15:52:01Z",
        "merged_at": null,
        "body": "This commit adds a `Last-Modified` header on a S3Proxy response.\r\n\r\nIf the content has a XML with a `<LastModified>` field, it uses that field. Else, it uses currentDate.\r\n\r\nI used this personally to fix an incompatibility with [minio-go](https://github.com/minio/minio-go) library, which requires a `Last-Modified` header ([api-get-object.go:626](https://github.com/minio/minio-go/blob/da91b3bbdca31aef023d51f3ac74cec0e02b23ac/api-get-object.go)), and fails if it is not set. \r\nAs adding a header is an easy-fix and will not break anything, I followed that path.\r\n\r\nIt works for me, and I though it might be useful for someone else.",
        "comments": 4
    },
    {
        "merged": false,
        "additions": 31,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2019-05-28T17:10:49Z",
        "closed_at": "2019-05-29T08:43:27Z",
        "merged_at": null,
        "body": "This commit adds a `Last-Modified` header on a S3Proxy response.\r\n\r\nIf the content has a XML with a `<LastModified>` field, it uses that field. Else, it uses currentDate.\r\n\r\nI used this personally to fix an incompatibility with [minio-go](https://github.com/minio/minio-go) library, which requires a `Last-Modified` header ([api-get-object.go:626](https://github.com/minio/minio-go/blob/da91b3bbdca31aef023d51f3ac74cec0e02b23ac/api-get-object.go)), and fails if it is not set. \r\nAs adding a header is an easy-fix and will not break anything, I followed that path.\r\n\r\nIt works for me, and I though it might be useful for someone else.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2019-05-27T09:49:55Z",
        "closed_at": "2019-05-27T20:48:23Z",
        "merged_at": "2019-05-27T20:48:23Z",
        "body": "Related to issue #1338\r\nIt seems that lambci already has a tag for the new runtime nodejs10.x, so this trivial solution should work\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 39,
        "deletions": 9,
        "changed_files": 6,
        "created_at": "2019-05-26T17:57:35Z",
        "closed_at": "2019-05-26T19:14:33Z",
        "merged_at": "2019-05-26T19:14:33Z",
        "body": "* minor fix in CloudFormation ARNs and properties\r\n* canonicalize API names when running in Docker\r\n* set container name to `localstack_main`\r\n* fix tests on master",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 21,
        "deletions": 3,
        "changed_files": 2,
        "created_at": "2019-05-23T21:23:56Z",
        "closed_at": "2019-05-26T19:50:14Z",
        "merged_at": "2019-05-26T19:50:14Z",
        "body": "This PR removes the auto registering of topic when receiving requests and throw an error when a publish is called on a non existent topic (just like SNS does).\r\nI also tried this with a Java client and it works :)\r\n\r\nFixes #1319.",
        "comments": 6
    },
    {
        "merged": true,
        "additions": 39,
        "deletions": 12,
        "changed_files": 2,
        "created_at": "2019-05-23T20:08:15Z",
        "closed_at": "2019-05-24T06:46:42Z",
        "merged_at": "2019-05-24T06:46:42Z",
        "body": "By registering the Extension in the context, we can avoid multiple image creation and this way avoid Exception thrown.\r\nSee #1330 for more context.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 16,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2019-05-22T19:41:42Z",
        "closed_at": "2019-05-26T19:47:38Z",
        "merged_at": "2019-05-26T19:47:38Z",
        "body": "Some runtimes, such as lambci/lambda:go1.x, read the _LAMBDA_SERVER_PORT to get the port they should bind to for IPC calls. At least in this environment, multiple calls to the same reused container can cause one of the invocations to silently fail because the port is already bound.\r\n\r\nThis simply assigns a port from the range 5000-5500 so that each invocation gets the sequentially least recently used port. \r\n\r\nIf you'd like, this behavior can be gated behind an additional envvar (and the range can be configured similarly). Let me know your thoughts on this.",
        "comments": 5
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2019-05-22T19:39:41Z",
        "closed_at": "2019-05-24T07:13:36Z",
        "merged_at": "2019-05-24T07:13:36Z",
        "body": "It looks like duration on line 400 was always negative as the times in the invocation time dictionary is the invocation time * 1000. This makes that comparison symmetric.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 3,
        "changed_files": 2,
        "created_at": "2019-05-22T19:38:31Z",
        "closed_at": "2019-05-24T07:20:20Z",
        "merged_at": "2019-05-24T07:20:20Z",
        "body": "Ok, so this is kind of crazy. See [this docker-compose issue](https://github.com/docker/compose/issues/6018).\r\n\r\nUnfortunately, we're logging a lot through our go1.x lambdas, which will eventually fill up the /dev/fd/2 descriptor. This causes a HARD hang on localstack that just ... confounded us for 96 developer hours. We inspected the threads once the program blocked, and saw that it was blocking one either print or writes to stderr. That was a new one for me. If we write to a file instead then tail both the out and the err streams, this issue goes away completely for us.\r\n\r\nIf you'd like to handle the output in a different way please let me know and I'll see what other solutions there could be.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 22,
        "deletions": 19,
        "changed_files": 6,
        "created_at": "2019-05-15T13:56:33Z",
        "closed_at": "2019-05-16T05:40:14Z",
        "merged_at": "2019-05-16T05:40:14Z",
        "body": "* Fix output buffering for subprocesses\r\n* Make `DOCKER_BRIDGE_IP` configurable",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 286,
        "deletions": 39,
        "changed_files": 4,
        "created_at": "2019-05-13T17:12:30Z",
        "closed_at": "2019-05-17T17:51:59Z",
        "merged_at": "2019-05-17T17:51:59Z",
        "body": "DynamoDB stream events were not begin forwarded for all batch writes and not at all for transaction writes. This should fix that. Additional tests cover that oldImage/newImage are set properly on these new forwarded events.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 19,
        "deletions": 20,
        "changed_files": 4,
        "created_at": "2019-05-12T12:29:17Z",
        "closed_at": "2019-05-12T14:00:05Z",
        "merged_at": "2019-05-12T14:00:05Z",
        "body": "Do not modify docker.sock permissions by default, as this can have dangerous side-effects.\r\n\r\nThis PR reverts to the previous behavior where the LocalStack main process runs as `root` (by default) and hence should have access to `/var/run/docker.sock`.\r\n\r\nNote that `root` is the default, but not enforced in `supervisord.conf` - users can overwrite the user by passing the `--user=..` to docker run when starting the container. ",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 32,
        "deletions": 8,
        "changed_files": 7,
        "created_at": "2019-05-11T18:23:24Z",
        "closed_at": "2019-05-11T21:22:30Z",
        "merged_at": "2019-05-11T21:22:30Z",
        "body": "Fix permissions of docker.sock - related to #1306",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 4,
        "changed_files": 4,
        "created_at": "2019-05-10T09:10:58Z",
        "closed_at": "2019-05-10T10:45:56Z",
        "merged_at": "2019-05-10T10:45:55Z",
        "body": "Release v0.1.21 of Java libs, with latest changes from #1301 ",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 32,
        "deletions": 8,
        "changed_files": 8,
        "created_at": "2019-05-09T14:31:53Z",
        "closed_at": "2019-05-10T08:54:53Z",
        "merged_at": "2019-05-10T08:54:53Z",
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 5,
        "deletions": 4,
        "changed_files": 4,
        "created_at": "2019-05-08T20:29:26Z",
        "closed_at": "2019-05-08T21:33:02Z",
        "merged_at": "2019-05-08T21:33:02Z",
        "body": "Release new version of Java libs",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2019-05-08T16:16:55Z",
        "closed_at": "2019-05-08T20:26:33Z",
        "merged_at": "2019-05-08T20:26:33Z",
        "body": "This is to make the path correct after the python3 change in https://github.com/localstack/localstack/commit/0886a249ab8bbfea47b68597045a061ef5c55ece\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 59,
        "deletions": 32,
        "changed_files": 11,
        "created_at": "2019-05-07T19:50:02Z",
        "closed_at": "2019-05-08T15:01:24Z",
        "merged_at": "2019-05-08T15:01:24Z",
        "body": "* update Docker image from Python 2 to 3\r\n* run container process as non-root user\r\n* should fix an issue where the Elasticsearch process failed to start up properly.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2019-05-04T08:30:47Z",
        "closed_at": "2019-05-04T15:02:59Z",
        "merged_at": "2019-05-04T15:02:59Z",
        "body": "Update jquery to fix a potential security vulnerability reported by Github.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 6,
        "deletions": 7,
        "changed_files": 3,
        "created_at": "2019-05-03T15:46:49Z",
        "closed_at": "2019-05-08T14:01:18Z",
        "merged_at": "2019-05-08T14:01:18Z",
        "body": "This removes an issue where a string.replace call unnecessarily escapes characters before a call to shlex (which does it properly). This causes some issues with golang runtimes. See #1281 for details.",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2019-04-30T07:16:57Z",
        "closed_at": "2019-05-02T18:10:59Z",
        "merged_at": "2019-05-02T18:10:59Z",
        "body": "Fix to avoid `aws` command to fail when displaying the help from inside the docker container `localstack/localstack:0.9.0`\r\n\r\n```\r\nbash-4.4# aws help\r\n\r\nCould not find executable named \"groff\"\r\n```\r\n\r\n**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2019-04-23T02:51:05Z",
        "closed_at": "2019-05-01T21:26:36Z",
        "merged_at": "2019-05-01T21:26:36Z",
        "body": "Change download URL for unsigned utils jar from http to https. Trying to use https://central.maven.org gave a certificate signing error, while https://repo1.maven.org resolves correctly. This should alleviate a trivial MITM attack vector.\r\n",
        "comments": 5
    },
    {
        "merged": true,
        "additions": 59,
        "deletions": 13,
        "changed_files": 4,
        "created_at": "2019-04-19T00:36:58Z",
        "closed_at": "2019-04-23T23:41:32Z",
        "merged_at": "2019-04-23T23:41:32Z",
        "body": "Fix Lambda event source mappings to respect the state (enabled/disabled). Default to enabled if no state is present.\r\n\r\nThis requires updated to `add_event_source_mapping` and `update_event_source_mapping`.\r\n\r\nAdded tests for these functions.\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 8,
        "deletions": 5,
        "changed_files": 6,
        "created_at": "2019-04-18T09:59:04Z",
        "closed_at": "2019-05-28T18:01:21Z",
        "merged_at": "2019-05-28T18:01:21Z",
        "body": "https://aws.amazon.com/about-aws/whats-new/2019/04/amazon-elasticsearch-service-announces-support-for-elasticsearch-6-5/?nc1=h_ls\r\n",
        "comments": 12
    },
    {
        "merged": false,
        "additions": 7,
        "deletions": 7,
        "changed_files": 2,
        "created_at": "2019-04-14T12:20:51Z",
        "closed_at": "2019-05-30T21:19:04Z",
        "merged_at": null,
        "body": "While testing lambda triggered by kinesis events I found LambdaExecutor trying to call lambda class with HashMap instead of KinesisEvent.\r\n\r\nI tracked down the cause to be the mismatch in the key case in LambdaExecutor v.s. the event body (see below)\r\nhttps://github.com/localstack/localstack/blob/master/localstack/services/awslambda/lambda_api.py#L221\r\nhttps://github.com/localstack/localstack/blob/master/localstack/services/kinesis/kinesis_listener.py#L41\r\n\r\nThis PR makes LambdaExecutor look for keys that match the case in the event.\r\n\r\nSee https://docs.aws.amazon.com/lambda/latest/dg/with-kinesis.html for the event data structure.",
        "comments": 5
    },
    {
        "merged": true,
        "additions": 18,
        "deletions": 6,
        "changed_files": 2,
        "created_at": "2019-04-11T20:21:52Z",
        "closed_at": "2019-04-13T20:45:09Z",
        "merged_at": "2019-04-13T20:45:09Z",
        "body": "This should fix #1250.\r\n\r\nTo reproduce:\r\n\r\n```bash\r\n$ aws --endpoint-url=http://localhost:4572 s3 mb s3://my_bucket\r\nmake_bucket: my_bucket\r\n$ aws --endpoint-url=http://localhost:4572 s3api put-bucket-versioning --bucket my_bucket --versioning-configuration Status=Enabled\r\n$ aws --endpoint-url=http://localhost:4576 sqs create-queue --queue-name my_queue\r\n{\r\n    \"QueueUrl\": \"http://localhost:4576/queue/my_queue\"\r\n}\r\n$ aws --endpoint-url=http://localhost:4576 sqs get-queue-attributes --queue-url \"http://localhost:4576/queue/my_queue\" --attribute-names QueueArn --query Attributes --output text\r\narn:aws:sqs:elasticmq:000000000000:my_queue\r\n$ notification_configuration=$(cat << EOF\r\n{\r\n    \"QueueConfigurations\": [\r\n        {\r\n            \"Id\": \"my_id\",\r\n            \"QueueArn\": \"arn:aws:sqs:elasticmq:000000000000:my_queue\",\r\n            \"Events\": [\r\n                \"s3:ObjectCreated:*\"\r\n            ]\r\n        }\r\n    ]\r\n}\r\nEOF\r\n)\r\n$ aws --endpoint-url=http://localhost:4572 s3api put-bucket-notification-configuration --bucket my_bucket --notification-configuration \"$notification_configuration\"\r\n$ aws --endpoint-url=http://localhost:4572 s3api put-object --bucket my_bucket --key blargh.txt\r\n{\r\n    \"ETag\": \"\\\"d41d8cd98f00b204e9800998ecf8427e\\\"\",\r\n    \"VersionId\": \"0\"\r\n}\r\n$ aws --endpoint-url=http://localhost:4576 sqs receive-message --queue-url http://localhost:4576/queue/my_queue | jq .Messages\\[0\\].Body | jq -r | jq\r\n{\r\n  \"Records\": [\r\n    {\r\n      \"eventVersion\": \"2.0\",\r\n      \"eventName\": \"ObjectCreated:Put\",\r\n      \"eventTime\": \"2019-04-11T20:13:45.322357Z\",\r\n      \"userIdentity\": {\r\n        \"principalId\": \"AIDAJDPLRKLG7UEXAMPLE\"\r\n      },\r\n      \"eventSource\": \"aws:s3\",\r\n      \"requestParameters\": {\r\n        \"sourceIPAddress\": \"127.0.0.1\"\r\n      },\r\n      \"s3\": {\r\n        \"configurationId\": \"testConfigRule\",\r\n        \"object\": {\r\n          \"versionId\": \"096fKKXTRTtl3on89fVO.nfljtsv6qko\",\r\n          \"eTag\": \"d41d8cd98f00b204e9800998ecf8427e\",\r\n          \"sequencer\": \"0055AED6DCD90281E5\",\r\n          \"key\": \"blargh.txt\",\r\n          \"size\": 1024\r\n        },\r\n        \"bucket\": {\r\n          \"arn\": \"arn:aws:s3:::my_bucket\",\r\n          \"name\": \"my_bucket\",\r\n          \"ownerIdentity\": {\r\n            \"principalId\": \"A3NL1KOZZKExample\"\r\n          }\r\n        },\r\n        \"s3SchemaVersion\": \"1.0\"\r\n      },\r\n      \"responseElements\": {\r\n        \"x-amz-id-2\": \"eftixk72aD6Ap51TnqcoF8eFidJG9Z/2\",\r\n        \"x-amz-request-id\": \"e7369cc1\"\r\n      },\r\n      \"awsRegion\": \"us-east-1\"\r\n    }\r\n  ]\r\n}\r\n```\r\n\r\nI'm happy to add a test, but currently don't know where this would go best. Help appreciated.",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 53,
        "deletions": 5,
        "changed_files": 2,
        "created_at": "2019-04-11T00:38:52Z",
        "closed_at": "2019-04-13T13:57:05Z",
        "merged_at": "2019-04-13T13:57:05Z",
        "body": "This PR is a followup to https://github.com/localstack/localstack/pull/1239\r\n\r\n### The Issue\r\n\r\nIn production AWS, Lambda functions initiated by SQS have the schema of the `MessageAttributes` munged from one structure into another structure.  We found this out today while testing out a function in production.   \r\n\r\nUnfortunately, I'm unsure if this is as a result of some sort of processing happening on the SQS egress side or on the Lambda ingress side.  Either way, the structure changes and needs more massaging.  I'm also uncertain as to whether this post-processing of the `MessageAttributes` payload will change between languages (e.g. JavaScript vs. Python) or if this will remain consistent.   Because of this uncertainty, I don't know if this is a bug in ElasticMQ or with the Localstack Lambda processing.  \r\n\r\n*Note:*\r\n- `stringListValues` and `binaryListValues` aren't implemented right now because I'm not 100% how they work.\r\n\r\nSorry for the trouble and not catching this earlier.  We didn't have a production Lambda set up that was using this functionality. \r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 12,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2019-04-10T13:10:46Z",
        "closed_at": "2019-04-10T18:07:37Z",
        "merged_at": "2019-04-10T18:07:37Z",
        "body": "I was manipulating `HOST_TMP_FOLDER` in order to run local code with lambda but it was not the right way to go.\r\nThanks to https://github.com/localstack/localstack/pull/1142, there is a straight way to achieve this so I add it to the documentation.\r\nI don't see any good reason to edit `HOST_TMP_FOLDER` so I suggest to remove the previous reference.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 92,
        "deletions": 3,
        "changed_files": 4,
        "created_at": "2019-04-10T09:12:22Z",
        "closed_at": "2019-04-10T22:06:42Z",
        "merged_at": "2019-04-10T22:06:42Z",
        "body": "This is a fix for: [#1116](https://github.com/localstack/localstack/issues/1116)\r\nadd support for:\r\n* list-tags\r\n* tag-resource\r\n* untag-resource\r\n\r\nin lambda",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2019-04-09T10:22:41Z",
        "closed_at": "2019-04-10T12:22:13Z",
        "merged_at": "2019-04-10T12:22:13Z",
        "body": "When you change the local path (on the host side) of the volume /tmp/localstack, localstack has to know the target path on the host (don't know why though).\r\n\r\nIf you change:\r\n```\r\nvolumes:\r\n  - /tmp/localstack:/tmp/localstack\r\n```\r\n\r\nto\r\n```\r\nvolumes:\r\n  - /something/else:/tmp/localstack\r\n```\r\n\r\nYou need to set HOST_TMP_FOLDER to /something/else\r\nI had issues with lambda especially. ",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 59,
        "deletions": 5,
        "changed_files": 4,
        "created_at": "2019-04-09T00:43:32Z",
        "closed_at": "2019-04-10T17:55:40Z",
        "merged_at": "2019-04-10T17:55:40Z",
        "body": "This fixes this issue: https://github.com/localstack/localstack/issues/1215\r\n\r\nPython isn't my primary language, so I'm absolutely open to ways to make this better.  Additionally, I wasn't sure where a good place to put a test for this would be.  \r\n\r\n**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 6
    },
    {
        "merged": true,
        "additions": 80,
        "deletions": 5,
        "changed_files": 3,
        "created_at": "2019-04-03T22:10:36Z",
        "closed_at": "2019-04-29T21:07:03Z",
        "merged_at": "2019-04-29T21:07:03Z",
        "body": "Hi again, this is the PR fixing : #1235 (refer to this for more context).\r\nI tested this on my project and It works as expected.",
        "comments": 8
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2019-04-03T07:21:45Z",
        "closed_at": "2019-04-03T23:29:04Z",
        "merged_at": "2019-04-03T23:29:04Z",
        "body": "'8.201.08-r0' is not found. updated it.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 22,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2019-04-02T16:25:25Z",
        "closed_at": "2019-04-09T18:43:38Z",
        "merged_at": "2019-04-09T18:43:37Z",
        "body": "Shamelessly pilfered from https://github.com/aventurella/localstack/commit/0a1b454, this commit addresses https://github.com/localstack/localstack/issues/654\r\n\r\nThis commit allows Terraform to run against Localstack and create Kinesis resources.",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 53,
        "deletions": 4,
        "changed_files": 3,
        "created_at": "2019-04-01T19:45:41Z",
        "closed_at": "2019-04-02T21:39:48Z",
        "merged_at": "2019-04-02T21:39:48Z",
        "body": "Addresses #1221 with behavior based off of docs [here](https://docs.aws.amazon.com/firehose/latest/APIReference/API_ListTagsForDeliveryStream.html).\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 6,
        "deletions": 23,
        "changed_files": 2,
        "created_at": "2019-03-31T21:30:23Z",
        "closed_at": "2019-04-13T20:43:30Z",
        "merged_at": "2019-04-13T20:43:30Z",
        "body": "\u2026aders\r\n\r\nThe current implementation of `ExposeHeaders` returns dummy values for arbitrary headers, but it is not how it is supposed to work. This should instead add header named `Access-Control-Expose-Headers`. It specifies response headers, which can be read by the JS code. See [this SO answer](https://stackoverflow.com/a/25673446/1377864) for more details.\r\n\r\nI've tested it in our frontend application, which does file uploads directly to S3 (the use case from #520) and it seems to work correctly now. However I didn't manage to run tests locally, getting [bunch of errors](https://gist.github.com/devoto13/f1514c68ea52cc9afe6df268e92cac46), when I run `make test`. Any ideas?\r\n\r\nFixes https://github.com/localstack/localstack/issues/520",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2019-03-31T12:41:05Z",
        "closed_at": "2019-04-01T07:29:30Z",
        "merged_at": "2019-04-01T07:29:30Z",
        "body": "Make target 'docker-build-base' is failing due to java version conflicts, with the following error:\r\n\r\n```\r\nStep 12/33 : RUN set -x && apk add --no-cache openjdk8=\"$JAVA_ALPINE_VERSION\"     && [ \"$JAVA_HOME\" = \"$(docker-java-home)\" ]\r\n ---> Running in 27d520e1a379\r\n+ apk add --no-cache 'openjdk8=8.191.12-r0'\r\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.9/main/x86_64/APKINDEX.tar.gz\r\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.9/community/x86_64/APKINDEX.tar.gz\r\nERROR: unsatisfiable constraints:\r\n  openjdk8-8.201.08-r0:\r\n    breaks: world[openjdk8=8.191.12-r0]\r\nThe command '/bin/sh -c set -x && apk add --no-cache openjdk8=\"$JAVA_ALPINE_VERSION\"     && [ \"$JAVA_HOME\" = \"$(docker-java-home)\" ]' returned a non-zero code: 1\r\nmake: *** [Makefile:49: docker-build-base] Error 1\r\n```\r\n\r\n- Updates Java Alpine version\r\n- Add extra step to manually install package 'nss' due to a bug in the current version of Alpine Linux described here: https://bugs.alpinelinux.org/issues/10126\r\n\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 5,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2019-03-27T21:40:16Z",
        "closed_at": "2019-03-27T23:46:04Z",
        "merged_at": "2019-03-27T23:46:04Z",
        "body": "Should fix #954.  Fix closing of connection in proxy.",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 170,
        "deletions": 17,
        "changed_files": 3,
        "created_at": "2019-03-21T21:14:57Z",
        "closed_at": "2019-03-25T12:22:34Z",
        "merged_at": null,
        "body": "methods to build client async in TestUtils\r\nSome async tests\r\n\r\nChange methods to fit https://github.com/localstack/localstack/pull/839#discussion_r202006373\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 5,
        "deletions": 4,
        "changed_files": 3,
        "created_at": "2019-03-19T15:27:14Z",
        "closed_at": "2019-03-28T01:49:46Z",
        "merged_at": "2019-03-28T01:49:46Z",
        "body": "* Release version `0.9.1`\r\n* Update Java libs to version `0.1.19`",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 37,
        "deletions": 9,
        "changed_files": 4,
        "created_at": "2019-03-18T23:39:35Z",
        "closed_at": "2019-03-19T01:42:55Z",
        "merged_at": "2019-03-19T01:42:55Z",
        "body": "* Fix CloudFormation update for ApiGateway::Method\r\n* Fix LocationConstraint issue for S3 bucket creation",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 64,
        "deletions": 9,
        "changed_files": 5,
        "created_at": "2019-03-18T00:37:27Z",
        "closed_at": "2019-03-18T01:42:57Z",
        "merged_at": "2019-03-18T01:42:57Z",
        "body": "Addresses #346 - Add API endpoint for dynamically updating config variables",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 19,
        "deletions": 0,
        "changed_files": 5,
        "created_at": "2019-03-13T15:31:54Z",
        "closed_at": "2019-03-14T02:24:41Z",
        "merged_at": "2019-03-14T02:24:41Z",
        "body": "\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 15,
        "deletions": 19,
        "changed_files": 8,
        "created_at": "2019-03-12T23:36:38Z",
        "closed_at": "2019-03-13T04:21:27Z",
        "merged_at": "2019-03-13T04:21:27Z",
        "body": "Fix exposing LOCALSTACK_HOSTNAME",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 332,
        "deletions": 0,
        "changed_files": 5,
        "created_at": "2019-03-12T23:17:51Z",
        "closed_at": "2019-03-13T17:38:58Z",
        "merged_at": null,
        "body": "methods to build client async in TestUtils\r\nSome async tests",
        "comments": 5
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2019-03-11T12:55:11Z",
        "closed_at": "2019-03-13T04:24:08Z",
        "merged_at": "2019-03-13T04:24:08Z",
        "body": "Update to make clear that the docker-compose file requires version 2.1 or greater.\r\nThis is related to #1177\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 441,
        "deletions": 338,
        "changed_files": 10,
        "created_at": "2019-03-11T02:59:12Z",
        "closed_at": "2019-03-12T02:23:31Z",
        "merged_at": "2019-03-12T02:23:31Z",
        "body": "Addresses #1109 - Fix unicode encoding for SNS messages",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 15,
        "deletions": 7,
        "changed_files": 3,
        "created_at": "2019-03-09T16:35:32Z",
        "closed_at": "2019-03-12T02:54:45Z",
        "merged_at": "2019-03-12T02:54:45Z",
        "body": "Closes #1102 \r\n\r\ncc @whummer \r\n\r\nAs mentioned in the issue, this only goes for Docker. I don't think it's worth doing it in localstack itself.\r\n\r\nMaybe one very minor point of attention though: `LOCALSTACK_HOSTNAME` environment variable does already exist in localstack as a read-only environment variable. It'll be overridden by the localstack process itself, so I don't think it will cause any problem, apart from some confusion maybe.\r\n\r\nThanks.",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 140,
        "deletions": 67,
        "changed_files": 5,
        "created_at": "2019-03-08T21:04:57Z",
        "closed_at": "2019-03-08T23:31:11Z",
        "merged_at": "2019-03-08T23:31:11Z",
        "body": "* fix memory usage for Java processes, specifically Elasticsearch and SQS\r\n* add CLI command to ssh/exec into the LocalStack container",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 11,
        "deletions": 3,
        "changed_files": 2,
        "created_at": "2019-03-08T01:57:51Z",
        "closed_at": "2019-03-08T03:46:51Z",
        "merged_at": "2019-03-08T03:46:51Z",
        "body": "Addresses #1119 - Fix using correct SSL cert",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 38,
        "deletions": 8,
        "changed_files": 8,
        "created_at": "2019-03-06T22:17:15Z",
        "closed_at": "2019-03-08T01:18:28Z",
        "merged_at": "2019-03-08T01:18:28Z",
        "body": "* addresses #1173 - Fix account ID for IAM responses\r\n* minor fix for #1118 - listener pass-through for DynamoDB shell requests",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 71,
        "deletions": 2,
        "changed_files": 5,
        "created_at": "2019-03-05T15:20:51Z",
        "closed_at": "2019-03-05T23:43:59Z",
        "merged_at": "2019-03-05T23:43:59Z",
        "body": "AWS released new Lambda Runtime \"Custom Runtime\" https://docs.aws.amazon.com/lambda/latest/dg/runtimes-custom.html\r\n\r\nThey also have tutorial https://docs.aws.amazon.com/lambda/latest/dg/runtimes-walkthrough.html\r\n\r\nIn this pull request I added support for \"Custom runtime\".\r\n\r\nI run tests on travis-CI here is results https://travis-ci.org/bogdangi/localstack/builds/502076674.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 98,
        "deletions": 50,
        "changed_files": 4,
        "created_at": "2019-03-05T06:13:14Z",
        "closed_at": "2019-03-05T13:19:18Z",
        "merged_at": "2019-03-05T13:19:18Z",
        "body": "Addresses #398 - return correct location for S3 multipart uploads, including cases where `HOSTNAME_EXTERNAL` is specified.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 26,
        "deletions": 21,
        "changed_files": 1,
        "created_at": "2019-03-04T13:44:09Z",
        "closed_at": "2019-03-04T19:41:34Z",
        "merged_at": "2019-03-04T19:41:34Z",
        "body": "In case of a failing data modification in dynamodb (other response codes than 200) the dynamodbstream was still getting the data.\r\nThis PR fixes this issue for UpdateItem, DeleteItem  and PutItem.\r\n\r\nFurther, if PutItem is a MODIFY, the OldImage should be provided in the dynamodb stream. This is fixed as well.\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 129,
        "deletions": 60,
        "changed_files": 11,
        "created_at": "2019-03-04T01:56:52Z",
        "closed_at": "2019-03-04T03:10:41Z",
        "merged_at": "2019-03-04T03:10:41Z",
        "body": "Fixes #294 - define dependent and composite services in config.\r\n\r\nThis PR introduces the notion of `API_DEPENDENCIES` and `API_COMPOSITES` in `infra.py`. \r\n\r\n`API_DEPENDENCIES` are used to define which APIs (e.g., `dynamodbstreams`) require which other APIs to be started as well (e.g., `kinesis`). The idea is that the user should not have to define the dependent APIs manually, but the framework should take care of this automatically.\r\n\r\n`API_COMPOSITES` allow to define sets of APIs under a shorthand name. For example, `SERVICES=serverless` refers to a set of APIs that are frequently used for Serverless applications. These composites can be combined with other custom APIs the that user specifies.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 12,
        "deletions": 8,
        "changed_files": 3,
        "created_at": "2019-03-03T15:14:51Z",
        "closed_at": "2019-03-03T18:38:44Z",
        "merged_at": "2019-03-03T18:38:44Z",
        "body": "* fix a bug on Python versions where `str` class has no `encode` method\r\n* make an HTTP call to determine whether a service is actually available ",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 220,
        "deletions": 30,
        "changed_files": 10,
        "created_at": "2019-03-03T00:17:41Z",
        "closed_at": "2019-03-03T04:34:35Z",
        "merged_at": "2019-03-03T04:34:35Z",
        "body": "* Add initial support for CloudWatch Logs\r\n* Extend Lambda API to forward invocation logs to CW Logs\r\n* Add assertions to Lambda test to make sure the logs were actually extracted and forwarded",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 27,
        "deletions": 4,
        "changed_files": 3,
        "created_at": "2019-02-27T21:25:53Z",
        "closed_at": "2019-02-28T23:20:05Z",
        "merged_at": "2019-02-28T23:20:05Z",
        "body": "* Fix lambda response (make sure we return proper JSON or strings)\r\n* Fix DynamoDB stream spec when creating streams using CloudFormation",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 81,
        "deletions": 29,
        "changed_files": 6,
        "created_at": "2019-02-26T12:16:32Z",
        "closed_at": "2019-02-26T15:09:51Z",
        "merged_at": "2019-02-26T15:09:51Z",
        "body": "Fix handling of Lambda invocation results.\r\n\r\n* Update `flask` to latest version (fixes an issue with chunked transfer encoding in Lambda API)\r\n* Fix Step Functions integration test (previously were hanging as soon as more than one state was defined in the state machine)\r\n* Return `X-Amz-Function-Error` header in Lambda API",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 235,
        "deletions": 108,
        "changed_files": 10,
        "created_at": "2019-02-24T19:22:49Z",
        "closed_at": "2019-02-24T21:35:54Z",
        "merged_at": "2019-02-24T21:35:54Z",
        "body": "* Fix mapping of environment variables in Lambda functions\r\n* Ensure that the CloudFormation `Ref` attribute returns the appropriate value (ARN instead of resource name)\r\n* Support updates in CF template deployment (e.g., update environment variables of a Lambda)\r\n* Correctly set `physical_resource_id` in the `moto` resource objects that represent the CF stack",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 433,
        "deletions": 25,
        "changed_files": 11,
        "created_at": "2019-02-24T05:19:25Z",
        "closed_at": "2019-02-28T21:51:42Z",
        "merged_at": "2019-02-28T21:51:42Z",
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\nAdd the ability for events triggered by SQS to be deserialized properly into SQSEvents before sending to the lambda.",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 26,
        "deletions": 14,
        "changed_files": 7,
        "created_at": "2019-02-23T21:23:46Z",
        "closed_at": "2019-02-24T00:05:27Z",
        "merged_at": "2019-02-24T00:05:27Z",
        "body": "* Release version 0.9.0\r\n* Add `DOCKER_FLAGS` config variable\r\n* Update docs for Serverless integration",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 77,
        "deletions": 23,
        "changed_files": 6,
        "created_at": "2019-02-23T02:51:16Z",
        "closed_at": "2019-02-23T16:39:57Z",
        "merged_at": "2019-02-23T16:39:57Z",
        "body": "* Add support for mounting Lambda code locally. The primary goal is to make local Serverless applications deploy faster and with lower memory footprint.\r\n* Add a simple `/_stats` endpoint in CloudFormation API for basic memory profiling\r\n* Adjust max heap size for Java processes",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 137,
        "deletions": 49,
        "changed_files": 12,
        "created_at": "2019-02-21T04:59:44Z",
        "closed_at": "2019-02-21T06:00:34Z",
        "merged_at": "2019-02-21T06:00:34Z",
        "body": "* Add IAM service stub\r\n* Fix AttributeError in moto's CloudFormation describe_stack_resource\r\n* Refactor/optimize Dockerfile",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2019-02-21T00:26:25Z",
        "closed_at": "2019-02-21T02:23:55Z",
        "merged_at": "2019-02-21T02:23:55Z",
        "body": "Avoid surprises like\r\nhttps://github.com/localstack/localstack/issues/1136\r\n\r\n**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 4,
        "deletions": 4,
        "changed_files": 4,
        "created_at": "2019-02-20T15:29:03Z",
        "closed_at": "2019-05-27T06:10:51Z",
        "merged_at": null,
        "body": "The [latest AWS-supported Elasticsearch version is 6.4](https://docs.aws.amazon.com/elasticsearch-service/latest/developerguide/what-is-amazon-elasticsearch-service.html#aes-choosing-version), and the AWS documentation \"strongly recommends\" using the latest supported version.\r\n\r\nThis PR is a clone of #694.",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 293,
        "deletions": 121,
        "changed_files": 12,
        "created_at": "2019-02-19T23:51:01Z",
        "closed_at": "2019-02-20T12:46:39Z",
        "merged_at": "2019-02-20T12:46:39Z",
        "body": "Add CloudFoundry integration for Step Functions and API Gateway",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 187,
        "deletions": 52,
        "changed_files": 12,
        "created_at": "2019-02-18T22:53:33Z",
        "closed_at": "2019-02-19T00:15:04Z",
        "merged_at": "2019-02-19T00:15:03Z",
        "body": "Fixes #412 - Add initial support for AWS Step Functions.",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 231,
        "deletions": 141,
        "changed_files": 9,
        "created_at": "2019-02-18T05:58:01Z",
        "closed_at": "2019-02-18T15:13:28Z",
        "merged_at": "2019-02-18T15:13:28Z",
        "body": "This PR refactors the CloudFormation (CF) implementation.\r\n\r\nThe main change is to rebase the API onto the latest version of `moto`'s CF implementation. We currently use `moto` as the backend for CRUD functionality of CF stacks, as well as keeping track of CF events. However, in `moto` the CF implementation is tightly coupled to the other AWS service stubs (e.g., in-memory creation of CF resources like S3 buckets, Lambda functions, etc), which is not suitable for our purposes.\r\n\r\nTherefore, in this PR we introduce a loose coupling between moto's CF's and our own APIs, by patching some methods in `moto` and forwarding CF requests to our `template_deployer.py` implementation.\r\n\r\nThis PR also contains some cleanup and removal of old/deprecated/unneeded code.",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 25,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2019-02-11T18:10:17Z",
        "closed_at": "2019-02-23T21:31:09Z",
        "merged_at": "2019-02-23T21:31:09Z",
        "body": "Issue is outlined in\r\nhttps://github.com/localstack/localstack/issues/869\r\nand\r\nhttps://github.com/localstack/localstack/issues/538\r\n(Specifically\r\nhttps://github.com/localstack/localstack/issues/538#issuecomment-424379644)\r\n\r\nOne of the external symptoms of the bug is that S3 interactions for\r\nobjects that are only the null string (zero length objects) throw\r\nan error like\r\n`Client calculated content hash (contentMD5: 1B2M2Y8AsgTpgAmY7PhCfg== in base 64) didn't match hash (etag: ...`\r\nwhich is telling because the `contentMD5` value is the base64 encoded\r\nvalue for the md5 of null string. The correct etag value should be\r\n`d41d8cd98f00b204e9800998ecf8427e`.\r\n\r\nOn multiple executions of the test case the etag generated by the S3\r\nserver is different so there is some non deterministic value being put\r\ninto the hash function. I haven't been able to find where the actual\r\nissue exists in the code as I don't use python very often.\r\n\r\nOne workaround for avoiding this issue is to disable the MD5 validations\r\nin the S3 client. For Java that means setting the following properties\r\nto any value.\r\n```\r\ncom.amazonaws.services.s3.disableGetObjectMD5Validation\r\ncom.amazonaws.services.s3.disablePutObjectMD5Validation\r\n```\r\n\r\n**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 3,
        "changed_files": 1,
        "created_at": "2019-01-29T03:39:40Z",
        "closed_at": "2019-01-30T20:34:19Z",
        "merged_at": "2019-01-30T20:34:19Z",
        "body": "[subprocess.Popen.wait](https://docs.python.org/3/library/subprocess.html#subprocess.Popen.wait)\r\n\r\n> This will deadlock when using stdout=PIPE or stderr=PIPE and the child process generates enough output to a pipe such that it blocks waiting for the OS pipe buffer to accept more data. Use Popen.communicate() when using pipes to avoid that.\r\n\r\nexample:\r\n```bash\r\n$ dd if=/dev/zero of=file.txt count=1024 bs=1024\r\n```\r\n```python\r\nimport subprocess\r\nprocess = subprocess.Popen('cat file.txt', shell=True, stdin=subprocess.PIPE, bufsize=-1, stderr=subprocess.PIPE, stdout=subprocess.PIPE, cwd=None)\r\nprocess.wait()  # hanging\r\n```",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 24,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2019-01-28T13:06:07Z",
        "closed_at": "2019-02-21T00:40:30Z",
        "merged_at": "2019-02-21T00:40:30Z",
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 3
    },
    {
        "merged": false,
        "additions": 25,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2019-01-28T13:04:09Z",
        "closed_at": "2019-01-28T17:45:31Z",
        "merged_at": null,
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2019-01-24T21:14:37Z",
        "closed_at": "2019-01-28T03:17:24Z",
        "merged_at": "2019-01-28T03:17:24Z",
        "body": "This PR exposes the port 4584 which is used by the secretsmanager service.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 6,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2019-01-23T17:25:38Z",
        "closed_at": "2019-01-28T14:21:55Z",
        "merged_at": "2019-01-28T14:21:55Z",
        "body": "When the AWS SDK requests the S3 bucket lifecycle it expects to have at least the root element LifecycleConfiguration and the current code does not return the expected result.\r\n\r\n**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 7,
        "deletions": 4,
        "changed_files": 2,
        "created_at": "2019-01-18T09:42:39Z",
        "closed_at": "2019-01-27T23:38:22Z",
        "merged_at": "2019-01-27T23:38:22Z",
        "body": "#1088 \r\n\r\nManually tested with one of my `dotnetcore2.1` lambdas. Will add tests if needed for this PR.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 78,
        "deletions": 38,
        "changed_files": 2,
        "created_at": "2019-01-12T21:34:50Z",
        "closed_at": "2019-01-27T23:32:24Z",
        "merged_at": "2019-01-27T23:32:24Z",
        "body": "Fix test failures while running in JDK 9 and above due to failure to destroy process from removal of UNIXProcess class in java 9.\r\n",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 52,
        "deletions": 37,
        "changed_files": 2,
        "created_at": "2019-01-11T20:43:54Z",
        "closed_at": "2019-01-28T00:24:00Z",
        "merged_at": "2019-01-28T00:24:00Z",
        "body": "~~I'm creating this PR to trigger TravisCI and (hopefully) reproduce the bug I think I've discovered in #1084.  Sorry for the spam; it's the quickest way for me to run the tests.~~\r\n\r\nThis is a fix for #1084.  I've squashed it to a single commit as requested, but this means you can't see the tests failing.  Should I split this into two commits, one that adds failing tests and one that fixes the bug?",
        "comments": 7
    },
    {
        "merged": true,
        "additions": 29,
        "deletions": 3,
        "changed_files": 3,
        "created_at": "2019-01-10T11:20:47Z",
        "closed_at": "2019-01-27T22:53:22Z",
        "merged_at": "2019-01-27T22:53:21Z",
        "body": "Fix #1035\r\n\r\ninstall ES plugin by  supports Amazon Elasticsearch Service\r\nhttps://docs.aws.amazon.com/elasticsearch-service/latest/developerguide/aes-supported-plugins.html",
        "comments": 6
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2019-01-06T21:35:55Z",
        "closed_at": "2019-01-07T07:36:55Z",
        "merged_at": "2019-01-07T07:36:55Z",
        "body": "This PR changes the build badges to SVG for sharper readability \u2728",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 29,
        "deletions": 28,
        "changed_files": 3,
        "created_at": "2019-01-02T10:01:02Z",
        "closed_at": "2019-01-04T09:58:15Z",
        "merged_at": "2019-01-04T09:58:14Z",
        "body": "* Addresses #1033 - Add kclpy to pip package\r\n* Fixes #1073 (update badge links in README)",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 490,
        "deletions": 330,
        "changed_files": 5,
        "created_at": "2019-01-02T00:17:39Z",
        "closed_at": "2019-01-02T10:12:26Z",
        "merged_at": "2019-01-02T10:12:26Z",
        "body": "Supersedes #1058. This PR builds on top of PR #1058 and applies a few minor fixes. Specifically, it fixes an issue related to getting status of Lambda Docker containers with overlapping names (function names that share the same prefix).\r\n\r\nTo preserve the original commits by @mhmoudgmal , the commits will *not* be squashed when merging the PR.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 58,
        "deletions": 70,
        "changed_files": 9,
        "created_at": "2018-12-31T15:11:37Z",
        "closed_at": "2019-01-01T15:01:10Z",
        "merged_at": "2019-01-01T15:01:10Z",
        "body": "* use upstream moto\r\n* update dependencies (fix #1066)\r\n* fix error logging on startup (addresses #1046)",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 3,
        "changed_files": 3,
        "created_at": "2018-12-21T15:45:24Z",
        "closed_at": "2018-12-21T17:23:14Z",
        "merged_at": "2018-12-21T17:23:14Z",
        "body": "Minor fixes:\r\n* fix typo\r\n* update python version in `setup.py`\r\n* slightly increase startup sleep time (some users have reported errors that seem to be related)",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2018-12-20T12:02:42Z",
        "closed_at": "2018-12-21T15:38:50Z",
        "merged_at": "2018-12-21T15:38:50Z",
        "body": "",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2018-12-18T20:20:42Z",
        "closed_at": "2018-12-21T15:38:07Z",
        "merged_at": "2018-12-21T15:38:07Z",
        "body": "When you `pip install localstack` it wont work, due to version conflict of the module `PyYAML` so this fixes #1052 ",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 474,
        "deletions": 319,
        "changed_files": 4,
        "created_at": "2018-12-13T20:21:38Z",
        "closed_at": "2019-01-02T00:19:52Z",
        "merged_at": null,
        "body": "On dockerhub (https://hub.docker.com/r/lambci/lambda/tags/) there is already an image for ruby runtime.\r\n\r\nAlso I've tested these changes using a simple code you can find here [index.zip](https://github.com/localstack/localstack/files/2677574/index.zip)\r\n\r\nCloses #1057 ",
        "comments": 7
    },
    {
        "merged": false,
        "additions": 56,
        "deletions": 5,
        "changed_files": 4,
        "created_at": "2018-12-10T23:36:26Z",
        "closed_at": "2021-09-06T21:48:03Z",
        "merged_at": null,
        "body": "Added the functionality to keep track fo how long a lambda has been running. get_remaining_time_in_millis() now will return how much longer the lambda can run before it will be killed.\n\nTests: To test this we implemented test_lambda_remaining_time() that runs two lambdas. The first lambda sleeps for 5 seconds and then we check to make sure it has passed it's timeout. The other returns instantly and a check is done to make sure that there is still time left in its 5 second timeout.\n\n\n\n\u2506Issue is synchronized with this [Jira Bug](https://localstack.atlassian.net/browse/LOC-84) by [Unito](https://www.unito.io/learn-more)\n",
        "comments": 6
    },
    {
        "merged": true,
        "additions": 341,
        "deletions": 284,
        "changed_files": 3,
        "created_at": "2018-12-10T19:13:52Z",
        "closed_at": "2019-01-28T03:15:39Z",
        "merged_at": "2019-01-28T03:15:39Z",
        "body": "Refactor issue https://github.com/localstack/localstack/issues/614\r\n\r\nRefactor to add a static helper method for readability and testability.\r\n\r\nThis helper method makes it explicit how we notify on Multipart Uploads; the only POST operations that starts with `uploadId`\r\n\r\nAdded an integration test for s3 multipart upload and unit tests.\r\n\r\n    Name                                                            Stmts   Miss  Cover   Missing\r\n    ---------------------------------------------------------------------------------------------\r\n    localstack/services/s3/s3_listener.py                             319     63    80%   61, 64-66, 147-148, 154-155, 161-167, 170, 175-185, 200-203, 229, 231, 240-250, 255-260, 275-280, 429, 437, 459, 462-463, 466-469, 472, 482, 491-493, 514\r\n    ---------------------------------------------------------------------------------------------\r\n    TOTAL                                                            6008   1563    74%\r\n    ----------------------------------------------------------------------\r\n    Ran 89 tests in 172.724s\r\n\r\n    Name                                                            Stmts   Miss  Cover   Missing\r\n    ---------------------------------------------------------------------------------------------\r\n    localstack/services/s3/s3_listener.py                             325     63    81%   61, 64-66, 147-148, 154-155, 161-167, 170, 175-185, 200-203, 229, 231, 240-250, 255-260, 275-280, 429, 437, 459, 462-463, 466-469, 472, 482, 491-493, 512\r\n    ---------------------------------------------------------------------------------------------\r\n    TOTAL                                                            6015   1581    74%\r\n    ----------------------------------------------------------------------\r\n    Ran 91 tests in 164.321s",
        "comments": 5
    },
    {
        "merged": false,
        "additions": 3,
        "deletions": 3,
        "changed_files": 1,
        "created_at": "2018-12-10T18:47:44Z",
        "closed_at": "2019-04-13T14:15:15Z",
        "merged_at": null,
        "body": "This PR makes it so when you create and run a lambda that it uses the default timeout(currently 3 second) unless otherwise specified. It relates to [this](https://github.com/localstack/localstack/issues/584) issue.\r\n\r\nTests: I didn't add tests because it is just adding a default value when finding an object in the data dictionary.\r\n",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 133,
        "deletions": 136,
        "changed_files": 2,
        "created_at": "2018-12-08T22:56:19Z",
        "closed_at": "2018-12-09T00:44:52Z",
        "merged_at": "2018-12-09T00:44:51Z",
        "body": "In https://github.com/localstack/localstack/pull/997 I needed to reuse in tests some of the helper methods defined in **apigateway_listener** In this PR I continued extracting the rest to the **helpers** module.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 10,
        "deletions": 2,
        "changed_files": 3,
        "created_at": "2018-12-08T21:30:25Z",
        "closed_at": "2018-12-09T00:39:29Z",
        "merged_at": "2018-12-09T00:39:29Z",
        "body": "First, thanks for your amazing work on `localstack`!\r\n\r\nPlease treat this as a start of a conversation rather than a full-featured PR. I'm not certain that this is the right direction and would love your feedback.\r\n\r\n## Motivation\r\n\r\nThe issue I'm having is that I'm running `localstack` behind a proxy, which is running on a specific host (which is covered by `HOSTNAME_EXTERNAL`, but is also on a different port from that of the proxy. So, when SQS returns the queue URL it returns the `HOSTNAME_EXTERNAL` that I set, but returns the local port and not the port that the client requests the proxy with.\r\n\r\n`[proxy:80]` -> `[localstack:4576]` -> `[elasticmq:4561]`\r\n\r\nWhat I've done at the moment, is I've set my SQS port to `:80` (which is what my proxy wants). This works, but in my opinion is more of a workaround because any other service needs to return a URL pointing back to itself, I will not be able to also put it on `:80` as it will be taken by SQS.\r\n\r\n## Proposed solution\r\n\r\nSo, the solution I'm proposing is to define a `<SERVICE>_PORT_EXTERNAL` and use that along with `HOSTNAME_EXTERNAL`. Alternatively (and if there are no plans to use `HOSTNAME_EXTERNAL` as a single external hostname for all services) we can change it to something like `<SERVICE>_EXTERNAL_URI`, which would be a `host:port` combination specific to a service.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 55,
        "deletions": 5,
        "changed_files": 2,
        "created_at": "2018-12-06T23:59:40Z",
        "closed_at": "2019-03-13T04:51:14Z",
        "merged_at": "2019-03-13T04:51:14Z",
        "body": "Implement a helper function to check for the existence of a bucket before performing a CORS operation on the bucket. If the bucket does not exist, the status code is returned in the response.",
        "comments": 3
    },
    {
        "merged": false,
        "additions": 76,
        "deletions": 3,
        "changed_files": 3,
        "created_at": "2018-12-06T22:44:28Z",
        "closed_at": "2018-12-10T19:14:47Z",
        "merged_at": null,
        "body": "\r\nFix: https://github.com/localstack/localstack/issues/614\r\n\r\nS3 Multipart Uploads notifications were not triggering Lambdas because we ignored all operations that included a query.\r\n\r\nAllow this Multipart Uploads are the only POST operations that starts with `uploadId`, so we can allow this case explicitly to send a notification.\r\n\r\nTESTING\r\nAdded an integration test for s3 multipart upload and unit tests.\r\n\r\nCOVERAGE BEFORE\r\nName                                                                              Stmts   Miss  Cover\r\nlocalstack/services/s3/s3_listener.py                             319     63    80% \r\nTOTAL                                                                               6008   1563    74%\r\nRan 89 tests in 172.724s\r\n\r\nCOVERAGE AFTER\r\nName                                                                              Stmts   Miss  Cover \r\nlocalstack/services/s3/s3_listener.py                             325     63    81%  \r\nTOTAL                                                                               6015   1581    74%\r\nRan 91 tests in 164.321s",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 34,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2018-11-29T22:54:47Z",
        "closed_at": "2018-12-06T18:52:08Z",
        "merged_at": "2018-12-06T18:52:08Z",
        "body": "Finally, added the doc... ;)\r\n\r\nBest Regards,",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2018-11-28T09:12:21Z",
        "closed_at": "2018-12-12T13:52:19Z",
        "merged_at": "2018-12-12T13:52:19Z",
        "body": "fix #1024 ",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2018-11-27T14:18:39Z",
        "closed_at": "2019-03-03T15:03:26Z",
        "merged_at": "2019-03-03T15:03:26Z",
        "body": "This fixes an error when sending a JSON encoded list via an AWS_PROXY to a lambda function.\r\nWhen using the `aws-lambda-go/lambda` Go package the error looks like:\r\n```\r\n{\r\n  \"errorMessage\": \"json: cannot unmarshal array into Go struct field APIGatewayProxyRequest.body of type string\",\r\n  \"errorType\": \"UnmarshalTypeError\"\r\n}\r\nTraceback (most recent call last):\r\n    File \"/opt/code/localstack/localstack/services/awslambda/lambda_api.py\", line 301, in run_lambda event, context=context, version=version, asynchronous=asynchronous)\r\n    File \"/opt/code/localstack/localstack/services/awslambda/lambda_executors.py\", line 136, in execute result, log_output = self.run_lambda_executor(cmd, environment, asynchronous)\r\n    File \"/opt/code/localstack/localstack/services/awslambda/lambda_executors.py\", line 69, in run_lambda_executor (return_code, log_output))\r\nException: Lambda process returned error status code: 1. Output:\r\n2018/11/27 14:01:16 [console]\r\n\r\n```\r\n\r\nIf the payload is send to lambda function it should be encoded as a JSON string.\r\nI don't know if the other `isinstance(...., dict)` checks in the function should be extended too, and check for lists.\r\n\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 2,
        "changed_files": 3,
        "created_at": "2018-11-26T05:22:02Z",
        "closed_at": "2018-11-26T13:08:36Z",
        "merged_at": "2018-11-26T13:08:36Z",
        "body": "Release version 0.8.8",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 32,
        "deletions": 3,
        "changed_files": 5,
        "created_at": "2018-11-23T09:40:18Z",
        "closed_at": "2019-02-19T00:45:56Z",
        "merged_at": "2019-02-19T00:45:56Z",
        "body": "Primarily this can be used to create resources on localstack which is why the aws cli is also installed so the script running inside container can use it.\r\n\r\nIt solves problems like https://github.com/localstack/localstack/issues/1014\r\n\r\n**Please refer to the contribution guidelines in the README when submitting PRs.**",
        "comments": 15
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2018-11-22T21:57:37Z",
        "closed_at": "2018-11-23T15:27:43Z",
        "merged_at": "2018-11-23T15:27:42Z",
        "body": "See https://github.com/localstack/localstack/pull/898#issuecomment-441098463\r\n\r\n**Please refer to the contribution guidelines in the README when submitting PRs.**",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 100,
        "deletions": 8,
        "changed_files": 7,
        "created_at": "2018-11-22T15:03:34Z",
        "closed_at": "2018-11-29T03:55:34Z",
        "merged_at": "2018-11-29T03:55:34Z",
        "body": "* just permit to use own ssl cert without Random (S3)\r\n\r\n* add cache-control header to cors",
        "comments": 6
    },
    {
        "merged": true,
        "additions": 6,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2018-11-14T03:05:07Z",
        "closed_at": "2018-11-22T18:18:01Z",
        "merged_at": "2018-11-22T18:18:01Z",
        "body": "I've ran into a 'File exists' OSError a few times on the os.makedirs() call and this should take care of this unlikely but possible case.",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2018-11-09T15:21:55Z",
        "closed_at": "2018-11-22T18:16:51Z",
        "merged_at": "2018-11-22T18:16:51Z",
        "body": "Related to #960, while that PR meant that the `queryStringParameters` are passed to the lambda if it's called, a bug in the get_resource_for_path function meant it was never actually possible to invoke a lambda via a URL if you added a query string, as the regexp was excluding `?` characters and not allowing for them on the end.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 60,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2018-11-06T15:00:22Z",
        "closed_at": "2018-12-08T17:18:52Z",
        "merged_at": "2018-12-08T17:18:52Z",
        "body": "* Updated check to send notifications to see if a multipart upload has been completed\r\n* Added spec to upload a file larger than 64MB, which is the default threshold to break up file uploads\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 356,
        "deletions": 243,
        "changed_files": 6,
        "created_at": "2018-11-02T22:06:37Z",
        "closed_at": "2018-12-07T17:51:25Z",
        "merged_at": "2018-12-07T17:51:25Z",
        "body": "requestContext\r\n---\r\nAccording to aws docs https://docs.aws.amazon.com/apigateway/latest/developerguide/api-gateway-create-api-as-simple-proxy-for-lambda.html\r\n\r\nthe event that is passed to the lambda when aws_proxy integration type is used, should contain `requestContext` object that contains some information about the request.\r\n\r\nIn my case I use this object to get the the `sourceIp` of the request where my lambda behaviour depends on that `sourceIp`:\r\n\r\n```js\r\nconst remoteIp = requestContext.identity.sourceIp;\r\n```\r\nSo this PR is a solution to support the missing object in general, and in particular to support some of the information that my lambda behaviour depends on it such as the `sourceIP`\r\n\r\ncloses #996 ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2018-10-30T14:56:51Z",
        "closed_at": "2018-10-31T09:16:53Z",
        "merged_at": "2018-10-31T09:16:53Z",
        "body": "Fix #992 by checking the topic ARN is not None in SNS forwarding function",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 24,
        "deletions": 22,
        "changed_files": 9,
        "created_at": "2018-10-29T17:54:00Z",
        "closed_at": "2018-10-30T14:25:18Z",
        "merged_at": "2018-10-30T14:25:18Z",
        "body": "Fix lint errors that were introduced in a recent upgrade of the `flake8` package.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 19,
        "deletions": 3,
        "changed_files": 2,
        "created_at": "2018-10-28T22:09:14Z",
        "closed_at": "2018-11-01T14:58:24Z",
        "merged_at": "2018-11-01T14:58:24Z",
        "body": "Found out that the `LatestStreamArn` was returning the stream name with the `ddblocal` region. This PR extends the region replacement to also apply to that field.",
        "comments": 8
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2018-10-26T09:51:59Z",
        "closed_at": "2018-10-31T00:10:07Z",
        "merged_at": "2018-10-31T00:10:07Z",
        "body": "I had a lambda function being invoked by an SNS topic. I was getting very confused about why my lambda's printing to stdout was appearing in batches of 5 at once. Turns out this was nothing to do with localstack's sns+lambda doing some strange batching, but just Python's output buffering.\r\n\r\nThis sets the env-var to disable buffering in Docker, and I have verified this fixes my problem. Should I actually set this somewhere else so it works for non-Docker users? Though that might have surprising knock-on effects when it is not isolated with a container (ie, the env-var will affect other, non-localstack code).",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 55,
        "deletions": 11,
        "changed_files": 2,
        "created_at": "2018-10-23T11:37:54Z",
        "closed_at": "2018-12-15T23:03:00Z",
        "merged_at": "2018-12-15T23:03:00Z",
        "body": "Correctly map SNS message attributes to SQS message attributes when RawMessageDelivery is enabled.\r\n\r\nFixes #655",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2018-10-13T04:13:15Z",
        "closed_at": "2018-10-15T17:09:48Z",
        "merged_at": "2018-10-15T17:09:48Z",
        "body": "I'm happy that SecretsManager is available in LocalStack. Thanks for release!",
        "comments": 5
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2018-10-13T01:48:16Z",
        "closed_at": "2018-10-15T17:09:12Z",
        "merged_at": "2018-10-15T17:09:12Z",
        "body": "Closes #951",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 35,
        "deletions": 3,
        "changed_files": 5,
        "created_at": "2018-10-12T12:32:36Z",
        "closed_at": "2018-10-18T22:06:27Z",
        "merged_at": "2018-10-18T22:06:27Z",
        "body": "queryStringParameters.\r\n---\r\n\r\nThis is how the apigateway request is translated to an event for lambda AWS_PROXY integration in localstack.\r\n\r\nthis is my path_part definition `v1.2.0/{locale}/ab-tester/{target}`\r\n.\r\n.\r\n.\r\n\r\n```js\r\n2018-09-28T11:31:51.571Z        b8de8ee4-ccde-12c8-68a1-44e666a4b318    Request:  { \r\n  body: '',\r\n  headers:\r\n   { \r\n     'content-length': '0',\r\n     'accept-encoding': 'gzip, deflate',\r\n     host: 'localhost:4567',\r\n     accept: '*/*',\r\n     'user-agent': 'Mozilla',\r\n     connection: 'keep-alive',\r\n     'cache-control': 'no-cache',\r\n     'content-type': 'application/x-www-form-urlencoded' \r\n  },\r\n  resource: '/restapis/A-Z40542153A-Z/dev/_user_request_/v1.2.0/de/ab-tester/learn_language_filter_target?learn_language_alpha3=POR',\r\n  queryStringParameters: {},\r\n  httpMethod: 'POST',\r\n  stageVariables: {},\r\n  path: '/v1.2.0/de/ab-tester/learn_language_filter_target?learn_language_alpha3=POR',\r\n  pathParameters: { \r\n     locale: 'de',\r\n     target: 'learn_language_filter_target?learn_language_alpha3=POR' \r\n  },\r\n  isBase64Encoded: false \r\n}\r\n```\r\n\r\nObviously the **queryStringParams** is not supported yet, and also the resource path will include the part after `?` as part of the the path.\r\n\r\nSo this is PR to support queryStringParameters.\r\n\r\n----\r\n\r\nAfter building the docker image for these changes, this is how the new request looks like\r\n\r\n```js\r\nSTART RequestId: c2289296-c19c-10d9-f875-7a7bd4991c8d Version: $LATEST\r\n2018-10-12T12:21:01.432Z        c2289296-c19c-10d9-f875-7a7bd4991c8d    Request:  { \r\n  body: '',\r\n  headers:\r\n   { \r\n     'content-length': '0',\r\n     'accept-encoding': 'gzip, deflate',\r\n     connection: 'keep-alive',\r\n     accept: '*/*',\r\n     'user-agent': 'PostmanRuntime/7.3.0',\r\n     host: 'localhost:4567',\r\n     'cache-control': 'no-cache',\r\n     'postman-token': '60b85d39-b930-4443-977d-02bd5ffc8c72' },\r\n  resource: '/restapis/9A-Z30798483/dev/_user_request_/v1.2.0/de/ab-tester/blabla?foo=foo&bar=bar&bar=baz',\r\n  queryStringParameters: { foo: 'foo', bar: [ 'bar', 'baz' ] },\r\n  httpMethod: 'POST',\r\n  stageVariables: {},\r\n  path: '/v1.2.0/de/ab-tester/blabla',\r\n  pathParameters: { locale: 'de', target: 'blabla' },\r\n  isBase64Encoded: false \r\n}\r\n```",
        "comments": 3
    },
    {
        "merged": false,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2018-10-09T10:02:53Z",
        "closed_at": "2018-10-09T11:22:22Z",
        "merged_at": null,
        "body": "\r\n",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 54,
        "deletions": 12,
        "changed_files": 5,
        "created_at": "2018-10-06T00:18:52Z",
        "closed_at": "2018-10-06T02:11:22Z",
        "merged_at": "2018-10-06T02:11:22Z",
        "body": "Fix extraction of Java Lambda archives. Should fix the broken build in #937",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 62,
        "deletions": 6,
        "changed_files": 12,
        "created_at": "2018-09-20T23:24:55Z",
        "closed_at": "2018-10-06T19:05:45Z",
        "merged_at": "2018-10-06T19:05:45Z",
        "body": "* Add Secrets Manager support\r\n* Integration test to create and retrieve secret\r\n* PR open to add this to the python-client https://github.com/localstack/localstack-python-client/pull/11",
        "comments": 7
    },
    {
        "merged": true,
        "additions": 204,
        "deletions": 1,
        "changed_files": 5,
        "created_at": "2018-09-12T17:42:40Z",
        "closed_at": "2019-02-23T16:38:10Z",
        "merged_at": "2019-02-23T16:38:10Z",
        "body": "1) Add S3EventParser class\r\n2) Extend LambdaExecutor.java to call S3EventParser for s3 events\r\n3) Add S3EventMappingTest.java\r\n4) Add /resources/S3EventLambda.json\r\n",
        "comments": 12
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2018-09-11T01:07:44Z",
        "closed_at": "2018-09-12T19:43:40Z",
        "merged_at": "2018-09-12T19:43:40Z",
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2018-09-07T02:21:59Z",
        "closed_at": "2018-09-12T19:43:05Z",
        "merged_at": "2018-09-12T19:43:05Z",
        "body": "Fix query parameter parsing in s3 put bucket notification configuration api call.\r\n\r\nDetails on issue can be found here...\r\nhttps://github.com/localstack/localstack/issues/872\r\n\r\n",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 35,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2018-09-06T20:07:49Z",
        "closed_at": "2018-09-09T17:26:39Z",
        "merged_at": "2018-09-09T17:26:39Z",
        "body": "* Initial fix submitted here: https://github.com/localstack/localstack/pull/859\r\n* Adds integration test to excercise downloading gzip file.\r\n\r\n**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n\r\n@t0rr3sp3dr0\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2018-08-29T03:17:13Z",
        "closed_at": "2018-08-29T14:50:24Z",
        "merged_at": "2018-08-29T14:50:24Z",
        "body": "Fix URL suffix for Elasticsearch Service `/tags` endpoint. This has been causing test errors with recent versions of `botocore`",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 107,
        "deletions": 6,
        "changed_files": 7,
        "created_at": "2018-08-17T13:31:36Z",
        "closed_at": "2018-09-01T16:48:35Z",
        "merged_at": "2018-09-01T16:48:35Z",
        "body": "Currently event notification configurations for lambda functions that use an SQS queue as the source are not taken into account. This PR adds that functionality based on the implementation of a similar Kinesis/Lambda interaction.",
        "comments": 5
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2018-08-16T12:07:25Z",
        "closed_at": "2018-08-17T01:43:42Z",
        "merged_at": "2018-08-17T01:43:42Z",
        "body": "update docs to mention docker requirements where the version of docker-compose was not mentioned\r\n\r\n16th August 2018",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 87,
        "deletions": 6,
        "changed_files": 4,
        "created_at": "2018-08-13T23:07:21Z",
        "closed_at": "2018-11-22T18:15:40Z",
        "merged_at": "2018-11-22T18:15:40Z",
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 7
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2018-08-13T19:36:51Z",
        "closed_at": "2018-09-03T13:23:47Z",
        "merged_at": "2018-09-03T13:23:47Z",
        "body": "As it was mentioned in this previous pr introducing support for FIFO queues (https://github.com/localstack/localstack/pull/880), the merge done on elasticmq an hour ago (https://github.com/adamw/elasticmq/pull/148) and the release of v 0.14.5 will allow to create FIFO queues with terraform using localstack.\r\n\r\nIf you consider it interesting, I may add a ci step in a separated PR testing the creation of resources via terraform for several services. This will ensure the compatibility with them and provide some examples (@apparentlymart would it be interesting for you as well?)",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2018-08-10T07:53:25Z",
        "closed_at": "2018-09-02T18:05:38Z",
        "merged_at": "2018-09-02T18:05:38Z",
        "body": "As it was suggest in the issue https://github.com/localstack/localstack/issues/889 a new version of moto has been recently released.\r\n\r\nChangelog:\r\n\r\nhttps://github.com/spulec/moto/blob/master/CHANGELOG.md#134\r\n\r\n```\r\n* IAM get account authorization details\r\n* adding account id to ManagedPolicy ARN\r\n* APIGateway usage plans and usage plan keys\r\n* ECR list images\r\n```\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 5,
        "deletions": 5,
        "changed_files": 1,
        "created_at": "2018-08-06T10:36:43Z",
        "closed_at": "2018-08-09T00:51:18Z",
        "merged_at": "2018-08-09T00:51:18Z",
        "body": "When an exception is thrown in this block before `this.localStackContainer` is initialized, then `stop()` is not invoked. However, in https://github.com/localstack/localstack/blob/a35b8d18286e4db8e8ac41931d7d61befc3a9ae8/localstack/ext/java/src/main/java/cloud/localstack/docker/LocalstackDockerTestRunner.java#L45, `stop()` is called unconditionally and produces a `NullPointerException`.\r\n",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 46,
        "deletions": 19,
        "changed_files": 6,
        "created_at": "2018-08-04T14:52:08Z",
        "closed_at": "2018-11-22T17:23:12Z",
        "merged_at": null,
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\nCase scenario:\r\n Given Docker Compose stack, where one of the lambdas spawned needs to communicate to a mongo db image in the same stack. While all other images may be sharing networks, the newly spawned docker image for the lambda is not connected to the network.\r\n\r\n Thus the connection and lambda fails.\r\n\r\nFix Provided:\r\n-  Added STACK_NETWORK variable in the configuration variables.\r\n-  Added support for network option being called when STACK_NETWORK is set in docker-compose\r\n-  Added Documentation for the same",
        "comments": 6
    },
    {
        "merged": true,
        "additions": 21,
        "deletions": 16,
        "changed_files": 6,
        "created_at": "2018-08-03T14:32:32Z",
        "closed_at": "2018-08-09T00:15:06Z",
        "merged_at": "2018-08-09T00:15:06Z",
        "body": "I opened this morning an issue about upgrading elasticmq dependency: https://github.com/localstack/localstack/issues/879\r\n\r\nIt seems that after the merge of adamw/elasticmq#143 FIFO queues should be available so I tried to bump to a more recent version. Not sure I missed something but I tried to create one FIFO queue and it still seems to not work\r\n\r\n*Step to reproduce*\r\n\r\n```\r\n$ docker build -t localstack:custom .\r\n$ docker run -d -e SERVICES=sqs -p 4576:4576 localstack:custom\r\n$ aws --endpoint-url=http://localhost:4576 sqs list-queues\r\n# empty output without queues\r\n```\r\n\r\nI created then the following terraform configuration:\r\n\r\nReferences:\r\nhttps://github.com/localstack/localstack/issues/718\r\nhttps://www.terraform.io/docs/providers/aws/r/sqs_queue.html\r\n\r\n```tf\r\nprovider \"aws\" {\r\n  region                      = \"us-east-1\"\r\n  access_key                  = \"anaccesskey\"\r\n  secret_key                  = \"asecretkey\"\r\n  skip_credentials_validation = true\r\n  skip_metadata_api_check     = true\r\n  s3_force_path_style         = true\r\n\r\n  endpoints {\r\n    sqs      = \"http://localhost:4576\"\r\n  }\r\n}\r\n\r\nresource \"aws_sqs_queue\" \"terraform_queue\" {\r\n  name                        = \"terraform-example-queue.fifo\"\r\n  fifo_queue                  = true\r\n  content_based_deduplication = true\r\n}\r\n```\r\nI saved this file in `tf/main.tf`\r\n\r\n```\r\n$ cd tf\r\n$ terraform init -input=false\r\n$ terraform plan -input=false\r\n$ terraform apply -input=false -auto-approve\r\n\r\naws_sqs_queue.terraform_queue: Refreshing state... (ID: http://localhost:4576/queue/terraform-example-queue_fifo)\r\naws_sqs_queue.terraform_queue: Destroying... (ID: http://localhost:4576/queue/terraform-example-queue_fifo)\r\naws_sqs_queue.terraform_queue: Destruction complete after 0s\r\naws_sqs_queue.terraform_queue: Creating...\r\n  arn:                               \"\" => \"<computed>\"\r\n  content_based_deduplication:       \"\" => \"true\"\r\n  delay_seconds:                     \"\" => \"0\"\r\n  fifo_queue:                        \"\" => \"true\"\r\n  kms_data_key_reuse_period_seconds: \"\" => \"<computed>\"\r\n  max_message_size:                  \"\" => \"262144\"\r\n  message_retention_seconds:         \"\" => \"345600\"\r\n  name:                              \"\" => \"terraform-example-queue.fifo\"\r\n  policy:                            \"\" => \"<computed>\"\r\n  receive_wait_time_seconds:         \"\" => \"0\"\r\n  visibility_timeout_seconds:        \"\" => \"30\"\r\n\r\nError: Error applying plan:\r\n\r\n1 error(s) occurred:\r\n\r\n* aws_sqs_queue.terraform_queue: 1 error(s) occurred:\r\n\r\n* aws_sqs_queue.terraform_queue: [ERR] Error updating SQS attributes: InvalidAttributeName: InvalidAttributeName; see the SQS docs.\r\n\tstatus code: 400, request id: 00000000-0000-0000-0000-000000000000\r\n\r\nTerraform does not automatically rollback in the face of errors.\r\nInstead, your Terraform state file has been partially updated with\r\nany resources that successfully completed. Please address the error\r\nabove and apply again to incrementally change your infrastructure.\r\n```\r\n\r\nWould I need any further step?",
        "comments": 6
    },
    {
        "merged": true,
        "additions": 95,
        "deletions": 15,
        "changed_files": 4,
        "created_at": "2018-08-02T16:40:25Z",
        "closed_at": "2018-08-17T01:39:46Z",
        "merged_at": "2018-08-17T01:39:46Z",
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 5
    },
    {
        "merged": true,
        "additions": 83,
        "deletions": 20,
        "changed_files": 2,
        "created_at": "2018-07-24T21:09:07Z",
        "closed_at": "2018-08-02T12:56:29Z",
        "merged_at": "2018-08-02T12:56:29Z",
        "body": "This commit updates the calculation of the filter policy so that it works with message attribute values of type \"String.Array\"\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 28,
        "deletions": 17,
        "changed_files": 1,
        "created_at": "2018-07-24T13:02:31Z",
        "closed_at": "2018-08-02T15:47:56Z",
        "merged_at": "2018-08-02T15:47:56Z",
        "body": "@whummer \r\nPlease take a look.",
        "comments": 5
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2018-07-23T11:40:47Z",
        "closed_at": "2018-07-23T17:10:57Z",
        "merged_at": "2018-07-23T17:10:57Z",
        "body": "@whummer \r\nUpdated troubleshooting section. This was pending since I faced https://github.com/localstack/localstack/issues/227 issue.",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 8,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2018-07-21T06:56:14Z",
        "closed_at": "2018-09-09T17:28:21Z",
        "merged_at": null,
        "body": "Fix issue #722\r\n`GenericProxyHandler` used to decompress response body in `forward` method, causing files uploaded with `Content-Encoding: gzip` not to be downloaded properly.\r\n\r\n**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 5
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2018-07-20T02:21:59Z",
        "closed_at": "2018-07-23T12:33:49Z",
        "merged_at": "2018-07-23T12:33:49Z",
        "body": "This fixes the contributors link on the README.md and should close https://github.com/localstack/localstack/issues/748\r\n\r\n**Please refer to the contribution guidelines in the README when submitting PRs.**\r\nI agree to https://github.com/localstack/localstack/tree/master/doc/contributor_license_agreement\r\n\r\n\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 7,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2018-07-09T16:13:17Z",
        "closed_at": "2018-12-08T17:24:08Z",
        "merged_at": "2018-12-08T17:24:08Z",
        "body": "Catches the `DeleteTopic` API call and clears out the list of subscriptions per spec for the AWS SNS DeleteTopic API call.\r\n\r\nNo tests because test suite seems broken and flapping, looks like mostly in Lambda, so I couldn't get the test suite to run. Hoping the CI/CD will be able to check this",
        "comments": 5
    },
    {
        "merged": true,
        "additions": 186,
        "deletions": 28,
        "changed_files": 4,
        "created_at": "2018-07-05T13:18:26Z",
        "closed_at": "2019-03-13T14:16:21Z",
        "merged_at": "2019-03-13T14:16:21Z",
        "body": "I added a few methods for async clients java api and a test for SNS too.\r\n\r\nNot sure if I missed something, but, waiting for a feedback so I can improve this PR. ",
        "comments": 7
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2018-07-04T03:33:26Z",
        "closed_at": "2018-07-04T04:33:44Z",
        "merged_at": "2018-07-04T04:33:44Z",
        "body": "See https://github.com/boto/boto3/issues/1017",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2018-07-04T03:28:44Z",
        "closed_at": "2018-07-04T04:32:54Z",
        "merged_at": "2018-07-04T04:32:54Z",
        "body": "See:\r\nhttps://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2017-18342\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 75,
        "deletions": 75,
        "changed_files": 9,
        "created_at": "2018-07-02T20:31:36Z",
        "closed_at": "2018-07-07T17:44:30Z",
        "merged_at": "2018-07-07T17:44:30Z",
        "body": "`async` is a reserved keyword in Python 3.7 and currently breaks localstack, replaced all references with `asynchronous`. Tests passing.\r\n\r\nSee:\r\n- https://docs.python.org/3/whatsnew/3.7.html \r\n- https://docs.python.org/3/reference/compound_stmts.html#async",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 39,
        "deletions": 15,
        "changed_files": 2,
        "created_at": "2018-07-01T21:48:09Z",
        "closed_at": "2018-07-04T04:26:44Z",
        "merged_at": "2018-07-04T04:26:44Z",
        "body": "This MR contributes a fix for this issue: https://github.com/localstack/localstack/issues/823\r\n\r\nIntegration tests have been updated to reflect the status codes expected based on the different invocation types.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2018-06-29T15:58:19Z",
        "closed_at": "2018-07-05T04:58:31Z",
        "merged_at": "2018-07-05T04:58:31Z",
        "body": "Fixes #761, and formatting of object path.\r\n\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 59,
        "deletions": 13,
        "changed_files": 4,
        "created_at": "2018-06-20T23:19:11Z",
        "closed_at": "2018-07-07T17:43:21Z",
        "merged_at": "2018-07-07T17:43:21Z",
        "body": "This allows the API Gateway integration to properly dispatch HTTP requests to resources setup with HTTP method `ANY`.\r\n\r\nHopefully, this should fix #667 ... and maybe #449 as well.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 42,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2018-06-20T20:29:06Z",
        "closed_at": "2018-07-04T03:49:34Z",
        "merged_at": "2018-07-04T03:49:34Z",
        "body": "This API returns the Alias information given the alias name.\r\n\r\nhttps://docs.aws.amazon.com/lambda/latest/dg/API_GetAlias.html\r\n\r\nContributed by @quantcast\r\n\r\n**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 88,
        "deletions": 10,
        "changed_files": 5,
        "created_at": "2018-06-20T20:27:40Z",
        "closed_at": "2018-07-03T16:11:44Z",
        "merged_at": "2018-07-03T16:11:44Z",
        "body": "This adds some common properties to the LambdaContext, which is passed\r\nto functions during invocations. In particular, the following properties\r\nare added: function_name, function_version, invoked_function_arn.\r\n\r\nThe above properties are passed to lambda functions running inside docker.\r\n\r\nSupport for publishing during function creation has also been added,\r\nwhich was a missing functionality, and was helpful in testing.\r\n\r\nNote that this has a slight dependency on https://github.com/lambci/docker-lambda/pull/98, but shouldn't break anything if this was merged first.\r\n\r\nContributed by @quantcast\r\n\r\n**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 5,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2018-06-03T20:21:37Z",
        "closed_at": "2018-06-08T09:13:58Z",
        "merged_at": "2018-06-08T09:13:58Z",
        "body": "I'm using the aws js sdk locally in the browser. After hooking up lambda executions successfully, I was surprised to see sqs requests being denied by CORS. This turned out to be because localstack was 404ing on OPTIONS to the root url.\r\n\r\nThis change fixes that by returning a 200 instead. After the change I was able to send messages as expected.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2018-05-26T18:46:56Z",
        "closed_at": "2018-05-30T20:08:17Z",
        "merged_at": "2018-05-30T20:08:17Z",
        "body": "The `ES_JAVA_OPTS` were being set, but not allowing the user to override specific settings (`-Xms` and `-Xmx`) which becomes problematic when dealing with large or complicated Elasticsearch indexes.\r\n\r\nThis simply adds syntax necessary to allow a user to completely override the contents of `ES_JAVA_OPTS`, with a fallback to the existing defaults.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 62,
        "deletions": 50,
        "changed_files": 4,
        "created_at": "2018-05-21T22:54:41Z",
        "closed_at": "2018-05-22T14:48:25Z",
        "merged_at": "2018-05-22T14:48:24Z",
        "body": "* Strip chunk signatures for S3 content md5 checks\r\n* Minor installation fix for Windows",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 59,
        "deletions": 9,
        "changed_files": 5,
        "created_at": "2018-05-20T17:02:13Z",
        "closed_at": "2018-05-20T19:18:14Z",
        "merged_at": "2018-05-20T19:18:14Z",
        "body": "* Fix kinesis error injection (#619)\r\n* Add support for S3 content md5 checks (#612)\r\n* Fix S3 host header to enforce path-style addressing and support different network scenarios (#613)",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2018-05-17T10:40:51Z",
        "closed_at": "2018-05-20T22:52:57Z",
        "merged_at": "2018-05-20T22:52:57Z",
        "body": "Simple change to bump the elasticmq version",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2018-05-11T19:13:45Z",
        "closed_at": "2018-05-24T12:22:01Z",
        "merged_at": "2018-05-24T12:22:01Z",
        "body": "On OSX, I am having permission errors and related, when trying deploy a simple Serverless function using Python runtime.\r\n\r\nCaveats of this PR:\r\n* Tests will be added later, before merging the PR\r\n* Squashing can be done on merge, to keep the blame and reasoning before the merge.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 932,
        "deletions": 754,
        "changed_files": 20,
        "created_at": "2018-05-03T22:42:49Z",
        "closed_at": "2018-05-22T23:29:45Z",
        "merged_at": "2018-05-22T23:29:45Z",
        "body": "Thanks for all the job made on localstack. For now, Localstack don't support the JUnit 5 library version. This PR is made to add a integration for JUnit 5 which provide a lot of nice new features.\r\n\r\nI have move some code to use the same logic between JUnit 4 runner and the JUnit 5 extension.\r\n\r\nFor now, I haven't integrate this refactor on any project but this will be make soon and I will provide some feedback.\r\n\r\n",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2018-04-29T22:46:33Z",
        "closed_at": "2018-05-01T13:40:03Z",
        "merged_at": "2018-05-01T13:40:03Z",
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2018-04-26T19:59:22Z",
        "closed_at": "2018-05-01T13:32:04Z",
        "merged_at": "2018-05-01T13:32:04Z",
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n\r\nMy first pull request, and I couldn't properly build the entire thing because I'm on Windows 10 at the moment and the setup for development (i.e. make) does not work in WSL. So apologies if this is not as complete as it should be.  Comments/requests for further work are welcome.  Thank you.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 30,
        "deletions": 45,
        "changed_files": 2,
        "created_at": "2018-04-19T05:04:41Z",
        "closed_at": "2018-04-26T11:08:39Z",
        "merged_at": "2018-04-26T11:08:38Z",
        "body": "Closes #713 \r\n\r\nUpdated aws-java-sdk-* jars \r\nUpdated aws-lambda-* jars\r\nAdded missing common-logging jar \r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 5,
        "deletions": 4,
        "changed_files": 2,
        "created_at": "2018-04-18T12:24:48Z",
        "closed_at": "2018-04-18T19:29:26Z",
        "merged_at": "2018-04-18T19:29:26Z",
        "body": "Downgrade pip version to fix issues with 10.0.0",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 92,
        "deletions": 53,
        "changed_files": 2,
        "created_at": "2018-04-13T17:53:50Z",
        "closed_at": "2018-05-23T23:29:35Z",
        "merged_at": "2018-05-23T23:29:35Z",
        "body": "Localstack currently expects Java Lambda functions to be uploaded as a `.jar` wrapped in a `.zip` file. As #385 notes, this is not what the Lambda API expects to be in the `ZipFile` payload. Instead it expects: \r\n```\r\n1. \"Fat\" JAR - single jar file with all dependencies\r\n2. ZIP - zip archive with class files in / and jar files in /lib\r\n```\r\nThis PR allows localstack to accept format 1. \r\n\r\nFormat 2 is a little harder to implement because it would require re-working the Java executor to handle the different locations of the class files in `/` and jar files in `/`. \r\n\r\nThis change also cleans up some of the handler paths in the `set_function_code` function. The goal is be more explicit about how to properly form handlers for non python (and in particular Java) runtimes. I've tried to add addition documentation via docstrings and comments (aside: @whummer, I'm not seeing any consistent docstring format. I've used the `reStructuredText` format here, though I'm more familiar with the docstring format here: http://google.github.io/styleguide/pyguide.html?showone=Comments#Comments). ",
        "comments": 7
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2018-04-04T18:42:00Z",
        "closed_at": "2018-04-05T13:02:17Z",
        "merged_at": "2018-04-05T13:02:17Z",
        "body": "This upgrades the Kinesalite dependency to version 1.13.0.\r\n\r\nThis version is significant because of the following resolved issue, which prevented testing of the KCL versions 1.9.x:\r\n\r\nhttps://github.com/mhart/kinesalite/issues/59",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 5,
        "deletions": 10,
        "changed_files": 6,
        "created_at": "2018-04-03T19:51:42Z",
        "closed_at": "2018-04-08T21:59:39Z",
        "merged_at": "2018-04-08T21:59:39Z",
        "body": "Hello, again. I need this change for removing the runtime dependency of JUnit on the application. I already coded basic auto-configuration factories for the Spring Boot and it runs alright with this change. If you want you can checkout more here:\r\n\r\nhttps://github.com/fabianoo/spring-localstack\r\n\r\nI would need this change and a new version. Is it possible?\r\n\r\nBest wishes,\r\nFabiano",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 10,
        "deletions": 6,
        "changed_files": 2,
        "created_at": "2018-04-03T15:52:09Z",
        "closed_at": "2018-04-05T13:07:44Z",
        "merged_at": "2018-04-05T13:07:44Z",
        "body": "The `get_function` API should return the same response as the Lambda API when the function is not found, but this does not seem to be the case right now, which means it's broken with some tools that depend on proper responses when the lambda is not found:\r\n\r\nCurrently localstack returns:\r\n```\r\ncurl http://localhost:4574/2015-03-31/functions/test -v\r\n< HTTP/1.0 404 NOT FOUND\r\n< Content-Type: application/json\r\n< Content-Length: 57\r\n< Access-Control-Allow-Origin: *\r\n< Server: Werkzeug/0.14.1 Python/2.7.13\r\n< Date: Tue, 03 Apr 2018 15:49:12 GMT\r\n<\r\n{\r\n  \"ResponseMetadata\": {\r\n    \"HTTPStatusCode\": 404\r\n  }\r\n}\r\n```\r\nHowever the correct API response is: \r\n```\r\nContent-Type:       application/json\r\nx-amazon-ErrorType: ResourceNotFoundException\r\n{\r\n    \"Message\":\"Function not found: arn:aws:lambda:us-west-2:<account_id>:function:nonsense\",\r\n    \"Type\":\"User\"\r\n}\r\n```\r\nThe existing handling looks out-of-date, since it was never updated to use the `error_response` functionality. \r\n\r\n",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 197,
        "deletions": 18,
        "changed_files": 2,
        "created_at": "2018-04-02T18:52:26Z",
        "closed_at": "2022-06-23T08:32:54Z",
        "merged_at": null,
        "body": "The following issues are corrected:\n\n\n* windows paths are injected into the bash scripts (fixed by converting to linux paths)\n* commands passed into bash on windows must be enclosed in quotes\n* Process.waitFor() not working as expected on Windows (with embedded Linux)\n* reading the output streams from bash running in the java process problematic, leading to the following adjustments:\n  * process.waitFor() changed to process.waitFor(timeout) with suitable timeouts selected based on empirical data\n  * workarounds for all the stream reads put in place\n\nAlso added additional helpful logging/output which will assist Windows users in troubleshooting.\n\nTested on Windows 10 using the Linux Subsystem for Windows.  All of the localstack tests pass except for the SQS messaging tests.\n\n\n\n\u2506Issue is synchronized with this [Jira Bug](https://localstack.atlassian.net/browse/LOC-305) by [Unito](https://www.unito.io/learn-more)\n",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 7,
        "deletions": 6,
        "changed_files": 4,
        "created_at": "2018-03-31T19:26:55Z",
        "closed_at": "2018-04-01T02:59:15Z",
        "merged_at": "2018-04-01T02:59:15Z",
        "body": "Release version 0.1.12 of Maven dependencies",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 4,
        "changed_files": 4,
        "created_at": "2018-03-30T18:49:29Z",
        "closed_at": "2018-04-01T02:59:02Z",
        "merged_at": "2018-04-01T02:59:02Z",
        "body": "The [latest AWS-supported Elasticsearch version is 6.2](https://docs.aws.amazon.com/elasticsearch-service/latest/developerguide/what-is-amazon-elasticsearch-service.html#aes-choosing-version), and the AWS documentation \"strongly recommends\" using the latest supported version.\r\n\r\nThis also closes #659.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 80,
        "deletions": 6,
        "changed_files": 8,
        "created_at": "2018-03-30T10:36:01Z",
        "closed_at": "2018-04-16T11:49:01Z",
        "merged_at": "2018-04-16T11:49:01Z",
        "body": "Went through `lambci`'s documentation to figure out how things should be used and invoked. Confirmed this by using some of the [example Lambda code](https://github.com/lambci/docker-lambda/tree/master/examples/dotnetcore2.0) in the `lambci` repo.\r\n\r\nChecklist below of what was needed\r\n\r\n- [x] *Add tests for any new features and bug fixes. Ideally, each PR should increase the test coverage.*\r\n- [x] *Follow the existing code style (e.g., indents). A PEP8 code linting target is included in the Makefile.* I'll clean up\r\n- [X] *Put a reasonable amount of comments into the code.* It was fairly straightforward but sure\r\n- [X] *Separate unrelated changes into multiple pull requests.* One feature\r\n- [x] *1 commit per PR: Please squash/rebase multiple commits into one single commit (to keep the history clean)* (Will do on merge)",
        "comments": 5
    },
    {
        "merged": true,
        "additions": 90,
        "deletions": 89,
        "changed_files": 5,
        "created_at": "2018-03-29T09:24:50Z",
        "closed_at": "2018-03-31T19:01:46Z",
        "merged_at": "2018-03-31T19:01:46Z",
        "body": " Closes #689 by using the same relocations as Amazon",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2018-03-29T08:50:03Z",
        "closed_at": "2018-03-29T14:33:49Z",
        "merged_at": "2018-03-29T14:33:49Z",
        "body": "Proposal for Kinesalite version upgrade to fix getShardIterator problem.\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 140,
        "deletions": 3,
        "changed_files": 2,
        "created_at": "2018-03-28T19:28:28Z",
        "closed_at": "2018-05-02T00:54:33Z",
        "merged_at": "2018-05-02T00:54:33Z",
        "body": "These updates came from testing with Terraform.  Terraform would fail to create the Elasticsearch domain because it never saw it as completed.  Making these changes allowed creating an Elasticsearch domain and applying an access policy to that domain for testing.",
        "comments": 5
    },
    {
        "merged": true,
        "additions": 350,
        "deletions": 37,
        "changed_files": 3,
        "created_at": "2018-03-21T16:44:55Z",
        "closed_at": "2018-03-31T18:28:07Z",
        "merged_at": "2018-03-31T18:28:07Z",
        "body": "See: https://docs.aws.amazon.com/sns/latest/dg/message-filtering.html\r\n\r\nThis pull request adds support for SNS subscription filters. These filters decide which messages on the topic the subscriber will accept. If a message does not meet the filter conditions then it will not be passed to the subscriber.\r\n\r\nSpecifically each attribute in the filter policy will be matched against that corresponding attribute in the messages' `MessageAttributes`. If the value of the attribute fails to match at least one of the conditions specified against the attribute in the filter, then it will not be passed to the subscriber.\r\n\r\nCurrently AWS supports the following:\r\n- Exact matches (whitelisting)\r\n- Anything-But (blacklisting)\r\n- Prefix\r\n- Numeric (=, >, <, >=, <=)\r\n- AND/OR logic\r\n",
        "comments": 5
    },
    {
        "merged": false,
        "additions": 7,
        "deletions": 2,
        "changed_files": 3,
        "created_at": "2018-03-20T22:10:07Z",
        "closed_at": "2018-12-08T21:30:53Z",
        "merged_at": null,
        "body": "First, thanks for your amazing work on `localstack`!\r\n\r\nPlease treat this as a start of a conversation rather than a full-featured PR. I'm not certain that this is the right direction and would love your feedback.\r\n\r\n## Motivation\r\n\r\nThe issue I'm having is that I'm running `localstack` behind a proxy, which is running on a specific host (which is covered by `HOSTNAME_EXTERNAL`, but is also on a different port from that of the proxy. So, when SQS returns the queue URL it returns the `HOSTNAME_EXTERNAL` that I set, but returns the local port and not the port that the client requests the proxy with.\r\n\r\n`[proxy:80]` -> `[localstack:4576]` -> `[elasticmq:4561]`\r\n\r\nWhat I've done at the moment, is I've set my SQS port to `:80` (which is what my proxy wants). This works, but in my opinion is more of a workaround because any other service needs to return a URL pointing back to itself, I will not be able to also put it on `:80` as it will be taken by SQS.\r\n\r\n## Proposed solution\r\n\r\nSo, the solution I'm proposing is to define a `<SERVICE>_PORT_EXTERNAL` and use that along with `HOSTNAME_EXTERNAL`. Alternatively (and if there are no plans to use `HOSTNAME_EXTERNAL` as a single external hostname for all services) we can change it to something like `<SERVICE>_EXTERNAL_URI`, which would be a `host:port` combination specific to a service.",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 45,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2018-03-17T16:30:08Z",
        "closed_at": "2018-03-18T17:14:17Z",
        "merged_at": "2018-03-18T17:14:17Z",
        "body": "In response to issue [#541](https://github.com/localstack/localstack/issues/541), content length header was being set 'correctly' for all requests, this masks the content-length header supplied by moto for HEAD requests. Other clients for example spark S3AFileSystem depend on the content-length from the HEAD request to pre-determine the object size. Others affected by this issue [#638](https://github.com/localstack/localstack/issues/638)  ... This pull request illustrates a possible fix that would retain the 'fix' [#541](https://github.com/localstack/localstack/issues/541), though it's possible the aws-sdk mentioned in that issue actually what is at fault, rather than moto / localstack\r\n\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 129,
        "deletions": 78,
        "changed_files": 2,
        "created_at": "2018-03-15T21:09:29Z",
        "closed_at": "2018-03-20T16:13:39Z",
        "merged_at": "2018-03-20T16:13:39Z",
        "body": "Fixes issue #516. \r\n\r\nAs stated in [AWS Documentation](https://docs.aws.amazon.com/sns/latest/api/API_Publish.html) if the message has a JSON MessageStructure it must contain a top-level JSON key of \u201cdefault\u201d,  other top-level keys can be defined to specific transport protocols.\r\n\r\nSo for a JSON MessageStructure if I have a message like this:\r\n`{\u2018default\u2019: \u2018message\u2019, \u2018sqs\u2019: \u2018sqs message\u2019}`\r\nIt firsts search for the subscriber protocol, if not found it will use the default value.\r\n\r\nIf the message\u2019s MessageStructure is not set, nothing is changed.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 307,
        "deletions": 168,
        "changed_files": 8,
        "created_at": "2018-03-13T21:29:52Z",
        "closed_at": "2018-03-20T16:16:05Z",
        "merged_at": "2018-03-20T16:16:05Z",
        "body": "The idea of this little refactoring is to extract the Container initialization from the JUnit Runner, so we can manage programmatically a docker container. This way we can use the Java lib not only for tests, but to develop and to test integrated with Spring, for instance.",
        "comments": 5
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2018-03-12T20:55:35Z",
        "closed_at": "2018-03-18T00:14:46Z",
        "merged_at": "2018-03-18T00:14:46Z",
        "body": "Potential vulnerability risks were detected in your dependencies and used functions.\r\n                    Some vulnerabilities have been replaced by safe alternatives. \r\n\r\n# Vulnerable Functions \r\n*config.py:148:8:* exec\r\n* Reason: Could execute vulnerable and untrusted code.\r\n* Severity: warning\r\n\r\n\r\n*config.py:151:8:* exec\r\n* Reason: Could execute vulnerable and untrusted code.\r\n* Severity: warning\r\n\r\n\r\n*infra.py:99:12:* exec\r\n* Reason: Could execute vulnerable and untrusted code.\r\n* Severity: warning\r\n\r\n\r\n*dynamodbstreams_api.py:136:32:* hashlib.sha1\r\n* Reason: Attacks can find collisions in the full version of SHA-1.\r\n* Replacement: hashlib.sha512()\r\n* Severity: critical\r\n\r\n\r\n*common.py:228:8:* hashlib.md5\r\n* Reason: Can be cracked by brute-force attack and suffers from extensive vulnerabilities.\r\n* Replacement: hashlib.sha512()\r\n* Severity: critical\r\n\r\n\r\n*template_deployer.py:182:15:* yaml.load\r\n* Reason: Untrusted input can result in arbitrary code execution.\r\n* Replacement: yaml.safe_load(___0)\r\n* Severity: critical\r\n\r\n\r\n# Vulnerable Dependencies \r\nSome versions of dependencies used in the project might pose security threads. Please make sure to inform users to use safe versions. \r\n\r\n| Dependency  | Vulnerable Versions | Reason | \r\n| --------------| -------------------- | ------- | \r\n|flask|<0.6.1|flask 0.6.1 fixes a security problem that allowed clients to download arbitrary files  if the host server was a windows based operating system and the client  uses backslashes to escape the directory the files where exposed from.|\r\n|requests|<2.3.0|requests before 2.3.0 exposes Authorization or Proxy-Authorization headers on redirect.  Fix CVE-2014-1829 and CVE-2014-1830 respectively|\r\n|requests|<2.6.0|requests 2.6.0 fixes handling of cookies on redirect. Previously a cookie without a host value set would use the hostname for the redirected URL exposing requests users to session fixation attacks and potentially cookie stealing.|\r\n|requests|>=2.1,<=2.5.3|The resolve_redirects function in sessions.py in requests 2.1.0 through 2.5.3 allows remote attackers to conduct session fixation attacks via a cookie without a host value in a redirect.|\r\n|setuptools|<0.9.5|setuptools 0.9.5 fixes a security vulnerability in SSL certificate validation.|\r\n|setuptools|<1.3|setuptools before 1.3 has a security vulnerability in SSL match_hostname check as reported in Python 17997.|\r\n|setuptools|<3.0|setuptools 3.0 avoids the potential security vulnerabilities presented by use of tar archives in ez_setup.py. It also leverages the security features added to ZipFile.extract in Python 2.7.4.|\r\n\r\nSource: [Safety](https://github.com/pyupio/safety) \r\n\r\n# Test Report \r\nNo tests found or tests could not be executed\r\n \r\n \r\n --- \r\n \r\nThis tool was developed as part of a Software Engineering course. The intention is to make project maintainers aware of potential vulnerabilities. If you have feedback then please reply to this pull-request. Thank you!",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2018-03-09T17:49:12Z",
        "closed_at": "2018-03-10T18:19:18Z",
        "merged_at": "2018-03-10T18:19:18Z",
        "body": "Documenting problem reported on https://github.com/localstack/localstack/issues/248",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 47,
        "deletions": 0,
        "changed_files": 3,
        "created_at": "2018-03-09T16:28:30Z",
        "closed_at": "2018-03-10T18:17:49Z",
        "merged_at": "2018-03-10T18:17:49Z",
        "body": "https://docs.aws.amazon.com/lambda/latest/dg/API_PutFunctionConcurrency.html\r\n\r\nAdditionally alters GetFunction to return the `Concurrency` key.\r\n\r\nSee Concurrency response example here:\r\n\r\nhttps://docs.aws.amazon.com/lambda/latest/dg/API_GetFunction.html\r\n\r\nUsing tools like CloudFormation or Terraform the user can set the concurrency limit. For the purposes of localstack this doesn't have to do anything as it's for local testing only. I don't think the expectation would be there that this actually supports the requested level of concurrency.\r\n\r\nBut the ability to run CloudFormation or Terraform allows teams to mock that implementation and go from there with their testing.\r\n\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 23,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2018-03-08T22:12:15Z",
        "closed_at": "2018-03-10T18:13:49Z",
        "merged_at": "2018-03-10T18:13:49Z",
        "body": "See #648\r\n\r\nSupports:\r\n\r\nhttps://docs.aws.amazon.com/lambda/latest/dg/API_GetEventSourceMapping.html\r\n\r\n```\r\naws lambda get-event-source-mapping --uuid cef34cb4-39d9-497d-8a6e-3a7438d77826 --endpoint http://localhost:4574\r\n```\r\n\r\n[Terraform](https://www.terraform.io) makes this call to do it's thing.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 125,
        "deletions": 1,
        "changed_files": 4,
        "created_at": "2018-03-07T21:29:47Z",
        "closed_at": "2018-03-08T03:27:27Z",
        "merged_at": "2018-03-08T03:27:27Z",
        "body": "Simple way to getup only specific services when testing with 'LocalstackDockerTestRunner'",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2018-03-07T20:09:12Z",
        "closed_at": "2018-03-08T03:24:20Z",
        "merged_at": "2018-03-08T03:24:20Z",
        "body": "Adding inheritance capabilities to the LocalstackDockerProperties annotation.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2018-03-06T12:59:01Z",
        "closed_at": "2018-03-08T03:23:50Z",
        "merged_at": "2018-03-08T03:23:50Z",
        "body": "Adds the OldImage data so that when a listener of the dynamodb stream receives a deletion event, he's able to inspect the data that was deleted.\r\n\r\nApologies from the lack of tests, I'm not proficient in python and could not find a test I could easily mirror to test this fix. It was however working with my team's own integration tests. \r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 72,
        "deletions": 41,
        "changed_files": 7,
        "created_at": "2018-02-25T06:17:36Z",
        "closed_at": "2018-02-25T21:32:53Z",
        "merged_at": "2018-02-25T21:32:52Z",
        "body": "* add new util methods to create test clients\r\n* release new version of Java libs",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 28,
        "deletions": 4,
        "changed_files": 3,
        "created_at": "2018-02-16T20:42:50Z",
        "closed_at": "2018-02-18T20:22:34Z",
        "merged_at": "2018-02-18T20:22:33Z",
        "body": "",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 7,
        "deletions": 5,
        "changed_files": 3,
        "created_at": "2018-02-12T03:08:16Z",
        "closed_at": "2018-02-12T05:54:35Z",
        "merged_at": "2018-02-12T05:54:35Z",
        "body": "* fix s3 notifications (#605)",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 15,
        "deletions": 3,
        "changed_files": 1,
        "created_at": "2018-02-11T12:46:31Z",
        "closed_at": "2018-02-11T17:27:55Z",
        "merged_at": "2018-02-11T17:27:55Z",
        "body": "Mocks 'TagQueue' action and returns a mocked successful response. This fixes the exceptions thrown in Terraform when you define tags in your sqs modules.\r\n\r\nTested on terraform with sqs endpoint redirected to localstack sqs endpoint where the sqs terraform files have tags attributes.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2018-02-07T13:47:16Z",
        "closed_at": "2018-02-07T16:18:24Z",
        "merged_at": "2018-02-07T16:18:24Z",
        "body": "* Bump version of psutil (addresses #563)\r\n* Bump jquery version to fix a security vulnerability",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 154,
        "deletions": 1,
        "changed_files": 3,
        "created_at": "2018-02-05T15:14:05Z",
        "closed_at": "2018-02-18T20:24:25Z",
        "merged_at": "2018-02-18T20:24:24Z",
        "body": "- Mocks UpdateTimeToLive, DescribeTimeToLive, TagResource, UntagResource & ListTagsOfResource apis as they are not implemented in DynamoDB.\r\n- Default response for DescribeTimeToLive is DISABLED.\r\n- Fixes [this](https://github.com/terraform-providers/terraform-provider-aws/issues/1059) issue when integrating Terraform with localstack endpoints\r\n\r\nTested on terraform with dynamodb endpoint redirected to localstack dynamodb endpoint where the dynamodb tables in terraform files have ttl & tags attributes.\r\n",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 69,
        "deletions": 57,
        "changed_files": 6,
        "created_at": "2018-02-04T03:30:43Z",
        "closed_at": "2018-02-04T19:00:07Z",
        "merged_at": "2018-02-04T19:00:07Z",
        "body": "* Add timeout to Lambda config (addresses #584)\r\n* Refactor Lambda API code\r\n* Reduce log verbosity on broken pipe (addresses #585)\r\n* Update pip dependencies (addresses #563)",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 10,
        "deletions": 5,
        "changed_files": 3,
        "created_at": "2018-02-02T21:57:30Z",
        "closed_at": "2018-02-04T22:13:14Z",
        "merged_at": "2018-02-04T22:13:14Z",
        "body": "We were getting intermittent test failures with the DockerTestRunner because the timeout for the Pull command was too short.  Pull command now has 10 minutes to complete.  Default for the rest of the commands is 1 minute.\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 29,
        "deletions": 5,
        "changed_files": 2,
        "created_at": "2018-01-28T20:37:25Z",
        "closed_at": "2018-01-29T03:37:51Z",
        "merged_at": "2018-01-29T03:37:51Z",
        "body": "According to https://docs.aws.amazon.com/AmazonS3/latest/API/RESTObjectPUT.html\r\n, if there is a PUT without a content-type, 'binary/octet-stream' will be used\r\nas the default.\r\n\r\nThis changes the previous attempt at fixing this default, which was just setting\r\nthe content-type for GET's, which would override the content type of the\r\nuploaded file, rather then respect the original uploaded content-type, like it\r\nshould have.\r\n\r\nFixes https://github.com/localstack/localstack/issues/581\r\n\r\nThis functionally Reverts https://github.com/localstack/localstack/pull/565 , which incorrectly fixed #564 . \r\n\r\nThanks for the help identifying this @viniciuskneves !\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 150,
        "deletions": 14,
        "changed_files": 11,
        "created_at": "2018-01-28T00:53:51Z",
        "closed_at": "2018-01-29T13:52:36Z",
        "merged_at": "2018-01-29T13:52:36Z",
        "body": "Minor change to an existing PR (https://github.com/localstack/localstack/pull/586) to get the Java integration tests passing. /cc @ABevier ",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 141,
        "deletions": 13,
        "changed_files": 10,
        "created_at": "2018-01-26T21:47:06Z",
        "closed_at": "2018-01-29T13:52:17Z",
        "merged_at": null,
        "body": "I've added the ability to better configure the container through the LocalstackDockerProperties annotation.  The annotation will allow you to:\r\n\r\n- Skip the pull new image step before tests\r\n- Choose if the ports are randomized or not (this now defaults to not-random)\r\n- Inject Environment Variables by implementing an IEnvironmentVariableProvider\r\n- Allow for custom behaviour when resolving the host name of the containers by implementing an IHostNameResolver\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 48,
        "deletions": 18,
        "changed_files": 3,
        "created_at": "2018-01-24T10:03:44Z",
        "closed_at": "2018-01-25T00:00:53Z",
        "merged_at": "2018-01-25T00:00:53Z",
        "body": "Fix for impossibility to add external environment variables to the container using java localstack-utils (https://github.com/localstack/localstack/issues/576)\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 37,
        "deletions": 2,
        "changed_files": 3,
        "created_at": "2018-01-23T14:39:17Z",
        "closed_at": "2018-01-24T04:50:46Z",
        "merged_at": "2018-01-24T04:50:46Z",
        "body": "Fix for issue where environment variables are not loaded in the container using the Java module (https://github.com/localstack/localstack/issues/575)\r\n\r\n**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 84,
        "deletions": 1,
        "changed_files": 4,
        "created_at": "2018-01-23T13:08:43Z",
        "closed_at": "2018-01-25T00:04:07Z",
        "merged_at": "2018-01-25T00:04:07Z",
        "body": "In Cloudformation the PhysicalResourceId of a SQS resource is the QueueUrl. Implemented this for ListQueueResources.\r\n\r\nThis should also be the case for DescribeStackResources/DescribeStackResource but it's very tightly connected to the template_deployer functionality.\r\n\r\nWith this pull request, Spring Cloud AWS Messaging works with localstack :D",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 48,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2018-01-22T23:51:23Z",
        "closed_at": "2018-01-24T05:02:28Z",
        "merged_at": "2018-01-24T05:02:28Z",
        "body": "To be consistent with behavior in AWS, set SNS message subject to\r\n'Amazon S3 Notification' when publishing to SNS in response to actions in S3.\r\n\r\nMessages going to Lambda or SQS are unaffected.\r\n\r\nCreated a test for this in integrations/test_notifications.py\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 38,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2018-01-22T16:31:27Z",
        "closed_at": "2018-01-27T16:09:50Z",
        "merged_at": "2018-01-27T16:09:50Z",
        "body": "",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2018-01-22T15:39:45Z",
        "closed_at": "2018-01-23T00:25:15Z",
        "merged_at": "2018-01-23T00:25:15Z",
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2018-01-21T04:41:15Z",
        "closed_at": "2018-01-21T16:48:47Z",
        "merged_at": "2018-01-21T16:48:47Z",
        "body": "     Without this fix, the subject was being sent to lambda functions as\r\n     an array containing a single string i.e. [ \"Subject\" ], instead of just the string,\r\n     which is the behavior for other subscription protocols, and is how\r\n     it behaves in AWS\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 17,
        "deletions": 5,
        "changed_files": 1,
        "created_at": "2018-01-21T04:40:31Z",
        "closed_at": "2018-01-21T17:40:32Z",
        "merged_at": "2018-01-21T17:40:32Z",
        "body": "        - call s3 lambda notifications asyncronously\r\n        - send notifications when files are uploaded via POST method\r\n",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 201,
        "deletions": 17,
        "changed_files": 14,
        "created_at": "2018-01-21T04:39:17Z",
        "closed_at": "2019-06-09T09:33:33Z",
        "merged_at": null,
        "body": "   - Added support for identifying the docker network when running lambda functions in docker containers\r\n\r\n    The docker network used when running lambda functions in a container may be specified with the LAMBDA_DEFAULT_DOCKER_NETWORK and LAMBDA_SUBNET_AS_DOCKERNET environment variables along with the subnet specified in the lambda's vpc config\r\n\r\n   - Added environment variables specifying the function arn and function name\r\n     for use in docker command options -- useful when combined with LAMBDA_DOCKER_OPTIONS\r\n   - fixed issue where environment variables were not returned in get_function_configuration\r\n   - Added support for custom docker actions when running lambda functions in docker containers\r\n   custom options to be passed to docker can be specified via the LAMBDA_DOCKER_OPTIONS\r\n   environment variables\r\n\r\n   - Added test configurations for lambda docker network config\r\n   - Added lambda networking test to travis build\r\n\r\nWhile this pull request is active, I am maintaining a docker image with these changes in the docker registry by the name of gadgetjunkie/localstack.  Feel free to use it as you see fit.",
        "comments": 13
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2018-01-21T00:12:45Z",
        "closed_at": "2018-01-21T16:38:22Z",
        "merged_at": "2018-01-21T16:38:22Z",
        "body": "In cloudformation templates for SQS resources the property QueueName is not mandatory. If not specified, the logical name will be the resource name and the physical name will be generated. This pull requests makes it possible to create cloudformation stacks with queues that miss this property.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 18,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2018-01-20T16:03:34Z",
        "closed_at": "2018-01-21T16:15:15Z",
        "merged_at": "2018-01-21T16:15:14Z",
        "body": "This allows a browser to download it as a file, rather then try to\r\nrender it in the browser.\r\n\r\nfixes https://github.com/localstack/localstack/issues/564 \r\n^^ issue contains reproduction steps and more detail",
        "comments": 6
    },
    {
        "merged": true,
        "additions": 176,
        "deletions": 10,
        "changed_files": 3,
        "created_at": "2018-01-17T21:41:58Z",
        "closed_at": "2018-01-19T14:58:48Z",
        "merged_at": "2018-01-19T14:58:48Z",
        "body": "Fixes #558 \r\n\r\nSince the JavaScript AWS SDK uses another approach for putting objects than that of boto(3), this adds support for getting the bucket name from the host instead of only allowing it to be part of the `path`.\r\n\r\nIn addition, this also then uses the entire `path` as the object `key` [as per the documenation](https://docs.aws.amazon.com/AmazonS3/latest/API/RESTObjectPUT.html#RESTObjectPUT-requests).\r\n\r\n---\r\n\r\nI couldn't get the entire test suite to run properly locally or inside docker due to the below error though, any suggestions here?\r\n\r\n```\r\n======================================================================\r\nERROR: tests.integration.test_integration.test_kinesis_lambda_sns_ddb_streams\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/opt/code/localstack/.venv/lib/python2.7/site-packages/nose/case.py\", line 197, in runTest\r\n    self.test(*self.arg)\r\n  File \"/opt/code/localstack/tests/integration/test_integration.py\", line 94, in test_kinesis_lambda_sns_ddb_streams\r\n    wait_until_started=True, ddb_lease_table_suffix=ddb_lease_table_suffix)\r\n  File \"/opt/code/localstack/localstack/utils/kinesis/kinesis_connector.py\", line 435, in listen_to_kinesis\r\n    raise Exception('Timeout when waiting for KCL initialization.')\r\nException: Timeout when waiting for KCL initialization.\r\n```",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 35,
        "deletions": 5,
        "changed_files": 1,
        "created_at": "2018-01-11T19:30:39Z",
        "closed_at": "2018-01-24T05:13:06Z",
        "merged_at": "2018-01-24T05:13:06Z",
        "body": "Currently Firehose doesn't have any testing so I'm not sure on how to test this new feature. But any feedback is appreciated.\r\n\r\nWe have a system where we need to stream all of our dynamodb records straight into elastic search via FIrehose. ",
        "comments": 5
    },
    {
        "merged": true,
        "additions": 24,
        "deletions": 8,
        "changed_files": 4,
        "created_at": "2018-01-11T01:51:12Z",
        "closed_at": "2018-01-11T04:03:31Z",
        "merged_at": "2018-01-11T04:03:31Z",
        "body": "* Implement CF Fn::GetAZs function (in bumped moto version)\r\n* Fix error message for create_stack on existing stack name\r\n* Fix setting of content-length header in S3",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 9,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2018-01-10T10:04:05Z",
        "closed_at": "2018-01-11T12:40:48Z",
        "merged_at": "2018-01-11T12:40:48Z",
        "body": "Very small change to execute lambda asynchronously when forwarding DynamoDB events. Without it we were seeing timeouts on calls to dynamo db clients.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 194,
        "deletions": 129,
        "changed_files": 8,
        "created_at": "2018-01-08T22:33:56Z",
        "closed_at": "2018-01-08T23:45:39Z",
        "merged_at": "2018-01-08T23:45:39Z",
        "body": "* Fix DDB streams event type (INSERT/MODIFY) - addresses #522\r\n* Improve logging for Lambda functions - addresses #519\r\n* Minor fixes and refactoring (break out multipart content handling into separate file)",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2018-01-01T17:37:20Z",
        "closed_at": "2018-01-02T22:49:48Z",
        "merged_at": "2018-01-02T22:49:48Z",
        "body": "I've added support for an env var of the name `FORCE_NONITERACTIVE`.\r\nIt disables the `-it` flags when running with Docker (i.e. `localstack start --docker`).\r\n\r\nThis solves an issue I've encountered when trying to make localstack run in the background (via [hote.dev](https://github.com/typicode/hotel)).\r\n\r\nI'm aware that mimicking CI environment via the `CI`/`TRAVIS` var is possible and will achieve the same effect, but I didn't want to abuse this. \r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 5,
        "deletions": 4,
        "changed_files": 5,
        "created_at": "2017-12-28T04:04:06Z",
        "closed_at": "2017-12-28T12:35:32Z",
        "merged_at": "2017-12-28T12:35:32Z",
        "body": "Bumo moto version to latest master",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 105,
        "deletions": 10,
        "changed_files": 5,
        "created_at": "2017-12-27T21:46:23Z",
        "closed_at": "2017-12-28T01:35:55Z",
        "merged_at": null,
        "body": "This PR extends #500 and fixes the Java tests in our CI pipeline",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 16,
        "deletions": 7,
        "changed_files": 4,
        "created_at": "2017-12-27T16:08:20Z",
        "closed_at": "2017-12-27T17:08:26Z",
        "merged_at": "2017-12-27T17:08:26Z",
        "body": "* Fix SQS endpoint URL for SNS notifications. Addresses #510 \r\n* Small fix in `Dockerfile` for base image",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2017-12-27T03:08:17Z",
        "closed_at": "2017-12-27T23:18:55Z",
        "merged_at": null,
        "body": "Fix for #510 the code trying to parse sqs queue name from Endpoint instead of SubscriptionArn",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 253,
        "deletions": 2,
        "changed_files": 5,
        "created_at": "2017-12-19T11:18:49Z",
        "closed_at": "2017-12-27T21:09:29Z",
        "merged_at": "2017-12-27T21:09:29Z",
        "body": "Initial Support for the DynamoDB Event - for the use in Java Lambda,\r\nthe overall Java Executor would deserve some love. Will try to spend more time on this.\r\n\r\nStill would require a bit more testing but it is pretty close.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 12,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2017-12-19T10:20:14Z",
        "closed_at": "2017-12-20T22:38:24Z",
        "merged_at": "2017-12-20T22:38:24Z",
        "body": "API Gateway has path variables like `{param}` but also wildcard path variables like `{proxy+}`: https://aws.amazon.com/blogs/aws/api-gateway-update-new-features-simplify-api-development/\r\n\r\nThis PR adds support for wildcard path variables.",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 16,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2017-12-16T00:14:20Z",
        "closed_at": "2017-12-18T14:08:37Z",
        "merged_at": "2017-12-18T14:08:37Z",
        "body": "Fixes #511.",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2017-12-09T05:24:59Z",
        "closed_at": "2017-12-11T03:19:56Z",
        "merged_at": null,
        "body": "I believe that the currently pushed `localstack/java-maven-node-python:latest ` does not build `localstack/localstack`.\r\n\r\nThis is a test to see if this is the case.\r\n\r\nI'll put up an issue if this PR does in fact fail CI.\r\n\r\nShort fix: Rerun `make docker-build-base` and push the image.\r\nI rebuild and pushed as `adamryman/localstack-base:latest` and tested it [here](https://travis-ci.org/adamryman/localstack/jobs/313833753).\r\n\r\nI also recommend adding daily cron on master with [Travis-CI Cron Jobs](https://docs.travis-ci.com/user/cron-jobs/).",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 7,
        "changed_files": 1,
        "created_at": "2017-12-08T19:48:36Z",
        "closed_at": "2017-12-11T04:05:43Z",
        "merged_at": "2017-12-11T04:05:43Z",
        "body": "It seems that RawMessageDelivery has only been respected for sns->sqs.\r\n\r\nThough the docs for [Raw Message Delivery](http://docs.aws.amazon.com/sns/latest/dg/large-payload-raw-message.html) state:\r\n\r\n> Amazon SNS you can now enable raw message delivery for messages delivered to either Amazon SQS endpoints or HTTP/S endpoints.\r\n\r\nPlease let me know if anything else needs to be added.\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 99,
        "deletions": 5,
        "changed_files": 3,
        "created_at": "2017-12-08T13:46:25Z",
        "closed_at": "2017-12-28T01:35:30Z",
        "merged_at": "2017-12-28T01:35:30Z",
        "body": "According to amazon documentation, RequestHandler can use POJOs as input: http://docs.aws.amazon.com/lambda/latest/dg/java-programming-model-req-resp.html\r\n\r\nExecutor will learn the type and try to deserialise the payload, then serialise the response if possible.\r\nIt will continue as normal if unable to serialise/deserialise.\r\n\r\nOne thing I did not do was to bump `localstack-utils` version, but since the build process requires some additional work I hope I can leave it up to @whummer ;)\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 1030,
        "deletions": 18,
        "changed_files": 20,
        "created_at": "2017-12-07T20:57:39Z",
        "closed_at": "2017-12-13T16:09:35Z",
        "merged_at": "2017-12-13T16:09:35Z",
        "body": "I couldn't get the existing JUnit Test Runner to work on Windows, so I created a new test runner that leverages the localstack docker image.\r\n\r\nThe only dependency is to have docker installed so this should play nice on all environments. \r\n\r\nThe TestRunner will automatically pull the localstack image, start up a container, wait for it to be ready, and shut down the container after the suite is completed.\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 9,
        "deletions": 3,
        "changed_files": 1,
        "created_at": "2017-12-06T06:08:30Z",
        "closed_at": "2017-12-11T03:26:34Z",
        "merged_at": "2017-12-11T03:26:33Z",
        "body": "Fixes #466 and #497. Lambda responses will now be JSON stringified only if they\u2019re `dict`s (i.e., not already strings). This fixes an incompatibility with AWS, and allows Lambda functions to return string representations of other formats (XML, HTML, etc.).\r\n\r\nAlso, calling an API Gateway path that doesn\u2019t exist was previously throwing an exception. Now an error is returned.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 16,
        "deletions": 4,
        "changed_files": 2,
        "created_at": "2017-12-01T15:35:05Z",
        "closed_at": "2017-12-11T03:22:07Z",
        "merged_at": "2017-12-11T03:22:07Z",
        "body": "Localstack's SNS emulation would be a little bit more realistic if notification messages had `MessageId` elements.\r\n\r\n**This change adds a random uuid4 as a `MessageId` in outbound SNS messages.**",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 31,
        "deletions": 10,
        "changed_files": 6,
        "created_at": "2017-11-25T21:32:36Z",
        "closed_at": "2017-11-25T23:01:12Z",
        "merged_at": "2017-11-25T23:01:12Z",
        "body": "* optimize base Docker image size\r\n* Release v0.8.3",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2017-11-25T07:07:23Z",
        "closed_at": "2017-11-25T16:32:50Z",
        "merged_at": "2017-11-25T16:32:50Z",
        "body": "Update README for `docker for mac` users.\r\n\r\nfix issue #480 \r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2017-11-22T02:39:16Z",
        "closed_at": "2017-11-22T13:40:43Z",
        "merged_at": "2017-11-22T13:40:43Z",
        "body": "Hi,\r\n\r\nWhen you try to use Serverless Framework with Localstack is impossible to deploy because the Cloudformation generated by Serverless doesn't come with AccessControl property so the deployment breaks, I debug into the issue and we only need to make a quick fix and set a default value for this ACL to continue with the deployment.\r\n\r\nThis also fixes the issue #475  that I reported before.\r\n\r\nNOTE: I also add a gitignore entry because I use PyCharm as IDE and there always create an .idea directory.",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 8,
        "deletions": 6,
        "changed_files": 4,
        "created_at": "2017-11-20T09:03:19Z",
        "closed_at": "2017-11-21T00:17:38Z",
        "merged_at": "2017-11-21T00:17:38Z",
        "body": "I just added few conversions since data parameter could be b'{}', which json parser does not like (see my issue #463). It works now with python 3.5 on ubuntu. Need more comments? ",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2017-11-16T21:10:18Z",
        "closed_at": "2017-11-16T22:29:34Z",
        "merged_at": "2017-11-16T22:29:34Z",
        "body": "",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 41,
        "deletions": 4,
        "changed_files": 3,
        "created_at": "2017-11-16T14:25:42Z",
        "closed_at": "2017-11-16T16:44:48Z",
        "merged_at": "2017-11-16T16:44:48Z",
        "body": "Fix handling of non-ascii content in DynamoDB items (addresses #464)",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2017-11-16T12:55:44Z",
        "closed_at": "2017-11-16T14:23:54Z",
        "merged_at": "2017-11-16T14:23:54Z",
        "body": "Fix newline stripping for S3 chunked encoding (addresses #455)",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2017-11-16T02:18:54Z",
        "closed_at": "2017-11-16T12:50:09Z",
        "merged_at": "2017-11-16T12:50:09Z",
        "body": "Fixes #462.\r\n\r\nIt looks like #440 clobbered the `config` variable at these lines, which is needed further down.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 140,
        "deletions": 0,
        "changed_files": 3,
        "created_at": "2017-11-05T13:15:45Z",
        "closed_at": "2017-11-05T16:26:18Z",
        "merged_at": "2017-11-05T16:26:18Z",
        "body": "Hi,\r\n\r\ni have create a test for: \r\n\r\n* https://github.com/localstack/localstack/issues/308\r\n\r\nthe portmapping is working again with the latest localstack docker image (was working up to 0.7.4 but stoppped working with 0.7.5)\r\n\r\n\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 680,
        "deletions": 171,
        "changed_files": 9,
        "created_at": "2017-11-05T04:57:41Z",
        "closed_at": "2017-11-27T12:49:05Z",
        "merged_at": "2017-11-27T12:49:05Z",
        "body": "This is a slightly revised version of PR #427 , originally submitted by vangorra",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 90,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2017-11-03T06:58:59Z",
        "closed_at": "2017-11-06T04:46:18Z",
        "merged_at": "2017-11-06T04:46:18Z",
        "body": "This PR adds some simple stubs to accept and store S3 lifecycle configurations.  In particular, the s3 client can PUT a lifecycle configuration and have it echoed back with a GET.\r\n\r\nThe lifecycle rules are not actually enforced.\r\n\r\nThis allows stacks that contain S3 lifecycle rules to set up against localstack without failing.",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 50,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2017-10-31T06:17:21Z",
        "closed_at": "2017-11-01T05:23:04Z",
        "merged_at": null,
        "body": "Added a few unit tests to improve coverage in persistence.py, using TemporaryDirectory() to generate a data directory which will be auto-deleted after the tests. Also added the `backports.tempfile` backport for Py2 compatibility.",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 408,
        "deletions": 43,
        "changed_files": 3,
        "created_at": "2017-10-28T20:33:21Z",
        "closed_at": "2017-11-05T06:12:33Z",
        "merged_at": null,
        "body": "fixes #421 \r\n\r\nThe current architecture creates. runs and removes a container each time a lambda is ran. This adds a fair amount of overhead to the the execution process. \r\n\r\nThis PR will create lasting docker containers for each invoked function and expire that container if it's hasn't been invokes for 10 minutes. The performance impact can be seen in the integration tests. The first invoke takes between 700 and 1500 milliseconds to run. Subsequent calls take 100 milliseconds.\r\n\r\nAll the tests run well with one exception. In tests/integration/test_lambda.py:115. For some reason, the result is always empty for kinesis events. If I comment out line 115, I can get the integration tests to run.\r\n\r\nThoughts?",
        "comments": 4
    },
    {
        "merged": false,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2017-10-25T08:57:40Z",
        "closed_at": "2017-11-06T05:29:14Z",
        "merged_at": null,
        "body": "Argument order for string pattern was wrong, breaking LAMBDA_REMOTE_DOCKER completely.\r\n\r\n**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 36,
        "deletions": 25,
        "changed_files": 12,
        "created_at": "2017-10-20T04:12:10Z",
        "closed_at": "2017-10-20T10:59:14Z",
        "merged_at": "2017-10-20T10:59:14Z",
        "body": "This PR addresses issue #359\r\n* fix chunked encoding for S3 uploads\r\n* refactor `GenericProxyHandler` class",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 26,
        "deletions": 5,
        "changed_files": 1,
        "created_at": "2017-10-19T00:09:26Z",
        "closed_at": "2017-10-23T23:33:44Z",
        "merged_at": "2017-10-23T23:33:44Z",
        "body": "See comment for details: https://github.com/localstack/localstack/issues/359#issuecomment-337758803\r\n\r\nIt seems there is an issue that uploads over >128k do not work with the same error as being reported here. I get a message such as:\r\n```\r\nUnable to verify integrity of data upload.  Client calculated content hash (contentMD5: 8eET31STItFmGOd/IrNlCA== in base 64) didn't match hash (etag: 7eebd4a71c4c983bd38c1a227c22b236 in hex) calculated by Amazon S3.  You may need to delete the data stored in Amazon S3. (metadata.contentMD5: 8eET31STItFmGOd/IrNlCA==, md5DigestStream: null, bucketName: 4d52e9a7-8666-4149-9ff8-70d22e035782, key: 187c0368-1f2b-4062-883a-cf40ccfff568)\r\n\r\n```\r\nAdditionally if I suppress the exception and continue anyway the assert on the lengths of the returned object differs... so it would appear uploads over 128k are indeed getting corrupted:\r\n``` \r\njava.lang.AssertionError: array lengths differed, expected.length=156482 actual.length=156478\r\n\tat org.junit.Assert.fail(Assert.java:88)\r\n       ...\r\n```\r\n\r\nThis does seem to be a Java SDK specific issue. Or at least I have no problem uploading >128k objects using the AWS CLI.\r\n",
        "comments": 7
    },
    {
        "merged": true,
        "additions": 24,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2017-10-13T18:10:40Z",
        "closed_at": "2017-10-14T00:49:51Z",
        "merged_at": "2017-10-14T00:49:51Z",
        "body": "ShardIDs returned from the DynamoDBStreams emulator now mimic ShardIDs\r\nin the production service.  Namely, they comply with the length requirements\r\nin botocore.  Each returned ShardID is > 28 characters in length.\r\n\r\nAs ShardIDs from Kinesis are appended with `-$UUID5`.  The UUID5 value\r\ngenerated is relative to the Kinesis stream name as well as the Kinesis\r\nShardID, ensuring that the value is consistent across multiple calls to\r\n`describe_stream`.  Before ShardID values are passed through to\r\nKinesis, they are unwrapped to the original Kinesis value.\r\n\r\n**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 63,
        "deletions": 4,
        "changed_files": 5,
        "created_at": "2017-10-08T01:26:52Z",
        "closed_at": "2017-10-08T02:31:24Z",
        "merged_at": "2017-10-08T02:31:24Z",
        "body": "* Fix S3 bucket policy response (see #382 )\r\n* Bump to latest version of `moto`",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 38,
        "deletions": 22,
        "changed_files": 5,
        "created_at": "2017-10-07T03:56:31Z",
        "closed_at": "2017-10-08T01:24:53Z",
        "merged_at": "2017-10-08T01:24:53Z",
        "body": "The changes in this PR are copied over from #375 . Minor modifications have been made to get the tests running.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 0,
        "deletions": 6,
        "changed_files": 1,
        "created_at": "2017-10-05T19:23:38Z",
        "closed_at": "2018-09-02T19:33:46Z",
        "merged_at": "2018-09-02T19:33:46Z",
        "body": "Moto runs both in-memory as well as in server mode and the test suite runs against both execution modes. Localstack is *awesome* and is much needed and this clarifies the distinction between Localstack and Moto a little.\r\n",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 27,
        "deletions": 17,
        "changed_files": 3,
        "created_at": "2017-10-05T17:46:50Z",
        "closed_at": "2017-10-08T01:26:21Z",
        "merged_at": null,
        "body": "https://github.com/localstack/localstack/issues/373\r\n\r\nI did not add `invoke-async` support as it's depreciated and `invoke` with `InvocationType` = `Event` should be used. See http://docs.aws.amazon.com/lambda/latest/dg/API_InvokeAsync.html",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2017-10-04T17:30:39Z",
        "closed_at": "2017-10-08T00:37:33Z",
        "merged_at": "2017-10-08T00:37:33Z",
        "body": "Fixes error when deploying cloudformation stack:\r\nTypeError: deploy_template() takes exactly 2 arguments (1 given)",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 110,
        "deletions": 29,
        "changed_files": 7,
        "created_at": "2017-10-03T14:27:24Z",
        "closed_at": "2017-10-04T15:07:21Z",
        "merged_at": "2017-10-04T15:07:21Z",
        "body": "Here's an attempt to add SNSEvent and RequestStreamHandler support to lambda.\r\nMore events can be added later.\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 129,
        "deletions": 5,
        "changed_files": 8,
        "created_at": "2017-10-02T04:59:44Z",
        "closed_at": "2017-10-02T13:00:50Z",
        "merged_at": "2017-10-02T13:00:50Z",
        "body": "Return raw data instead of b64 encoded strings for Java Lambda Kinesis records. (see #356)",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 63,
        "deletions": 78,
        "changed_files": 1,
        "created_at": "2017-10-02T01:05:56Z",
        "closed_at": "2017-10-03T00:54:55Z",
        "merged_at": "2017-10-03T00:54:55Z",
        "body": "What do you think about this way of testing @whummer. Uses the test_client instead of calling directly methods when there is request data.\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 35,
        "deletions": 5,
        "changed_files": 5,
        "created_at": "2017-09-30T01:42:28Z",
        "closed_at": "2017-09-30T18:31:02Z",
        "merged_at": "2017-09-30T18:31:02Z",
        "body": "Workaround to allow dots in SQS queue names. This is a temporary workaround to allow creation of fifo queues (currently not supported directly by ElasticMQ) - See #335",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 4,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2017-09-29T00:22:01Z",
        "closed_at": "2017-10-07T23:09:51Z",
        "merged_at": null,
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n\r\nThe subject is empty for http endpoints. This is an easy fix that adds the subject to the message.",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2017-09-28T15:25:56Z",
        "closed_at": "2017-09-28T23:07:37Z",
        "merged_at": "2017-09-28T23:07:37Z",
        "body": "",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2017-09-27T15:36:46Z",
        "closed_at": "2017-09-29T21:26:22Z",
        "merged_at": "2017-09-29T21:26:22Z",
        "body": "Bucket notifications configuration requests were failing for a while, as they were picked up as file upload/download requests.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 224,
        "deletions": 34,
        "changed_files": 4,
        "created_at": "2017-09-27T02:43:29Z",
        "closed_at": "2017-09-30T04:25:39Z",
        "merged_at": "2017-09-30T04:25:39Z",
        "body": "Also allow the invocation of versions and aliases by placing the function in the versions dictionary of LambdaFunction",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 63,
        "deletions": 11,
        "changed_files": 2,
        "created_at": "2017-09-24T11:08:57Z",
        "closed_at": "2017-09-25T19:50:43Z",
        "merged_at": "2017-09-25T19:50:43Z",
        "body": "The Unsubscribe action now removes the subscription from SNS_SUBSCRIPTIONS.\r\n\r\nTo make it more testable I've pulled out the functions related to the subscriptions model - e.g. do_unsubscribe() and do_subscribe() into individual functions",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 63,
        "deletions": 72,
        "changed_files": 4,
        "created_at": "2017-09-23T21:55:41Z",
        "closed_at": "2017-09-25T01:00:41Z",
        "merged_at": "2017-09-25T01:00:41Z",
        "body": "",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 25,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2017-09-21T02:19:15Z",
        "closed_at": "2017-09-21T22:32:57Z",
        "merged_at": "2017-09-21T22:32:57Z",
        "body": "UUID should be capitalized.\r\n+ Tests\r\n",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 25,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2017-09-20T02:53:07Z",
        "closed_at": "2017-09-20T11:03:58Z",
        "merged_at": null,
        "body": "UUID should be capitalized.\r\n+ Tests\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2017-09-19T18:37:16Z",
        "closed_at": "2017-09-20T17:22:27Z",
        "merged_at": "2017-09-20T17:22:27Z",
        "body": "If no \"boundary\" is found, proceed as before. Closes #310.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 45,
        "deletions": 3,
        "changed_files": 5,
        "created_at": "2017-09-18T12:51:48Z",
        "closed_at": "2017-09-20T13:46:06Z",
        "merged_at": "2017-09-20T13:46:06Z",
        "body": "Have added lines for running SSM via moto. Opinions on this?\r\n\r\nAlso haven't included tests as its running via moto so really moto should test SSM right? But I can add some if needed.",
        "comments": 4
    },
    {
        "merged": false,
        "additions": 22,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2017-09-14T14:48:45Z",
        "closed_at": "2017-10-08T20:04:36Z",
        "merged_at": null,
        "body": "Attempt to fix #321 ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2017-09-14T13:30:28Z",
        "closed_at": "2017-09-14T22:42:58Z",
        "merged_at": "2017-09-14T22:42:58Z",
        "body": "Link to https://github.com/localstack/awscli-local repository in README so people doesn't have to guess where to find it :smile: ",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 118,
        "deletions": 1,
        "changed_files": 3,
        "created_at": "2017-09-13T19:12:39Z",
        "closed_at": "2017-09-15T00:09:40Z",
        "merged_at": "2017-09-15T00:09:40Z",
        "body": "",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 117,
        "deletions": 1,
        "changed_files": 3,
        "created_at": "2017-09-13T03:08:12Z",
        "closed_at": "2017-09-13T18:59:47Z",
        "merged_at": null,
        "body": "",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 18,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2017-09-11T20:51:32Z",
        "closed_at": "2017-09-13T17:39:39Z",
        "merged_at": "2017-09-13T17:39:39Z",
        "body": "Added known function details to `create-function` response.\r\n\r\nSample call:\r\n\r\n    aws --endpoint-url http://localhost:4574 lambda create-function --runtime python3.6 --role Nobody --handler lambda.score_plan --function-name 'WOMP' --zip-file fileb://lambda.zip --description 'the-desc' --timeout 30 --memory-size 128 --publish --dead-letter-config TargetArn=the-dlc\r\n\r\nSample output:\r\n\r\n```\r\n{\r\n    \"FunctionName\": \"WOMP\",\r\n    \"FunctionArn\": \"arn:aws:lambda:us-east-1:000000000000:function:WOMP\",\r\n    \"Runtime\": \"python3.6\",\r\n    \"Role\": \"Nobody\",\r\n    \"Handler\": \"lambda.score_plan\",\r\n    \"Description\": \"the-desc\",\r\n    \"Timeout\": 30,\r\n    \"MemorySize\": 128,\r\n    \"VpcConfig\": {\r\n        \"SubnetIds\": [\r\n            null\r\n        ],\r\n        \"SecurityGroupIds\": [\r\n            null\r\n        ]\r\n    },\r\n    \"DeadLetterConfig\": {\r\n        \"TargetArn\": \"the-dlc\"\r\n    },\r\n    \"Environment\": {\r\n        \"Variables\": {},\r\n        \"Error\": {}\r\n    },\r\n    \"TracingConfig\": {}\r\n}\r\n```\r\n\r\n- [ ] Add tests if this makes sense.\r\n\r\nCloses #305.",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 5,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2017-09-07T10:52:23Z",
        "closed_at": "2017-09-12T01:01:41Z",
        "merged_at": "2017-09-12T01:01:41Z",
        "body": "GenericProxyHandler does not always send the correct data when\r\nforwarding requests. self.data_bytes is not properly cleaned up on all\r\nrequest types.\r\n\r\nThis commit resets self.data_bytes in the following cases:\r\n\r\n- DELETE, HEAD and OPTIONS requests\r\n- GET requests lacking content-length header",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 146,
        "deletions": 33,
        "changed_files": 6,
        "created_at": "2017-09-05T11:50:01Z",
        "closed_at": "2017-09-05T16:36:35Z",
        "merged_at": "2017-09-05T16:36:35Z",
        "body": "Add a test case, extend functionality for API Gateway path parameters. This PR builds on the changes in #251 . \r\n\r\n@KamuelaFranco I've pulled your branch, rebased onto master, and squashed your commits into a single one. Then I added another commit with a few changes on top of it - this way we ensure that your contribution is preserved in this PR.\r\n\r\nCan you please check out this branch and give it a try? Thanks",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 146,
        "deletions": 175,
        "changed_files": 46,
        "created_at": "2017-09-04T12:45:12Z",
        "closed_at": "2017-09-05T01:18:18Z",
        "merged_at": "2017-09-05T01:18:18Z",
        "body": "Enable flake8 and fix all lint errors",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2017-09-04T07:47:58Z",
        "closed_at": "2017-09-04T12:49:01Z",
        "merged_at": "2017-09-04T12:49:01Z",
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 37,
        "deletions": 34,
        "changed_files": 2,
        "created_at": "2017-09-04T05:30:49Z",
        "closed_at": "2017-09-04T06:46:32Z",
        "merged_at": "2017-09-04T06:46:32Z",
        "body": "Fix undefined names reported by flake8 (fix #290, #291)",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2017-09-04T00:07:07Z",
        "closed_at": "2017-09-04T03:37:09Z",
        "merged_at": "2017-09-04T03:37:09Z",
        "body": "Adds call to `os.makedirs()` in `localstack.utils.common.download()` to ensure that downloaded files are created in new directories.\r\n\r\nCloses https://github.com/localstack/localstack/issues/292",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 7,
        "deletions": 9,
        "changed_files": 1,
        "created_at": "2017-09-03T09:30:08Z",
        "closed_at": "2017-09-03T10:48:54Z",
        "merged_at": "2017-09-03T10:48:54Z",
        "body": "http://docs.python-guide.org/en/latest/writing/gotchas\r\n\r\nAlso simplify with dict.get() with default value and list comprehension.\r\n\r\n**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 40,
        "deletions": 21,
        "changed_files": 8,
        "created_at": "2017-09-02T10:27:01Z",
        "closed_at": "2017-09-02T11:58:47Z",
        "merged_at": "2017-09-02T11:58:47Z",
        "body": "Add configuration overrides for service backend URLs. (see #258)",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 58,
        "deletions": 10,
        "changed_files": 6,
        "created_at": "2017-09-01T14:36:26Z",
        "closed_at": "2017-09-02T06:01:41Z",
        "merged_at": "2017-09-02T06:01:41Z",
        "body": "Replace moto SQS with ElasticMQ.",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 26,
        "deletions": 8,
        "changed_files": 3,
        "created_at": "2017-09-01T03:51:34Z",
        "closed_at": "2017-09-01T07:13:38Z",
        "merged_at": "2017-09-01T07:13:38Z",
        "body": "Expose `$LOCALSTACK_HOSTNAME`",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 6,
        "deletions": 6,
        "changed_files": 2,
        "created_at": "2017-08-29T18:04:26Z",
        "closed_at": "2017-10-08T21:43:39Z",
        "merged_at": null,
        "body": "My attempts to clean up my fork inadvertently closed my previous PR. Here are my changes in a single commit.\r\n\r\nI also attempted to install default /root/.aws/{config|credentials} files with odd results. The boto3 behavior around this stuff seems very uneven. I think we're on the right track but I haven't time to dig further at this point. It is going to take some experimentation to figure out the right combination here. Thanks!",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 78,
        "deletions": 37,
        "changed_files": 2,
        "created_at": "2017-08-29T17:04:16Z",
        "closed_at": "2017-08-30T03:20:47Z",
        "merged_at": "2017-08-30T03:20:47Z",
        "body": "Filter notifications by bucket key prefix/suffix (see #245).",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 0,
        "deletions": 0,
        "changed_files": 0,
        "created_at": "2017-08-28T04:39:48Z",
        "closed_at": "2017-08-29T15:21:50Z",
        "merged_at": null,
        "body": "The issue surrounds the use of aws profiles stored in ~/.aws. When these are used, boto3 does not construct correctly because 1) AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY are set in the environment (foobar/foobar) and 2) `None` must be sent in as region_name. \r\n\r\nI reduced my required changes down to these two small changes. It is possible through --entrypoint and creative `unsets` in the bash command to mask out these AWS keys, but it seems like it would be better to not set them by default. \r\n\r\nHave a look here. The steps to reproduce are to use a ~/.aws/{config|credentials} profile (created by `aws configure`. Have no AWS* env set in the host. Also map in `-v ~/.aws:/root/.aws` as is common when these profiles are used with docker",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 25,
        "deletions": 3,
        "changed_files": 4,
        "created_at": "2017-08-27T14:39:05Z",
        "closed_at": "2017-08-27T16:49:16Z",
        "merged_at": "2017-08-27T16:49:16Z",
        "body": "Add support for python 3 lambdas",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 228,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2017-08-27T06:59:16Z",
        "closed_at": "2017-08-29T05:11:49Z",
        "merged_at": "2017-08-29T05:11:49Z",
        "body": "S3 offers a POST operation for use in browser-based uploads: http://docs.aws.amazon.com/AmazonS3/latest/API/RESTObjectPOST.html\r\n\r\n> POST is an alternate form of PUT that enables browser-based uploads as a way of putting objects in buckets. Parameters that are passed to PUT via HTTP Headers are instead passed as form fields to POST in the multipart/form-data encoded message body. \r\n\r\nThis change modifies HTTP request bodies and response headers to match Amazon\u2019s documented behavior. I\u2019ve made these changes in `localstack.services.s3.s3_listener.ProxyListenerS3` \u2014\u00a0is this a good place for them? If yes, I\u2019ll follow up with a few tests of the new behavior.\r\n\r\n- [x] Add tests",
        "comments": 8
    },
    {
        "merged": true,
        "additions": 21,
        "deletions": 23,
        "changed_files": 5,
        "created_at": "2017-08-27T06:36:15Z",
        "closed_at": "2017-08-27T08:57:06Z",
        "merged_at": "2017-08-27T08:57:06Z",
        "body": "Don't install kclpy libs by default",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 66,
        "deletions": 18,
        "changed_files": 4,
        "created_at": "2017-08-25T00:01:20Z",
        "closed_at": "2017-08-30T06:49:22Z",
        "merged_at": "2017-08-30T06:49:22Z",
        "body": "Adds custom environment variables for Lambda invocations when `LAMBDA_EXECUTOR=docker` is used. Part of https://github.com/localstack/localstack/issues/187.\r\n\r\n- [x] Include environment vars [when invoked without Docker](https://github.com/migurski/localstack/blob/00d5bc08e47e5c434bfcafdb7b245f808dd503ed/localstack/services/awslambda/lambda_api.py#L289-L303) or when [executed under Python directly](https://github.com/migurski/localstack/blob/00d5bc08e47e5c434bfcafdb7b245f808dd503ed/localstack/services/awslambda/lambda_api.py#L448-L449).\r\n- [x] Add tests.\r\n\r\nI\u2019ll expand on this if it\u2019s a workable direction?",
        "comments": 6
    },
    {
        "merged": false,
        "additions": 46,
        "deletions": 10,
        "changed_files": 2,
        "created_at": "2017-08-20T12:30:34Z",
        "closed_at": "2017-09-05T16:39:45Z",
        "merged_at": null,
        "body": "First iteration of fix for #229.\r\n",
        "comments": 11
    },
    {
        "merged": true,
        "additions": 10,
        "deletions": 8,
        "changed_files": 2,
        "created_at": "2017-08-17T08:11:53Z",
        "closed_at": "2017-08-17T09:15:52Z",
        "merged_at": "2017-08-17T09:15:52Z",
        "body": "set no_proxy insted of ignore proxy, this is better solution for issue #239.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 94,
        "deletions": 25,
        "changed_files": 9,
        "created_at": "2017-08-15T01:00:27Z",
        "closed_at": "2017-08-16T07:49:26Z",
        "merged_at": "2017-08-16T07:49:26Z",
        "body": "Fix issue with incomplete parallel downloads",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 259,
        "deletions": 143,
        "changed_files": 11,
        "created_at": "2017-08-13T02:03:33Z",
        "closed_at": "2017-08-13T11:49:22Z",
        "merged_at": "2017-08-13T11:49:22Z",
        "body": "* refactor CLI and enable plugins\r\n* force flush to disk in `download()` function\r\n* release version 0.7.4\r\n* extend docs\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2017-08-04T23:38:21Z",
        "closed_at": "2017-08-05T07:52:03Z",
        "merged_at": "2017-08-05T07:52:03Z",
        "body": "Fix incorrect module in nosetest example",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 95,
        "deletions": 13,
        "changed_files": 11,
        "created_at": "2017-07-31T23:06:03Z",
        "closed_at": "2017-08-05T08:02:28Z",
        "merged_at": "2017-08-05T08:02:28Z",
        "body": "I'll need some guidance to get the test in working order. Fixes #222 ",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 34,
        "deletions": 3,
        "changed_files": 2,
        "created_at": "2017-07-31T14:27:53Z",
        "closed_at": "2017-08-27T04:48:40Z",
        "merged_at": "2017-08-27T04:48:40Z",
        "body": "This pull request adds backers and sponsors from your Open Collective https://opencollective.com/localstack \u2764\ufe0f\n  \n  It adds two badges at the top to show the latest number of backers and sponsors. It also adds placeholders so that the avatar/logo of new backers/sponsors can automatically be shown without having to update your README.md. [[more info](https://github.com/opencollective/opencollective/wiki/Github-banner)]. See how it looks on [this repo](https://github.com/apex/apex#backers).\nYou can also add a \"Donate\" button to your website and automatically show your backers and sponsors there with our widgets. Have a look here: https://opencollective.com/widgets\n\n  P.S: As with any pull request, feel free to comment or suggest changes. The only thing \"required\" are the placeholders on the README because we believe it's important to acknowledge the people in your community that are contributing (financially or with code!).\n\n  Thank you for your great contribution to the open source community. You are awesome! \ud83d\ude4c\n  And welcome to the open collective community! \ud83d\ude0a\n\n  Come chat with us in the #opensource channel on https://slack.opencollective.com - great place to ask questions and share best practices with other open source sustainers!\n  ",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 24,
        "deletions": 54,
        "changed_files": 7,
        "created_at": "2017-07-29T04:09:42Z",
        "closed_at": "2017-07-29T06:04:43Z",
        "merged_at": "2017-07-29T06:04:43Z",
        "body": "* refactor code to start flask services\r\n* remove some dead code",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2017-07-28T18:00:26Z",
        "closed_at": "2017-07-29T04:06:32Z",
        "merged_at": "2017-07-29T04:06:32Z",
        "body": "**Please refer to the contribution guidelines in the README when submitting PRs.**\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 19,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2017-07-23T08:57:26Z",
        "closed_at": "2017-07-23T10:06:22Z",
        "merged_at": "2017-07-23T10:06:22Z",
        "body": "Fix S3 file access from Spark",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 5,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2017-07-21T13:40:25Z",
        "closed_at": "2017-07-22T06:28:25Z",
        "merged_at": "2017-07-22T06:28:25Z",
        "body": "Pursuant to http://docs.aws.amazon.com/apigateway/latest/developerguide/api-gateway-set-up-simple-proxy.html#api-gateway-simple-proxy-for-lambda-output-format, this PR brings the behavior of Localstack's API Gateway response in line with what is expected from AWS.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 222,
        "deletions": 56,
        "changed_files": 12,
        "created_at": "2017-07-19T10:02:42Z",
        "closed_at": "2017-07-19T13:28:54Z",
        "merged_at": "2017-07-19T13:28:54Z",
        "body": "Extend and integrate Java tests in CI",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 9,
        "deletions": 2,
        "changed_files": 3,
        "created_at": "2017-07-19T04:50:49Z",
        "closed_at": "2017-07-19T06:27:55Z",
        "merged_at": "2017-07-19T06:27:55Z",
        "body": "This PR adds the missing `amazon-kclpy` package to requirements (local tests currently fail without the package). The PR also adds an exclusion marker to the package because we don't want it to be included in the localstack pip package.\r\n\r\nSupersedes https://github.com/localstack/localstack/pull/180",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 1,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2017-07-19T02:05:36Z",
        "closed_at": "2017-07-19T04:54:25Z",
        "merged_at": null,
        "body": "\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 72,
        "deletions": 97,
        "changed_files": 12,
        "created_at": "2017-07-17T15:33:25Z",
        "closed_at": "2017-07-18T05:09:33Z",
        "merged_at": "2017-07-18T05:09:33Z",
        "body": "* refactor configuration\r\n* make base installation more light-weight\r\n* lazy loading of libraries",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2017-07-16T04:19:09Z",
        "closed_at": "2017-07-16T05:31:45Z",
        "merged_at": "2017-07-16T05:31:44Z",
        "body": "Related to PR #160 (I created).\r\n\r\nIn addition, add headers needed on delete operations to `Access-Control-Allow-Headers`",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 55,
        "deletions": 28,
        "changed_files": 10,
        "created_at": "2017-07-16T03:51:45Z",
        "closed_at": "2017-07-16T14:34:36Z",
        "merged_at": "2017-07-16T14:34:36Z",
        "body": "* Release version 0.6.1\r\n* Minor config refactoring",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 7,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2017-07-15T14:41:14Z",
        "closed_at": "2017-07-15T15:50:18Z",
        "merged_at": "2017-07-15T15:50:18Z",
        "body": "I use S3 and DynamoDB on localstack.\r\n\r\nThank you for commit 985a840 which I am needed.\r\nBut still CORS error occured as following.\r\n\r\n![20170715_1](https://user-images.githubusercontent.com/9500018/28240133-6a0ef150-69b6-11e7-8c33-487abb0f1ffe.png)\r\n\r\nSo I added `Access-Control-Allow-Headers` and It worked well.\r\n\r\nBest regards.",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2017-07-15T03:30:10Z",
        "closed_at": "2017-07-15T04:39:56Z",
        "merged_at": "2017-07-15T04:39:56Z",
        "body": "Minor fix for CI setup",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 6,
        "deletions": 3,
        "changed_files": 1,
        "created_at": "2017-07-14T13:50:47Z",
        "closed_at": "2017-07-16T14:33:24Z",
        "merged_at": "2017-07-16T14:33:24Z",
        "body": "Don't clobber the HEAD content-length with zero",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2017-07-04T21:47:12Z",
        "closed_at": "2017-07-05T00:18:32Z",
        "merged_at": "2017-07-05T00:18:32Z",
        "body": "Fixes issue described in https://github.com/localstack/localstack/issues/144",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 118,
        "deletions": 20,
        "changed_files": 7,
        "created_at": "2017-05-05T18:29:53Z",
        "closed_at": "2017-05-09T02:12:38Z",
        "merged_at": null,
        "body": "- `delete_function` will no longer error out (500 internal error) when deleting a function that doesn't exist \r\n- added [update_event_source_mapping](http://boto3.readthedocs.io/en/latest/reference/services/lambda.html#Lambda.Client.update_event_source_mapping)\r\n- added [delete_event_source_mapping](http://boto3.readthedocs.io/en/latest/reference/services/lambda.html#Lambda.Client.delete_event_source_mapping)\r\n- `list_event_source_mappings` is modified per [AWS doc](https://docs.aws.amazon.com/lambda/latest/dg/API_ListEventSourceMappings.html), it will return all mappings unless `EventSourceArn` and/or `FunctionName` are in the request, in which case only matched items will be returned. This helps the user decide if a specific mapping already exists before calling `update_event_source_mapping`",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 15,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2017-05-03T05:46:36Z",
        "closed_at": "2017-05-13T11:37:21Z",
        "merged_at": "2017-05-13T11:37:21Z",
        "body": "Added docker-compose.yml for another option for running localstack",
        "comments": 5
    },
    {
        "merged": true,
        "additions": 67,
        "deletions": 61,
        "changed_files": 2,
        "created_at": "2017-04-25T08:15:16Z",
        "closed_at": "2017-04-25T10:13:49Z",
        "merged_at": "2017-04-25T10:13:49Z",
        "body": "Also fix pip install of virtualenv to be user local - avoid sudo where user needs to enter password....\r\n",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2017-03-31T06:34:01Z",
        "closed_at": "2017-04-03T00:13:51Z",
        "merged_at": null,
        "body": "Fixed typo\r\n\r\n**Please note: The main version of this repository is https://bitbucket.org/atlassian/localstack, please raise PRs against that repo.**\r\n",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 1,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2017-03-30T16:35:36Z",
        "closed_at": "2017-03-31T00:38:08Z",
        "merged_at": null,
        "body": "**Please note: The main version of this repository is https://bitbucket.org/atlassian/localstack, please raise PRs against that repo.**\r\n",
        "comments": 3
    },
    {
        "merged": false,
        "additions": 75,
        "deletions": 39,
        "changed_files": 5,
        "created_at": "2017-03-29T15:21:12Z",
        "closed_at": "2017-03-31T00:37:09Z",
        "merged_at": null,
        "body": "Added the Web interface/dashboard to the docker image (and little refactor for comments in the `Makefile`).\r\n\r\n**NOTE**: I temporary excluded ElasticSearch from `DEFAULT_APIS` list inside `localstack/mock/infra.py` due to #46 ",
        "comments": 8
    },
    {
        "merged": false,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2017-03-28T22:00:37Z",
        "closed_at": "2017-03-29T09:34:38Z",
        "merged_at": null,
        "body": "",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2017-03-27T19:15:22Z",
        "closed_at": "2017-03-27T23:27:03Z",
        "merged_at": "2017-03-27T23:27:03Z",
        "body": "occuring \u2192 occurring",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 10,
        "deletions": 7,
        "changed_files": 4,
        "created_at": "2017-01-04T23:33:35Z",
        "closed_at": "2017-01-05T01:08:25Z",
        "merged_at": "2017-01-05T01:08:25Z",
        "body": "new since i last merged:\r\n- test actually tests something\r\n- version bump",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 50,
        "deletions": 4,
        "changed_files": 3,
        "created_at": "2016-12-28T04:16:33Z",
        "closed_at": "2017-01-04T01:22:16Z",
        "merged_at": "2017-01-04T01:22:16Z",
        "body": "@goodmanship I'm creating this draft PR from your branch so we can discuss the code changes.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 46,
        "deletions": 6,
        "changed_files": 4,
        "created_at": "2016-12-21T08:00:30Z",
        "closed_at": "2016-12-22T04:42:57Z",
        "merged_at": "2016-12-22T04:42:57Z",
        "body": "This PR adds auto-checkpointing for records received from KCL via MultiLangDaemon.",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 93,
        "deletions": 33,
        "changed_files": 9,
        "created_at": "2016-12-19T01:06:40Z",
        "closed_at": "2016-12-19T02:30:35Z",
        "merged_at": "2016-12-19T02:30:35Z",
        "body": "Fix #1 : Speed up installation time by lazy loading libraries.",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 27,
        "deletions": 4,
        "changed_files": 3,
        "created_at": "2016-11-29T14:54:05Z",
        "closed_at": "2016-11-30T11:43:44Z",
        "merged_at": null,
        "body": "The following PR:\r\n - Allows running just certain _apis_ from input \r\n\r\nExamples:\r\n`$> make infra kinesis firehose lambda`\r\n\r\n`$> ./bin/localstack infra s3 kinesis firehose lambda`",
        "comments": 1
    }
]